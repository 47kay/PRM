/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/app.controller.ts":
/*!*******************************!*\
  !*** ./src/app.controller.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AppController: () => (/* binding */ AppController)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _app_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app.service */ "./src/app.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




let AppController = class AppController {
    constructor(appService) {
        this.appService = appService;
    }
    getInfo() {
        return {
            name: 'Patient Relationship Manager',
            version: process.env.APP_VERSION || '1.0.0',
            environment: process.env.NODE_ENV || 'development',
            timestamp: new Date().toISOString(),
        };
    }
    async healthCheck() {
        const health = await this.appService.checkHealth();
        return {
            status: health.isHealthy ? 'healthy' : 'unhealthy',
            timestamp: new Date().toISOString(),
            services: health.services,
            uptime: process.uptime(),
            memory: process.memoryUsage(),
        };
    }
    ping() {
        return { message: 'pong', timestamp: new Date().toISOString() };
    }
};
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get application info' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: 200, description: 'Application info retrieved successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", void 0)
], AppController.prototype, "getInfo", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('health'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Health check endpoint' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: 200, description: 'System is healthy' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], AppController.prototype, "healthCheck", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('ping'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Simple ping endpoint' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: 200, description: 'Pong' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", void 0)
], AppController.prototype, "ping", null);
AppController = __decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiTags)('System'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Controller)(),
    __metadata("design:paramtypes", [_app_service__WEBPACK_IMPORTED_MODULE_2__.AppService])
], AppController);



/***/ }),

/***/ "./src/app.module.ts":
/*!***************************!*\
  !*** ./src/app.module.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AppModule: () => (/* binding */ AppModule)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_throttler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/throttler */ "@nestjs/throttler");
/* harmony import */ var _nestjs_throttler__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_throttler__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _nestjs_schedule__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
/* harmony import */ var _nestjs_schedule__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_nestjs_schedule__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _nestjs_bull__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @nestjs/bull */ "../node_modules/@nestjs/bull/dist/index.js");
/* harmony import */ var _nestjs_bull__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_nestjs_bull__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_nestjs_core__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _app_controller__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./app.controller */ "./src/app.controller.ts");
/* harmony import */ var _app_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./app.service */ "./src/app.service.ts");
/* harmony import */ var _modules_users_users_module__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./modules/users/users.module */ "./src/modules/users/users.module.ts");
/* harmony import */ var _modules_auth_auth_module__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./modules/auth/auth.module */ "./src/modules/auth/auth.module.ts");
/* harmony import */ var _modules_organizations_organizations_module__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./modules/organizations/organizations.module */ "./src/modules/organizations/organizations.module.ts");
/* harmony import */ var _modules_contacts_contacts_module__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./modules/contacts/contacts.module */ "./src/modules/contacts/contacts.module.ts");
/* harmony import */ var _modules_appointments_appointments_module__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./modules/appointments/appointments.module */ "./src/modules/appointments/appointments.module.ts");
/* harmony import */ var _modules_tickets_tickets_module__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./modules/tickets/tickets.module */ "./src/modules/tickets/tickets.module.ts");
/* harmony import */ var _modules_messages_messages_module__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./modules/messages/messages.module */ "./src/modules/messages/messages.module.ts");
/* harmony import */ var _modules_notifications_notifications_module__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./modules/notifications/notifications.module */ "./src/modules/notifications/notifications.module.ts");
/* harmony import */ var _config_app_config__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./config/app.config */ "./src/config/app.config.ts");
/* harmony import */ var _config_database_config__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./config/database.config */ "./src/config/database.config.ts");
/* harmony import */ var _config_redis_config__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./config/redis.config */ "./src/config/redis.config.ts");
/* harmony import */ var _config_mail_config__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./config/mail.config */ "./src/config/mail.config.ts");
/* harmony import */ var _config_jwt_config__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./config/jwt.config */ "./src/config/jwt.config.ts");
/* harmony import */ var _common_filters_http_exception_filter__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./common/filters/http-exception.filter */ "./src/common/filters/http-exception.filter.ts");
/* harmony import */ var _common_interceptors_transform_interceptor__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./common/interceptors/transform.interceptor */ "./src/common/interceptors/transform.interceptor.ts");
/* harmony import */ var _config_throttler_config__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./config/throttler.config */ "./src/config/throttler.config.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



























let AppModule = class AppModule {
};
AppModule = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Module)({
        imports: [
            _nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigModule.forRoot({
                isGlobal: true,
                load: [_config_app_config__WEBPACK_IMPORTED_MODULE_18__["default"], _config_database_config__WEBPACK_IMPORTED_MODULE_19__["default"], _config_redis_config__WEBPACK_IMPORTED_MODULE_20__["default"], _config_mail_config__WEBPACK_IMPORTED_MODULE_21__["default"], _config_jwt_config__WEBPACK_IMPORTED_MODULE_22__["default"]],
            }),
            _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.TypeOrmModule.forRootAsync({
                inject: [_nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigService],
                useFactory: (configService) => ({
                    type: 'postgres',
                    host: configService.get('database.host'),
                    port: configService.get('database.port'),
                    username: configService.get('database.username'),
                    password: configService.get('database.password'),
                    database: configService.get('database.name'),
                    entities: ['dist/**/*.entity{.ts,.js}'],
                    synchronize: configService.get('database.synchronize'),
                    logging: configService.get('database.logging'),
                    ssl: configService.get('database.ssl'),
                }),
            }),
            _nestjs_bull__WEBPACK_IMPORTED_MODULE_6__.BullModule.forRootAsync({
                imports: [_nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigModule],
                inject: [_nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigService],
                useFactory: async (configService) => {
                    const host = configService.get('redis.host');
                    const port = configService.get('redis.port');
                    const password = configService.get('redis.password');
                    const redisUrl = password
                        ? `redis://:${password}@${host}:${port}`
                        : `redis://${host}:${port}`;
                    return {
                        url: redisUrl
                    };
                },
            }),
            _nestjs_throttler__WEBPACK_IMPORTED_MODULE_3__.ThrottlerModule.forRootAsync({
                imports: [_nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigModule],
                useClass: _config_throttler_config__WEBPACK_IMPORTED_MODULE_25__.ThrottlerConfigService,
            }),
            _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_4__.EventEmitterModule.forRoot({
                wildcard: true,
                delimiter: '.',
                maxListeners: 20,
                verboseMemoryLeak: true,
            }),
            _nestjs_schedule__WEBPACK_IMPORTED_MODULE_5__.ScheduleModule.forRoot(),
            _modules_users_users_module__WEBPACK_IMPORTED_MODULE_10__.UsersModule,
            _modules_auth_auth_module__WEBPACK_IMPORTED_MODULE_11__.AuthModule,
            _modules_organizations_organizations_module__WEBPACK_IMPORTED_MODULE_12__.OrganizationsModule,
            _modules_contacts_contacts_module__WEBPACK_IMPORTED_MODULE_13__.ContactsModule,
            _modules_appointments_appointments_module__WEBPACK_IMPORTED_MODULE_14__.AppointmentsModule,
            _modules_tickets_tickets_module__WEBPACK_IMPORTED_MODULE_15__.TicketsModule,
            _modules_messages_messages_module__WEBPACK_IMPORTED_MODULE_16__.MessagesModule,
            _modules_notifications_notifications_module__WEBPACK_IMPORTED_MODULE_17__.NotificationsModule,
        ],
        controllers: [_app_controller__WEBPACK_IMPORTED_MODULE_8__.AppController],
        providers: [
            _app_service__WEBPACK_IMPORTED_MODULE_9__.AppService,
            {
                provide: _nestjs_core__WEBPACK_IMPORTED_MODULE_7__.APP_FILTER,
                useClass: _common_filters_http_exception_filter__WEBPACK_IMPORTED_MODULE_23__.HttpExceptionFilter,
            },
            {
                provide: _nestjs_core__WEBPACK_IMPORTED_MODULE_7__.APP_INTERCEPTOR,
                useClass: _common_interceptors_transform_interceptor__WEBPACK_IMPORTED_MODULE_24__.TransformInterceptor,
            },
            {
                provide: _nestjs_core__WEBPACK_IMPORTED_MODULE_7__.APP_GUARD,
                useClass: _nestjs_throttler__WEBPACK_IMPORTED_MODULE_3__.ThrottlerGuard,
            },
        ],
    })
], AppModule);



/***/ }),

/***/ "./src/app.service.ts":
/*!****************************!*\
  !*** ./src/app.service.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AppService: () => (/* binding */ AppService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_bull__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/bull */ "../node_modules/@nestjs/bull/dist/index.js");
/* harmony import */ var _nestjs_bull__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_bull__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ioredis */ "ioredis");
/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ioredis__WEBPACK_IMPORTED_MODULE_3__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




let AppService = class AppService {
    constructor(configService, notificationsQueue, messagesQueue) {
        this.configService = configService;
        this.notificationsQueue = notificationsQueue;
        this.messagesQueue = messagesQueue;
        this.redis = new ioredis__WEBPACK_IMPORTED_MODULE_3__.Redis({
            host: this.configService.get('redis.host'),
            port: this.configService.get('redis.port'),
            password: this.configService.get('redis.password'),
        });
    }
    async checkHealth() {
        const services = {
            database: await this.checkDatabase(),
            redis: await this.checkRedis(),
            queues: await this.checkQueues(),
            memory: this.checkMemory(),
        };
        const isHealthy = Object.values(services).every(service => service.status === 'healthy');
        return {
            isHealthy,
            services,
            timestamp: new Date().toISOString(),
        };
    }
    async checkDatabase() {
        try {
            const result = await this.checkDatabaseQuery();
            return {
                status: 'healthy',
                latency: result.latency,
            };
        }
        catch (error) {
            return {
                status: 'unhealthy',
                error: error.message,
            };
        }
    }
    async checkDatabaseQuery() {
        const startTime = Date.now();
        await this.configService.get('database');
        const latency = Date.now() - startTime;
        return { latency };
    }
    async checkRedis() {
        try {
            const startTime = Date.now();
            await this.redis.ping();
            const latency = Date.now() - startTime;
            return {
                status: 'healthy',
                latency,
            };
        }
        catch (error) {
            return {
                status: 'unhealthy',
                error: error.message,
            };
        }
    }
    async checkQueues() {
        try {
            const queues = {
                notifications: await this.checkQueueHealth(this.notificationsQueue),
                messages: await this.checkQueueHealth(this.messagesQueue),
            };
            const isHealthy = Object.values(queues).every(queue => queue.status === 'healthy');
            return {
                status: isHealthy ? 'healthy' : 'unhealthy',
                queues,
            };
        }
        catch (error) {
            return {
                status: 'unhealthy',
                error: error.message,
            };
        }
    }
    async checkQueueHealth(queue) {
        try {
            const [active, waiting, completed, failed] = await Promise.all([
                queue.getActiveCount(),
                queue.getWaitingCount(),
                queue.getCompletedCount(),
                queue.getFailedCount(),
            ]);
            return {
                status: 'healthy',
                metrics: {
                    active,
                    waiting,
                    completed,
                    failed,
                },
            };
        }
        catch (error) {
            return {
                status: 'unhealthy',
                error: error.message,
            };
        }
    }
    checkMemory() {
        const memory = process.memoryUsage();
        const memoryThreshold = this.configService.get('app.memoryThreshold') || 0.9;
        const isHealthy = memory.heapUsed / memory.heapTotal < memoryThreshold;
        return {
            status: isHealthy ? 'healthy' : 'warning',
            metrics: {
                heapUsed: this.formatBytes(memory.heapUsed),
                heapTotal: this.formatBytes(memory.heapTotal),
                rss: this.formatBytes(memory.rss),
                external: this.formatBytes(memory.external),
            },
            usage: (memory.heapUsed / memory.heapTotal * 100).toFixed(2) + '%',
        };
    }
    formatBytes(bytes) {
        const units = ['B', 'KB', 'MB', 'GB'];
        let size = bytes;
        let unitIndex = 0;
        while (size >= 1024 && unitIndex < units.length - 1) {
            size /= 1024;
            unitIndex++;
        }
        return `${size.toFixed(2)}${units[unitIndex]}`;
    }
};
AppService = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(1, (0,_nestjs_bull__WEBPACK_IMPORTED_MODULE_2__.InjectQueue)('notifications')),
    __param(2, (0,_nestjs_bull__WEBPACK_IMPORTED_MODULE_2__.InjectQueue)('messages')),
    __metadata("design:paramtypes", [_nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigService, Object, Object])
], AppService);



/***/ }),

/***/ "./src/common/decorators/auth.decorator.ts":
/*!*************************************************!*\
  !*** ./src/common/decorators/auth.decorator.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AUTH_ORG_KEY: () => (/* binding */ AUTH_ORG_KEY),
/* harmony export */   AUTH_ROLES_KEY: () => (/* binding */ AUTH_ROLES_KEY),
/* harmony export */   Auth: () => (/* binding */ Auth),
/* harmony export */   CurrentOrganization: () => (/* binding */ CurrentOrganization),
/* harmony export */   CurrentUser: () => (/* binding */ CurrentUser),
/* harmony export */   Public: () => (/* binding */ Public),
/* harmony export */   RequireOrganization: () => (/* binding */ RequireOrganization)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _modules_auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../modules/auth/guards/jwt-auth.guard */ "./src/modules/auth/guards/jwt-auth.guard.ts");
/* harmony import */ var _modules_auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../modules/auth/guards/roles.guard */ "./src/modules/auth/guards/roles.guard.ts");




const AUTH_ROLES_KEY = 'roles';
const AUTH_ORG_KEY = 'requireOrganization';
function Auth(options = {}) {
    const { roles = [], requireOrganization = true } = options;
    return (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.applyDecorators)((0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.SetMetadata)(AUTH_ROLES_KEY, roles), (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.SetMetadata)(AUTH_ORG_KEY, requireOrganization), (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UseGuards)(_modules_auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__.JwtAuthGuard, _modules_auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__.RolesGuard), (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_1__.ApiBearerAuth)(), (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_1__.ApiUnauthorizedResponse)({ description: 'Unauthorized' }));
}
function Public() {
    return (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.SetMetadata)('isPublic', true);
}
function RequireOrganization() {
    return (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.SetMetadata)(AUTH_ORG_KEY, true);
}

const CurrentUser = (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.createParamDecorator)((data, ctx) => {
    const request = ctx.switchToHttp().getRequest();
    const user = request.user;
    return data ? user === null || user === void 0 ? void 0 : user[data] : user;
});
const CurrentOrganization = (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.createParamDecorator)((data, ctx) => {
    const request = ctx.switchToHttp().getRequest();
    const organization = request.organization;
    return data ? organization === null || organization === void 0 ? void 0 : organization[data] : organization;
});


/***/ }),

/***/ "./src/common/decorators/current-user.decorator.ts":
/*!*********************************************************!*\
  !*** ./src/common/decorators/current-user.decorator.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CurrentUser: () => (/* binding */ CurrentUser),
/* harmony export */   TypedCurrentUser: () => (/* binding */ TypedCurrentUser)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);

const CurrentUser = (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.createParamDecorator)((data, context) => {
    const request = context.switchToHttp().getRequest();
    const user = request.user;
    if (!user) {
        return null;
    }
    if (!data) {
        return user;
    }
    return data.split('.').reduce((obj, key) => {
        return obj === null || obj === void 0 ? void 0 : obj[key];
    }, user);
});
const TypedCurrentUser = (propertyPath) => CurrentUser(propertyPath);


/***/ }),

/***/ "./src/common/decorators/roles.decorator.ts":
/*!**************************************************!*\
  !*** ./src/common/decorators/roles.decorator.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PERMISSIONS_KEY: () => (/* binding */ PERMISSIONS_KEY),
/* harmony export */   Permission: () => (/* binding */ Permission),
/* harmony export */   Permissions: () => (/* binding */ Permissions),
/* harmony export */   ROLES_KEY: () => (/* binding */ ROLES_KEY),
/* harmony export */   RolePermissions: () => (/* binding */ RolePermissions),
/* harmony export */   Roles: () => (/* binding */ Roles),
/* harmony export */   getRolePermissions: () => (/* binding */ getRolePermissions),
/* harmony export */   hasPermission: () => (/* binding */ hasPermission)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../modules/users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");


const ROLES_KEY = 'roles';
const Roles = (...roles) => (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.SetMetadata)(ROLES_KEY, roles);
const PERMISSIONS_KEY = 'permissions';
var Permission;
(function (Permission) {
    Permission["MANAGE_USERS"] = "manage_users";
    Permission["VIEW_USERS"] = "view_users";
    Permission["MANAGE_CONTACTS"] = "manage_contacts";
    Permission["VIEW_CONTACTS"] = "view_contacts";
    Permission["MANAGE_APPOINTMENTS"] = "manage_appointments";
    Permission["VIEW_APPOINTMENTS"] = "view_appointments";
    Permission["BOOK_APPOINTMENTS"] = "book_appointments";
    Permission["MANAGE_TICKETS"] = "manage_tickets";
    Permission["VIEW_TICKETS"] = "view_tickets";
    Permission["CREATE_TICKETS"] = "create_tickets";
    Permission["ASSIGN_TICKETS"] = "assign_tickets";
    Permission["SEND_MESSAGES"] = "send_messages";
    Permission["VIEW_MESSAGES"] = "view_messages";
    Permission["MANAGE_ORGANIZATION"] = "manage_organization";
    Permission["VIEW_ORGANIZATION"] = "view_organization";
    Permission["MANAGE_SETTINGS"] = "manage_settings";
    Permission["VIEW_SETTINGS"] = "view_settings";
})(Permission || (Permission = {}));
const Permissions = (...permissions) => (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.SetMetadata)(PERMISSIONS_KEY, permissions);
const RolePermissions = {
    [_modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__.Role.SUPER_ADMIN]: Object.values(Permission),
    [_modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__.Role.ADMIN]: [
        Permission.MANAGE_USERS,
        Permission.VIEW_USERS,
        Permission.MANAGE_CONTACTS,
        Permission.VIEW_CONTACTS,
        Permission.MANAGE_APPOINTMENTS,
        Permission.VIEW_APPOINTMENTS,
        Permission.MANAGE_TICKETS,
        Permission.VIEW_TICKETS,
        Permission.SEND_MESSAGES,
        Permission.VIEW_MESSAGES,
        Permission.MANAGE_ORGANIZATION,
        Permission.VIEW_ORGANIZATION,
        Permission.MANAGE_SETTINGS,
        Permission.VIEW_SETTINGS,
    ],
    [_modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__.Role.DOCTOR]: [
        Permission.VIEW_CONTACTS,
        Permission.MANAGE_APPOINTMENTS,
        Permission.VIEW_APPOINTMENTS,
        Permission.VIEW_TICKETS,
        Permission.CREATE_TICKETS,
        Permission.SEND_MESSAGES,
        Permission.VIEW_MESSAGES,
    ],
    [_modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__.Role.STAFF]: [
        Permission.VIEW_CONTACTS,
        Permission.VIEW_APPOINTMENTS,
        Permission.BOOK_APPOINTMENTS,
        Permission.VIEW_TICKETS,
        Permission.CREATE_TICKETS,
        Permission.SEND_MESSAGES,
        Permission.VIEW_MESSAGES,
    ],
    [_modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__.Role.RECEPTIONIST]: [
        Permission.VIEW_CONTACTS,
        Permission.BOOK_APPOINTMENTS,
        Permission.VIEW_APPOINTMENTS,
        Permission.CREATE_TICKETS,
        Permission.VIEW_TICKETS,
        Permission.SEND_MESSAGES,
        Permission.VIEW_MESSAGES,
    ],
    [_modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__.Role.AGENT]: [],
    [_modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__.Role.SUPERVISOR]: [],
    [_modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__.Role.CLIENT]: [],
    [_modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__.Role.USER]: [],
    [_modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__.Role.GUEST]: [],
    [_modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__.Role.MANAGER]: [],
    [_modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__.Role.NURSE]: [],
    [_modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_1__.Role.PATIENT]: []
};
function hasPermission(role, permission) {
    var _a;
    return ((_a = RolePermissions[role]) === null || _a === void 0 ? void 0 : _a.includes(permission)) || false;
}
function getRolePermissions(role) {
    return RolePermissions[role] || [];
}


/***/ }),

/***/ "./src/common/filters/http-exception.filter.ts":
/*!*****************************************************!*\
  !*** ./src/common/filters/http-exception.filter.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpExceptionFilter: () => (/* binding */ HttpExceptionFilter)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var HttpExceptionFilter_1;


let HttpExceptionFilter = HttpExceptionFilter_1 = class HttpExceptionFilter {
    constructor() {
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(HttpExceptionFilter_1.name);
    }
    catch(exception, host) {
        const ctx = host.switchToHttp();
        const response = ctx.getResponse();
        const request = ctx.getRequest();
        let status = _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.INTERNAL_SERVER_ERROR;
        let message = 'Internal server error';
        let error = 'Internal Server Error';
        if (exception instanceof _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpException) {
            status = exception.getStatus();
            const errorResponse = exception.getResponse();
            if (typeof errorResponse === 'object' && 'message' in errorResponse) {
                message = errorResponse.message;
                error = errorResponse.error || this.getErrorName(status);
            }
            else {
                message = exception.message;
                error = this.getErrorName(status);
            }
        }
        else if (exception instanceof typeorm__WEBPACK_IMPORTED_MODULE_1__.QueryFailedError) {
            status = _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.BAD_REQUEST;
            message = 'Database operation failed';
            error = 'Database Error';
            if (exception.message.includes('duplicate key')) {
                message = 'A record with this value already exists';
                error = 'Duplicate Entry';
            }
        }
        else if (exception instanceof Error) {
            message = exception.message;
        }
        const errorResponse = {
            statusCode: status,
            message,
            error,
            path: request.url,
            timestamp: new Date().toISOString(),
            method: request.method,
            correlationId: request.headers['x-correlation-id'],
        };
        this.logError(errorResponse, exception);
        response
            .status(status)
            .json(errorResponse);
    }
    getErrorName(status) {
        switch (status) {
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.BAD_REQUEST:
                return 'Bad Request';
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.UNAUTHORIZED:
                return 'Unauthorized';
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.FORBIDDEN:
                return 'Forbidden';
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.NOT_FOUND:
                return 'Not Found';
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.CONFLICT:
                return 'Conflict';
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.UNPROCESSABLE_ENTITY:
                return 'Unprocessable Entity';
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.TOO_MANY_REQUESTS:
                return 'Too Many Requests';
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.INTERNAL_SERVER_ERROR:
                return 'Internal Server Error';
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.BAD_GATEWAY:
                return 'Bad Gateway';
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.SERVICE_UNAVAILABLE:
                return 'Service Unavailable';
            default:
                return 'Error';
        }
    }
    logError(errorResponse, exception) {
        const logMessage = Object.assign(Object.assign({}, errorResponse), { stack: exception instanceof Error ? exception.stack : undefined });
        if (errorResponse.statusCode >= 500) {
            this.logger.error(JSON.stringify(logMessage));
        }
        else {
            this.logger.warn(JSON.stringify(logMessage));
        }
    }
};
HttpExceptionFilter = HttpExceptionFilter_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Catch)()
], HttpExceptionFilter);



/***/ }),

/***/ "./src/common/guards/organization.guard.ts":
/*!*************************************************!*\
  !*** ./src/common/guards/organization.guard.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationGuard: () => (/* binding */ OrganizationGuard)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_core__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _modules_organizations_services_organizations_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../modules/organizations/services/organizations.service */ "./src/modules/organizations/services/organizations.service.ts");
/* harmony import */ var _decorators_auth_decorator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../decorators/auth.decorator */ "./src/common/decorators/auth.decorator.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




let OrganizationGuard = class OrganizationGuard {
    constructor(reflector, organizationService) {
        this.reflector = reflector;
        this.organizationService = organizationService;
    }
    async canActivate(context) {
        const requireOrganization = this.reflector.getAllAndOverride(_decorators_auth_decorator__WEBPACK_IMPORTED_MODULE_3__.AUTH_ORG_KEY, [context.getHandler(), context.getClass()]);
        if (!requireOrganization) {
            return true;
        }
        const request = context.switchToHttp().getRequest();
        const user = request.user;
        if (!user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('User not found');
        }
        if (!user.organizationId) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ForbiddenException('User is not associated with any organization');
        }
        try {
            const organization = await this.organizationService.findOne(user.organizationId);
            if (!organization) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ForbiddenException('Organization not found');
            }
            if (organization.status !== 'ACTIVE') {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ForbiddenException('Organization is inactive');
            }
            if (!this.isSubscriptionValid(organization)) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ForbiddenException('Organization subscription is invalid or expired');
            }
            await this.checkOrganizationLimits(organization, request);
            request.organization = organization;
            return true;
        }
        catch (error) {
            if (error instanceof _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ForbiddenException || error instanceof _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException) {
                throw error;
            }
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ForbiddenException('Organization access denied');
        }
    }
    isSubscriptionValid(organization) {
        const now = new Date();
        const subscriptionEnd = organization.subscriptionEndDate;
        if (!organization.isSubscriptionActive) {
            return false;
        }
        if (subscriptionEnd && subscriptionEnd < now) {
            return false;
        }
        return true;
    }
    async checkOrganizationLimits(organization, request) {
        if (organization.maxUsers > 0) {
            const userCount = await this.organizationService.getAdminCount(organization.id);
            if (userCount >= organization.maxUsers) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ForbiddenException('Organization user limit reached');
            }
        }
        if (organization.maxStorage > 0 && request.url.includes('/storage')) {
            const statistics = await this.organizationService.getStatistics(organization.id);
            if (statistics.storageUsed >= organization.maxStorage) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ForbiddenException('Organization storage limit reached');
            }
        }
        const requestedFeature = this.getRequestedFeature(request);
        if (requestedFeature && !this.hasFeatureAccess(organization, requestedFeature)) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ForbiddenException(`Access to ${requestedFeature} feature is not included in your plan`);
        }
    }
    getRequestedFeature(request) {
        const featureMap = {
            '/api/messages/whatsapp': 'WHATSAPP_INTEGRATION',
            '/api/analytics': 'ADVANCED_ANALYTICS',
            '/api/export': 'DATA_EXPORT',
        };
        for (const [endpoint, feature] of Object.entries(featureMap)) {
            if (request.url.includes(endpoint)) {
                return feature;
            }
        }
        return null;
    }
    hasFeatureAccess(organization, feature) {
        const tierFeatures = this.getTierFeatures(organization.subscriptionTier);
        return tierFeatures.includes(feature);
    }
    getTierFeatures(tier) {
        const tierFeaturesMap = {
            'FREE': ['BASIC'],
            'BASIC': ['BASIC', 'DATA_EXPORT'],
            'PROFESSIONAL': ['BASIC', 'DATA_EXPORT', 'ADVANCED_ANALYTICS'],
            'ENTERPRISE': ['BASIC', 'DATA_EXPORT', 'ADVANCED_ANALYTICS', 'WHATSAPP_INTEGRATION'],
        };
        return tierFeaturesMap[tier] || [];
    }
};
OrganizationGuard = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_nestjs_core__WEBPACK_IMPORTED_MODULE_1__.Reflector,
        _modules_organizations_services_organizations_service__WEBPACK_IMPORTED_MODULE_2__.OrganizationsService])
], OrganizationGuard);



/***/ }),

/***/ "./src/common/interceptors/transform.interceptor.ts":
/*!**********************************************************!*\
  !*** ./src/common/interceptors/transform.interceptor.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TransformInterceptor: () => (/* binding */ TransformInterceptor)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ "rxjs/operators");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



let TransformInterceptor = class TransformInterceptor {
    intercept(context, next) {
        const request = context.switchToHttp().getRequest();
        const response = context.switchToHttp().getResponse();
        const status = response.statusCode || _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.OK;
        return next.handle().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(data => {
            if (data === null || data === undefined) {
                return this.buildResponse(null, status, request);
            }
            const transformedData = this.transformData(data);
            if (this.isPaginatedResponse(transformedData)) {
                return this.buildPaginatedResponse(transformedData, status, request);
            }
            return this.buildResponse(transformedData, status, request);
        }));
    }
    buildResponse(data, status, request, paginationMeta) {
        return {
            statusCode: status,
            message: this.getStatusMessage(status),
            data,
            metadata: Object.assign({ timestamp: new Date().toISOString(), path: request.url, version: process.env.API_VERSION || '1.0' }, (paginationMeta && { pagination: paginationMeta })),
        };
    }
    buildPaginatedResponse(data, status, request) {
        const { items } = data, paginationMeta = __rest(data, ["items"]);
        return this.buildResponse(items, status, request, paginationMeta);
    }
    transformData(data) {
        if (data && typeof data === 'object') {
            return (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.classToPlain)(data, {
                excludePrefixes: ['_'],
                enableCircularCheck: true,
            });
        }
        return data;
    }
    isPaginatedResponse(data) {
        return (data &&
            Array.isArray(data.items) &&
            typeof data.page === 'number' &&
            typeof data.limit === 'number' &&
            typeof data.total === 'number' &&
            typeof data.totalPages === 'number');
    }
    getStatusMessage(status) {
        switch (status) {
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.OK:
                return 'Success';
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.CREATED:
                return 'Created successfully';
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.ACCEPTED:
                return 'Request accepted';
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.NO_CONTENT:
                return 'No content';
            case _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.PARTIAL_CONTENT:
                return 'Partial content';
            default:
                return 'Operation completed';
        }
    }
};
TransformInterceptor = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)()
], TransformInterceptor);



/***/ }),

/***/ "./src/config/app.config.ts":
/*!**********************************!*\
  !*** ./src/config/app.config.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   appConfigValidationSchema: () => (/* binding */ appConfigValidationSchema),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! joi */ "joi");
/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(joi__WEBPACK_IMPORTED_MODULE_1__);


const appConfigValidationSchema = joi__WEBPACK_IMPORTED_MODULE_1__.object({
    NODE_ENV: joi__WEBPACK_IMPORTED_MODULE_1__.string()
        .valid('development', 'production', 'test', 'staging')
        .default('development'),
    APP_NAME: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('Patient Relationship Manager'),
    APP_HOST: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('localhost'),
    APP_PORT: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(3000),
    API_PREFIX: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('api'),
    API_VERSION: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('v1'),
    FRONTEND_URL: joi__WEBPACK_IMPORTED_MODULE_1__.string().required(),
    DOCS_ENABLED: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(true),
    RATE_LIMIT_TTL: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(60),
    RATE_LIMIT_MAX: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(100),
    CORS_ENABLED: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(true),
    CORS_ORIGINS: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('*'),
    LOG_LEVEL: joi__WEBPACK_IMPORTED_MODULE_1__.string()
        .valid('error', 'warn', 'info', 'debug', 'verbose')
        .default('info'),
    LOG_CONSOLE: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(true),
    LOG_FILE: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_nestjs_config__WEBPACK_IMPORTED_MODULE_0__.registerAs)('app', () => {
    var _a;
    return ({
        nodeEnv: process.env.NODE_ENV || 'development',
        name: process.env.APP_NAME || 'Patient Relationship Manager',
        host: process.env.APP_HOST || 'localhost',
        port: parseInt(process.env.APP_PORT || '3000', 10),
        apiPrefix: process.env.API_PREFIX || 'api',
        apiVersion: process.env.API_VERSION || 'v1',
        frontendUrl: process.env.FRONTEND_URL,
        docsEnabled: process.env.DOCS_ENABLED === 'true',
        rateLimiting: {
            ttl: parseInt(process.env.RATE_LIMIT_TTL || '60', 10),
            limit: parseInt(process.env.RATE_LIMIT_MAX || '100', 10),
        },
        cors: {
            enabled: process.env.CORS_ENABLED === 'true',
            origins: ((_a = process.env.CORS_ORIGINS) === null || _a === void 0 ? void 0 : _a.split(',')) || ['*'],
        },
        logging: {
            level: process.env.LOG_LEVEL || 'info',
            console: process.env.LOG_CONSOLE === 'true',
            file: process.env.LOG_FILE === 'true',
        },
    });
}));


/***/ }),

/***/ "./src/config/database.config.ts":
/*!***************************************!*\
  !*** ./src/config/database.config.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   dataSource: () => (/* binding */ dataSource),
/* harmony export */   databaseConfigValidationSchema: () => (/* binding */ databaseConfigValidationSchema),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   typeOrmConfig: () => (/* binding */ typeOrmConfig),
/* harmony export */   typeOrmConfigSync: () => (/* binding */ typeOrmConfigSync)
/* harmony export */ });
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! joi */ "joi");
/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(joi__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);



const databaseConfigValidationSchema = joi__WEBPACK_IMPORTED_MODULE_1__.object({
    DB_HOST: joi__WEBPACK_IMPORTED_MODULE_1__.string().required(),
    DB_PORT: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(5432),
    DB_USERNAME: joi__WEBPACK_IMPORTED_MODULE_1__.string().required(),
    DB_PASSWORD: joi__WEBPACK_IMPORTED_MODULE_1__.string().required(),
    DB_NAME: joi__WEBPACK_IMPORTED_MODULE_1__.string().required(),
    DB_SCHEMA: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('public'),
    DB_SSL: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),
    DB_SYNC: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),
    DB_LOGGING: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),
    DB_MAX_CONNECTIONS: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(100),
    DB_MIN_CONNECTIONS: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(1),
    DB_CONNECTION_TIMEOUT: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(10000),
    DB_RETRY_ATTEMPTS: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(10),
    DB_RETRY_DELAY: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(3000),
    DB_MIGRATIONS_ENABLED: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(true),
    DB_MIGRATIONS_DIR: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('src/database/migrations'),
    DB_MIGRATIONS_TABLE: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('migrations'),
});
const config = (0,_nestjs_config__WEBPACK_IMPORTED_MODULE_0__.registerAs)('database', () => ({
    host: process.env.DB_HOST,
    port: parseInt(process.env.DB_PORT || '5432', 10),
    username: process.env.DB_USERNAME,
    password: process.env.DB_PASSWORD,
    database: process.env.DB_NAME,
    schema: process.env.DB_SCHEMA || 'public',
    ssl: process.env.DB_SSL === 'true',
    synchronize: process.env.DB_SYNC === 'true',
    logging: process.env.DB_LOGGING === 'true',
    maxConnections: parseInt(process.env.DB_MAX_CONNECTIONS || '100', 10),
    minConnections: parseInt(process.env.DB_MIN_CONNECTIONS || '1', 10),
    connectionTimeout: parseInt(process.env.DB_CONNECTION_TIMEOUT || '10000', 10),
    retryAttempts: parseInt(process.env.DB_RETRY_ATTEMPTS || '10', 10),
    retryDelay: parseInt(process.env.DB_RETRY_DELAY || '3000', 10),
    migrations: {
        enabled: process.env.DB_MIGRATIONS_ENABLED === 'true',
        directory: process.env.DB_MIGRATIONS_DIR || 'src/database/migrations',
        tableName: process.env.DB_MIGRATIONS_TABLE || 'migrations',
    },
}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (config);
const typeOrmConfig = async () => {
    const dbConfig = config();
    return {
        type: 'postgres',
        host: dbConfig.host,
        port: dbConfig.port,
        username: dbConfig.username,
        password: dbConfig.password,
        database: dbConfig.database,
        schema: dbConfig.schema,
        ssl: dbConfig.ssl ? { rejectUnauthorized: false } : false,
        synchronize: dbConfig.synchronize,
        logging: dbConfig.logging,
        entities: ['dist/**/*.entity.js'],
        migrations: [`${dbConfig.migrations.directory}/*.{ts,js}`],
        migrationsTableName: dbConfig.migrations.tableName,
        migrationsRun: dbConfig.migrations.enabled,
        poolSize: dbConfig.maxConnections,
        connectTimeoutMS: dbConfig.connectionTimeout,
        extra: {
            max: dbConfig.maxConnections,
            min: dbConfig.minConnections,
        },
        autoLoadEntities: true,
    };
};
const typeOrmConfigSync = () => {
    const dbConfig = config();
    return {
        type: 'postgres',
        host: dbConfig.host,
        port: dbConfig.port,
        username: dbConfig.username,
        password: dbConfig.password,
        database: dbConfig.database,
        schema: dbConfig.schema,
        ssl: dbConfig.ssl ? { rejectUnauthorized: false } : false,
        synchronize: dbConfig.synchronize,
        logging: dbConfig.logging,
        entities: ['src/**/*.entity.ts'],
        migrations: [`${dbConfig.migrations.directory}/*.ts`],
        migrationsTableName: dbConfig.migrations.tableName,
        migrationsRun: dbConfig.migrations.enabled,
        extra: {
            max: dbConfig.maxConnections,
            min: dbConfig.minConnections,
            connectionTimeout: dbConfig.connectionTimeout,
        },
    };
};
const dataSource = new typeorm__WEBPACK_IMPORTED_MODULE_2__.DataSource(typeOrmConfigSync());


/***/ }),

/***/ "./src/config/jwt.config.ts":
/*!**********************************!*\
  !*** ./src/config/jwt.config.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   jwtConfigValidationSchema: () => (/* binding */ jwtConfigValidationSchema),
/* harmony export */   jwtModuleConfig: () => (/* binding */ jwtModuleConfig)
/* harmony export */ });
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! joi */ "joi");
/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(joi__WEBPACK_IMPORTED_MODULE_1__);


const jwtConfigValidationSchema = joi__WEBPACK_IMPORTED_MODULE_1__.object({
    JWT_SECRET: joi__WEBPACK_IMPORTED_MODULE_1__.string().required(),
    JWT_ACCESS_TOKEN_EXP: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(3600),
    JWT_ACCESS_TOKEN_ALG: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('HS256'),
    JWT_ACCESS_TOKEN_ISSUER: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('prm-api'),
    JWT_ACCESS_TOKEN_AUDIENCE: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('prm-client'),
    JWT_REFRESH_TOKEN_EXP: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(604800),
    JWT_REFRESH_TOKEN_ALG: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('HS256'),
    JWT_REFRESH_TOKEN_ISSUER: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('prm-api'),
    JWT_REFRESH_TOKEN_AUDIENCE: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('prm-client'),
    JWT_IGNORE_EXPIRATION: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),
    JWT_IGNORE_NOT_BEFORE: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_nestjs_config__WEBPACK_IMPORTED_MODULE_0__.registerAs)('jwt', () => ({
    secret: process.env.JWT_SECRET,
    accessToken: {
        expiresIn: parseInt(process.env.JWT_ACCESS_TOKEN_EXP || '3600', 10),
        algorithm: process.env.JWT_ACCESS_TOKEN_ALG || 'HS256',
        issuer: process.env.JWT_ACCESS_TOKEN_ISSUER || 'prm-api',
        audience: process.env.JWT_ACCESS_TOKEN_AUDIENCE || 'prm-client',
    },
    refreshToken: {
        expiresIn: parseInt(process.env.JWT_REFRESH_TOKEN_EXP || '604800', 10),
        algorithm: process.env.JWT_REFRESH_TOKEN_ALG || 'HS256',
        issuer: process.env.JWT_REFRESH_TOKEN_ISSUER || 'prm-api',
        audience: process.env.JWT_REFRESH_TOKEN_AUDIENCE || 'prm-client',
    },
    verifyOptions: {
        ignoreExpiration: process.env.JWT_IGNORE_EXPIRATION === 'true',
        ignoreNotBefore: process.env.JWT_IGNORE_NOT_BEFORE === 'true',
    },
})));
const jwtModuleConfig = {
    secret: process.env.JWT_SECRET,
    signOptions: {
        expiresIn: process.env.JWT_ACCESS_TOKEN_EXP || '1h',
        algorithm: process.env.JWT_ACCESS_TOKEN_ALG || 'HS256',
        issuer: process.env.JWT_ACCESS_TOKEN_ISSUER || 'prm-api',
        audience: process.env.JWT_ACCESS_TOKEN_AUDIENCE || 'prm-client',
    },
    verifyOptions: {
        ignoreExpiration: process.env.JWT_IGNORE_EXPIRATION === 'true',
        ignoreNotBefore: process.env.JWT_IGNORE_NOT_BEFORE === 'true',
    },
};


/***/ }),

/***/ "./src/config/mail.config.ts":
/*!***********************************!*\
  !*** ./src/config/mail.config.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   emailTemplates: () => (/* binding */ emailTemplates),
/* harmony export */   getMailConfig: () => (/* binding */ getMailConfig),
/* harmony export */   mailConfigValidationSchema: () => (/* binding */ mailConfigValidationSchema),
/* harmony export */   mailerConfig: () => (/* binding */ mailerConfig)
/* harmony export */ });
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! joi */ "joi");
/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(joi__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_modules_mailer_dist_adapters_handlebars_adapter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs-modules/mailer/dist/adapters/handlebars.adapter */ "@nestjs-modules/mailer/dist/adapters/handlebars.adapter");
/* harmony import */ var _nestjs_modules_mailer_dist_adapters_handlebars_adapter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_modules_mailer_dist_adapters_handlebars_adapter__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ "path");
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);




const mailConfigValidationSchema = joi__WEBPACK_IMPORTED_MODULE_1__.object({
    MAIL_HOST: joi__WEBPACK_IMPORTED_MODULE_1__.string().required(),
    MAIL_PORT: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(587),
    MAIL_SECURE: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),
    MAIL_USER: joi__WEBPACK_IMPORTED_MODULE_1__.string().required(),
    MAIL_PASS: joi__WEBPACK_IMPORTED_MODULE_1__.string().required(),
    MAIL_FROM: joi__WEBPACK_IMPORTED_MODULE_1__.string().required(),
    MAIL_FROM_NAME: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('PRM System'),
    MAIL_TEMPLATE_DIR: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('src/templates/email'),
    MAIL_QUEUE_ENABLED: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(true),
    MAIL_RETRY_ATTEMPTS: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(3),
    MAIL_RETRY_DELAY: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(1000),
    MAIL_CONCURRENCY: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(5),
    MAIL_RATE_LIMIT_ENABLED: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(true),
    MAIL_RATE_LIMIT_PER_HOUR: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(100),
});
const mailConfig = (0,_nestjs_config__WEBPACK_IMPORTED_MODULE_0__.registerAs)('mail', () => ({
    host: process.env.MAIL_HOST,
    port: parseInt(process.env.MAIL_PORT || '587', 10),
    secure: process.env.MAIL_SECURE === 'true',
    auth: {
        user: process.env.MAIL_USER,
        pass: process.env.MAIL_PASS,
    },
    defaults: {
        from: `"${process.env.MAIL_FROM_NAME || 'PRM System'}" <${process.env.MAIL_FROM}>`,
    },
    template: {
        dir: process.env.MAIL_TEMPLATE_DIR || (0,path__WEBPACK_IMPORTED_MODULE_3__.join)(__dirname, '..', 'templates', 'email'),
        adapter: new _nestjs_modules_mailer_dist_adapters_handlebars_adapter__WEBPACK_IMPORTED_MODULE_2__.HandlebarsAdapter(),
        options: {
            strict: true,
        },
    },
    queueing: {
        enabled: process.env.MAIL_QUEUE_ENABLED === 'true',
        retryAttempts: parseInt(process.env.MAIL_RETRY_ATTEMPTS || '3', 10),
        retryDelay: parseInt(process.env.MAIL_RETRY_DELAY || '1000', 10),
        concurrency: parseInt(process.env.MAIL_CONCURRENCY || '5', 10),
    },
    rateLimit: {
        enabled: process.env.MAIL_RATE_LIMIT_ENABLED === 'true',
        maxPerHour: parseInt(process.env.MAIL_RATE_LIMIT_PER_HOUR || '100', 10),
    },
}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mailConfig);
const getMailConfig = () => {
    return mailConfig();
};
const mailerConfig = () => {
    const config = getMailConfig();
    return {
        transport: {
            host: config.host,
            port: config.port,
            secure: config.secure,
            auth: {
                user: config.auth.user,
                pass: config.auth.pass,
            },
        },
        defaults: config.defaults,
        template: config.template,
        options: {
            partials: {
                dir: (0,path__WEBPACK_IMPORTED_MODULE_3__.join)(config.template.dir, 'partials'),
                options: {
                    strict: true,
                },
            },
        },
    };
};
const emailTemplates = {
    welcome: (name) => ({
        subject: 'Welcome to PRM System',
        template: 'welcome',
        context: { name },
    }),
    resetPassword: (token) => ({
        subject: 'Reset Your Password',
        template: 'reset-password',
        context: { token },
    }),
    appointmentReminder: (appointment) => ({
        subject: 'Appointment Reminder',
        template: 'appointment-reminder',
        context: { appointment },
    }),
    appointmentConfirmation: (appointment) => ({
        subject: 'Appointment Confirmation',
        template: 'appointment-confirmation',
        context: { appointment },
    }),
};


/***/ }),

/***/ "./src/config/redis.config.ts":
/*!************************************!*\
  !*** ./src/config/redis.config.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   getCacheConfig: () => (/* binding */ getCacheConfig),
/* harmony export */   getRedisConfig: () => (/* binding */ getRedisConfig),
/* harmony export */   getRedisOptions: () => (/* binding */ getRedisOptions),
/* harmony export */   redisConfigValidationSchema: () => (/* binding */ redisConfigValidationSchema),
/* harmony export */   redisKeys: () => (/* binding */ redisKeys)
/* harmony export */ });
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! joi */ "joi");
/* harmony import */ var joi__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(joi__WEBPACK_IMPORTED_MODULE_1__);


const redisConfigValidationSchema = joi__WEBPACK_IMPORTED_MODULE_1__.object({
    REDIS_HOST: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('localhost'),
    REDIS_PORT: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(6379),
    REDIS_PASSWORD: joi__WEBPACK_IMPORTED_MODULE_1__.string().allow('').optional(),
    REDIS_DB: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(0),
    REDIS_KEY_PREFIX: joi__WEBPACK_IMPORTED_MODULE_1__.string().default('prm:'),
    REDIS_CONNECTION_TIMEOUT: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(10000),
    REDIS_MAX_RETRIES: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(10),
    REDIS_RETRY_MAX_DELAY: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(5000),
    REDIS_CACHE_TTL: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(3600),
    REDIS_CACHE_MAX: joi__WEBPACK_IMPORTED_MODULE_1__.number().default(10000),
    REDIS_CLUSTER_ENABLED: joi__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),
    REDIS_CLUSTER_NODES: joi__WEBPACK_IMPORTED_MODULE_1__.string().when('REDIS_CLUSTER_ENABLED', {
        is: true,
        then: joi__WEBPACK_IMPORTED_MODULE_1__.required(),
    }),
});
const redisConfig = (0,_nestjs_config__WEBPACK_IMPORTED_MODULE_0__.registerAs)('redis', () => {
    var _a;
    return ({
        host: process.env.REDIS_HOST || 'localhost',
        port: parseInt(process.env.REDIS_PORT || '6379', 10),
        password: process.env.REDIS_PASSWORD,
        db: parseInt(process.env.REDIS_DB || '0', 10),
        keyPrefix: process.env.REDIS_KEY_PREFIX || 'prm:',
        connectTimeout: parseInt(process.env.REDIS_CONNECTION_TIMEOUT || '10000', 10),
        maxRetriesPerRequest: parseInt(process.env.REDIS_MAX_RETRIES || '10', 10),
        retryStrategy: {
            retries: parseInt(process.env.REDIS_MAX_RETRIES || '10', 10),
            maxDelay: parseInt(process.env.REDIS_RETRY_MAX_DELAY || '5000', 10),
        },
        cache: {
            cacheTtl: parseInt(process.env.REDIS_CACHE_TTL || '3600', 10),
            max: parseInt(process.env.REDIS_CACHE_MAX || '10000', 10),
        },
        cluster: {
            enabled: process.env.REDIS_CLUSTER_ENABLED === 'true',
            nodes: (_a = process.env.REDIS_CLUSTER_NODES) === null || _a === void 0 ? void 0 : _a.split(','),
        },
    });
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (redisConfig);
const getRedisConfig = () => {
    return redisConfig();
};
const getRedisOptions = () => {
    const config = getRedisConfig();
    return {
        host: config.host,
        port: config.port,
        password: config.password,
        db: config.db,
        keyPrefix: config.keyPrefix,
        retryStrategy: (times) => {
            if (times > config.retryStrategy.retries) {
                return null;
            }
            return Math.min(times * 1000, config.retryStrategy.maxDelay);
        },
        maxRetriesPerRequest: config.maxRetriesPerRequest,
        connectTimeout: config.connectTimeout,
    };
};
const getCacheConfig = () => {
    const config = getRedisConfig();
    const redisOptions = getRedisOptions();
    return {
        store: 'redis',
        host: redisOptions.host || 'localhost',
        port: redisOptions.port || 6379,
        password: redisOptions.password,
        db: redisOptions.db || 0,
        keyPrefix: redisOptions.keyPrefix || '',
        max: config.cache.max,
        ttlSeconds: config.cache.cacheTtl,
    };
};
const redisKeys = {
    userSession: (userId) => `session:${userId}`,
    refreshToken: (tokenId) => `refresh:${tokenId}`,
    userPermissions: (userId) => `permissions:${userId}`,
    rateLimit: (key) => `ratelimit:${key}`,
    cache: (key) => `cache:${key}`,
    lock: (key) => `lock:${key}`,
};


/***/ }),

/***/ "./src/config/throttler.config.ts":
/*!****************************************!*\
  !*** ./src/config/throttler.config.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ThrottlerConfigService: () => (/* binding */ ThrottlerConfigService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


let ThrottlerConfigService = class ThrottlerConfigService {
    constructor(configService) {
        this.configService = configService;
    }
    createThrottlerOptions() {
        return {
            ttl: this.configService.get('app.throttleTtl') || 60,
            limit: this.configService.get('app.throttleLimit') || 10,
        };
    }
};
ThrottlerConfigService = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigService])
], ThrottlerConfigService);



/***/ }),

/***/ "./src/modules/appointments/appointments.module.ts":
/*!*********************************************************!*\
  !*** ./src/modules/appointments/appointments.module.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AppointmentEventTypes: () => (/* binding */ AppointmentEventTypes),
/* harmony export */   AuthModule: () => (/* binding */ AuthModule)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/jwt */ "@nestjs/jwt");
/* harmony import */ var _nestjs_jwt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_jwt__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_passport__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/passport */ "@nestjs/passport");
/* harmony import */ var _nestjs_passport__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_passport__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _auth_controllers_auth_controller__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../auth/controllers/auth.controller */ "./src/modules/auth/controllers/auth.controller.ts");
/* harmony import */ var _auth_services_auth_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../auth/services/auth.service */ "./src/modules/auth/services/auth.service.ts");
/* harmony import */ var _auth_strategies_jwt_strategy__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../auth/strategies/jwt.strategy */ "./src/modules/auth/strategies/jwt.strategy.ts");
/* harmony import */ var _auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../auth/guards/jwt-auth.guard */ "./src/modules/auth/guards/jwt-auth.guard.ts");
/* harmony import */ var _auth_entities_refresh_token_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../auth/entities/refresh-token.entity */ "./src/modules/auth/entities/refresh-token.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _users_users_module__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../users/users.module */ "./src/modules/users/users.module.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};













var AppointmentEventTypes;
(function (AppointmentEventTypes) {
    AppointmentEventTypes["CREATED"] = "appointment.created";
    AppointmentEventTypes["UPDATED"] = "appointment.updated";
    AppointmentEventTypes["CANCELLED"] = "appointment.cancelled";
    AppointmentEventTypes["COMPLETED"] = "appointment.completed";
    AppointmentEventTypes["RESCHEDULED"] = "appointment.rescheduled";
})(AppointmentEventTypes || (AppointmentEventTypes = {}));
let AuthModule = class AuthModule {
};
AuthModule = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Module)({
        imports: [
            _nestjs_config__WEBPACK_IMPORTED_MODULE_4__.ConfigModule,
            _nestjs_passport__WEBPACK_IMPORTED_MODULE_2__.PassportModule.register({ defaultStrategy: 'jwt' }),
            _nestjs_jwt__WEBPACK_IMPORTED_MODULE_1__.JwtModule.registerAsync({
                imports: [_nestjs_config__WEBPACK_IMPORTED_MODULE_4__.ConfigModule],
                inject: [_nestjs_config__WEBPACK_IMPORTED_MODULE_4__.ConfigService],
                useFactory: async (configService) => ({
                    secret: configService.get('JWT_SECRET'),
                    signOptions: {
                        expiresIn: configService.get('JWT_EXPIRATION', '1h'),
                    },
                }),
            }),
            _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_3__.TypeOrmModule.forFeature([_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_10__.User, _auth_entities_refresh_token_entity__WEBPACK_IMPORTED_MODULE_9__.RefreshToken, _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_11__.Organization]),
            _users_users_module__WEBPACK_IMPORTED_MODULE_12__.UsersModule,
        ],
        controllers: [_auth_controllers_auth_controller__WEBPACK_IMPORTED_MODULE_5__.AuthController],
        providers: [
            _auth_services_auth_service__WEBPACK_IMPORTED_MODULE_6__.AuthService,
            _auth_strategies_jwt_strategy__WEBPACK_IMPORTED_MODULE_7__.JwtStrategy,
            _auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_8__.JwtAuthGuard,
        ],
        exports: [
            _auth_services_auth_service__WEBPACK_IMPORTED_MODULE_6__.AuthService,
            _auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_8__.JwtAuthGuard,
            _nestjs_passport__WEBPACK_IMPORTED_MODULE_2__.PassportModule,
        ],
    })
], AuthModule);



/***/ }),

/***/ "./src/modules/appointments/entities/appointment.entity.ts":
/*!*****************************************************************!*\
  !*** ./src/modules/appointments/entities/appointment.entity.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Appointment: () => (/* binding */ Appointment)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../contacts/entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts");
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _enums_appointment_type_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../enums/appointment-type.enum */ "./src/modules/appointments/enums/appointment-type.enum.ts");
/* harmony import */ var _enums_appointment_status_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../enums/appointment-status.enum */ "./src/modules/appointments/enums/appointment-status.enum.ts");
/* harmony import */ var _enums_appointment_priority_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../enums/appointment-priority.enum */ "./src/modules/appointments/enums/appointment-priority.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









let Appointment = class Appointment {
    isUpcoming() {
        return new Date() < this.startTime;
    }
    isInProgress() {
        const now = new Date();
        return now >= this.startTime && now <= this.endTime;
    }
    isOverdue() {
        return new Date() > this.endTime && this.status !== _enums_appointment_status_enum__WEBPACK_IMPORTED_MODULE_6__.AppointmentStatus.COMPLETED;
    }
    getDuration() {
        return this.endTime.getTime() - this.startTime.getTime();
    }
    canBeModified() {
        return ![
            _enums_appointment_status_enum__WEBPACK_IMPORTED_MODULE_6__.AppointmentStatus.COMPLETED,
            _enums_appointment_status_enum__WEBPACK_IMPORTED_MODULE_6__.AppointmentStatus.CANCELLED,
        ].includes(this.status);
    }
    needsReminder() {
        var _a;
        if (!this.sendReminders || this.reminderSent || !this.isUpcoming()) {
            return false;
        }
        const now = new Date();
        const nextReminderTime = Math.min(...((_a = this.reminderPreferences) === null || _a === void 0 ? void 0 : _a.reminderTimes) || [60]);
        const reminderDue = new Date(this.startTime.getTime() - nextReminderTime * 60000);
        return now >= reminderDue;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, confirmedAt: { required: false, type: () => Date }, scheduledFor: { required: true, type: () => Date }, title: { required: true, type: () => String }, startTime: { required: true, type: () => Date }, endTime: { required: true, type: () => Date }, notes: { required: false, type: () => String }, createdById: { required: true, type: () => String }, updatedById: { required: false, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, contact: { required: true, type: () => (__webpack_require__(/*! ../../contacts/entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Contact) }, organizationId: { required: true, type: () => String }, patientId: { required: true, type: () => String }, doctorId: { required: true, type: () => String }, createdBy: { required: true, type: () => String }, updatedBy: { required: true, type: () => String }, type: { required: true, enum: (__webpack_require__(/*! ../enums/appointment-type.enum */ "./src/modules/appointments/enums/appointment-type.enum.ts").AppointmentType) }, status: { required: true, enum: (__webpack_require__(/*! ../enums/appointment-status.enum */ "./src/modules/appointments/enums/appointment-status.enum.ts").AppointmentStatus) }, priority: { required: true, enum: (__webpack_require__(/*! ../enums/appointment-priority.enum */ "./src/modules/appointments/enums/appointment-priority.enum.ts").AppointmentPriority) }, description: { required: true, type: () => String }, location: { required: true, type: () => String }, meetingLink: { required: true, type: () => String }, sendReminders: { required: true, type: () => Boolean }, reminderPreferences: { required: true, type: () => ({ email: { required: true, type: () => Boolean }, sms: { required: true, type: () => Boolean }, whatsapp: { required: true, type: () => Boolean }, reminderTimes: { required: true, type: () => [Number] } }) }, formData: { required: true, type: () => ({ chiefComplaint: { required: false, type: () => String }, symptoms: { required: false, type: () => [String] }, duration: { required: false, type: () => String }, notes: { required: false, type: () => String }, diagnosis: { required: false, type: () => String }, treatmentPlan: { required: false, type: () => String }, prescriptions: { required: false, type: () => [String] }, followUpInstructions: { required: false, type: () => String } }) }, metadata: { required: true, type: () => ({ referralSource: { required: false, type: () => String }, insurance: { required: false, type: () => String }, tags: { required: false, type: () => [String] }, externalId: { required: false, type: () => String }, followUpAppointmentId: { required: false, type: () => String }, previousAppointmentId: { required: false, type: () => String }, billingStatus: { required: false, type: () => String }, claimStatus: { required: false, type: () => String }, followUpSentAt: { required: false, type: () => String } }) }, isRecurring: { required: true, type: () => Boolean }, recurrencePattern: { required: true, type: () => ({ frequency: { required: true, type: () => Object }, interval: { required: true, type: () => Number }, endDate: { required: false, type: () => Date }, daysOfWeek: { required: false, type: () => [Number] } }) }, parentAppointmentId: { required: true, type: () => String }, cancellationReason: { required: true, type: () => String }, reschedulingReason: { required: true, type: () => String }, reminderSent: { required: true, type: () => Boolean }, reminderSentAt: { required: true, type: () => Date }, checkedInAt: { required: true, type: () => Date }, completedAt: { required: true, type: () => Date }, cancelledAt: { required: true, type: () => Date }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, patient: { required: true, type: () => (__webpack_require__(/*! ../../contacts/entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Contact) }, doctor: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, creator: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, updater: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, parentAppointment: { required: true, type: () => (__webpack_require__(/*! ./appointment.entity */ "./src/modules/appointments/entities/appointment.entity.ts").Appointment) }, recurrentAppointments: { required: true, type: () => [(__webpack_require__(/*! ./appointment.entity */ "./src/modules/appointments/entities/appointment.entity.ts").Appointment)] }, provider: { required: true, type: () => Object } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Appointment.prototype, "id", void 0);
__decorate([
    ApiProperty(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    ApiProperty(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Appointment.prototype, "title", void 0);
__decorate([
    ApiProperty(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp' }),
    __metadata("design:type", Date)
], Appointment.prototype, "startTime", void 0);
__decorate([
    ApiProperty(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp' }),
    __metadata("design:type", Date)
], Appointment.prototype, "endTime", void 0);
__decorate([
    ApiProperty(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Appointment.prototype, "notes", void 0);
__decorate([
    ApiProperty(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Appointment.prototype, "createdById", void 0);
__decorate([
    ApiProperty(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Appointment.prototype, "updatedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], Appointment.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], Appointment.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_3__.Contact, contact => contact.appointments),
    __metadata("design:type", _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_3__.Contact)
], Appointment.prototype, "contact", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid' }),
    __metadata("design:type", String)
], Appointment.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid' }),
    __metadata("design:type", String)
], Appointment.prototype, "patientId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid' }),
    __metadata("design:type", String)
], Appointment.prototype, "doctorId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid' }),
    __metadata("design:type", String)
], Appointment.prototype, "createdBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid', nullable: true }),
    __metadata("design:type", String)
], Appointment.prototype, "updatedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp with time zone' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp with time zone' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _enums_appointment_type_enum__WEBPACK_IMPORTED_MODULE_5__.AppointmentType,
        default: _enums_appointment_type_enum__WEBPACK_IMPORTED_MODULE_5__.AppointmentType.IN_PERSON,
    }),
    __metadata("design:type", String)
], Appointment.prototype, "type", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _enums_appointment_status_enum__WEBPACK_IMPORTED_MODULE_6__.AppointmentStatus,
        default: _enums_appointment_status_enum__WEBPACK_IMPORTED_MODULE_6__.AppointmentStatus.SCHEDULED,
    }),
    __metadata("design:type", String)
], Appointment.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _enums_appointment_priority_enum__WEBPACK_IMPORTED_MODULE_7__.AppointmentPriority,
        default: _enums_appointment_priority_enum__WEBPACK_IMPORTED_MODULE_7__.AppointmentPriority.NORMAL,
    }),
    __metadata("design:type", String)
], Appointment.prototype, "priority", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 100 }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], Appointment.prototype, "description", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 200, nullable: true }),
    __metadata("design:type", String)
], Appointment.prototype, "location", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 500, nullable: true }),
    __metadata("design:type", String)
], Appointment.prototype, "meetingLink", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'boolean', default: true }),
    __metadata("design:type", Boolean)
], Appointment.prototype, "sendReminders", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Appointment.prototype, "reminderPreferences", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Appointment.prototype, "formData", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Appointment.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'boolean', default: false }),
    __metadata("design:type", Boolean)
], Appointment.prototype, "isRecurring", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Appointment.prototype, "recurrencePattern", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid', nullable: true }),
    __metadata("design:type", String)
], Appointment.prototype, "parentAppointmentId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 500, nullable: true }),
    __metadata("design:type", String)
], Appointment.prototype, "cancellationReason", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 500, nullable: true }),
    __metadata("design:type", String)
], Appointment.prototype, "reschedulingReason", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'boolean', default: false }),
    __metadata("design:type", Boolean)
], Appointment.prototype, "reminderSent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp with time zone', nullable: true }),
    __metadata("design:type", Date)
], Appointment.prototype, "reminderSentAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp with time zone', nullable: true }),
    __metadata("design:type", Date)
], Appointment.prototype, "checkedInAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp with time zone', nullable: true }),
    __metadata("design:type", Date)
], Appointment.prototype, "completedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp with time zone', nullable: true }),
    __metadata("design:type", Date)
], Appointment.prototype, "cancelledAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)({ type: 'timestamp with time zone' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)({ type: 'timestamp with time zone' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__.Organization, { onDelete: 'CASCADE' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__.Organization)
], Appointment.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_3__.Contact, { onDelete: 'CASCADE' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'patientId' }),
    __metadata("design:type", _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_3__.Contact)
], Appointment.prototype, "patient", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User, { onDelete: 'CASCADE' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'doctorId' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], Appointment.prototype, "doctor", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'createdBy' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], Appointment.prototype, "creator", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'updatedBy' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], Appointment.prototype, "updater", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => Appointment, { nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'parentAppointmentId' }),
    __metadata("design:type", Appointment)
], Appointment.prototype, "parentAppointment", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => Appointment, appointment => appointment.parentAppointment),
    __metadata("design:type", Array)
], Appointment.prototype, "recurrentAppointments", void 0);
Appointment = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('appointments'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'startTime']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['doctorId', 'startTime']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['patientId', 'startTime'])
], Appointment);

function ApiProperty() {
    return (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)();
}


/***/ }),

/***/ "./src/modules/appointments/enums/appointment-priority.enum.ts":
/*!*********************************************************************!*\
  !*** ./src/modules/appointments/enums/appointment-priority.enum.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AppointmentPriority: () => (/* binding */ AppointmentPriority),
/* harmony export */   PRIORITY_METADATA: () => (/* binding */ PRIORITY_METADATA)
/* harmony export */ });
var AppointmentPriority;
(function (AppointmentPriority) {
    AppointmentPriority["EMERGENCY"] = "EMERGENCY";
    AppointmentPriority["URGENT"] = "URGENT";
    AppointmentPriority["HIGH"] = "HIGH";
    AppointmentPriority["NORMAL"] = "NORMAL";
    AppointmentPriority["MEDIUM"] = "MEDIUM";
    AppointmentPriority["LOW"] = "LOW";
    AppointmentPriority["FOLLOW_UP"] = "FOLLOW_UP";
})(AppointmentPriority || (AppointmentPriority = {}));
const PRIORITY_METADATA = {
    [AppointmentPriority.EMERGENCY]: {
        value: AppointmentPriority.EMERGENCY,
        label: 'Emergency',
        maxWaitTime: 'Immediate',
        color: '#FF0000'
    },
    [AppointmentPriority.URGENT]: {
        value: AppointmentPriority.URGENT,
        label: 'Urgent',
        maxWaitTime: '24 hours',
        color: '#FFA500'
    },
    [AppointmentPriority.HIGH]: {
        value: AppointmentPriority.HIGH,
        label: 'High Priority',
        maxWaitTime: '72 hours',
        color: '#FFFF00'
    },
    [AppointmentPriority.NORMAL]: {
        value: AppointmentPriority.NORMAL,
        label: 'Normal',
        maxWaitTime: '5 days',
        color: '#90EE90'
    },
    [AppointmentPriority.MEDIUM]: {
        value: AppointmentPriority.MEDIUM,
        label: 'Medium Priority',
        maxWaitTime: '1 week',
        color: '#00FF00'
    },
    [AppointmentPriority.LOW]: {
        value: AppointmentPriority.LOW,
        label: 'Low Priority',
        maxWaitTime: '2 weeks',
        color: '#0000FF'
    },
    [AppointmentPriority.FOLLOW_UP]: {
        value: AppointmentPriority.FOLLOW_UP,
        label: 'Follow-up',
        maxWaitTime: 'As scheduled',
        color: '#808080'
    }
};


/***/ }),

/***/ "./src/modules/appointments/enums/appointment-status.enum.ts":
/*!*******************************************************************!*\
  !*** ./src/modules/appointments/enums/appointment-status.enum.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AppointmentStatus: () => (/* binding */ AppointmentStatus),
/* harmony export */   STATUS_METADATA: () => (/* binding */ STATUS_METADATA)
/* harmony export */ });
var AppointmentStatus;
(function (AppointmentStatus) {
    AppointmentStatus["REQUESTED"] = "REQUESTED";
    AppointmentStatus["PENDING"] = "PENDING";
    AppointmentStatus["SCHEDULED"] = "SCHEDULED";
    AppointmentStatus["CONFIRMED"] = "CONFIRMED";
    AppointmentStatus["CHECKED_IN"] = "CHECKED_IN";
    AppointmentStatus["IN_PROGRESS"] = "IN_PROGRESS";
    AppointmentStatus["COMPLETED"] = "COMPLETED";
    AppointmentStatus["CANCELLED"] = "CANCELLED";
    AppointmentStatus["NO_SHOW"] = "NO_SHOW";
    AppointmentStatus["RESCHEDULED"] = "RESCHEDULED";
    AppointmentStatus["WAITING_LIST"] = "WAITING_LIST";
    AppointmentStatus["MISSED"] = "MISSED";
})(AppointmentStatus || (AppointmentStatus = {}));
const STATUS_METADATA = {
    [AppointmentStatus.REQUESTED]: {
        value: AppointmentStatus.REQUESTED,
        label: 'Requested',
        description: 'Appointment has been requested but not yet processed',
        color: '#FFA500',
        allowedTransitions: [
            AppointmentStatus.PENDING,
            AppointmentStatus.CONFIRMED,
            AppointmentStatus.CANCELLED,
            AppointmentStatus.WAITING_LIST
        ]
    },
    [AppointmentStatus.PENDING]: {
        value: AppointmentStatus.PENDING,
        label: 'Pending',
        description: 'Awaiting confirmation from provider',
        color: '#FFD700',
        allowedTransitions: [
            AppointmentStatus.CONFIRMED,
            AppointmentStatus.CANCELLED,
            AppointmentStatus.WAITING_LIST
        ]
    },
    [AppointmentStatus.CONFIRMED]: {
        value: AppointmentStatus.CONFIRMED,
        label: 'Confirmed',
        description: 'Appointment has been confirmed',
        color: '#32CD32',
        allowedTransitions: [
            AppointmentStatus.CHECKED_IN,
            AppointmentStatus.CANCELLED,
            AppointmentStatus.NO_SHOW,
            AppointmentStatus.RESCHEDULED
        ]
    },
    [AppointmentStatus.SCHEDULED]: {
        value: AppointmentStatus.SCHEDULED,
        label: 'Scheduled',
        description: 'Appointment has been scheduled',
        color: '#20B2AA',
        allowedTransitions: [
            AppointmentStatus.CONFIRMED,
            AppointmentStatus.CANCELLED,
            AppointmentStatus.RESCHEDULED
        ]
    },
    [AppointmentStatus.CHECKED_IN]: {
        value: AppointmentStatus.CHECKED_IN,
        label: 'Checked In',
        description: 'Patient has arrived for appointment',
        color: '#1E90FF',
        allowedTransitions: [
            AppointmentStatus.IN_PROGRESS,
            AppointmentStatus.CANCELLED
        ]
    },
    [AppointmentStatus.IN_PROGRESS]: {
        value: AppointmentStatus.IN_PROGRESS,
        label: 'In Progress',
        description: 'Appointment is currently in progress',
        color: '#4169E1',
        allowedTransitions: [
            AppointmentStatus.COMPLETED
        ]
    },
    [AppointmentStatus.COMPLETED]: {
        value: AppointmentStatus.COMPLETED,
        label: 'Completed',
        description: 'Appointment has been completed',
        color: '#008000',
        allowedTransitions: []
    },
    [AppointmentStatus.CANCELLED]: {
        value: AppointmentStatus.CANCELLED,
        label: 'Cancelled',
        description: 'Appointment was cancelled',
        color: '#FF0000',
        allowedTransitions: [
            AppointmentStatus.REQUESTED,
            AppointmentStatus.RESCHEDULED
        ]
    },
    [AppointmentStatus.NO_SHOW]: {
        value: AppointmentStatus.NO_SHOW,
        label: 'No Show',
        description: 'Patient did not show up for appointment',
        color: '#8B0000',
        allowedTransitions: [
            AppointmentStatus.RESCHEDULED
        ]
    },
    [AppointmentStatus.RESCHEDULED]: {
        value: AppointmentStatus.RESCHEDULED,
        label: 'Rescheduled',
        description: 'Appointment has been rescheduled',
        color: '#9370DB',
        allowedTransitions: [
            AppointmentStatus.CONFIRMED,
            AppointmentStatus.CANCELLED
        ]
    },
    [AppointmentStatus.WAITING_LIST]: {
        value: AppointmentStatus.WAITING_LIST,
        label: 'Waiting List',
        description: 'Patient is on waiting list for cancellations',
        color: '#808080',
        allowedTransitions: [
            AppointmentStatus.CONFIRMED,
            AppointmentStatus.CANCELLED
        ]
    },
    [AppointmentStatus.MISSED]: {
        value: AppointmentStatus.MISSED,
        label: 'Missed',
        description: 'Appointment was missed',
        color: '#A9A9A9',
        allowedTransitions: [
            AppointmentStatus.RESCHEDULED
        ]
    }
};


/***/ }),

/***/ "./src/modules/appointments/enums/appointment-type.enum.ts":
/*!*****************************************************************!*\
  !*** ./src/modules/appointments/enums/appointment-type.enum.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   APPOINTMENT_TYPE_METADATA: () => (/* binding */ APPOINTMENT_TYPE_METADATA),
/* harmony export */   AppointmentType: () => (/* binding */ AppointmentType)
/* harmony export */ });
var AppointmentType;
(function (AppointmentType) {
    AppointmentType["INITIAL_CONSULTATION"] = "INITIAL_CONSULTATION";
    AppointmentType["FOLLOW_UP"] = "FOLLOW_UP";
    AppointmentType["ROUTINE_CHECKUP"] = "ROUTINE_CHECKUP";
    AppointmentType["SPECIALIST_CONSULTATION"] = "SPECIALIST_CONSULTATION";
    AppointmentType["URGENT_CARE"] = "URGENT_CARE";
    AppointmentType["PROCEDURE"] = "PROCEDURE";
    AppointmentType["SURGERY"] = "SURGERY";
    AppointmentType["DIAGNOSTIC"] = "DIAGNOSTIC";
    AppointmentType["THERAPY"] = "THERAPY";
    AppointmentType["VACCINATION"] = "VACCINATION";
    AppointmentType["SCREENING"] = "SCREENING";
    AppointmentType["TELEHEALTH"] = "TELEHEALTH";
    AppointmentType["LAB_WORK"] = "LAB_WORK";
    AppointmentType["IMAGING"] = "IMAGING";
    AppointmentType["DENTAL"] = "DENTAL";
    AppointmentType["PHARMACY"] = "PHARMACY";
    AppointmentType["IN_PERSON"] = "IN_PERSON";
    AppointmentType["VIRTUAL"] = "VIRTUAL";
    AppointmentType["PHONE"] = "PHONE";
    AppointmentType["HOME_VISIT"] = "HOME_VISIT";
    AppointmentType["EMERGENCY"] = "EMERGENCY";
    AppointmentType["CONSULTATION"] = "CONSULTATION";
    AppointmentType["MATERNITY"] = "MATERNITY";
    AppointmentType["SPECIALIZED"] = "SPECIALIZED";
    AppointmentType["PEDIATRIC"] = "PEDIATRIC";
    AppointmentType["WELLNESS_CHECK"] = "WELLNESS_CHECK";
})(AppointmentType || (AppointmentType = {}));
const APPOINTMENT_TYPE_METADATA = {
    [AppointmentType.INITIAL_CONSULTATION]: {
        value: AppointmentType.INITIAL_CONSULTATION,
        label: 'Initial Consultation',
        description: 'First-time visit with healthcare provider',
        defaultDuration: 60,
        requiresPreparation: true,
        preparationInstructions: 'Please bring medical history and current medications list',
        category: 'PRIMARY',
        virtualEnabled: true
    },
    [AppointmentType.IN_PERSON]: {
        value: AppointmentType.IN_PERSON,
        label: 'In-Person Visit',
        description: 'Standard in-person medical visit',
        defaultDuration: 30,
        requiresPreparation: false,
        category: 'PRIMARY',
        virtualEnabled: false
    },
    [AppointmentType.FOLLOW_UP]: {
        value: AppointmentType.FOLLOW_UP,
        label: 'Follow-up Visit',
        description: 'Follow-up appointment to review progress',
        defaultDuration: 30,
        requiresPreparation: false,
        category: 'PRIMARY',
        virtualEnabled: true
    },
    [AppointmentType.ROUTINE_CHECKUP]: {
        value: AppointmentType.ROUTINE_CHECKUP,
        label: 'Routine Check-up',
        description: 'Regular health check-up',
        defaultDuration: 45,
        requiresPreparation: false,
        category: 'PRIMARY',
        virtualEnabled: false
    },
    [AppointmentType.SPECIALIST_CONSULTATION]: {
        value: AppointmentType.SPECIALIST_CONSULTATION,
        label: 'Specialist Consultation',
        description: 'Consultation with a specialist',
        defaultDuration: 60,
        requiresPreparation: true,
        preparationInstructions: 'Please bring referral and previous test results',
        category: 'SPECIALIST',
        virtualEnabled: true
    },
    [AppointmentType.URGENT_CARE]: {
        value: AppointmentType.URGENT_CARE,
        label: 'Urgent Care',
        description: 'Immediate medical attention required',
        defaultDuration: 45,
        requiresPreparation: false,
        category: 'PRIMARY',
        virtualEnabled: false
    },
    [AppointmentType.PROCEDURE]: {
        value: AppointmentType.PROCEDURE,
        label: 'Medical Procedure',
        description: 'Minor medical procedure',
        defaultDuration: 90,
        requiresPreparation: true,
        preparationInstructions: 'Specific preparation instructions will be provided',
        category: 'PROCEDURE',
        resources: ['Procedure Room', 'Standard Equipment'],
        virtualEnabled: false
    },
    [AppointmentType.SURGERY]: {
        value: AppointmentType.SURGERY,
        label: 'Surgery',
        description: 'Surgical procedure',
        defaultDuration: 180,
        requiresPreparation: true,
        preparationInstructions: 'Detailed pre-surgery instructions will be provided',
        category: 'PROCEDURE',
        resources: ['Operating Room', 'Surgical Equipment'],
        virtualEnabled: false
    },
    [AppointmentType.DIAGNOSTIC]: {
        value: AppointmentType.DIAGNOSTIC,
        label: 'Diagnostic Test',
        description: 'Medical diagnostic testing',
        defaultDuration: 45,
        requiresPreparation: true,
        preparationInstructions: 'Test-specific preparation instructions will be provided',
        category: 'DIAGNOSTIC',
        resources: ['Testing Equipment'],
        virtualEnabled: false
    },
    [AppointmentType.THERAPY]: {
        value: AppointmentType.THERAPY,
        label: 'Therapy Session',
        description: 'Therapeutic treatment session',
        defaultDuration: 60,
        requiresPreparation: false,
        category: 'OTHER',
        virtualEnabled: true
    },
    [AppointmentType.VACCINATION]: {
        value: AppointmentType.VACCINATION,
        label: 'Vaccination',
        description: 'Vaccine administration',
        defaultDuration: 30,
        requiresPreparation: false,
        category: 'PROCEDURE',
        resources: ['Vaccine Storage'],
        virtualEnabled: false
    },
    [AppointmentType.SCREENING]: {
        value: AppointmentType.SCREENING,
        label: 'Health Screening',
        description: 'Preventive health screening',
        defaultDuration: 45,
        requiresPreparation: true,
        preparationInstructions: 'Please follow screening-specific preparation guidelines',
        category: 'DIAGNOSTIC',
        virtualEnabled: false
    },
    [AppointmentType.TELEHEALTH]: {
        value: AppointmentType.TELEHEALTH,
        label: 'Telehealth Visit',
        description: 'Virtual healthcare consultation',
        defaultDuration: 30,
        requiresPreparation: false,
        category: 'PRIMARY',
        virtualEnabled: true
    },
    [AppointmentType.LAB_WORK]: {
        value: AppointmentType.LAB_WORK,
        label: 'Laboratory Tests',
        description: 'Laboratory testing and sample collection',
        defaultDuration: 30,
        requiresPreparation: true,
        preparationInstructions: 'Specific lab test preparation instructions will be provided',
        category: 'DIAGNOSTIC',
        resources: ['Lab Equipment'],
        virtualEnabled: false
    },
    [AppointmentType.IMAGING]: {
        value: AppointmentType.IMAGING,
        label: 'Medical Imaging',
        description: 'Medical imaging services',
        defaultDuration: 45,
        requiresPreparation: true,
        preparationInstructions: 'Imaging-specific preparation instructions will be provided',
        category: 'DIAGNOSTIC',
        resources: ['Imaging Equipment'],
        virtualEnabled: false
    },
    [AppointmentType.DENTAL]: {
        value: AppointmentType.DENTAL,
        label: 'Dental Visit',
        description: 'Dental care appointment',
        defaultDuration: 60,
        requiresPreparation: false,
        category: 'SPECIALIST',
        resources: ['Dental Equipment'],
        virtualEnabled: false
    },
    [AppointmentType.PHARMACY]: {
        value: AppointmentType.PHARMACY,
        label: 'Pharmacy Consultation',
        description: 'Consultation with pharmacist',
        defaultDuration: 30,
        requiresPreparation: false,
        category: 'OTHER',
        virtualEnabled: true
    },
    [AppointmentType.VIRTUAL]: {
        value: AppointmentType.VIRTUAL,
        label: 'Virtual Appointment',
        description: 'Virtual healthcare appointment',
        defaultDuration: 30,
        requiresPreparation: false,
        category: 'PRIMARY',
        virtualEnabled: true
    },
    [AppointmentType.PHONE]: {
        value: AppointmentType.PHONE,
        label: 'Phone Consultation',
        description: 'Consultation over the phone',
        defaultDuration: 20,
        requiresPreparation: false,
        category: 'PRIMARY',
        virtualEnabled: true
    },
    [AppointmentType.HOME_VISIT]: {
        value: AppointmentType.HOME_VISIT,
        label: 'Home Visit',
        description: 'Healthcare provider visits patient at home',
        defaultDuration: 60,
        requiresPreparation: true,
        preparationInstructions: 'Ensure a clean and safe environment for the visit',
        category: 'PRIMARY',
        virtualEnabled: false
    },
    [AppointmentType.EMERGENCY]: {
        value: AppointmentType.EMERGENCY,
        label: 'Emergency Visit',
        description: 'Emergency medical attention',
        defaultDuration: 120,
        requiresPreparation: false,
        category: 'PRIMARY',
        virtualEnabled: false
    },
    [AppointmentType.CONSULTATION]: {
        value: AppointmentType.CONSULTATION,
        label: 'General Consultation',
        description: 'General medical consultation',
        defaultDuration: 30,
        requiresPreparation: false,
        category: 'PRIMARY',
        virtualEnabled: true
    },
    [AppointmentType.MATERNITY]: {
        value: AppointmentType.MATERNITY,
        label: 'Maternity Care',
        description: 'Maternity care appointment',
        defaultDuration: 60,
        requiresPreparation: true,
        preparationInstructions: 'Bring maternity records and previous test results',
        category: 'SPECIALIST',
        virtualEnabled: false
    },
    [AppointmentType.SPECIALIZED]: {
        value: AppointmentType.SPECIALIZED,
        label: 'Specialized Care',
        description: 'Specialized medical care',
        defaultDuration: 60,
        requiresPreparation: true,
        preparationInstructions: 'Bring relevant medical records and test results',
        category: 'SPECIALIST',
        virtualEnabled: false
    },
    [AppointmentType.PEDIATRIC]: {
        value: AppointmentType.PEDIATRIC,
        label: 'Pediatric Care',
        description: 'Pediatric care appointment',
        defaultDuration: 45,
        requiresPreparation: false,
        category: 'SPECIALIST',
        virtualEnabled: false
    },
    [AppointmentType.WELLNESS_CHECK]: {
        value: AppointmentType.WELLNESS_CHECK,
        label: 'Wellness Check',
        description: 'Routine wellness check-up',
        defaultDuration: 30,
        requiresPreparation: false,
        category: 'PRIMARY',
        virtualEnabled: true
    }
};


/***/ }),

/***/ "./src/modules/audit/entities/audit-log.entity.ts":
/*!********************************************************!*\
  !*** ./src/modules/audit/entities/audit-log.entity.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuditLog: () => (/* binding */ AuditLog),
/* harmony export */   AuditLogSeverity: () => (/* binding */ AuditLogSeverity),
/* harmony export */   AuditLogStatus: () => (/* binding */ AuditLogStatus),
/* harmony export */   AuditLogType: () => (/* binding */ AuditLogType)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var AuditLogType;
(function (AuditLogType) {
    AuditLogType["AUTHENTICATION"] = "authentication";
    AuditLogType["AUTHORIZATION"] = "authorization";
    AuditLogType["DATA_ACCESS"] = "data_access";
    AuditLogType["DATA_MODIFICATION"] = "data_modification";
    AuditLogType["SYSTEM"] = "system";
    AuditLogType["SECURITY"] = "security";
    AuditLogType["COMPLIANCE"] = "compliance";
    AuditLogType["BUSINESS"] = "business";
})(AuditLogType || (AuditLogType = {}));
var AuditLogSeverity;
(function (AuditLogSeverity) {
    AuditLogSeverity["INFO"] = "info";
    AuditLogSeverity["WARNING"] = "warning";
    AuditLogSeverity["ERROR"] = "error";
    AuditLogSeverity["CRITICAL"] = "critical";
})(AuditLogSeverity || (AuditLogSeverity = {}));
var AuditLogStatus;
(function (AuditLogStatus) {
    AuditLogStatus["SUCCESS"] = "success";
    AuditLogStatus["FAILURE"] = "failure";
    AuditLogStatus["PENDING"] = "pending";
    AuditLogStatus["CANCELLED"] = "cancelled";
})(AuditLogStatus || (AuditLogStatus = {}));
let AuditLog = class AuditLog {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, type: { required: true, enum: (__webpack_require__(/*! ./audit-log.entity */ "./src/modules/audit/entities/audit-log.entity.ts").AuditLogType) }, severity: { required: true, enum: (__webpack_require__(/*! ./audit-log.entity */ "./src/modules/audit/entities/audit-log.entity.ts").AuditLogSeverity) }, organizationId: { required: true, type: () => String }, status: { required: true, enum: (__webpack_require__(/*! ./audit-log.entity */ "./src/modules/audit/entities/audit-log.entity.ts").AuditLogStatus) }, action: { required: true, type: () => String }, description: { required: true, type: () => String }, metadata: { required: true, type: () => Object }, actorId: { required: true, type: () => String }, actorType: { required: true, type: () => String }, actor: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, entityId: { required: true, type: () => String }, entityType: { required: true, type: () => String }, changes: { required: true, type: () => ({ before: { required: true, type: () => Object }, after: { required: true, type: () => Object } }) }, ipAddress: { required: true, type: () => String }, userAgent: { required: true, type: () => String }, requestId: { required: true, type: () => String }, sessionId: { required: true, type: () => String }, origin: { required: true, type: () => String }, timestamp: { required: true, type: () => Date }, duration: { required: true, type: () => Number }, location: { required: true, type: () => ({ country: { required: false, type: () => String }, region: { required: false, type: () => String }, city: { required: false, type: () => String }, coordinates: { required: false, type: () => ({ latitude: { required: true, type: () => Number }, longitude: { required: true, type: () => Number } }) } }) }, securityContext: { required: true, type: () => ({ permissions: { required: false, type: () => [String] }, roles: { required: false, type: () => [String] }, authenticationType: { required: false, type: () => String }, authenticationMethod: { required: false, type: () => String }, mfaUsed: { required: false, type: () => Boolean } }) }, complianceMetadata: { required: true, type: () => ({ regulations: { required: false, type: () => [String] }, dataClassification: { required: false, type: () => String }, retentionPeriod: { required: false, type: () => Number }, piiInvolved: { required: false, type: () => Boolean }, dlpPolicies: { required: false, type: () => [String] } }) }, error: { required: true, type: () => ({ code: { required: false, type: () => String }, message: { required: false, type: () => String }, stack: { required: false, type: () => String }, details: { required: false, type: () => Object } }) }, tags: { required: true, type: () => [String] }, riskAssessment: { required: true, type: () => ({ level: { required: false, type: () => Object }, factors: { required: false, type: () => [String] }, score: { required: false, type: () => Number }, mitigations: { required: false, type: () => [String] } }) }, businessContext: { required: true, type: () => ({ process: { required: false, type: () => String }, department: { required: false, type: () => String }, costCenter: { required: false, type: () => String }, projectId: { required: false, type: () => String } }) }, systemContext: { required: true, type: () => ({ environment: { required: false, type: () => String }, version: { required: false, type: () => String }, component: { required: false, type: () => String }, hostname: { required: false, type: () => String } }) }, lastModified: { required: true, type: () => Date }, expiresAt: { required: true, type: () => Date }, archived: { required: true, type: () => Boolean }, archivedAt: { required: true, type: () => Date }, redacted: { required: true, type: () => Boolean }, redactedAt: { required: true, type: () => Date }, customMetadata: { required: true, type: () => Object } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], AuditLog.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: AuditLogType,
        default: AuditLogType.SYSTEM
    }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], AuditLog.prototype, "type", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: AuditLogSeverity,
        default: AuditLogSeverity.INFO
    }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], AuditLog.prototype, "severity", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: AuditLogStatus,
        default: AuditLogStatus.SUCCESS
    }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], AuditLog.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], AuditLog.prototype, "action", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text'),
    __metadata("design:type", String)
], AuditLog.prototype, "description", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], AuditLog.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], AuditLog.prototype, "actorId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], AuditLog.prototype, "actorType", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User, { nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'actorId' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], AuditLog.prototype, "actor", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], AuditLog.prototype, "entityId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], AuditLog.prototype, "entityType", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], AuditLog.prototype, "changes", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], AuditLog.prototype, "ipAddress", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], AuditLog.prototype, "userAgent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], AuditLog.prototype, "requestId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], AuditLog.prototype, "sessionId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('varchar', { nullable: true }),
    __metadata("design:type", String)
], AuditLog.prototype, "origin", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", Date)
], AuditLog.prototype, "timestamp", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Number)
], AuditLog.prototype, "duration", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], AuditLog.prototype, "location", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], AuditLog.prototype, "securityContext", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], AuditLog.prototype, "complianceMetadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], AuditLog.prototype, "error", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { array: true, nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", Array)
], AuditLog.prototype, "tags", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], AuditLog.prototype, "riskAssessment", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], AuditLog.prototype, "businessContext", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], AuditLog.prototype, "systemContext", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], AuditLog.prototype, "lastModified", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], AuditLog.prototype, "expiresAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", Boolean)
], AuditLog.prototype, "archived", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], AuditLog.prototype, "archivedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", Boolean)
], AuditLog.prototype, "redacted", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], AuditLog.prototype, "redactedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], AuditLog.prototype, "customMetadata", void 0);
AuditLog = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('audit_logs'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['entityType', 'entityId']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['actorType', 'actorId']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['timestamp', 'type'])
], AuditLog);



/***/ }),

/***/ "./src/modules/auth/auth.module.ts":
/*!*****************************************!*\
  !*** ./src/modules/auth/auth.module.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthModule: () => (/* binding */ AuthModule)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_jwt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/jwt */ "@nestjs/jwt");
/* harmony import */ var _nestjs_jwt__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_jwt__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_passport__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/passport */ "@nestjs/passport");
/* harmony import */ var _nestjs_passport__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_passport__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _controllers_auth_controller__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./controllers/auth.controller */ "./src/modules/auth/controllers/auth.controller.ts");
Object(function webpackMissingModule() { var e = new Error("Cannot find module './auth.service'"); e.code = 'MODULE_NOT_FOUND'; throw e; }());
/* harmony import */ var _strategies_jwt_strategy__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./strategies/jwt.strategy */ "./src/modules/auth/strategies/jwt.strategy.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _entities_refresh_token_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./entities/refresh-token.entity */ "./src/modules/auth/entities/refresh-token.entity.ts");
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _users_users_module__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../users/users.module */ "./src/modules/users/users.module.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};












let AuthModule = class AuthModule {
};
AuthModule = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Module)({
        imports: [
            _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.TypeOrmModule.forFeature([_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_8__.User, _entities_refresh_token_entity__WEBPACK_IMPORTED_MODULE_9__.RefreshToken, _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_10__.Organization]),
            _nestjs_passport__WEBPACK_IMPORTED_MODULE_3__.PassportModule.register({ defaultStrategy: 'jwt' }),
            _nestjs_jwt__WEBPACK_IMPORTED_MODULE_2__.JwtModule.registerAsync({
                imports: [_nestjs_config__WEBPACK_IMPORTED_MODULE_4__.ConfigModule],
                useFactory: async (configService) => ({
                    secret: configService.get('JWT_SECRET'),
                    signOptions: {
                        expiresIn: configService.get('JWT_EXPIRATION', '15m'),
                    },
                }),
                inject: [_nestjs_config__WEBPACK_IMPORTED_MODULE_4__.ConfigService],
            }),
            _users_users_module__WEBPACK_IMPORTED_MODULE_11__.UsersModule,
        ],
        controllers: [_controllers_auth_controller__WEBPACK_IMPORTED_MODULE_5__.AuthController],
        providers: [Object(function webpackMissingModule() { var e = new Error("Cannot find module './auth.service'"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), _strategies_jwt_strategy__WEBPACK_IMPORTED_MODULE_7__.JwtStrategy],
        exports: [Object(function webpackMissingModule() { var e = new Error("Cannot find module './auth.service'"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), _strategies_jwt_strategy__WEBPACK_IMPORTED_MODULE_7__.JwtStrategy],
    })
], AuthModule);



/***/ }),

/***/ "./src/modules/auth/controllers/auth.controller.ts":
/*!*********************************************************!*\
  !*** ./src/modules/auth/controllers/auth.controller.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthController: () => (/* binding */ AuthController)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _services_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/auth.service */ "./src/modules/auth/services/auth.service.ts");
/* harmony import */ var _dto_login_dto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../dto/login.dto */ "./src/modules/auth/dto/login.dto.ts");
/* harmony import */ var _dto_register_dto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../dto/register.dto */ "./src/modules/auth/dto/register.dto.ts");
/* harmony import */ var _dto_forgot_password_dto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../dto/forgot-password.dto */ "./src/modules/auth/dto/forgot-password.dto.ts");
/* harmony import */ var _dto_reset_password_dto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../dto/reset-password.dto */ "./src/modules/auth/dto/reset-password.dto.ts");
/* harmony import */ var _guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../guards/jwt-auth.guard */ "./src/modules/auth/guards/jwt-auth.guard.ts");
/* harmony import */ var _dto_refresh_token_dto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dto/refresh-token.dto */ "./src/modules/auth/dto/refresh-token.dto.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _decorators_public_decorator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../decorators/public.decorator */ "./src/modules/auth/decorators/public.decorator.ts");
/* harmony import */ var _decorators_current_user_decorator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../decorators/current-user.decorator */ "./src/modules/auth/decorators/current-user.decorator.ts");
/* harmony import */ var _guards_rate_limit_guard__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../guards/rate-limit.guard */ "./src/modules/auth/guards/rate-limit.guard.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};














let AuthController = class AuthController {
    constructor(authService) {
        this.authService = authService;
    }
    async login(loginDto, userAgent, ip) {
        const result = await this.authService.login(loginDto, {
            userAgent,
            ip,
        });
        return {
            user: result.user,
            tokens: {
                accessToken: result.accessToken,
                refreshToken: result.refreshToken,
            },
        };
    }
    async register(registerDto, userAgent, ip) {
        const result = await this.authService.register(registerDto, {
            userAgent,
            ip,
        });
        return {
            user: result.user,
            organization: result.organization,
            tokens: {
                accessToken: result.accessToken,
                refreshToken: result.refreshToken,
            },
        };
    }
    async refreshToken(refreshTokenDto) {
        const tokens = await this.authService.refreshToken(refreshTokenDto.refreshToken);
        return { tokens };
    }
    async logout(user, authHeader) {
        const token = authHeader === null || authHeader === void 0 ? void 0 : authHeader.split(' ')[1];
        if (!token) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UnauthorizedException('Invalid token');
        }
        await this.authService.logout(user.id);
        return { message: 'Logout successful' };
    }
    async forgotPassword(forgotPasswordDto) {
        await this.authService.sendPasswordResetEmail(forgotPasswordDto.email);
        return { message: 'Password reset instructions sent to email' };
    }
    async resetPassword(resetPasswordDto) {
        await this.authService.changePassword(resetPasswordDto.token, resetPasswordDto.password);
        return { message: 'Password reset successful' };
    }
    async getCurrentUser(user) {
        return { user };
    }
    async verifyEmail(token) {
        await this.authService.confirmEmail(token);
        return { message: 'Email verification successful' };
    }
    async resendVerification(user) {
        await this.authService.sendVerificationEmail(user.id);
        return { message: 'Verification email sent' };
    }
};
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('login'),
    (0,_decorators_public_decorator__WEBPACK_IMPORTED_MODULE_10__.Public)(),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpCode)(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'User login' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Login successful' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.UNAUTHORIZED, description: 'Invalid credentials' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Headers)('user-agent')),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Ip)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_login_dto__WEBPACK_IMPORTED_MODULE_3__.LoginDto, String, String]),
    __metadata("design:returntype", Promise)
], AuthController.prototype, "login", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('register'),
    (0,_decorators_public_decorator__WEBPACK_IMPORTED_MODULE_10__.Public)(),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Register new user/organization' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'Registration successful' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Headers)('user-agent')),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Ip)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_register_dto__WEBPACK_IMPORTED_MODULE_4__.RegisterDto, String, String]),
    __metadata("design:returntype", Promise)
], AuthController.prototype, "register", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('refresh-token'),
    (0,_decorators_public_decorator__WEBPACK_IMPORTED_MODULE_10__.Public)(),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpCode)(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Refresh access token' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_refresh_token_dto__WEBPACK_IMPORTED_MODULE_8__.RefreshTokenDto]),
    __metadata("design:returntype", Promise)
], AuthController.prototype, "refreshToken", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('logout'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UseGuards)(_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_7__.JwtAuthGuard),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpCode)(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiBearerAuth)(),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'User logout' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK }),
    __param(0, (0,_decorators_current_user_decorator__WEBPACK_IMPORTED_MODULE_11__.CurrentUser)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Headers)('authorization')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_9__.User, String]),
    __metadata("design:returntype", Promise)
], AuthController.prototype, "logout", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('forgot-password'),
    (0,_decorators_public_decorator__WEBPACK_IMPORTED_MODULE_10__.Public)(),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpCode)(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Request password reset' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_forgot_password_dto__WEBPACK_IMPORTED_MODULE_5__.ForgotPasswordDto]),
    __metadata("design:returntype", Promise)
], AuthController.prototype, "forgotPassword", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('reset-password'),
    (0,_decorators_public_decorator__WEBPACK_IMPORTED_MODULE_10__.Public)(),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpCode)(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Reset password' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_reset_password_dto__WEBPACK_IMPORTED_MODULE_6__.ResetPasswordDto]),
    __metadata("design:returntype", Promise)
], AuthController.prototype, "resetPassword", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('me'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UseGuards)(_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_7__.JwtAuthGuard),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiBearerAuth)(),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get current user profile' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_decorators_current_user_decorator__WEBPACK_IMPORTED_MODULE_11__.CurrentUser)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_9__.User]),
    __metadata("design:returntype", Promise)
], AuthController.prototype, "getCurrentUser", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('verify-email'),
    (0,_decorators_public_decorator__WEBPACK_IMPORTED_MODULE_10__.Public)(),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpCode)(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Verify email address' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)('token')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], AuthController.prototype, "verifyEmail", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('resend-verification'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UseGuards)(_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_7__.JwtAuthGuard),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiBearerAuth)(),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Resend verification email' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201 }),
    __param(0, (0,_decorators_current_user_decorator__WEBPACK_IMPORTED_MODULE_11__.CurrentUser)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_9__.User]),
    __metadata("design:returntype", Promise)
], AuthController.prototype, "resendVerification", null);
AuthController = __decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiTags)('Authentication'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Controller)('auth'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UseGuards)(_guards_rate_limit_guard__WEBPACK_IMPORTED_MODULE_12__.RateLimitGuard),
    __metadata("design:paramtypes", [_services_auth_service__WEBPACK_IMPORTED_MODULE_2__.AuthService])
], AuthController);



/***/ }),

/***/ "./src/modules/auth/decorators/current-user.decorator.ts":
/*!***************************************************************!*\
  !*** ./src/modules/auth/decorators/current-user.decorator.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CurrentUser: () => (/* binding */ CurrentUser)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);

const CurrentUser = (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.createParamDecorator)((data, ctx) => {
    const request = ctx.switchToHttp().getRequest();
    return request.user;
});


/***/ }),

/***/ "./src/modules/auth/decorators/permissions.decorator.ts":
/*!**************************************************************!*\
  !*** ./src/modules/auth/decorators/permissions.decorator.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PERMISSIONS_KEY: () => (/* binding */ PERMISSIONS_KEY),
/* harmony export */   Permissions: () => (/* binding */ Permissions)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);

const PERMISSIONS_KEY = 'permissions';
const Permissions = (...permissions) => (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.SetMetadata)(PERMISSIONS_KEY, permissions);


/***/ }),

/***/ "./src/modules/auth/decorators/public.decorator.ts":
/*!*********************************************************!*\
  !*** ./src/modules/auth/decorators/public.decorator.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IS_PUBLIC_KEY: () => (/* binding */ IS_PUBLIC_KEY),
/* harmony export */   Public: () => (/* binding */ Public)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);

const IS_PUBLIC_KEY = 'isPublic';
const Public = () => (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.SetMetadata)(IS_PUBLIC_KEY, true);


/***/ }),

/***/ "./src/modules/auth/decorators/roles.decorator.ts":
/*!********************************************************!*\
  !*** ./src/modules/auth/decorators/roles.decorator.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ROLES_KEY: () => (/* binding */ ROLES_KEY),
/* harmony export */   Roles: () => (/* binding */ Roles)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);

const ROLES_KEY = 'roles';
const Roles = (...roles) => (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.SetMetadata)(ROLES_KEY, roles);


/***/ }),

/***/ "./src/modules/auth/dto/forgot-password.dto.ts":
/*!*****************************************************!*\
  !*** ./src/modules/auth/dto/forgot-password.dto.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ForgotPasswordDto: () => (/* binding */ ForgotPasswordDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



class ForgotPasswordDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { email: { required: true, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Email address associated with the account',
        example: 'user@example.com'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)({}, { message: 'Please provide a valid email address' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)({ message: 'Email is required' }),
    __metadata("design:type", String)
], ForgotPasswordDto.prototype, "email", void 0);


/***/ }),

/***/ "./src/modules/auth/dto/login.dto.ts":
/*!*******************************************!*\
  !*** ./src/modules/auth/dto/login.dto.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoginDto: () => (/* binding */ LoginDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



class LoginDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { email: { required: true, type: () => String }, password: { required: true, type: () => String, minLength: 8 }, rememberMe: { required: false, type: () => Boolean }, organizationId: { required: false, type: () => String }, deviceId: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'User email address',
        example: 'john.doe@example.com',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)({}, { message: 'Please enter a valid email address' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)({ message: 'Email is required' }),
    __metadata("design:type", String)
], LoginDto.prototype, "email", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'User password',
        example: 'Password123!',
        minLength: 8,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)({ message: 'Password is required' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(8, { message: 'Password must be at least 8 characters long' }),
    __metadata("design:type", String)
], LoginDto.prototype, "password", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Remember user session',
        default: false,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], LoginDto.prototype, "rememberMe", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Organization identifier for multi-tenant applications',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], LoginDto.prototype, "organizationId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Device identifier for multi-device management',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], LoginDto.prototype, "deviceId", void 0);


/***/ }),

/***/ "./src/modules/auth/dto/refresh-token.dto.ts":
/*!***************************************************!*\
  !*** ./src/modules/auth/dto/refresh-token.dto.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RefreshTokenDto: () => (/* binding */ RefreshTokenDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



class RefreshTokenDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { refreshToken: { required: true, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Refresh token for obtaining a new access token',
        example: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)({ message: 'Refresh token is required' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ message: 'Refresh token must be a string' }),
    __metadata("design:type", String)
], RefreshTokenDto.prototype, "refreshToken", void 0);


/***/ }),

/***/ "./src/modules/auth/dto/register.dto.ts":
/*!**********************************************!*\
  !*** ./src/modules/auth/dto/register.dto.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationAddressDto: () => (/* binding */ OrganizationAddressDto),
/* harmony export */   RegisterDto: () => (/* binding */ RegisterDto),
/* harmony export */   RegisterOrganizationDto: () => (/* binding */ RegisterOrganizationDto),
/* harmony export */   RegisterUserDto: () => (/* binding */ RegisterUserDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
/* harmony import */ var _organizations_enums_subscription_plan_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../organizations/enums/subscription-plan.enum */ "./src/modules/organizations/enums/subscription-plan.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






class RegisterUserDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { firstName: { required: true, type: () => String, minLength: 2, maxLength: 50 }, lastName: { required: true, type: () => String, minLength: 2, maxLength: 50 }, email: { required: true, type: () => String }, password: { required: true, type: () => String, minLength: 8, pattern: "/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/" }, phone: { required: false, type: () => String }, role: { required: false, enum: (__webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts").Role) } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'User first name',
        example: 'John',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)({ message: 'First name is required' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2, { message: 'First name must be at least 2 characters long' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50, { message: 'First name must not exceed 50 characters' }),
    __metadata("design:type", String)
], RegisterUserDto.prototype, "firstName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'User last name',
        example: 'Doe',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)({ message: 'Last name is required' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2, { message: 'Last name must be at least 2 characters long' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50, { message: 'Last name must not exceed 50 characters' }),
    __metadata("design:type", String)
], RegisterUserDto.prototype, "lastName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'User email address',
        example: 'john.doe@example.com',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)({}, { message: 'Please enter a valid email address' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)({ message: 'Email is required' }),
    __metadata("design:type", String)
], RegisterUserDto.prototype, "email", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'User password',
        example: 'Password123!',
        minLength: 8,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)({ message: 'Password is required' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(8, { message: 'Password must be at least 8 characters long' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Matches)(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/, {
        message: 'Password must contain at least one uppercase letter, one lowercase letter, one number and one special character',
    }),
    __metadata("design:type", String)
], RegisterUserDto.prototype, "password", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'User phone number',
        example: '+1234567890',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(undefined, { message: 'Please enter a valid phone number' }),
    __metadata("design:type", String)
], RegisterUserDto.prototype, "phone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        enum: _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_3__.Role,
        description: 'User role',
        default: _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_3__.Role.ADMIN,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_3__.Role),
    __metadata("design:type", String)
], RegisterUserDto.prototype, "role", void 0);
class RegisterOrganizationDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { name: { required: true, type: () => String, minLength: 2, maxLength: 100 }, website: { required: false, type: () => String, pattern: "/^https?:\\/\\/.+\\..+$/" }, phone: { required: false, type: () => String }, address: { required: false, type: () => (__webpack_require__(/*! ./register.dto */ "./src/modules/auth/dto/register.dto.ts").OrganizationAddressDto) }, subscriptionPlan: { required: false, enum: (__webpack_require__(/*! ../../organizations/enums/subscription-plan.enum */ "./src/modules/organizations/enums/subscription-plan.enum.ts").SubscriptionPlan) } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Organization name',
        example: 'Acme Medical Center',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)({ message: 'Organization name is required' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2, { message: 'Organization name must be at least 2 characters long' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100, { message: 'Organization name must not exceed 100 characters' }),
    __metadata("design:type", String)
], RegisterOrganizationDto.prototype, "name", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Organization website',
        example: 'https://www.acmemedical.com',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Matches)(/^https?:\/\/.+\..+$/, {
        message: 'Please enter a valid website URL',
    }),
    __metadata("design:type", String)
], RegisterOrganizationDto.prototype, "website", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Organization phone number',
        example: '+1234567890',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(undefined, { message: 'Please enter a valid phone number' }),
    __metadata("design:type", String)
], RegisterOrganizationDto.prototype, "phone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Organization address',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => OrganizationAddressDto),
    __metadata("design:type", OrganizationAddressDto)
], RegisterOrganizationDto.prototype, "address", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        enum: _organizations_enums_subscription_plan_enum__WEBPACK_IMPORTED_MODULE_4__.SubscriptionPlan,
        description: 'Subscription plan',
        default: _organizations_enums_subscription_plan_enum__WEBPACK_IMPORTED_MODULE_4__.SubscriptionPlan.BASIC,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_organizations_enums_subscription_plan_enum__WEBPACK_IMPORTED_MODULE_4__.SubscriptionPlan),
    __metadata("design:type", String)
], RegisterOrganizationDto.prototype, "subscriptionPlan", void 0);
class OrganizationAddressDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { street: { required: true, type: () => String }, city: { required: true, type: () => String }, state: { required: true, type: () => String }, postalCode: { required: true, type: () => String }, country: { required: true, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], OrganizationAddressDto.prototype, "street", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], OrganizationAddressDto.prototype, "city", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], OrganizationAddressDto.prototype, "state", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], OrganizationAddressDto.prototype, "postalCode", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], OrganizationAddressDto.prototype, "country", void 0);
class RegisterDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { user: { required: true, type: () => (__webpack_require__(/*! ./register.dto */ "./src/modules/auth/dto/register.dto.ts").RegisterUserDto) }, organization: { required: true, type: () => (__webpack_require__(/*! ./register.dto */ "./src/modules/auth/dto/register.dto.ts").RegisterOrganizationDto) } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => RegisterUserDto),
    __metadata("design:type", RegisterUserDto)
], RegisterDto.prototype, "user", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => RegisterOrganizationDto),
    __metadata("design:type", RegisterOrganizationDto)
], RegisterDto.prototype, "organization", void 0);


/***/ }),

/***/ "./src/modules/auth/dto/reset-password.dto.ts":
/*!****************************************************!*\
  !*** ./src/modules/auth/dto/reset-password.dto.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ResetPasswordDto: () => (/* binding */ ResetPasswordDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



class ResetPasswordDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { token: { required: true, type: () => String }, password: { required: true, type: () => String, minLength: 8, pattern: "/((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$/" }, passwordConfirmation: { required: true, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Reset token received via email',
        example: 'abcdef123456789'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)({ message: 'Token is required' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ message: 'Token must be a string' }),
    __metadata("design:type", String)
], ResetPasswordDto.prototype, "token", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'New password',
        example: 'StrongP@ssw0rd!'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)({ message: 'Password is required' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ message: 'Password must be a string' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(8, { message: 'Password must be at least 8 characters long' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Matches)(/((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/, {
        message: 'Password must contain at least 1 uppercase letter, 1 lowercase letter, and 1 number or special character'
    }),
    __metadata("design:type", String)
], ResetPasswordDto.prototype, "password", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Confirm new password',
        example: 'StrongP@ssw0rd!'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)({ message: 'Password confirmation is required' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ message: 'Password confirmation must be a string' }),
    __metadata("design:type", String)
], ResetPasswordDto.prototype, "passwordConfirmation", void 0);


/***/ }),

/***/ "./src/modules/auth/entities/refresh-token.entity.ts":
/*!***********************************************************!*\
  !*** ./src/modules/auth/entities/refresh-token.entity.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RefreshToken: () => (/* binding */ RefreshToken)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



let RefreshToken = class RefreshToken {
    isExpired() {
        return new Date() > this.expiresAt;
    }
    isValid() {
        return !this.isRevoked && !this.isExpired();
    }
    revoke(userId, reason) {
        this.isRevoked = true;
        this.revokedAt = new Date();
        this.revokedBy = userId;
        this.revokedReason = reason;
    }
    updateLastUsed() {
        if (this.metadata) {
            this.metadata.lastUsed = new Date();
        }
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, userId: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, token: { required: true, type: () => String }, expiresAt: { required: true, type: () => Date }, isRevoked: { required: true, type: () => Boolean }, deviceId: { required: true, type: () => String }, userAgent: { required: true, type: () => String }, ipAddress: { required: true, type: () => String }, metadata: { required: true, type: () => ({ platform: { required: false, type: () => String }, browser: { required: false, type: () => String }, location: { required: false, type: () => String }, lastUsed: { required: false, type: () => Date } }) }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, revokedAt: { required: true, type: () => Date }, revokedBy: { required: true, type: () => String }, revokedReason: { required: true, type: () => String }, user: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], RefreshToken.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid' }),
    __metadata("design:type", String)
], RefreshToken.prototype, "userId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid', nullable: true }),
    __metadata("design:type", String)
], RefreshToken.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', unique: true }),
    __metadata("design:type", String)
], RefreshToken.prototype, "token", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp with time zone' }),
    __metadata("design:type", Date)
], RefreshToken.prototype, "expiresAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], RefreshToken.prototype, "isRevoked", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], RefreshToken.prototype, "deviceId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], RefreshToken.prototype, "userAgent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], RefreshToken.prototype, "ipAddress", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], RefreshToken.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", Date)
], RefreshToken.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", Date)
], RefreshToken.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp with time zone', nullable: true }),
    __metadata("design:type", Date)
], RefreshToken.prototype, "revokedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], RefreshToken.prototype, "revokedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], RefreshToken.prototype, "revokedReason", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User, { onDelete: 'CASCADE' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'userId' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], RefreshToken.prototype, "user", void 0);
RefreshToken = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('refresh_tokens'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['token']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['userId', 'deviceId'])
], RefreshToken);



/***/ }),

/***/ "./src/modules/auth/entities/user.entity.ts":
/*!**************************************************!*\
  !*** ./src/modules/auth/entities/user.entity.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   User: () => (/* binding */ User)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





let User = class User {
    get fullName() {
        return `${this.firstName} ${this.lastName}`;
    }
    normalizeEmail() {
        if (this.email) {
            this.email = this.email.toLowerCase().trim();
        }
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, firstName: { required: true, type: () => String }, lastName: { required: true, type: () => String }, email: { required: true, type: () => String }, password: { required: true, type: () => String }, phone: { required: false, type: () => String }, role: { required: true, enum: (__webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts").Role) }, permissions: { required: true, type: () => [String] }, isEmailVerified: { required: true, type: () => Boolean }, isActive: { required: true, type: () => Boolean }, lastLoginAt: { required: true, type: () => Date }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, organizationId: { required: true, type: () => String }, createdBy: { required: false, type: () => String }, createdAt: { required: true, type: () => Date }, updatedBy: { required: false, type: () => String }, updatedAt: { required: true, type: () => Date }, refreshToken: { required: false, type: () => String }, refreshTokenExpiresAt: { required: false, type: () => Date }, passwordResetToken: { required: false, type: () => String }, passwordResetExpiresAt: { required: false, type: () => Date } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], User.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 50 }),
    __metadata("design:type", String)
], User.prototype, "firstName", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 50 }),
    __metadata("design:type", String)
], User.prototype, "lastName", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ unique: true }),
    __metadata("design:type", String)
], User.prototype, "email", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Exclude)(),
    __metadata("design:type", String)
], User.prototype, "password", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "phone", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_4__.Role,
        default: _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_4__.Role.STAFF
    }),
    __metadata("design:type", String)
], User.prototype, "role", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'simple-array', nullable: true }),
    __metadata("design:type", Array)
], User.prototype, "permissions", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], User.prototype, "isEmailVerified", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: true }),
    __metadata("design:type", Boolean)
], User.prototype, "isActive", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], User.prototype, "lastLoginAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization, { nullable: false }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organization_id' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization)
], User.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ name: 'organization_id' }),
    __metadata("design:type", String)
], User.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "createdBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], User.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "updatedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], User.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "refreshToken", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true, type: 'timestamp' }),
    __metadata("design:type", Date)
], User.prototype, "refreshTokenExpiresAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "passwordResetToken", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true, type: 'timestamp' }),
    __metadata("design:type", Date)
], User.prototype, "passwordResetExpiresAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.BeforeInsert)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.BeforeUpdate)(),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", void 0)
], User.prototype, "normalizeEmail", null);
User = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('users')
], User);



/***/ }),

/***/ "./src/modules/auth/guards/auth.guard.ts":
/*!***********************************************!*\
  !*** ./src/modules/auth/guards/auth.guard.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthGuard: () => (/* binding */ AuthGuard)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_core__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _services_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/auth.service */ "./src/modules/auth/services/auth.service.ts");
/* harmony import */ var _nestjs_jwt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/jwt */ "@nestjs/jwt");
/* harmony import */ var _nestjs_jwt__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_jwt__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _decorators_public_decorator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../decorators/public.decorator */ "./src/modules/auth/decorators/public.decorator.ts");
/* harmony import */ var _users_services_users_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../users/services/users.service */ "./src/modules/users/services/users.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var AuthGuard_1;







let AuthGuard = AuthGuard_1 = class AuthGuard {
    constructor(reflector, authService, jwtService, configService, usersService) {
        this.reflector = reflector;
        this.authService = authService;
        this.jwtService = jwtService;
        this.configService = configService;
        this.usersService = usersService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(AuthGuard_1.name);
    }
    async canActivate(context) {
        try {
            const request = context.switchToHttp().getRequest();
            const isPublic = this.reflector.getAllAndOverride(_decorators_public_decorator__WEBPACK_IMPORTED_MODULE_5__.IS_PUBLIC_KEY, [
                context.getHandler(),
                context.getClass(),
            ]);
            const token = this.extractTokenFromHeader(request);
            if (!token) {
                if (isPublic)
                    return true;
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('No authentication token provided');
            }
            try {
                const payload = this.jwtService.verify(token, {
                    secret: this.configService.get('JWT_SECRET')
                });
                if (this.authService.isTokenBlacklisted(token)) {
                    throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('Token has been revoked');
                }
                const user = await this.usersService.findById(payload.sub);
                if (!user) {
                    throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('User not found');
                }
                if (!user.isActive) {
                    throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('User account is inactive');
                }
                if (this.authService.requireEmailVerification && !user.isEmailVerified) {
                    throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('Email verification required');
                }
                request.user = user;
                request.tokenMetadata = {
                    token,
                    iat: payload.iat,
                    exp: payload.exp,
                };
                return true;
            }
            catch (error) {
                if (isPublic)
                    return true;
                this.logger.error('Token validation failed:', error);
                if (error.name === 'TokenExpiredError') {
                    throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('Token has expired');
                }
                if (error.name === 'JsonWebTokenError') {
                    throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('Invalid token');
                }
                throw error;
            }
        }
        catch (error) {
            if (error instanceof _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException) {
                throw error;
            }
            this.logger.error('Authentication error:', error);
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('Authentication failed');
        }
    }
    extractTokenFromHeader(request) {
        var _a, _b;
        const [type, token] = (_b = (_a = request.headers.authorization) === null || _a === void 0 ? void 0 : _a.split(' ')) !== null && _b !== void 0 ? _b : [];
        return type === 'Bearer' ? token : undefined;
    }
};
AuthGuard = AuthGuard_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_nestjs_core__WEBPACK_IMPORTED_MODULE_1__.Reflector,
        _services_auth_service__WEBPACK_IMPORTED_MODULE_2__.AuthService,
        _nestjs_jwt__WEBPACK_IMPORTED_MODULE_3__.JwtService,
        _nestjs_config__WEBPACK_IMPORTED_MODULE_4__.ConfigService,
        _users_services_users_service__WEBPACK_IMPORTED_MODULE_6__.UsersService])
], AuthGuard);



/***/ }),

/***/ "./src/modules/auth/guards/jwt-auth.guard.ts":
/*!***************************************************!*\
  !*** ./src/modules/auth/guards/jwt-auth.guard.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   JwtAuthGuard: () => (/* binding */ JwtAuthGuard)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_passport__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/passport */ "@nestjs/passport");
/* harmony import */ var _nestjs_passport__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_passport__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_core__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _services_auth_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/auth.service */ "./src/modules/auth/services/auth.service.ts");
/* harmony import */ var _decorators_public_decorator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../decorators/public.decorator */ "./src/modules/auth/decorators/public.decorator.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var JwtAuthGuard_1;





let JwtAuthGuard = JwtAuthGuard_1 = class JwtAuthGuard extends (0,_nestjs_passport__WEBPACK_IMPORTED_MODULE_1__.AuthGuard)('jwt') {
    constructor(reflector, authService) {
        super();
        this.reflector = reflector;
        this.authService = authService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(JwtAuthGuard_1.name);
    }
    canActivate(context) {
        const isPublic = this.reflector.getAllAndOverride(_decorators_public_decorator__WEBPACK_IMPORTED_MODULE_4__.IS_PUBLIC_KEY, [
            context.getHandler(),
            context.getClass(),
        ]);
        if (isPublic) {
            return true;
        }
        return super.canActivate(context);
    }
    handleRequest(err, user, info, context) {
        const request = context.switchToHttp().getRequest();
        const token = this.extractTokenFromHeader(request);
        if (err || !user) {
            this.logger.warn(`Authentication failed: ${(err === null || err === void 0 ? void 0 : err.message) || 'No user found'}`);
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException((err === null || err === void 0 ? void 0 : err.message) || 'Invalid or expired token');
        }
        if (this.authService.isTokenBlacklisted(token)) {
            this.logger.warn(`Blacklisted token used for user ${user.id}`);
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('Token has been revoked');
        }
        if (!user.isActive) {
            this.logger.warn(`Inactive user ${user.id} attempted to access the system`);
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('User account is inactive');
        }
        if (this.authService.requireEmailVerification && !user.emailVerified) {
            this.logger.warn(`Unverified user ${user.id} attempted to access the system`);
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('Email verification required');
        }
        request.tokenMetadata = {
            token,
            iat: user.iat,
            exp: user.exp,
        };
        this.logger.debug(`User ${user.id} successfully authenticated`);
        return user;
    }
    extractTokenFromHeader(request) {
        var _a, _b;
        const [type, token] = (_b = (_a = request.headers.authorization) === null || _a === void 0 ? void 0 : _a.split(' ')) !== null && _b !== void 0 ? _b : [];
        return type === 'Bearer' ? token : undefined;
    }
};
JwtAuthGuard = JwtAuthGuard_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_nestjs_core__WEBPACK_IMPORTED_MODULE_2__.Reflector,
        _services_auth_service__WEBPACK_IMPORTED_MODULE_3__.AuthService])
], JwtAuthGuard);



/***/ }),

/***/ "./src/modules/auth/guards/rate-limit.guard.ts":
/*!*****************************************************!*\
  !*** ./src/modules/auth/guards/rate-limit.guard.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RateLimitGuard: () => (/* binding */ RateLimitGuard)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var RateLimitGuard_1;

let RateLimitGuard = RateLimitGuard_1 = class RateLimitGuard {
    constructor() {
        this.maxRequests = 100;
        this.windowMs = 15 * 60 * 1000;
    }
    canActivate(context) {
        const request = context.switchToHttp().getRequest();
        const ip = this.getIp(request);
        const key = `${ip}`;
        const now = Date.now();
        const data = RateLimitGuard_1.store[key] || { count: 0, lastRequest: now };
        if (now - data.lastRequest > this.windowMs) {
            data.count = 0;
            data.lastRequest = now;
        }
        data.count += 1;
        RateLimitGuard_1.store[key] = data;
        const response = context.switchToHttp().getResponse();
        response.header('X-RateLimit-Limit', this.maxRequests);
        response.header('X-RateLimit-Remaining', Math.max(0, this.maxRequests - data.count));
        if (data.count > this.maxRequests) {
            const resetTime = new Date(data.lastRequest + this.windowMs);
            response.header('X-RateLimit-Reset', resetTime.toISOString());
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpException('Too Many Requests', _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.HttpStatus.TOO_MANY_REQUESTS);
        }
        return true;
    }
    getIp(request) {
        const forwardedFor = request.headers['x-forwarded-for'];
        if (forwardedFor) {
            return Array.isArray(forwardedFor)
                ? forwardedFor[0]
                : forwardedFor.split(',')[0].trim();
        }
        return request.ip || 'unknown';
    }
};
RateLimitGuard.store = {};
RateLimitGuard = RateLimitGuard_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)()
], RateLimitGuard);



/***/ }),

/***/ "./src/modules/auth/guards/roles.guard.ts":
/*!************************************************!*\
  !*** ./src/modules/auth/guards/roles.guard.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RolesGuard: () => (/* binding */ RolesGuard)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_core__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
/* harmony import */ var _decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../decorators/roles.decorator */ "./src/modules/auth/decorators/roles.decorator.ts");
/* harmony import */ var _decorators_permissions_decorator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../decorators/permissions.decorator */ "./src/modules/auth/decorators/permissions.decorator.ts");
/* harmony import */ var _services_auth_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../services/auth.service */ "./src/modules/auth/services/auth.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var RolesGuard_1;






let RolesGuard = RolesGuard_1 = class RolesGuard {
    constructor(reflector, authService) {
        this.reflector = reflector;
        this.authService = authService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(RolesGuard_1.name);
    }
    async canActivate(context) {
        const requiredRoles = this.reflector.getAllAndOverride(_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_3__.ROLES_KEY, [
            context.getHandler(),
            context.getClass(),
        ]);
        const requiredPermissions = this.reflector.getAllAndOverride(_decorators_permissions_decorator__WEBPACK_IMPORTED_MODULE_4__.PERMISSIONS_KEY, [context.getHandler(), context.getClass()]);
        if (!requiredRoles && !requiredPermissions) {
            return true;
        }
        const request = context.switchToHttp().getRequest();
        const user = request.user;
        if (!user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ForbiddenException('User not found in request');
        }
        try {
            if ((requiredRoles === null || requiredRoles === void 0 ? void 0 : requiredRoles.length) > 0) {
                const hasRole = this.matchRoles(requiredRoles, user.role);
                if (!hasRole) {
                    this.logger.warn(`User ${user.id} with role ${user.role} attempted to access resource requiring roles: ${requiredRoles.join(', ')}`);
                    return false;
                }
            }
            if ((requiredPermissions === null || requiredPermissions === void 0 ? void 0 : requiredPermissions.length) > 0) {
                const hasPermissions = await this.matchPermissions(requiredPermissions, user);
                if (!hasPermissions) {
                    this.logger.warn(`User ${user.id} attempted to access resource requiring permissions: ${requiredPermissions.join(', ')}`);
                    return false;
                }
            }
            if (request.params.organizationId) {
                const hasOrgAccess = await this.authService.checkOrganizationAccess(user.id, request.params.organizationId);
                if (!hasOrgAccess) {
                    this.logger.warn(`User ${user.id} attempted to access organization ${request.params.organizationId} without permission`);
                    return false;
                }
            }
            return true;
        }
        catch (error) {
            this.logger.error(`Error in roles guard: ${error.message}`, error.stack);
            return false;
        }
    }
    matchRoles(requiredRoles, userRole) {
        if (userRole === _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_2__.Role.SUPER_ADMIN) {
            return true;
        }
        return requiredRoles.includes(userRole);
    }
    async matchPermissions(requiredPermissions, user) {
        const userPermissions = await this.authService.getUserPermissions(user.id);
        if (user.role === _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_2__.Role.SUPER_ADMIN) {
            return true;
        }
        return requiredPermissions.every((permission) => userPermissions.includes(permission));
    }
    async checkResourceOwnership(user, resourceId, resourceType) {
        return this.authService.checkResourceOwnership(user.id, resourceId, resourceType);
    }
};
RolesGuard = RolesGuard_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_nestjs_core__WEBPACK_IMPORTED_MODULE_1__.Reflector,
        _services_auth_service__WEBPACK_IMPORTED_MODULE_5__.AuthService])
], RolesGuard);



/***/ }),

/***/ "./src/modules/auth/services/auth.service.ts":
/*!***************************************************!*\
  !*** ./src/modules/auth/services/auth.service.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthService: () => (/* binding */ AuthService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/jwt */ "@nestjs/jwt");
/* harmony import */ var _nestjs_jwt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_jwt__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _entities_refresh_token_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/refresh-token.entity */ "./src/modules/auth/entities/refresh-token.entity.ts");
/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! bcrypt */ "bcrypt");
/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
/* harmony import */ var _users_services_users_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../users/services/users.service */ "./src/modules/users/services/users.service.ts");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! uuid */ "uuid");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_11__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};












let AuthService = class AuthService {
    constructor(userRepository, refreshTokenRepository, organizationRepository, jwtService, usersService, configService) {
        this.userRepository = userRepository;
        this.refreshTokenRepository = refreshTokenRepository;
        this.organizationRepository = organizationRepository;
        this.jwtService = jwtService;
        this.usersService = usersService;
        this.configService = configService;
    }
    isTokenBlacklisted(token) {
        return false;
    }
    get requireEmailVerification() {
        var _a, _b;
        const requireVerification = (_b = (_a = this.configService) === null || _a === void 0 ? void 0 : _a.get('EMAIL_VERIFICATION_REQUIRED')) !== null && _b !== void 0 ? _b : true;
        return requireVerification;
    }
    async checkOrganizationAccess(userId, organizationId) {
        const user = await this.usersService.findById(userId);
        return (user === null || user === void 0 ? void 0 : user.organizationId) === organizationId;
    }
    async getUserPermissions(userId) {
        return ['permission1', 'permission2'];
    }
    async checkResourceOwnership(userId, resourceId, resourceType) {
        return true;
    }
    async validateUser(email, password) {
        const user = await this.userRepository.findOne({
            where: { email },
            relations: ['organization'],
        });
        if (user && (await (0,bcrypt__WEBPACK_IMPORTED_MODULE_6__.compare)(password, user.password))) {
            const { password: _password } = user, result = __rest(user, ["password"]);
            return result;
        }
        return null;
    }
    async login(loginDto, metadata) {
        var _a;
        const user = await this.validateUser(loginDto.email, loginDto.password);
        if (!user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('Invalid credentials');
        }
        const organization = await this.organizationRepository.findOne({
            where: { id: (_a = user.organization) === null || _a === void 0 ? void 0 : _a.id },
        });
        if (!organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('Organization not found');
        }
        if (!organization.isSubscriptionActive) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('Organization subscription is inactive');
        }
        const payload = {
            sub: user.id,
            email: user.email,
            role: user.role,
            organizationId: organization.id,
            permissions: [],
            sessionId: (0,uuid__WEBPACK_IMPORTED_MODULE_10__.v4)(),
        };
        const accessToken = this.jwtService.sign(payload);
        const refreshToken = await this.generateRefreshToken(user.id, metadata);
        return {
            accessToken,
            refreshToken: refreshToken.token,
            user: {
                id: user.id,
                email: user.email,
                role: user.role,
                organizationId: organization.id,
            },
        };
    }
    async register(registerDto, metadata) {
        const existingUser = await this.userRepository.findOne({
            where: { email: registerDto.user.email },
        });
        if (existingUser) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('Email already registered');
        }
        const organization = new _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_7__.Organization();
        organization.name = registerDto.organization.name;
        organization.status = _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_7__.OrganizationStatus.ACTIVE;
        organization.isSubscriptionActive = true;
        if (registerDto.organization.website) {
            organization.website = registerDto.organization.website;
        }
        if (registerDto.organization.phone) {
            organization.contactInfo = {
                phone: registerDto.organization.phone
            };
        }
        if (registerDto.organization.address) {
            organization.contactInfo = Object.assign(Object.assign({}, organization.contactInfo), { address: {
                    street: registerDto.organization.address.street,
                    city: registerDto.organization.address.city,
                    state: registerDto.organization.address.state,
                    postalCode: registerDto.organization.address.postalCode,
                    country: registerDto.organization.address.country,
                } });
        }
        organization.slug = this.generateSlug(registerDto.organization.name);
        const savedOrganization = await this.organizationRepository.save(organization);
        const hashedPassword = await (0,bcrypt__WEBPACK_IMPORTED_MODULE_6__.hash)(registerDto.user.password, 10);
        const user = new _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User();
        user.firstName = registerDto.user.firstName;
        user.lastName = registerDto.user.lastName;
        user.email = registerDto.user.email;
        user.password = hashedPassword;
        user.role = registerDto.user.role || _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_8__.Role.ADMIN;
        user.organizationId = savedOrganization.id;
        user.createdById = savedOrganization.id;
        if (registerDto.user.phone) {
            user.phoneNumber = registerDto.user.phone;
        }
        const savedUser = await this.userRepository.save(user);
        savedOrganization.createdById = savedUser.id;
        await this.organizationRepository.save(savedOrganization);
        const payload = {
            sub: savedUser.id,
            email: savedUser.email,
            role: savedUser.role,
            organizationId: savedOrganization.id,
            permissions: [],
            sessionId: (0,uuid__WEBPACK_IMPORTED_MODULE_10__.v4)(),
        };
        const accessToken = this.jwtService.sign(payload);
        const refreshToken = await this.generateRefreshToken(savedUser.id, metadata);
        return {
            accessToken,
            refreshToken: refreshToken.token,
            user: {
                id: savedUser.id,
                email: savedUser.email,
                firstName: savedUser.firstName,
                lastName: savedUser.lastName,
                role: savedUser.role,
                organizationId: savedOrganization.id,
            },
            organization: {
                id: savedOrganization.id,
                name: savedOrganization.name,
                status: savedOrganization.status,
            },
        };
    }
    async refreshToken(token) {
        const refreshToken = await this.refreshTokenRepository.findOne({
            where: { token },
            relations: ['user'],
        });
        if (!refreshToken || refreshToken.isExpired() || refreshToken.isRevoked) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('Invalid refresh token');
        }
        refreshToken.updateLastUsed();
        await this.refreshTokenRepository.save(refreshToken);
        const user = await this.userRepository.findOne({
            where: { id: refreshToken.userId }
        });
        if (!user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('User not found');
        }
        const payload = {
            sub: refreshToken.userId,
            email: user.email,
            role: user.role,
            organizationId: refreshToken.organizationId || user.organizationId,
            permissions: [],
            sessionId: (0,uuid__WEBPACK_IMPORTED_MODULE_10__.v4)(),
        };
        const accessToken = this.jwtService.sign(payload);
        return { accessToken };
    }
    async generateRefreshToken(userId, metadata) {
        const tokenString = (0,uuid__WEBPACK_IMPORTED_MODULE_10__.v4)();
        const user = await this.userRepository.findOne({ where: { id: userId } });
        if (!user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('User not found');
        }
        const token = new _entities_refresh_token_entity__WEBPACK_IMPORTED_MODULE_5__.RefreshToken();
        token.userId = userId;
        token.organizationId = user.organizationId;
        token.token = tokenString;
        token.expiresAt = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000);
        token.userAgent = metadata.userAgent;
        token.ipAddress = metadata.ip;
        token.metadata = {
            platform: this.extractPlatform(metadata.userAgent),
            browser: this.extractBrowser(metadata.userAgent),
            lastUsed: new Date(),
        };
        return this.refreshTokenRepository.save(token);
    }
    async logout(userId) {
        await this.refreshTokenRepository.update({ userId }, { isRevoked: true, revokedAt: new Date(), revokedReason: 'User logout' });
        return { message: 'Logged out successfully' };
    }
    async validateOrganizationAccess(userId, organizationId) {
        const user = await this.userRepository.findOne({
            where: { id: userId },
            relations: ['organization'],
        });
        return (user === null || user === void 0 ? void 0 : user.organizationId) === organizationId;
    }
    generateSlug(name) {
        return name
            .toLowerCase()
            .replace(/\s+/g, '-')
            .replace(/[^a-z0-9-]/g, '')
            .slice(0, 50) + '-' + Math.floor(Math.random() * 10000);
    }
    extractPlatform(userAgent) {
        if (userAgent.includes('Windows'))
            return 'Windows';
        if (userAgent.includes('Mac'))
            return 'Mac';
        if (userAgent.includes('iPhone') || userAgent.includes('iPad'))
            return 'iOS';
        if (userAgent.includes('Android'))
            return 'Android';
        if (userAgent.includes('Linux'))
            return 'Linux';
        return 'Unknown';
    }
    extractBrowser(userAgent) {
        if (userAgent.includes('Chrome') && !userAgent.includes('Edg'))
            return 'Chrome';
        if (userAgent.includes('Firefox'))
            return 'Firefox';
        if (userAgent.includes('Safari') && !userAgent.includes('Chrome'))
            return 'Safari';
        if (userAgent.includes('Edg'))
            return 'Edge';
        if (userAgent.includes('Opera') || userAgent.includes('OPR'))
            return 'Opera';
        return 'Unknown';
    }
    async sendPasswordResetEmail(email) {
        const user = await this.userRepository.findOne({ where: { email } });
        if (!user) {
            return;
        }
    }
    async changePassword(token, newPassword) {
    }
    async confirmEmail(token) {
    }
    async sendVerificationEmail(userId) {
        const user = await this.userRepository.findOne({ where: { id: userId } });
        if (!user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('User not found');
        }
    }
};
AuthService = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_entities_refresh_token_entity__WEBPACK_IMPORTED_MODULE_5__.RefreshToken)),
    __param(2, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_7__.Organization)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        _nestjs_jwt__WEBPACK_IMPORTED_MODULE_1__.JwtService,
        _users_services_users_service__WEBPACK_IMPORTED_MODULE_9__.UsersService,
        _nestjs_config__WEBPACK_IMPORTED_MODULE_11__.ConfigService])
], AuthService);



/***/ }),

/***/ "./src/modules/auth/strategies/jwt.strategy.ts":
/*!*****************************************************!*\
  !*** ./src/modules/auth/strategies/jwt.strategy.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   JwtStrategy: () => (/* binding */ JwtStrategy)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_passport__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/passport */ "@nestjs/passport");
/* harmony import */ var _nestjs_passport__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_passport__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var passport_jwt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! passport-jwt */ "passport-jwt");
/* harmony import */ var passport_jwt__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(passport_jwt__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _entities_user_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../entities/user.entity */ "./src/modules/auth/entities/user.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};







let JwtStrategy = class JwtStrategy extends (0,_nestjs_passport__WEBPACK_IMPORTED_MODULE_1__.PassportStrategy)(passport_jwt__WEBPACK_IMPORTED_MODULE_2__.Strategy) {
    constructor(configService, userRepository) {
        super({
            jwtFromRequest: passport_jwt__WEBPACK_IMPORTED_MODULE_2__.ExtractJwt.fromAuthHeaderAsBearerToken(),
            ignoreExpiration: false,
            secretOrKey: configService.get('JWT_SECRET'),
        });
        this.configService = configService;
        this.userRepository = userRepository;
    }
    async validate(payload) {
        const user = await this.userRepository.findOne({
            where: { id: payload.sub },
            relations: ['organization'],
        });
        if (!user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('User not found');
        }
        if (!user.organization.isActive) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('Organization is inactive');
        }
        return {
            id: payload.sub,
            email: payload.email,
            role: payload.role,
            organizationId: payload.organizationId,
            permissions: user.permissions,
        };
    }
};
JwtStrategy = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_4__.InjectRepository)(_entities_user_entity__WEBPACK_IMPORTED_MODULE_6__.User)),
    __metadata("design:paramtypes", [_nestjs_config__WEBPACK_IMPORTED_MODULE_3__.ConfigService,
        typeorm__WEBPACK_IMPORTED_MODULE_5__.Repository])
], JwtStrategy);



/***/ }),

/***/ "./src/modules/contacts/contacts.module.ts":
/*!*************************************************!*\
  !*** ./src/modules/contacts/contacts.module.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ContactsModule: () => (/* binding */ ContactsModule)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _controllers_contacts_controller__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./controllers/contacts.controller */ "./src/modules/contacts/controllers/contacts.controller.ts");
/* harmony import */ var _services_contacts_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./services/contacts.service */ "./src/modules/contacts/services/contacts.service.ts");
/* harmony import */ var _entities_contact_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts");
/* harmony import */ var _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./entities/contact-relationship.entity */ "./src/modules/contacts/entities/contact-relationship.entity.ts");
Object(function webpackMissingModule() { var e = new Error("Cannot find module '../medical-history/entities/medical-history.entity'"); e.code = 'MODULE_NOT_FOUND'; throw e; }());
/* harmony import */ var _appointments_entities_appointment_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../appointments/entities/appointment.entity */ "./src/modules/appointments/entities/appointment.entity.ts");
/* harmony import */ var _documents_entities_document_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../documents/entities/document.entity */ "./src/modules/documents/entities/document.entity.ts");
/* harmony import */ var _auth_auth_module__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../auth/auth.module */ "./src/modules/auth/auth.module.ts");
/* harmony import */ var _users_users_module__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../users/users.module */ "./src/modules/users/users.module.ts");
/* harmony import */ var _organizations_organizations_module__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../organizations/organizations.module */ "./src/modules/organizations/organizations.module.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};












let ContactsModule = class ContactsModule {
};
ContactsModule = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Module)({
        imports: [
            _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.TypeOrmModule.forFeature([
                _entities_contact_entity__WEBPACK_IMPORTED_MODULE_4__.Contact,
                _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.ContactRelationship,
                Object(function webpackMissingModule() { var e = new Error("Cannot find module '../medical-history/entities/medical-history.entity'"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),
                _appointments_entities_appointment_entity__WEBPACK_IMPORTED_MODULE_7__.Appointment,
                _documents_entities_document_entity__WEBPACK_IMPORTED_MODULE_8__.Document
            ]),
            _auth_auth_module__WEBPACK_IMPORTED_MODULE_9__.AuthModule,
            _users_users_module__WEBPACK_IMPORTED_MODULE_10__.UsersModule,
            _organizations_organizations_module__WEBPACK_IMPORTED_MODULE_11__.OrganizationsModule
        ],
        controllers: [_controllers_contacts_controller__WEBPACK_IMPORTED_MODULE_2__.ContactsController],
        providers: [_services_contacts_service__WEBPACK_IMPORTED_MODULE_3__.ContactsService],
        exports: [_services_contacts_service__WEBPACK_IMPORTED_MODULE_3__.ContactsService]
    })
], ContactsModule);



/***/ }),

/***/ "./src/modules/contacts/controllers/contacts.controller.ts":
/*!*****************************************************************!*\
  !*** ./src/modules/contacts/controllers/contacts.controller.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ContactsController: () => (/* binding */ ContactsController)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../auth/guards/jwt-auth.guard */ "./src/modules/auth/guards/jwt-auth.guard.ts");
/* harmony import */ var _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../auth/guards/roles.guard */ "./src/modules/auth/guards/roles.guard.ts");
/* harmony import */ var _common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/decorators/roles.decorator */ "./src/common/decorators/roles.decorator.ts");
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
/* harmony import */ var _services_contacts_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../services/contacts.service */ "./src/modules/contacts/services/contacts.service.ts");
/* harmony import */ var _dto_create_contact_dto__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../dto/create-contact.dto */ "./src/modules/contacts/dto/create-contact.dto.ts");
/* harmony import */ var _dto_update_contact_dto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dto/update-contact.dto */ "./src/modules/contacts/dto/update-contact.dto.ts");
/* harmony import */ var _dto_contact_query_dto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../dto/contact-query.dto */ "./src/modules/contacts/dto/contact-query.dto.ts");
/* harmony import */ var _dto_merge_contacts_dto__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../dto/merge-contacts.dto */ "./src/modules/contacts/dto/merge-contacts.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};












let ContactsController = class ContactsController {
    constructor(contactsService) {
        this.contactsService = contactsService;
    }
    async create(createContactDto, req) {
        var _a, _b, _c, _d;
        return this.contactsService.create(Object.assign(Object.assign({}, createContactDto), { organizationId: (_b = (_a = req.organization) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required'); })(), createdBy: (_d = (_c = req.user) === null || _c === void 0 ? void 0 : _c.id) !== null && _d !== void 0 ? _d : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User ID is required'); })() }));
    }
    async findAll(query, req) {
        var _a, _b;
        return this.contactsService.findAll(Object.assign(Object.assign({}, query), { organizationId: (_b = (_a = req.organization) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required'); })() }));
    }
    async search(searchTerm, query, req) {
        var _a, _b;
        if (!searchTerm || searchTerm.length < 2) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Search term must be at least 2 characters long');
        }
        return this.contactsService.search(searchTerm, Object.assign(Object.assign({}, query), { organizationId: (_b = (_a = req.organization) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required'); })() }));
    }
    async findOne(id, req) {
        var _a;
        if (!((_a = req.organization) === null || _a === void 0 ? void 0 : _a.id)) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required');
        }
        const contact = await this.contactsService.findOne(id, req.organization.id);
        if (!contact) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.NotFoundException('Contact not found');
        }
        return contact;
    }
    async update(id, updateContactDto, req) {
        var _a, _b, _c, _d;
        return this.contactsService.update(id, Object.assign(Object.assign({}, updateContactDto), { organizationId: (_b = (_a = req.organization) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required'); })(), updatedBy: (_d = (_c = req.user) === null || _c === void 0 ? void 0 : _c.id) !== null && _d !== void 0 ? _d : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User ID is required'); })() }));
    }
    async remove(id, req) {
        var _a;
        if (!((_a = req.organization) === null || _a === void 0 ? void 0 : _a.id)) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required');
        }
        await this.contactsService.remove(id, req.organization.id);
    }
    async merge(primaryId, mergeContactsDto, req) {
        var _a, _b, _c, _d;
        return this.contactsService.merge(primaryId, mergeContactsDto.secondaryContactId, {
            organizationId: (_b = (_a = req.organization) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required'); })(),
            userId: (_d = (_c = req.user) === null || _c === void 0 ? void 0 : _c.id) !== null && _d !== void 0 ? _d : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User ID is required'); })(),
        });
    }
    async getRelationships(id, req) {
        var _a;
        if (!((_a = req.organization) === null || _a === void 0 ? void 0 : _a.id)) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required');
        }
        return this.contactsService.getRelationships(id, req.organization.id);
    }
    async addRelationship(id, relationshipDto, req) {
        var _a, _b, _c, _d;
        return this.contactsService.addRelationship(id, relationshipDto, {
            organizationId: (_b = (_a = req.organization) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required'); })(),
            userId: (_d = (_c = req.user) === null || _c === void 0 ? void 0 : _c.id) !== null && _d !== void 0 ? _d : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User ID is required'); })(),
        });
    }
    async getMedicalHistory(id, query, req) {
        var _a, _b;
        return this.contactsService.getMedicalHistory(id, Object.assign(Object.assign({}, query), { organizationId: (_b = (_a = req.organization) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required'); })() }));
    }
    async getDocuments(id, query, req) {
        var _a, _b;
        return this.contactsService.getDocuments(id, Object.assign(Object.assign({}, query), { organizationId: (_b = (_a = req.organization) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required'); })() }));
    }
    async addDocument(id, documentDto, req) {
        var _a, _b, _c, _d;
        return this.contactsService.addDocument(id, documentDto, {
            organizationId: (_b = (_a = req.organization) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required'); })(),
            userId: (_d = (_c = req.user) === null || _c === void 0 ? void 0 : _c.id) !== null && _d !== void 0 ? _d : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User ID is required'); })(),
        });
    }
    async getStatistics(query, req) {
        var _a, _b;
        return this.contactsService.getStatistics(Object.assign(Object.assign({}, query), { organizationId: (_b = (_a = req.organization) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required'); })() }));
    }
    async importContacts(importDto, req) {
        var _a, _b, _c, _d;
        return this.contactsService.importContacts(importDto, {
            organizationId: (_b = (_a = req.organization) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required'); })(),
            userId: (_d = (_c = req.user) === null || _c === void 0 ? void 0 : _c.id) !== null && _d !== void 0 ? _d : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User ID is required'); })(),
        });
    }
    async exportContacts(exportDto, req) {
        var _a, _b, _c, _d;
        return this.contactsService.exportContacts(exportDto, {
            organizationId: (_b = (_a = req.organization) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization ID is required'); })(),
            userId: (_d = (_c = req.user) === null || _c === void 0 ? void 0 : _c.id) !== null && _d !== void 0 ? _d : (() => { throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User ID is required'); })(),
        });
    }
};
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.STAFF),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Create new contact' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'Contact created successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Contact) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_create_contact_dto__WEBPACK_IMPORTED_MODULE_7__.CreateContactDto, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "create", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get all contacts' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return all contacts' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_contact_query_dto__WEBPACK_IMPORTED_MODULE_9__.ContactQueryDto, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "findAll", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('search'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Search contacts' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return matching contacts' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)('q')),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_contact_query_dto__WEBPACK_IMPORTED_MODULE_9__.ContactQueryDto, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "search", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get contact by id' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return contact details' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Contact) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "findOne", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)(':id'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.STAFF),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Update contact' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Contact updated successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Contact) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_update_contact_dto__WEBPACK_IMPORTED_MODULE_8__.UpdateContactDto, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "update", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Delete)(':id'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Delete contact' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.NO_CONTENT, description: 'Contact deleted successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "remove", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(':id/merge'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Merge contacts' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Contacts merged successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Contact) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_merge_contacts_dto__WEBPACK_IMPORTED_MODULE_10__.MergeContactsDto, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "merge", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id/relationships'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get contact relationships' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return contact relationships' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: [(__webpack_require__(/*! ../entities/contact-relationship.entity */ "./src/modules/contacts/entities/contact-relationship.entity.ts").ContactRelationship)] }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "getRelationships", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(':id/relationships'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.STAFF),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Add contact relationship' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'Relationship added successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/contact-relationship.entity */ "./src/modules/contacts/entities/contact-relationship.entity.ts").ContactRelationship) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "addRelationship", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id/medical-history'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get medical history' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return medical history' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: [(__webpack_require__(/*! ../../medical-history/medical-history.entity */ "./src/modules/medical-history/medical-history.entity.ts").MedicalHistory)] }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "getMedicalHistory", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id/documents'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get contact documents' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return contact documents' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: [(__webpack_require__(/*! ../../documents/entities/document.entity */ "./src/modules/documents/entities/document.entity.ts").Document)] }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "getDocuments", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(':id/documents'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.STAFF),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Add contact document' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'Document added successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: [(__webpack_require__(/*! ../../documents/entities/document.entity */ "./src/modules/documents/entities/document.entity.ts").Document)] }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "addDocument", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('statistics/summary'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get contacts statistics' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return contacts statistics' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: Object }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "getStatistics", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('import'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Import contacts' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Contacts imported successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "importContacts", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('export'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Export contacts' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Contacts exported successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, Object]),
    __metadata("design:returntype", Promise)
], ContactsController.prototype, "exportContacts", null);
ContactsController = __decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiTags)('Contacts'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Controller)('contacts'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UseGuards)(_auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__.JwtAuthGuard, _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__.RolesGuard),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiBearerAuth)(),
    __metadata("design:paramtypes", [_services_contacts_service__WEBPACK_IMPORTED_MODULE_6__.ContactsService])
], ContactsController);



/***/ }),

/***/ "./src/modules/contacts/dto/contact-query.dto.ts":
/*!*******************************************************!*\
  !*** ./src/modules/contacts/dto/contact-query.dto.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ContactQueryDto: () => (/* binding */ ContactQueryDto),
/* harmony export */   ContactType: () => (/* binding */ ContactType),
/* harmony export */   DateRangeDto: () => (/* binding */ DateRangeDto),
/* harmony export */   SortField: () => (/* binding */ SortField),
/* harmony export */   SortOrder: () => (/* binding */ SortOrder)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _enums_gender_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/gender.enum */ "./src/modules/contacts/enums/gender.enum.ts");
/* harmony import */ var _enums_marital_status_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../enums/marital-status.enum */ "./src/modules/contacts/enums/marital-status.enum.ts");
/* harmony import */ var _enums_blood_group_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../enums/blood-group.enum */ "./src/modules/contacts/enums/blood-group.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var ContactType;
(function (ContactType) {
    ContactType["PATIENT"] = "PATIENT";
    ContactType["PROVIDER"] = "PROVIDER";
    ContactType["STAFF"] = "STAFF";
    ContactType["VENDOR"] = "VENDOR";
    ContactType["OTHER"] = "OTHER";
})(ContactType || (ContactType = {}));
var SortOrder;
(function (SortOrder) {
    SortOrder["ASC"] = "ASC";
    SortOrder["DESC"] = "DESC";
})(SortOrder || (SortOrder = {}));
var SortField;
(function (SortField) {
    SortField["FIRST_NAME"] = "firstName";
    SortField["LAST_NAME"] = "lastName";
    SortField["EMAIL"] = "email";
    SortField["PHONE"] = "phone";
    SortField["DATE_OF_BIRTH"] = "dateOfBirth";
    SortField["CREATED_AT"] = "createdAt";
    SortField["UPDATED_AT"] = "updatedAt";
})(SortField || (SortField = {}));
class DateRangeDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { from: { required: false, type: () => String }, to: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Start date for filtering' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDateString)(),
    __metadata("design:type", String)
], DateRangeDto.prototype, "from", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'End date for filtering' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDateString)(),
    __metadata("design:type", String)
], DateRangeDto.prototype, "to", void 0);
class ContactQueryDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { search: { required: false, type: () => String }, type: { required: false, enum: (__webpack_require__(/*! ./contact-query.dto */ "./src/modules/contacts/dto/contact-query.dto.ts").ContactType) }, gender: { required: false, enum: (__webpack_require__(/*! ../enums/gender.enum */ "./src/modules/contacts/enums/gender.enum.ts").Gender) }, maritalStatus: { required: false, enum: (__webpack_require__(/*! ../enums/marital-status.enum */ "./src/modules/contacts/enums/marital-status.enum.ts").MaritalStatus) }, bloodGroup: { required: false, enum: (__webpack_require__(/*! ../enums/blood-group.enum */ "./src/modules/contacts/enums/blood-group.enum.ts").BloodGroup) }, isActive: { required: false, type: () => Boolean }, tags: { required: false, type: () => [String] }, groups: { required: false, type: () => [String] }, createdAt: { required: false, type: () => (__webpack_require__(/*! ./contact-query.dto */ "./src/modules/contacts/dto/contact-query.dto.ts").DateRangeDto) }, updatedAt: { required: false, type: () => (__webpack_require__(/*! ./contact-query.dto */ "./src/modules/contacts/dto/contact-query.dto.ts").DateRangeDto) }, dateOfBirth: { required: false, type: () => (__webpack_require__(/*! ./contact-query.dto */ "./src/modules/contacts/dto/contact-query.dto.ts").DateRangeDto) }, city: { required: false, type: () => String }, state: { required: false, type: () => String }, country: { required: false, type: () => String }, postalCode: { required: false, type: () => String }, email: { required: false, type: () => String }, phone: { required: false, type: () => String }, insuranceProvider: { required: false, type: () => String }, medicalConditions: { required: false, type: () => [String] }, allergies: { required: false, type: () => [String] }, createdBy: { required: false, type: () => String }, updatedBy: { required: false, type: () => String }, page: { required: false, type: () => Number, minimum: 1 }, limit: { required: false, type: () => Number, minimum: 1, maximum: 100 }, sortBy: { required: false, enum: (__webpack_require__(/*! ./contact-query.dto */ "./src/modules/contacts/dto/contact-query.dto.ts").SortField), enum: Object.values(SortField) }, sortOrder: { required: false, enum: (__webpack_require__(/*! ./contact-query.dto */ "./src/modules/contacts/dto/contact-query.dto.ts").SortOrder), enum: Object.values(SortOrder) }, includeInactive: { required: false, type: () => Boolean }, hasUpcomingAppointments: { required: false, type: () => Boolean }, recentActivityDays: { required: false, type: () => Number, minimum: 1 }, allowsEmail: { required: false, type: () => Boolean }, allowsSMS: { required: false, type: () => Boolean }, hasDocuments: { required: false, type: () => Boolean }, hasMedicalHistory: { required: false, type: () => Boolean }, preferredLanguage: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Search term to look in firstName, lastName, email, and phone',
        example: 'john',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "search", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Type of contact',
        enum: ContactType,
        example: ContactType.PATIENT,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(ContactType),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by gender',
        enum: _enums_gender_enum__WEBPACK_IMPORTED_MODULE_3__.Gender,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_gender_enum__WEBPACK_IMPORTED_MODULE_3__.Gender),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "gender", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by marital status',
        enum: _enums_marital_status_enum__WEBPACK_IMPORTED_MODULE_4__.MaritalStatus,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_marital_status_enum__WEBPACK_IMPORTED_MODULE_4__.MaritalStatus),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "maritalStatus", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by blood group',
        enum: _enums_blood_group_enum__WEBPACK_IMPORTED_MODULE_5__.BloodGroup,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_blood_group_enum__WEBPACK_IMPORTED_MODULE_5__.BloodGroup),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "bloodGroup", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by active status',
        example: true,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], ContactQueryDto.prototype, "isActive", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by specific tags',
        type: [String],
        example: ['vip', 'recurring'],
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], ContactQueryDto.prototype, "tags", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by group IDs',
        type: [String],
        example: ['group1', 'group2'],
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], ContactQueryDto.prototype, "groups", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by creation date range',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => DateRangeDto),
    __metadata("design:type", DateRangeDto)
], ContactQueryDto.prototype, "createdAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by update date range',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => DateRangeDto),
    __metadata("design:type", DateRangeDto)
], ContactQueryDto.prototype, "updatedAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by date of birth range',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => DateRangeDto),
    __metadata("design:type", DateRangeDto)
], ContactQueryDto.prototype, "dateOfBirth", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by city',
        example: 'New York',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "city", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by state',
        example: 'NY',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "state", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by country',
        example: 'USA',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "country", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by postal code',
        example: '10001',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "postalCode", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by email',
        example: 'john.doe@example.com',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)(),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "email", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by phone number',
        example: '+1234567890',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "phone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by insurance provider',
        example: 'Blue Cross',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "insuranceProvider", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by medical conditions',
        type: [String],
        example: ['diabetes', 'hypertension'],
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], ContactQueryDto.prototype, "medicalConditions", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by allergies',
        type: [String],
        example: ['penicillin', 'peanuts'],
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], ContactQueryDto.prototype, "allergies", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by created by user ID',
        example: 'user123',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "createdBy", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by updated by user ID',
        example: 'user123',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "updatedBy", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Page number for pagination',
        minimum: 1,
        default: 1,
        example: 1,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    __metadata("design:type", Number)
], ContactQueryDto.prototype, "page", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Number of items per page',
        minimum: 1,
        maximum: 100,
        default: 10,
        example: 20,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(100),
    __metadata("design:type", Number)
], ContactQueryDto.prototype, "limit", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Field to sort by',
        enum: SortField,
        default: SortField.CREATED_AT,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsIn)(Object.values(SortField)),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "sortBy", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Sort order',
        enum: SortOrder,
        default: SortOrder.DESC,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsIn)(Object.values(SortOrder)),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "sortOrder", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Include inactive contacts in results',
        default: false,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], ContactQueryDto.prototype, "includeInactive", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Include contacts with upcoming appointments',
        default: false,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], ContactQueryDto.prototype, "hasUpcomingAppointments", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Only include contacts with recent activity',
        example: 30,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    __metadata("design:type", Number)
], ContactQueryDto.prototype, "recentActivityDays", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Only include contacts with specific communication preferences',
        example: true,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], ContactQueryDto.prototype, "allowsEmail", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Only include contacts that allow SMS',
        example: true,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], ContactQueryDto.prototype, "allowsSMS", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Only include contacts with documents',
        example: true,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], ContactQueryDto.prototype, "hasDocuments", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Only include contacts with medical history',
        example: true,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], ContactQueryDto.prototype, "hasMedicalHistory", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Preferred language for filtering',
        example: 'en',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], ContactQueryDto.prototype, "preferredLanguage", void 0);


/***/ }),

/***/ "./src/modules/contacts/dto/create-contact.dto.ts":
/*!********************************************************!*\
  !*** ./src/modules/contacts/dto/create-contact.dto.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CommunicationPrefsDto: () => (/* binding */ CommunicationPrefsDto),
/* harmony export */   ContactAddressDto: () => (/* binding */ ContactAddressDto),
/* harmony export */   CreateContactDto: () => (/* binding */ CreateContactDto),
/* harmony export */   CreateContactResponseDto: () => (/* binding */ CreateContactResponseDto),
/* harmony export */   EmergencyContactDto: () => (/* binding */ EmergencyContactDto),
/* harmony export */   InsuranceInfoDto: () => (/* binding */ InsuranceInfoDto),
/* harmony export */   MedicalInfoDto: () => (/* binding */ MedicalInfoDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _enums_gender_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/gender.enum */ "./src/modules/contacts/enums/gender.enum.ts");
/* harmony import */ var _enums_marital_status_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../enums/marital-status.enum */ "./src/modules/contacts/enums/marital-status.enum.ts");
/* harmony import */ var _enums_blood_group_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../enums/blood-group.enum */ "./src/modules/contacts/enums/blood-group.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







class ContactAddressDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { street: { required: true, type: () => String, maxLength: 100 }, firstName: { required: true, type: () => String }, lastName: { required: true, type: () => String }, email: { required: true, type: () => String }, phone: { required: true, type: () => String }, createdBy: { required: false, type: () => Object }, street2: { required: false, type: () => String, maxLength: 100 }, city: { required: true, type: () => String, maxLength: 50 }, state: { required: true, type: () => String, maxLength: 50 }, postalCode: { required: true, type: () => String, maxLength: 20 }, country: { required: true, type: () => String, maxLength: 50 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], ContactAddressDto.prototype, "street", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], ContactAddressDto.prototype, "street2", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], ContactAddressDto.prototype, "city", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], ContactAddressDto.prototype, "state", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(20),
    __metadata("design:type", String)
], ContactAddressDto.prototype, "postalCode", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], ContactAddressDto.prototype, "country", void 0);
class EmergencyContactDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { name: { required: true, type: () => String, minLength: 2, maxLength: 50 }, relationship: { required: true, type: () => String, maxLength: 50 }, phone: { required: true, type: () => String }, email: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], EmergencyContactDto.prototype, "name", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], EmergencyContactDto.prototype, "relationship", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], EmergencyContactDto.prototype, "phone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)(),
    __metadata("design:type", String)
], EmergencyContactDto.prototype, "email", void 0);
class MedicalInfoDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { bloodGroup: { required: false, enum: (__webpack_require__(/*! ../enums/blood-group.enum */ "./src/modules/contacts/enums/blood-group.enum.ts").BloodGroup) }, allergies: { required: false, type: () => [String] }, medications: { required: false, type: () => [String] }, conditions: { required: false, type: () => [String] }, surgicalHistory: { required: false, type: () => String, maxLength: 1000 }, familyHistory: { required: false, type: () => String, maxLength: 1000 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _enums_blood_group_enum__WEBPACK_IMPORTED_MODULE_5__.BloodGroup }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_blood_group_enum__WEBPACK_IMPORTED_MODULE_5__.BloodGroup),
    __metadata("design:type", String)
], MedicalInfoDto.prototype, "bloodGroup", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], MedicalInfoDto.prototype, "allergies", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], MedicalInfoDto.prototype, "medications", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], MedicalInfoDto.prototype, "conditions", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(1000),
    __metadata("design:type", String)
], MedicalInfoDto.prototype, "surgicalHistory", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(1000),
    __metadata("design:type", String)
], MedicalInfoDto.prototype, "familyHistory", void 0);
class InsuranceInfoDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { provider: { required: true, type: () => String }, policyNumber: { required: true, type: () => String }, groupNumber: { required: false, type: () => String }, validFrom: { required: true, type: () => Date }, validTo: { required: true, type: () => Date } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], InsuranceInfoDto.prototype, "provider", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], InsuranceInfoDto.prototype, "policyNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], InsuranceInfoDto.prototype, "groupNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    __metadata("design:type", Date)
], InsuranceInfoDto.prototype, "validFrom", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    __metadata("design:type", Date)
], InsuranceInfoDto.prototype, "validTo", void 0);
class CommunicationPrefsDto {
    constructor() {
        this.allowEmail = true;
        this.allowSMS = true;
        this.allowWhatsApp = true;
        this.allowPush = true;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { allowEmail: { required: true, type: () => Boolean, default: true }, allowSMS: { required: true, type: () => Boolean, default: true }, allowWhatsApp: { required: true, type: () => Boolean, default: true }, allowPush: { required: true, type: () => Boolean, default: true }, preferredLanguage: { required: false, type: () => String }, preferredContactTime: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CommunicationPrefsDto.prototype, "allowEmail", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CommunicationPrefsDto.prototype, "allowSMS", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CommunicationPrefsDto.prototype, "allowWhatsApp", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CommunicationPrefsDto.prototype, "allowPush", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], CommunicationPrefsDto.prototype, "preferredLanguage", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], CommunicationPrefsDto.prototype, "preferredContactTime", void 0);
class CreateContactDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { firstName: { required: true, type: () => String, minLength: 2, maxLength: 50 }, lastName: { required: true, type: () => String, minLength: 2, maxLength: 50 }, email: { required: true, type: () => String }, phone: { required: true, type: () => String }, whatsapp: { required: false, type: () => String }, dateOfBirth: { required: true, type: () => Date }, gender: { required: true, enum: (__webpack_require__(/*! ../enums/gender.enum */ "./src/modules/contacts/enums/gender.enum.ts").Gender) }, maritalStatus: { required: false, enum: (__webpack_require__(/*! ../enums/marital-status.enum */ "./src/modules/contacts/enums/marital-status.enum.ts").MaritalStatus) }, address: { required: true, type: () => (__webpack_require__(/*! ./create-contact.dto */ "./src/modules/contacts/dto/create-contact.dto.ts").ContactAddressDto) }, emergencyContact: { required: true, type: () => (__webpack_require__(/*! ./create-contact.dto */ "./src/modules/contacts/dto/create-contact.dto.ts").EmergencyContactDto) }, medicalInfo: { required: false, type: () => (__webpack_require__(/*! ./create-contact.dto */ "./src/modules/contacts/dto/create-contact.dto.ts").MedicalInfoDto) }, insuranceInfo: { required: false, type: () => (__webpack_require__(/*! ./create-contact.dto */ "./src/modules/contacts/dto/create-contact.dto.ts").InsuranceInfoDto) }, communicationPrefs: { required: true, type: () => (__webpack_require__(/*! ./create-contact.dto */ "./src/modules/contacts/dto/create-contact.dto.ts").CommunicationPrefsDto) }, notes: { required: false, type: () => String, maxLength: 500 }, documents: { required: false, type: () => [String] }, tags: { required: false, type: () => [String] }, groups: { required: false, type: () => [String] } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'First name of the contact',
        example: 'John',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], CreateContactDto.prototype, "firstName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Last name of the contact',
        example: 'Doe',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], CreateContactDto.prototype, "lastName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Email address',
        example: 'john.doe@example.com',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], CreateContactDto.prototype, "email", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Phone number',
        example: '+1234567890',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], CreateContactDto.prototype, "phone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'WhatsApp number',
        example: '+1234567890',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    __metadata("design:type", String)
], CreateContactDto.prototype, "whatsapp", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Date of birth',
        example: '1990-01-01',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    __metadata("design:type", Date)
], CreateContactDto.prototype, "dateOfBirth", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Gender',
        enum: _enums_gender_enum__WEBPACK_IMPORTED_MODULE_3__.Gender,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_gender_enum__WEBPACK_IMPORTED_MODULE_3__.Gender),
    __metadata("design:type", String)
], CreateContactDto.prototype, "gender", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Marital status',
        enum: _enums_marital_status_enum__WEBPACK_IMPORTED_MODULE_4__.MaritalStatus,
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_marital_status_enum__WEBPACK_IMPORTED_MODULE_4__.MaritalStatus),
    __metadata("design:type", String)
], CreateContactDto.prototype, "maritalStatus", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Contact address',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => ContactAddressDto),
    __metadata("design:type", ContactAddressDto)
], CreateContactDto.prototype, "address", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Emergency contact information',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => EmergencyContactDto),
    __metadata("design:type", EmergencyContactDto)
], CreateContactDto.prototype, "emergencyContact", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Medical information',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => MedicalInfoDto),
    __metadata("design:type", MedicalInfoDto)
], CreateContactDto.prototype, "medicalInfo", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Insurance information',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => InsuranceInfoDto),
    __metadata("design:type", InsuranceInfoDto)
], CreateContactDto.prototype, "insuranceInfo", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Communication preferences',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => CommunicationPrefsDto),
    __metadata("design:type", CommunicationPrefsDto)
], CreateContactDto.prototype, "communicationPrefs", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Additional notes',
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(500),
    __metadata("design:type", String)
], CreateContactDto.prototype, "notes", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Document URLs',
        type: [String],
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUrl)({}, { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    __metadata("design:type", Array)
], CreateContactDto.prototype, "documents", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Contact tags',
        type: [String],
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], CreateContactDto.prototype, "tags", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Contact group IDs',
        type: [String],
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], CreateContactDto.prototype, "groups", void 0);
class CreateContactResponseDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, firstName: { required: true, type: () => String }, lastName: { required: true, type: () => String }, email: { required: true, type: () => String }, createdAt: { required: true, type: () => Date }, createdBy: { required: true, type: () => String } };
    }
}


/***/ }),

/***/ "./src/modules/contacts/dto/merge-contacts.dto.ts":
/*!********************************************************!*\
  !*** ./src/modules/contacts/dto/merge-contacts.dto.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MergeContactsDto: () => (/* binding */ MergeContactsDto),
/* harmony export */   MergeContactsResponseDto: () => (/* binding */ MergeContactsResponseDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _enums_gender_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/gender.enum */ "./src/modules/contacts/enums/gender.enum.ts");
/* harmony import */ var _enums_marital_status_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../enums/marital-status.enum */ "./src/modules/contacts/enums/marital-status.enum.ts");
/* harmony import */ var _update_contact_dto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./update-contact.dto */ "./src/modules/contacts/dto/update-contact.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







class MergeContactsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { primaryContactId: { required: true, type: () => String }, secondaryContactId: { required: true, type: () => String }, secondaryContactIds: { required: true, type: () => [String] }, firstName: { required: false, type: () => String, minLength: 2, maxLength: 50 }, lastName: { required: false, type: () => String, minLength: 2, maxLength: 50 }, email: { required: false, type: () => String }, phone: { required: false, type: () => String }, whatsapp: { required: false, type: () => String }, dateOfBirth: { required: false, type: () => Date }, gender: { required: false, enum: (__webpack_require__(/*! ../enums/gender.enum */ "./src/modules/contacts/enums/gender.enum.ts").Gender) }, maritalStatus: { required: false, enum: (__webpack_require__(/*! ../enums/marital-status.enum */ "./src/modules/contacts/enums/marital-status.enum.ts").MaritalStatus) }, address: { required: false, type: () => (__webpack_require__(/*! ./update-contact.dto */ "./src/modules/contacts/dto/update-contact.dto.ts").UpdateContactAddressDto) }, emergencyContact: { required: false, type: () => (__webpack_require__(/*! ./update-contact.dto */ "./src/modules/contacts/dto/update-contact.dto.ts").UpdateEmergencyContactDto) }, medicalInfo: { required: false, type: () => (__webpack_require__(/*! ./update-contact.dto */ "./src/modules/contacts/dto/update-contact.dto.ts").UpdateMedicalInfoDto) }, insuranceInfo: { required: false, type: () => (__webpack_require__(/*! ./update-contact.dto */ "./src/modules/contacts/dto/update-contact.dto.ts").UpdateInsuranceInfoDto) }, communicationPrefs: { required: false, type: () => (__webpack_require__(/*! ./update-contact.dto */ "./src/modules/contacts/dto/update-contact.dto.ts").UpdateCommunicationPrefsDto) }, notes: { required: false, type: () => String, maxLength: 500 }, documents: { required: false, type: () => [String] }, tags: { required: false, type: () => [String] }, groups: { required: false, type: () => [String] }, keepHistory: { required: false, type: () => Boolean }, deleteSecondaryContacts: { required: false, type: () => Boolean } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Primary contact ID that will be kept' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], MergeContactsDto.prototype, "primaryContactId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Secondary contact IDs that will be merged into the primary contact', type: [String] }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4', { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMinSize)(1),
    __metadata("design:type", Array)
], MergeContactsDto.prototype, "secondaryContactIds", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], MergeContactsDto.prototype, "firstName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], MergeContactsDto.prototype, "lastName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)(),
    __metadata("design:type", String)
], MergeContactsDto.prototype, "email", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    __metadata("design:type", String)
], MergeContactsDto.prototype, "phone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    __metadata("design:type", String)
], MergeContactsDto.prototype, "whatsapp", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    __metadata("design:type", Date)
], MergeContactsDto.prototype, "dateOfBirth", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _enums_gender_enum__WEBPACK_IMPORTED_MODULE_3__.Gender }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_gender_enum__WEBPACK_IMPORTED_MODULE_3__.Gender),
    __metadata("design:type", String)
], MergeContactsDto.prototype, "gender", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _enums_marital_status_enum__WEBPACK_IMPORTED_MODULE_4__.MaritalStatus }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_marital_status_enum__WEBPACK_IMPORTED_MODULE_4__.MaritalStatus),
    __metadata("design:type", String)
], MergeContactsDto.prototype, "maritalStatus", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => _update_contact_dto__WEBPACK_IMPORTED_MODULE_5__.UpdateContactAddressDto),
    __metadata("design:type", _update_contact_dto__WEBPACK_IMPORTED_MODULE_5__.UpdateContactAddressDto)
], MergeContactsDto.prototype, "address", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => _update_contact_dto__WEBPACK_IMPORTED_MODULE_5__.UpdateEmergencyContactDto),
    __metadata("design:type", _update_contact_dto__WEBPACK_IMPORTED_MODULE_5__.UpdateEmergencyContactDto)
], MergeContactsDto.prototype, "emergencyContact", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => _update_contact_dto__WEBPACK_IMPORTED_MODULE_5__.UpdateMedicalInfoDto),
    __metadata("design:type", _update_contact_dto__WEBPACK_IMPORTED_MODULE_5__.UpdateMedicalInfoDto)
], MergeContactsDto.prototype, "medicalInfo", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => _update_contact_dto__WEBPACK_IMPORTED_MODULE_5__.UpdateInsuranceInfoDto),
    __metadata("design:type", _update_contact_dto__WEBPACK_IMPORTED_MODULE_5__.UpdateInsuranceInfoDto)
], MergeContactsDto.prototype, "insuranceInfo", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => _update_contact_dto__WEBPACK_IMPORTED_MODULE_5__.UpdateCommunicationPrefsDto),
    __metadata("design:type", _update_contact_dto__WEBPACK_IMPORTED_MODULE_5__.UpdateCommunicationPrefsDto)
], MergeContactsDto.prototype, "communicationPrefs", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(500),
    __metadata("design:type", String)
], MergeContactsDto.prototype, "notes", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUrl)({}, { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    __metadata("design:type", Array)
], MergeContactsDto.prototype, "documents", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], MergeContactsDto.prototype, "tags", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    __metadata("design:type", Array)
], MergeContactsDto.prototype, "groups", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to keep the history of the merged contacts' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], MergeContactsDto.prototype, "keepHistory", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to delete the secondary contacts after merging' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], MergeContactsDto.prototype, "deleteSecondaryContacts", void 0);
class MergeContactsResponseDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, firstName: { required: true, type: () => String }, lastName: { required: true, type: () => String }, email: { required: true, type: () => String }, phone: { required: true, type: () => String }, mergedContactIds: { required: true, type: () => [String] }, mergedAt: { required: true, type: () => Date }, mergedBy: { required: true, type: () => String } };
    }
}


/***/ }),

/***/ "./src/modules/contacts/dto/update-contact.dto.ts":
/*!********************************************************!*\
  !*** ./src/modules/contacts/dto/update-contact.dto.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UpdateCommunicationPrefsDto: () => (/* binding */ UpdateCommunicationPrefsDto),
/* harmony export */   UpdateContactAddressDto: () => (/* binding */ UpdateContactAddressDto),
/* harmony export */   UpdateContactDto: () => (/* binding */ UpdateContactDto),
/* harmony export */   UpdateContactResponseDto: () => (/* binding */ UpdateContactResponseDto),
/* harmony export */   UpdateEmergencyContactDto: () => (/* binding */ UpdateEmergencyContactDto),
/* harmony export */   UpdateInsuranceInfoDto: () => (/* binding */ UpdateInsuranceInfoDto),
/* harmony export */   UpdateMedicalInfoDto: () => (/* binding */ UpdateMedicalInfoDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _enums_gender_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/gender.enum */ "./src/modules/contacts/enums/gender.enum.ts");
/* harmony import */ var _enums_marital_status_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../enums/marital-status.enum */ "./src/modules/contacts/enums/marital-status.enum.ts");
/* harmony import */ var _enums_blood_group_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../enums/blood-group.enum */ "./src/modules/contacts/enums/blood-group.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







class UpdateContactAddressDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { street: { required: true, type: () => String, maxLength: 100 }, street2: { required: false, type: () => String, maxLength: 100 }, city: { required: true, type: () => String, maxLength: 50 }, state: { required: true, type: () => String, maxLength: 50 }, postalCode: { required: true, type: () => String, maxLength: 20 }, country: { required: true, type: () => String, maxLength: 50 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], UpdateContactAddressDto.prototype, "street", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], UpdateContactAddressDto.prototype, "street2", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], UpdateContactAddressDto.prototype, "city", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], UpdateContactAddressDto.prototype, "state", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(20),
    __metadata("design:type", String)
], UpdateContactAddressDto.prototype, "postalCode", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], UpdateContactAddressDto.prototype, "country", void 0);
class UpdateEmergencyContactDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { name: { required: true, type: () => String, minLength: 2, maxLength: 50 }, relationship: { required: true, type: () => String, maxLength: 50 }, phone: { required: true, type: () => String }, email: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], UpdateEmergencyContactDto.prototype, "name", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], UpdateEmergencyContactDto.prototype, "relationship", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    __metadata("design:type", String)
], UpdateEmergencyContactDto.prototype, "phone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)(),
    __metadata("design:type", String)
], UpdateEmergencyContactDto.prototype, "email", void 0);
class UpdateMedicalInfoDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { bloodGroup: { required: false, enum: (__webpack_require__(/*! ../enums/blood-group.enum */ "./src/modules/contacts/enums/blood-group.enum.ts").BloodGroup) }, allergies: { required: false, type: () => [String] }, medications: { required: false, type: () => [String] }, conditions: { required: false, type: () => [String] }, surgicalHistory: { required: false, type: () => String, maxLength: 1000 }, familyHistory: { required: false, type: () => String, maxLength: 1000 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _enums_blood_group_enum__WEBPACK_IMPORTED_MODULE_5__.BloodGroup }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_blood_group_enum__WEBPACK_IMPORTED_MODULE_5__.BloodGroup),
    __metadata("design:type", String)
], UpdateMedicalInfoDto.prototype, "bloodGroup", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], UpdateMedicalInfoDto.prototype, "allergies", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], UpdateMedicalInfoDto.prototype, "medications", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], UpdateMedicalInfoDto.prototype, "conditions", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(1000),
    __metadata("design:type", String)
], UpdateMedicalInfoDto.prototype, "surgicalHistory", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(1000),
    __metadata("design:type", String)
], UpdateMedicalInfoDto.prototype, "familyHistory", void 0);
class UpdateInsuranceInfoDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { provider: { required: true, type: () => String }, policyNumber: { required: true, type: () => String }, groupNumber: { required: false, type: () => String }, validFrom: { required: false, type: () => Date }, validTo: { required: false, type: () => Date } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdateInsuranceInfoDto.prototype, "provider", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdateInsuranceInfoDto.prototype, "policyNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdateInsuranceInfoDto.prototype, "groupNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    __metadata("design:type", Date)
], UpdateInsuranceInfoDto.prototype, "validFrom", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    __metadata("design:type", Date)
], UpdateInsuranceInfoDto.prototype, "validTo", void 0);
class UpdateCommunicationPrefsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { allowEmail: { required: false, type: () => Boolean }, allowSMS: { required: false, type: () => Boolean }, allowWhatsApp: { required: false, type: () => Boolean }, allowPush: { required: false, type: () => Boolean }, preferredLanguage: { required: false, type: () => String }, preferredContactTime: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateCommunicationPrefsDto.prototype, "allowEmail", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateCommunicationPrefsDto.prototype, "allowSMS", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateCommunicationPrefsDto.prototype, "allowWhatsApp", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateCommunicationPrefsDto.prototype, "allowPush", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdateCommunicationPrefsDto.prototype, "preferredLanguage", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdateCommunicationPrefsDto.prototype, "preferredContactTime", void 0);
class UpdateContactDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { firstName: { required: false, type: () => String, minLength: 2, maxLength: 50 }, lastName: { required: false, type: () => String, minLength: 2, maxLength: 50 }, email: { required: false, type: () => String }, phone: { required: false, type: () => String }, whatsapp: { required: false, type: () => String }, dateOfBirth: { required: false, type: () => Date }, gender: { required: false, enum: (__webpack_require__(/*! ../enums/gender.enum */ "./src/modules/contacts/enums/gender.enum.ts").Gender) }, maritalStatus: { required: false, enum: (__webpack_require__(/*! ../enums/marital-status.enum */ "./src/modules/contacts/enums/marital-status.enum.ts").MaritalStatus) }, address: { required: false, type: () => (__webpack_require__(/*! ./update-contact.dto */ "./src/modules/contacts/dto/update-contact.dto.ts").UpdateContactAddressDto) }, emergencyContact: { required: false, type: () => (__webpack_require__(/*! ./update-contact.dto */ "./src/modules/contacts/dto/update-contact.dto.ts").UpdateEmergencyContactDto) }, medicalInfo: { required: false, type: () => (__webpack_require__(/*! ./update-contact.dto */ "./src/modules/contacts/dto/update-contact.dto.ts").UpdateMedicalInfoDto) }, insuranceInfo: { required: false, type: () => (__webpack_require__(/*! ./update-contact.dto */ "./src/modules/contacts/dto/update-contact.dto.ts").UpdateInsuranceInfoDto) }, communicationPrefs: { required: false, type: () => (__webpack_require__(/*! ./update-contact.dto */ "./src/modules/contacts/dto/update-contact.dto.ts").UpdateCommunicationPrefsDto) }, notes: { required: false, type: () => String, maxLength: 500 }, documents: { required: false, type: () => [String] }, tags: { required: false, type: () => [String] }, groups: { required: false, type: () => [String] }, isActive: { required: false, type: () => Boolean } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], UpdateContactDto.prototype, "firstName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], UpdateContactDto.prototype, "lastName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)(),
    __metadata("design:type", String)
], UpdateContactDto.prototype, "email", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    __metadata("design:type", String)
], UpdateContactDto.prototype, "phone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    __metadata("design:type", String)
], UpdateContactDto.prototype, "whatsapp", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    __metadata("design:type", Date)
], UpdateContactDto.prototype, "dateOfBirth", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _enums_gender_enum__WEBPACK_IMPORTED_MODULE_3__.Gender }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_gender_enum__WEBPACK_IMPORTED_MODULE_3__.Gender),
    __metadata("design:type", String)
], UpdateContactDto.prototype, "gender", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _enums_marital_status_enum__WEBPACK_IMPORTED_MODULE_4__.MaritalStatus }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_marital_status_enum__WEBPACK_IMPORTED_MODULE_4__.MaritalStatus),
    __metadata("design:type", String)
], UpdateContactDto.prototype, "maritalStatus", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => UpdateContactAddressDto),
    __metadata("design:type", UpdateContactAddressDto)
], UpdateContactDto.prototype, "address", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => UpdateEmergencyContactDto),
    __metadata("design:type", UpdateEmergencyContactDto)
], UpdateContactDto.prototype, "emergencyContact", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => UpdateMedicalInfoDto),
    __metadata("design:type", UpdateMedicalInfoDto)
], UpdateContactDto.prototype, "medicalInfo", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => UpdateInsuranceInfoDto),
    __metadata("design:type", UpdateInsuranceInfoDto)
], UpdateContactDto.prototype, "insuranceInfo", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => UpdateCommunicationPrefsDto),
    __metadata("design:type", UpdateCommunicationPrefsDto)
], UpdateContactDto.prototype, "communicationPrefs", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(500),
    __metadata("design:type", String)
], UpdateContactDto.prototype, "notes", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUrl)({}, { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    __metadata("design:type", Array)
], UpdateContactDto.prototype, "documents", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], UpdateContactDto.prototype, "tags", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    __metadata("design:type", Array)
], UpdateContactDto.prototype, "groups", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateContactDto.prototype, "isActive", void 0);
class UpdateContactResponseDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, firstName: { required: true, type: () => String }, lastName: { required: true, type: () => String }, email: { required: true, type: () => String }, updatedAt: { required: true, type: () => Date }, updatedBy: { required: true, type: () => String } };
    }
}


/***/ }),

/***/ "./src/modules/contacts/entities/contact-relationship.entity.ts":
/*!**********************************************************************!*\
  !*** ./src/modules/contacts/entities/contact-relationship.entity.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ContactRelationship: () => (/* binding */ ContactRelationship),
/* harmony export */   RelationshipType: () => (/* binding */ RelationshipType)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _contact_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./contact.entity */ "./src/modules/contacts/entities/contact.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var RelationshipType;
(function (RelationshipType) {
    RelationshipType["SPOUSE"] = "SPOUSE";
    RelationshipType["PARENT"] = "PARENT";
    RelationshipType["CHILD"] = "CHILD";
    RelationshipType["SIBLING"] = "SIBLING";
    RelationshipType["GUARDIAN"] = "GUARDIAN";
    RelationshipType["DEPENDENT"] = "DEPENDENT";
    RelationshipType["EMERGENCY_CONTACT"] = "EMERGENCY_CONTACT";
    RelationshipType["PRIMARY_CARE_PROVIDER"] = "PRIMARY_CARE_PROVIDER";
    RelationshipType["SPECIALIST"] = "SPECIALIST";
    RelationshipType["CAREGIVER"] = "CAREGIVER";
    RelationshipType["RELATIVE"] = "RELATIVE";
    RelationshipType["COLLEAGUE"] = "COLLEAGUE";
    RelationshipType["FRIEND"] = "FRIEND";
    RelationshipType["OTHER"] = "OTHER";
})(RelationshipType || (RelationshipType = {}));
let ContactRelationship = class ContactRelationship {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, contactId: { required: true, type: () => String }, contact: { required: true, type: () => (__webpack_require__(/*! ./contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Contact) }, relatedContactId: { required: true, type: () => String }, relatedContact: { required: true, type: () => (__webpack_require__(/*! ./contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Contact) }, type: { required: true, enum: (__webpack_require__(/*! ./contact-relationship.entity */ "./src/modules/contacts/entities/contact-relationship.entity.ts").RelationshipType) }, notes: { required: true, type: () => String }, isActive: { required: true, type: () => Boolean }, isPrimary: { required: true, type: () => Boolean }, createdById: { required: true, type: () => String }, updatedById: { required: true, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, deletedAt: { required: true, type: () => Date }, metadata: { required: true, type: () => Object, description: "Custom metadata for the relationship (JSON field)\nThis can store additional information specific to the relationship type\nFor example, for a PARENT-CHILD relationship, it might store custodial information" }, inverseType: { required: true, description: "Inverse relationship type (if applicable)\nFor example, if this relationship is PARENT, the inverse would be CHILD\nThis helps maintain consistency when querying from either direction", enum: (__webpack_require__(/*! ./contact-relationship.entity */ "./src/modules/contacts/entities/contact-relationship.entity.ts").RelationshipType) }, startDate: { required: true, type: () => Date, description: "Start date of the relationship (if applicable)\nFor example, when a provider became a patient's specialist" }, endDate: { required: true, type: () => Date, description: "End date of the relationship (if applicable)\nFor example, when a provider stopped being a patient's specialist" } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], ContactRelationship.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], ContactRelationship.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], ContactRelationship.prototype, "contactId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _contact_entity__WEBPACK_IMPORTED_MODULE_2__.Contact, {
        onDelete: 'CASCADE',
    }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'contactId' }),
    __metadata("design:type", _contact_entity__WEBPACK_IMPORTED_MODULE_2__.Contact)
], ContactRelationship.prototype, "contact", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], ContactRelationship.prototype, "relatedContactId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _contact_entity__WEBPACK_IMPORTED_MODULE_2__.Contact, {
        onDelete: 'CASCADE',
    }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'relatedContactId' }),
    __metadata("design:type", _contact_entity__WEBPACK_IMPORTED_MODULE_2__.Contact)
], ContactRelationship.prototype, "relatedContact", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: RelationshipType,
        default: RelationshipType.OTHER,
    }),
    __metadata("design:type", String)
], ContactRelationship.prototype, "type", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], ContactRelationship.prototype, "notes", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'boolean', default: true }),
    __metadata("design:type", Boolean)
], ContactRelationship.prototype, "isActive", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'boolean', default: false }),
    __metadata("design:type", Boolean)
], ContactRelationship.prototype, "isPrimary", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid', nullable: true }),
    __metadata("design:type", String)
], ContactRelationship.prototype, "createdById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid', nullable: true }),
    __metadata("design:type", String)
], ContactRelationship.prototype, "updatedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)({ type: 'timestamptz' }),
    __metadata("design:type", Date)
], ContactRelationship.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)({ type: 'timestamptz' }),
    __metadata("design:type", Date)
], ContactRelationship.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.DeleteDateColumn)({ type: 'timestamptz', nullable: true }),
    __metadata("design:type", Date)
], ContactRelationship.prototype, "deletedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], ContactRelationship.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: RelationshipType,
        nullable: true,
    }),
    __metadata("design:type", String)
], ContactRelationship.prototype, "inverseType", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'date', nullable: true }),
    __metadata("design:type", Date)
], ContactRelationship.prototype, "startDate", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'date', nullable: true }),
    __metadata("design:type", Date)
], ContactRelationship.prototype, "endDate", void 0);
ContactRelationship = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('contact_relationships'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'contactId']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'relatedContactId'])
], ContactRelationship);



/***/ }),

/***/ "./src/modules/contacts/entities/contact.entity.ts":
/*!*********************************************************!*\
  !*** ./src/modules/contacts/entities/contact.entity.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BloodType: () => (/* binding */ BloodType),
/* harmony export */   Contact: () => (/* binding */ Contact),
/* harmony export */   ContactType: () => (/* binding */ ContactType),
/* harmony export */   Gender: () => (/* binding */ Gender)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _appointments_entities_appointment_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../appointments/entities/appointment.entity */ "./src/modules/appointments/entities/appointment.entity.ts");
/* harmony import */ var _documents_entities_document_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../documents/entities/document.entity */ "./src/modules/documents/entities/document.entity.ts");
/* harmony import */ var _medical_history_medical_history_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../medical-history/medical-history.entity */ "./src/modules/medical-history/medical-history.entity.ts");
/* harmony import */ var _contact_relationship_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./contact-relationship.entity */ "./src/modules/contacts/entities/contact-relationship.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var ContactType;
(function (ContactType) {
    ContactType["PATIENT"] = "PATIENT";
    ContactType["EMERGENCY_CONTACT"] = "EMERGENCY_CONTACT";
    ContactType["FAMILY_MEMBER"] = "FAMILY_MEMBER";
    ContactType["OTHER"] = "OTHER";
})(ContactType || (ContactType = {}));
var Gender;
(function (Gender) {
    Gender["MALE"] = "MALE";
    Gender["FEMALE"] = "FEMALE";
    Gender["OTHER"] = "OTHER";
    Gender["PREFER_NOT_TO_SAY"] = "PREFER_NOT_TO_SAY";
})(Gender || (Gender = {}));
var BloodType;
(function (BloodType) {
    BloodType["A_POSITIVE"] = "A+";
    BloodType["A_NEGATIVE"] = "A-";
    BloodType["B_POSITIVE"] = "B+";
    BloodType["B_NEGATIVE"] = "B-";
    BloodType["O_POSITIVE"] = "O+";
    BloodType["O_NEGATIVE"] = "O-";
    BloodType["AB_POSITIVE"] = "AB+";
    BloodType["AB_NEGATIVE"] = "AB-";
    BloodType["UNKNOWN"] = "UNKNOWN";
})(BloodType || (BloodType = {}));
let Contact = class Contact {
    get fullName() {
        return `${this.firstName} ${this.lastName}`;
    }
    get age() {
        if (!this.dateOfBirth)
            return null;
        const today = new Date();
        const birthDate = new Date(this.dateOfBirth);
        let age = today.getFullYear() - birthDate.getFullYear();
        const monthDiff = today.getMonth() - birthDate.getMonth();
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }
        return age;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, status: { required: true, type: () => String }, createdBy: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, metadata: { required: false, type: () => Object }, phone: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, type: { required: true, enum: (__webpack_require__(/*! ./contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").ContactType) }, firstName: { required: true, type: () => String }, lastName: { required: true, type: () => String }, middleName: { required: false, type: () => String }, preferredName: { required: false, type: () => String }, email: { required: false, type: () => String }, phoneNumber: { required: false, type: () => String }, alternativePhoneNumber: { required: false, type: () => String }, gender: { required: false, enum: (__webpack_require__(/*! ./contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Gender) }, dateOfBirth: { required: false, type: () => Date }, bloodType: { required: true, enum: (__webpack_require__(/*! ./contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").BloodType) }, address: { required: false, type: () => ({ street: { required: true, type: () => String }, city: { required: true, type: () => String }, state: { required: true, type: () => String }, postalCode: { required: true, type: () => String }, country: { required: true, type: () => String } }) }, emergencyContact: { required: false, type: () => ({ name: { required: true, type: () => String }, relationship: { required: true, type: () => String }, phoneNumber: { required: true, type: () => String }, address: { required: false, type: () => String } }) }, allergies: { required: false, type: () => [String] }, medications: { required: false, type: () => [String] }, occupation: { required: false, type: () => String }, notes: { required: false, type: () => String }, customFields: { required: false, type: () => Object }, isActive: { required: true, type: () => Boolean }, lastVisitDate: { required: false, type: () => Date }, nextAppointmentDate: { required: false, type: () => Date }, createdById: { required: true, type: () => String }, updatedById: { required: false, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, deletedAt: { required: false, type: () => Date }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, updatedBy: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, appointments: { required: true, type: () => [(__webpack_require__(/*! ../../appointments/entities/appointment.entity */ "./src/modules/appointments/entities/appointment.entity.ts").Appointment)] }, documents: { required: true, type: () => [(__webpack_require__(/*! ../../documents/entities/document.entity */ "./src/modules/documents/entities/document.entity.ts").Document)] }, medicalHistory: { required: true, type: () => [(__webpack_require__(/*! ../../medical-history/medical-history.entity */ "./src/modules/medical-history/medical-history.entity.ts").MedicalHistory)] }, relationships: { required: true, type: () => [(__webpack_require__(/*! ./contact-relationship.entity */ "./src/modules/contacts/entities/contact-relationship.entity.ts").ContactRelationship)] }, mergedRecords: { required: true, type: () => [(__webpack_require__(/*! ./contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Contact)] } };
    }
};
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Contact.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User),
    JoinColumn({ name: 'createdById' }),
    __metadata("design:type", Object)
], Contact.prototype, "metadata", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Contact.prototype, "organizationId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'enum', enum: ContactType, default: ContactType.PATIENT }),
    __metadata("design:type", String)
], Contact.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Contact.prototype, "firstName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Contact.prototype, "lastName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Contact.prototype, "middleName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Contact.prototype, "preferredName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ unique: true, nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], Contact.prototype, "email", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Contact.prototype, "phoneNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Contact.prototype, "alternativePhoneNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'enum', enum: Gender, nullable: true }),
    __metadata("design:type", String)
], Contact.prototype, "gender", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'date', nullable: true }),
    __metadata("design:type", Date)
], Contact.prototype, "dateOfBirth", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'enum', enum: BloodType, default: BloodType.UNKNOWN }),
    __metadata("design:type", String)
], Contact.prototype, "bloodType", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Contact.prototype, "address", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Contact.prototype, "emergencyContact", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'simple-array', nullable: true }),
    __metadata("design:type", Array)
], Contact.prototype, "allergies", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'simple-array', nullable: true }),
    __metadata("design:type", Array)
], Contact.prototype, "medications", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Contact.prototype, "occupation", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Contact.prototype, "notes", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Contact.prototype, "customFields", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Contact.prototype, "isActive", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Contact.prototype, "lastVisitDate", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Contact.prototype, "nextAppointmentDate", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Contact.prototype, "createdById", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Contact.prototype, "updatedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], Contact.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], Contact.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.DeleteDateColumn)(),
    __metadata("design:type", Date)
], Contact.prototype, "deletedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization)
], Contact.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User)
], Contact.prototype, "updatedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _appointments_entities_appointment_entity__WEBPACK_IMPORTED_MODULE_4__.Appointment, appointment => appointment.contact),
    __metadata("design:type", Array)
], Contact.prototype, "appointments", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _documents_entities_document_entity__WEBPACK_IMPORTED_MODULE_5__.Document, document => document.contact),
    __metadata("design:type", Array)
], Contact.prototype, "documents", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _medical_history_medical_history_entity__WEBPACK_IMPORTED_MODULE_6__.MedicalHistory, medicalHistory => medicalHistory.contact),
    __metadata("design:type", Array)
], Contact.prototype, "medicalHistory", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _contact_relationship_entity__WEBPACK_IMPORTED_MODULE_7__.ContactRelationship, relationship => relationship.contact),
    __metadata("design:type", Array)
], Contact.prototype, "relationships", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToMany)(() => Contact),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinTable)({
        name: 'contact_merged_records',
        joinColumn: { name: 'primary_contact_id', referencedColumnName: 'id' },
        inverseJoinColumn: { name: 'merged_contact_id', referencedColumnName: 'id' },
    }),
    __metadata("design:type", Array)
], Contact.prototype, "mergedRecords", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", String),
    __metadata("design:paramtypes", [])
], Contact.prototype, "fullName", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [])
], Contact.prototype, "age", null);
Contact = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('contacts'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'email']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'phoneNumber'])
], Contact);

function JoinColumn(arg0) {
    return (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)(arg0);
}


/***/ }),

/***/ "./src/modules/contacts/enums/blood-group.enum.ts":
/*!********************************************************!*\
  !*** ./src/modules/contacts/enums/blood-group.enum.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BloodGroup: () => (/* binding */ BloodGroup)
/* harmony export */ });
var BloodGroup;
(function (BloodGroup) {
    BloodGroup["A_POSITIVE"] = "A+";
    BloodGroup["A_NEGATIVE"] = "A-";
    BloodGroup["B_POSITIVE"] = "B+";
    BloodGroup["B_NEGATIVE"] = "B-";
    BloodGroup["AB_POSITIVE"] = "AB+";
    BloodGroup["AB_NEGATIVE"] = "AB-";
    BloodGroup["O_POSITIVE"] = "O+";
    BloodGroup["O_NEGATIVE"] = "O-";
    BloodGroup["UNKNOWN"] = "UNKNOWN";
})(BloodGroup || (BloodGroup = {}));


/***/ }),

/***/ "./src/modules/contacts/enums/gender.enum.ts":
/*!***************************************************!*\
  !*** ./src/modules/contacts/enums/gender.enum.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Gender: () => (/* binding */ Gender)
/* harmony export */ });
var Gender;
(function (Gender) {
    Gender["MALE"] = "MALE";
    Gender["FEMALE"] = "FEMALE";
    Gender["OTHER"] = "OTHER";
    Gender["PREFER_NOT_TO_SAY"] = "PREFER_NOT_TO_SAY";
})(Gender || (Gender = {}));


/***/ }),

/***/ "./src/modules/contacts/enums/marital-status.enum.ts":
/*!***********************************************************!*\
  !*** ./src/modules/contacts/enums/marital-status.enum.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MaritalStatus: () => (/* binding */ MaritalStatus)
/* harmony export */ });
var MaritalStatus;
(function (MaritalStatus) {
    MaritalStatus["SINGLE"] = "SINGLE";
    MaritalStatus["MARRIED"] = "MARRIED";
    MaritalStatus["DIVORCED"] = "DIVORCED";
    MaritalStatus["WIDOWED"] = "WIDOWED";
    MaritalStatus["SEPARATED"] = "SEPARATED";
    MaritalStatus["DOMESTIC_PARTNERSHIP"] = "DOMESTIC_PARTNERSHIP";
    MaritalStatus["OTHER"] = "OTHER";
})(MaritalStatus || (MaritalStatus = {}));


/***/ }),

/***/ "./src/modules/contacts/services/contacts.service.ts":
/*!***********************************************************!*\
  !*** ./src/modules/contacts/services/contacts.service.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ContactsService: () => (/* binding */ ContactsService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! nestjs-typeorm-paginate */ "nestjs-typeorm-paginate");
/* harmony import */ var nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_contact_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts");
/* harmony import */ var _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/contact-relationship.entity */ "./src/modules/contacts/entities/contact-relationship.entity.ts");
/* harmony import */ var _medical_history_medical_history_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../medical-history/medical-history.entity */ "./src/modules/medical-history/medical-history.entity.ts");
/* harmony import */ var _appointments_entities_appointment_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../appointments/entities/appointment.entity */ "./src/modules/appointments/entities/appointment.entity.ts");
/* harmony import */ var _documents_entities_document_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../documents/entities/document.entity */ "./src/modules/documents/entities/document.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};









function getInverseRelationshipType(type) {
    const inverseMap = {
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.SPOUSE]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.SPOUSE,
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.PARENT]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.CHILD,
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.CHILD]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.PARENT,
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.SIBLING]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.SIBLING,
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.GUARDIAN]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.DEPENDENT,
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.DEPENDENT]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.GUARDIAN,
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.EMERGENCY_CONTACT]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.OTHER,
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.PRIMARY_CARE_PROVIDER]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.OTHER,
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.SPECIALIST]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.OTHER,
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.CAREGIVER]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.OTHER,
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.RELATIVE]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.RELATIVE,
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.COLLEAGUE]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.COLLEAGUE,
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.FRIEND]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.FRIEND,
        [_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.OTHER]: _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.OTHER,
    };
    return inverseMap[type];
}
let ContactsService = class ContactsService {
    constructor(contactRepository, relationshipRepository, medicalHistoryRepository, appointmentRepository, documentRepository, dataSource) {
        this.contactRepository = contactRepository;
        this.relationshipRepository = relationshipRepository;
        this.medicalHistoryRepository = medicalHistoryRepository;
        this.appointmentRepository = appointmentRepository;
        this.documentRepository = documentRepository;
        this.dataSource = dataSource;
    }
    async create(data) {
        const existingContact = await this.contactRepository.findOne({
            where: [
                { email: data.email, organizationId: data.organizationId },
                { phone: data.phone, organizationId: data.organizationId },
            ],
        });
        if (existingContact) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ConflictException('Contact with this email or phone number already exists');
        }
        const contact = this.contactRepository.create(Object.assign(Object.assign({}, data), { createdBy: { id: data.createdBy } }));
        const [savedContact] = await this.contactRepository.save([contact]);
        return savedContact;
    }
    async findAll(query) {
        const _a = query, { organizationId, search, type, isActive, page = 1, limit = 10 } = _a, filters = __rest(_a, ["organizationId", "search", "type", "isActive", "page", "limit"]);
        const queryBuilder = this.contactRepository.createQueryBuilder('contact')
            .where('contact.organizationId = :organizationId', { organizationId });
        if (search) {
            queryBuilder.andWhere('(LOWER(contact.firstName) LIKE LOWER(:search) OR LOWER(contact.lastName) LIKE LOWER(:search) OR LOWER(contact.email) LIKE LOWER(:search))', { search: `%${search}%` });
        }
        if (type) {
            queryBuilder.andWhere('contact.type = :type', { type });
        }
        if (isActive !== undefined) {
            queryBuilder.andWhere('contact.isActive = :isActive', { isActive });
        }
        Object.keys(filters).forEach(key => {
            queryBuilder.andWhere(`contact.${key} = :${key}`, { [key]: filters[key] });
        });
        return (0,nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_3__.paginate)(queryBuilder, { page, limit });
    }
    async search(searchTerm, query) {
        const { organizationId, page = 1, limit = 10 } = query;
        const queryBuilder = this.contactRepository.createQueryBuilder('contact')
            .where('contact.organizationId = :organizationId', { organizationId })
            .andWhere('(LOWER(contact.firstName) LIKE LOWER(:search) OR LOWER(contact.lastName) LIKE LOWER(:search) OR LOWER(contact.email) LIKE LOWER(:search) OR contact.phone LIKE :search)', { search: `%${searchTerm}%` });
        return (0,nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_3__.paginate)(queryBuilder, { page, limit });
    }
    async findOne(id, organizationId) {
        const contact = await this.contactRepository.findOne({
            where: { id, organizationId },
            relations: ['documents', 'appointments', 'medicalHistory'],
        });
        if (!contact) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('Contact not found');
        }
        return contact;
    }
    async update(id, data) {
        const contact = await this.findOne(id, data.organizationId);
        if (data.email || data.phone) {
            const whereCondition = [];
            if (data.email) {
                whereCondition.push({ email: data.email, organizationId: data.organizationId, id: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.Not)(id) });
            }
            if (data.phone) {
                whereCondition.push({ phone: data.phone, organizationId: data.organizationId, id: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.Not)(id) });
            }
            const existingContact = await this.contactRepository.findOne({
                where: whereCondition,
            });
            if (existingContact) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ConflictException('Contact with this email or phone number already exists');
            }
        }
        Object.assign(contact, Object.assign(Object.assign({}, data), { updatedById: data.updatedBy }));
        return this.contactRepository.save(contact);
    }
    async remove(id, organizationId) {
        const contact = await this.findOne(id, organizationId);
        await this.contactRepository.softRemove(contact);
    }
    async merge(primaryId, secondaryId, context) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const [primary, secondary] = await Promise.all([
                this.findOne(primaryId, context.organizationId),
                this.findOne(secondaryId, context.organizationId),
            ]);
            if (!primary.middleName)
                primary.middleName = secondary.middleName;
            if ('alternativePhoneNumber' in primary && 'alternativePhoneNumber' in secondary) {
                if (!primary.alternativePhoneNumber)
                    primary.alternativePhoneNumber = secondary.alternativePhoneNumber;
            }
            if ('allergies' in primary && 'allergies' in secondary) {
                if (!primary.allergies)
                    primary.allergies = secondary.allergies;
                if (primary.allergies && secondary.allergies) {
                    primary.allergies = [...new Set([...primary.allergies, ...secondary.allergies])];
                }
            }
            if ('medications' in primary && 'medications' in secondary) {
                if (!primary.medications)
                    primary.medications = secondary.medications;
                if (primary.medications && secondary.medications) {
                    primary.medications = [...new Set([...primary.medications, ...secondary.medications])];
                }
            }
            if (primary.metadata && secondary.metadata) {
                primary.metadata = Object.assign(Object.assign({}, secondary.metadata), primary.metadata);
            }
            else if (secondary.metadata) {
                primary.metadata = secondary.metadata;
            }
            await queryRunner.manager
                .createQueryBuilder()
                .update(_appointments_entities_appointment_entity__WEBPACK_IMPORTED_MODULE_7__.Appointment)
                .set({ contactId: primaryId })
                .where("contactId = :secondaryId", { secondaryId })
                .execute();
            await queryRunner.manager
                .createQueryBuilder()
                .update(_documents_entities_document_entity__WEBPACK_IMPORTED_MODULE_8__.Document)
                .set({ contactId: primaryId })
                .where("contactId = :secondaryId", { secondaryId })
                .execute();
            await queryRunner.manager
                .createQueryBuilder()
                .update(_medical_history_medical_history_entity__WEBPACK_IMPORTED_MODULE_6__.MedicalHistory)
                .set({ contactId: primaryId })
                .where("contactId = :secondaryId", { secondaryId });
            primary.mergedRecords = [...(primary.mergedRecords || []), secondary];
            if ('mergedRecords' in primary) {
                primary.mergedRecords = [...(primary.mergedRecords || []), secondary];
            }
            secondary.status = 'INACTIVE';
            await queryRunner.manager.save(_entities_contact_entity__WEBPACK_IMPORTED_MODULE_4__.Contact, primary);
            await queryRunner.manager.save(_entities_contact_entity__WEBPACK_IMPORTED_MODULE_4__.Contact, secondary);
            await queryRunner.commitTransaction();
            return primary;
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async getRelationships(id, organizationId, includeInactive = false) {
        const queryBuilder = this.relationshipRepository.createQueryBuilder('relationship')
            .leftJoinAndSelect('relationship.relatedContact', 'relatedContact')
            .where('relationship.contactId = :id', { id })
            .andWhere('relationship.organizationId = :organizationId', { organizationId });
        if (!includeInactive) {
            queryBuilder.andWhere('relationship.isActive = true');
        }
        return queryBuilder.getMany();
    }
    async createRelationship(contactId, relationshipDto, context) {
        var _a, _b, _c, _d, _e, _f;
        const [contact, relatedContact] = await Promise.all([
            this.findOne(contactId, context.organizationId),
            this.findOne(relationshipDto.relatedContactId, context.organizationId),
        ]);
        const existingRelationship = await this.relationshipRepository.findOne({
            where: {
                contactId,
                relatedContactId: relationshipDto.relatedContactId,
                organizationId: context.organizationId,
            },
        });
        if (existingRelationship) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Relationship already exists between these contacts');
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const inverseType = relationshipDto.inverseType || getInverseRelationshipType(relationshipDto.type);
            const relationship = new _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.ContactRelationship();
            relationship.contactId = contactId;
            relationship.relatedContactId = relationshipDto.relatedContactId;
            relationship.type = relationshipDto.type;
            relationship.inverseType = inverseType !== null && inverseType !== void 0 ? inverseType : _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.OTHER;
            relationship.notes = (_a = relationshipDto.notes) !== null && _a !== void 0 ? _a : '';
            relationship.isPrimary = relationshipDto.isPrimary || false;
            relationship.startDate = (_b = relationshipDto.startDate) !== null && _b !== void 0 ? _b : new Date();
            if (relationshipDto.endDate) {
                relationship.endDate = relationshipDto.endDate;
            }
            relationship.metadata = (_c = relationshipDto.metadata) !== null && _c !== void 0 ? _c : {};
            relationship.organizationId = context.organizationId;
            relationship.createdById = context.userId;
            const savedRelationship = await queryRunner.manager.save(relationship);
            if (inverseType && inverseType !== _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.OTHER) {
                const inverseRelationship = new _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.ContactRelationship();
                inverseRelationship.contactId = relationshipDto.relatedContactId;
                inverseRelationship.relatedContactId = contactId;
                inverseRelationship.type = inverseType;
                inverseRelationship.inverseType = relationshipDto.type;
                inverseRelationship.notes = (_d = relationshipDto.notes) !== null && _d !== void 0 ? _d : '';
                inverseRelationship.isPrimary = relationshipDto.isPrimary || false;
                inverseRelationship.startDate = (_e = relationshipDto.startDate) !== null && _e !== void 0 ? _e : new Date();
                if (relationshipDto.endDate !== undefined) {
                    inverseRelationship.endDate = relationshipDto.endDate;
                }
                inverseRelationship.metadata = (_f = relationshipDto.metadata) !== null && _f !== void 0 ? _f : {};
                inverseRelationship.organizationId = context.organizationId;
                inverseRelationship.createdById = context.userId;
                await queryRunner.manager.save(inverseRelationship);
            }
            await queryRunner.commitTransaction();
            return savedRelationship;
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async updateRelationship(id, updateDto, context) {
        var _a;
        const relationship = await this.relationshipRepository.findOne({
            where: { id, organizationId: context.organizationId },
            relations: ['contact', 'relatedContact'],
        });
        if (!relationship) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('Relationship not found');
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            if (updateDto.type !== undefined) {
                relationship.type = updateDto.type;
            }
            if (updateDto.inverseType !== undefined) {
                relationship.inverseType = updateDto.inverseType;
            }
            else if (updateDto.type !== undefined) {
                relationship.inverseType = (_a = getInverseRelationshipType(updateDto.type)) !== null && _a !== void 0 ? _a : _entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.RelationshipType.OTHER;
            }
            if (updateDto.notes !== undefined) {
                relationship.notes = updateDto.notes;
            }
            if (updateDto.isPrimary !== undefined) {
                relationship.isPrimary = updateDto.isPrimary;
            }
            if (updateDto.isActive !== undefined) {
                relationship.isActive = updateDto.isActive;
            }
            if (updateDto.startDate !== undefined) {
                relationship.startDate = updateDto.startDate;
            }
            if (updateDto.endDate !== undefined) {
                relationship.endDate = updateDto.endDate;
            }
            if (updateDto.metadata !== undefined) {
                relationship.metadata = updateDto.metadata;
            }
            relationship.updatedById = context.userId;
            const savedRelationship = await queryRunner.manager.save(relationship);
            const inverseRelationship = await this.relationshipRepository.findOne({
                where: {
                    contactId: relationship.relatedContactId,
                    relatedContactId: relationship.contactId,
                    organizationId: context.organizationId,
                },
            });
            if (inverseRelationship) {
                if (relationship.inverseType !== undefined) {
                    inverseRelationship.type = relationship.inverseType;
                }
                if (relationship.type !== undefined) {
                    inverseRelationship.inverseType = relationship.type;
                }
                if (updateDto.notes !== undefined) {
                    inverseRelationship.notes = updateDto.notes;
                }
                if (updateDto.isPrimary !== undefined) {
                    inverseRelationship.isPrimary = updateDto.isPrimary;
                }
                if (updateDto.isActive !== undefined) {
                    inverseRelationship.isActive = updateDto.isActive;
                }
                if (updateDto.startDate !== undefined) {
                    inverseRelationship.startDate = updateDto.startDate;
                }
                if (updateDto.endDate !== undefined) {
                    inverseRelationship.endDate = updateDto.endDate;
                }
                if (updateDto.metadata !== undefined) {
                    inverseRelationship.metadata = updateDto.metadata;
                }
                inverseRelationship.updatedById = context.userId;
                await queryRunner.manager.save(inverseRelationship);
            }
            await queryRunner.commitTransaction();
            return savedRelationship;
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async deleteRelationship(id, context) {
        const relationship = await this.relationshipRepository.findOne({
            where: { id, organizationId: context.organizationId },
        });
        if (!relationship) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('Relationship not found');
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const inverseRelationship = await this.relationshipRepository.findOne({
                where: {
                    contactId: relationship.relatedContactId,
                    relatedContactId: relationship.contactId,
                    organizationId: context.organizationId,
                },
            });
            await queryRunner.manager.softRemove(relationship);
            if (inverseRelationship) {
                await queryRunner.manager.softRemove(inverseRelationship);
            }
            await queryRunner.commitTransaction();
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async getContactsByRelationshipType(contactId, type, query) {
        const relationships = await this.relationshipRepository.find({
            where: {
                contactId,
                type,
                organizationId: query.organizationId,
                isActive: true,
            },
            relations: ['relatedContact'],
        });
        return relationships.map(rel => ({
            relationshipId: rel.id,
            relationshipType: rel.type,
            contact: {
                id: rel.relatedContact.id,
                firstName: rel.relatedContact.firstName,
                lastName: rel.relatedContact.lastName,
                email: rel.relatedContact.email,
                phone: rel.relatedContact.phone,
            },
            notes: rel.notes,
            isPrimary: rel.isPrimary,
            startDate: rel.startDate,
            endDate: rel.endDate,
        }));
    }
    async addRelationship(id, relationshipDto, context) {
        return this.createRelationship(id, relationshipDto, context);
    }
    async getMedicalHistory(id, query) {
        return this.medicalHistoryRepository.find({
            where: {
                contactId: id,
                organizationId: query.organizationId
            },
            order: { date: 'DESC' },
        });
    }
    async getDocuments(id, query) {
        return this.documentRepository.find({
            where: {
                contactId: id,
                organizationId: query.organizationId
            },
            order: { createdAt: 'DESC' },
        });
    }
    async addDocument(id, documentDto, context) {
        await this.findOne(id, context.organizationId);
        const document = this.documentRepository.create(Object.assign(Object.assign({}, documentDto), { contactId: id, organizationId: context.organizationId, createdById: context.userId }));
        return this.documentRepository.save(document);
    }
    async getStatistics(query) {
        const stats = await this.contactRepository
            .createQueryBuilder('contact')
            .where('contact.organizationId = :organizationId', { organizationId: query.organizationId })
            .select([
            'COUNT(*) as total',
            'COUNT(CASE WHEN contact.type = \'PATIENT\' THEN 1 END) as patients',
            'COUNT(CASE WHEN contact.status = \'ACTIVE\' THEN 1 END) as active',
            'COUNT(CASE WHEN contact.createdAt >= NOW() - INTERVAL \'30 days\' THEN 1 END) as newLast30Days',
        ])
            .getRawOne();
        return stats;
    }
    async importContacts(importDto, context) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const contacts = importDto.contacts.map((contactData) => (Object.assign(Object.assign({}, contactData), { organizationId: context.organizationId, createdById: context.userId })));
            const savedContacts = await queryRunner.manager.save(_entities_contact_entity__WEBPACK_IMPORTED_MODULE_4__.Contact, contacts);
            await queryRunner.commitTransaction();
            return {
                imported: savedContacts.length,
                contacts: savedContacts,
            };
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async exportContacts(exportDto, context) {
        const queryBuilder = this.contactRepository.createQueryBuilder('contact')
            .where('contact.organizationId = :organizationId', { organizationId: context.organizationId });
        if (exportDto.filters) {
        }
        const contacts = await queryBuilder.getMany();
        const exportData = contacts.map(contact => ({
            id: contact.id,
            firstName: contact.firstName,
            lastName: contact.lastName,
            email: contact.email,
            phone: contact.phone,
            type: contact.type,
        }));
        return {
            exported: exportData.length,
            data: exportData,
        };
    }
};
ContactsService = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_contact_entity__WEBPACK_IMPORTED_MODULE_4__.Contact)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_contact_relationship_entity__WEBPACK_IMPORTED_MODULE_5__.ContactRelationship)),
    __param(2, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_medical_history_medical_history_entity__WEBPACK_IMPORTED_MODULE_6__.MedicalHistory)),
    __param(3, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_appointments_entities_appointment_entity__WEBPACK_IMPORTED_MODULE_7__.Appointment)),
    __param(4, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_documents_entities_document_entity__WEBPACK_IMPORTED_MODULE_8__.Document)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.DataSource])
], ContactsService);



/***/ }),

/***/ "./src/modules/departments/controllers/departments.controller.ts":
/*!***********************************************************************!*\
  !*** ./src/modules/departments/controllers/departments.controller.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DepartmentsController: () => (/* binding */ DepartmentsController)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _services_departments_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/departments.service */ "./src/modules/departments/services/departments.service.ts");
/* harmony import */ var _services_department_members_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/department-members.service */ "./src/modules/departments/services/department-members.service.ts");
/* harmony import */ var _auth_guards_auth_guard__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../auth/guards/auth.guard */ "./src/modules/auth/guards/auth.guard.ts");
/* harmony import */ var _organizations_guards_organization_guard__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../organizations/guards/organization.guard */ "./src/modules/organizations/guards/organization.guard.ts");
/* harmony import */ var _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../auth/guards/roles.guard */ "./src/modules/auth/guards/roles.guard.ts");
/* harmony import */ var _common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/decorators/roles.decorator */ "./src/common/decorators/roles.decorator.ts");
/* harmony import */ var _common_decorators_current_user_decorator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/decorators/current-user.decorator */ "./src/common/decorators/current-user.decorator.ts");
/* harmony import */ var _dto_create_department_dto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../dto/create-department.dto */ "./src/modules/departments/dto/create-department.dto.ts");
/* harmony import */ var _dto_update_department_dto__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../dto/update-department.dto */ "./src/modules/departments/dto/update-department.dto.ts");
/* harmony import */ var _dto_add_member_dto__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../dto/add-member.dto */ "./src/modules/departments/dto/add-member.dto.ts");
/* harmony import */ var _dto_department_query_dto__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../dto/department-query.dto */ "./src/modules/departments/dto/department-query.dto.ts");
/* harmony import */ var _entities_department_entity__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../entities/department.entity */ "./src/modules/departments/entities/department.entity.ts");
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};

















let DepartmentsController = class DepartmentsController {
    constructor(departmentsService, departmentMembersService) {
        this.departmentsService = departmentsService;
        this.departmentMembersService = departmentMembersService;
    }
    async create(organizationId, createDepartmentDto, userId) {
        return this.departmentsService.create(organizationId, createDepartmentDto, userId);
    }
    async findAll(organizationId, query) {
        return this.departmentsService.findAll(organizationId, query);
    }
    async findOne(id) {
        return this.departmentsService.findById(id, ['manager', 'parentDepartment']);
    }
    async update(id, updateDepartmentDto, userId) {
        return this.departmentsService.update(id, updateDepartmentDto, userId);
    }
    async remove(id, userId) {
        await this.departmentsService.delete(id, userId);
    }
    async addMember(departmentId, addMemberDto, userId) {
        await this.departmentMembersService.addMember(departmentId, addMemberDto.userId, userId);
    }
    async removeMember(departmentId, memberId, userId) {
        await this.departmentMembersService.removeMember(departmentId, memberId, userId);
    }
    async getMembers(departmentId, query) {
        return this.departmentMembersService.getMembers(departmentId, query);
    }
};
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_7__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_14__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_14__.Role.MANAGER),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Create department' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: 201, type: _entities_department_entity__WEBPACK_IMPORTED_MODULE_13__.Department }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/department.entity */ "./src/modules/departments/entities/department.entity.ts").Department) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('organizationId')),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_common_decorators_current_user_decorator__WEBPACK_IMPORTED_MODULE_8__.CurrentUser)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_create_department_dto__WEBPACK_IMPORTED_MODULE_9__.CreateDepartmentDto, String]),
    __metadata("design:returntype", Promise)
], DepartmentsController.prototype, "create", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get all departments' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: 200, type: [_entities_department_entity__WEBPACK_IMPORTED_MODULE_13__.Department] }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('organizationId')),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_department_query_dto__WEBPACK_IMPORTED_MODULE_12__.DepartmentQueryDto]),
    __metadata("design:returntype", Promise)
], DepartmentsController.prototype, "findAll", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get department by id' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: 200, type: _entities_department_entity__WEBPACK_IMPORTED_MODULE_13__.Department }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/department.entity */ "./src/modules/departments/entities/department.entity.ts").Department) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], DepartmentsController.prototype, "findOne", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)(':id'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_7__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_14__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_14__.Role.MANAGER),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Update department' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: 200, type: _entities_department_entity__WEBPACK_IMPORTED_MODULE_13__.Department }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/department.entity */ "./src/modules/departments/entities/department.entity.ts").Department) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id')),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_common_decorators_current_user_decorator__WEBPACK_IMPORTED_MODULE_8__.CurrentUser)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_update_department_dto__WEBPACK_IMPORTED_MODULE_10__.UpdateDepartmentDto, String]),
    __metadata("design:returntype", Promise)
], DepartmentsController.prototype, "update", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Delete)(':id'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_7__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_14__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Delete department' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: 204 }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id')),
    __param(1, (0,_common_decorators_current_user_decorator__WEBPACK_IMPORTED_MODULE_8__.CurrentUser)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String]),
    __metadata("design:returntype", Promise)
], DepartmentsController.prototype, "remove", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(':id/members'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_7__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_14__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_14__.Role.MANAGER),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Add member to department' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: 200 }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id')),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_common_decorators_current_user_decorator__WEBPACK_IMPORTED_MODULE_8__.CurrentUser)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_add_member_dto__WEBPACK_IMPORTED_MODULE_11__.AddMemberDto, String]),
    __metadata("design:returntype", Promise)
], DepartmentsController.prototype, "addMember", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Delete)(':id/members/:userId'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_7__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_14__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_14__.Role.MANAGER),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Remove member from department' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: 204 }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id')),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('userId')),
    __param(2, (0,_common_decorators_current_user_decorator__WEBPACK_IMPORTED_MODULE_8__.CurrentUser)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, String]),
    __metadata("design:returntype", Promise)
], DepartmentsController.prototype, "removeMember", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id/members'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get department members' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: 200, type: [_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_15__.User] }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id')),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_department_query_dto__WEBPACK_IMPORTED_MODULE_12__.DepartmentQueryDto]),
    __metadata("design:returntype", Promise)
], DepartmentsController.prototype, "getMembers", null);
DepartmentsController = __decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiTags)('Departments'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Controller)('organizations/:organizationId/departments'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UseGuards)(_auth_guards_auth_guard__WEBPACK_IMPORTED_MODULE_4__.AuthGuard, _organizations_guards_organization_guard__WEBPACK_IMPORTED_MODULE_5__.OrganizationGuard, _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_6__.RolesGuard),
    __metadata("design:paramtypes", [_services_departments_service__WEBPACK_IMPORTED_MODULE_2__.DepartmentsService,
        _services_department_members_service__WEBPACK_IMPORTED_MODULE_3__.DepartmentMembersService])
], DepartmentsController);



/***/ }),

/***/ "./src/modules/departments/departments.module.ts":
/*!*******************************************************!*\
  !*** ./src/modules/departments/departments.module.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DepartmentsModule: () => (/* binding */ DepartmentsModule)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _services_departments_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./services/departments.service */ "./src/modules/departments/services/departments.service.ts");
/* harmony import */ var _services_department_members_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./services/department-members.service */ "./src/modules/departments/services/department-members.service.ts");
/* harmony import */ var _services_department_hierarchy_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./services/department-hierarchy.service */ "./src/modules/departments/services/department-hierarchy.service.ts");
/* harmony import */ var _services_department_audit_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./services/department-audit.service */ "./src/modules/departments/services/department-audit.service.ts");
/* harmony import */ var _controllers_departments_controller__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./controllers/departments.controller */ "./src/modules/departments/controllers/departments.controller.ts");
/* harmony import */ var _entities_department_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./entities/department.entity */ "./src/modules/departments/entities/department.entity.ts");
/* harmony import */ var _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./entities/department-audit-log.entity */ "./src/modules/departments/entities/department-audit-log.entity.ts");
/* harmony import */ var _listeners_department_assignment_listener__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./listeners/department-assignment.listener */ "./src/modules/departments/listeners/department-assignment.listener.ts");
/* harmony import */ var _listeners_department_audit_listener__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./listeners/department-audit.listener */ "./src/modules/departments/listeners/department-audit.listener.ts");
/* harmony import */ var _organizations_organizations_module__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../organizations/organizations.module */ "./src/modules/organizations/organizations.module.ts");
/* harmony import */ var _users_users_module__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../users/users.module */ "./src/modules/users/users.module.ts");
/* harmony import */ var _notifications_notifications_module__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../notifications/notifications.module */ "./src/modules/notifications/notifications.module.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};














let DepartmentsModule = class DepartmentsModule {
};
DepartmentsModule = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Module)({
        imports: [
            _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.TypeOrmModule.forFeature([
                _entities_department_entity__WEBPACK_IMPORTED_MODULE_7__.Department,
                _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_8__.DepartmentAuditLog
            ]),
            _organizations_organizations_module__WEBPACK_IMPORTED_MODULE_11__.OrganizationsModule,
            _users_users_module__WEBPACK_IMPORTED_MODULE_12__.UsersModule,
            _notifications_notifications_module__WEBPACK_IMPORTED_MODULE_13__.NotificationsModule
        ],
        controllers: [
            _controllers_departments_controller__WEBPACK_IMPORTED_MODULE_6__.DepartmentsController
        ],
        providers: [
            _services_departments_service__WEBPACK_IMPORTED_MODULE_2__.DepartmentsService,
            _services_department_members_service__WEBPACK_IMPORTED_MODULE_3__.DepartmentMembersService,
            _services_department_hierarchy_service__WEBPACK_IMPORTED_MODULE_4__.DepartmentHierarchyService,
            _services_department_audit_service__WEBPACK_IMPORTED_MODULE_5__.DepartmentAuditService,
            _listeners_department_assignment_listener__WEBPACK_IMPORTED_MODULE_9__.DepartmentAssignmentListener,
            _listeners_department_audit_listener__WEBPACK_IMPORTED_MODULE_10__.DepartmentAuditListener
        ],
        exports: [
            _services_departments_service__WEBPACK_IMPORTED_MODULE_2__.DepartmentsService,
            _services_department_members_service__WEBPACK_IMPORTED_MODULE_3__.DepartmentMembersService,
            _services_department_hierarchy_service__WEBPACK_IMPORTED_MODULE_4__.DepartmentHierarchyService,
            _services_department_audit_service__WEBPACK_IMPORTED_MODULE_5__.DepartmentAuditService
        ]
    })
], DepartmentsModule);



/***/ }),

/***/ "./src/modules/departments/dto/add-member.dto.ts":
/*!*******************************************************!*\
  !*** ./src/modules/departments/dto/add-member.dto.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AddMemberDto: () => (/* binding */ AddMemberDto),
/* harmony export */   DepartmentMemberRole: () => (/* binding */ DepartmentMemberRole)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var DepartmentMemberRole;
(function (DepartmentMemberRole) {
    DepartmentMemberRole["MANAGER"] = "MANAGER";
    DepartmentMemberRole["SUPERVISOR"] = "SUPERVISOR";
    DepartmentMemberRole["MEMBER"] = "MEMBER";
})(DepartmentMemberRole || (DepartmentMemberRole = {}));
class AddMemberDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { userId: { required: true, type: () => String }, role: { required: true, enum: (__webpack_require__(/*! ./add-member.dto */ "./src/modules/departments/dto/add-member.dto.ts").DepartmentMemberRole) }, title: { required: false, type: () => String }, responsibilities: { required: false, type: () => String }, startDate: { required: false, type: () => String }, metadata: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], AddMemberDto.prototype, "userId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ enum: DepartmentMemberRole }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(DepartmentMemberRole),
    __metadata("design:type", String)
], AddMemberDto.prototype, "role", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], AddMemberDto.prototype, "title", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], AddMemberDto.prototype, "responsibilities", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], AddMemberDto.prototype, "startDate", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Object)
], AddMemberDto.prototype, "metadata", void 0);


/***/ }),

/***/ "./src/modules/departments/dto/create-department.dto.ts":
/*!**************************************************************!*\
  !*** ./src/modules/departments/dto/create-department.dto.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateDepartmentDto: () => (/* binding */ CreateDepartmentDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



class CreateDepartmentDto {
    constructor() {
        this.isActive = true;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { name: { required: true, type: () => String }, description: { required: false, type: () => String }, parentDepartmentId: { required: false, type: () => String }, managerId: { required: false, type: () => String }, isActive: { required: false, type: () => Boolean, default: true }, contactEmail: { required: false, type: () => String }, contactPhone: { required: false, type: () => String }, workingHours: { required: false, type: () => String }, timezone: { required: false, type: () => String }, tags: { required: false, type: () => [String] }, metadata: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], CreateDepartmentDto.prototype, "name", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], CreateDepartmentDto.prototype, "description", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], CreateDepartmentDto.prototype, "parentDepartmentId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], CreateDepartmentDto.prototype, "managerId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ default: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateDepartmentDto.prototype, "isActive", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], CreateDepartmentDto.prototype, "contactEmail", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], CreateDepartmentDto.prototype, "contactPhone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], CreateDepartmentDto.prototype, "workingHours", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], CreateDepartmentDto.prototype, "timezone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], CreateDepartmentDto.prototype, "tags", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Object)
], CreateDepartmentDto.prototype, "metadata", void 0);


/***/ }),

/***/ "./src/modules/departments/dto/department-query.dto.ts":
/*!*************************************************************!*\
  !*** ./src/modules/departments/dto/department-query.dto.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DepartmentQueryDto: () => (/* binding */ DepartmentQueryDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




class DepartmentQueryDto {
    constructor() {
        this.skip = 0;
        this.take = 10;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { search: { required: false, type: () => String }, parentDepartmentId: { required: false, type: () => String }, managerId: { required: false, type: () => String }, isActive: { required: false, type: () => Boolean }, relations: { required: false, type: () => [String] }, skip: { required: false, type: () => Number, default: 0, minimum: 0 }, take: { required: false, type: () => Number, default: 10, minimum: 1, maximum: 100 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], DepartmentQueryDto.prototype, "search", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], DepartmentQueryDto.prototype, "parentDepartmentId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], DepartmentQueryDto.prototype, "managerId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Boolean),
    __metadata("design:type", Boolean)
], DepartmentQueryDto.prototype, "isActive", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], DepartmentQueryDto.prototype, "relations", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ default: 0 }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNumber)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Number),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    __metadata("design:type", Number)
], DepartmentQueryDto.prototype, "skip", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ default: 10 }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNumber)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Number),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(100),
    __metadata("design:type", Number)
], DepartmentQueryDto.prototype, "take", void 0);


/***/ }),

/***/ "./src/modules/departments/dto/update-department.dto.ts":
/*!**************************************************************!*\
  !*** ./src/modules/departments/dto/update-department.dto.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UpdateDepartmentDto: () => (/* binding */ UpdateDepartmentDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



class UpdateDepartmentDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { name: { required: false, type: () => String }, description: { required: false, type: () => String }, parentDepartmentId: { required: false, type: () => String }, managerId: { required: false, type: () => String }, isActive: { required: false, type: () => Boolean }, contactEmail: { required: false, type: () => String }, contactPhone: { required: false, type: () => String }, workingHours: { required: false, type: () => String }, timezone: { required: false, type: () => String }, tags: { required: false, type: () => [String] }, metadata: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdateDepartmentDto.prototype, "name", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdateDepartmentDto.prototype, "description", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], UpdateDepartmentDto.prototype, "parentDepartmentId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], UpdateDepartmentDto.prototype, "managerId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateDepartmentDto.prototype, "isActive", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdateDepartmentDto.prototype, "contactEmail", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdateDepartmentDto.prototype, "contactPhone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdateDepartmentDto.prototype, "workingHours", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdateDepartmentDto.prototype, "timezone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], UpdateDepartmentDto.prototype, "tags", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Object)
], UpdateDepartmentDto.prototype, "metadata", void 0);


/***/ }),

/***/ "./src/modules/departments/entities/department-audit-log.entity.ts":
/*!*************************************************************************!*\
  !*** ./src/modules/departments/entities/department-audit-log.entity.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DepartmentAuditAction: () => (/* binding */ DepartmentAuditAction),
/* harmony export */   DepartmentAuditLog: () => (/* binding */ DepartmentAuditLog)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _department_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./department.entity */ "./src/modules/departments/entities/department.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var DepartmentAuditAction;
(function (DepartmentAuditAction) {
    DepartmentAuditAction["CREATED"] = "CREATED";
    DepartmentAuditAction["UPDATED"] = "UPDATED";
    DepartmentAuditAction["DELETED"] = "DELETED";
    DepartmentAuditAction["MEMBER_ADDED"] = "MEMBER_ADDED";
    DepartmentAuditAction["MEMBER_REMOVED"] = "MEMBER_REMOVED";
    DepartmentAuditAction["MEMBER_TRANSFERRED"] = "MEMBER_TRANSFERRED";
    DepartmentAuditAction["MANAGER_CHANGED"] = "MANAGER_CHANGED";
    DepartmentAuditAction["MOVED"] = "MOVED";
    DepartmentAuditAction["REORDERED"] = "REORDERED";
})(DepartmentAuditAction || (DepartmentAuditAction = {}));
let DepartmentAuditLog = class DepartmentAuditLog {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, departmentId: { required: true, type: () => String }, department: { required: true, type: () => (__webpack_require__(/*! ./department.entity */ "./src/modules/departments/entities/department.entity.ts").Department) }, organizationId: { required: true, type: () => String }, action: { required: true, enum: (__webpack_require__(/*! ./department-audit-log.entity */ "./src/modules/departments/entities/department-audit-log.entity.ts").DepartmentAuditAction) }, changes: { required: true, type: () => Object }, metadata: { required: true, type: () => Object }, performedById: { required: true, type: () => String }, performedBy: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, ipAddress: { required: true, type: () => String }, userAgent: { required: true, type: () => String }, createdAt: { required: true, type: () => Date }, affectedUserId: { required: true, type: () => String }, affectedUser: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], DepartmentAuditLog.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], DepartmentAuditLog.prototype, "departmentId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _department_entity__WEBPACK_IMPORTED_MODULE_2__.Department),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'departmentId' }),
    __metadata("design:type", _department_entity__WEBPACK_IMPORTED_MODULE_2__.Department)
], DepartmentAuditLog.prototype, "department", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], DepartmentAuditLog.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: DepartmentAuditAction
    }),
    __metadata("design:type", String)
], DepartmentAuditLog.prototype, "action", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DepartmentAuditLog.prototype, "changes", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DepartmentAuditLog.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], DepartmentAuditLog.prototype, "performedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'performedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User)
], DepartmentAuditLog.prototype, "performedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('inet', { nullable: true }),
    __metadata("design:type", String)
], DepartmentAuditLog.prototype, "ipAddress", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], DepartmentAuditLog.prototype, "userAgent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], DepartmentAuditLog.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], DepartmentAuditLog.prototype, "affectedUserId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'affectedUserId' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User)
], DepartmentAuditLog.prototype, "affectedUser", void 0);
DepartmentAuditLog = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('department_audit_logs')
], DepartmentAuditLog);



/***/ }),

/***/ "./src/modules/departments/entities/department.entity.ts":
/*!***************************************************************!*\
  !*** ./src/modules/departments/entities/department.entity.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Department: () => (/* binding */ Department)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _tickets_entities_ticket_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../tickets/entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





let Department = class Department {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, name: { required: true, type: () => String }, displayOrder: { required: true, type: () => Number }, description: { required: true, type: () => String }, isActive: { required: true, type: () => Boolean }, organizationId: { required: true, type: () => String }, sortOrder: { required: true, type: () => Number }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, managerId: { required: true, type: () => String }, manager: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, parentDepartmentId: { required: true, type: () => String }, parentDepartment: { required: true, type: () => (__webpack_require__(/*! ./department.entity */ "./src/modules/departments/entities/department.entity.ts").Department) }, childDepartments: { required: true, type: () => [(__webpack_require__(/*! ./department.entity */ "./src/modules/departments/entities/department.entity.ts").Department)] }, members: { required: true, type: () => [(__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User)] }, tickets: { required: true, type: () => [(__webpack_require__(/*! ../../tickets/entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket)] }, metadata: { required: true, type: () => Object }, tags: { required: true, type: () => [String] }, memberCount: { required: true, type: () => Number }, contactEmail: { required: true, type: () => String }, contactPhone: { required: true, type: () => String }, workingHours: { required: true, type: () => String }, timezone: { required: true, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, createdById: { required: true, type: () => String }, createdBy: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, updatedById: { required: true, type: () => String }, updatedBy: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Department.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Department.prototype, "name", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: 0, name: 'display_order' }),
    __metadata("design:type", Number)
], Department.prototype, "displayOrder", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Department.prototype, "description", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Department.prototype, "isActive", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], Department.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Department.prototype, "sortOrder", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization, organization => organization.departments),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization)
], Department.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], Department.prototype, "managerId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'managerId' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User)
], Department.prototype, "manager", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], Department.prototype, "parentDepartmentId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => Department, { nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'parentDepartmentId' }),
    __metadata("design:type", Department)
], Department.prototype, "parentDepartment", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => Department, department => department.parentDepartment),
    __metadata("design:type", Array)
], Department.prototype, "childDepartments", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToMany)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User, user => user.department),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinTable)({
        name: 'department_members',
        joinColumn: {
            name: 'departmentId',
            referencedColumnName: 'id'
        },
        inverseJoinColumn: {
            name: 'userId',
            referencedColumnName: 'id'
        }
    }),
    __metadata("design:type", Array)
], Department.prototype, "members", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _tickets_entities_ticket_entity__WEBPACK_IMPORTED_MODULE_4__.Ticket, ticket => ticket.department),
    __metadata("design:type", Array)
], Department.prototype, "tickets", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Department.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('simple-array', { nullable: true }),
    __metadata("design:type", Array)
], Department.prototype, "tags", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Department.prototype, "memberCount", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Department.prototype, "contactEmail", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Department.prototype, "contactPhone", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Department.prototype, "workingHours", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Department.prototype, "timezone", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], Department.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], Department.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], Department.prototype, "createdById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'createdById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User)
], Department.prototype, "createdBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], Department.prototype, "updatedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'updatedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User)
], Department.prototype, "updatedBy", void 0);
Department = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('departments')
], Department);



/***/ }),

/***/ "./src/modules/departments/listeners/department-assignment.listener.ts":
/*!*****************************************************************************!*\
  !*** ./src/modules/departments/listeners/department-assignment.listener.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DepartmentAssignmentListener: () => (/* binding */ DepartmentAssignmentListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _services_department_audit_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/department-audit.service */ "./src/modules/departments/services/department-audit.service.ts");
/* harmony import */ var _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/department-audit-log.entity */ "./src/modules/departments/entities/department-audit-log.entity.ts");
/* harmony import */ var _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../notifications/services/notifications.service */ "./src/modules/notifications/services/notifications.service.ts");
/* harmony import */ var _users_services_users_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../users/services/users.service */ "./src/modules/users/services/users.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






let DepartmentAssignmentListener = class DepartmentAssignmentListener {
    constructor(auditService, notificationsService, usersService) {
        this.auditService = auditService;
        this.notificationsService = notificationsService;
        this.usersService = usersService;
    }
    async handleMemberAdded(event) {
        await this.auditService.log({
            departmentId: event.departmentId,
            organizationId: event.organizationId,
            action: _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditAction.MEMBER_ADDED,
            performedById: event.performedById,
            affectedUserId: event.userId,
            metadata: {
                action: event.action,
            },
        });
        const user = await this.usersService.findById(event.userId);
        if (user) {
            const notification = {
                userId: user.id,
                type: 'DEPARTMENT_ASSIGNMENT',
                title: 'Department Assignment',
                message: 'You have been assigned to a new department',
                data: {
                    departmentId: event.departmentId,
                    organizationId: event.organizationId,
                },
                organizationId: event.organizationId,
                priority: 'MEDIUM',
            };
            await this.notificationsService.send(notification);
        }
    }
    async handleMemberRemoved(event) {
        await this.auditService.log({
            departmentId: event.departmentId,
            organizationId: event.organizationId,
            action: _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditAction.MEMBER_REMOVED,
            performedById: event.performedById,
            affectedUserId: event.userId,
            metadata: {
                action: event.action,
            },
        });
        const user = await this.usersService.findById(event.userId);
        if (user) {
            const notification = {
                userId: user.id,
                type: 'DEPARTMENT_UNASSIGNMENT',
                title: 'Department Unassignment',
                message: 'You have been removed from a department',
                data: {
                    departmentId: event.departmentId,
                    organizationId: event.organizationId,
                },
                organizationId: event.organizationId,
                priority: 'MEDIUM',
            };
            await this.notificationsService.send(notification);
        }
    }
    async handleMemberTransferred(event) {
        await this.auditService.log({
            departmentId: event.departmentId,
            organizationId: event.organizationId,
            action: _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditAction.MEMBER_TRANSFERRED,
            performedById: event.performedById,
            affectedUserId: event.userId,
            metadata: {
                action: event.action,
                previousDepartmentId: event.previousDepartmentId,
            },
        });
        const user = await this.usersService.findById(event.userId);
        if (user) {
            const notification = {
                userId: user.id,
                type: 'DEPARTMENT_TRANSFER',
                title: 'Department Transfer',
                message: 'You have been transferred to a different department',
                data: {
                    departmentId: event.departmentId,
                    previousDepartmentId: event.previousDepartmentId,
                    organizationId: event.organizationId,
                },
                organizationId: event.organizationId,
                priority: 'MEDIUM',
            };
            await this.notificationsService.send(notification);
        }
    }
    async handleManagerChanged(event) {
        await this.auditService.log({
            departmentId: event.departmentId,
            organizationId: event.organizationId,
            action: _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditAction.MANAGER_CHANGED,
            performedById: event.performedById,
            affectedUserId: event.newManagerId,
            metadata: {
                previousManagerId: event.previousManagerId,
            },
        });
        const newManagerNotification = {
            userId: event.newManagerId,
            type: 'DEPARTMENT_MANAGER_ASSIGNMENT',
            title: 'Department Manager Assignment',
            message: 'You have been assigned as a department manager',
            data: {
                departmentId: event.departmentId,
                organizationId: event.organizationId,
            },
            organizationId: event.organizationId,
            priority: 'MEDIUM',
        };
        await this.notificationsService.send(newManagerNotification);
        if (event.previousManagerId) {
            const previousManagerNotification = {
                userId: event.previousManagerId,
                type: 'DEPARTMENT_MANAGER_UNASSIGNMENT',
                title: 'Department Manager Unassignment',
                message: 'You are no longer the manager of a department',
                data: {
                    departmentId: event.departmentId,
                    organizationId: event.organizationId,
                },
                organizationId: event.organizationId,
                priority: 'MEDIUM',
            };
            await this.notificationsService.send(previousManagerNotification);
        }
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('department.member.added'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], DepartmentAssignmentListener.prototype, "handleMemberAdded", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('department.member.removed'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], DepartmentAssignmentListener.prototype, "handleMemberRemoved", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('department.member.transferred'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], DepartmentAssignmentListener.prototype, "handleMemberTransferred", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('department.manager.changed'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], DepartmentAssignmentListener.prototype, "handleManagerChanged", null);
DepartmentAssignmentListener = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_services_department_audit_service__WEBPACK_IMPORTED_MODULE_2__.DepartmentAuditService,
        _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_4__.NotificationsService,
        _users_services_users_service__WEBPACK_IMPORTED_MODULE_5__.UsersService])
], DepartmentAssignmentListener);



/***/ }),

/***/ "./src/modules/departments/listeners/department-audit.listener.ts":
/*!************************************************************************!*\
  !*** ./src/modules/departments/listeners/department-audit.listener.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DepartmentAuditListener: () => (/* binding */ DepartmentAuditListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _services_department_audit_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/department-audit.service */ "./src/modules/departments/services/department-audit.service.ts");
/* harmony import */ var _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/department-audit-log.entity */ "./src/modules/departments/entities/department-audit-log.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




let DepartmentAuditListener = class DepartmentAuditListener {
    constructor(auditService) {
        this.auditService = auditService;
    }
    async handleDepartmentCreated(event) {
        await this.auditService.log({
            departmentId: event.departmentId,
            organizationId: event.organizationId,
            action: _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditAction.CREATED,
            performedById: event.createdById,
            request: event.request,
        });
    }
    async handleDepartmentUpdated(event) {
        await this.auditService.log({
            departmentId: event.departmentId,
            organizationId: event.organizationId,
            action: _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditAction.UPDATED,
            performedById: event.updatedById,
            changes: event.changes,
            request: event.request,
        });
    }
    async handleDepartmentDeleted(event) {
        await this.auditService.log({
            departmentId: event.departmentId,
            organizationId: event.organizationId,
            action: _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditAction.DELETED,
            performedById: event.deletedById,
            request: event.request,
        });
    }
    async handleDepartmentMoved(event) {
        await this.auditService.log({
            departmentId: event.departmentId,
            organizationId: event.organizationId,
            action: _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditAction.MOVED,
            performedById: event.performedById,
            metadata: {
                previousParentId: event.previousParentId,
                newParentId: event.newParentId,
            },
            request: event.request,
        });
    }
    async handleDepartmentReordered(event) {
        await this.auditService.log({
            departmentId: event.departmentId,
            organizationId: event.organizationId,
            action: _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditAction.REORDERED,
            performedById: event.performedById,
            metadata: {
                newOrder: event.newOrder,
            },
            request: event.request,
        });
    }
    async handleBulkUpdate(event) {
        for (const departmentId of event.departmentIds) {
            await this.auditService.log({
                departmentId,
                organizationId: event.organizationId,
                action: _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditAction.UPDATED,
                performedById: event.performedById,
                changes: event.changes,
                metadata: {
                    bulkUpdate: true,
                    totalDepartments: event.departmentIds.length,
                },
                request: event.request,
            });
        }
    }
    async handleHierarchyChanged(event) {
        await this.auditService.log({
            departmentId: event.departmentId,
            organizationId: event.organizationId,
            action: _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditAction.UPDATED,
            performedById: event.performedById,
            changes: event.changes,
            metadata: {
                hierarchyUpdate: true,
            },
            request: event.request,
        });
    }
    async handleSettingsUpdated(event) {
        await this.auditService.log({
            departmentId: event.departmentId,
            organizationId: event.organizationId,
            action: _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditAction.UPDATED,
            performedById: event.performedById,
            changes: event.changes,
            metadata: {
                settingsUpdate: true,
            },
            request: event.request,
        });
    }
    async handleAccessModified(event) {
        await this.auditService.log({
            departmentId: event.departmentId,
            organizationId: event.organizationId,
            action: _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditAction.UPDATED,
            performedById: event.performedById,
            metadata: Object.assign({ accessUpdate: true }, event.changes),
            request: event.request,
        });
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('department.created'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], DepartmentAuditListener.prototype, "handleDepartmentCreated", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('department.updated'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], DepartmentAuditListener.prototype, "handleDepartmentUpdated", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('department.deleted'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], DepartmentAuditListener.prototype, "handleDepartmentDeleted", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('department.moved'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], DepartmentAuditListener.prototype, "handleDepartmentMoved", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('department.reordered'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], DepartmentAuditListener.prototype, "handleDepartmentReordered", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('department.bulk_update'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], DepartmentAuditListener.prototype, "handleBulkUpdate", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('department.hierarchy.changed'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], DepartmentAuditListener.prototype, "handleHierarchyChanged", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('department.settings.updated'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], DepartmentAuditListener.prototype, "handleSettingsUpdated", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('department.access.modified'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], DepartmentAuditListener.prototype, "handleAccessModified", null);
DepartmentAuditListener = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_services_department_audit_service__WEBPACK_IMPORTED_MODULE_2__.DepartmentAuditService])
], DepartmentAuditListener);



/***/ }),

/***/ "./src/modules/departments/services/department-audit.service.ts":
/*!**********************************************************************!*\
  !*** ./src/modules/departments/services/department-audit.service.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DepartmentAuditService: () => (/* binding */ DepartmentAuditService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/department-audit-log.entity */ "./src/modules/departments/entities/department-audit-log.entity.ts");
/* harmony import */ var _entities_department_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/department.entity */ "./src/modules/departments/entities/department.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};





let DepartmentAuditService = class DepartmentAuditService {
    constructor(auditLogRepository, departmentRepository) {
        this.auditLogRepository = auditLogRepository;
        this.departmentRepository = departmentRepository;
    }
    async log(options) {
        var _a, _b;
        const auditLog = this.auditLogRepository.create({
            departmentId: options.departmentId,
            organizationId: options.organizationId,
            action: options.action,
            performedById: options.performedById,
            changes: options.changes,
            metadata: options.metadata,
            affectedUserId: options.affectedUserId,
            ipAddress: (_a = options.request) === null || _a === void 0 ? void 0 : _a.ip,
            userAgent: (_b = options.request) === null || _b === void 0 ? void 0 : _b.headers['user-agent'],
        });
        return this.auditLogRepository.save(auditLog);
    }
    async getDepartmentAuditTrail(departmentId, options = {}) {
        var _a;
        const queryBuilder = this.auditLogRepository
            .createQueryBuilder('audit')
            .leftJoinAndSelect('audit.performedBy', 'performer')
            .leftJoinAndSelect('audit.affectedUser', 'affected')
            .where('audit.departmentId = :departmentId', { departmentId });
        if (options.startDate) {
            queryBuilder.andWhere('audit.createdAt >= :startDate', {
                startDate: options.startDate
            });
        }
        if (options.endDate) {
            queryBuilder.andWhere('audit.createdAt <= :endDate', {
                endDate: options.endDate
            });
        }
        if ((_a = options.actions) === null || _a === void 0 ? void 0 : _a.length) {
            queryBuilder.andWhere('audit.action IN (:...actions)', {
                actions: options.actions
            });
        }
        return queryBuilder
            .orderBy('audit.createdAt', 'DESC')
            .take(options.limit || 50)
            .skip(options.offset || 0)
            .getManyAndCount();
    }
    async getUserDepartmentActivity(userId, options = {}) {
        var _a;
        const queryBuilder = this.auditLogRepository
            .createQueryBuilder('audit')
            .where('(audit.performedById = :userId OR audit.affectedUserId = :userId)', { userId });
        if ((_a = options.departmentIds) === null || _a === void 0 ? void 0 : _a.length) {
            queryBuilder.andWhere('audit.departmentId IN (:...departmentIds)', {
                departmentIds: options.departmentIds
            });
        }
        if (options.startDate) {
            queryBuilder.andWhere('audit.createdAt >= :startDate', {
                startDate: options.startDate
            });
        }
        if (options.endDate) {
            queryBuilder.andWhere('audit.createdAt <= :endDate', {
                endDate: options.endDate
            });
        }
        return queryBuilder
            .orderBy('audit.createdAt', 'DESC')
            .take(options.limit || 50)
            .skip(options.offset || 0)
            .getManyAndCount();
    }
    compareChanges(oldData, newData) {
        const changes = {};
        for (const key of Object.keys(newData)) {
            if (oldData[key] !== undefined &&
                JSON.stringify(oldData[key]) !== JSON.stringify(newData[key])) {
                changes[key] = {
                    old: oldData[key],
                    new: newData[key]
                };
            }
        }
        return changes;
    }
    async cleanupOldLogs(retentionDays = 365) {
        const cutoffDate = new Date();
        cutoffDate.setDate(cutoffDate.getDate() - retentionDays);
        const result = await this.auditLogRepository
            .createQueryBuilder()
            .delete()
            .where('createdAt < :cutoffDate', { cutoffDate })
            .execute();
        return result.affected || 0;
    }
};
DepartmentAuditService = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_department_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.DepartmentAuditLog)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_department_entity__WEBPACK_IMPORTED_MODULE_4__.Department)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository])
], DepartmentAuditService);



/***/ }),

/***/ "./src/modules/departments/services/department-hierarchy.service.ts":
/*!**************************************************************************!*\
  !*** ./src/modules/departments/services/department-hierarchy.service.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DepartmentHierarchyService: () => (/* binding */ DepartmentHierarchyService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_department_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/department.entity */ "./src/modules/departments/entities/department.entity.ts");
/* harmony import */ var _departments_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./departments.service */ "./src/modules/departments/services/departments.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};






let DepartmentHierarchyService = class DepartmentHierarchyService {
    constructor(departmentRepository, departmentsService, eventEmitter) {
        this.departmentRepository = departmentRepository;
        this.departmentsService = departmentsService;
        this.eventEmitter = eventEmitter;
    }
    async getDepartmentTree(organizationId, rootDepartmentId) {
        const departments = await this.departmentRepository.find({
            where: { organizationId },
            order: { name: 'ASC' },
        });
        return this.buildDepartmentTree(departments, rootDepartmentId);
    }
    buildDepartmentTree(departments, rootDepartmentId, level = 0) {
        const rootDepartments = departments.filter(dept => rootDepartmentId
            ? dept.id === rootDepartmentId
            : !dept.parentDepartmentId);
        return rootDepartments.map(dept => ({
            id: dept.id,
            name: dept.name,
            managerId: dept.managerId,
            memberCount: dept.memberCount,
            level,
            metadata: dept.metadata,
            children: this.buildDepartmentTree(departments.filter(d => d.parentDepartmentId === dept.id), undefined, level + 1),
        }));
    }
    async moveDepartment(departmentId, newParentId, userId) {
        const department = await this.departmentsService.findById(departmentId);
        if (newParentId) {
            const newParent = await this.departmentsService.findById(newParentId);
            if (newParent.organizationId !== department.organizationId) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Cannot move department to different organization');
            }
            await this.validateHierarchyMove(departmentId, newParentId);
        }
        await this.departmentRepository.update(departmentId, {
            parentDepartmentId: newParentId || undefined,
            updatedById: userId,
        });
        this.eventEmitter.emit('department.moved', {
            departmentId,
            previousParentId: department.parentDepartmentId,
            newParentId,
            performedById: userId,
            organizationId: department.organizationId,
        });
    }
    async validateHierarchyMove(departmentId, newParentId) {
        if (departmentId === newParentId) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Department cannot be its own parent');
        }
        const childDepartments = await this.getAllChildDepartments(departmentId);
        if (childDepartments.some(dept => dept.id === newParentId)) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Cannot move department under its own child');
        }
    }
    async getAllChildDepartments(departmentId) {
        const children = await this.departmentRepository.find({
            where: { parentDepartmentId: departmentId },
        });
        const allChildren = [...children];
        for (const child of children) {
            const grandChildren = await this.getAllChildDepartments(child.id);
            allChildren.push(...grandChildren);
        }
        return allChildren;
    }
    async getDepartmentAncestors(departmentId) {
        const ancestors = [];
        let currentDepartment = await this.departmentsService.findById(departmentId, ['parentDepartment']);
        while (currentDepartment.parentDepartment) {
            ancestors.push(currentDepartment.parentDepartment);
            currentDepartment = await this.departmentsService.findById(currentDepartment.parentDepartment.id, ['parentDepartment']);
        }
        return ancestors.reverse();
    }
    async getDepartmentDescendants(departmentId) {
        return this.getAllChildDepartments(departmentId);
    }
    async getDepartmentSiblings(departmentId) {
        const department = await this.departmentsService.findById(departmentId);
        return this.departmentRepository.find({
            where: {
                parentDepartmentId: department.parentDepartmentId || (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.IsNull)(),
                id: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.Not)(departmentId),
                organizationId: department.organizationId,
            },
        });
    }
    async getDepartmentDepth(departmentId) {
        const ancestors = await this.getDepartmentAncestors(departmentId);
        return ancestors.length;
    }
    async reorderDepartments(parentDepartmentId, orderedDepartmentIds, userId) {
        const departments = await this.departmentRepository.find({
            where: {
                id: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.In)(orderedDepartmentIds),
                parentDepartmentId: parentDepartmentId || (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.IsNull)(),
            },
        });
        if (departments.length !== orderedDepartmentIds.length) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Invalid department IDs provided');
        }
        for (let i = 0; i < orderedDepartmentIds.length; i++) {
            await this.departmentRepository.update(orderedDepartmentIds[i], {
                sortOrder: i,
                updatedById: userId,
            });
        }
        this.eventEmitter.emit('department.reordered', {
            parentDepartmentId,
            orderedDepartmentIds,
            performedById: userId,
            organizationId: departments[0].organizationId,
        });
    }
};
DepartmentHierarchyService = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_department_entity__WEBPACK_IMPORTED_MODULE_4__.Department)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _departments_service__WEBPACK_IMPORTED_MODULE_5__.DepartmentsService,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__.EventEmitter2])
], DepartmentHierarchyService);



/***/ }),

/***/ "./src/modules/departments/services/department-members.service.ts":
/*!************************************************************************!*\
  !*** ./src/modules/departments/services/department-members.service.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DepartmentMembersService: () => (/* binding */ DepartmentMembersService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_department_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/department.entity */ "./src/modules/departments/entities/department.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _users_services_users_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../users/services/users.service */ "./src/modules/users/services/users.service.ts");
/* harmony import */ var _departments_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./departments.service */ "./src/modules/departments/services/departments.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};








let DepartmentMembersService = class DepartmentMembersService {
    constructor(departmentRepository, userRepository, usersService, departmentsService, eventEmitter) {
        this.departmentRepository = departmentRepository;
        this.userRepository = userRepository;
        this.usersService = usersService;
        this.departmentsService = departmentsService;
        this.eventEmitter = eventEmitter;
    }
    async addMember(departmentId, userId, performedById) {
        const department = await this.departmentsService.findById(departmentId);
        const user = await this.usersService.findById(userId);
        const isMember = await this.departmentRepository
            .createQueryBuilder('department')
            .innerJoin('department.members', 'member')
            .where('department.id = :departmentId', { departmentId })
            .andWhere('member.id = :userId', { userId })
            .getExists();
        if (isMember) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('User is already a member of this department');
        }
        await this.departmentRepository
            .createQueryBuilder()
            .relation(_entities_department_entity__WEBPACK_IMPORTED_MODULE_4__.Department, 'members')
            .of(department)
            .add(user);
        await this.departmentsService.updateMemberCount(departmentId);
        this.eventEmitter.emit('department.member.added', {
            departmentId,
            userId,
            performedById,
            organizationId: department.organizationId,
        });
    }
    async removeMember(departmentId, userId, performedById) {
        const department = await this.departmentsService.findById(departmentId);
        const isMember = await this.departmentRepository
            .createQueryBuilder('department')
            .innerJoin('department.members', 'member')
            .where('department.id = :departmentId', { departmentId })
            .andWhere('member.id = :userId', { userId })
            .getExists();
        if (!isMember) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('User is not a member of this department');
        }
        if (department.managerId === userId) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Cannot remove department manager from department');
        }
        await this.departmentRepository
            .createQueryBuilder()
            .relation(_entities_department_entity__WEBPACK_IMPORTED_MODULE_4__.Department, 'members')
            .of(department)
            .remove(userId);
        await this.departmentsService.updateMemberCount(departmentId);
        this.eventEmitter.emit('department.member.removed', {
            departmentId,
            userId,
            performedById,
            organizationId: department.organizationId,
        });
    }
    async getMembers(departmentId, query) {
        const queryBuilder = this.userRepository
            .createQueryBuilder('user')
            .innerJoin('user.departments', 'department')
            .where('department.id = :departmentId', { departmentId });
        if (query.search) {
            queryBuilder.andWhere('(user.firstName ILIKE :search OR user.lastName ILIKE :search OR user.email ILIKE :search)', { search: `%${query.search}%` });
        }
        return queryBuilder
            .orderBy('user.firstName', 'ASC')
            .addOrderBy('user.lastName', 'ASC')
            .skip(query.skip)
            .take(query.take)
            .getManyAndCount();
    }
    async transferMember(userId, fromDepartmentId, toDepartmentId, performedById) {
        await this.removeMember(fromDepartmentId, userId, performedById);
        await this.addMember(toDepartmentId, userId, performedById);
        const fromDepartment = await this.departmentsService.findById(fromDepartmentId);
        this.eventEmitter.emit('department.member.transferred', {
            userId,
            fromDepartmentId,
            toDepartmentId,
            performedById,
            organizationId: fromDepartment.organizationId,
        });
    }
    async getUserDepartments(userId) {
        return this.departmentRepository
            .createQueryBuilder('department')
            .innerJoin('department.members', 'member')
            .where('member.id = :userId', { userId })
            .getMany();
    }
    async isMember(departmentId, userId) {
        return this.departmentRepository
            .createQueryBuilder('department')
            .innerJoin('department.members', 'member')
            .where('department.id = :departmentId', { departmentId })
            .andWhere('member.id = :userId', { userId })
            .getExists();
    }
};
DepartmentMembersService = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_department_entity__WEBPACK_IMPORTED_MODULE_4__.Department)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_5__.User)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _users_services_users_service__WEBPACK_IMPORTED_MODULE_6__.UsersService,
        _departments_service__WEBPACK_IMPORTED_MODULE_7__.DepartmentsService,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__.EventEmitter2])
], DepartmentMembersService);



/***/ }),

/***/ "./src/modules/departments/services/departments.service.ts":
/*!*****************************************************************!*\
  !*** ./src/modules/departments/services/departments.service.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DepartmentsService: () => (/* binding */ DepartmentsService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_department_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/department.entity */ "./src/modules/departments/entities/department.entity.ts");
/* harmony import */ var _organizations_services_organizations_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../organizations/services/organizations.service */ "./src/modules/organizations/services/organizations.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};






let DepartmentsService = class DepartmentsService {
    constructor(departmentRepository, organizationsService, eventEmitter) {
        this.departmentRepository = departmentRepository;
        this.organizationsService = organizationsService;
        this.eventEmitter = eventEmitter;
    }
    async create(organizationId, createDepartmentDto, userId) {
        await this.organizationsService.findById(organizationId);
        if (createDepartmentDto.parentDepartmentId) {
            await this.findById(createDepartmentDto.parentDepartmentId);
        }
        const department = this.departmentRepository.create(Object.assign(Object.assign({}, createDepartmentDto), { organizationId, createdById: userId }));
        const savedDepartment = await this.departmentRepository.save(department);
        this.eventEmitter.emit('department.created', {
            departmentId: savedDepartment.id,
            organizationId,
            createdById: userId,
        });
        return savedDepartment;
    }
    async findAll(organizationId, query) {
        const where = { organizationId };
        if (query.isActive !== undefined) {
            where.isActive = query.isActive;
        }
        if (query.parentDepartmentId) {
            where.parentDepartmentId = query.parentDepartmentId;
        }
        if (query.managerId) {
            where.managerId = query.managerId;
        }
        return this.departmentRepository.findAndCount({
            where,
            order: { createdAt: 'DESC' },
            skip: query.skip,
            take: query.take,
            relations: query.relations || [],
        });
    }
    async findById(id, relations = []) {
        const department = await this.departmentRepository.findOne({
            where: { id },
            relations,
        });
        if (!department) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException(`Department with ID ${id} not found`);
        }
        return department;
    }
    async update(id, updateDepartmentDto, userId) {
        const department = await this.findById(id);
        if (updateDepartmentDto.parentDepartmentId) {
            await this.validateParentDepartment(id, updateDepartmentDto.parentDepartmentId);
        }
        const updatedDepartment = await this.departmentRepository.save(Object.assign(Object.assign(Object.assign({}, department), updateDepartmentDto), { updatedById: userId }));
        this.eventEmitter.emit('department.updated', {
            departmentId: id,
            organizationId: department.organizationId,
            updatedById: userId,
            changes: updateDepartmentDto,
        });
        return updatedDepartment;
    }
    async delete(id, userId) {
        const department = await this.findById(id);
        const hasChildren = await this.departmentRepository.count({
            where: { parentDepartmentId: id },
        });
        if (hasChildren) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Cannot delete department with child departments');
        }
        await this.departmentRepository.softDelete(id);
        this.eventEmitter.emit('department.deleted', {
            departmentId: id,
            organizationId: department.organizationId,
            deletedById: userId,
        });
    }
    async validateParentDepartment(departmentId, parentId) {
        if (departmentId === parentId) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Department cannot be its own parent');
        }
        const childDepartments = await this.findAllChildren(departmentId);
        if (childDepartments.some(dept => dept.id === parentId)) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Cannot set a child department as parent department');
        }
    }
    async findAllChildren(departmentId) {
        const children = await this.departmentRepository.find({
            where: { parentDepartmentId: departmentId },
        });
        const allChildren = [...children];
        for (const child of children) {
            const grandChildren = await this.findAllChildren(child.id);
            allChildren.push(...grandChildren);
        }
        return allChildren;
    }
    async updateMemberCount(id) {
        const count = await this.departmentRepository
            .createQueryBuilder('department')
            .leftJoin('department.members', 'member')
            .where('department.id = :id', { id })
            .getCount();
        await this.departmentRepository.update(id, { memberCount: count });
    }
};
DepartmentsService = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_department_entity__WEBPACK_IMPORTED_MODULE_4__.Department)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _organizations_services_organizations_service__WEBPACK_IMPORTED_MODULE_5__.OrganizationsService,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__.EventEmitter2])
], DepartmentsService);



/***/ }),

/***/ "./src/modules/documents/entities/document.entity.ts":
/*!***********************************************************!*\
  !*** ./src/modules/documents/entities/document.entity.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Document: () => (/* binding */ Document),
/* harmony export */   DocumentStatus: () => (/* binding */ DocumentStatus),
/* harmony export */   DocumentType: () => (/* binding */ DocumentType)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../contacts/entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var DocumentType;
(function (DocumentType) {
    DocumentType["MEDICAL_RECORD"] = "MEDICAL_RECORD";
    DocumentType["LAB_RESULT"] = "LAB_RESULT";
    DocumentType["PRESCRIPTION"] = "PRESCRIPTION";
    DocumentType["IMAGING"] = "IMAGING";
    DocumentType["INSURANCE"] = "INSURANCE";
    DocumentType["CONSENT_FORM"] = "CONSENT_FORM";
    DocumentType["IDENTIFICATION"] = "IDENTIFICATION";
    DocumentType["INVOICE"] = "INVOICE";
    DocumentType["RECEIPT"] = "RECEIPT";
    DocumentType["CORRESPONDENCE"] = "CORRESPONDENCE";
    DocumentType["REFERRAL"] = "REFERRAL";
    DocumentType["OTHER"] = "OTHER";
})(DocumentType || (DocumentType = {}));
var DocumentStatus;
(function (DocumentStatus) {
    DocumentStatus["DRAFT"] = "DRAFT";
    DocumentStatus["PENDING_REVIEW"] = "PENDING_REVIEW";
    DocumentStatus["APPROVED"] = "APPROVED";
    DocumentStatus["REJECTED"] = "REJECTED";
    DocumentStatus["EXPIRED"] = "EXPIRED";
    DocumentStatus["ARCHIVED"] = "ARCHIVED";
})(DocumentStatus || (DocumentStatus = {}));
let Document = class Document {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, contactId: { required: true, type: () => String }, contact: { required: true, type: () => (__webpack_require__(/*! ../../contacts/entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Contact) }, name: { required: true, type: () => String }, type: { required: true, enum: (__webpack_require__(/*! ./document.entity */ "./src/modules/documents/entities/document.entity.ts").DocumentType) }, fileName: { required: true, type: () => String }, fileType: { required: true, type: () => String }, fileSize: { required: true, type: () => Number }, filePath: { required: true, type: () => String }, fileUrl: { required: true, type: () => String }, description: { required: true, type: () => String }, status: { required: true, enum: (__webpack_require__(/*! ./document.entity */ "./src/modules/documents/entities/document.entity.ts").DocumentStatus) }, isPrivate: { required: true, type: () => Boolean }, documentDate: { required: true, type: () => Date }, expiryDate: { required: true, type: () => Date }, metadata: { required: true, type: () => ({ author: { required: false, type: () => String }, source: { required: false, type: () => String }, keywords: { required: false, type: () => [String] }, version: { required: false, type: () => String }, pageCount: { required: false, type: () => Number }, isOriginal: { required: false, type: () => Boolean }, relatedDocuments: { required: false, type: () => [String] }, customProperties: { required: false, type: () => Object } }) }, notes: { required: true, type: () => String }, tags: { required: true, type: () => [String] }, shareWith: { required: true, type: () => [String] }, appointmentId: { required: true, type: () => String }, medicalHistoryId: { required: true, type: () => String }, contentText: { required: true, type: () => String }, createdById: { required: true, type: () => String }, updatedById: { required: true, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, deletedAt: { required: true, type: () => Date } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Document.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], Document.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid', nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], Document.prototype, "contactId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_2__.Contact, contact => contact.documents, { onDelete: 'SET NULL' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'contactId' }),
    __metadata("design:type", _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_2__.Contact)
], Document.prototype, "contact", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 255 }),
    __metadata("design:type", String)
], Document.prototype, "name", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: DocumentType,
        default: DocumentType.OTHER,
    }),
    __metadata("design:type", String)
], Document.prototype, "type", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 255 }),
    __metadata("design:type", String)
], Document.prototype, "fileName", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 255 }),
    __metadata("design:type", String)
], Document.prototype, "fileType", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'bigint' }),
    __metadata("design:type", Number)
], Document.prototype, "fileSize", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 1024 }),
    __metadata("design:type", String)
], Document.prototype, "filePath", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 1024, nullable: true }),
    __metadata("design:type", String)
], Document.prototype, "fileUrl", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], Document.prototype, "description", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: DocumentStatus,
        default: DocumentStatus.APPROVED,
    }),
    __metadata("design:type", String)
], Document.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'boolean', default: false }),
    __metadata("design:type", Boolean)
], Document.prototype, "isPrivate", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'date', nullable: true }),
    __metadata("design:type", Date)
], Document.prototype, "documentDate", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'date', nullable: true }),
    __metadata("design:type", Date)
], Document.prototype, "expiryDate", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Document.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], Document.prototype, "notes", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Array)
], Document.prototype, "tags", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Array)
], Document.prototype, "shareWith", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid', nullable: true }),
    __metadata("design:type", String)
], Document.prototype, "appointmentId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid', nullable: true }),
    __metadata("design:type", String)
], Document.prototype, "medicalHistoryId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], Document.prototype, "contentText", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid', nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], Document.prototype, "createdById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid', nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], Document.prototype, "updatedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)({ type: 'timestamptz' }),
    __metadata("design:type", Date)
], Document.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)({ type: 'timestamptz' }),
    __metadata("design:type", Date)
], Document.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.DeleteDateColumn)({ type: 'timestamptz', nullable: true }),
    __metadata("design:type", Date)
], Document.prototype, "deletedAt", void 0);
Document = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('documents'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'contact'])
], Document);



/***/ }),

/***/ "./src/modules/domain/entities/dns-record.entity.ts":
/*!**********************************************************!*\
  !*** ./src/modules/domain/entities/dns-record.entity.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DnsRecord: () => (/* binding */ DnsRecord),
/* harmony export */   DnsRecordType: () => (/* binding */ DnsRecordType)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _domain_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./domain.entity */ "./src/modules/domain/entities/domain.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var DnsRecordType;
(function (DnsRecordType) {
    DnsRecordType["A"] = "A";
    DnsRecordType["AAAA"] = "AAAA";
    DnsRecordType["CNAME"] = "CNAME";
    DnsRecordType["MX"] = "MX";
    DnsRecordType["TXT"] = "TXT";
    DnsRecordType["NS"] = "NS";
    DnsRecordType["SRV"] = "SRV";
    DnsRecordType["CAA"] = "CAA";
    DnsRecordType["PTR"] = "PTR";
    DnsRecordType["SOA"] = "SOA";
})(DnsRecordType || (DnsRecordType = {}));
let DnsRecord = class DnsRecord {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, domainId: { required: true, type: () => String }, domain: { required: true, type: () => (__webpack_require__(/*! ./domain.entity */ "./src/modules/domain/entities/domain.entity.ts").Domain) }, type: { required: true, enum: (__webpack_require__(/*! ./dns-record.entity */ "./src/modules/domain/entities/dns-record.entity.ts").DnsRecordType) }, name: { required: true, type: () => String }, content: { required: true, type: () => String }, ttl: { required: true, type: () => Number }, priority: { required: false, type: () => Number }, isActive: { required: true, type: () => Boolean }, metadata: { required: false, type: () => ({ proxied: { required: false, type: () => Boolean }, cloudflare: { required: false, type: () => ({ proxied: { required: false, type: () => Boolean }, proxiedAt: { required: false, type: () => Date }, developmentMode: { required: false, type: () => Boolean } }) }, aws: { required: false, type: () => ({ regionId: { required: false, type: () => String }, healthCheckId: { required: false, type: () => String }, evaluateTargetHealth: { required: false, type: () => Boolean } }) }, google: { required: false, type: () => ({ routingPolicy: { required: false, type: () => String }, healthChecked: { required: false, type: () => Boolean } }) }, azure: { required: false, type: () => ({ trafficManagerProfile: { required: false, type: () => String }, weight: { required: false, type: () => Number } }) } }) }, validation: { required: false, type: () => ({ isValid: { required: true, type: () => Boolean }, lastChecked: { required: true, type: () => Date }, errors: { required: false, type: () => [String] }, warnings: { required: false, type: () => [String] } }) }, monitoring: { required: false, type: () => ({ enabled: { required: true, type: () => Boolean }, lastCheck: { required: false, type: () => Date }, status: { required: false, type: () => Object }, responseTime: { required: false, type: () => Number }, healthCheckId: { required: false, type: () => String }, alerts: { required: false, type: () => ({ email: { required: false, type: () => [String] }, webhook: { required: false, type: () => [String] } }) } }) }, geolocation: { required: false, type: () => ({ enabled: { required: true, type: () => Boolean }, regions: { required: false, type: () => [String] }, countries: { required: false, type: () => [String] }, continents: { required: false, type: () => [String] }, defaultResponse: { required: false, type: () => String } }) }, loadBalancing: { required: false, type: () => ({ enabled: { required: true, type: () => Boolean }, method: { required: false, type: () => Object }, pools: { required: false } }) }, failover: { required: false, type: () => ({ enabled: { required: true, type: () => Boolean }, primary: { required: false, type: () => String }, secondary: { required: false, type: () => String }, healthCheck: { required: false, type: () => ({ type: { required: true, type: () => String }, interval: { required: true, type: () => Number }, timeout: { required: true, type: () => Number }, retries: { required: true, type: () => Number } }) } }) }, tags: { required: false, type: () => [String] }, isSystem: { required: true, type: () => Boolean }, isLocked: { required: true, type: () => Boolean }, isProtected: { required: true, type: () => Boolean }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, createdBy: { required: false, type: () => String }, updatedBy: { required: false, type: () => String }, history: { required: false }, notes: { required: false, type: () => String }, isDeleted: { required: true, type: () => Boolean }, deletedBy: { required: false, type: () => String }, deletedAt: { required: false, type: () => Date }, propagation: { required: false, type: () => ({ status: { required: true, type: () => Object }, startedAt: { required: false, type: () => Date }, completedAt: { required: false, type: () => Date }, nameservers: { required: false } }) }, analytics: { required: false, type: () => ({ lastUpdated: { required: false, type: () => Date }, queries: { required: false, type: () => ({ total: { required: true, type: () => Number }, timeframe: { required: true, type: () => String }, distribution: { required: false, type: () => Object } }) }, performance: { required: false, type: () => ({ responseTime: { required: true, type: () => Number }, availability: { required: true, type: () => Number } }) } }) } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], DnsRecord.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], DnsRecord.prototype, "domainId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _domain_entity__WEBPACK_IMPORTED_MODULE_2__.Domain, domain => domain.dnsRecords, { onDelete: 'CASCADE' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'domainId' }),
    __metadata("design:type", _domain_entity__WEBPACK_IMPORTED_MODULE_2__.Domain)
], DnsRecord.prototype, "domain", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: DnsRecordType
    }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], DnsRecord.prototype, "type", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], DnsRecord.prototype, "name", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text'),
    __metadata("design:type", String)
], DnsRecord.prototype, "content", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('int', { default: 3600 }),
    __metadata("design:type", Number)
], DnsRecord.prototype, "ttl", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('int', { nullable: true }),
    __metadata("design:type", Number)
], DnsRecord.prototype, "priority", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: true }),
    __metadata("design:type", Boolean)
], DnsRecord.prototype, "isActive", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DnsRecord.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DnsRecord.prototype, "validation", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DnsRecord.prototype, "monitoring", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DnsRecord.prototype, "geolocation", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DnsRecord.prototype, "loadBalancing", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DnsRecord.prototype, "failover", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { array: true, nullable: true }),
    __metadata("design:type", Array)
], DnsRecord.prototype, "tags", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    __metadata("design:type", Boolean)
], DnsRecord.prototype, "isSystem", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    __metadata("design:type", Boolean)
], DnsRecord.prototype, "isLocked", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    __metadata("design:type", Boolean)
], DnsRecord.prototype, "isProtected", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], DnsRecord.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], DnsRecord.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], DnsRecord.prototype, "createdBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], DnsRecord.prototype, "updatedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], DnsRecord.prototype, "history", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { nullable: true }),
    __metadata("design:type", String)
], DnsRecord.prototype, "notes", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", Boolean)
], DnsRecord.prototype, "isDeleted", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], DnsRecord.prototype, "deletedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], DnsRecord.prototype, "deletedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DnsRecord.prototype, "propagation", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DnsRecord.prototype, "analytics", void 0);
DnsRecord = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('dns_records'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['domainId', 'type']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['domainId', 'name'])
], DnsRecord);



/***/ }),

/***/ "./src/modules/domain/entities/domain-verification-token.entity.ts":
/*!*************************************************************************!*\
  !*** ./src/modules/domain/entities/domain-verification-token.entity.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DomainVerificationToken: () => (/* binding */ DomainVerificationToken)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _domain_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./domain.entity */ "./src/modules/domain/entities/domain.entity.ts");
/* harmony import */ var _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/domain-verification-status.enum */ "./src/modules/domain/enums/domain-verification-status.enum.ts");
/* harmony import */ var _enums_domain_verification_method_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../enums/domain-verification-method.enum */ "./src/modules/domain/enums/domain-verification-method.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





let DomainVerificationToken = class DomainVerificationToken {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, domainId: { required: true, type: () => String }, domain: { required: true, type: () => (__webpack_require__(/*! ./domain.entity */ "./src/modules/domain/entities/domain.entity.ts").Domain) }, token: { required: true, type: () => String }, method: { required: true, enum: (__webpack_require__(/*! ../enums/domain-verification-method.enum */ "./src/modules/domain/enums/domain-verification-method.enum.ts").DomainVerificationMethod) }, status: { required: true, enum: (__webpack_require__(/*! ../enums/domain-verification-status.enum */ "./src/modules/domain/enums/domain-verification-status.enum.ts").DomainVerificationStatus) }, verificationRecord: { required: true, type: () => ({ type: { required: true, type: () => String }, name: { required: true, type: () => String }, value: { required: true, type: () => String }, ttl: { required: false, type: () => Number } }) }, expiresAt: { required: true, type: () => Date }, verifiedAt: { required: false, type: () => Date }, attempts: { required: true, type: () => Number }, lastAttemptAt: { required: false, type: () => Date }, verificationResults: { required: false }, metadata: { required: false, type: () => ({ generatedBy: { required: false, type: () => String }, source: { required: false, type: () => String }, clientIp: { required: false, type: () => String }, userAgent: { required: false, type: () => String } }) }, isRevoked: { required: true, type: () => Boolean }, revokedAt: { required: false, type: () => Date }, revokedBy: { required: false, type: () => String }, revokeReason: { required: false, type: () => String }, retryPolicy: { required: false, type: () => ({ maxAttempts: { required: true, type: () => Number }, backoffPeriod: { required: true, type: () => Number }, timeoutPeriod: { required: true, type: () => Number } }) }, isActive: { required: true, type: () => Boolean }, validationRules: { required: false, type: () => ({ requiredRecords: { required: false, type: () => [String] }, propagationTime: { required: false, type: () => Number }, requiredNameservers: { required: false, type: () => [String] } }) }, alternativeTokens: { required: false, type: () => [String] }, customValidation: { required: false, type: () => ({ type: { required: true, type: () => String }, config: { required: true, type: () => Object }, results: { required: false, type: () => Object } }) }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, createdBy: { required: false, type: () => String }, updatedBy: { required: false, type: () => String }, history: { required: false }, notes: { required: false, type: () => String } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], DomainVerificationToken.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], DomainVerificationToken.prototype, "domainId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _domain_entity__WEBPACK_IMPORTED_MODULE_2__.Domain, domain => domain.verificationTokens, { onDelete: 'CASCADE' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'domainId' }),
    __metadata("design:type", _domain_entity__WEBPACK_IMPORTED_MODULE_2__.Domain)
], DomainVerificationToken.prototype, "domain", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], DomainVerificationToken.prototype, "token", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _enums_domain_verification_method_enum__WEBPACK_IMPORTED_MODULE_4__.DomainVerificationMethod
    }),
    __metadata("design:type", String)
], DomainVerificationToken.prototype, "method", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_3__.DomainVerificationStatus,
        default: _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_3__.DomainVerificationStatus.PENDING
    }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], DomainVerificationToken.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DomainVerificationToken.prototype, "verificationRecord", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", Date)
], DomainVerificationToken.prototype, "expiresAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], DomainVerificationToken.prototype, "verifiedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('int', { default: 0 }),
    __metadata("design:type", Number)
], DomainVerificationToken.prototype, "attempts", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], DomainVerificationToken.prototype, "lastAttemptAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], DomainVerificationToken.prototype, "verificationResults", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DomainVerificationToken.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    __metadata("design:type", Boolean)
], DomainVerificationToken.prototype, "isRevoked", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], DomainVerificationToken.prototype, "revokedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], DomainVerificationToken.prototype, "revokedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { nullable: true }),
    __metadata("design:type", String)
], DomainVerificationToken.prototype, "revokeReason", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DomainVerificationToken.prototype, "retryPolicy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: true }),
    __metadata("design:type", Boolean)
], DomainVerificationToken.prototype, "isActive", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DomainVerificationToken.prototype, "validationRules", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { array: true, nullable: true }),
    __metadata("design:type", Array)
], DomainVerificationToken.prototype, "alternativeTokens", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], DomainVerificationToken.prototype, "customValidation", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], DomainVerificationToken.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], DomainVerificationToken.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], DomainVerificationToken.prototype, "createdBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], DomainVerificationToken.prototype, "updatedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], DomainVerificationToken.prototype, "history", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { nullable: true }),
    __metadata("design:type", String)
], DomainVerificationToken.prototype, "notes", void 0);
DomainVerificationToken = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('domain_verification_tokens'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['domainId', 'token']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['domainId', 'status'])
], DomainVerificationToken);



/***/ }),

/***/ "./src/modules/domain/entities/domain.entity.ts":
/*!******************************************************!*\
  !*** ./src/modules/domain/entities/domain.entity.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Domain: () => (/* binding */ Domain)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _domain_verification_token_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./domain-verification-token.entity */ "./src/modules/domain/entities/domain-verification-token.entity.ts");
/* harmony import */ var _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../enums/domain-verification-status.enum */ "./src/modules/domain/enums/domain-verification-status.enum.ts");
/* harmony import */ var _enums_domain_status_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../enums/domain-status.enum */ "./src/modules/domain/enums/domain-status.enum.ts");
/* harmony import */ var _dns_record_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./dns-record.entity */ "./src/modules/domain/entities/dns-record.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







let Domain = class Domain {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, name: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, status: { required: true, enum: (__webpack_require__(/*! ../enums/domain-status.enum */ "./src/modules/domain/enums/domain-status.enum.ts").DomainStatus) }, verificationStatus: { required: true, enum: (__webpack_require__(/*! ../enums/domain-verification-status.enum */ "./src/modules/domain/enums/domain-verification-status.enum.ts").DomainVerificationStatus) }, verificationTokens: { required: true, type: () => [(__webpack_require__(/*! ./domain-verification-token.entity */ "./src/modules/domain/entities/domain-verification-token.entity.ts").DomainVerificationToken)] }, dnsRecords: { required: true, type: () => [(__webpack_require__(/*! ./dns-record.entity */ "./src/modules/domain/entities/dns-record.entity.ts").DnsRecord)] }, verifiedAt: { required: false, type: () => Date }, verificationDetails: { required: false, type: () => ({ method: { required: true, type: () => String }, value: { required: true, type: () => String }, checkedAt: { required: true, type: () => Date }, attempts: { required: true, type: () => Number }, lastAttemptAt: { required: false, type: () => Date }, error: { required: false, type: () => String } }) }, isDefault: { required: true, type: () => Boolean }, isPrimary: { required: true, type: () => Boolean }, dnsConfiguration: { required: false, type: () => ({ mx: { required: false, type: () => ({ records: { required: true, type: () => [String] }, verified: { required: true, type: () => Boolean }, lastChecked: { required: false, type: () => Date } }) }, spf: { required: false, type: () => ({ record: { required: true, type: () => String }, verified: { required: true, type: () => Boolean }, lastChecked: { required: false, type: () => Date } }) }, dkim: { required: false, type: () => ({ selector: { required: true, type: () => String }, publicKey: { required: true, type: () => String }, verified: { required: true, type: () => Boolean }, lastChecked: { required: false, type: () => Date } }) }, dmarc: { required: false, type: () => ({ record: { required: true, type: () => String }, verified: { required: true, type: () => Boolean }, lastChecked: { required: false, type: () => Date } }) } }) }, settings: { required: false, type: () => ({ customNameservers: { required: false, type: () => [String] }, autoRenew: { required: false, type: () => Boolean }, lockEnabled: { required: false, type: () => Boolean }, privacyEnabled: { required: false, type: () => Boolean }, emailForwarding: { required: false, type: () => ({ enabled: { required: true, type: () => Boolean }, rules: { required: false } }) } }) }, expiresAt: { required: false, type: () => Date }, renewalDate: { required: false, type: () => Date }, isExpired: { required: true, type: () => Boolean }, isLocked: { required: true, type: () => Boolean }, registrarInfo: { required: false, type: () => ({ registrar: { required: true, type: () => String }, registrarId: { required: false, type: () => String }, whoisServer: { required: false, type: () => String }, referralUrl: { required: false, type: () => String }, createdDate: { required: false, type: () => Date }, updatedDate: { required: false, type: () => Date }, registrantContact: { required: false, type: () => ({ name: { required: false, type: () => String }, organization: { required: false, type: () => String }, email: { required: false, type: () => String }, phone: { required: false, type: () => String } }) } }) }, sslCertificate: { required: false, type: () => ({ provider: { required: false, type: () => String }, issuer: { required: false, type: () => String }, validFrom: { required: false, type: () => Date }, validTo: { required: false, type: () => Date }, type: { required: false, type: () => String }, status: { required: false, type: () => String }, autoRenew: { required: false, type: () => Boolean }, lastRenewal: { required: false, type: () => Date } }) }, monitoring: { required: false, type: () => ({ enabled: { required: true, type: () => Boolean }, lastCheck: { required: false, type: () => Date }, status: { required: false, type: () => String }, uptime: { required: false, type: () => Number }, alerts: { required: false, type: () => ({ email: { required: false, type: () => [String] }, webhook: { required: false, type: () => [String] } }) } }) }, tags: { required: false, type: () => [String] }, usage: { required: false, type: () => ({ emailEnabled: { required: false, type: () => Boolean }, webEnabled: { required: false, type: () => Boolean }, services: { required: false, type: () => [String] } }) }, securitySettings: { required: false, type: () => ({ transferLock: { required: false, type: () => Boolean }, registrarLock: { required: false, type: () => Boolean }, dnssec: { required: false, type: () => ({ enabled: { required: true, type: () => Boolean }, keys: { required: false, type: () => [String] } }) }, twoFactorAuth: { required: false, type: () => Boolean } }) }, compliance: { required: false, type: () => ({ gdpr: { required: false, type: () => ({ compliant: { required: true, type: () => Boolean }, lastCheck: { required: false, type: () => Date }, issues: { required: false, type: () => [String] } }) }, privacyShield: { required: false, type: () => Boolean }, industryStandards: { required: false, type: () => [String] } }) }, analytics: { required: false, type: () => ({ lastUpdated: { required: false, type: () => Date }, metrics: { required: false, type: () => ({ emailVolume: { required: false, type: () => Number }, webTraffic: { required: false, type: () => Number }, bounceRate: { required: false, type: () => Number } }) } }) }, notes: { required: false, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, createdBy: { required: false, type: () => String }, updatedBy: { required: false, type: () => String }, isDeleted: { required: true, type: () => Boolean }, deletedBy: { required: false, type: () => String }, deletedAt: { required: false, type: () => Date }, history: { required: false } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Domain.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)({ unique: true }),
    __metadata("design:type", String)
], Domain.prototype, "name", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], Domain.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization, { onDelete: 'CASCADE' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization)
], Domain.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _enums_domain_status_enum__WEBPACK_IMPORTED_MODULE_5__.DomainStatus,
        default: _enums_domain_status_enum__WEBPACK_IMPORTED_MODULE_5__.DomainStatus.PENDING
    }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], Domain.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_4__.DomainVerificationStatus,
        default: _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_4__.DomainVerificationStatus.PENDING
    }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], Domain.prototype, "verificationStatus", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _domain_verification_token_entity__WEBPACK_IMPORTED_MODULE_3__.DomainVerificationToken, token => token.domain),
    __metadata("design:type", Array)
], Domain.prototype, "verificationTokens", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _dns_record_entity__WEBPACK_IMPORTED_MODULE_6__.DnsRecord, record => record.domain),
    __metadata("design:type", Array)
], Domain.prototype, "dnsRecords", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Domain.prototype, "verifiedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Domain.prototype, "verificationDetails", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: true }),
    __metadata("design:type", Boolean)
], Domain.prototype, "isDefault", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    __metadata("design:type", Boolean)
], Domain.prototype, "isPrimary", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Domain.prototype, "dnsConfiguration", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Domain.prototype, "settings", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('date', { nullable: true }),
    __metadata("design:type", Date)
], Domain.prototype, "expiresAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('date', { nullable: true }),
    __metadata("design:type", Date)
], Domain.prototype, "renewalDate", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", Boolean)
], Domain.prototype, "isExpired", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", Boolean)
], Domain.prototype, "isLocked", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Domain.prototype, "registrarInfo", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Domain.prototype, "sslCertificate", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Domain.prototype, "monitoring", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { array: true, nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", Array)
], Domain.prototype, "tags", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Domain.prototype, "usage", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Domain.prototype, "securitySettings", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Domain.prototype, "compliance", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Domain.prototype, "analytics", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { nullable: true }),
    __metadata("design:type", String)
], Domain.prototype, "notes", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], Domain.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], Domain.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], Domain.prototype, "createdBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], Domain.prototype, "updatedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", Boolean)
], Domain.prototype, "isDeleted", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], Domain.prototype, "deletedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Domain.prototype, "deletedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], Domain.prototype, "history", void 0);
Domain = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('domains')
], Domain);



/***/ }),

/***/ "./src/modules/domain/enums/domain-status.enum.ts":
/*!********************************************************!*\
  !*** ./src/modules/domain/enums/domain-status.enum.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DomainStatus: () => (/* binding */ DomainStatus)
/* harmony export */ });
var DomainStatus;
(function (DomainStatus) {
    DomainStatus["PENDING"] = "pending";
    DomainStatus["ACTIVE"] = "active";
    DomainStatus["SUSPENDED"] = "suspended";
    DomainStatus["EXPIRED"] = "expired";
    DomainStatus["REDEMPTION"] = "redemption";
    DomainStatus["PENDING_DELETE"] = "pending_delete";
    DomainStatus["TRANSFER_IN_PROGRESS"] = "transfer_in_progress";
    DomainStatus["TRANSFER_PENDING"] = "transfer_pending";
    DomainStatus["LOCKED"] = "locked";
    DomainStatus["DISPUTED"] = "disputed";
    DomainStatus["INCOMPLETE"] = "incomplete";
    DomainStatus["MAINTENANCE"] = "maintenance";
    DomainStatus["FAILED"] = "failed";
    DomainStatus["REVIEW_REQUIRED"] = "review_required";
    DomainStatus["RESERVED"] = "reserved";
    DomainStatus["REGISTERING"] = "registering";
    DomainStatus["BLOCKED"] = "blocked";
    DomainStatus["INVALID"] = "invalid";
    DomainStatus["ARCHIVED"] = "archived";
    DomainStatus["PENDING_REMOVAL"] = "pending_removal";
    DomainStatus["VERIFYING"] = "verifying";
    DomainStatus["DNS_INVALID"] = "dns_invalid";
    DomainStatus["RENEWAL_REQUIRED"] = "renewal_required";
    DomainStatus["SECURITY_HOLD"] = "security_hold";
    DomainStatus["REGISTRAR_UPDATE"] = "registrar_update";
    DomainStatus["UPDATE_REQUIRED"] = "update_required";
    DomainStatus["GRACE_PERIOD"] = "grace_period";
    DomainStatus["WARNING"] = "warning";
    DomainStatus["DELETED"] = "deleted";
})(DomainStatus || (DomainStatus = {}));


/***/ }),

/***/ "./src/modules/domain/enums/domain-verification-method.enum.ts":
/*!*********************************************************************!*\
  !*** ./src/modules/domain/enums/domain-verification-method.enum.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DomainVerificationMethod: () => (/* binding */ DomainVerificationMethod)
/* harmony export */ });
var DomainVerificationMethod;
(function (DomainVerificationMethod) {
    DomainVerificationMethod["DNS_TXT"] = "dns_txt";
    DomainVerificationMethod["DNS_CNAME"] = "dns_cname";
    DomainVerificationMethod["HTML_FILE"] = "html_file";
    DomainVerificationMethod["META_TAG"] = "meta_tag";
    DomainVerificationMethod["EMAIL"] = "email";
    DomainVerificationMethod["GOOGLE_SEARCH_CONSOLE"] = "google_search_console";
    DomainVerificationMethod["REGISTRAR"] = "registrar";
    DomainVerificationMethod["HTTPS"] = "https";
    DomainVerificationMethod["REDIRECT"] = "redirect";
    DomainVerificationMethod["CONTACT"] = "contact";
    DomainVerificationMethod["THIRD_PARTY"] = "third_party";
    DomainVerificationMethod["DNS_CAA"] = "dns_caa";
    DomainVerificationMethod["MANUAL"] = "manual";
    DomainVerificationMethod["DOMAIN_TRANSFER"] = "domain_transfer";
    DomainVerificationMethod["DNS_DELEGATION"] = "dns_delegation";
    DomainVerificationMethod["API_TOKEN"] = "api_token";
    DomainVerificationMethod["HOSTING_PROVIDER"] = "hosting_provider";
    DomainVerificationMethod["WEBHOOK"] = "webhook";
    DomainVerificationMethod["MULTI_METHOD"] = "multi_method";
    DomainVerificationMethod["FILE"] = "FILE";
})(DomainVerificationMethod || (DomainVerificationMethod = {}));


/***/ }),

/***/ "./src/modules/domain/enums/domain-verification-status.enum.ts":
/*!*********************************************************************!*\
  !*** ./src/modules/domain/enums/domain-verification-status.enum.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DomainVerificationStatus: () => (/* binding */ DomainVerificationStatus)
/* harmony export */ });
var DomainVerificationStatus;
(function (DomainVerificationStatus) {
    DomainVerificationStatus["UNVERIFIED"] = "unverified";
    DomainVerificationStatus["PENDING"] = "pending";
    DomainVerificationStatus["IN_PROGRESS"] = "in_progress";
    DomainVerificationStatus["VERIFIED"] = "verified";
    DomainVerificationStatus["FAILED"] = "failed";
    DomainVerificationStatus["EXPIRED"] = "expired";
    DomainVerificationStatus["CANCELLED"] = "cancelled";
    DomainVerificationStatus["SUSPENDED"] = "suspended";
    DomainVerificationStatus["ACTION_REQUIRED"] = "action_required";
    DomainVerificationStatus["INVALIDATED"] = "invalidated";
    DomainVerificationStatus["RETRYING"] = "retrying";
    DomainVerificationStatus["REQUIRES_REVERIFICATION"] = "requires_reverification";
    DomainVerificationStatus["BLOCKED"] = "blocked";
    DomainVerificationStatus["UNCHECKED"] = "unchecked";
    DomainVerificationStatus["AWAITING_RESPONSE"] = "awaiting_response";
    DomainVerificationStatus["VERIFIED_WITH_WARNINGS"] = "verified_with_warnings";
})(DomainVerificationStatus || (DomainVerificationStatus = {}));


/***/ }),

/***/ "./src/modules/domain/services/domain-verification.service.ts":
/*!********************************************************************!*\
  !*** ./src/modules/domain/services/domain-verification.service.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DomainVerificationService: () => (/* binding */ DomainVerificationService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var dns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! dns */ "dns");
/* harmony import */ var dns__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(dns__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! util */ "util");
/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _entities_domain_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../entities/domain.entity */ "./src/modules/domain/entities/domain.entity.ts");
/* harmony import */ var _entities_domain_verification_token_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../entities/domain-verification-token.entity */ "./src/modules/domain/entities/domain-verification-token.entity.ts");
/* harmony import */ var _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../enums/domain-verification-status.enum */ "./src/modules/domain/enums/domain-verification-status.enum.ts");
/* harmony import */ var _enums_domain_verification_method_enum__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../enums/domain-verification-method.enum */ "./src/modules/domain/enums/domain-verification-method.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var DomainVerificationService_1;










let DomainVerificationService = DomainVerificationService_1 = class DomainVerificationService {
    constructor(domainRepository, verificationTokenRepository, configService) {
        this.domainRepository = domainRepository;
        this.verificationTokenRepository = verificationTokenRepository;
        this.configService = configService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(DomainVerificationService_1.name);
        this.resolveTxt = (0,util__WEBPACK_IMPORTED_MODULE_5__.promisify)(dns__WEBPACK_IMPORTED_MODULE_4__.resolveTxt);
        this.resolveCname = (0,util__WEBPACK_IMPORTED_MODULE_5__.promisify)(dns__WEBPACK_IMPORTED_MODULE_4__.resolveCname);
    }
    async initiateDomainVerification(domainId, method) {
        try {
            const domain = await this.domainRepository.findOneByOrFail({ id: domainId });
            const token = await this.generateVerificationToken(domain, method);
            const verificationToken = this.verificationTokenRepository.create({
                domain,
                token: token,
                method,
                status: _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_8__.DomainVerificationStatus.PENDING,
                expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000),
            });
            await this.verificationTokenRepository.save(verificationToken);
            domain.verificationStatus = _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_8__.DomainVerificationStatus.PENDING;
            await this.domainRepository.save(domain);
            return verificationToken;
        }
        catch (error) {
            this.logger.error(`Error initiating domain verification: ${error.message}`);
            throw error;
        }
    }
    async verifyDomain(domainId) {
        try {
            const domain = await this.domainRepository.findOne({
                where: { id: domainId },
                relations: ['verificationTokens']
            });
            if (!domain) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException(`Domain with ID ${domainId} not found`);
            }
            const activeToken = domain.verificationTokens.find(token => token.status === _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_8__.DomainVerificationStatus.PENDING);
            if (!activeToken) {
                throw new Error('No active verification token found');
            }
            let isVerified = false;
            switch (activeToken.method) {
                case _enums_domain_verification_method_enum__WEBPACK_IMPORTED_MODULE_9__.DomainVerificationMethod.DNS_TXT:
                    isVerified = await this.verifyDnsTxtRecord(domain.name, activeToken.token);
                    break;
                case _enums_domain_verification_method_enum__WEBPACK_IMPORTED_MODULE_9__.DomainVerificationMethod.DNS_CNAME:
                    isVerified = await this.verifyDnsCnameRecord(domain.name, activeToken.token);
                    break;
                case _enums_domain_verification_method_enum__WEBPACK_IMPORTED_MODULE_9__.DomainVerificationMethod.FILE:
                    isVerified = await this.verifyFileRecord(domain.name, activeToken.token);
                    break;
                default:
                    throw new Error(`Unsupported verification method: ${activeToken.method}`);
            }
            activeToken.status = isVerified
                ? _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_8__.DomainVerificationStatus.VERIFIED
                : _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_8__.DomainVerificationStatus.FAILED;
            activeToken.verifiedAt = isVerified ? new Date() : undefined;
            await this.verificationTokenRepository.save(activeToken);
            domain.verificationStatus = isVerified
                ? _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_8__.DomainVerificationStatus.VERIFIED
                : _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_8__.DomainVerificationStatus.FAILED;
            domain.verifiedAt = isVerified ? new Date() : undefined;
            await this.domainRepository.save(domain);
            return isVerified;
        }
        catch (error) {
            this.logger.error(`Error verifying domain: ${error.message}`);
            throw error;
        }
    }
    async verifyDnsTxtRecord(domain, token) {
        try {
            const records = await this.resolveTxt(domain);
            const flatRecords = records.flat();
            return flatRecords.some(record => record.includes(token));
        }
        catch (error) {
            this.logger.error(`Error verifying DNS TXT record: ${error.message}`);
            return false;
        }
    }
    async verifyDnsCnameRecord(domain, token) {
        try {
            const expectedValue = `${token}.${this.configService.get('VERIFICATION_DOMAIN')}`;
            const records = await this.resolveCname(domain);
            return records.some(record => record === expectedValue);
        }
        catch (error) {
            this.logger.error(`Error verifying DNS CNAME record: ${error.message}`);
            return false;
        }
    }
    async verifyFileRecord(domain, token) {
        try {
            const verificationUrl = `https://${domain}/.well-known/domain-verification.txt`;
            const response = await fetch(verificationUrl);
            if (!response.ok) {
                return false;
            }
            const content = await response.text();
            return content.trim() === token;
        }
        catch (error) {
            this.logger.error(`Error verifying file record: ${error.message}`);
            return false;
        }
    }
    async generateVerificationToken(domain, method) {
        const prefix = method === _enums_domain_verification_method_enum__WEBPACK_IMPORTED_MODULE_9__.DomainVerificationMethod.DNS_TXT ? 'domain-verify' : 'verify';
        const randomString = Math.random().toString(36).substring(2, 15);
        return `${prefix}-${domain.id}-${randomString}`;
    }
    async cleanupExpiredTokens() {
        try {
            const expiredTokens = await this.verificationTokenRepository.find({
                where: {
                    status: _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_8__.DomainVerificationStatus.PENDING,
                    expiresAt: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.LessThan)(new Date())
                }
            });
            for (const token of expiredTokens) {
                token.status = _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_8__.DomainVerificationStatus.EXPIRED;
                await this.verificationTokenRepository.save(token);
                const domain = await this.domainRepository.findOne({
                    where: { id: token.domainId },
                    relations: ['verificationTokens']
                });
                if (domain) {
                    const hasActiveTokens = domain.verificationTokens.some(t => t.status === _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_8__.DomainVerificationStatus.PENDING);
                    if (!hasActiveTokens) {
                        domain.verificationStatus = _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_8__.DomainVerificationStatus.EXPIRED;
                        await this.domainRepository.save(domain);
                    }
                }
            }
        }
        catch (error) {
            this.logger.error(`Error cleaning up expired tokens: ${error.message}`);
            throw error;
        }
    }
    async getDomainVerificationStatus(domainId) {
        try {
            const domain = await this.domainRepository.findOne({
                where: { id: domainId },
                relations: ['verificationTokens']
            });
            if (!domain) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException(`Domain with ID ${domainId} not found`);
            }
            const activeToken = domain.verificationTokens.find(token => token.status === _enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_8__.DomainVerificationStatus.PENDING);
            return {
                status: domain.verificationStatus,
                method: activeToken === null || activeToken === void 0 ? void 0 : activeToken.method,
                token: activeToken === null || activeToken === void 0 ? void 0 : activeToken.token,
                expiresAt: activeToken === null || activeToken === void 0 ? void 0 : activeToken.expiresAt,
                verifiedAt: domain.verifiedAt
            };
        }
        catch (error) {
            this.logger.error(`Error getting domain verification status: ${error.message}`);
            throw error;
        }
    }
};
DomainVerificationService = DomainVerificationService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_domain_entity__WEBPACK_IMPORTED_MODULE_6__.Domain)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_domain_verification_token_entity__WEBPACK_IMPORTED_MODULE_7__.DomainVerificationToken)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _nestjs_config__WEBPACK_IMPORTED_MODULE_3__.ConfigService])
], DomainVerificationService);



/***/ }),

/***/ "./src/modules/integrations/slack/services/slack.service.ts":
/*!******************************************************************!*\
  !*** ./src/modules/integrations/slack/services/slack.service.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SlackService: () => (/* binding */ SlackService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _slack_web_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @slack/web-api */ "../node_modules/@slack/web-api/dist/index.js");
/* harmony import */ var _slack_web_api__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_slack_web_api__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var SlackService_1;




let SlackService = SlackService_1 = class SlackService {
    sendDirectMessage(arg0) {
        throw new Error('Method not implemented.');
    }
    constructor(configService, eventEmitter) {
        this.configService = configService;
        this.eventEmitter = eventEmitter;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(SlackService_1.name);
        const token = this.configService.get('SLACK_BOT_TOKEN');
        this.client = new _slack_web_api__WEBPACK_IMPORTED_MODULE_2__.WebClient(token);
    }
    async sendMessage(channel, text, threadTs) {
        try {
            const response = await this.client.chat.postMessage({
                channel,
                text,
                thread_ts: threadTs,
            });
            this.logger.log(`Slack message sent successfully to channel: ${channel}`);
            this.eventEmitter.emit('slack.message.sent', {
                channel,
                messageTs: response.ts,
                text,
            });
            return response;
        }
        catch (error) {
            this.logger.error('Failed to send Slack message', error);
            this.eventEmitter.emit('slack.message.failed', {
                channel,
                text,
                error: error.message,
            });
            throw error;
        }
    }
    async sendBlockMessage(channel, blocks, text) {
        try {
            const response = await this.client.chat.postMessage({
                channel,
                blocks,
                text: text || 'Message with block content',
            });
            this.logger.log(`Slack block message sent successfully to channel: ${channel}`);
            this.eventEmitter.emit('slack.message.sent', {
                channel,
                messageTs: response.ts,
                blocks,
            });
            return response;
        }
        catch (error) {
            this.logger.error('Failed to send Slack block message', error);
            this.eventEmitter.emit('slack.message.failed', {
                channel,
                blocks,
                error: error.message,
            });
            throw error;
        }
    }
    async sendAttachmentMessage(channel, attachments, text) {
        try {
            const response = await this.client.chat.postMessage({
                channel,
                text: text || 'Message with attachments',
                attachments,
            });
            this.logger.log(`Slack attachment message sent successfully to channel: ${channel}`);
            this.eventEmitter.emit('slack.message.sent', {
                channel,
                messageTs: response.ts,
                attachments,
            });
            return response;
        }
        catch (error) {
            this.logger.error('Failed to send Slack attachment message', error);
            this.eventEmitter.emit('slack.message.failed', {
                channel,
                attachments,
                error: error.message,
            });
            throw error;
        }
    }
    async updateMessage(channel, ts, text, blocks) {
        try {
            const updateParams = Object.assign({ channel,
                ts,
                text }, (blocks && { blocks }));
            await this.client.chat.update(updateParams);
            this.logger.log(`Slack message updated successfully in channel: ${channel}`);
            this.eventEmitter.emit('slack.message.updated', {
                channel,
                messageTs: ts,
                text,
                blocks,
            });
        }
        catch (error) {
            this.logger.error('Failed to update Slack message', error);
            this.eventEmitter.emit('slack.message.update.failed', {
                channel,
                ts,
                error: error.message,
            });
            throw error;
        }
    }
    async deleteMessage(channel, ts) {
        try {
            await this.client.chat.delete({
                channel,
                ts,
            });
            this.logger.log(`Slack message deleted successfully from channel: ${channel}`);
            this.eventEmitter.emit('slack.message.deleted', {
                channel,
                messageTs: ts,
            });
        }
        catch (error) {
            this.logger.error('Failed to delete Slack message', error);
            this.eventEmitter.emit('slack.message.delete.failed', {
                channel,
                ts,
                error: error.message,
            });
            throw error;
        }
    }
    async getChannelInfo(channelId) {
        try {
            const response = await this.client.conversations.info({
                channel: channelId,
            });
            return response.channel;
        }
        catch (error) {
            this.logger.error('Failed to get channel information', error);
            throw error;
        }
    }
    async joinChannel(channelId) {
        try {
            await this.client.conversations.join({
                channel: channelId,
            });
            this.logger.log(`Successfully joined channel: ${channelId}`);
        }
        catch (error) {
            this.logger.error('Failed to join channel', error);
            throw error;
        }
    }
    async getChannelHistory(channel, limit = 100) {
        try {
            const response = await this.client.conversations.history({
                channel,
                limit,
            });
            return response.messages;
        }
        catch (error) {
            this.logger.error('Failed to get channel history', error);
            throw error;
        }
    }
};
SlackService = SlackService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigService,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__.EventEmitter2])
], SlackService);



/***/ }),

/***/ "./src/modules/medical-history/medical-history.entity.ts":
/*!***************************************************************!*\
  !*** ./src/modules/medical-history/medical-history.entity.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EncounterType: () => (/* binding */ EncounterType),
/* harmony export */   HealthcareProviderType: () => (/* binding */ HealthcareProviderType),
/* harmony export */   MedicalHistory: () => (/* binding */ MedicalHistory)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../contacts/entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var EncounterType;
(function (EncounterType) {
    EncounterType["CONSULTATION"] = "CONSULTATION";
    EncounterType["CHECKUP"] = "CHECKUP";
    EncounterType["PROCEDURE"] = "PROCEDURE";
    EncounterType["TREATMENT"] = "TREATMENT";
    EncounterType["FOLLOW_UP"] = "FOLLOW_UP";
    EncounterType["EMERGENCY"] = "EMERGENCY";
    EncounterType["LABORATORY"] = "LABORATORY";
    EncounterType["IMAGING"] = "IMAGING";
    EncounterType["TELEMEDICINE"] = "TELEMEDICINE";
    EncounterType["OTHER"] = "OTHER";
})(EncounterType || (EncounterType = {}));
var HealthcareProviderType;
(function (HealthcareProviderType) {
    HealthcareProviderType["PRIMARY_CARE"] = "PRIMARY_CARE";
    HealthcareProviderType["SPECIALIST"] = "SPECIALIST";
    HealthcareProviderType["DENTIST"] = "DENTIST";
    HealthcareProviderType["NURSE"] = "NURSE";
    HealthcareProviderType["THERAPIST"] = "THERAPIST";
    HealthcareProviderType["PHARMACIST"] = "PHARMACIST";
    HealthcareProviderType["OTHER"] = "OTHER";
})(HealthcareProviderType || (HealthcareProviderType = {}));
let MedicalHistory = class MedicalHistory {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, contactId: { required: true, type: () => String }, contact: { required: true, type: () => (__webpack_require__(/*! ../contacts/entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Contact) }, encounterType: { required: true, enum: (__webpack_require__(/*! ./medical-history.entity */ "./src/modules/medical-history/medical-history.entity.ts").EncounterType) }, date: { required: true, type: () => Date }, description: { required: true, type: () => String }, diagnosis: { required: true, type: () => String }, treatment: { required: true, type: () => String }, medications: { required: true, type: () => String }, symptoms: { required: true, type: () => String }, vitalSigns: { required: true, type: () => ({ bloodPressure: { required: false, type: () => String }, temperature: { required: false, type: () => Number }, heartRate: { required: false, type: () => Number }, respiratoryRate: { required: false, type: () => Number }, oxygenSaturation: { required: false, type: () => Number }, height: { required: false, type: () => Number }, weight: { required: false, type: () => Number }, bmi: { required: false, type: () => Number } }) }, notes: { required: true, type: () => String }, referrals: { required: true }, attachments: { required: true }, labResults: { required: true }, isFlagged: { required: true, type: () => Boolean }, flaggedReason: { required: true, type: () => String }, requiresFollowUp: { required: true, type: () => Boolean }, followUpDate: { required: true, type: () => Date }, providerName: { required: true, type: () => String }, providerType: { required: true, enum: (__webpack_require__(/*! ./medical-history.entity */ "./src/modules/medical-history/medical-history.entity.ts").HealthcareProviderType) }, facilityName: { required: true, type: () => String }, facilityLocation: { required: true, type: () => String }, isInsuranceClaim: { required: true, type: () => Boolean }, insuranceClaimNumber: { required: true, type: () => String }, costAmount: { required: true, type: () => Number }, costCurrency: { required: true, type: () => String }, customFields: { required: true, type: () => Object }, createdById: { required: true, type: () => String }, updatedById: { required: true, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, deletedAt: { required: true, type: () => Date } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], MedicalHistory.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], MedicalHistory.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], MedicalHistory.prototype, "contactId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_2__.Contact, contact => contact.medicalHistory, { onDelete: 'CASCADE' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'contactId' }),
    __metadata("design:type", _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_2__.Contact)
], MedicalHistory.prototype, "contact", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: EncounterType,
        default: EncounterType.CONSULTATION,
    }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "encounterType", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'date' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", Date)
], MedicalHistory.prototype, "date", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text' }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "description", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "diagnosis", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "treatment", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "medications", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "symptoms", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], MedicalHistory.prototype, "vitalSigns", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "notes", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Array)
], MedicalHistory.prototype, "referrals", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Array)
], MedicalHistory.prototype, "attachments", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Array)
], MedicalHistory.prototype, "labResults", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'boolean', default: false }),
    __metadata("design:type", Boolean)
], MedicalHistory.prototype, "isFlagged", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "flaggedReason", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'boolean', default: false }),
    __metadata("design:type", Boolean)
], MedicalHistory.prototype, "requiresFollowUp", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'date', nullable: true }),
    __metadata("design:type", Date)
], MedicalHistory.prototype, "followUpDate", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'varchar', nullable: true }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "providerName", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: HealthcareProviderType,
        nullable: true,
    }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "providerType", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'varchar', nullable: true }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "facilityName", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'varchar', nullable: true }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "facilityLocation", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'boolean', default: false }),
    __metadata("design:type", Boolean)
], MedicalHistory.prototype, "isInsuranceClaim", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'varchar', nullable: true }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "insuranceClaimNumber", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'decimal', precision: 10, scale: 2, nullable: true }),
    __metadata("design:type", Number)
], MedicalHistory.prototype, "costAmount", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'varchar', nullable: true }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "costCurrency", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], MedicalHistory.prototype, "customFields", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid', nullable: true }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "createdById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'uuid', nullable: true }),
    __metadata("design:type", String)
], MedicalHistory.prototype, "updatedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)({ type: 'timestamptz' }),
    __metadata("design:type", Date)
], MedicalHistory.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)({ type: 'timestamptz' }),
    __metadata("design:type", Date)
], MedicalHistory.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.DeleteDateColumn)({ type: 'timestamptz', nullable: true }),
    __metadata("design:type", Date)
], MedicalHistory.prototype, "deletedAt", void 0);
MedicalHistory = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('medical_histories'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'contact'])
], MedicalHistory);



/***/ }),

/***/ "./src/modules/messages/controllers/messages.controller.ts":
/*!*****************************************************************!*\
  !*** ./src/modules/messages/controllers/messages.controller.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessagesController: () => (/* binding */ MessagesController)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../auth/guards/jwt-auth.guard */ "./src/modules/auth/guards/jwt-auth.guard.ts");
/* harmony import */ var _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../auth/guards/roles.guard */ "./src/modules/auth/guards/roles.guard.ts");
/* harmony import */ var _auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../auth/decorators/roles.decorator */ "./src/modules/auth/decorators/roles.decorator.ts");
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
/* harmony import */ var _services_messages_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../services/messages.service */ "./src/modules/messages/services/messages.service.ts");
/* harmony import */ var _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../dto/create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts");
/* harmony import */ var _dto_update_message_dto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dto/update-message.dto */ "./src/modules/messages/dto/update-message.dto.ts");
/* harmony import */ var _dto_message_query_dto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../dto/message-query.dto */ "./src/modules/messages/dto/message-query.dto.ts");
/* harmony import */ var _dto_message_template_dto__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../dto/message-template.dto */ "./src/modules/messages/dto/message-template.dto.ts");
/* harmony import */ var _dto_bulk_message_dto__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../dto/bulk-message.dto */ "./src/modules/messages/dto/bulk-message.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};













let MessagesController = class MessagesController {
    constructor(messagesService) {
        this.messagesService = messagesService;
    }
    async create(createMessageDto, req) {
        if (!req.organization)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization information not available');
        if (!req.user)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User information not available');
        return this.messagesService.create(Object.assign(Object.assign({}, createMessageDto), { organizationId: req.organization.id, senderId: req.user.id }));
    }
    async findAll(query, req) {
        if (!req.organization)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization information not available');
        return this.messagesService.findAll(Object.assign(Object.assign({}, query), { organizationId: req.organization.id }));
    }
    async getConversations(query, req) {
        if (!req.organization)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization information not available');
        return this.messagesService.getConversations(Object.assign(Object.assign({}, query), { organizationId: req.organization.id }));
    }
    async getConversation(contactId, query, req) {
        if (!req.organization)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization information not available');
        return this.messagesService.getConversation(contactId, Object.assign(Object.assign({}, query), { organizationId: req.organization.id }));
    }
    async findOne(id, req) {
        if (!req.organization)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization information not available');
        const message = await this.messagesService.findOne(id, req.organization.id);
        if (!message) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.NotFoundException('Message not found');
        }
        return message;
    }
    async update(id, updateMessageDto, req) {
        if (!req.organization)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization information not available');
        if (!req.user)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User information not available');
        return this.messagesService.update(id, Object.assign(Object.assign({}, updateMessageDto), { organizationId: req.organization.id, updatedBy: req.user.id }));
    }
    async remove(id, req) {
        if (!req.organization)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization information not available');
        await this.messagesService.remove(id, req.organization.id);
    }
    async createTemplate(templateDto, req) {
        if (!req.organization)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization information not available');
        if (!req.user)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User information not available');
        return this.messagesService.createTemplate(Object.assign(Object.assign({}, templateDto), { organizationId: req.organization.id, createdBy: req.user.id }));
    }
    async getTemplates(query, req) {
        if (!req.organization)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization information not available');
        return this.messagesService.getTemplates(Object.assign(Object.assign({}, query), { organizationId: req.organization.id }));
    }
    async sendBulk(bulkMessageDto, req) {
        if (!req.organization)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization information not available');
        if (!req.user)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User information not available');
        if (!bulkMessageDto.contactIds || bulkMessageDto.contactIds.length === 0) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Contact IDs are required for bulk messaging');
        }
        return this.messagesService.sendBulk(Object.assign(Object.assign({}, bulkMessageDto), { organizationId: req.organization.id, senderId: req.user.id }));
    }
    async getStatistics(query, req) {
        if (!req.organization)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization information not available');
        return this.messagesService.getStatistics(Object.assign(Object.assign({}, query), { organizationId: req.organization.id }));
    }
    async resend(id, req) {
        if (!req.organization)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization information not available');
        if (!req.user)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User information not available');
        return this.messagesService.resend(id, {
            organizationId: req.organization.id,
            userId: req.user.id,
        });
    }
    async markAsRead(id, req) {
        if (!req.organization)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Organization information not available');
        if (!req.user)
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User information not available');
        return this.messagesService.markAsRead(id, {
            organizationId: req.organization.id,
            userId: req.user.id,
        });
    }
};
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.STAFF),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Create new message' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'Message sent successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/message.entity */ "./src/modules/messages/entities/message.entity.ts").Message) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_create_message_dto__WEBPACK_IMPORTED_MODULE_7__.CreateMessageDto, Object]),
    __metadata("design:returntype", Promise)
], MessagesController.prototype, "create", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get all messages' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return all messages' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_message_query_dto__WEBPACK_IMPORTED_MODULE_9__.MessageQueryDto, Object]),
    __metadata("design:returntype", Promise)
], MessagesController.prototype, "findAll", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('conversations'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get all conversations' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return all conversations' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_message_query_dto__WEBPACK_IMPORTED_MODULE_9__.MessageQueryDto, Object]),
    __metadata("design:returntype", Promise)
], MessagesController.prototype, "getConversations", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('conversations/:contactId'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get conversation with contact' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return conversation messages' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('contactId', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_message_query_dto__WEBPACK_IMPORTED_MODULE_9__.MessageQueryDto, Object]),
    __metadata("design:returntype", Promise)
], MessagesController.prototype, "getConversation", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get message by id' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return message details' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/message.entity */ "./src/modules/messages/entities/message.entity.ts").Message) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], MessagesController.prototype, "findOne", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)(':id'),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.STAFF),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Update message' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Message updated successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/message.entity */ "./src/modules/messages/entities/message.entity.ts").Message) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_update_message_dto__WEBPACK_IMPORTED_MODULE_8__.UpdateMessageDto, Object]),
    __metadata("design:returntype", Promise)
], MessagesController.prototype, "update", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Delete)(':id'),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Delete message' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.NO_CONTENT, description: 'Message deleted successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], MessagesController.prototype, "remove", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('templates'),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.STAFF),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Create message template' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'Template created successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/message-template.entity */ "./src/modules/messages/entities/message-template.entity.ts").MessageTemplate) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_message_template_dto__WEBPACK_IMPORTED_MODULE_10__.MessageTemplateDto, Object]),
    __metadata("design:returntype", Promise)
], MessagesController.prototype, "createTemplate", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('templates'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get message templates' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return message templates' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: [(__webpack_require__(/*! ../entities/message-template.entity */ "./src/modules/messages/entities/message-template.entity.ts").MessageTemplate)] }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_message_query_dto__WEBPACK_IMPORTED_MODULE_9__.MessageQueryDto, Object]),
    __metadata("design:returntype", Promise)
], MessagesController.prototype, "getTemplates", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('bulk'),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Send bulk messages' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'Bulk messages queued successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_bulk_message_dto__WEBPACK_IMPORTED_MODULE_11__.BulkMessageDto, Object]),
    __metadata("design:returntype", Promise)
], MessagesController.prototype, "sendBulk", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('statistics'),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get messaging statistics' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return messaging statistics' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: Object }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_message_query_dto__WEBPACK_IMPORTED_MODULE_9__.MessageQueryDto, Object]),
    __metadata("design:returntype", Promise)
], MessagesController.prototype, "getStatistics", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(':id/resend'),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.STAFF),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Resend failed message' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Message resent successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/message.entity */ "./src/modules/messages/entities/message.entity.ts").Message) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], MessagesController.prototype, "resend", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(':id/mark-read'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Mark message as read' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Message marked as read' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/message.entity */ "./src/modules/messages/entities/message.entity.ts").Message) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], MessagesController.prototype, "markAsRead", null);
MessagesController = __decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiTags)('Messages'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Controller)('messages'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UseGuards)(_auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__.JwtAuthGuard, _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__.RolesGuard),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiBearerAuth)(),
    __metadata("design:paramtypes", [_services_messages_service__WEBPACK_IMPORTED_MODULE_6__.MessagesService])
], MessagesController);



/***/ }),

/***/ "./src/modules/messages/dto/bulk-message.dto.ts":
/*!******************************************************!*\
  !*** ./src/modules/messages/dto/bulk-message.dto.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AttachmentDto: () => (/* binding */ AttachmentDto),
/* harmony export */   BulkMessageDto: () => (/* binding */ BulkMessageDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _enums_message_type_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/message-type.enum */ "./src/modules/messages/enums/message-type.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





class AttachmentDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { filename: { required: true, type: () => String }, contentType: { required: true, type: () => String }, content: { required: true, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Attachment filename' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], AttachmentDto.prototype, "filename", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Attachment content type' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], AttachmentDto.prototype, "contentType", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Attachment URL or content ID' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], AttachmentDto.prototype, "content", void 0);
class BulkMessageDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { contactIds: { required: true, type: () => [String] }, messageData: { required: true, type: () => (__webpack_require__(/*! ./create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts").CreateMessageDto) }, subject: { required: false, type: () => String }, content: { required: true, type: () => String }, type: { required: true, enum: (__webpack_require__(/*! ../enums/message-type.enum */ "./src/modules/messages/enums/message-type.enum.ts").MessageType) }, templateId: { required: false, type: () => String }, variables: { required: false, type: () => Object }, attachments: { required: false, type: () => [(__webpack_require__(/*! ./bulk-message.dto */ "./src/modules/messages/dto/bulk-message.dto.ts").AttachmentDto)] }, scheduledFor: { required: false, type: () => String }, organizationId: { required: false, type: () => String }, senderId: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Array of contact IDs to send messages to', type: [String] }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4', { each: true }),
    __metadata("design:type", Array)
], BulkMessageDto.prototype, "contactIds", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Message sender ID' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Message subject (for email)', required: false }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], BulkMessageDto.prototype, "subject", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Message content body' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], BulkMessageDto.prototype, "content", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Type of message', enum: _enums_message_type_enum__WEBPACK_IMPORTED_MODULE_3__.MessageType }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_message_type_enum__WEBPACK_IMPORTED_MODULE_3__.MessageType),
    __metadata("design:type", String)
], BulkMessageDto.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Template ID to use', required: false }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4'),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], BulkMessageDto.prototype, "templateId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Template variables', required: false }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Object)
], BulkMessageDto.prototype, "variables", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Message attachments', type: [AttachmentDto], required: false }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)({ each: true }),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => AttachmentDto),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Array)
], BulkMessageDto.prototype, "attachments", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Schedule message for a later time', required: false }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], BulkMessageDto.prototype, "scheduledFor", void 0);


/***/ }),

/***/ "./src/modules/messages/dto/create-message.dto.ts":
/*!********************************************************!*\
  !*** ./src/modules/messages/dto/create-message.dto.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Attachment: () => (/* binding */ Attachment),
/* harmony export */   CreateMessageDto: () => (/* binding */ CreateMessageDto),
/* harmony export */   EmailOptions: () => (/* binding */ EmailOptions),
/* harmony export */   MessagePriority: () => (/* binding */ MessagePriority),
/* harmony export */   MessageStatus: () => (/* binding */ MessageStatus),
/* harmony export */   MessageType: () => (/* binding */ MessageType)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var MessageType;
(function (MessageType) {
    MessageType["SMS"] = "SMS";
    MessageType["EMAIL"] = "EMAIL";
    MessageType["WHATSAPP"] = "WHATSAPP";
    MessageType["INTERNAL_NOTE"] = "INTERNAL_NOTE";
})(MessageType || (MessageType = {}));
var MessagePriority;
(function (MessagePriority) {
    MessagePriority["LOW"] = "LOW";
    MessagePriority["NORMAL"] = "NORMAL";
    MessagePriority["HIGH"] = "HIGH";
    MessagePriority["URGENT"] = "URGENT";
})(MessagePriority || (MessagePriority = {}));
var MessageStatus;
(function (MessageStatus) {
    MessageStatus["DRAFT"] = "DRAFT";
    MessageStatus["QUEUED"] = "QUEUED";
    MessageStatus["SENDING"] = "SENDING";
    MessageStatus["SENT"] = "SENT";
    MessageStatus["DELIVERED"] = "DELIVERED";
    MessageStatus["FAILED"] = "FAILED";
    MessageStatus["SCHEDULED"] = "SCHEDULED";
    MessageStatus["DELIVERING"] = "DELIVERING";
    MessageStatus["PENDING"] = "PENDING";
})(MessageStatus || (MessageStatus = {}));
class Attachment {
    static _OPENAPI_METADATA_FACTORY() {
        return { fileName: { required: true, type: () => String }, fileType: { required: true, type: () => String }, fileUrl: { required: true, type: () => String }, fileSize: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], Attachment.prototype, "fileName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], Attachment.prototype, "fileType", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], Attachment.prototype, "fileUrl", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], Attachment.prototype, "fileSize", void 0);
class EmailOptions {
    static _OPENAPI_METADATA_FACTORY() {
        return { subject: { required: true, type: () => String }, cc: { required: false, type: () => String }, bcc: { required: false, type: () => String }, trackOpens: { required: false, type: () => Boolean }, trackClicks: { required: false, type: () => Boolean } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], EmailOptions.prototype, "subject", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], EmailOptions.prototype, "cc", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], EmailOptions.prototype, "bcc", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], EmailOptions.prototype, "trackOpens", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], EmailOptions.prototype, "trackClicks", void 0);
class CreateMessageDto {
    constructor() {
        this.priority = MessagePriority.NORMAL;
        this.status = MessageStatus.QUEUED;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { type: { required: true, enum: (__webpack_require__(/*! ./create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts").MessageType) }, contactId: { required: true, type: () => String }, content: { required: true, type: () => String, maxLength: 5000 }, priority: { required: false, default: MessagePriority.NORMAL, enum: (__webpack_require__(/*! ./create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts").MessagePriority) }, status: { required: false, default: MessageStatus.QUEUED, enum: (__webpack_require__(/*! ./create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts").MessageStatus) }, scheduledFor: { required: false, type: () => String }, emailOptions: { required: false, type: () => (__webpack_require__(/*! ./create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts").EmailOptions) }, attachments: { required: false, type: () => [(__webpack_require__(/*! ./create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts").Attachment)] }, templateId: { required: false, type: () => String }, requireConfirmation: { required: false, type: () => Boolean }, notes: { required: false, type: () => String, maxLength: 500 }, externalId: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ enum: MessageType }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(MessageType),
    __metadata("design:type", String)
], CreateMessageDto.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], CreateMessageDto.prototype, "contactId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(5000),
    __metadata("design:type", String)
], CreateMessageDto.prototype, "content", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: MessagePriority }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(MessagePriority),
    __metadata("design:type", String)
], CreateMessageDto.prototype, "priority", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: MessageStatus }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(MessageStatus),
    __metadata("design:type", String)
], CreateMessageDto.prototype, "status", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsISO8601)(),
    __metadata("design:type", String)
], CreateMessageDto.prototype, "scheduledFor", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => EmailOptions),
    __metadata("design:type", EmailOptions)
], CreateMessageDto.prototype, "emailOptions", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ type: [Attachment] }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)({ each: true }),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Attachment),
    __metadata("design:type", Array)
], CreateMessageDto.prototype, "attachments", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], CreateMessageDto.prototype, "templateId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateMessageDto.prototype, "requireConfirmation", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(500),
    __metadata("design:type", String)
], CreateMessageDto.prototype, "notes", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], CreateMessageDto.prototype, "externalId", void 0);


/***/ }),

/***/ "./src/modules/messages/dto/message-query.dto.ts":
/*!*******************************************************!*\
  !*** ./src/modules/messages/dto/message-query.dto.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageQueryDto: () => (/* binding */ MessageQueryDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _enums_message_status_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/message-status.enum */ "./src/modules/messages/enums/message-status.enum.ts");
/* harmony import */ var _enums_message_type_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../enums/message-type.enum */ "./src/modules/messages/enums/message-type.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






class MessageQueryDto {
    constructor() {
        this.page = 1;
        this.limit = 10;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { status: { required: false, enum: (__webpack_require__(/*! ../enums/message-status.enum */ "./src/modules/messages/enums/message-status.enum.ts").MessageStatus) }, startDate: { required: false, type: () => Date }, endDate: { required: false, type: () => Date }, type: { required: false, enum: (__webpack_require__(/*! ../enums/message-type.enum */ "./src/modules/messages/enums/message-type.enum.ts").MessageType) }, contactId: { required: false, type: () => String }, senderId: { required: false, type: () => String }, search: { required: false, type: () => String }, isRead: { required: false, type: () => Boolean }, fromDate: { required: false, type: () => Date }, toDate: { required: false, type: () => Date }, page: { required: false, type: () => Number, default: 1, minimum: 1 }, limit: { required: false, type: () => Number, default: 10, minimum: 1, maximum: 100 }, organizationId: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by message status' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_message_status_enum__WEBPACK_IMPORTED_MODULE_3__.MessageStatus, { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], MessageQueryDto.prototype, "status", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by message type' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_message_type_enum__WEBPACK_IMPORTED_MODULE_4__.MessageType, { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], MessageQueryDto.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by contact ID' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], MessageQueryDto.prototype, "contactId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by sender ID' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], MessageQueryDto.prototype, "senderId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Search messages by content' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], MessageQueryDto.prototype, "search", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by read status' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Boolean)
], MessageQueryDto.prototype, "isRead", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter messages from date', type: Date }),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Date)
], MessageQueryDto.prototype, "fromDate", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter messages to date', type: Date }),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Date)
], MessageQueryDto.prototype, "toDate", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Page number for pagination', default: 1 }),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Number),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Number)
], MessageQueryDto.prototype, "page", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Items per page for pagination', default: 10 }),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Number),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(100),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Number)
], MessageQueryDto.prototype, "limit", void 0);


/***/ }),

/***/ "./src/modules/messages/dto/message-template.dto.ts":
/*!**********************************************************!*\
  !*** ./src/modules/messages/dto/message-template.dto.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageTemplateDto: () => (/* binding */ MessageTemplateDto),
/* harmony export */   TemplateVariablesDto: () => (/* binding */ TemplateVariablesDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _enums_message_type_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/message-type.enum */ "./src/modules/messages/enums/message-type.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





class TemplateVariablesDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { contact: { required: false, type: () => Object }, organization: { required: false, type: () => Object }, custom: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Contact variables' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Object)
], TemplateVariablesDto.prototype, "contact", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Organization variables' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Object)
], TemplateVariablesDto.prototype, "organization", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Custom variables' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Object)
], TemplateVariablesDto.prototype, "custom", void 0);
class MessageTemplateDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { name: { required: true, type: () => String }, description: { required: false, type: () => String }, type: { required: true, enum: (__webpack_require__(/*! ../enums/message-type.enum */ "./src/modules/messages/enums/message-type.enum.ts").MessageType) }, subject: { required: false, type: () => String }, content: { required: true, type: () => String }, variables: { required: false, type: () => (__webpack_require__(/*! ./message-template.dto */ "./src/modules/messages/dto/message-template.dto.ts").TemplateVariablesDto) }, isDefault: { required: false, type: () => Boolean }, category: { required: false, type: () => String }, organizationId: { required: false, type: () => String }, createdBy: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Template name' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], MessageTemplateDto.prototype, "name", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Template description' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], MessageTemplateDto.prototype, "description", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Message type', enum: _enums_message_type_enum__WEBPACK_IMPORTED_MODULE_3__.MessageType }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_message_type_enum__WEBPACK_IMPORTED_MODULE_3__.MessageType),
    __metadata("design:type", String)
], MessageTemplateDto.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Template subject (for email)' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], MessageTemplateDto.prototype, "subject", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Template content' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], MessageTemplateDto.prototype, "content", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Template variables' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => TemplateVariablesDto),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", TemplateVariablesDto)
], MessageTemplateDto.prototype, "variables", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Is this a default template?' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Boolean)
], MessageTemplateDto.prototype, "isDefault", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Category or tag for the template' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], MessageTemplateDto.prototype, "category", void 0);


/***/ }),

/***/ "./src/modules/messages/dto/update-message.dto.ts":
/*!********************************************************!*\
  !*** ./src/modules/messages/dto/update-message.dto.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UpdateMessageDto: () => (/* binding */ UpdateMessageDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _create_message_dto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





class UpdateMessageDto extends (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.PartialType)((0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.OmitType)(_create_message_dto__WEBPACK_IMPORTED_MODULE_1__.CreateMessageDto, ['type', 'contactId'])) {
    static _OPENAPI_METADATA_FACTORY() {
        return { status: { required: false, enum: (__webpack_require__(/*! ./create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts").MessageStatus) } };
    }
}
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsEnum)(_create_message_dto__WEBPACK_IMPORTED_MODULE_1__.MessageStatus),
    __metadata("design:type", String)
], UpdateMessageDto.prototype, "status", void 0);


/***/ }),

/***/ "./src/modules/messages/entities/message-attachment.entity.ts":
/*!********************************************************************!*\
  !*** ./src/modules/messages/entities/message-attachment.entity.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AttachmentType: () => (/* binding */ AttachmentType),
/* harmony export */   MessageAttachment: () => (/* binding */ MessageAttachment)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _message_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./message.entity */ "./src/modules/messages/entities/message.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var AttachmentType;
(function (AttachmentType) {
    AttachmentType["IMAGE"] = "image";
    AttachmentType["DOCUMENT"] = "document";
    AttachmentType["AUDIO"] = "audio";
    AttachmentType["VIDEO"] = "video";
    AttachmentType["OTHER"] = "other";
})(AttachmentType || (AttachmentType = {}));
let MessageAttachment = class MessageAttachment {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, fileName: { required: true, type: () => String }, fileSize: { required: true, type: () => Number }, mimeType: { required: true, type: () => String }, type: { required: true, enum: (__webpack_require__(/*! ./message-attachment.entity */ "./src/modules/messages/entities/message-attachment.entity.ts").AttachmentType) }, filePath: { required: true, type: () => String }, publicUrl: { required: true, type: () => String }, isUploaded: { required: true, type: () => Boolean }, message: { required: true, type: () => (__webpack_require__(/*! ./message.entity */ "./src/modules/messages/entities/message.entity.ts").Message) }, messageId: { required: true, type: () => String }, metadata: { required: true, type: () => Object }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], MessageAttachment.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], MessageAttachment.prototype, "fileName", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", Number)
], MessageAttachment.prototype, "fileSize", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], MessageAttachment.prototype, "mimeType", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: AttachmentType,
        default: AttachmentType.OTHER
    }),
    __metadata("design:type", String)
], MessageAttachment.prototype, "type", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], MessageAttachment.prototype, "filePath", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], MessageAttachment.prototype, "publicUrl", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], MessageAttachment.prototype, "isUploaded", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _message_entity__WEBPACK_IMPORTED_MODULE_2__.Message, message => message.attachments, {
        onDelete: 'CASCADE'
    }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'message_id' }),
    __metadata("design:type", _message_entity__WEBPACK_IMPORTED_MODULE_2__.Message)
], MessageAttachment.prototype, "message", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _message_entity__WEBPACK_IMPORTED_MODULE_2__.Message),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ name: 'message_id' }),
    __metadata("design:type", String)
], MessageAttachment.prototype, "messageId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], MessageAttachment.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], MessageAttachment.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], MessageAttachment.prototype, "updatedAt", void 0);
MessageAttachment = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('message_attachments')
], MessageAttachment);



/***/ }),

/***/ "./src/modules/messages/entities/message-template.entity.ts":
/*!******************************************************************!*\
  !*** ./src/modules/messages/entities/message-template.entity.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageTemplate: () => (/* binding */ MessageTemplate),
/* harmony export */   TemplateCategory: () => (/* binding */ TemplateCategory),
/* harmony export */   TemplateType: () => (/* binding */ TemplateType)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var TemplateCategory;
(function (TemplateCategory) {
    TemplateCategory["WELCOME"] = "welcome";
    TemplateCategory["NOTIFICATION"] = "notification";
    TemplateCategory["REMINDER"] = "reminder";
    TemplateCategory["MARKETING"] = "marketing";
    TemplateCategory["SUPPORT"] = "support";
    TemplateCategory["CUSTOM"] = "custom";
})(TemplateCategory || (TemplateCategory = {}));
var TemplateType;
(function (TemplateType) {
    TemplateType["SMS"] = "sms";
    TemplateType["EMAIL"] = "email";
    TemplateType["PUSH"] = "push";
    TemplateType["IN_APP"] = "in_app";
})(TemplateType || (TemplateType = {}));
let MessageTemplate = class MessageTemplate {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, name: { required: true, type: () => String }, description: { required: true, type: () => String }, category: { required: true, enum: (__webpack_require__(/*! ./message-template.entity */ "./src/modules/messages/entities/message-template.entity.ts").TemplateCategory) }, type: { required: true, enum: (__webpack_require__(/*! ./message-template.entity */ "./src/modules/messages/entities/message-template.entity.ts").TemplateType) }, subject: { required: true, type: () => String }, content: { required: true, type: () => String }, parameters: { required: true, type: () => Object }, isDefault: { required: true, type: () => Boolean }, isActive: { required: true, type: () => Boolean }, createdBy: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, createdById: { required: true, type: () => String }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, organizationId: { required: true, type: () => String }, metadata: { required: true, type: () => Object }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], MessageTemplate.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], MessageTemplate.prototype, "name", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], MessageTemplate.prototype, "description", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: TemplateCategory,
        default: TemplateCategory.CUSTOM
    }),
    __metadata("design:type", String)
], MessageTemplate.prototype, "category", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: TemplateType
    }),
    __metadata("design:type", String)
], MessageTemplate.prototype, "type", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], MessageTemplate.prototype, "subject", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text' }),
    __metadata("design:type", String)
], MessageTemplate.prototype, "content", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], MessageTemplate.prototype, "parameters", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], MessageTemplate.prototype, "isDefault", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: true }),
    __metadata("design:type", Boolean)
], MessageTemplate.prototype, "isActive", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User, { nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'created_by_id' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], MessageTemplate.prototype, "createdBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ name: 'created_by_id', nullable: true }),
    __metadata("design:type", String)
], MessageTemplate.prototype, "createdById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization, { nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organization_id' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization)
], MessageTemplate.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ name: 'organization_id', nullable: true }),
    __metadata("design:type", String)
], MessageTemplate.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], MessageTemplate.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], MessageTemplate.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], MessageTemplate.prototype, "updatedAt", void 0);
MessageTemplate = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('message_templates')
], MessageTemplate);



/***/ }),

/***/ "./src/modules/messages/entities/message.entity.ts":
/*!*********************************************************!*\
  !*** ./src/modules/messages/entities/message.entity.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Message: () => (/* binding */ Message)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dto/create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts");
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../contacts/entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts");
/* harmony import */ var _message_template_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./message-template.entity */ "./src/modules/messages/entities/message-template.entity.ts");
/* harmony import */ var _message_attachment_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./message-attachment.entity */ "./src/modules/messages/entities/message-attachment.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









let Message = class Message {
    get isRead() {
        return !!this.readAt;
    }
    get isConfirmed() {
        return !!this.confirmedAt;
    }
    get isDelivered() {
        return !!this.deliveredAt;
    }
    get isScheduled() {
        return !!this.scheduledFor && this.scheduledFor > new Date();
    }
    get isFailed() {
        return this.status === _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_2__.MessageStatus.FAILED;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, type: { required: true, enum: (__webpack_require__(/*! ../dto/create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts").MessageType) }, contactId: { required: true, type: () => String }, senderId: { required: true, type: () => String }, content: { required: true, type: () => String }, priority: { required: true, enum: (__webpack_require__(/*! ../dto/create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts").MessagePriority) }, status: { required: true, enum: (__webpack_require__(/*! ../dto/create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts").MessageStatus) }, emailOptions: { required: false, type: () => ({ subject: { required: true, type: () => String }, cc: { required: false, type: () => String }, bcc: { required: false, type: () => String }, trackOpens: { required: false, type: () => Boolean }, trackClicks: { required: false, type: () => Boolean } }) }, templateId: { required: false, type: () => String }, scheduledFor: { required: false, type: () => Date }, requireConfirmation: { required: true, type: () => Boolean }, confirmedAt: { required: false, type: () => Date }, confirmedById: { required: false, type: () => String }, deliveredAt: { required: false, type: () => Date }, readAt: { required: false, type: () => Date }, notes: { required: false, type: () => String }, externalId: { required: false, type: () => String }, deliveryDetails: { required: false, type: () => ({ provider: { required: true, type: () => String }, providerMessageId: { required: false, type: () => String }, attempts: { required: false, type: () => Number }, lastAttempt: { required: false, type: () => Date }, errorCode: { required: false, type: () => String }, errorMessage: { required: false, type: () => String } }) }, metadata: { required: false, type: () => Object }, parentMessageId: { required: false, type: () => String }, updatedById: { required: false, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, deletedAt: { required: false, type: () => Date }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, sender: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, updatedBy: { required: false, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, confirmedBy: { required: false, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, contact: { required: true, type: () => (__webpack_require__(/*! ../../contacts/entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Contact) }, template: { required: false, type: () => (__webpack_require__(/*! ./message-template.entity */ "./src/modules/messages/entities/message-template.entity.ts").MessageTemplate) }, parentMessage: { required: false, type: () => (__webpack_require__(/*! ./message.entity */ "./src/modules/messages/entities/message.entity.ts").Message) }, replies: { required: false, type: () => [(__webpack_require__(/*! ./message.entity */ "./src/modules/messages/entities/message.entity.ts").Message)] }, attachments: { required: false, type: () => [(__webpack_require__(/*! ./message-attachment.entity */ "./src/modules/messages/entities/message-attachment.entity.ts").MessageAttachment)] } };
    }
};
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Message.prototype, "id", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Message.prototype, "organizationId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'enum', enum: _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_2__.MessageType }),
    __metadata("design:type", String)
], Message.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Message.prototype, "contactId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Message.prototype, "senderId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text' }),
    __metadata("design:type", String)
], Message.prototype, "content", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_2__.MessagePriority,
        default: _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_2__.MessagePriority.NORMAL,
    }),
    __metadata("design:type", String)
], Message.prototype, "priority", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_2__.MessageStatus,
        default: _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_2__.MessageStatus.QUEUED,
    }),
    __metadata("design:type", String)
], Message.prototype, "status", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Message.prototype, "emailOptions", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Message.prototype, "templateId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Message.prototype, "scheduledFor", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], Message.prototype, "requireConfirmation", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Message.prototype, "confirmedAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Message.prototype, "confirmedById", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Message.prototype, "deliveredAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Message.prototype, "readAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], Message.prototype, "notes", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Message.prototype, "externalId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Message.prototype, "deliveryDetails", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Message.prototype, "metadata", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Message.prototype, "parentMessageId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Message.prototype, "updatedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], Message.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], Message.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.DeleteDateColumn)(),
    __metadata("design:type", Date)
], Message.prototype, "deletedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization)
], Message.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'senderId' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)
], Message.prototype, "sender", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'updatedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)
], Message.prototype, "updatedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'confirmedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)
], Message.prototype, "confirmedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_5__.Contact),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'contactId' }),
    __metadata("design:type", _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_5__.Contact)
], Message.prototype, "contact", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _message_template_entity__WEBPACK_IMPORTED_MODULE_6__.MessageTemplate),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'templateId' }),
    __metadata("design:type", _message_template_entity__WEBPACK_IMPORTED_MODULE_6__.MessageTemplate)
], Message.prototype, "template", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => Message),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'parentMessageId' }),
    __metadata("design:type", Message)
], Message.prototype, "parentMessage", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => Message, message => message.parentMessage),
    __metadata("design:type", Array)
], Message.prototype, "replies", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _message_attachment_entity__WEBPACK_IMPORTED_MODULE_7__.MessageAttachment, attachment => attachment.message),
    __metadata("design:type", Array)
], Message.prototype, "attachments", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Message.prototype, "isRead", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Message.prototype, "isConfirmed", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Message.prototype, "isDelivered", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Message.prototype, "isScheduled", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Message.prototype, "isFailed", null);
Message = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('messages'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'contactId']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'type']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'status'])
], Message);



/***/ }),

/***/ "./src/modules/messages/enums/message-status.enum.ts":
/*!***********************************************************!*\
  !*** ./src/modules/messages/enums/message-status.enum.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageStatus: () => (/* binding */ MessageStatus)
/* harmony export */ });
var MessageStatus;
(function (MessageStatus) {
    MessageStatus["DRAFT"] = "DRAFT";
    MessageStatus["QUEUED"] = "QUEUED";
    MessageStatus["SENDING"] = "SENDING";
    MessageStatus["SENT"] = "SENT";
    MessageStatus["DELIVERED"] = "DELIVERED";
    MessageStatus["READ"] = "READ";
    MessageStatus["FAILED"] = "FAILED";
    MessageStatus["CANCELLED"] = "CANCELLED";
    MessageStatus["SCHEDULED"] = "SCHEDULED";
})(MessageStatus || (MessageStatus = {}));


/***/ }),

/***/ "./src/modules/messages/enums/message-type.enum.ts":
/*!*********************************************************!*\
  !*** ./src/modules/messages/enums/message-type.enum.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageType: () => (/* binding */ MessageType)
/* harmony export */ });
var MessageType;
(function (MessageType) {
    MessageType["EMAIL"] = "EMAIL";
    MessageType["SMS"] = "SMS";
    MessageType["PUSH"] = "PUSH";
    MessageType["IN_APP"] = "IN_APP";
    MessageType["VOICE"] = "VOICE";
    MessageType["WHATSAPP"] = "WHATSAPP";
    MessageType["TELEGRAM"] = "TELEGRAM";
    MessageType["INTERNAL"] = "INTERNAL";
})(MessageType || (MessageType = {}));


/***/ }),

/***/ "./src/modules/messages/listeners/message-delivery.listener.ts":
/*!*********************************************************************!*\
  !*** ./src/modules/messages/listeners/message-delivery.listener.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageDeliveryListener: () => (/* binding */ MessageDeliveryListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_message_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/message.entity */ "./src/modules/messages/entities/message.entity.ts");
/* harmony import */ var _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../dto/create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts");
/* harmony import */ var _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../notifications/services/notifications.service */ "./src/modules/notifications/services/notifications.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};







let MessageDeliveryListener = class MessageDeliveryListener {
    constructor(messageRepository, notificationsService) {
        this.messageRepository = messageRepository;
        this.notificationsService = notificationsService;
    }
    async handleMessageDelivered(payload) {
        const { message, deliveryDetails } = payload;
        message.status = _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_5__.MessageStatus.DELIVERED;
        message.deliveredAt = new Date();
        message.deliveryDetails = deliveryDetails;
        await this.messageRepository.save(message);
        await this.notificationsService.notifyMessageDelivery(message);
    }
    async handleMessageFailed(payload) {
        var _a;
        const { message, error } = payload;
        message.status = _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_5__.MessageStatus.FAILED;
        if (!message.deliveryDetails) {
            message.deliveryDetails = {
                provider: '',
                errorCode: error.code,
                errorMessage: error.message,
                lastAttempt: new Date(),
                attempts: 1
            };
        }
        else {
            message.deliveryDetails = Object.assign(Object.assign({}, message.deliveryDetails), { errorCode: error.code, errorMessage: error.message, lastAttempt: new Date(), attempts: (message.deliveryDetails.attempts || 0) + 1 });
        }
        await this.messageRepository.save(message);
        const attempts = ((_a = message.deliveryDetails) === null || _a === void 0 ? void 0 : _a.attempts) || 0;
        if (attempts >= 3) {
            await this.notificationsService.notifyMessageFailure(message);
        }
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('message.delivered'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], MessageDeliveryListener.prototype, "handleMessageDelivered", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('message.failed'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], MessageDeliveryListener.prototype, "handleMessageFailed", null);
MessageDeliveryListener = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_entities_message_entity__WEBPACK_IMPORTED_MODULE_4__.Message)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_6__.NotificationsService])
], MessageDeliveryListener);



/***/ }),

/***/ "./src/modules/messages/listeners/message-queue.listener.ts":
/*!******************************************************************!*\
  !*** ./src/modules/messages/listeners/message-queue.listener.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageQueueListener: () => (/* binding */ MessageQueueListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _entities_message_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../entities/message.entity */ "./src/modules/messages/entities/message.entity.ts");
/* harmony import */ var _services_message_delivery_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/message-delivery.service */ "./src/modules/messages/services/message-delivery.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




let MessageQueueListener = class MessageQueueListener {
    constructor(deliveryService) {
        this.deliveryService = deliveryService;
    }
    handleMessageCreated(message) {
        return this.deliveryService.processMessage(message);
    }
    handleMessageResend(message) {
        return this.deliveryService.processMessage(message);
    }
    handleBulkMessages(messages) {
        return this.deliveryService.processBulkMessages(messages);
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('message.created'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_entities_message_entity__WEBPACK_IMPORTED_MODULE_2__.Message]),
    __metadata("design:returntype", void 0)
], MessageQueueListener.prototype, "handleMessageCreated", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('message.resend'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_entities_message_entity__WEBPACK_IMPORTED_MODULE_2__.Message]),
    __metadata("design:returntype", void 0)
], MessageQueueListener.prototype, "handleMessageResend", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('messages.bulk.created'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Array]),
    __metadata("design:returntype", void 0)
], MessageQueueListener.prototype, "handleBulkMessages", null);
MessageQueueListener = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_services_message_delivery_service__WEBPACK_IMPORTED_MODULE_3__.MessageDeliveryService])
], MessageQueueListener);



/***/ }),

/***/ "./src/modules/messages/messages.module.ts":
/*!*************************************************!*\
  !*** ./src/modules/messages/messages.module.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessagesModule: () => (/* binding */ MessagesModule)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _controllers_messages_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./controllers/messages.controller */ "./src/modules/messages/controllers/messages.controller.ts");
/* harmony import */ var _services_messages_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./services/messages.service */ "./src/modules/messages/services/messages.service.ts");
/* harmony import */ var _entities_message_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./entities/message.entity */ "./src/modules/messages/entities/message.entity.ts");
/* harmony import */ var _entities_message_template_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./entities/message-template.entity */ "./src/modules/messages/entities/message-template.entity.ts");
/* harmony import */ var _entities_message_attachment_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./entities/message-attachment.entity */ "./src/modules/messages/entities/message-attachment.entity.ts");
/* harmony import */ var _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../contacts/entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts");
/* harmony import */ var _auth_auth_module__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../auth/auth.module */ "./src/modules/auth/auth.module.ts");
/* harmony import */ var _users_users_module__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../users/users.module */ "./src/modules/users/users.module.ts");
/* harmony import */ var _organizations_organizations_module__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../organizations/organizations.module */ "./src/modules/organizations/organizations.module.ts");
/* harmony import */ var _notifications_notifications_module__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../notifications/notifications.module */ "./src/modules/notifications/notifications.module.ts");
/* harmony import */ var _listeners_message_queue_listener__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./listeners/message-queue.listener */ "./src/modules/messages/listeners/message-queue.listener.ts");
/* harmony import */ var _listeners_message_delivery_listener__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./listeners/message-delivery.listener */ "./src/modules/messages/listeners/message-delivery.listener.ts");
/* harmony import */ var _services_message_scheduler_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./services/message-scheduler.service */ "./src/modules/messages/services/message-scheduler.service.ts");
/* harmony import */ var _services_message_delivery_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./services/message-delivery.service */ "./src/modules/messages/services/message-delivery.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

















let MessagesModule = class MessagesModule {
};
MessagesModule = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Module)({
        imports: [
            _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.TypeOrmModule.forFeature([
                _entities_message_entity__WEBPACK_IMPORTED_MODULE_5__.Message,
                _entities_message_template_entity__WEBPACK_IMPORTED_MODULE_6__.MessageTemplate,
                _entities_message_attachment_entity__WEBPACK_IMPORTED_MODULE_7__.MessageAttachment,
                _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_8__.Contact
            ]),
            _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__.EventEmitterModule.forRoot({
                wildcard: true,
                maxListeners: 20,
                verboseMemoryLeak: true,
            }),
            _auth_auth_module__WEBPACK_IMPORTED_MODULE_9__.AuthModule,
            _users_users_module__WEBPACK_IMPORTED_MODULE_10__.UsersModule,
            _organizations_organizations_module__WEBPACK_IMPORTED_MODULE_11__.OrganizationsModule,
            _notifications_notifications_module__WEBPACK_IMPORTED_MODULE_12__.NotificationsModule
        ],
        controllers: [_controllers_messages_controller__WEBPACK_IMPORTED_MODULE_3__.MessagesController],
        providers: [
            _services_messages_service__WEBPACK_IMPORTED_MODULE_4__.MessagesService,
            _listeners_message_queue_listener__WEBPACK_IMPORTED_MODULE_13__.MessageQueueListener,
            _listeners_message_delivery_listener__WEBPACK_IMPORTED_MODULE_14__.MessageDeliveryListener,
            _services_message_scheduler_service__WEBPACK_IMPORTED_MODULE_15__.MessageSchedulerService,
            _services_message_delivery_service__WEBPACK_IMPORTED_MODULE_16__.MessageDeliveryService
        ],
        exports: [_services_messages_service__WEBPACK_IMPORTED_MODULE_4__.MessagesService, _services_message_delivery_service__WEBPACK_IMPORTED_MODULE_16__.MessageDeliveryService]
    })
], MessagesModule);



/***/ }),

/***/ "./src/modules/messages/services/message-delivery.service.ts":
/*!*******************************************************************!*\
  !*** ./src/modules/messages/services/message-delivery.service.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageDeliveryService: () => (/* binding */ MessageDeliveryService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_message_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/message.entity */ "./src/modules/messages/entities/message.entity.ts");
/* harmony import */ var _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../dto/create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var MessageDeliveryService_1;






let MessageDeliveryService = MessageDeliveryService_1 = class MessageDeliveryService {
    constructor(messageRepository, eventEmitter) {
        this.messageRepository = messageRepository;
        this.eventEmitter = eventEmitter;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(MessageDeliveryService_1.name);
    }
    async processMessage(message) {
        try {
            if (message.status === _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_5__.MessageStatus.DELIVERED) {
                return;
            }
            if (message.scheduledFor && message.scheduledFor > new Date()) {
                return;
            }
            message.status = _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_5__.MessageStatus.DELIVERING;
            await this.messageRepository.save(message);
            const deliveryResult = await this.deliverMessage(message);
            if (deliveryResult.success) {
                this.eventEmitter.emit('message.delivered', {
                    message,
                    deliveryDetails: {
                        provider: deliveryResult.provider,
                        providerMessageId: deliveryResult.providerMessageId,
                        deliveredAt: new Date(),
                    },
                });
            }
            else {
                this.eventEmitter.emit('message.failed', {
                    message,
                    error: {
                        code: deliveryResult.errorCode || 'DELIVERY_FAILED',
                        message: deliveryResult.errorMessage || 'Unknown delivery error',
                    },
                });
            }
        }
        catch (error) {
            this.logger.error(`Error processing message ${message.id}: ${error.message}`, error.stack);
            this.eventEmitter.emit('message.failed', {
                message,
                error: {
                    code: 'PROCESS_ERROR',
                    message: error.message,
                },
            });
        }
    }
    async processBulkMessages(messages) {
        try {
            const promises = messages.map(message => this.processMessage(message));
            await Promise.all(promises);
        }
        catch (error) {
            this.logger.error(`Error processing bulk messages: ${error.message}`, error.stack);
        }
    }
    async deliverMessage(message) {
        try {
            const isSuccessful = Math.random() > 0.2;
            if (isSuccessful) {
                return {
                    success: true,
                    provider: 'demo-provider',
                    providerMessageId: `msg-${Date.now()}-${Math.floor(Math.random() * 10000)}`,
                };
            }
            else {
                return {
                    success: false,
                    provider: 'demo-provider',
                    errorCode: 'PROVIDER_ERROR',
                    errorMessage: 'Simulated provider error',
                };
            }
        }
        catch (error) {
            this.logger.error(`Delivery error for message ${message.id}: ${error.message}`, error.stack);
            return {
                success: false,
                errorCode: 'DELIVERY_EXCEPTION',
                errorMessage: error.message,
            };
        }
    }
    async retryMessage(messageId) {
        const message = await this.messageRepository.findOne({ where: { id: messageId } });
        if (!message) {
            throw new Error(`Message with ID ${messageId} not found`);
        }
        message.status = _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_5__.MessageStatus.SENDING;
        await this.messageRepository.save(message);
        this.eventEmitter.emit('message.resend', message);
    }
};
MessageDeliveryService = MessageDeliveryService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_message_entity__WEBPACK_IMPORTED_MODULE_4__.Message)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__.EventEmitter2])
], MessageDeliveryService);



/***/ }),

/***/ "./src/modules/messages/services/message-scheduler.service.ts":
/*!********************************************************************!*\
  !*** ./src/modules/messages/services/message-scheduler.service.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageSchedulerService: () => (/* binding */ MessageSchedulerService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _nestjs_schedule__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
/* harmony import */ var _nestjs_schedule__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_nestjs_schedule__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _entities_message_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/message.entity */ "./src/modules/messages/entities/message.entity.ts");
/* harmony import */ var _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../dto/create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var MessageSchedulerService_1;







let MessageSchedulerService = MessageSchedulerService_1 = class MessageSchedulerService {
    constructor(messageRepository, eventEmitter) {
        this.messageRepository = messageRepository;
        this.eventEmitter = eventEmitter;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(MessageSchedulerService_1.name);
    }
    async onModuleInit() {
        this.logger.log('Message scheduler service initialized');
        await this.processScheduledMessages();
    }
    onModuleDestroy() {
        if (this.schedulerInterval) {
            clearInterval(this.schedulerInterval);
        }
    }
    async scheduleMessage(message, scheduledFor) {
        message.scheduledFor = scheduledFor;
        message.status = _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.SCHEDULED;
        return this.messageRepository.save(message);
    }
    async cancelScheduledMessage(messageId) {
        const message = await this.messageRepository.findOne({ where: { id: messageId } });
        if (!message) {
            throw new Error(`Message with ID ${messageId} not found`);
        }
        if (message.status !== _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.SCHEDULED) {
            throw new Error(`Message is not scheduled: ${messageId}`);
        }
        message.status = _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.SENDING;
        message.scheduledFor = undefined;
        await this.messageRepository.save(message);
        this.logger.log(`Scheduled message ${messageId} has been canceled`);
    }
    async rescheduleMessage(messageId, newScheduledFor) {
        const message = await this.messageRepository.findOne({ where: { id: messageId } });
        if (!message) {
            throw new Error(`Message with ID ${messageId} not found`);
        }
        message.scheduledFor = newScheduledFor;
        message.status = _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.SCHEDULED;
        const updatedMessage = await this.messageRepository.save(message);
        this.logger.log(`Message ${messageId} rescheduled for ${newScheduledFor}`);
        return updatedMessage;
    }
    async processScheduledMessages() {
        try {
            this.logger.debug('Checking for scheduled messages...');
            const now = new Date();
            const dueSendMessages = await this.messageRepository.find({
                where: {
                    status: _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.SCHEDULED,
                    scheduledFor: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.LessThanOrEqual)(now),
                },
            });
            if (dueSendMessages.length === 0) {
                return;
            }
            this.logger.log(`Found ${dueSendMessages.length} scheduled messages to process`);
            await Promise.all(dueSendMessages.map(async (message) => {
                message.status = _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.SENDING;
                await this.messageRepository.save(message);
                this.eventEmitter.emit('message.created', message);
            }));
        }
        catch (error) {
            this.logger.error('Error processing scheduled messages:', error.stack);
        }
    }
    async getAllScheduledMessages() {
        return this.messageRepository.find({
            where: { status: _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.SCHEDULED },
            order: { scheduledFor: 'ASC' },
        });
    }
    async getScheduledMessagesForPeriod(startDate, endDate) {
        return this.messageRepository.find({
            where: {
                status: _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.SCHEDULED,
                scheduledFor: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.Between)(startDate, endDate),
            },
            order: { scheduledFor: 'ASC' },
        });
    }
};
__decorate([
    (0,_nestjs_schedule__WEBPACK_IMPORTED_MODULE_4__.Cron)(_nestjs_schedule__WEBPACK_IMPORTED_MODULE_4__.CronExpression.EVERY_MINUTE),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], MessageSchedulerService.prototype, "processScheduledMessages", null);
MessageSchedulerService = MessageSchedulerService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_message_entity__WEBPACK_IMPORTED_MODULE_5__.Message)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__.EventEmitter2])
], MessageSchedulerService);



/***/ }),

/***/ "./src/modules/messages/services/messages.service.ts":
/*!***********************************************************!*\
  !*** ./src/modules/messages/services/messages.service.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessagesService: () => (/* binding */ MessagesService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _entities_message_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/message.entity */ "./src/modules/messages/entities/message.entity.ts");
/* harmony import */ var _entities_message_template_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/message-template.entity */ "./src/modules/messages/entities/message-template.entity.ts");
/* harmony import */ var _entities_message_attachment_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/message-attachment.entity */ "./src/modules/messages/entities/message-attachment.entity.ts");
/* harmony import */ var _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../dto/create-message.dto */ "./src/modules/messages/dto/create-message.dto.ts");
/* harmony import */ var _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../contacts/entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! nestjs-typeorm-paginate */ "nestjs-typeorm-paginate");
/* harmony import */ var nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_9__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};










let MessagesService = class MessagesService {
    constructor(messageRepository, templateRepository, attachmentRepository, contactRepository, dataSource, eventEmitter) {
        this.messageRepository = messageRepository;
        this.templateRepository = templateRepository;
        this.attachmentRepository = attachmentRepository;
        this.contactRepository = contactRepository;
        this.dataSource = dataSource;
        this.eventEmitter = eventEmitter;
    }
    async create(data) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const contact = await this.contactRepository.findOne({
                where: { id: data.contactId, organizationId: data.organizationId },
            });
            if (!contact) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('Contact not found');
            }
            if (data.type === _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageType.EMAIL && !contact.email) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Contact has no email address');
            }
            if (data.type === _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageType.SMS && !contact.phoneNumber) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Contact has no phone number');
            }
            const message = this.messageRepository.create(Object.assign(Object.assign({}, data), { status: data.scheduledFor ? _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.QUEUED : _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.SENDING, attachments: data.attachments }));
            if (data.templateId) {
                const template = await this.templateRepository.findOne({
                    where: { id: data.templateId, organizationId: data.organizationId },
                });
                if (!template) {
                    throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('Template not found');
                }
                message.content = this.processTemplate(template.content, contact);
            }
            await queryRunner.manager.save(_entities_message_entity__WEBPACK_IMPORTED_MODULE_3__.Message, message);
            if (data.attachments && data.attachments.length > 0) {
                const attachmentEntities = data.attachments.map(attachment => {
                    return this.attachmentRepository.create(Object.assign(Object.assign({}, attachment), { message: message, fileSize: attachment.fileSize ? Number(attachment.fileSize) : undefined }));
                });
                await queryRunner.manager.save(_entities_message_attachment_entity__WEBPACK_IMPORTED_MODULE_5__.MessageAttachment, attachmentEntities);
            }
            await queryRunner.commitTransaction();
            if (!data.scheduledFor) {
                this.eventEmitter.emit('message.created', message);
            }
            return message;
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async findAll(query) {
        const { organizationId, type, status, startDate, endDate, page = 1, limit = 10 } = query;
        const queryBuilder = this.messageRepository
            .createQueryBuilder('message')
            .where('message.organizationId = :organizationId', { organizationId })
            .leftJoinAndSelect('message.contact', 'contact')
            .leftJoinAndSelect('message.sender', 'sender')
            .leftJoinAndSelect('message.attachments', 'attachments');
        if (type) {
            queryBuilder.andWhere('message.type = :type', { type });
        }
        if (status) {
            queryBuilder.andWhere('message.status = :status', { status });
        }
        if (startDate) {
            queryBuilder.andWhere('message.createdAt >= :startDate', { startDate });
        }
        if (endDate) {
            queryBuilder.andWhere('message.createdAt <= :endDate', { endDate });
        }
        queryBuilder.orderBy('message.createdAt', 'DESC');
        return (0,nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_9__.paginate)(queryBuilder, { page, limit });
    }
    async getConversations(query) {
        const { organizationId, page = 1, limit = 10 } = query;
        const queryBuilder = this.messageRepository
            .createQueryBuilder('message')
            .select('DISTINCT ON (message.contactId) message.*')
            .where('message.organizationId = :organizationId', { organizationId })
            .orderBy('message.contactId')
            .addOrderBy('message.createdAt', 'DESC');
        return (0,nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_9__.paginate)(queryBuilder, { page, limit });
    }
    async getConversation(contactId, query) {
        const { organizationId, page = 1, limit = 20 } = query;
        const queryBuilder = this.messageRepository
            .createQueryBuilder('message')
            .where('message.organizationId = :organizationId', { organizationId })
            .andWhere('message.contactId = :contactId', { contactId })
            .leftJoinAndSelect('message.attachments', 'attachments')
            .orderBy('message.createdAt', 'DESC');
        return (0,nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_9__.paginate)(queryBuilder, { page, limit });
    }
    async findOne(id, organizationId) {
        const message = await this.messageRepository.findOne({
            where: { id, organizationId },
            relations: ['contact', 'sender', 'attachments'],
        });
        if (!message) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('Message not found');
        }
        return message;
    }
    async update(id, data) {
        const message = await this.findOne(id, data.organizationId);
        if (message.status === _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.SENT || message.status === _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.DELIVERED) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Cannot update sent or delivered messages');
        }
        Object.assign(message, data);
        return this.messageRepository.save(message);
    }
    async remove(id, organizationId) {
        const message = await this.findOne(id, organizationId);
        await this.messageRepository.softRemove(message);
    }
    async createTemplate(data) {
        const { category } = data, restData = __rest(data, ["category"]);
        const template = this.templateRepository.create(restData);
        if (category) {
            if (typeof category === 'string') {
                template.category = { id: category };
            }
            else {
                template.category = category;
            }
        }
        return this.templateRepository.save(template);
    }
    async getTemplates(query) {
        return this.templateRepository.find({
            where: { organizationId: query.organizationId },
            order: { name: 'ASC' },
        });
    }
    async sendBulk(data) {
        const contacts = await this.contactRepository.find({
            where: {
                id: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.In)(data.contactIds),
                organizationId: data.organizationId,
            },
        });
        if (contacts.length !== data.contactIds.length) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Some contacts were not found');
        }
        if (!data.messageData) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Message data is required');
        }
        const messages = contacts.map(contact => this.messageRepository.create(Object.assign(Object.assign({}, data.messageData), { contactId: contact.id, organizationId: data.organizationId, senderId: data.senderId, attachments: data.messageData.attachments })));
        const savedMessages = await this.messageRepository.save(messages.flat());
        this.eventEmitter.emit('messages.bulk.created', savedMessages);
        return {
            success: true,
            count: savedMessages.length,
            messageIds: savedMessages.map(m => m.id),
        };
    }
    async getStatistics(query) {
        const { organizationId, startDate, endDate } = query;
        const queryBuilder = this.messageRepository
            .createQueryBuilder('message')
            .where('message.organizationId = :organizationId', { organizationId });
        if (startDate) {
            queryBuilder.andWhere('message.createdAt >= :startDate', { startDate });
        }
        if (endDate) {
            queryBuilder.andWhere('message.createdAt <= :endDate', { endDate });
        }
        const stats = await queryBuilder
            .select([
            'COUNT(*) as total',
            'COUNT(CASE WHEN status = :sent THEN 1 END) as sent',
            'COUNT(CASE WHEN status = :delivered THEN 1 END) as delivered',
            'COUNT(CASE WHEN status = :failed THEN 1 END) as failed',
            'COUNT(CASE WHEN readAt IS NOT NULL THEN 1 END) as read',
        ])
            .setParameter('sent', _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.SENT)
            .setParameter('delivered', _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.DELIVERED)
            .setParameter('failed', _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.FAILED)
            .getRawOne();
        return stats;
    }
    async resend(id, context) {
        const message = await this.findOne(id, context.organizationId);
        if (message.status !== _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.FAILED) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Only failed messages can be resent');
        }
        message.status = _dto_create_message_dto__WEBPACK_IMPORTED_MODULE_6__.MessageStatus.QUEUED;
        message.updatedById = context.userId;
        const deliveryDetails = message.deliveryDetails || {};
        message.deliveryDetails = Object.assign(Object.assign({}, deliveryDetails), { provider: deliveryDetails.provider || '', attempts: 0, lastAttempt: undefined, errorCode: undefined, errorMessage: undefined });
        await this.messageRepository.save(message);
        this.eventEmitter.emit('message.resend', message);
        return message;
    }
    async markAsRead(id, context) {
        const message = await this.findOne(id, context.organizationId);
        if (!message.readAt) {
            message.readAt = new Date();
            await this.messageRepository.save(message);
        }
        return message;
    }
    processTemplate(template, contact) {
        return template.replace(/\{\{(\w+)\}\}/g, (match, key) => {
            const value = contact[key];
            return value !== undefined && value !== null ? String(value) : match;
        });
    }
};
MessagesService = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_message_entity__WEBPACK_IMPORTED_MODULE_3__.Message)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_message_template_entity__WEBPACK_IMPORTED_MODULE_4__.MessageTemplate)),
    __param(2, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_message_attachment_entity__WEBPACK_IMPORTED_MODULE_5__.MessageAttachment)),
    __param(3, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_7__.Contact)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.DataSource,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_8__.EventEmitter2])
], MessagesService);



/***/ }),

/***/ "./src/modules/notifications/controllers/notifications.controller.ts":
/*!***************************************************************************!*\
  !*** ./src/modules/notifications/controllers/notifications.controller.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NotificationsController: () => (/* binding */ NotificationsController)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../auth/guards/jwt-auth.guard */ "./src/modules/auth/guards/jwt-auth.guard.ts");
/* harmony import */ var _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../auth/guards/roles.guard */ "./src/modules/auth/guards/roles.guard.ts");
/* harmony import */ var _auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../auth/decorators/roles.decorator */ "./src/modules/auth/decorators/roles.decorator.ts");
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
/* harmony import */ var _services_notifications_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../services/notifications.service */ "./src/modules/notifications/services/notifications.service.ts");
/* harmony import */ var _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../dto/create-notification.dto */ "./src/modules/notifications/dto/create-notification.dto.ts");
/* harmony import */ var _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dto/update-notification.dto */ "./src/modules/notifications/dto/update-notification.dto.ts");
/* harmony import */ var _dto_notification_query_dto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../dto/notification-query.dto */ "./src/modules/notifications/dto/notification-query.dto.ts");
/* harmony import */ var _dto_notification_preferences_dto__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../dto/notification-preferences.dto */ "./src/modules/notifications/dto/notification-preferences.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};












let NotificationsController = class NotificationsController {
    constructor(notificationsService) {
        this.notificationsService = notificationsService;
    }
    async create(createNotificationDto, req) {
        if (!req.organization || !req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User or organization not found');
        }
        return this.notificationsService.create(Object.assign(Object.assign({}, createNotificationDto), { organizationId: req.organization.id, senderId: req.user.id }));
    }
    async findAll(query, req) {
        if (!req.organization || !req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User or organization not found');
        }
        const notificationQuery = {
            skip: query.skip,
            take: query.take,
            includeRead: query.includeRead,
            organizationId: req.organization.id,
        };
        return this.notificationsService.getUserNotifications(req.user.id, notificationQuery);
    }
    async getUnreadCount(req) {
        if (!req.organization || !req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User or organization not found');
        }
        return this.notificationsService.getUnreadCount(req.user.id);
    }
    async findOne(id, req) {
        if (!req.organization || !req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User or organization not found');
        }
        const notification = await this.notificationsService.getNotificationById(id, req.organization.id, req.user.id);
        if (!notification) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.NotFoundException('Notification not found');
        }
        return notification;
    }
    async update(id, updateNotificationDto, req) {
        if (!req.organization || !req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User or organization not found');
        }
        return this.notificationsService.updateNotification(id, Object.assign(Object.assign({}, updateNotificationDto), { organizationId: req.organization.id }));
    }
    async remove(id, req) {
        if (!req.organization || !req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User or organization not found');
        }
        await this.notificationsService.updateNotification(id, { isDeleted: true, organizationId: req.organization.id });
    }
    async markAsRead(id, req) {
        if (!req.organization || !req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User or organization not found');
        }
        return this.notificationsService.markAsRead(id, req.user.id);
    }
    async markAllAsRead(req) {
        if (!req.organization || !req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User or organization not found');
        }
        return this.notificationsService.markAllAsRead(req.user.id);
    }
    async getPreferences(req) {
        if (!req.organization || !req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User or organization not found');
        }
        return this.notificationsService.getUserPreferences(req.organization.id, req.user.id);
    }
    async updatePreferences(preferencesDto, req) {
        if (!req.organization || !req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User or organization not found');
        }
        return this.notificationsService.getUserPreferences(req.organization.id, req.user.id);
    }
    async sendTestNotification(data, req) {
        if (!req.organization || !req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User or organization not found');
        }
        return this.notificationsService.sendNotification(req.user.id, data.type, Object.assign(Object.assign({}, data), { organizationId: req.organization.id, userId: req.user.id }));
    }
    async getChannels(req) {
        if (!req.organization || !req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('User or organization not found');
        }
        return this.notificationsService.getNotificationChannels(req.organization.id, req.user.id);
    }
};
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.STAFF),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Create new notification' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'Notification created successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__.CreateNotificationDto, Object]),
    __metadata("design:returntype", Promise)
], NotificationsController.prototype, "create", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get user notifications' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return user notifications' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_notification_query_dto__WEBPACK_IMPORTED_MODULE_9__.NotificationQueryDto, Object]),
    __metadata("design:returntype", Promise)
], NotificationsController.prototype, "findAll", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('unread'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get unread notifications count' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return unread notifications count' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: Number }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], NotificationsController.prototype, "getUnreadCount", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get notification by id' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return notification details' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/notification.entity */ "./src/modules/notifications/entities/notification.entity.ts").Notification) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], NotificationsController.prototype, "findOne", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)(':id'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Update notification' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Notification updated successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/notification.entity */ "./src/modules/notifications/entities/notification.entity.ts").Notification) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_8__.UpdateNotificationDto, Object]),
    __metadata("design:returntype", Promise)
], NotificationsController.prototype, "update", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Delete)(':id'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Delete notification' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.NO_CONTENT, description: 'Notification deleted successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], NotificationsController.prototype, "remove", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(':id/mark-read'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Mark notification as read' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Notification marked as read' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], NotificationsController.prototype, "markAsRead", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('mark-all-read'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Mark all notifications as read' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'All notifications marked as read' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], NotificationsController.prototype, "markAllAsRead", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('preferences'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get notification preferences' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return notification preferences' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: Object }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], NotificationsController.prototype, "getPreferences", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)('preferences'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Update notification preferences' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Preferences updated successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: Object }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_notification_preferences_dto__WEBPACK_IMPORTED_MODULE_10__.NotificationPreferencesDto, Object]),
    __metadata("design:returntype", Promise)
], NotificationsController.prototype, "updatePreferences", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)('test'),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Send test notification' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'Test notification sent successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, Object]),
    __metadata("design:returntype", Promise)
], NotificationsController.prototype, "sendTestNotification", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('channels'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get available notification channels' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return available channels' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: Object }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], NotificationsController.prototype, "getChannels", null);
NotificationsController = __decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiTags)('Notifications'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Controller)('notifications'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UseGuards)(_auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__.JwtAuthGuard, _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__.RolesGuard),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiBearerAuth)(),
    __metadata("design:paramtypes", [_services_notifications_service__WEBPACK_IMPORTED_MODULE_6__.NotificationsService])
], NotificationsController);



/***/ }),

/***/ "./src/modules/notifications/dto/channel-settings.dto.ts":
/*!***************************************************************!*\
  !*** ./src/modules/notifications/dto/channel-settings.dto.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ChannelSettingsDto: () => (/* binding */ ChannelSettingsDto),
/* harmony export */   EmailSettingsDto: () => (/* binding */ EmailSettingsDto),
/* harmony export */   InAppSettingsDto: () => (/* binding */ InAppSettingsDto),
/* harmony export */   PushSettingsDto: () => (/* binding */ PushSettingsDto),
/* harmony export */   SlackSettingsDto: () => (/* binding */ SlackSettingsDto),
/* harmony export */   SmsSettingsDto: () => (/* binding */ SmsSettingsDto),
/* harmony export */   TeamsSettingsDto: () => (/* binding */ TeamsSettingsDto),
/* harmony export */   WebhookRetryConfigDto: () => (/* binding */ WebhookRetryConfigDto),
/* harmony export */   WebhookSettingsDto: () => (/* binding */ WebhookSettingsDto),
/* harmony export */   WhatsappSettingsDto: () => (/* binding */ WhatsappSettingsDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




class EmailSettingsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { addresses: { required: false, type: () => [String] }, format: { required: false, type: () => Object }, includeAttachments: { required: false, type: () => Boolean }, templateId: { required: false, type: () => String }, signature: { required: false, type: () => String, maxLength: 500 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ type: [String], description: 'List of email addresses' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)({}, { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMaxSize)(5),
    __metadata("design:type", Array)
], EmailSettingsDto.prototype, "addresses", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: ['HTML', 'TEXT'], description: 'Email format preference' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(['HTML', 'TEXT']),
    __metadata("design:type", String)
], EmailSettingsDto.prototype, "format", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to include attachments in email notifications' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], EmailSettingsDto.prototype, "includeAttachments", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Custom email template ID' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], EmailSettingsDto.prototype, "templateId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Email signature' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(500),
    __metadata("design:type", String)
], EmailSettingsDto.prototype, "signature", void 0);
class SmsSettingsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { phoneNumbers: { required: false, type: () => [String] }, includeMedia: { required: false, type: () => Boolean }, provider: { required: false, type: () => String }, useUrlShortening: { required: false, type: () => Boolean } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ type: [String], description: 'List of phone numbers' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(undefined, { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMaxSize)(3),
    __metadata("design:type", Array)
], SmsSettingsDto.prototype, "phoneNumbers", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to include media in SMS' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], SmsSettingsDto.prototype, "includeMedia", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Preferred SMS provider' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], SmsSettingsDto.prototype, "provider", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to use URL shortening in SMS' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], SmsSettingsDto.prototype, "useUrlShortening", void 0);
class PushSettingsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { deviceTokens: { required: false, type: () => [String] }, sound: { required: false, type: () => Boolean }, badge: { required: false, type: () => Boolean }, useRichNotifications: { required: false, type: () => Boolean }, soundName: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ type: [String], description: 'Device tokens for push notifications' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMaxSize)(10),
    __metadata("design:type", Array)
], PushSettingsDto.prototype, "deviceTokens", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to play sound with push notifications' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], PushSettingsDto.prototype, "sound", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to show badge count' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], PushSettingsDto.prototype, "badge", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to use rich notifications' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], PushSettingsDto.prototype, "useRichNotifications", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Custom notification sound name' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], PushSettingsDto.prototype, "soundName", void 0);
class InAppSettingsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { showBadge: { required: false, type: () => Boolean }, playSound: { required: false, type: () => Boolean }, markAsRead: { required: false, type: () => Boolean }, showDesktopNotifications: { required: false, type: () => Boolean }, maxUnreadCount: { required: false, type: () => Number, minimum: 1, maximum: 100 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to show badge count' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], InAppSettingsDto.prototype, "showBadge", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to play sound' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], InAppSettingsDto.prototype, "playSound", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to mark as read when opened' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], InAppSettingsDto.prototype, "markAsRead", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to show desktop notifications' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], InAppSettingsDto.prototype, "showDesktopNotifications", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Maximum number of unread notifications to show' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNumber)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(100),
    __metadata("design:type", Number)
], InAppSettingsDto.prototype, "maxUnreadCount", void 0);
class WhatsappSettingsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { numbers: { required: false, type: () => [String] }, allowMedia: { required: false, type: () => Boolean }, language: { required: false, type: () => String }, templateNamespace: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ type: [String], description: 'WhatsApp numbers' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(undefined, { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMaxSize)(2),
    __metadata("design:type", Array)
], WhatsappSettingsDto.prototype, "numbers", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to allow media messages' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], WhatsappSettingsDto.prototype, "allowMedia", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Language preference for WhatsApp messages' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], WhatsappSettingsDto.prototype, "language", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Template namespace for business accounts' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], WhatsappSettingsDto.prototype, "templateNamespace", void 0);
class SlackSettingsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { channels: { required: false, type: () => [String] }, mentionUser: { required: false, type: () => Boolean }, workspaceId: { required: false, type: () => String }, useThreads: { required: false, type: () => Boolean } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ type: [String], description: 'Slack channel names' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMaxSize)(5),
    __metadata("design:type", Array)
], SlackSettingsDto.prototype, "channels", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to mention user in messages' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], SlackSettingsDto.prototype, "mentionUser", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Slack workspace ID' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], SlackSettingsDto.prototype, "workspaceId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Use thread replies for updates' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], SlackSettingsDto.prototype, "useThreads", void 0);
class TeamsSettingsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { channelIds: { required: false, type: () => [String] }, useAdaptiveCards: { required: false, type: () => Boolean }, showMentions: { required: false, type: () => Boolean } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ type: [String], description: 'Teams channel IDs' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMaxSize)(5),
    __metadata("design:type", Array)
], TeamsSettingsDto.prototype, "channelIds", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to use adaptive cards' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], TeamsSettingsDto.prototype, "useAdaptiveCards", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Whether to show user mentions' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], TeamsSettingsDto.prototype, "showMentions", void 0);
class WebhookSettingsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { url: { required: false, type: () => String }, secret: { required: false, type: () => String }, headers: { required: false, type: () => Object }, retryConfig: { required: false, type: () => (__webpack_require__(/*! ./channel-settings.dto */ "./src/modules/notifications/dto/channel-settings.dto.ts").WebhookRetryConfigDto) } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Webhook URL' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUrl)(),
    __metadata("design:type", String)
], WebhookSettingsDto.prototype, "url", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Secret key for webhook authentication' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], WebhookSettingsDto.prototype, "secret", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Custom headers for webhook requests' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], WebhookSettingsDto.prototype, "headers", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Retry configuration for failed webhooks' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => WebhookRetryConfigDto),
    __metadata("design:type", WebhookRetryConfigDto)
], WebhookSettingsDto.prototype, "retryConfig", void 0);
class WebhookRetryConfigDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { maxAttempts: { required: false, type: () => Number, minimum: 0, maximum: 5 }, retryDelay: { required: false, type: () => Number, minimum: 1, maximum: 300 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Maximum number of retry attempts' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNumber)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(5),
    __metadata("design:type", Number)
], WebhookRetryConfigDto.prototype, "maxAttempts", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Delay between retry attempts in seconds' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNumber)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(300),
    __metadata("design:type", Number)
], WebhookRetryConfigDto.prototype, "retryDelay", void 0);
class ChannelSettingsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { email: { required: false, type: () => (__webpack_require__(/*! ./channel-settings.dto */ "./src/modules/notifications/dto/channel-settings.dto.ts").EmailSettingsDto) }, sms: { required: false, type: () => (__webpack_require__(/*! ./channel-settings.dto */ "./src/modules/notifications/dto/channel-settings.dto.ts").SmsSettingsDto) }, push: { required: false, type: () => (__webpack_require__(/*! ./channel-settings.dto */ "./src/modules/notifications/dto/channel-settings.dto.ts").PushSettingsDto) }, inApp: { required: false, type: () => (__webpack_require__(/*! ./channel-settings.dto */ "./src/modules/notifications/dto/channel-settings.dto.ts").InAppSettingsDto) }, whatsapp: { required: false, type: () => (__webpack_require__(/*! ./channel-settings.dto */ "./src/modules/notifications/dto/channel-settings.dto.ts").WhatsappSettingsDto) }, slack: { required: false, type: () => (__webpack_require__(/*! ./channel-settings.dto */ "./src/modules/notifications/dto/channel-settings.dto.ts").SlackSettingsDto) }, teams: { required: false, type: () => (__webpack_require__(/*! ./channel-settings.dto */ "./src/modules/notifications/dto/channel-settings.dto.ts").TeamsSettingsDto) }, webhook: { required: false, type: () => (__webpack_require__(/*! ./channel-settings.dto */ "./src/modules/notifications/dto/channel-settings.dto.ts").WebhookSettingsDto) } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => EmailSettingsDto),
    __metadata("design:type", EmailSettingsDto)
], ChannelSettingsDto.prototype, "email", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => SmsSettingsDto),
    __metadata("design:type", SmsSettingsDto)
], ChannelSettingsDto.prototype, "sms", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => PushSettingsDto),
    __metadata("design:type", PushSettingsDto)
], ChannelSettingsDto.prototype, "push", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => InAppSettingsDto),
    __metadata("design:type", InAppSettingsDto)
], ChannelSettingsDto.prototype, "inApp", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => WhatsappSettingsDto),
    __metadata("design:type", WhatsappSettingsDto)
], ChannelSettingsDto.prototype, "whatsapp", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => SlackSettingsDto),
    __metadata("design:type", SlackSettingsDto)
], ChannelSettingsDto.prototype, "slack", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => TeamsSettingsDto),
    __metadata("design:type", TeamsSettingsDto)
], ChannelSettingsDto.prototype, "teams", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => WebhookSettingsDto),
    __metadata("design:type", WebhookSettingsDto)
], ChannelSettingsDto.prototype, "webhook", void 0);


/***/ }),

/***/ "./src/modules/notifications/dto/create-notification.dto.ts":
/*!******************************************************************!*\
  !*** ./src/modules/notifications/dto/create-notification.dto.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateNotificationDto: () => (/* binding */ CreateNotificationDto),
/* harmony export */   NotificationAction: () => (/* binding */ NotificationAction),
/* harmony export */   NotificationChannel: () => (/* binding */ NotificationChannel),
/* harmony export */   NotificationPriority: () => (/* binding */ NotificationPriority),
/* harmony export */   NotificationRecipient: () => (/* binding */ NotificationRecipient),
/* harmony export */   NotificationType: () => (/* binding */ NotificationType)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var NotificationType;
(function (NotificationType) {
    NotificationType["SYSTEM"] = "SYSTEM";
    NotificationType["APPOINTMENT"] = "APPOINTMENT";
    NotificationType["MESSAGE"] = "MESSAGE";
    NotificationType["TASK"] = "TASK";
    NotificationType["ALERT"] = "ALERT";
    NotificationType["REMINDER"] = "REMINDER";
    NotificationType["DOCUMENT"] = "DOCUMENT";
    NotificationType["TICKET_ESCALATED"] = "TICKET_ESCALATED";
})(NotificationType || (NotificationType = {}));
var NotificationPriority;
(function (NotificationPriority) {
    NotificationPriority["LOW"] = "LOW";
    NotificationPriority["NORMAL"] = "NORMAL";
    NotificationPriority["MEDIUM"] = "MEDIUM";
    NotificationPriority["HIGH"] = "HIGH";
    NotificationPriority["URGENT"] = "URGENT";
})(NotificationPriority || (NotificationPriority = {}));
var NotificationChannel;
(function (NotificationChannel) {
    NotificationChannel["IN_APP"] = "IN_APP";
    NotificationChannel["EMAIL"] = "EMAIL";
    NotificationChannel["SMS"] = "SMS";
    NotificationChannel["PUSH"] = "PUSH";
    NotificationChannel["WEBHOOK"] = "WEBHOOK";
    NotificationChannel["SLACK"] = "SLACK";
    NotificationChannel["WHATSAPP"] = "WHATSAPP";
})(NotificationChannel || (NotificationChannel = {}));
class NotificationAction {
    static _OPENAPI_METADATA_FACTORY() {
        return { label: { required: true, type: () => String }, url: { required: true, type: () => String }, method: { required: false, type: () => Object }, data: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], NotificationAction.prototype, "label", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], NotificationAction.prototype, "url", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], NotificationAction.prototype, "method", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], NotificationAction.prototype, "data", void 0);
class NotificationRecipient {
    static _OPENAPI_METADATA_FACTORY() {
        return { userId: { required: true, type: () => String }, role: { required: true, type: () => String }, organizationId: { required: false, type: () => String }, channels: { required: false, enum: (__webpack_require__(/*! ./create-notification.dto */ "./src/modules/notifications/dto/create-notification.dto.ts").NotificationChannel), isArray: true }, metadata: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], NotificationRecipient.prototype, "userId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(NotificationChannel, { each: true }),
    __metadata("design:type", Array)
], NotificationRecipient.prototype, "channels", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], NotificationRecipient.prototype, "metadata", void 0);
class CreateNotificationDto {
    constructor() {
        this.priority = NotificationPriority.NORMAL;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { type: { required: true, enum: (__webpack_require__(/*! ./create-notification.dto */ "./src/modules/notifications/dto/create-notification.dto.ts").NotificationType) }, title: { required: true, type: () => String, maxLength: 200 }, content: { required: true, type: () => String, maxLength: 1000 }, priority: { required: false, default: NotificationPriority.NORMAL, enum: (__webpack_require__(/*! ./create-notification.dto */ "./src/modules/notifications/dto/create-notification.dto.ts").NotificationPriority) }, recipients: { required: true, type: () => [(__webpack_require__(/*! ./create-notification.dto */ "./src/modules/notifications/dto/create-notification.dto.ts").NotificationRecipient)] }, actions: { required: false, type: () => [(__webpack_require__(/*! ./create-notification.dto */ "./src/modules/notifications/dto/create-notification.dto.ts").NotificationAction)] }, scheduledFor: { required: false, type: () => String }, expiresAt: { required: false, type: () => String }, requireConfirmation: { required: false, type: () => Boolean }, data: { required: false, type: () => Object }, channels: { required: false, enum: (__webpack_require__(/*! ./create-notification.dto */ "./src/modules/notifications/dto/create-notification.dto.ts").NotificationChannel), isArray: true }, category: { required: false, type: () => String, maxLength: 100 }, groupId: { required: false, type: () => String, maxLength: 100 }, referenceId: { required: false, type: () => String }, referenceType: { required: false, type: () => String, maxLength: 50 }, silent: { required: false, type: () => Boolean }, organizationId: { required: true, type: () => String }, senderId: { required: false, type: () => String }, metadata: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ enum: NotificationType }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(NotificationType),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(200),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "title", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(1000),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "content", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: NotificationPriority }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(NotificationPriority),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "priority", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)({ each: true }),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => NotificationRecipient),
    __metadata("design:type", Array)
], CreateNotificationDto.prototype, "recipients", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)({ each: true }),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => NotificationAction),
    __metadata("design:type", Array)
], CreateNotificationDto.prototype, "actions", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsISO8601)(),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "scheduledFor", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsISO8601)(),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "expiresAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateNotificationDto.prototype, "requireConfirmation", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], CreateNotificationDto.prototype, "data", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(NotificationChannel, { each: true }),
    __metadata("design:type", Array)
], CreateNotificationDto.prototype, "channels", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "category", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "groupId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "referenceId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "referenceType", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateNotificationDto.prototype, "silent", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "organizationId", void 0);


/***/ }),

/***/ "./src/modules/notifications/dto/notification-preferences.dto.ts":
/*!***********************************************************************!*\
  !*** ./src/modules/notifications/dto/notification-preferences.dto.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateNotificationPreferenceDto: () => (/* binding */ CreateNotificationPreferenceDto),
/* harmony export */   NotificationPreferencesDto: () => (/* binding */ NotificationPreferencesDto),
/* harmony export */   UpdateNotificationPreferenceDto: () => (/* binding */ UpdateNotificationPreferenceDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts");
/* harmony import */ var _channel_settings_dto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./channel-settings.dto */ "./src/modules/notifications/dto/channel-settings.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






class NotificationPreferencesDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { category: { required: true, enum: (__webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationCategory) }, channels: { required: true, enum: (__webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationChannel), isArray: true }, frequency: { required: true, enum: (__webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationFrequency) }, enabled: { required: false, type: () => Boolean }, startTime: { required: false, type: () => String }, endTime: { required: false, type: () => String }, workDays: { required: false, type: () => [String] }, customSchedule: { required: false, type: () => ({ days: { required: true, type: () => [String] }, times: { required: true, type: () => [String] }, timezone: { required: true, type: () => String } }) }, channelSpecificSettings: { required: false, type: () => (__webpack_require__(/*! ./channel-settings.dto */ "./src/modules/notifications/dto/channel-settings.dto.ts").ChannelSettingsDto) }, filters: { required: false, type: () => ({ priority: { required: false, type: () => [String] }, status: { required: false, type: () => [String] }, types: { required: false, type: () => [String] }, senders: { required: false, type: () => [String] }, keywords: { required: false, type: () => [String] }, excludeKeywords: { required: false, type: () => [String] } }) }, importanceThreshold: { required: false, type: () => Number }, muteAll: { required: false, type: () => Boolean }, muteUntil: { required: false, type: () => Date }, digestSettings: { required: false, type: () => ({ groupBy: { required: false, type: () => [String] }, sortBy: { required: false, type: () => String }, maxItems: { required: false, type: () => Number }, format: { required: false, type: () => String } }) }, allowReminders: { required: false, type: () => Boolean }, reminderInterval: { required: false, type: () => Number }, maxReminders: { required: false, type: () => Number }, enabledChannels: { required: true, enum: (__webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationChannel), isArray: true } };
    }
}
__decorate([
    Column({
        type: 'enum',
        enum: _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel,
        array: true,
        default: [_entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel.EMAIL, _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel.IN_APP]
    }),
    __metadata("design:type", Array)
], NotificationPreferencesDto.prototype, "enabledChannels", void 0);
class CreateNotificationPreferenceDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { category: { required: true, enum: (__webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationCategory) }, channels: { required: true, enum: (__webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationChannel), isArray: true }, frequency: { required: true, enum: (__webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationFrequency) }, enabled: { required: false, type: () => Boolean }, startTime: { required: false, type: () => String, pattern: "/^([01]\\d|2[0-3]):([0-5]\\d)$/" }, endTime: { required: false, type: () => String, pattern: "/^([01]\\d|2[0-3]):([0-5]\\d)$/" }, workDays: { required: false, type: () => [String] }, customSchedule: { required: false, type: () => ({ days: { required: true, type: () => [String] }, times: { required: true, type: () => [String] }, timezone: { required: true, type: () => String } }) }, channelSpecificSettings: { required: false, type: () => (__webpack_require__(/*! ./channel-settings.dto */ "./src/modules/notifications/dto/channel-settings.dto.ts").ChannelSettingsDto) }, filters: { required: false, type: () => ({ priority: { required: false, type: () => [String] }, status: { required: false, type: () => [String] }, types: { required: false, type: () => [String] }, senders: { required: false, type: () => [String] }, keywords: { required: false, type: () => [String] }, excludeKeywords: { required: false, type: () => [String] } }) }, importanceThreshold: { required: false, type: () => Number, minimum: 0, maximum: 100 }, muteAll: { required: false, type: () => Boolean }, muteUntil: { required: false, type: () => Date }, digestSettings: { required: false, type: () => ({ groupBy: { required: false, type: () => [String] }, sortBy: { required: false, type: () => String }, maxItems: { required: false, type: () => Number }, format: { required: false, type: () => String } }) }, allowReminders: { required: false, type: () => Boolean }, reminderInterval: { required: false, type: () => Number, minimum: 1 }, maxReminders: { required: false, type: () => Number, minimum: 0, maximum: 10 }, metadata: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ enum: _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationCategory }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationCategory),
    __metadata("design:type", String)
], CreateNotificationPreferenceDto.prototype, "category", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ enum: _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel, isArray: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel, { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMinSize)(1),
    __metadata("design:type", Array)
], CreateNotificationPreferenceDto.prototype, "channels", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ enum: _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationFrequency }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationFrequency),
    __metadata("design:type", String)
], CreateNotificationPreferenceDto.prototype, "frequency", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateNotificationPreferenceDto.prototype, "enabled", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Matches)(/^([01]\d|2[0-3]):([0-5]\d)$/, {
        message: 'Start time must be in HH:mm format'
    }),
    __metadata("design:type", String)
], CreateNotificationPreferenceDto.prototype, "startTime", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Matches)(/^([01]\d|2[0-3]):([0-5]\d)$/, {
        message: 'End time must be in HH:mm format'
    }),
    __metadata("design:type", String)
], CreateNotificationPreferenceDto.prototype, "endTime", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ type: [String] }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], CreateNotificationPreferenceDto.prototype, "workDays", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => CustomScheduleDto),
    __metadata("design:type", Object)
], CreateNotificationPreferenceDto.prototype, "customSchedule", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => _channel_settings_dto__WEBPACK_IMPORTED_MODULE_4__.ChannelSettingsDto),
    __metadata("design:type", _channel_settings_dto__WEBPACK_IMPORTED_MODULE_4__.ChannelSettingsDto)
], CreateNotificationPreferenceDto.prototype, "channelSpecificSettings", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => NotificationFiltersDto),
    __metadata("design:type", Object)
], CreateNotificationPreferenceDto.prototype, "filters", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(100),
    __metadata("design:type", Number)
], CreateNotificationPreferenceDto.prototype, "importanceThreshold", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateNotificationPreferenceDto.prototype, "muteAll", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDateString)(),
    __metadata("design:type", Date)
], CreateNotificationPreferenceDto.prototype, "muteUntil", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => DigestSettingsDto),
    __metadata("design:type", Object)
], CreateNotificationPreferenceDto.prototype, "digestSettings", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateNotificationPreferenceDto.prototype, "allowReminders", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    __metadata("design:type", Number)
], CreateNotificationPreferenceDto.prototype, "reminderInterval", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(10),
    __metadata("design:type", Number)
], CreateNotificationPreferenceDto.prototype, "maxReminders", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], CreateNotificationPreferenceDto.prototype, "metadata", void 0);
class CustomScheduleDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { days: { required: true, type: () => [String] }, times: { required: true, type: () => [String], pattern: "/^([01]\\d|2[0-3]):([0-5]\\d)$/" }, timezone: { required: true, type: () => String } };
    }
}
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], CustomScheduleDto.prototype, "days", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Matches)(/^([01]\d|2[0-3]):([0-5]\d)$/, {
        message: 'Times must be in HH:mm format',
        each: true
    }),
    __metadata("design:type", Array)
], CustomScheduleDto.prototype, "times", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], CustomScheduleDto.prototype, "timezone", void 0);
class NotificationFiltersDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { priority: { required: false, type: () => [String] }, status: { required: false, type: () => [String] }, types: { required: false, type: () => [String] }, senders: { required: false, type: () => [String] }, keywords: { required: false, type: () => [String] }, excludeKeywords: { required: false, type: () => [String] } };
    }
}
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], NotificationFiltersDto.prototype, "priority", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], NotificationFiltersDto.prototype, "status", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], NotificationFiltersDto.prototype, "types", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], NotificationFiltersDto.prototype, "senders", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], NotificationFiltersDto.prototype, "keywords", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], NotificationFiltersDto.prototype, "excludeKeywords", void 0);
class DigestSettingsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { groupBy: { required: false, type: () => [String] }, sortBy: { required: false, type: () => String }, maxItems: { required: false, type: () => Number, minimum: 1 }, format: { required: false, type: () => String } };
    }
}
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], DigestSettingsDto.prototype, "groupBy", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], DigestSettingsDto.prototype, "sortBy", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    __metadata("design:type", Number)
], DigestSettingsDto.prototype, "maxItems", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], DigestSettingsDto.prototype, "format", void 0);
class UpdateNotificationPreferenceDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { category: { required: false, enum: (__webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationCategory) }, channels: { required: false, enum: (__webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationChannel), isArray: true }, frequency: { required: false, enum: (__webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationFrequency) }, enabled: { required: false, type: () => Boolean }, startTime: { required: false, type: () => String, pattern: "/^([01]\\d|2[0-3]):([0-5]\\d)$/" }, endTime: { required: false, type: () => String, pattern: "/^([01]\\d|2[0-3]):([0-5]\\d)$/" }, workDays: { required: false, type: () => [String] }, customSchedule: { required: false, type: () => ({ days: { required: true, type: () => [String] }, times: { required: true, type: () => [String] }, timezone: { required: true, type: () => String } }) }, channelSpecificSettings: { required: false, type: () => (__webpack_require__(/*! ./channel-settings.dto */ "./src/modules/notifications/dto/channel-settings.dto.ts").ChannelSettingsDto) }, filters: { required: false, type: () => ({ priority: { required: false, type: () => [String] }, status: { required: false, type: () => [String] }, types: { required: false, type: () => [String] }, senders: { required: false, type: () => [String] }, keywords: { required: false, type: () => [String] }, excludeKeywords: { required: false, type: () => [String] } }) }, importanceThreshold: { required: false, type: () => Number, minimum: 0, maximum: 100 }, muteAll: { required: false, type: () => Boolean }, muteUntil: { required: false, type: () => Date }, digestSettings: { required: false, type: () => ({ groupBy: { required: false, type: () => [String] }, sortBy: { required: false, type: () => String }, maxItems: { required: false, type: () => Number }, format: { required: false, type: () => String } }) }, allowReminders: { required: false, type: () => Boolean }, reminderInterval: { required: false, type: () => Number, minimum: 1 }, maxReminders: { required: false, type: () => Number, minimum: 0, maximum: 10 }, metadata: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationCategory }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationCategory),
    __metadata("design:type", String)
], UpdateNotificationPreferenceDto.prototype, "category", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel, isArray: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel, { each: true }),
    __metadata("design:type", Array)
], UpdateNotificationPreferenceDto.prototype, "channels", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationFrequency }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationFrequency),
    __metadata("design:type", String)
], UpdateNotificationPreferenceDto.prototype, "frequency", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateNotificationPreferenceDto.prototype, "enabled", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Matches)(/^([01]\d|2[0-3]):([0-5]\d)$/, {
        message: 'Start time must be in HH:mm format'
    }),
    __metadata("design:type", String)
], UpdateNotificationPreferenceDto.prototype, "startTime", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Matches)(/^([01]\d|2[0-3]):([0-5]\d)$/, {
        message: 'End time must be in HH:mm format'
    }),
    __metadata("design:type", String)
], UpdateNotificationPreferenceDto.prototype, "endTime", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ type: [String] }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], UpdateNotificationPreferenceDto.prototype, "workDays", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => CustomScheduleDto),
    __metadata("design:type", Object)
], UpdateNotificationPreferenceDto.prototype, "customSchedule", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => _channel_settings_dto__WEBPACK_IMPORTED_MODULE_4__.ChannelSettingsDto),
    __metadata("design:type", _channel_settings_dto__WEBPACK_IMPORTED_MODULE_4__.ChannelSettingsDto)
], UpdateNotificationPreferenceDto.prototype, "channelSpecificSettings", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => NotificationFiltersDto),
    __metadata("design:type", Object)
], UpdateNotificationPreferenceDto.prototype, "filters", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(100),
    __metadata("design:type", Number)
], UpdateNotificationPreferenceDto.prototype, "importanceThreshold", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateNotificationPreferenceDto.prototype, "muteAll", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDateString)(),
    __metadata("design:type", Date)
], UpdateNotificationPreferenceDto.prototype, "muteUntil", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => DigestSettingsDto),
    __metadata("design:type", Object)
], UpdateNotificationPreferenceDto.prototype, "digestSettings", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateNotificationPreferenceDto.prototype, "allowReminders", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    __metadata("design:type", Number)
], UpdateNotificationPreferenceDto.prototype, "reminderInterval", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(10),
    __metadata("design:type", Number)
], UpdateNotificationPreferenceDto.prototype, "maxReminders", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], UpdateNotificationPreferenceDto.prototype, "metadata", void 0);
function Column(arg0) {
    throw new Error('Function not implemented.');
}


/***/ }),

/***/ "./src/modules/notifications/dto/notification-query.dto.ts":
/*!*****************************************************************!*\
  !*** ./src/modules/notifications/dto/notification-query.dto.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DateRangeDto: () => (/* binding */ DateRangeDto),
/* harmony export */   NotificationQueryDto: () => (/* binding */ NotificationQueryDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





class DateRangeDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { startDate: { required: false, type: () => String }, endDate: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Start date for the range' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDateString)(),
    __metadata("design:type", String)
], DateRangeDto.prototype, "startDate", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'End date for the range' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDateString)(),
    __metadata("design:type", String)
], DateRangeDto.prototype, "endDate", void 0);
class NotificationQueryDto {
    constructor() {
        this.page = 1;
        this.limit = 10;
        this.sortBy = 'createdAt';
        this.sortOrder = 'DESC';
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { skip: { required: false, type: () => Number }, take: { required: false, type: () => Number }, includeRead: { required: false, type: () => Boolean }, categories: { required: false, enum: (__webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationCategory), isArray: true }, userId: { required: false, type: () => String }, organizationId: { required: false, type: () => String }, channels: { required: false, enum: (__webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationChannel), isArray: true }, isRead: { required: false, type: () => Boolean }, isArchived: { required: false, type: () => Boolean }, userIds: { required: false, type: () => [String] }, status: { required: false, type: () => String }, recipientIds: { required: false, type: () => [String] }, type: { required: false, type: () => String }, read: { required: false, type: () => Boolean }, priority: { required: false, type: () => String }, startDate: { required: false, type: () => Date }, endDate: { required: false, type: () => Date }, senderIds: { required: false, type: () => [String] }, dateRange: { required: false, type: () => (__webpack_require__(/*! ./notification-query.dto */ "./src/modules/notifications/dto/notification-query.dto.ts").DateRangeDto) }, priorities: { required: false, type: () => [String] }, statuses: { required: false, type: () => [String] }, tags: { required: false, type: () => [String] }, isActionable: { required: false, type: () => Boolean }, isActionTaken: { required: false, type: () => Boolean }, includeDeleted: { required: false, type: () => Boolean }, groupBy: { required: false, type: () => String }, page: { required: false, type: () => Number, default: 1, minimum: 1 }, limit: { required: false, type: () => Number, default: 10, minimum: 1, maximum: 100 }, sortBy: { required: false, type: () => String, default: "createdAt" }, sortOrder: { required: false, type: () => Object, default: "DESC" }, templateIds: { required: false, type: () => [String] }, deliveryStatuses: { required: false, type: () => [String] }, hasAttachments: { required: false, type: () => Boolean }, sources: { required: false, type: () => [String] }, includeMetadata: { required: false, type: () => Boolean }, includeReadReceipts: { required: false, type: () => Boolean }, importanceLevel: { required: false, type: () => Number, minimum: 1, maximum: 5 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Search term for notification content' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", Number)
], NotificationQueryDto.prototype, "skip", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationCategory, isArray: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationCategory, { each: true }),
    __metadata("design:type", Array)
], NotificationQueryDto.prototype, "categories", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel, isArray: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel, { each: true }),
    __metadata("design:type", Array)
], NotificationQueryDto.prototype, "channels", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by read status' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationQueryDto.prototype, "isRead", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by archived status' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationQueryDto.prototype, "isArchived", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by specific user IDs' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4', { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMaxSize)(50),
    __metadata("design:type", Array)
], NotificationQueryDto.prototype, "userIds", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by specific recipient IDs' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4', { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMaxSize)(50),
    __metadata("design:type", String)
], NotificationQueryDto.prototype, "status", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by specific sender IDs' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4', { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMaxSize)(50),
    __metadata("design:type", Array)
], NotificationQueryDto.prototype, "senderIds", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => DateRangeDto),
    __metadata("design:type", DateRangeDto)
], NotificationQueryDto.prototype, "dateRange", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by priority levels' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMaxSize)(10),
    __metadata("design:type", Array)
], NotificationQueryDto.prototype, "priorities", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by status types' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMaxSize)(10),
    __metadata("design:type", Array)
], NotificationQueryDto.prototype, "statuses", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by specific tags' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ArrayMaxSize)(20),
    __metadata("design:type", Array)
], NotificationQueryDto.prototype, "tags", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by actionable status' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationQueryDto.prototype, "isActionable", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by action taken status' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationQueryDto.prototype, "isActionTaken", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Include deleted notifications' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationQueryDto.prototype, "includeDeleted", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Group results by field' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], NotificationQueryDto.prototype, "groupBy", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Page number', minimum: 1 }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    __metadata("design:type", Number)
], NotificationQueryDto.prototype, "page", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Items per page', minimum: 1, maximum: 100 }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(100),
    __metadata("design:type", Number)
], NotificationQueryDto.prototype, "limit", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Sort field' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], NotificationQueryDto.prototype, "sortBy", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Sort order', enum: ['ASC', 'DESC'] }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(['ASC', 'DESC']),
    __metadata("design:type", String)
], NotificationQueryDto.prototype, "sortOrder", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by specific template IDs' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4', { each: true }),
    __metadata("design:type", Array)
], NotificationQueryDto.prototype, "templateIds", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by delivery status' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], NotificationQueryDto.prototype, "deliveryStatuses", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Include only notifications with attachments' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationQueryDto.prototype, "hasAttachments", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by specific source systems' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], NotificationQueryDto.prototype, "sources", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Include metadata in response' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationQueryDto.prototype, "includeMetadata", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Include read receipts in response' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationQueryDto.prototype, "includeReadReceipts", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by importance level', minimum: 1, maximum: 5 }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(5),
    __metadata("design:type", Number)
], NotificationQueryDto.prototype, "importanceLevel", void 0);


/***/ }),

/***/ "./src/modules/notifications/dto/update-notification.dto.ts":
/*!******************************************************************!*\
  !*** ./src/modules/notifications/dto/update-notification.dto.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NotificationStatus: () => (/* binding */ NotificationStatus),
/* harmony export */   UpdateNotificationDto: () => (/* binding */ UpdateNotificationDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _create_notification_dto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./create-notification.dto */ "./src/modules/notifications/dto/create-notification.dto.ts");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var NotificationStatus;
(function (NotificationStatus) {
    NotificationStatus["SCHEDULED"] = "SCHEDULED";
    NotificationStatus["PENDING"] = "PENDING";
    NotificationStatus["SENT"] = "SENT";
    NotificationStatus["DELIVERED"] = "DELIVERED";
    NotificationStatus["READ"] = "READ";
    NotificationStatus["FAILED"] = "FAILED";
    NotificationStatus["CANCELLED"] = "CANCELLED";
    NotificationStatus["EXPIRED"] = "EXPIRED";
    NotificationStatus["PROCESSING"] = "PROCESSING";
    NotificationStatus["RETRY_PENDING"] = "RETRY_PENDING";
})(NotificationStatus || (NotificationStatus = {}));
class UpdateNotificationDto extends (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.PartialType)((0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.OmitType)(_create_notification_dto__WEBPACK_IMPORTED_MODULE_1__.CreateNotificationDto, ['type', 'recipients'])) {
    static _OPENAPI_METADATA_FACTORY() {
        return { status: { required: false, enum: (__webpack_require__(/*! ./update-notification.dto */ "./src/modules/notifications/dto/update-notification.dto.ts").NotificationStatus) }, isDeleted: { required: false, type: () => Boolean }, read: { required: false, type: () => Boolean } };
    }
}
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsEnum)(NotificationStatus),
    __metadata("design:type", String)
], UpdateNotificationDto.prototype, "status", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateNotificationDto.prototype, "read", void 0);


/***/ }),

/***/ "./src/modules/notifications/entities/email-log.entity.ts":
/*!****************************************************************!*\
  !*** ./src/modules/notifications/entities/email-log.entity.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EmailLog: () => (/* binding */ EmailLog)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _enums_email_status_enum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/email-status.enum */ "./src/modules/notifications/enums/email-status.enum.ts");
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _email_template_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./email-template.entity */ "./src/modules/notifications/entities/email-template.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





let EmailLog = class EmailLog {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, templateId: { required: true, type: () => String }, template: { required: true, type: () => (__webpack_require__(/*! ./email-template.entity */ "./src/modules/notifications/entities/email-template.entity.ts").EmailTemplate) }, recipient: { required: true, type: () => String }, subject: { required: true, type: () => String }, htmlContent: { required: true, type: () => String }, textContent: { required: true, type: () => String }, metadata: { required: true, type: () => Object }, status: { required: true, enum: (__webpack_require__(/*! ../enums/email-status.enum */ "./src/modules/notifications/enums/email-status.enum.ts").EmailStatus) }, error: { required: true, type: () => String }, messageId: { required: true, type: () => String }, providerResponse: { required: true, type: () => String }, createdAt: { required: true, type: () => Date }, sentAt: { required: true, type: () => Date }, deliveredAt: { required: true, type: () => Date }, openedAt: { required: true, type: () => Date }, clickedAt: { required: true, type: () => Date } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], EmailLog.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], EmailLog.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization)
], EmailLog.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], EmailLog.prototype, "templateId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _email_template_entity__WEBPACK_IMPORTED_MODULE_4__.EmailTemplate),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'templateId' }),
    __metadata("design:type", _email_template_entity__WEBPACK_IMPORTED_MODULE_4__.EmailTemplate)
], EmailLog.prototype, "template", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], EmailLog.prototype, "recipient", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], EmailLog.prototype, "subject", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { nullable: true }),
    __metadata("design:type", String)
], EmailLog.prototype, "htmlContent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { nullable: true }),
    __metadata("design:type", String)
], EmailLog.prototype, "textContent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], EmailLog.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _enums_email_status_enum__WEBPACK_IMPORTED_MODULE_2__.EmailStatus,
        default: _enums_email_status_enum__WEBPACK_IMPORTED_MODULE_2__.EmailStatus.PENDING
    }),
    __metadata("design:type", String)
], EmailLog.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], EmailLog.prototype, "error", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], EmailLog.prototype, "messageId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], EmailLog.prototype, "providerResponse", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], EmailLog.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], EmailLog.prototype, "sentAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], EmailLog.prototype, "deliveredAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], EmailLog.prototype, "openedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], EmailLog.prototype, "clickedAt", void 0);
EmailLog = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('email_logs')
], EmailLog);



/***/ }),

/***/ "./src/modules/notifications/entities/email-queue.entity.ts":
/*!******************************************************************!*\
  !*** ./src/modules/notifications/entities/email-queue.entity.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EmailQueue: () => (/* binding */ EmailQueue)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _enums_email_status_enum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/email-status.enum */ "./src/modules/notifications/enums/email-status.enum.ts");
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _email_template_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./email-template.entity */ "./src/modules/notifications/entities/email-template.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





let EmailQueue = class EmailQueue {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, priority: { required: true, type: () => Number }, attempts: { required: true, type: () => Number }, maxAttempts: { required: true, type: () => Number }, lastError: { required: true, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, sentAt: { required: true, type: () => Date }, data: { required: true, type: () => Object }, organizationId: { required: true, type: () => String }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, templateId: { required: true, type: () => String }, template: { required: true, type: () => (__webpack_require__(/*! ./email-template.entity */ "./src/modules/notifications/entities/email-template.entity.ts").EmailTemplate) }, recipient: { required: true, type: () => String }, subject: { required: true, type: () => String }, htmlContent: { required: true, type: () => String }, textContent: { required: true, type: () => String }, variables: { required: true, type: () => Object }, metadata: { required: true, type: () => Object }, status: { required: true, enum: (__webpack_require__(/*! ../enums/email-status.enum */ "./src/modules/notifications/enums/email-status.enum.ts").EmailStatus) }, scheduledFor: { required: true, type: () => Date }, processedAt: { required: true, type: () => Date } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], EmailQueue.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", Number)
], EmailQueue.prototype, "priority", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", Number)
], EmailQueue.prototype, "attempts", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", Number)
], EmailQueue.prototype, "maxAttempts", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], EmailQueue.prototype, "lastError", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], EmailQueue.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], EmailQueue.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], EmailQueue.prototype, "sentAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('json'),
    __metadata("design:type", Object)
], EmailQueue.prototype, "data", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], EmailQueue.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization)
], EmailQueue.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], EmailQueue.prototype, "templateId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _email_template_entity__WEBPACK_IMPORTED_MODULE_4__.EmailTemplate),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'templateId' }),
    __metadata("design:type", _email_template_entity__WEBPACK_IMPORTED_MODULE_4__.EmailTemplate)
], EmailQueue.prototype, "template", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], EmailQueue.prototype, "recipient", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], EmailQueue.prototype, "subject", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { nullable: true }),
    __metadata("design:type", String)
], EmailQueue.prototype, "htmlContent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { nullable: true }),
    __metadata("design:type", String)
], EmailQueue.prototype, "textContent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], EmailQueue.prototype, "variables", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], EmailQueue.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _enums_email_status_enum__WEBPACK_IMPORTED_MODULE_2__.EmailStatus,
        default: _enums_email_status_enum__WEBPACK_IMPORTED_MODULE_2__.EmailStatus.PENDING
    }),
    __metadata("design:type", String)
], EmailQueue.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], EmailQueue.prototype, "scheduledFor", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], EmailQueue.prototype, "processedAt", void 0);
EmailQueue = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('email_queue')
], EmailQueue);



/***/ }),

/***/ "./src/modules/notifications/entities/email-template.entity.ts":
/*!*********************************************************************!*\
  !*** ./src/modules/notifications/entities/email-template.entity.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EmailTemplate: () => (/* binding */ EmailTemplate)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



let EmailTemplate = class EmailTemplate {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, content: { required: true, type: () => String }, type: { required: true, type: () => String }, name: { required: true, type: () => String }, subject: { required: true, type: () => String }, htmlContent: { required: true, type: () => String }, textContent: { required: true, type: () => String }, variables: { required: true, type: () => Object }, description: { required: true, type: () => String }, isActive: { required: true, type: () => Boolean }, organizationId: { required: true, type: () => String }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], EmailTemplate.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], EmailTemplate.prototype, "name", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], EmailTemplate.prototype, "subject", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text'),
    __metadata("design:type", String)
], EmailTemplate.prototype, "htmlContent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { nullable: true }),
    __metadata("design:type", String)
], EmailTemplate.prototype, "textContent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], EmailTemplate.prototype, "variables", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], EmailTemplate.prototype, "description", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: true }),
    __metadata("design:type", Boolean)
], EmailTemplate.prototype, "isActive", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], EmailTemplate.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization)
], EmailTemplate.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], EmailTemplate.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], EmailTemplate.prototype, "updatedAt", void 0);
EmailTemplate = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('email_templates')
], EmailTemplate);



/***/ }),

/***/ "./src/modules/notifications/entities/notification-preference.entity.ts":
/*!******************************************************************************!*\
  !*** ./src/modules/notifications/entities/notification-preference.entity.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NotificationCategory: () => (/* binding */ NotificationCategory),
/* harmony export */   NotificationChannel: () => (/* binding */ NotificationChannel),
/* harmony export */   NotificationFrequency: () => (/* binding */ NotificationFrequency),
/* harmony export */   NotificationPreference: () => (/* binding */ NotificationPreference)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var NotificationChannel;
(function (NotificationChannel) {
    NotificationChannel["EMAIL"] = "EMAIL";
    NotificationChannel["SMS"] = "SMS";
    NotificationChannel["PUSH"] = "PUSH";
    NotificationChannel["IN_APP"] = "IN_APP";
    NotificationChannel["WHATSAPP"] = "WHATSAPP";
    NotificationChannel["SLACK"] = "SLACK";
    NotificationChannel["WEBHOOK"] = "WEBHOOK";
})(NotificationChannel || (NotificationChannel = {}));
var NotificationCategory;
(function (NotificationCategory) {
    NotificationCategory["APPOINTMENT"] = "APPOINTMENT";
    NotificationCategory["TICKET"] = "TICKET";
    NotificationCategory["SYSTEM"] = "SYSTEM";
    NotificationCategory["SECURITY"] = "SECURITY";
    NotificationCategory["BILLING"] = "BILLING";
    NotificationCategory["MESSAGING"] = "MESSAGING";
    NotificationCategory["TASK"] = "TASK";
    NotificationCategory["REMINDER"] = "REMINDER";
    NotificationCategory["ALERT"] = "ALERT";
    NotificationCategory["NEWS"] = "NEWS";
})(NotificationCategory || (NotificationCategory = {}));
var NotificationFrequency;
(function (NotificationFrequency) {
    NotificationFrequency["IMMEDIATELY"] = "IMMEDIATELY";
    NotificationFrequency["DAILY_DIGEST"] = "DAILY_DIGEST";
    NotificationFrequency["WEEKLY_DIGEST"] = "WEEKLY_DIGEST";
    NotificationFrequency["CUSTOM"] = "CUSTOM";
    NotificationFrequency["NEVER"] = "NEVER";
})(NotificationFrequency || (NotificationFrequency = {}));
let NotificationPreference = class NotificationPreference {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, userId: { required: true, type: () => String }, category: { required: true, enum: (__webpack_require__(/*! ./notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationCategory) }, channels: { required: true, enum: (__webpack_require__(/*! ./notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationChannel), isArray: true }, enabledChannels: { required: true, enum: (__webpack_require__(/*! ./notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationChannel), isArray: true }, frequency: { required: true, enum: (__webpack_require__(/*! ./notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts").NotificationFrequency) }, enabled: { required: true, type: () => Boolean }, startTime: { required: false, type: () => String }, endTime: { required: false, type: () => String }, workDays: { required: false, type: () => [String] }, customSchedule: { required: false, type: () => ({ days: { required: true, type: () => [String] }, times: { required: true, type: () => [String] }, timezone: { required: true, type: () => String } }) }, channelSpecificSettings: { required: false, type: () => ({ email: { required: false, type: () => ({ addresses: { required: false, type: () => [String] }, format: { required: false, type: () => Object }, includeAttachments: { required: false, type: () => Boolean } }) }, sms: { required: false, type: () => ({ phoneNumbers: { required: false, type: () => [String] }, includeMedia: { required: false, type: () => Boolean } }) }, push: { required: false, type: () => ({ deviceTokens: { required: false, type: () => [String] }, sound: { required: false, type: () => Boolean }, badge: { required: false, type: () => Boolean } }) }, inApp: { required: false, type: () => ({ showBadge: { required: false, type: () => Boolean }, playSound: { required: false, type: () => Boolean }, markAsRead: { required: false, type: () => Boolean } }) }, whatsapp: { required: false, type: () => ({ numbers: { required: false, type: () => [String] }, allowMedia: { required: false, type: () => Boolean } }) }, slack: { required: false, type: () => ({ channels: { required: false, type: () => [String] }, mentionUser: { required: false, type: () => Boolean } }) } }) }, filters: { required: false, type: () => ({ priority: { required: false, type: () => [String] }, status: { required: false, type: () => [String] }, types: { required: false, type: () => [String] }, senders: { required: false, type: () => [String] }, keywords: { required: false, type: () => [String] }, excludeKeywords: { required: false, type: () => [String] } }) }, importanceThreshold: { required: true, type: () => Number }, muteAll: { required: true, type: () => Boolean }, muteUntil: { required: false, type: () => Date }, digestSettings: { required: false, type: () => ({ groupBy: { required: false, type: () => [String] }, sortBy: { required: false, type: () => String }, maxItems: { required: false, type: () => Number }, format: { required: false, type: () => String } }) }, allowReminders: { required: true, type: () => Boolean }, reminderInterval: { required: false, type: () => Number }, maxReminders: { required: true, type: () => Number }, metadata: { required: false, type: () => Object }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, deletedAt: { required: false, type: () => Date }, createdById: { required: false, type: () => String }, updatedById: { required: false, type: () => String }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, user: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, createdBy: { required: false, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, updatedBy: { required: false, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], NotificationPreference.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], NotificationPreference.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], NotificationPreference.prototype, "userId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: NotificationCategory,
    }),
    __metadata("design:type", String)
], NotificationPreference.prototype, "category", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: NotificationChannel,
        array: true,
        default: [NotificationChannel.EMAIL, NotificationChannel.IN_APP],
    }),
    __metadata("design:type", Array)
], NotificationPreference.prototype, "channels", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: NotificationChannel,
        array: true,
        default: [NotificationChannel.EMAIL, NotificationChannel.IN_APP],
    }),
    __metadata("design:type", Array)
], NotificationPreference.prototype, "enabledChannels", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: NotificationFrequency,
        default: NotificationFrequency.IMMEDIATELY,
    }),
    __metadata("design:type", String)
], NotificationPreference.prototype, "frequency", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: true }),
    __metadata("design:type", Boolean)
], NotificationPreference.prototype, "enabled", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'time', nullable: true }),
    __metadata("design:type", String)
], NotificationPreference.prototype, "startTime", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'time', nullable: true }),
    __metadata("design:type", String)
], NotificationPreference.prototype, "endTime", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { array: true, nullable: true }),
    __metadata("design:type", Array)
], NotificationPreference.prototype, "workDays", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], NotificationPreference.prototype, "customSchedule", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], NotificationPreference.prototype, "channelSpecificSettings", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], NotificationPreference.prototype, "filters", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'int', default: 0 }),
    __metadata("design:type", Number)
], NotificationPreference.prototype, "importanceThreshold", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], NotificationPreference.prototype, "muteAll", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], NotificationPreference.prototype, "muteUntil", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], NotificationPreference.prototype, "digestSettings", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: true }),
    __metadata("design:type", Boolean)
], NotificationPreference.prototype, "allowReminders", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'int', nullable: true }),
    __metadata("design:type", Number)
], NotificationPreference.prototype, "reminderInterval", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'int', default: 3 }),
    __metadata("design:type", Number)
], NotificationPreference.prototype, "maxReminders", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], NotificationPreference.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], NotificationPreference.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], NotificationPreference.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.DeleteDateColumn)(),
    __metadata("design:type", Date)
], NotificationPreference.prototype, "deletedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], NotificationPreference.prototype, "createdById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], NotificationPreference.prototype, "updatedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization)
], NotificationPreference.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'userId' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], NotificationPreference.prototype, "user", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'createdById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], NotificationPreference.prototype, "createdBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'updatedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], NotificationPreference.prototype, "updatedBy", void 0);
NotificationPreference = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('notification_preferences'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'userId']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'category']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Check)(`"startTime" < "endTime"`)
], NotificationPreference);



/***/ }),

/***/ "./src/modules/notifications/entities/notification-template.entity.ts":
/*!****************************************************************************!*\
  !*** ./src/modules/notifications/entities/notification-template.entity.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NotificationTemplate: () => (/* binding */ NotificationTemplate)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



let NotificationTemplate = class NotificationTemplate {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, name: { required: true, type: () => String }, description: { required: true, type: () => String }, subject: { required: true, type: () => String }, content: { required: true, type: () => String }, metadata: { required: true, type: () => Object }, channels: { required: true, type: () => [String] }, isActive: { required: true, type: () => Boolean }, organizationId: { required: true, type: () => String }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, variables: { required: true }, channelSpecificContent: { required: true, type: () => ({ email: { required: false, type: () => ({ htmlTemplate: { required: false, type: () => String }, plainTextTemplate: { required: false, type: () => String } }) }, sms: { required: false, type: () => ({ template: { required: true, type: () => String } }) }, push: { required: false, type: () => ({ title: { required: true, type: () => String }, body: { required: true, type: () => String } }) }, webhook: { required: false, type: () => ({ payload: { required: true, type: () => Object } }) } }) }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, lastUsedAt: { required: true, type: () => Date }, useCount: { required: true, type: () => Number } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], NotificationTemplate.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], NotificationTemplate.prototype, "name", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], NotificationTemplate.prototype, "description", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], NotificationTemplate.prototype, "subject", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text'),
    __metadata("design:type", String)
], NotificationTemplate.prototype, "content", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('json', { nullable: true }),
    __metadata("design:type", Object)
], NotificationTemplate.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('simple-array'),
    __metadata("design:type", Array)
], NotificationTemplate.prototype, "channels", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: true }),
    __metadata("design:type", Boolean)
], NotificationTemplate.prototype, "isActive", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], NotificationTemplate.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization)
], NotificationTemplate.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('json', { nullable: true }),
    __metadata("design:type", Array)
], NotificationTemplate.prototype, "variables", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('json', { nullable: true }),
    __metadata("design:type", Object)
], NotificationTemplate.prototype, "channelSpecificContent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], NotificationTemplate.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], NotificationTemplate.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], NotificationTemplate.prototype, "lastUsedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: 0 }),
    __metadata("design:type", Number)
], NotificationTemplate.prototype, "useCount", void 0);
NotificationTemplate = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('notification_templates')
], NotificationTemplate);



/***/ }),

/***/ "./src/modules/notifications/entities/notification.entity.ts":
/*!*******************************************************************!*\
  !*** ./src/modules/notifications/entities/notification.entity.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Notification: () => (/* binding */ Notification),
/* harmony export */   NotificationChannel: () => (/* reexport safe */ _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_2__.NotificationChannel)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dto/create-notification.dto */ "./src/modules/notifications/dto/create-notification.dto.ts");
/* harmony import */ var _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../dto/update-notification.dto */ "./src/modules/notifications/dto/update-notification.dto.ts");
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







let Notification = class Notification {
    get isRead() {
        return this.read;
    }
    get isExpired() {
        return this.expiresAt ? new Date() > this.expiresAt : false;
    }
    get isScheduled() {
        return this.scheduledFor ? new Date() < this.scheduledFor : false;
    }
    get isDelivered() {
        return !!this.deliveredAt;
    }
    get requiresAction() {
        return this.requireConfirmation && !this.read;
    }
    get failedChannels() {
        var _a;
        if (!((_a = this.deliveryDetails) === null || _a === void 0 ? void 0 : _a.channels))
            return [];
        return this.deliveryDetails.channels
            .filter(c => c.status === 'FAILED')
            .map(c => c.channel);
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, userId: { required: true, type: () => String }, type: { required: true, type: () => String }, content: { required: true, type: () => String }, metadata: { required: false, type: () => Object }, status: { required: true, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, readAt: { required: false, type: () => Date }, organizationId: { required: true, type: () => String }, senderId: { required: true, type: () => String }, title: { required: true, type: () => String }, priority: { required: true, enum: (__webpack_require__(/*! ../dto/create-notification.dto */ "./src/modules/notifications/dto/create-notification.dto.ts").NotificationPriority) }, actions: { required: false }, scheduledFor: { required: false, type: () => Date }, expiresAt: { required: false, type: () => Date }, requireConfirmation: { required: true, type: () => Boolean }, data: { required: false, type: () => Object }, channels: { required: true, enum: (__webpack_require__(/*! ../dto/create-notification.dto */ "./src/modules/notifications/dto/create-notification.dto.ts").NotificationChannel), isArray: true }, category: { required: false, type: () => String }, groupId: { required: false, type: () => String }, referenceId: { required: false, type: () => String }, referenceType: { required: false, type: () => String }, silent: { required: true, type: () => Boolean }, read: { required: true, type: () => Boolean }, deliveredAt: { required: false, type: () => Date }, deliveryDetails: { required: false, type: () => ({ attempts: { required: true, type: () => Number }, lastAttempt: { required: true, type: () => Date }, channels: { required: true }, error: { required: false, type: () => String }, timeoutAt: { required: false, type: () => Date } }) }, recipientDetails: { required: false, type: () => ({ slackUserId: { required: true, type: () => Object }, email: { required: false, type: () => String }, phone: { required: false, type: () => String }, deviceTokens: { required: false, type: () => [String] }, webhookUrl: { required: false, type: () => String } }) }, updatedById: { required: false, type: () => String }, deletedAt: { required: false, type: () => Date }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, user: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, sender: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, updatedBy: { required: false, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) } };
    }
};
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Notification.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Notification.prototype, "userId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Notification.prototype, "type", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Notification.prototype, "content", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Notification.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Notification.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], Notification.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], Notification.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Notification.prototype, "readAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Notification.prototype, "organizationId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Notification.prototype, "senderId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'enum', enum: _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_2__.NotificationType }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 200 }),
    __metadata("design:type", String)
], Notification.prototype, "title", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_2__.NotificationPriority,
        default: _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_2__.NotificationPriority.NORMAL,
    }),
    __metadata("design:type", String)
], Notification.prototype, "priority", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_3__.NotificationStatus,
        default: _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_3__.NotificationStatus.PENDING,
    }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Array)
], Notification.prototype, "actions", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], Notification.prototype, "scheduledFor", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], Notification.prototype, "expiresAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], Notification.prototype, "requireConfirmation", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Notification.prototype, "data", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'enum', enum: _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_2__.NotificationChannel, array: true }),
    __metadata("design:type", Array)
], Notification.prototype, "channels", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 100, nullable: true }),
    __metadata("design:type", String)
], Notification.prototype, "category", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 100, nullable: true }),
    __metadata("design:type", String)
], Notification.prototype, "groupId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Notification.prototype, "referenceId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 50, nullable: true }),
    __metadata("design:type", String)
], Notification.prototype, "referenceType", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], Notification.prototype, "silent", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], Notification.prototype, "read", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp', nullable: true }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], Notification.prototype, "deliveredAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Notification.prototype, "deliveryDetails", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Notification.prototype, "recipientDetails", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Notification.prototype, "updatedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.DeleteDateColumn)(),
    __metadata("design:type", Date)
], Notification.prototype, "deletedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__.Organization),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__.Organization)
], Notification.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_5__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'userId' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_5__.User)
], Notification.prototype, "user", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_5__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'senderId' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_5__.User)
], Notification.prototype, "sender", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_5__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'updatedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_5__.User)
], Notification.prototype, "updatedBy", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Notification.prototype, "isRead", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Notification.prototype, "isExpired", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Notification.prototype, "isScheduled", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Notification.prototype, "isDelivered", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Notification.prototype, "requiresAction", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Array),
    __metadata("design:paramtypes", [])
], Notification.prototype, "failedChannels", null);
Notification = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('notifications'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'userId']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'type']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'status']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'scheduledFor'])
], Notification);




/***/ }),

/***/ "./src/modules/notifications/enums/email-status.enum.ts":
/*!**************************************************************!*\
  !*** ./src/modules/notifications/enums/email-status.enum.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DomainVerificationStatus: () => (/* binding */ DomainVerificationStatus),
/* harmony export */   EmailStatus: () => (/* binding */ EmailStatus)
/* harmony export */ });
var EmailStatus;
(function (EmailStatus) {
    EmailStatus["PENDING"] = "PENDING";
    EmailStatus["SENDING"] = "SENDING";
    EmailStatus["SENT"] = "SENT";
    EmailStatus["FAILED"] = "FAILED";
    EmailStatus["DELIVERED"] = "DELIVERED";
    EmailStatus["OPENED"] = "OPENED";
    EmailStatus["CLICKED"] = "CLICKED";
    EmailStatus["BOUNCED"] = "BOUNCED";
    EmailStatus["SPAM"] = "SPAM";
    EmailStatus["UNSUBSCRIBED"] = "UNSUBSCRIBED";
    EmailStatus["QUEUED"] = "QUEUED";
})(EmailStatus || (EmailStatus = {}));
var DomainVerificationStatus;
(function (DomainVerificationStatus) {
    DomainVerificationStatus["PENDING"] = "PENDING";
    DomainVerificationStatus["VERIFIED"] = "VERIFIED";
    DomainVerificationStatus["FAILED"] = "FAILED";
    DomainVerificationStatus["EXPIRED"] = "EXPIRED";
})(DomainVerificationStatus || (DomainVerificationStatus = {}));


/***/ }),

/***/ "./src/modules/notifications/listeners/notification-delivery.listener.ts":
/*!*******************************************************************************!*\
  !*** ./src/modules/notifications/listeners/notification-delivery.listener.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NotificationDeliveryListener: () => (/* binding */ NotificationDeliveryListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_notification_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/notification.entity */ "./src/modules/notifications/entities/notification.entity.ts");
/* harmony import */ var _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../dto/update-notification.dto */ "./src/modules/notifications/dto/update-notification.dto.ts");
/* harmony import */ var _services_notification_delivery_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../services/notification-delivery.service */ "./src/modules/notifications/services/notification-delivery.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var NotificationDeliveryListener_1;







let NotificationDeliveryListener = NotificationDeliveryListener_1 = class NotificationDeliveryListener {
    constructor(notificationRepository, deliveryService) {
        this.notificationRepository = notificationRepository;
        this.deliveryService = deliveryService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(NotificationDeliveryListener_1.name);
    }
    async handleNotificationDelivered(payload) {
        var _a, _b, _c;
        try {
            const { notification, channel } = payload;
            this.logger.debug(`Handling delivery success for notification ${notification.id} on channel ${channel}`);
            notification.deliveryDetails = Object.assign(Object.assign({}, notification.deliveryDetails), { attempts: ((_a = notification.deliveryDetails) === null || _a === void 0 ? void 0 : _a.attempts) || 0, lastAttempt: ((_b = notification.deliveryDetails) === null || _b === void 0 ? void 0 : _b.lastAttempt) || new Date(), channels: [
                    ...(((_c = notification.deliveryDetails) === null || _c === void 0 ? void 0 : _c.channels) || []),
                    {
                        channel,
                        status: 'SUCCESS',
                        sentAt: new Date(),
                    }
                ] });
            const allChannelsDelivered = notification.channels.every(ch => {
                var _a, _b;
                return (_b = (_a = notification.deliveryDetails) === null || _a === void 0 ? void 0 : _a.channels) === null || _b === void 0 ? void 0 : _b.some(d => d.channel === ch && d.status === 'SUCCESS');
            });
            if (allChannelsDelivered) {
                notification.status = _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_5__.NotificationStatus.DELIVERED;
                notification.deliveredAt = new Date();
            }
            await this.notificationRepository.save(notification);
        }
        catch (error) {
            this.logger.error(`Error handling delivery success for notification ${payload.notification.id}:`, error);
            throw error;
        }
    }
    async handleNotificationFailed(payload) {
        var _a, _b;
        try {
            const { notification, channel, error, retry = true } = payload;
            this.logger.debug(`Handling delivery failure for notification ${notification.id} on channel ${channel}`);
            notification.deliveryDetails = Object.assign(Object.assign({}, notification.deliveryDetails), { attempts: (((_a = notification.deliveryDetails) === null || _a === void 0 ? void 0 : _a.attempts) || 0) + 1, lastAttempt: new Date(), channels: [
                    ...(((_b = notification.deliveryDetails) === null || _b === void 0 ? void 0 : _b.channels) || []),
                    {
                        channel,
                        status: 'FAILED',
                        sentAt: new Date(),
                        error: error.message || 'Unknown error',
                    }
                ] });
            const allChannelsFailed = notification.channels.every(ch => {
                var _a, _b;
                return (_b = (_a = notification.deliveryDetails) === null || _a === void 0 ? void 0 : _a.channels) === null || _b === void 0 ? void 0 : _b.some(d => d.channel === ch && d.status === 'FAILED');
            });
            if (allChannelsFailed) {
                if (retry && notification.deliveryDetails.attempts < 3) {
                    notification.status = _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_5__.NotificationStatus.RETRY_PENDING;
                    await this.notificationRepository.save(notification);
                    const retryDelay = Math.pow(2, notification.deliveryDetails.attempts) * 1000;
                    setTimeout(() => {
                        this.deliveryService.retryNotification(notification);
                    }, retryDelay);
                }
                else {
                    notification.status = _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_5__.NotificationStatus.FAILED;
                    await this.notificationRepository.save(notification);
                }
            }
            else {
                await this.notificationRepository.save(notification);
            }
        }
        catch (error) {
            this.logger.error(`Error handling delivery failure for notification ${payload.notification.id}:`, error);
            throw error;
        }
    }
    async handleDeliveryTimeout(notification) {
        var _a, _b, _c;
        try {
            this.logger.debug(`Handling delivery timeout for notification ${notification.id}`);
            notification.status = _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_5__.NotificationStatus.FAILED;
            notification.deliveryDetails = Object.assign(Object.assign({}, notification.deliveryDetails), { attempts: ((_a = notification.deliveryDetails) === null || _a === void 0 ? void 0 : _a.attempts) || 0, lastAttempt: ((_b = notification.deliveryDetails) === null || _b === void 0 ? void 0 : _b.lastAttempt) || new Date(), channels: ((_c = notification.deliveryDetails) === null || _c === void 0 ? void 0 : _c.channels) || [], error: 'Delivery timeout exceeded', timeoutAt: new Date() });
            await this.notificationRepository.save(notification);
        }
        catch (error) {
            this.logger.error(`Error handling delivery timeout for notification ${notification.id}:`, error);
            throw error;
        }
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('notification.delivered'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], NotificationDeliveryListener.prototype, "handleNotificationDelivered", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('notification.failed'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], NotificationDeliveryListener.prototype, "handleNotificationFailed", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('notification.delivery_timeout'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_entities_notification_entity__WEBPACK_IMPORTED_MODULE_4__.Notification]),
    __metadata("design:returntype", Promise)
], NotificationDeliveryListener.prototype, "handleDeliveryTimeout", null);
NotificationDeliveryListener = NotificationDeliveryListener_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_4__.Notification)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        _services_notification_delivery_service__WEBPACK_IMPORTED_MODULE_6__.NotificationDeliveryService])
], NotificationDeliveryListener);



/***/ }),

/***/ "./src/modules/notifications/listeners/notification-schedule.listener.ts":
/*!*******************************************************************************!*\
  !*** ./src/modules/notifications/listeners/notification-schedule.listener.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NotificationScheduleListener: () => (/* binding */ NotificationScheduleListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_notification_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/notification.entity */ "./src/modules/notifications/entities/notification.entity.ts");
/* harmony import */ var _services_notification_scheduler_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../services/notification-scheduler.service */ "./src/modules/notifications/services/notification-scheduler.service.ts");
/* harmony import */ var _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../dto/update-notification.dto */ "./src/modules/notifications/dto/update-notification.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var NotificationScheduleListener_1;







let NotificationScheduleListener = NotificationScheduleListener_1 = class NotificationScheduleListener {
    constructor(notificationRepository, schedulerService) {
        this.notificationRepository = notificationRepository;
        this.schedulerService = schedulerService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(NotificationScheduleListener_1.name);
    }
    async handleNotificationSchedule(payload) {
        try {
            const { notification, scheduledFor } = payload;
            this.logger.debug(`Scheduling notification ${notification.id} for ${scheduledFor}`);
            await this.schedulerService.scheduleNotification(notification, scheduledFor);
        }
        catch (error) {
            this.logger.error(`Error scheduling notification ${payload.notification.id}:`, error);
            throw error;
        }
    }
    async handleNotificationReschedule(payload) {
        try {
            const { notificationId, newScheduledFor } = payload;
            this.logger.debug(`Rescheduling notification ${notificationId} for ${newScheduledFor}`);
            await this.schedulerService.rescheduleNotification(notificationId, newScheduledFor);
        }
        catch (error) {
            this.logger.error(`Error rescheduling notification ${payload.notificationId}:`, error);
            throw error;
        }
    }
    async handleNotificationCancelSchedule(notificationId) {
        try {
            this.logger.debug(`Canceling scheduled notification ${notificationId}`);
            await this.schedulerService.cancelScheduledNotification(notificationId);
        }
        catch (error) {
            this.logger.error(`Error canceling scheduled notification ${notificationId}:`, error);
            throw error;
        }
    }
    async handleScheduleExpired(notification) {
        try {
            this.logger.debug(`Schedule expired for notification ${notification.id}`);
            notification.status = _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__.NotificationStatus.EXPIRED;
            notification.metadata = Object.assign(Object.assign({}, notification.metadata), { expirationReason: 'schedule_expired', expiredAt: new Date() });
            await this.notificationRepository.save(notification);
        }
        catch (error) {
            this.logger.error(`Error handling expired schedule for notification ${notification.id}:`, error);
            throw error;
        }
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('notification.schedule'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], NotificationScheduleListener.prototype, "handleNotificationSchedule", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('notification.reschedule'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], NotificationScheduleListener.prototype, "handleNotificationReschedule", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('notification.cancel_schedule'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], NotificationScheduleListener.prototype, "handleNotificationCancelSchedule", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('notification.schedule_expired'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_entities_notification_entity__WEBPACK_IMPORTED_MODULE_4__.Notification]),
    __metadata("design:returntype", Promise)
], NotificationScheduleListener.prototype, "handleScheduleExpired", null);
NotificationScheduleListener = NotificationScheduleListener_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_4__.Notification)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        _services_notification_scheduler_service__WEBPACK_IMPORTED_MODULE_5__.NotificationSchedulerService])
], NotificationScheduleListener);



/***/ }),

/***/ "./src/modules/notifications/listeners/notification.listener.ts":
/*!**********************************************************************!*\
  !*** ./src/modules/notifications/listeners/notification.listener.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NotificationListener: () => (/* binding */ NotificationListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_notification_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/notification.entity */ "./src/modules/notifications/entities/notification.entity.ts");
/* harmony import */ var _services_notification_delivery_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../services/notification-delivery.service */ "./src/modules/notifications/services/notification-delivery.service.ts");
/* harmony import */ var _entities_notification_template_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../entities/notification-template.entity */ "./src/modules/notifications/entities/notification-template.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var NotificationListener_1;







let NotificationListener = NotificationListener_1 = class NotificationListener {
    constructor(templateRepository, deliveryService) {
        this.templateRepository = templateRepository;
        this.deliveryService = deliveryService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(NotificationListener_1.name);
    }
    async handleNotificationCreated(notification) {
        try {
            this.logger.debug(`Processing new notification: ${notification.id}`);
            if (notification.templateId) {
                await this.processTemplate(notification);
            }
            await this.deliveryService.processNotification(notification);
        }
        catch (error) {
            this.logger.error(`Error processing notification ${notification.id}:`, error);
            throw error;
        }
    }
    async handleNotificationResend(notification) {
        try {
            this.logger.debug(`Resending notification: ${notification.id}`);
            await this.deliveryService.retryNotification(notification);
        }
        catch (error) {
            this.logger.error(`Error resending notification ${notification.id}:`, error);
            throw error;
        }
    }
    async processTemplate(notification) {
        var _a, _b;
        const template = await this.templateRepository.findOne({
            where: { id: notification.templateId }
        });
        if (!template) {
            throw new Error(`Template ${notification.templateId} not found`);
        }
        await this.templateRepository.update(template.id, {
            lastUsedAt: new Date(),
            useCount: () => 'use_count + 1'
        });
        const metadata = notification.metadata || {};
        notification.subject = this.interpolateVariables(template.subject, metadata);
        notification.content = this.interpolateVariables(template.content, metadata);
        if (template.channelSpecificContent) {
            notification.channelContent = Object.assign(Object.assign({}, notification.channelContent), this.processChannelContent(template.channelSpecificContent, metadata));
        }
        if (!((_a = notification.channels) === null || _a === void 0 ? void 0 : _a.length) && ((_b = template.channels) === null || _b === void 0 ? void 0 : _b.length)) {
            notification.channels = template.channels.map(channel => ({
                name: channel,
                type: 'default',
                isActive: true,
                additionalProperty: 'value'
            }));
        }
    }
    interpolateVariables(content, variables) {
        return content.replace(/\{\{(.*?)\}\}/g, (match, variable) => {
            const key = variable.trim();
            return variables[key] !== undefined ? variables[key] : match;
        });
    }
    processChannelContent(channelContent, variables) {
        const processed = {};
        for (const [channel, content] of Object.entries(channelContent)) {
            processed[channel] = {};
            for (const [key, value] of Object.entries(content)) {
                if (typeof value === 'string') {
                    processed[channel][key] = this.interpolateVariables(value, variables);
                }
                else {
                    processed[channel][key] = value;
                }
            }
        }
        return processed;
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('notification.created'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_entities_notification_entity__WEBPACK_IMPORTED_MODULE_4__.Notification]),
    __metadata("design:returntype", Promise)
], NotificationListener.prototype, "handleNotificationCreated", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('notification.resend'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_entities_notification_entity__WEBPACK_IMPORTED_MODULE_4__.Notification]),
    __metadata("design:returntype", Promise)
], NotificationListener.prototype, "handleNotificationResend", null);
NotificationListener = NotificationListener_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_entities_notification_template_entity__WEBPACK_IMPORTED_MODULE_6__.NotificationTemplate)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        _services_notification_delivery_service__WEBPACK_IMPORTED_MODULE_5__.NotificationDeliveryService])
], NotificationListener);



/***/ }),

/***/ "./src/modules/notifications/notifications.module.ts":
/*!***********************************************************!*\
  !*** ./src/modules/notifications/notifications.module.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AppointmentEventTypes: () => (/* binding */ AppointmentEventTypes),
/* harmony export */   NotificationsModule: () => (/* binding */ NotificationsModule)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _controllers_notifications_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./controllers/notifications.controller */ "./src/modules/notifications/controllers/notifications.controller.ts");
/* harmony import */ var _services_notifications_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./services/notifications.service */ "./src/modules/notifications/services/notifications.service.ts");
/* harmony import */ var _services_notification_scheduler_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./services/notification-scheduler.service */ "./src/modules/notifications/services/notification-scheduler.service.ts");
/* harmony import */ var _entities_notification_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./entities/notification.entity */ "./src/modules/notifications/entities/notification.entity.ts");
/* harmony import */ var _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts");
/* harmony import */ var _entities_notification_template_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./entities/notification-template.entity */ "./src/modules/notifications/entities/notification-template.entity.ts");
/* harmony import */ var _listeners_notification_listener__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./listeners/notification.listener */ "./src/modules/notifications/listeners/notification.listener.ts");
/* harmony import */ var _listeners_notification_schedule_listener__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./listeners/notification-schedule.listener */ "./src/modules/notifications/listeners/notification-schedule.listener.ts");
/* harmony import */ var _listeners_notification_delivery_listener__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./listeners/notification-delivery.listener */ "./src/modules/notifications/listeners/notification-delivery.listener.ts");
/* harmony import */ var _users_users_module__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../users/users.module */ "./src/modules/users/users.module.ts");
/* harmony import */ var _organizations_organizations_module__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../organizations/organizations.module */ "./src/modules/organizations/organizations.module.ts");
/* harmony import */ var _auth_auth_module__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../auth/auth.module */ "./src/modules/auth/auth.module.ts");
/* harmony import */ var _shared_services_email_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../shared/services/email.service */ "./src/shared/services/email.service.ts");
/* harmony import */ var _shared_services_sms_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../shared/services/sms.service */ "./src/shared/services/sms.service.ts");
/* harmony import */ var _shared_services_push_notification_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../shared/services/push-notification.service */ "./src/shared/services/push-notification.service.ts");
/* harmony import */ var _shared_services_webhook_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../shared/services/webhook.service */ "./src/shared/services/webhook.service.ts");
/* harmony import */ var _whatsapp_services_whatsapp_services__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../whatsapp/services/whatsapp.services */ "./src/modules/whatsapp/services/whatsapp.services.ts");
/* harmony import */ var _services_notification_delivery_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./services/notification-delivery.service */ "./src/modules/notifications/services/notification-delivery.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





















var AppointmentEventTypes;
(function (AppointmentEventTypes) {
    AppointmentEventTypes["CREATED"] = "appointment.created";
    AppointmentEventTypes["UPDATED"] = "appointment.updated";
    AppointmentEventTypes["CANCELLED"] = "appointment.cancelled";
    AppointmentEventTypes["COMPLETED"] = "appointment.completed";
    AppointmentEventTypes["RESCHEDULED"] = "appointment.rescheduled";
})(AppointmentEventTypes || (AppointmentEventTypes = {}));
let NotificationsModule = class NotificationsModule {
};
NotificationsModule = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Module)({
        imports: [
            _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.TypeOrmModule.forFeature([
                _entities_notification_entity__WEBPACK_IMPORTED_MODULE_6__.Notification,
                _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_7__.NotificationPreference,
                _entities_notification_template_entity__WEBPACK_IMPORTED_MODULE_8__.NotificationTemplate
            ]),
            _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__.EventEmitterModule.forRoot({
                wildcard: true,
                maxListeners: 20,
                verboseMemoryLeak: true,
            }),
            _users_users_module__WEBPACK_IMPORTED_MODULE_12__.UsersModule,
            _organizations_organizations_module__WEBPACK_IMPORTED_MODULE_13__.OrganizationsModule,
            _auth_auth_module__WEBPACK_IMPORTED_MODULE_14__.AuthModule
        ],
        controllers: [_controllers_notifications_controller__WEBPACK_IMPORTED_MODULE_3__.NotificationsController],
        providers: [
            _services_notifications_service__WEBPACK_IMPORTED_MODULE_4__.NotificationsService,
            _services_notification_scheduler_service__WEBPACK_IMPORTED_MODULE_5__.NotificationSchedulerService,
            _services_notification_delivery_service__WEBPACK_IMPORTED_MODULE_20__.NotificationDeliveryService,
            _listeners_notification_listener__WEBPACK_IMPORTED_MODULE_9__.NotificationListener,
            _listeners_notification_schedule_listener__WEBPACK_IMPORTED_MODULE_10__.NotificationScheduleListener,
            _listeners_notification_delivery_listener__WEBPACK_IMPORTED_MODULE_11__.NotificationDeliveryListener,
            _shared_services_email_service__WEBPACK_IMPORTED_MODULE_15__.EmailService,
            _shared_services_sms_service__WEBPACK_IMPORTED_MODULE_16__.SmsService,
            _shared_services_push_notification_service__WEBPACK_IMPORTED_MODULE_17__.PushNotificationService,
            _shared_services_webhook_service__WEBPACK_IMPORTED_MODULE_18__.WebhookService,
            _whatsapp_services_whatsapp_services__WEBPACK_IMPORTED_MODULE_19__.WhatsappService,
        ],
        exports: [
            _services_notifications_service__WEBPACK_IMPORTED_MODULE_4__.NotificationsService,
            _services_notification_delivery_service__WEBPACK_IMPORTED_MODULE_20__.NotificationDeliveryService
        ]
    })
], NotificationsModule);



/***/ }),

/***/ "./src/modules/notifications/services/notification-delivery.service.ts":
/*!*****************************************************************************!*\
  !*** ./src/modules/notifications/services/notification-delivery.service.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NotificationDeliveryService: () => (/* binding */ NotificationDeliveryService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_notification_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/notification.entity */ "./src/modules/notifications/entities/notification.entity.ts");
/* harmony import */ var _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../dto/update-notification.dto */ "./src/modules/notifications/dto/update-notification.dto.ts");
/* harmony import */ var _shared_services_email_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/services/email.service */ "./src/shared/services/email.service.ts");
/* harmony import */ var _shared_services_sms_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/services/sms.service */ "./src/shared/services/sms.service.ts");
/* harmony import */ var _shared_services_push_notification_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/services/push-notification.service */ "./src/shared/services/push-notification.service.ts");
/* harmony import */ var _shared_services_webhook_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/services/webhook.service */ "./src/shared/services/webhook.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var NotificationDeliveryService_1;










let NotificationDeliveryService = NotificationDeliveryService_1 = class NotificationDeliveryService {
    constructor(notificationRepository, emailService, smsService, pushNotificationService, webhookService, eventEmitter) {
        this.notificationRepository = notificationRepository;
        this.emailService = emailService;
        this.smsService = smsService;
        this.pushNotificationService = pushNotificationService;
        this.webhookService = webhookService;
        this.eventEmitter = eventEmitter;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(NotificationDeliveryService_1.name);
        this.MAX_RETRY_ATTEMPTS = 3;
    }
    async processNotification(notification) {
        try {
            notification.status = _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_5__.NotificationStatus.PROCESSING;
            await this.notificationRepository.save(notification);
            const deliveryPromises = notification.channels.map(channel => this.deliverToChannel(notification, channel));
            await Promise.all(deliveryPromises);
        }
        catch (error) {
            this.logger.error(`Failed to process notification ${notification.id}:`, error);
            notification.status = _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_5__.NotificationStatus.FAILED;
            await this.notificationRepository.save(notification);
            this.eventEmitter.emit('notification.failed', {
                notification,
                error
            });
        }
    }
    async retryNotification(notification) {
        var _a, _b, _c, _d, _e, _f, _g;
        if (((_b = (_a = notification.deliveryDetails) === null || _a === void 0 ? void 0 : _a.attempts) !== null && _b !== void 0 ? _b : 0) >= this.MAX_RETRY_ATTEMPTS) {
            throw new Error('Maximum retry attempts exceeded');
        }
        notification.deliveryDetails = Object.assign(Object.assign({}, notification.deliveryDetails), { attempts: (_d = (_c = notification.deliveryDetails) === null || _c === void 0 ? void 0 : _c.attempts) !== null && _d !== void 0 ? _d : 0, lastAttempt: (_f = (_e = notification.deliveryDetails) === null || _e === void 0 ? void 0 : _e.lastAttempt) !== null && _f !== void 0 ? _f : new Date(), channels: ((_g = notification.deliveryDetails) === null || _g === void 0 ? void 0 : _g.channels.filter(c => c.status === 'SUCCESS')) || [] });
        return this.processNotification(notification);
    }
    async deliverToChannel(notification, channel) {
        try {
            switch (channel.toLowerCase()) {
                case 'email':
                    await this.emailService.send(notification);
                    break;
                case 'sms':
                    await this.smsService.send(notification);
                    break;
                case 'push':
                    await this.pushNotificationService.send(notification);
                    break;
                case 'webhook':
                    await this.webhookService.send(notification);
                    break;
                default:
                    throw new Error(`Unsupported channel: ${channel}`);
            }
            this.eventEmitter.emit('notification.delivered', {
                notification,
                channel
            });
        }
        catch (error) {
            this.logger.error(`Failed to deliver notification ${notification.id} to channel ${channel}:`, error);
            this.eventEmitter.emit('notification.failed', {
                notification,
                channel,
                error
            });
        }
    }
    async getDeliveryStatus(notificationId) {
        const notification = await this.notificationRepository.findOne({
            where: { id: notificationId }
        });
        if (!notification) {
            throw new Error('Notification not found');
        }
        return {
            status: notification.status,
            deliveryDetails: notification.deliveryDetails,
            channels: notification.channels
        };
    }
};
NotificationDeliveryService = NotificationDeliveryService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_4__.Notification)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        _shared_services_email_service__WEBPACK_IMPORTED_MODULE_6__.EmailService,
        _shared_services_sms_service__WEBPACK_IMPORTED_MODULE_7__.SmsService,
        _shared_services_push_notification_service__WEBPACK_IMPORTED_MODULE_8__.PushNotificationService,
        _shared_services_webhook_service__WEBPACK_IMPORTED_MODULE_9__.WebhookService,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.EventEmitter2])
], NotificationDeliveryService);



/***/ }),

/***/ "./src/modules/notifications/services/notification-scheduler.service.ts":
/*!******************************************************************************!*\
  !*** ./src/modules/notifications/services/notification-scheduler.service.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NotificationSchedulerService: () => (/* binding */ NotificationSchedulerService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_schedule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
/* harmony import */ var _nestjs_schedule__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_schedule__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _entities_notification_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/notification.entity */ "./src/modules/notifications/entities/notification.entity.ts");
/* harmony import */ var _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../dto/update-notification.dto */ "./src/modules/notifications/dto/update-notification.dto.ts");
/* harmony import */ var _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../dto/create-notification.dto */ "./src/modules/notifications/dto/create-notification.dto.ts");
/* harmony import */ var _shared_services_email_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/services/email.service */ "./src/shared/services/email.service.ts");
/* harmony import */ var _shared_services_sms_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/services/sms.service */ "./src/shared/services/sms.service.ts");
/* harmony import */ var _shared_services_push_notification_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/services/push-notification.service */ "./src/shared/services/push-notification.service.ts");
/* harmony import */ var _whatsapp_services_whatsapp_services__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../whatsapp/services/whatsapp.services */ "./src/modules/whatsapp/services/whatsapp.services.ts");
/* harmony import */ var _integrations_slack_services_slack_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../integrations/slack/services/slack.service */ "./src/modules/integrations/slack/services/slack.service.ts");
/* harmony import */ var _modules_organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/modules/organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _modules_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/modules/users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var NotificationSchedulerService_1;















let NotificationSchedulerService = NotificationSchedulerService_1 = class NotificationSchedulerService {
    rescheduleNotification(notificationId, newScheduledFor) {
        throw new Error('Method not implemented.');
    }
    scheduleNotification(notification, scheduledFor) {
        throw new Error('Method not implemented.');
    }
    cancelScheduledNotification(notificationId) {
        throw new Error('Method not implemented.');
    }
    constructor(notificationRepository, emailService, smsService, pushNotificationService, whatsappService, slackService, eventEmitter) {
        this.notificationRepository = notificationRepository;
        this.emailService = emailService;
        this.smsService = smsService;
        this.pushNotificationService = pushNotificationService;
        this.whatsappService = whatsappService;
        this.slackService = slackService;
        this.eventEmitter = eventEmitter;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(NotificationSchedulerService_1.name);
        this.MAX_RETRY_ATTEMPTS = 3;
        this.BATCH_SIZE = 100;
    }
    async processScheduledNotifications() {
        this.logger.debug('Processing scheduled notifications');
        try {
            const notifications = await this.notificationRepository.find({
                where: {
                    status: _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__.NotificationStatus.SCHEDULED,
                    scheduledFor: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.LessThanOrEqual)(new Date()),
                },
                take: this.BATCH_SIZE,
            });
            for (const notification of notifications) {
                await this.processNotification(notification);
            }
        }
        catch (error) {
            this.logger.error('Error processing scheduled notifications', error);
        }
    }
    async retryFailedNotifications() {
        this.logger.debug('Retrying failed notifications');
        try {
            const notifications = await this.notificationRepository.find({
                where: {
                    status: _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__.NotificationStatus.FAILED,
                    retryCount: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.LessThanOrEqual)(this.MAX_RETRY_ATTEMPTS),
                },
                take: this.BATCH_SIZE,
            });
            for (const notification of notifications) {
                await this.processNotification(notification, true);
            }
        }
        catch (error) {
            this.logger.error('Error retrying failed notifications', error);
        }
    }
    async cleanupExpiredNotifications() {
        this.logger.debug('Cleaning up expired notifications');
        try {
            const expiryDate = new Date();
            expiryDate.setDate(expiryDate.getDate() - 30);
            await this.notificationRepository.update({
                status: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.Not)((0,typeorm__WEBPACK_IMPORTED_MODULE_2__.In)([_dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__.NotificationStatus.DELIVERED, _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__.NotificationStatus.FAILED])),
                createdAt: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.LessThanOrEqual)(expiryDate),
            }, {
                status: _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__.NotificationStatus.EXPIRED,
            });
        }
        catch (error) {
            this.logger.error('Error cleaning up expired notifications', error);
        }
    }
    async processNotification(notification, isRetry = false) {
        this.logger.debug(`Processing notification ${notification.id}`);
        try {
            notification.status = _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__.NotificationStatus.PROCESSING;
            await this.notificationRepository.save(notification);
            for (const channel of notification.channels) {
                await this.sendNotificationByChannel(notification, channel);
            }
            notification.status = _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__.NotificationStatus.DELIVERED;
            notification.deliveredAt = new Date();
            await this.notificationRepository.save(notification);
            this.eventEmitter.emit('notification.delivered', notification);
        }
        catch (error) {
            this.logger.error(`Error processing notification ${notification.id}`, error);
            if (isRetry) {
                notification.retryCount = (notification.retryCount || 0) + 1;
            }
            if (notification.retryCount >= this.MAX_RETRY_ATTEMPTS) {
                notification.status = _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__.NotificationStatus.FAILED;
                notification.error = error.message;
                this.eventEmitter.emit('notification.failed', notification);
            }
            else {
                notification.status = _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__.NotificationStatus.PENDING;
            }
            await this.notificationRepository.save(notification);
        }
    }
    async sendNotificationByChannel(notification, channel) {
        switch (channel) {
            case _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__.NotificationChannel.EMAIL:
                await this.sendEmailNotification(notification);
                break;
            case _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__.NotificationChannel.SMS:
                await this.sendSmsNotification(notification);
                break;
            case _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__.NotificationChannel.PUSH:
                await this.sendPushNotification(notification);
                break;
            case _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__.NotificationChannel.WHATSAPP:
                await this.sendWhatsappNotification(notification, notification.recipientDetails);
                break;
            case _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__.NotificationChannel.SLACK:
                await this.sendSlackNotification(notification);
                break;
            case _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__.NotificationChannel.IN_APP:
                break;
            default:
                this.logger.warn(`Unknown notification channel: ${channel}`);
        }
    }
    async sendEmailNotification(notification) {
        var _a;
        if (!((_a = notification.recipientDetails) === null || _a === void 0 ? void 0 : _a.email)) {
            throw new Error('Email address not provided');
        }
        this.emailService.send({
            to: notification.recipientDetails.email,
            subject: notification.title,
            template: 'notification',
            context: {
                title: notification.title,
                content: notification.content,
                data: notification.data,
            },
            id: '',
            organizationId: '',
            userId: '',
            senderId: '',
            type: _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__.NotificationType.SYSTEM,
            title: '',
            content: '',
            priority: _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__.NotificationPriority.LOW,
            status: _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__.NotificationStatus.SCHEDULED,
            requireConfirmation: false,
            channels: [],
            silent: false,
            read: false,
            createdAt: new Date(),
            updatedAt: new Date(),
            organization: new _modules_organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_13__.Organization,
            user: new _modules_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_14__.User,
            sender: new _modules_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_14__.User,
            isRead: false,
            isExpired: false,
            isScheduled: false,
            isDelivered: false,
            requiresAction: false,
            failedChannels: []
        });
    }
    async sendSmsNotification(notification) {
        var _a;
        if (!((_a = notification.recipientDetails) === null || _a === void 0 ? void 0 : _a.phone)) {
            throw new Error('Phone number not provided');
        }
        await this.smsService.send({
            to: notification.recipientDetails.phone,
            message: `${notification.title}: ${notification.content}`,
            id: '',
            organizationId: '',
            userId: '',
            senderId: '',
            type: _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__.NotificationType.SYSTEM,
            title: '',
            content: '',
            priority: _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__.NotificationPriority.LOW,
            status: _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__.NotificationStatus.SCHEDULED,
            requireConfirmation: false,
            channels: [],
            silent: false,
            read: false,
            createdAt: new Date(),
            updatedAt: new Date(),
            organization: new _modules_organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_13__.Organization,
            user: new _modules_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_14__.User,
            sender: new _modules_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_14__.User,
            isRead: false,
            isExpired: false,
            isScheduled: false,
            isDelivered: false,
            requiresAction: false,
            failedChannels: []
        });
    }
    async sendPushNotification(notification) {
        var _a, _b;
        if (!((_b = (_a = notification.recipientDetails) === null || _a === void 0 ? void 0 : _a.deviceTokens) === null || _b === void 0 ? void 0 : _b.length)) {
            throw new Error('No device tokens available');
        }
        await this.pushNotificationService.send({
            tokens: notification.recipientDetails.deviceTokens,
            title: notification.title,
            body: notification.content,
            data: notification.data,
            id: '',
            organizationId: '',
            userId: '',
            senderId: '',
            type: _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__.NotificationType.SYSTEM,
            content: '',
            priority: _dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_7__.NotificationPriority.LOW,
            status: _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_6__.NotificationStatus.SCHEDULED,
            requireConfirmation: false,
            channels: [],
            silent: false,
            read: false,
            createdAt: new Date(),
            updatedAt: new Date(),
            organization: new _modules_organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_13__.Organization,
            user: new _modules_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_14__.User,
            sender: new _modules_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_14__.User,
            isRead: false,
            isExpired: false,
            isScheduled: false,
            isDelivered: false,
            requiresAction: false,
            failedChannels: []
        });
    }
    async sendWhatsappNotification(notification, user) {
        try {
            const whatsappService = this.whatsappService;
            await whatsappService.sendMessage({
                to: user.phoneNumber,
                text: notification.content,
            });
            return true;
        }
        catch (error) {
            this.logger.error(`Failed to send WhatsApp notification: ${error.message}`, error.stack);
            return false;
        }
    }
    async sendSlackNotification(notification) {
        var _a;
        if (!((_a = notification.recipientDetails) === null || _a === void 0 ? void 0 : _a.slackUserId)) {
            throw new Error('Slack user ID not provided');
        }
        this.slackService.sendDirectMessage({
            userId: notification.recipientDetails.slackUserId,
            message: {
                text: notification.title,
                blocks: [
                    {
                        type: 'section',
                        text: {
                            type: 'mrkdwn',
                            text: notification.content,
                        },
                    },
                ],
            },
        });
    }
};
__decorate([
    (0,_nestjs_schedule__WEBPACK_IMPORTED_MODULE_3__.Cron)(_nestjs_schedule__WEBPACK_IMPORTED_MODULE_3__.CronExpression.EVERY_MINUTE),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], NotificationSchedulerService.prototype, "processScheduledNotifications", null);
__decorate([
    (0,_nestjs_schedule__WEBPACK_IMPORTED_MODULE_3__.Cron)(_nestjs_schedule__WEBPACK_IMPORTED_MODULE_3__.CronExpression.EVERY_5_MINUTES),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], NotificationSchedulerService.prototype, "retryFailedNotifications", null);
__decorate([
    (0,_nestjs_schedule__WEBPACK_IMPORTED_MODULE_3__.Cron)(_nestjs_schedule__WEBPACK_IMPORTED_MODULE_3__.CronExpression.EVERY_HOUR),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], NotificationSchedulerService.prototype, "cleanupExpiredNotifications", null);
NotificationSchedulerService = NotificationSchedulerService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_5__.Notification)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _shared_services_email_service__WEBPACK_IMPORTED_MODULE_8__.EmailService,
        _shared_services_sms_service__WEBPACK_IMPORTED_MODULE_9__.SmsService,
        _shared_services_push_notification_service__WEBPACK_IMPORTED_MODULE_10__.PushNotificationService,
        _whatsapp_services_whatsapp_services__WEBPACK_IMPORTED_MODULE_11__.WhatsappService,
        _integrations_slack_services_slack_service__WEBPACK_IMPORTED_MODULE_12__.SlackService,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_4__.EventEmitter2])
], NotificationSchedulerService);



/***/ }),

/***/ "./src/modules/notifications/services/notifications.service.ts":
/*!*********************************************************************!*\
  !*** ./src/modules/notifications/services/notifications.service.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NotificationsService: () => (/* binding */ NotificationsService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/notification.entity */ "./src/modules/notifications/entities/notification.entity.ts");
/* harmony import */ var _entities_notification_template_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/notification-template.entity */ "./src/modules/notifications/entities/notification-template.entity.ts");
/* harmony import */ var _entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/notification-preference.entity */ "./src/modules/notifications/entities/notification-preference.entity.ts");
/* harmony import */ var _shared_services_email_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/services/email.service */ "./src/shared/services/email.service.ts");
/* harmony import */ var _shared_services_sms_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/services/sms.service */ "./src/shared/services/sms.service.ts");
/* harmony import */ var _whatsapp_services_whatsapp_services__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../whatsapp/services/whatsapp.services */ "./src/modules/whatsapp/services/whatsapp.services.ts");
/* harmony import */ var _dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../dto/update-notification.dto */ "./src/modules/notifications/dto/update-notification.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var NotificationsService_1;










let NotificationsService = NotificationsService_1 = class NotificationsService {
    constructor(notificationRepository, templateRepository, preferenceRepository, emailService, smsService, whatsappService) {
        this.notificationRepository = notificationRepository;
        this.templateRepository = templateRepository;
        this.preferenceRepository = preferenceRepository;
        this.emailService = emailService;
        this.smsService = smsService;
        this.whatsappService = whatsappService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(NotificationsService_1.name);
    }
    async notifyMessageFailure(message) {
    }
    async getNotificationChannels(organizationId, userId) {
        return [];
    }
    async getUserPreferences(organizationId, userId) {
        return {};
    }
    async getNotificationById(id, organizationId, userId) {
        return null;
    }
    async updateNotification(id, updateNotificationDto) {
        const notification = await this.notificationRepository.findOne({ where: { id } });
        if (!notification) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('Notification not found');
        }
        Object.assign(notification, updateNotificationDto);
        return this.notificationRepository.save(notification);
    }
    async notifyMessageDelivery(message) {
        console.log(`Message delivered: ${message.id}`);
    }
    async create(notificationData) {
        console.log('Notification created:', notificationData);
    }
    async send(dto) {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;
        try {
            const preferences = await this.preferenceRepository.findOne({
                where: {
                    userId: dto.userId,
                    category: dto.type,
                },
            });
            if (!preferences) {
                this.logger.warn(`No notification preferences found for user ${dto.userId}`);
                return;
            }
            const template = await this.templateRepository.findOne({
                where: { type: dto.type },
            });
            const content = template
                ? this.compileTemplate(template.content, Object.assign(Object.assign({}, dto.data), { title: dto.title, message: dto.message }))
                : dto.message;
            const notification = await this.notificationRepository.save({
                userId: dto.userId,
                type: dto.type,
                content,
                title: dto.title,
                metadata: Object.assign(Object.assign({}, dto.data), { organizationId: dto.organizationId, priority: dto.priority }),
                status: String(_dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_9__.NotificationStatus.PENDING),
                organizationId: dto.organizationId || '',
                senderId: dto.userId,
                channels: preferences.enabledChannels,
            });
            const notificationPromises = [];
            if (preferences.enabledChannels.includes(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel.EMAIL) &&
                ((_c = (_b = (_a = preferences.channelSpecificSettings) === null || _a === void 0 ? void 0 : _a.email) === null || _b === void 0 ? void 0 : _b.addresses) === null || _c === void 0 ? void 0 : _c.length)) {
                const email = preferences.channelSpecificSettings.email.addresses[0];
                notificationPromises.push(this.sendEmailNotification(email, {
                    appointmentId: ((_d = dto.data) === null || _d === void 0 ? void 0 : _d.userId) || 'N/A',
                    patientName: 'User',
                    doctorName: 'N/A',
                    dateTime: new Date(),
                    location: 'N/A',
                    notes: `${dto.title}: ${dto.message}`,
                    organizationName: dto.organizationId || 'System',
                }));
            }
            if (preferences.enabledChannels.includes(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel.SMS) &&
                ((_g = (_f = (_e = preferences.channelSpecificSettings) === null || _e === void 0 ? void 0 : _e.sms) === null || _f === void 0 ? void 0 : _f.phoneNumbers) === null || _g === void 0 ? void 0 : _g.length)) {
                const phone = preferences.channelSpecificSettings.sms.phoneNumbers[0];
                notificationPromises.push(this.sendSmsNotification(phone, {
                    appointmentId: ((_h = dto.data) === null || _h === void 0 ? void 0 : _h.userId) || 'N/A',
                    patientName: 'User',
                    dateTime: new Date(),
                    organizationName: dto.organizationId || 'System',
                }));
            }
            if (preferences.enabledChannels.includes(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel.WHATSAPP) &&
                ((_l = (_k = (_j = preferences.channelSpecificSettings) === null || _j === void 0 ? void 0 : _j.whatsapp) === null || _k === void 0 ? void 0 : _k.numbers) === null || _l === void 0 ? void 0 : _l.length)) {
                const whatsappNumber = preferences.channelSpecificSettings.whatsapp.numbers[0];
                notificationPromises.push(this.whatsappService.sendAppointmentReminder(whatsappNumber, {
                    appointmentId: ((_m = dto.data) === null || _m === void 0 ? void 0 : _m.userId) || 'N/A',
                    patientName: 'User',
                    doctorName: 'N/A',
                    dateTime: new Date(),
                    location: 'N/A',
                    organizationName: dto.organizationId || 'System',
                }));
            }
            await Promise.all(notificationPromises);
            await this.notificationRepository
                .createQueryBuilder()
                .update(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.Notification)
                .set({ status: String(_dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_9__.NotificationStatus.SENT) })
                .where('id = :id', { id: notification.id })
                .execute();
            this.logger.log(`Successfully sent notification ${notification.id} to user ${dto.userId}`);
        }
        catch (error) {
            this.logger.error(`Failed to send notification to user ${dto.userId}:`, error);
            throw error;
        }
    }
    async notifyError(source, error) {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        try {
            const notification = await this.notificationRepository.save({
                type: 'ERROR',
                source,
                content: error.message,
                title: 'System Error',
                metadata: {
                    stack: error.stack,
                    timestamp: new Date().toISOString(),
                },
                status: String(_dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_9__.NotificationStatus.PENDING),
                organizationId: '',
                senderId: 'system',
                channels: [_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel.EMAIL],
            });
            const adminPreferences = await this.preferenceRepository.find({
                where: { category: 'ERROR' },
            });
            for (const pref of adminPreferences) {
                try {
                    const notificationPromises = [];
                    if (pref.enabledChannels.includes(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel.EMAIL) &&
                        ((_c = (_b = (_a = pref.channelSpecificSettings) === null || _a === void 0 ? void 0 : _a.email) === null || _b === void 0 ? void 0 : _b.addresses) === null || _c === void 0 ? void 0 : _c.length)) {
                        const email = pref.channelSpecificSettings.email.addresses[0];
                        notificationPromises.push(this.sendEmailNotification(email, {
                            appointmentId: 'N/A',
                            patientName: 'N/A',
                            doctorName: 'N/A',
                            dateTime: new Date(),
                            location: 'N/A',
                            notes: `Error in ${source}: ${error.message}`,
                            organizationName: 'System',
                        }));
                    }
                    if (pref.enabledChannels.includes(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel.SMS) &&
                        ((_f = (_e = (_d = pref.channelSpecificSettings) === null || _d === void 0 ? void 0 : _d.sms) === null || _e === void 0 ? void 0 : _e.phoneNumbers) === null || _f === void 0 ? void 0 : _f.length)) {
                        const phone = pref.channelSpecificSettings.sms.phoneNumbers[0];
                        notificationPromises.push(this.sendSmsNotification(phone, {
                            appointmentId: 'N/A',
                            patientName: 'Admin',
                            dateTime: new Date(),
                            organizationName: `System Error: ${source}`,
                        }));
                    }
                    if (pref.enabledChannels.includes(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel.WHATSAPP) &&
                        ((_j = (_h = (_g = pref.channelSpecificSettings) === null || _g === void 0 ? void 0 : _g.whatsapp) === null || _h === void 0 ? void 0 : _h.numbers) === null || _j === void 0 ? void 0 : _j.length)) {
                        const whatsappNumber = pref.channelSpecificSettings.whatsapp.numbers[0];
                        notificationPromises.push(this.whatsappService.sendAppointmentReminder(whatsappNumber, {
                            appointmentId: 'N/A',
                            patientName: 'Admin',
                            doctorName: 'N/A',
                            dateTime: new Date(),
                            location: 'N/A',
                            organizationName: `System Error: ${source}`,
                        }));
                    }
                    await Promise.all(notificationPromises);
                }
                catch (notifyError) {
                    this.logger.error(`Failed to notify admin ${pref.userId}:`, notifyError);
                }
            }
            await this.notificationRepository
                .createQueryBuilder()
                .update(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.Notification)
                .set({ status: String(_dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_9__.NotificationStatus.SENT) })
                .where('id = :id', { id: notification.id })
                .execute();
        }
        catch (error) {
            this.logger.error('Failed to process error notification:', error);
            throw error;
        }
    }
    async sendNotification(userId, type, data) {
        try {
            const preferences = await this.preferenceRepository.findOne({
                where: {
                    userId,
                    category: type,
                },
            });
            if (!preferences) {
                this.logger.warn(`No notification preferences found for user ${userId}`);
                return;
            }
            const template = await this.templateRepository.findOne({
                where: { type },
            });
            if (!template) {
                throw new Error(`Template not found for notification type: ${type}`);
            }
            const notification = await this.notificationRepository.save({
                userId,
                type,
                content: this.compileTemplate(template.content, data),
                title: data.title || 'Notification',
                metadata: data,
                status: String(_dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_9__.NotificationStatus.PENDING),
                organizationId: data.organizationId || '',
                senderId: userId,
                channels: preferences.enabledChannels,
            });
            const notificationPromises = [];
            if (preferences.enabledChannels.includes(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel.EMAIL) &&
                data.email) {
                notificationPromises.push(this.sendEmailNotification(data.email, {
                    appointmentId: data.appointmentId || 'N/A',
                    patientName: data.patientName || 'N/A',
                    doctorName: data.doctorName || 'N/A',
                    dateTime: data.dateTime || new Date(),
                    location: data.location || 'N/A',
                    notes: data.notes,
                    organizationName: data.organizationName || 'System',
                }));
            }
            if (preferences.enabledChannels.includes(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel.SMS) &&
                data.phone) {
                notificationPromises.push(this.sendSmsNotification(data.phone, {
                    appointmentId: data.appointmentId || 'N/A',
                    patientName: data.patientName || 'N/A',
                    dateTime: data.dateTime || new Date(),
                    organizationName: data.organizationName || 'System',
                }));
            }
            if (preferences.enabledChannels.includes(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.NotificationChannel.WHATSAPP) &&
                data.whatsapp) {
                notificationPromises.push(this.whatsappService.sendAppointmentReminder(data.whatsapp, {
                    appointmentId: data.appointmentId || 'N/A',
                    patientName: data.patientName || 'N/A',
                    doctorName: data.doctorName || 'N/A',
                    dateTime: data.dateTime || new Date(),
                    location: data.location || 'N/A',
                    organizationName: data.organizationName || 'System',
                }));
            }
            await Promise.all(notificationPromises);
            await this.notificationRepository
                .createQueryBuilder()
                .update(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.Notification)
                .set({ status: String(_dto_update_notification_dto__WEBPACK_IMPORTED_MODULE_9__.NotificationStatus.SENT) })
                .where('id = :id', { id: notification.id })
                .execute();
            this.logger.log(`Successfully sent notification ${notification.id} to user ${userId}`);
        }
        catch (error) {
            this.logger.error(`Failed to send notification to user ${userId}:`, error);
            throw error;
        }
    }
    compileTemplate(template, data) {
        return template.replace(/\{\{([^}]+)\}\}/g, (match, key) => {
            const value = key.split('.').reduce((obj, k) => obj === null || obj === void 0 ? void 0 : obj[k], data);
            return value || '';
        });
    }
    async markAsRead(notificationId, userId) {
        await this.notificationRepository
            .createQueryBuilder()
            .update(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.Notification)
            .set({
            readAt: new Date(),
            read: true
        })
            .where('id = :id AND userId = :userId', { id: notificationId, userId })
            .execute();
    }
    async markAllAsRead(userId) {
        await this.notificationRepository
            .createQueryBuilder()
            .update(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.Notification)
            .set({
            readAt: new Date(),
            read: true
        })
            .where('userId = :userId AND readAt IS NULL', { userId })
            .execute();
    }
    async getUnreadCount(userId) {
        return this.notificationRepository.count({
            where: {
                userId,
                readAt: null
            },
        });
    }
    async getUserNotifications(userId, options = {}) {
        const { skip = 0, take = 10, includeRead = false } = options;
        const queryBuilder = this.notificationRepository
            .createQueryBuilder('notification')
            .where('notification.userId = :userId', { userId });
        if (!includeRead) {
            queryBuilder.andWhere('notification.readAt IS NULL');
        }
        const [notifications, total] = await queryBuilder
            .orderBy('notification.createdAt', 'DESC')
            .skip(skip)
            .take(take)
            .getManyAndCount();
        return { notifications, total };
    }
    async sendEmailNotification(email, data) {
        var _a, _b;
        try {
            await ((_b = (_a = this.emailService).sendEmail) === null || _b === void 0 ? void 0 : _b.call(_a, {
                to: email,
                subject: `Appointment Reminder: ${data.organizationName}`,
                html: this.formatEmailContent(data)
            }));
            this.logger.log(`Sent email notification to ${email}`);
        }
        catch (error) {
            this.logger.error(`Error sending email to ${email}:`, error);
            this.logger.log(`Would send email to ${email} with content: ${JSON.stringify(data)}`);
        }
    }
    async sendSmsNotification(phone, data) {
        var _a, _b;
        try {
            await ((_b = (_a = this.smsService).sendSms) === null || _b === void 0 ? void 0 : _b.call(_a, phone, this.formatSmsContent(data)));
            this.logger.log(`Sent SMS notification to ${phone}`);
        }
        catch (error) {
            this.logger.error(`Error sending SMS to ${phone}:`, error);
            this.logger.log(`Would send SMS to ${phone} with content: ${JSON.stringify(data)}`);
        }
    }
    formatEmailContent(data) {
        return `
      <div>
        <h2>Appointment Reminder</h2>
        <p>Hello ${data.patientName},</p>
        <p>This is a reminder of your appointment with ${data.doctorName} on ${data.dateTime.toLocaleString()}</p>
        <p>Location: ${data.location}</p>
        ${data.notes ? `<p>Notes: ${data.notes}</p>` : ''}
        <p>Regards,<br>${data.organizationName}</p>
      </div>
    `;
    }
    formatSmsContent(data) {
        return `Hi ${data.patientName}, reminder of your appointment with ${data.organizationName} on ${data.dateTime.toLocaleString()}`;
    }
};
NotificationsService = NotificationsService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_notification_entity__WEBPACK_IMPORTED_MODULE_3__.Notification)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_notification_template_entity__WEBPACK_IMPORTED_MODULE_4__.NotificationTemplate)),
    __param(2, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_notification_preference_entity__WEBPACK_IMPORTED_MODULE_5__.NotificationPreference)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _shared_services_email_service__WEBPACK_IMPORTED_MODULE_6__.EmailService,
        _shared_services_sms_service__WEBPACK_IMPORTED_MODULE_7__.SmsService,
        _whatsapp_services_whatsapp_services__WEBPACK_IMPORTED_MODULE_8__.WhatsappService])
], NotificationsService);



/***/ }),

/***/ "./src/modules/organizations/controllers/organizations.controller.ts":
/*!***************************************************************************!*\
  !*** ./src/modules/organizations/controllers/organizations.controller.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationsController: () => (/* binding */ OrganizationsController)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../auth/guards/jwt-auth.guard */ "./src/modules/auth/guards/jwt-auth.guard.ts");
/* harmony import */ var _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../auth/guards/roles.guard */ "./src/modules/auth/guards/roles.guard.ts");
/* harmony import */ var _common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/decorators/roles.decorator */ "./src/common/decorators/roles.decorator.ts");
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
/* harmony import */ var _services_organizations_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../services/organizations.service */ "./src/modules/organizations/services/organizations.service.ts");
/* harmony import */ var _dto_create_organization_dto__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../dto/create-organization.dto */ "./src/modules/organizations/dto/create-organization.dto.ts");
/* harmony import */ var _dto_update_organization_dto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dto/update-organization.dto */ "./src/modules/organizations/dto/update-organization.dto.ts");
/* harmony import */ var _dto_organization_query_dto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../dto/organization-query.dto */ "./src/modules/organizations/dto/organization-query.dto.ts");
/* harmony import */ var _dto_add_user_dto__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../dto/add-user.dto */ "./src/modules/organizations/dto/add-user.dto.ts");
/* harmony import */ var _dto_update_subscription_dto__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../dto/update-subscription.dto */ "./src/modules/organizations/dto/update-subscription.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};













let OrganizationsController = class OrganizationsController {
    constructor(organizationsService) {
        this.organizationsService = organizationsService;
    }
    async create(createOrganizationDto, req) {
        if (!req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UnauthorizedException('User not authenticated');
        }
        return this.organizationsService.create(Object.assign(Object.assign({}, createOrganizationDto), { createdBy: { id: req.user.id } }));
    }
    async findAll(query) {
        return this.organizationsService.findAll(query);
    }
    async getCurrentOrganization(req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UnauthorizedException('No organization context found');
        }
        return this.organizationsService.findOne(req.organization.id);
    }
    async findOne(id) {
        const organization = await this.organizationsService.findOne(id);
        if (!organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.NotFoundException('Organization not found');
        }
        return organization;
    }
    async update(id, updateOrganizationDto, req) {
        if (!req.user || !req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UnauthorizedException('User or organization context not found');
        }
        if (id !== req.organization.id && req.user.role !== _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.SUPER_ADMIN) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Cannot update other organizations');
        }
        return this.organizationsService.update(id, Object.assign(Object.assign({}, updateOrganizationDto), { updatedBy: req.user.id }));
    }
    async remove(id) {
        await this.organizationsService.remove(id);
    }
    async addUser(id, addUserDto, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UnauthorizedException('No organization context found');
        }
        if (id !== req.organization.id) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Cannot add users to other organizations');
        }
        return this.organizationsService.addUser(id, addUserDto);
    }
    async removeUser(id, userId, req) {
        if (!req.user || !req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UnauthorizedException('User or organization context not found');
        }
        if (id !== req.organization.id) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Cannot remove users from other organizations');
        }
        if (req.user.id === userId) {
            const admins = await this.organizationsService.getAdminCount(id);
            if (admins === 1) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Cannot remove the last administrator');
            }
        }
        await this.organizationsService.removeUser(id, userId);
    }
    async updateSubscription(id, updateSubscriptionDto, req) {
        if (!req.user || !req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UnauthorizedException('User or organization context not found');
        }
        if (id !== req.organization.id && req.user.role !== _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.SUPER_ADMIN) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Cannot update other organizations\' subscriptions');
        }
        return this.organizationsService.updateSubscription(id, updateSubscriptionDto);
    }
    async getStatistics(id, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UnauthorizedException('No organization context found');
        }
        if (id !== req.organization.id) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Cannot view other organizations\' statistics');
        }
        return this.organizationsService.getStatistics(id);
    }
    async verifyDomain(id, domain, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UnauthorizedException('No organization context found');
        }
        if (id !== req.organization.id) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Cannot verify other organizations\' domains');
        }
        return this.organizationsService.verifyDomain(id, domain);
    }
    async getAuditLogs(id, query, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UnauthorizedException('No organization context found');
        }
        if (id !== req.organization.id) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Cannot view other organizations\' audit logs');
        }
        return this.organizationsService.getAuditLogs(id, query);
    }
};
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Create new organization' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'Organization created successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_create_organization_dto__WEBPACK_IMPORTED_MODULE_7__.CreateOrganizationDto, Object]),
    __metadata("design:returntype", Promise)
], OrganizationsController.prototype, "create", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.SUPER_ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get all organizations' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return all organizations' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_organization_query_dto__WEBPACK_IMPORTED_MODULE_9__.OrganizationQueryDto]),
    __metadata("design:returntype", Promise)
], OrganizationsController.prototype, "findAll", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('current'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get current organization' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return current organization details' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], OrganizationsController.prototype, "getCurrentOrganization", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.SUPER_ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get organization by id' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return organization details' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], OrganizationsController.prototype, "findOne", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)(':id'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Update organization' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Organization updated successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_update_organization_dto__WEBPACK_IMPORTED_MODULE_8__.UpdateOrganizationDto, Object]),
    __metadata("design:returntype", Promise)
], OrganizationsController.prototype, "update", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Delete)(':id'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.SUPER_ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Delete organization' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.NO_CONTENT, description: 'Organization deleted successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], OrganizationsController.prototype, "remove", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(':id/users'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Add user to organization' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'User added successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_add_user_dto__WEBPACK_IMPORTED_MODULE_10__.AddUserDto, Object]),
    __metadata("design:returntype", Promise)
], OrganizationsController.prototype, "addUser", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Delete)(':id/users/:userId'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Remove user from organization' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.NO_CONTENT, description: 'User removed successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('userId', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Object]),
    __metadata("design:returntype", Promise)
], OrganizationsController.prototype, "removeUser", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)(':id/subscription'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.SUPER_ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Update organization subscription' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Subscription updated successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_update_subscription_dto__WEBPACK_IMPORTED_MODULE_11__.UpdateSubscriptionDto, Object]),
    __metadata("design:returntype", Promise)
], OrganizationsController.prototype, "updateSubscription", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id/statistics'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get organization statistics' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return organization statistics' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: Object }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], OrganizationsController.prototype, "getStatistics", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(':id/verify-domain'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Verify organization domain' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Domain verified successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: Boolean }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)('domain')),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Object]),
    __metadata("design:returntype", Promise)
], OrganizationsController.prototype, "verifyDomain", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id/audit-logs'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get organization audit logs' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return organization audit logs' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object, Object]),
    __metadata("design:returntype", Promise)
], OrganizationsController.prototype, "getAuditLogs", null);
OrganizationsController = __decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiTags)('Organizations'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Controller)('organizations'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UseGuards)(_auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__.JwtAuthGuard, _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__.RolesGuard),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiBearerAuth)(),
    __metadata("design:paramtypes", [_services_organizations_service__WEBPACK_IMPORTED_MODULE_6__.OrganizationsService])
], OrganizationsController);



/***/ }),

/***/ "./src/modules/organizations/dto/add-user.dto.ts":
/*!*******************************************************!*\
  !*** ./src/modules/organizations/dto/add-user.dto.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AddUserDto: () => (/* binding */ AddUserDto),
/* harmony export */   AddressDto: () => (/* binding */ AddressDto),
/* harmony export */   EmergencyContactDto: () => (/* binding */ EmergencyContactDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





class AddressDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { street: { required: false, type: () => String, maxLength: 100 }, city: { required: false, type: () => String, maxLength: 50 }, state: { required: false, type: () => String, maxLength: 50 }, postalCode: { required: false, type: () => String, maxLength: 20 }, country: { required: false, type: () => String, maxLength: 50 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], AddressDto.prototype, "street", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], AddressDto.prototype, "city", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], AddressDto.prototype, "state", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(20),
    __metadata("design:type", String)
], AddressDto.prototype, "postalCode", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], AddressDto.prototype, "country", void 0);
class EmergencyContactDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { name: { required: true, type: () => String, maxLength: 100 }, relationship: { required: true, type: () => String, maxLength: 50 }, phone: { required: true, type: () => String }, address: { required: false, type: () => String, maxLength: 200 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], EmergencyContactDto.prototype, "name", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], EmergencyContactDto.prototype, "relationship", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(undefined),
    __metadata("design:type", String)
], EmergencyContactDto.prototype, "phone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(200),
    __metadata("design:type", String)
], EmergencyContactDto.prototype, "address", void 0);
class AddUserDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { firstName: { required: true, type: () => String, minLength: 2, maxLength: 50 }, lastName: { required: true, type: () => String, minLength: 2, maxLength: 50 }, email: { required: true, type: () => String, maxLength: 100 }, password: { required: true, type: () => String, minLength: 8, maxLength: 50, pattern: "/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/" }, role: { required: true, enum: (__webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts").Role) }, phoneNumber: { required: false, type: () => String }, title: { required: false, type: () => String, maxLength: 100 }, department: { required: false, type: () => String, maxLength: 100 }, employeeId: { required: false, type: () => String, maxLength: 50 }, address: { required: false, type: () => (__webpack_require__(/*! ./add-user.dto */ "./src/modules/organizations/dto/add-user.dto.ts").AddressDto) }, emergencyContact: { required: false, type: () => (__webpack_require__(/*! ./add-user.dto */ "./src/modules/organizations/dto/add-user.dto.ts").EmergencyContactDto) }, licenseNumber: { required: false, type: () => String, maxLength: 50 }, specialization: { required: false, type: () => String, maxLength: 100 }, qualifications: { required: false, type: () => [String] }, certifications: { required: false, type: () => [String] }, languages: { required: false, type: () => [String] }, preferences: { required: false, type: () => ({ theme: { required: false, type: () => String }, notifications: { required: false, type: () => ({ email: { required: false, type: () => Boolean }, sms: { required: false, type: () => Boolean }, inApp: { required: false, type: () => Boolean } }) }, timezone: { required: false, type: () => String }, language: { required: false, type: () => String } }) }, metadata: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], AddUserDto.prototype, "firstName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], AddUserDto.prototype, "lastName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], AddUserDto.prototype, "email", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(8),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Matches)(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/, {
        message: 'Password must contain at least one uppercase letter, one lowercase letter, one number and one special character'
    }),
    __metadata("design:type", String)
], AddUserDto.prototype, "password", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ enum: _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_3__.Role }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_3__.Role),
    __metadata("design:type", String)
], AddUserDto.prototype, "role", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(undefined),
    __metadata("design:type", String)
], AddUserDto.prototype, "phoneNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], AddUserDto.prototype, "title", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], AddUserDto.prototype, "department", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], AddUserDto.prototype, "employeeId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => AddressDto),
    __metadata("design:type", AddressDto)
], AddUserDto.prototype, "address", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => EmergencyContactDto),
    __metadata("design:type", EmergencyContactDto)
], AddUserDto.prototype, "emergencyContact", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], AddUserDto.prototype, "licenseNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], AddUserDto.prototype, "specialization", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], AddUserDto.prototype, "qualifications", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], AddUserDto.prototype, "certifications", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], AddUserDto.prototype, "languages", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], AddUserDto.prototype, "preferences", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], AddUserDto.prototype, "metadata", void 0);


/***/ }),

/***/ "./src/modules/organizations/dto/create-organization.dto.ts":
/*!******************************************************************!*\
  !*** ./src/modules/organizations/dto/create-organization.dto.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Address: () => (/* binding */ Address),
/* harmony export */   Contact: () => (/* binding */ Contact),
/* harmony export */   CreateOrganizationDto: () => (/* binding */ CreateOrganizationDto),
/* harmony export */   OrganizationType: () => (/* binding */ OrganizationType),
/* harmony export */   SubscriptionPlan: () => (/* binding */ SubscriptionPlan)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var OrganizationType;
(function (OrganizationType) {
    OrganizationType["HOSPITAL"] = "HOSPITAL";
    OrganizationType["CLINIC"] = "CLINIC";
    OrganizationType["PRACTICE"] = "PRACTICE";
    OrganizationType["LABORATORY"] = "LABORATORY";
    OrganizationType["PHARMACY"] = "PHARMACY";
    OrganizationType["OTHER"] = "OTHER";
})(OrganizationType || (OrganizationType = {}));
var SubscriptionPlan;
(function (SubscriptionPlan) {
    SubscriptionPlan["FREE"] = "FREE";
    SubscriptionPlan["STARTER"] = "STARTER";
    SubscriptionPlan["PROFESSIONAL"] = "PROFESSIONAL";
    SubscriptionPlan["ENTERPRISE"] = "ENTERPRISE";
})(SubscriptionPlan || (SubscriptionPlan = {}));
class Address {
    static _OPENAPI_METADATA_FACTORY() {
        return { street: { required: true, type: () => String, maxLength: 100 }, city: { required: true, type: () => String, maxLength: 100 }, state: { required: true, type: () => String, maxLength: 100 }, postalCode: { required: true, type: () => String, maxLength: 20 }, country: { required: true, type: () => String, maxLength: 100 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], Address.prototype, "street", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], Address.prototype, "city", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], Address.prototype, "state", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(20),
    __metadata("design:type", String)
], Address.prototype, "postalCode", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], Address.prototype, "country", void 0);
class Contact {
    static _OPENAPI_METADATA_FACTORY() {
        return { name: { required: true, type: () => String, maxLength: 100 }, position: { required: true, type: () => String, maxLength: 100 }, email: { required: true, type: () => String }, phone: { required: true, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], Contact.prototype, "name", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], Contact.prototype, "position", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)(),
    __metadata("design:type", String)
], Contact.prototype, "email", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    __metadata("design:type", String)
], Contact.prototype, "phone", void 0);
class CreateOrganizationDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { name: { required: true, type: () => String, minLength: 2, maxLength: 100, pattern: "/^[a-zA-Z0-9\\s\\-_]+$/" }, type: { required: true, enum: (__webpack_require__(/*! ./create-organization.dto */ "./src/modules/organizations/dto/create-organization.dto.ts").OrganizationType) }, description: { required: false, type: () => String, maxLength: 200 }, email: { required: true, type: () => String }, phone: { required: true, type: () => String }, domain: { required: false, type: () => String, pattern: "/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\\.[a-zA-Z]{2,}$/" }, address: { required: true, type: () => (__webpack_require__(/*! ./create-organization.dto */ "./src/modules/organizations/dto/create-organization.dto.ts").Address) }, primaryContact: { required: true, type: () => (__webpack_require__(/*! ./create-organization.dto */ "./src/modules/organizations/dto/create-organization.dto.ts").Contact) }, additionalContacts: { required: false, type: () => [(__webpack_require__(/*! ./create-organization.dto */ "./src/modules/organizations/dto/create-organization.dto.ts").Contact)] }, subscriptionPlan: { required: true, enum: (__webpack_require__(/*! ./create-organization.dto */ "./src/modules/organizations/dto/create-organization.dto.ts").SubscriptionPlan) }, taxId: { required: false, type: () => String, maxLength: 50 }, registrationNumber: { required: false, type: () => String, maxLength: 50 }, licenseNumber: { required: false, type: () => String, maxLength: 50 }, settings: { required: false, type: () => ({ timezone: { required: false, type: () => String }, dateFormat: { required: false, type: () => String }, timeFormat: { required: false, type: () => String }, currency: { required: false, type: () => String }, language: { required: false, type: () => String }, notificationSettings: { required: false, type: () => ({ email: { required: false, type: () => Boolean }, sms: { required: false, type: () => Boolean }, push: { required: false, type: () => Boolean } }) }, branding: { required: false, type: () => ({ logo: { required: false, type: () => String }, colors: { required: false, type: () => ({ primary: { required: false, type: () => String }, secondary: { required: false, type: () => String } }) } }) } }) }, metadata: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Matches)(/^[a-zA-Z0-9\s\-_]+$/),
    __metadata("design:type", String)
], CreateOrganizationDto.prototype, "name", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ enum: OrganizationType }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(OrganizationType),
    __metadata("design:type", String)
], CreateOrganizationDto.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(200),
    __metadata("design:type", String)
], CreateOrganizationDto.prototype, "description", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)(),
    __metadata("design:type", String)
], CreateOrganizationDto.prototype, "email", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    __metadata("design:type", String)
], CreateOrganizationDto.prototype, "phone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Matches)(/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/),
    __metadata("design:type", String)
], CreateOrganizationDto.prototype, "domain", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Address),
    __metadata("design:type", Address)
], CreateOrganizationDto.prototype, "address", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Contact),
    __metadata("design:type", Contact)
], CreateOrganizationDto.prototype, "primaryContact", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ type: [Contact] }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)({ each: true }),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Contact),
    __metadata("design:type", Array)
], CreateOrganizationDto.prototype, "additionalContacts", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ enum: SubscriptionPlan }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(SubscriptionPlan),
    __metadata("design:type", String)
], CreateOrganizationDto.prototype, "subscriptionPlan", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], CreateOrganizationDto.prototype, "taxId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], CreateOrganizationDto.prototype, "registrationNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], CreateOrganizationDto.prototype, "licenseNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], CreateOrganizationDto.prototype, "settings", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], CreateOrganizationDto.prototype, "metadata", void 0);


/***/ }),

/***/ "./src/modules/organizations/dto/organization-query.dto.ts":
/*!*****************************************************************!*\
  !*** ./src/modules/organizations/dto/organization-query.dto.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DateRangeDto: () => (/* binding */ DateRangeDto),
/* harmony export */   OrganizationQueryDto: () => (/* binding */ OrganizationQueryDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





class DateRangeDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { startDate: { required: false, type: () => String }, endDate: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Start date for filtering' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDateString)(),
    __metadata("design:type", String)
], DateRangeDto.prototype, "startDate", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'End date for filtering' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDateString)(),
    __metadata("design:type", String)
], DateRangeDto.prototype, "endDate", void 0);
class OrganizationQueryDto {
    constructor() {
        this.page = 1;
        this.limit = 10;
        this.sortBy = 'createdAt';
        this.sortOrder = 'DESC';
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { search: { required: false, type: () => String }, status: { required: false, enum: (__webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").OrganizationStatus) }, subscriptionTier: { required: false, enum: (__webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").SubscriptionTier) }, isDomainVerified: { required: false, type: () => Boolean }, isSubscriptionActive: { required: false, type: () => Boolean }, minUsers: { required: false, type: () => Number, minimum: 0 }, maxUsers: { required: false, type: () => Number, minimum: 1 }, storageUsagePercentage: { required: false, type: () => Number, minimum: 0, maximum: 100 }, createdAt: { required: false, type: () => (__webpack_require__(/*! ./organization-query.dto */ "./src/modules/organizations/dto/organization-query.dto.ts").DateRangeDto) }, subscriptionDate: { required: false, type: () => (__webpack_require__(/*! ./organization-query.dto */ "./src/modules/organizations/dto/organization-query.dto.ts").DateRangeDto) }, industries: { required: false, type: () => [String] }, includeDeleted: { required: false, type: () => Boolean }, location: { required: false, type: () => String }, timezone: { required: false, type: () => String }, page: { required: false, type: () => Number, default: 1, minimum: 1 }, limit: { required: false, type: () => Number, default: 10, minimum: 1, maximum: 100 }, sortBy: { required: false, type: () => String, default: "createdAt" }, sortOrder: { required: false, type: () => Object, default: "DESC" }, includeUsers: { required: false, type: () => Boolean }, includeSubscription: { required: false, type: () => Boolean }, includeStatistics: { required: false, type: () => Boolean }, includeAuditLogs: { required: false, type: () => Boolean } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Search term for name or domain' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], OrganizationQueryDto.prototype, "search", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.OrganizationStatus }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.OrganizationStatus),
    __metadata("design:type", String)
], OrganizationQueryDto.prototype, "status", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.SubscriptionTier }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.SubscriptionTier),
    __metadata("design:type", String)
], OrganizationQueryDto.prototype, "subscriptionTier", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by domain verification status' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], OrganizationQueryDto.prototype, "isDomainVerified", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by subscription active status' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], OrganizationQueryDto.prototype, "isSubscriptionActive", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by user count greater than' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    __metadata("design:type", Number)
], OrganizationQueryDto.prototype, "minUsers", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by user count less than' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    __metadata("design:type", Number)
], OrganizationQueryDto.prototype, "maxUsers", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by storage usage percentage' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(100),
    __metadata("design:type", Number)
], OrganizationQueryDto.prototype, "storageUsagePercentage", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => DateRangeDto),
    __metadata("design:type", DateRangeDto)
], OrganizationQueryDto.prototype, "createdAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => DateRangeDto),
    __metadata("design:type", DateRangeDto)
], OrganizationQueryDto.prototype, "subscriptionDate", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by specific industries' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], OrganizationQueryDto.prototype, "industries", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Include deleted organizations' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], OrganizationQueryDto.prototype, "includeDeleted", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by specific location' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], OrganizationQueryDto.prototype, "location", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Filter by timezone' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], OrganizationQueryDto.prototype, "timezone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Page number', minimum: 1 }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    __metadata("design:type", Number)
], OrganizationQueryDto.prototype, "page", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Items per page', minimum: 1, maximum: 100 }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(100),
    __metadata("design:type", Number)
], OrganizationQueryDto.prototype, "limit", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Sort field',
        enum: ['name', 'createdAt', 'userCount', 'storageUsage', 'subscriptionEndDate']
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], OrganizationQueryDto.prototype, "sortBy", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Sort order', enum: ['ASC', 'DESC'] }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(['ASC', 'DESC']),
    __metadata("design:type", String)
], OrganizationQueryDto.prototype, "sortOrder", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Include user details' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], OrganizationQueryDto.prototype, "includeUsers", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Include subscription details' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], OrganizationQueryDto.prototype, "includeSubscription", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Include statistics' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], OrganizationQueryDto.prototype, "includeStatistics", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Include audit logs' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], OrganizationQueryDto.prototype, "includeAuditLogs", void 0);


/***/ }),

/***/ "./src/modules/organizations/dto/update-organization.dto.ts":
/*!******************************************************************!*\
  !*** ./src/modules/organizations/dto/update-organization.dto.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UpdateOrganizationDto: () => (/* binding */ UpdateOrganizationDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _create_organization_dto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./create-organization.dto */ "./src/modules/organizations/dto/create-organization.dto.ts");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




class UpdateOrganizationDto extends (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.PartialType)((0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.OmitType)(_create_organization_dto__WEBPACK_IMPORTED_MODULE_1__.CreateOrganizationDto, ['subscriptionPlan'])) {
    static _OPENAPI_METADATA_FACTORY() {
        return { isActive: { required: false, type: () => Boolean }, isVerified: { required: false, type: () => Boolean } };
    }
}
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateOrganizationDto.prototype, "isActive", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateOrganizationDto.prototype, "isVerified", void 0);


/***/ }),

/***/ "./src/modules/organizations/dto/update-subscription.dto.ts":
/*!******************************************************************!*\
  !*** ./src/modules/organizations/dto/update-subscription.dto.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BillingDetailsDto: () => (/* binding */ BillingDetailsDto),
/* harmony export */   FeatureLimitsDto: () => (/* binding */ FeatureLimitsDto),
/* harmony export */   UpdateSubscriptionDto: () => (/* binding */ UpdateSubscriptionDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





class BillingDetailsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { billingEmail: { required: false, type: () => String }, billingAddress: { required: false, type: () => String }, taxId: { required: false, type: () => String }, paymentMethod: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], BillingDetailsDto.prototype, "billingEmail", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], BillingDetailsDto.prototype, "billingAddress", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], BillingDetailsDto.prototype, "taxId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], BillingDetailsDto.prototype, "paymentMethod", void 0);
class FeatureLimitsDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { maxProjects: { required: false, type: () => Number, minimum: 0 }, maxTeams: { required: false, type: () => Number, minimum: 0 }, maxIntegrations: { required: false, type: () => Number, minimum: 0 }, maxCustomFields: { required: false, type: () => Number, minimum: 0 }, maxApiCalls: { required: false, type: () => Number, minimum: 0 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    __metadata("design:type", Number)
], FeatureLimitsDto.prototype, "maxProjects", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    __metadata("design:type", Number)
], FeatureLimitsDto.prototype, "maxTeams", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    __metadata("design:type", Number)
], FeatureLimitsDto.prototype, "maxIntegrations", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    __metadata("design:type", Number)
], FeatureLimitsDto.prototype, "maxCustomFields", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    __metadata("design:type", Number)
], FeatureLimitsDto.prototype, "maxApiCalls", void 0);
class UpdateSubscriptionDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { tier: { required: true, enum: (__webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").SubscriptionTier) }, startDate: { required: true, type: () => String }, endDate: { required: true, type: () => String }, maxUsers: { required: true, type: () => Number, minimum: 1, maximum: 10000 }, maxStorage: { required: true, type: () => Number, minimum: 1 }, autoRenew: { required: false, type: () => Boolean }, isTrial: { required: false, type: () => Boolean }, trialEndDate: { required: false, type: () => String }, billingDetails: { required: false, type: () => (__webpack_require__(/*! ./update-subscription.dto */ "./src/modules/organizations/dto/update-subscription.dto.ts").BillingDetailsDto) }, featureLimits: { required: false, type: () => (__webpack_require__(/*! ./update-subscription.dto */ "./src/modules/organizations/dto/update-subscription.dto.ts").FeatureLimitsDto) }, billingCycle: { required: false, type: () => Number, minimum: 1, maximum: 12 }, pricePerUser: { required: false, type: () => Number, minimum: 0 }, basePrice: { required: false, type: () => Number, minimum: 0 }, discountPercentage: { required: false, type: () => Number, minimum: 0, maximum: 100 }, features: { required: false, type: () => ({ customDomain: { required: false, type: () => Boolean }, ssoEnabled: { required: false, type: () => Boolean }, apiAccess: { required: false, type: () => Boolean }, advancedReporting: { required: false, type: () => Boolean }, customBranding: { required: false, type: () => Boolean }, prioritySupport: { required: false, type: () => Boolean }, dataExport: { required: false, type: () => Boolean }, auditLogs: { required: false, type: () => Boolean } }) }, customization: { required: false, type: () => ({ theme: { required: false, type: () => String }, modules: { required: false, type: () => [String] }, restrictions: { required: false, type: () => [String] }, customFields: { required: false, type: () => [Object] } }) }, supportLevel: { required: false, type: () => Object }, metadata: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ enum: _entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.SubscriptionTier, description: 'Subscription tier level' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.SubscriptionTier),
    __metadata("design:type", String)
], UpdateSubscriptionDto.prototype, "tier", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Subscription start date' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDateString)(),
    __metadata("design:type", String)
], UpdateSubscriptionDto.prototype, "startDate", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Subscription end date' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDateString)(),
    __metadata("design:type", String)
], UpdateSubscriptionDto.prototype, "endDate", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Maximum number of users allowed' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(10000),
    __metadata("design:type", Number)
], UpdateSubscriptionDto.prototype, "maxUsers", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'Maximum storage in MB' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    __metadata("design:type", Number)
], UpdateSubscriptionDto.prototype, "maxStorage", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Auto-renewal enabled' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateSubscriptionDto.prototype, "autoRenew", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Trial period enabled' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateSubscriptionDto.prototype, "isTrial", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Trial end date' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDateString)(),
    __metadata("design:type", String)
], UpdateSubscriptionDto.prototype, "trialEndDate", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => BillingDetailsDto),
    __metadata("design:type", BillingDetailsDto)
], UpdateSubscriptionDto.prototype, "billingDetails", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => FeatureLimitsDto),
    __metadata("design:type", FeatureLimitsDto)
], UpdateSubscriptionDto.prototype, "featureLimits", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Billing cycle in months' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(12),
    __metadata("design:type", Number)
], UpdateSubscriptionDto.prototype, "billingCycle", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Price per user' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNumber)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    __metadata("design:type", Number)
], UpdateSubscriptionDto.prototype, "pricePerUser", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Base price for subscription' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNumber)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    __metadata("design:type", Number)
], UpdateSubscriptionDto.prototype, "basePrice", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Discount percentage' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNumber)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(100),
    __metadata("design:type", Number)
], UpdateSubscriptionDto.prototype, "discountPercentage", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Custom features enabled' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], UpdateSubscriptionDto.prototype, "features", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Additional customization options' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], UpdateSubscriptionDto.prototype, "customization", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ description: 'Support level included' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(['BASIC', 'STANDARD', 'PREMIUM', 'ENTERPRISE']),
    __metadata("design:type", String)
], UpdateSubscriptionDto.prototype, "supportLevel", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], UpdateSubscriptionDto.prototype, "metadata", void 0);


/***/ }),

/***/ "./src/modules/organizations/entities/organization-audit-log.entity.ts":
/*!*****************************************************************************!*\
  !*** ./src/modules/organizations/entities/organization-audit-log.entity.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationAuditLog: () => (/* binding */ OrganizationAuditLog)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _organization_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



let OrganizationAuditLog = class OrganizationAuditLog {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, organization: { required: true, type: () => (__webpack_require__(/*! ./organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, eventType: { required: true, type: () => String }, data: { required: true, type: () => Object }, performedBy: { required: true, type: () => String }, timestamp: { required: true, type: () => Date }, metadata: { required: false, type: () => Object }, ipAddress: { required: false, type: () => String }, userAgent: { required: false, type: () => String }, resourceType: { required: false, type: () => String }, resourceId: { required: false, type: () => String }, actionType: { required: false, type: () => String }, status: { required: false, type: () => Object }, errorMessage: { required: false, type: () => String }, changes: { required: false, type: () => ({ before: { required: true, type: () => Object }, after: { required: true, type: () => Object } }) }, tags: { required: false, type: () => [String] }, isSensitive: { required: true, type: () => Boolean }, duration: { required: false, type: () => Number }, sessionId: { required: false, type: () => String }, requestId: { required: false, type: () => String }, environment: { required: false, type: () => String }, version: { required: false, type: () => String }, performedByEmail: { required: false, type: () => String }, performedByRole: { required: false, type: () => String }, resourceName: { required: false, type: () => String }, retainOnDelete: { required: false, type: () => Boolean }, complianceMetadata: { required: false, type: () => ({ dataRetentionPeriod: { required: false, type: () => Number }, dataClassification: { required: false, type: () => String }, regulatoryRequirements: { required: false, type: () => [String] }, piiInvolved: { required: false, type: () => Boolean } }) } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization)
], OrganizationAuditLog.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "eventType", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb'),
    __metadata("design:type", Object)
], OrganizationAuditLog.prototype, "data", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "performedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", Date)
], OrganizationAuditLog.prototype, "timestamp", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], OrganizationAuditLog.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "ipAddress", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "userAgent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('varchar', { length: 50, nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "resourceType", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "resourceId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('varchar', { length: 50, nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "actionType", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('varchar', { length: 50, nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { nullable: true }),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "errorMessage", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], OrganizationAuditLog.prototype, "changes", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { array: true, nullable: true }),
    __metadata("design:type", Array)
], OrganizationAuditLog.prototype, "tags", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    __metadata("design:type", Boolean)
], OrganizationAuditLog.prototype, "isSensitive", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('int', { nullable: true }),
    __metadata("design:type", Number)
], OrganizationAuditLog.prototype, "duration", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('varchar', { length: 100, nullable: true }),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "sessionId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('varchar', { length: 100, nullable: true }),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "requestId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('varchar', { length: 50, nullable: true }),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "environment", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('varchar', { length: 50, nullable: true }),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "version", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('varchar', { length: 255, nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "performedByEmail", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('varchar', { length: 100, nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "performedByRole", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('varchar', { length: 255, nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], OrganizationAuditLog.prototype, "resourceName", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    __metadata("design:type", Boolean)
], OrganizationAuditLog.prototype, "retainOnDelete", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], OrganizationAuditLog.prototype, "complianceMetadata", void 0);
OrganizationAuditLog = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('organization_audit_logs')
], OrganizationAuditLog);



/***/ }),

/***/ "./src/modules/organizations/entities/organization-invitation.entity.ts":
/*!******************************************************************************!*\
  !*** ./src/modules/organizations/entities/organization-invitation.entity.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InvitationStatus: () => (/* binding */ InvitationStatus),
/* harmony export */   OrganizationInvitation: () => (/* binding */ OrganizationInvitation)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _organization_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var InvitationStatus;
(function (InvitationStatus) {
    InvitationStatus["PENDING"] = "PENDING";
    InvitationStatus["ACCEPTED"] = "ACCEPTED";
    InvitationStatus["DECLINED"] = "DECLINED";
    InvitationStatus["EXPIRED"] = "EXPIRED";
    InvitationStatus["REVOKED"] = "REVOKED";
})(InvitationStatus || (InvitationStatus = {}));
let OrganizationInvitation = class OrganizationInvitation {
    isExpired() {
        return new Date() > this.expiresAt;
    }
    canBeResent() {
        return (this.status === InvitationStatus.PENDING &&
            !this.isExpired() &&
            this.resendCount < 3);
    }
    canBeAccepted() {
        return (this.status === InvitationStatus.PENDING &&
            !this.isExpired());
    }
    canBeRevoked() {
        return this.status === InvitationStatus.PENDING;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, organization: { required: true, type: () => (__webpack_require__(/*! ./organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, email: { required: true, type: () => String }, roles: { required: true, type: () => [String] }, invitedBy: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, token: { required: true, type: () => String }, expiresAt: { required: true, type: () => Date }, status: { required: true, enum: (__webpack_require__(/*! ./organization-invitation.entity */ "./src/modules/organizations/entities/organization-invitation.entity.ts").InvitationStatus) }, invitedUserId: { required: true, type: () => String }, invitedUser: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, invitedById: { required: true, type: () => String }, departmentIds: { required: true, type: () => [String] }, acceptedAt: { required: true, type: () => Date }, declinedAt: { required: true, type: () => Date }, revokedAt: { required: true, type: () => Date }, revokedById: { required: true, type: () => String }, revokedBy: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, message: { required: true, type: () => String }, metadata: { required: true, type: () => Object }, isResent: { required: true, type: () => Boolean }, lastResentAt: { required: true, type: () => Date }, resendCount: { required: true, type: () => Number }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], OrganizationInvitation.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], OrganizationInvitation.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization, organization => organization.invitations),
    __metadata("design:type", _organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization)
], OrganizationInvitation.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], OrganizationInvitation.prototype, "email", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('simple-array'),
    __metadata("design:type", Array)
], OrganizationInvitation.prototype, "roles", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User)
], OrganizationInvitation.prototype, "invitedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], OrganizationInvitation.prototype, "token", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", Date)
], OrganizationInvitation.prototype, "expiresAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: InvitationStatus,
        default: InvitationStatus.PENDING
    }),
    __metadata("design:type", String)
], OrganizationInvitation.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('json', { nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organization_entity__WEBPACK_IMPORTED_MODULE_2__.Organization),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], OrganizationInvitation.prototype, "invitedUserId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User, { nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'invitedUserId' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User)
], OrganizationInvitation.prototype, "invitedUser", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], OrganizationInvitation.prototype, "invitedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'invitedById' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: InvitationStatus,
        default: InvitationStatus.PENDING
    }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('simple-array'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { array: true, nullable: true }),
    __metadata("design:type", Array)
], OrganizationInvitation.prototype, "departmentIds", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], OrganizationInvitation.prototype, "acceptedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], OrganizationInvitation.prototype, "declinedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], OrganizationInvitation.prototype, "revokedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], OrganizationInvitation.prototype, "revokedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User, { nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'revokedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User)
], OrganizationInvitation.prototype, "revokedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ unique: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], OrganizationInvitation.prototype, "message", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], OrganizationInvitation.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], OrganizationInvitation.prototype, "isResent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], OrganizationInvitation.prototype, "lastResentAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: 0 }),
    __metadata("design:type", Number)
], OrganizationInvitation.prototype, "resendCount", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], OrganizationInvitation.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], OrganizationInvitation.prototype, "updatedAt", void 0);
OrganizationInvitation = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('organization_invitations')
], OrganizationInvitation);



/***/ }),

/***/ "./src/modules/organizations/entities/organization.entity.ts":
/*!*******************************************************************!*\
  !*** ./src/modules/organizations/entities/organization.entity.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Organization: () => (/* binding */ Organization),
/* harmony export */   OrganizationStatus: () => (/* binding */ OrganizationStatus),
/* harmony export */   SubscriptionTier: () => (/* binding */ SubscriptionTier)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _tickets_entities_ticket_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../tickets/entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var SubscriptionTier;
(function (SubscriptionTier) {
    SubscriptionTier["FREE"] = "FREE";
    SubscriptionTier["BASIC"] = "BASIC";
    SubscriptionTier["PROFESSIONAL"] = "PROFESSIONAL";
    SubscriptionTier["ENTERPRISE"] = "ENTERPRISE";
})(SubscriptionTier || (SubscriptionTier = {}));
var OrganizationStatus;
(function (OrganizationStatus) {
    OrganizationStatus["ACTIVE"] = "ACTIVE";
    OrganizationStatus["SUSPENDED"] = "SUSPENDED";
    OrganizationStatus["PENDING"] = "PENDING";
})(OrganizationStatus || (OrganizationStatus = {}));
let Organization = class Organization {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, name: { required: true, type: () => String }, description: { required: true, type: () => String }, slug: { required: true, type: () => String }, logo: { required: true, type: () => String }, domain: { required: true, type: () => String }, isDomainVerified: { required: true, type: () => Boolean }, status: { required: true, enum: (__webpack_require__(/*! ./organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").OrganizationStatus) }, subscriptionTier: { required: true, enum: (__webpack_require__(/*! ./organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").SubscriptionTier) }, subscriptionStartDate: { required: true, type: () => Date }, subscriptionEndDate: { required: true, type: () => Date }, isSubscriptionActive: { required: true, type: () => Boolean }, settings: { required: true, type: () => ({ ticketPriorities: { required: false, type: () => [String] }, ticketCategories: { required: false, type: () => [String] }, customFields: { required: false, type: () => [Object] }, notificationSettings: { required: false, type: () => Object }, brandingSettings: { required: false, type: () => Object } }) }, maxUsers: { required: true, type: () => Number }, maxStorage: { required: true, type: () => Number }, createdById: { required: true, type: () => String }, createdBy: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, updatedById: { required: true, type: () => String }, updatedBy: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, users: { required: true, type: () => [(__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User)] }, tickets: { required: true, type: () => [(__webpack_require__(/*! ../../tickets/entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket)] }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, deletedAt: { required: true, type: () => Date }, metadata: { required: true, type: () => ({ industry: { required: false, type: () => String }, size: { required: false, type: () => String }, location: { required: false, type: () => String }, timezone: { required: false, type: () => String }, customAttributes: { required: false, type: () => Object } }) }, contactInfo: { required: true, type: () => ({ email: { required: false, type: () => String }, phone: { required: false, type: () => String }, address: { required: false, type: () => ({ street: { required: false, type: () => String }, city: { required: false, type: () => String }, state: { required: false, type: () => String }, country: { required: false, type: () => String }, postalCode: { required: false, type: () => String } }) } }) }, allowedDomains: { required: true, type: () => [String] }, isEmailVerificationRequired: { required: true, type: () => Boolean }, isTwoFactorAuthRequired: { required: true, type: () => Boolean }, auditConfig: { required: true, type: () => ({ enableAuditLog: { required: false, type: () => Boolean }, retentionPeriod: { required: false, type: () => Number }, logLevel: { required: false, type: () => String } }) } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Organization.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 100 }),
    __metadata("design:type", String)
], Organization.prototype, "name", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 255, nullable: true }),
    __metadata("design:type", String)
], Organization.prototype, "description", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 100, unique: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], Organization.prototype, "slug", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 255, nullable: true }),
    __metadata("design:type", String)
], Organization.prototype, "logo", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ length: 100, nullable: true }),
    __metadata("design:type", String)
], Organization.prototype, "domain", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], Organization.prototype, "isDomainVerified", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: OrganizationStatus,
        default: OrganizationStatus.PENDING
    }),
    __metadata("design:type", String)
], Organization.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: SubscriptionTier,
        default: SubscriptionTier.FREE
    }),
    __metadata("design:type", String)
], Organization.prototype, "subscriptionTier", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], Organization.prototype, "subscriptionStartDate", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], Organization.prototype, "subscriptionEndDate", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], Organization.prototype, "isSubscriptionActive", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Organization.prototype, "settings", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'int', default: 0 }),
    __metadata("design:type", Number)
], Organization.prototype, "maxUsers", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'int', default: 0 }),
    __metadata("design:type", Number)
], Organization.prototype, "maxStorage", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Organization.prototype, "createdById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'createdById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], Organization.prototype, "createdBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Organization.prototype, "updatedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'updatedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], Organization.prototype, "updatedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User, user => user.organization),
    __metadata("design:type", Array)
], Organization.prototype, "users", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _tickets_entities_ticket_entity__WEBPACK_IMPORTED_MODULE_3__.Ticket, ticket => ticket.organization),
    __metadata("design:type", Array)
], Organization.prototype, "tickets", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], Organization.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], Organization.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.DeleteDateColumn)(),
    __metadata("design:type", Date)
], Organization.prototype, "deletedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Organization.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Organization.prototype, "contactInfo", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'simple-array', nullable: true }),
    __metadata("design:type", Array)
], Organization.prototype, "allowedDomains", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Organization.prototype, "isEmailVerificationRequired", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], Organization.prototype, "isTwoFactorAuthRequired", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Organization.prototype, "auditConfig", void 0);
Organization = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('organizations'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['domain'])
], Organization);



/***/ }),

/***/ "./src/modules/organizations/enums/subscription-plan.enum.ts":
/*!*******************************************************************!*\
  !*** ./src/modules/organizations/enums/subscription-plan.enum.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SubscriptionPlan: () => (/* binding */ SubscriptionPlan)
/* harmony export */ });
var SubscriptionPlan;
(function (SubscriptionPlan) {
    SubscriptionPlan["FREE"] = "FREE";
    SubscriptionPlan["BASIC"] = "BASIC";
    SubscriptionPlan["STANDARD"] = "STANDARD";
    SubscriptionPlan["PREMIUM"] = "PREMIUM";
    SubscriptionPlan["ENTERPRISE"] = "ENTERPRISE";
})(SubscriptionPlan || (SubscriptionPlan = {}));


/***/ }),

/***/ "./src/modules/organizations/guards/organization-access.guard.ts":
/*!***********************************************************************!*\
  !*** ./src/modules/organizations/guards/organization-access.guard.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationAccessGuard: () => (/* binding */ OrganizationAccessGuard)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_core__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/modules/users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var OrganizationAccessGuard_1;






let OrganizationAccessGuard = OrganizationAccessGuard_1 = class OrganizationAccessGuard {
    constructor(reflector, organizationRepository) {
        this.reflector = reflector;
        this.organizationRepository = organizationRepository;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(OrganizationAccessGuard_1.name);
    }
    async canActivate(context) {
        try {
            const request = context.switchToHttp().getRequest();
            const user = request.user;
            const organizationId = this.extractOrganizationId(request);
            if (!organizationId) {
                return true;
            }
            if (user.role === _modules_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.SUPER_ADMIN) {
                return true;
            }
            const organization = await this.organizationRepository.findOne({
                where: { id: organizationId },
                relations: ['members']
            });
            if (!organization) {
                this.logger.warn(`Organization ${organizationId} not found`);
                return false;
            }
            const member = organization.members.find((m) => m.userId === user.id);
            if (!member) {
                this.logger.warn(`User ${user.id} attempted to access organization ${organizationId} without membership`);
                return false;
            }
            request.organization = organization;
            request.organizationMember = member;
            return true;
        }
        catch (error) {
            this.logger.error('Error in organization access guard:', error);
            return false;
        }
    }
    extractOrganizationId(request) {
        return (request.params.organizationId ||
            request.body.organizationId ||
            request.query.organizationId ||
            request.headers['x-organization-id']);
    }
};
OrganizationAccessGuard = OrganizationAccessGuard_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__.Organization)),
    __metadata("design:paramtypes", [_nestjs_core__WEBPACK_IMPORTED_MODULE_1__.Reflector,
        typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository])
], OrganizationAccessGuard);



/***/ }),

/***/ "./src/modules/organizations/guards/organization-role.guard.ts":
/*!*********************************************************************!*\
  !*** ./src/modules/organizations/guards/organization-role.guard.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationRoleGuard: () => (/* binding */ OrganizationRoleGuard),
/* harmony export */   RequireOrganizationRoles: () => (/* binding */ RequireOrganizationRoles)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_core__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var OrganizationRoleGuard_1;



let OrganizationRoleGuard = OrganizationRoleGuard_1 = class OrganizationRoleGuard {
    constructor(reflector) {
        this.reflector = reflector;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(OrganizationRoleGuard_1.name);
    }
    async canActivate(context) {
        try {
            const roles = this.reflector.get('roles', context.getHandler());
            if (!roles) {
                return true;
            }
            const request = context.switchToHttp().getRequest();
            const user = request.user;
            const member = request.organizationMember;
            if (user.role === _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_2__.Role.SUPER_ADMIN) {
                return true;
            }
            if (!member) {
                this.logger.warn(`Organization member info not found for user ${user.id}. ` +
                    'Make sure OrganizationAccessGuard runs before this guard.');
                return false;
            }
            if (!roles.roles.includes(member.role)) {
                if (roles.allowSelf) {
                    const targetUserId = this.extractTargetUserId(request);
                    if (targetUserId === user.id) {
                        return true;
                    }
                }
                if (roles.checkResourceOwner) {
                    const hasOwnership = await this.checkResourceOwnership(request, user.id);
                    if (hasOwnership) {
                        return true;
                    }
                }
                this.logger.warn(`User ${user.id} with role ${member.role} attempted to access resource ` +
                    `requiring roles: ${roles.roles.join(', ')}`);
                return false;
            }
            return true;
        }
        catch (error) {
            this.logger.error('Error in organization role guard:', error);
            return false;
        }
    }
    extractTargetUserId(request) {
        return (request.params.userId ||
            request.body.userId ||
            request.query.userId);
    }
    async checkResourceOwnership(request, userId) {
        try {
            const resource = request.resource;
            if (!resource) {
                return false;
            }
            const ownerId = resource.userId || resource.createdBy || resource.ownerId;
            return ownerId === userId;
        }
        catch (error) {
            this.logger.error('Error checking resource ownership:', error);
            return false;
        }
    }
};
OrganizationRoleGuard = OrganizationRoleGuard_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_nestjs_core__WEBPACK_IMPORTED_MODULE_1__.Reflector])
], OrganizationRoleGuard);

const RequireOrganizationRoles = (metadata) => {
    return (target, propertyKey, descriptor) => {
        (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.SetMetadata)('roles', metadata)(target, propertyKey, descriptor);
        return descriptor;
    };
};


/***/ }),

/***/ "./src/modules/organizations/guards/organization.guard.ts":
/*!****************************************************************!*\
  !*** ./src/modules/organizations/guards/organization.guard.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OptionalOrganization: () => (/* binding */ OptionalOrganization),
/* harmony export */   OrganizationGuard: () => (/* binding */ OrganizationGuard)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_core__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _services_organizations_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/organizations.service */ "./src/modules/organizations/services/organizations.service.ts");
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var OrganizationGuard_1;




let OrganizationGuard = OrganizationGuard_1 = class OrganizationGuard {
    constructor(reflector, organizationsService) {
        this.reflector = reflector;
        this.organizationsService = organizationsService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(OrganizationGuard_1.name);
    }
    async canActivate(context) {
        try {
            const request = context.switchToHttp().getRequest();
            const user = request.user;
            if (!user) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedException('No authenticated user found');
            }
            if (user.role === _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_3__.Role.SUPER_ADMIN) {
                return true;
            }
            const organizationId = this.extractOrganizationId(request);
            if (!organizationId) {
                const isOptional = this.reflector.get('optionalOrganization', context.getHandler());
                return isOptional || false;
            }
            const hasAccess = await this.verifyOrganizationAccess(user.id, organizationId);
            if (!hasAccess) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ForbiddenException('User does not have access to this organization');
            }
            const [organization, member] = await Promise.all([
                this.organizationsService.findOne(organizationId),
                this.organizationsService.getMemberContext(organizationId, user.id)
            ]);
            if (!organization) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ForbiddenException('Organization not found');
            }
            if (!member) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ForbiddenException('User is not a member of this organization');
            }
            request.organization = organization;
            request.organizationMember = member;
            return true;
        }
        catch (error) {
            this.logger.error('Error in organization guard:', error);
            throw error;
        }
    }
    extractOrganizationId(request) {
        var _a, _b, _c;
        return (((_a = request.params) === null || _a === void 0 ? void 0 : _a.organizationId) ||
            ((_b = request.body) === null || _b === void 0 ? void 0 : _b.organizationId) ||
            ((_c = request.query) === null || _c === void 0 ? void 0 : _c.organizationId) ||
            this.extractFromPath(request.path));
    }
    extractFromPath(path) {
        const matches = path.match(/\/organizations\/([^\/]+)/);
        return matches === null || matches === void 0 ? void 0 : matches[1];
    }
    async verifyOrganizationAccess(userId, organizationId) {
        try {
            const membership = await this.organizationsService.getMemberContext(organizationId, userId);
            if (!membership) {
                return false;
            }
            if (!membership.isActive) {
                return false;
            }
            return true;
        }
        catch (error) {
            this.logger.error(`Error verifying organization access for user ${userId}:`, error);
            return false;
        }
    }
};
OrganizationGuard = OrganizationGuard_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_nestjs_core__WEBPACK_IMPORTED_MODULE_1__.Reflector,
        _services_organizations_service__WEBPACK_IMPORTED_MODULE_2__.OrganizationsService])
], OrganizationGuard);

const OptionalOrganization = () => {
    return (target, key, descriptor) => {
        if (key) {
            if (descriptor) {
                (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.SetMetadata)('optionalOrganization', true)(target, key, descriptor);
            }
        }
        return descriptor;
    };
};


/***/ }),

/***/ "./src/modules/organizations/listeners/organization-audit.listener.ts":
/*!****************************************************************************!*\
  !*** ./src/modules/organizations/listeners/organization-audit.listener.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationAuditListener: () => (/* binding */ OrganizationAuditListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _services_organization_audit_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../services/organization-audit.service */ "./src/modules/organizations/services/organization-audit.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var OrganizationAuditListener_1;






let OrganizationAuditListener = OrganizationAuditListener_1 = class OrganizationAuditListener {
    constructor(organizationRepository, auditService) {
        this.organizationRepository = organizationRepository;
        this.auditService = auditService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(OrganizationAuditListener_1.name);
    }
    async handleMemberAdded(payload) {
        try {
            const { organizationId, userId, role, addedBy } = payload;
            await this.auditService.logEvent({
                organizationId,
                eventType: 'member_added',
                data: { userId, role },
                performedBy: addedBy,
                timestamp: new Date()
            });
        }
        catch (error) {
            this.logger.error('Error logging member addition:', error);
            throw error;
        }
    }
    async handleMemberRemoved(payload) {
        try {
            const { organizationId, userId, removedBy, reason } = payload;
            await this.auditService.logEvent({
                organizationId,
                eventType: 'member_removed',
                data: { userId, reason },
                performedBy: removedBy,
                timestamp: new Date()
            });
        }
        catch (error) {
            this.logger.error('Error logging member removal:', error);
            throw error;
        }
    }
    async handleRoleChanged(payload) {
        try {
            const { organizationId, userId, oldRole, newRole, changedBy } = payload;
            await this.auditService.logEvent({
                organizationId,
                eventType: 'role_changed',
                data: { userId, oldRole, newRole },
                performedBy: changedBy,
                timestamp: new Date()
            });
        }
        catch (error) {
            this.logger.error('Error logging role change:', error);
            throw error;
        }
    }
    async handleSettingsUpdated(payload) {
        try {
            const { organizationId, changes, updatedBy } = payload;
            await this.auditService.logEvent({
                organizationId,
                eventType: 'settings_updated',
                data: { changes },
                performedBy: updatedBy,
                timestamp: new Date()
            });
        }
        catch (error) {
            this.logger.error('Error logging settings update:', error);
            throw error;
        }
    }
    async handleSubscriptionChanged(payload) {
        try {
            const { organizationId, oldPlan, newPlan, changedBy } = payload;
            await this.auditService.logEvent({
                organizationId,
                eventType: 'subscription_changed',
                data: { oldPlan, newPlan },
                performedBy: changedBy,
                timestamp: new Date()
            });
        }
        catch (error) {
            this.logger.error('Error logging subscription change:', error);
            throw error;
        }
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('organization.member.added'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], OrganizationAuditListener.prototype, "handleMemberAdded", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('organization.member.removed'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], OrganizationAuditListener.prototype, "handleMemberRemoved", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('organization.role.changed'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], OrganizationAuditListener.prototype, "handleRoleChanged", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('organization.settings.updated'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], OrganizationAuditListener.prototype, "handleSettingsUpdated", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('organization.subscription.changed'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], OrganizationAuditListener.prototype, "handleSubscriptionChanged", null);
OrganizationAuditListener = OrganizationAuditListener_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__.Organization)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        _services_organization_audit_service__WEBPACK_IMPORTED_MODULE_5__.OrganizationAuditService])
], OrganizationAuditListener);



/***/ }),

/***/ "./src/modules/organizations/listeners/organization-billing.listener.ts":
/*!******************************************************************************!*\
  !*** ./src/modules/organizations/listeners/organization-billing.listener.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationBillingListener: () => (/* binding */ OrganizationBillingListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _services_organization_subscription_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../services/organization-subscription.service */ "./src/modules/organizations/services/organization-subscription.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var OrganizationBillingListener_1;






let OrganizationBillingListener = OrganizationBillingListener_1 = class OrganizationBillingListener {
    constructor(organizationRepository, subscriptionService) {
        this.organizationRepository = organizationRepository;
        this.subscriptionService = subscriptionService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(OrganizationBillingListener_1.name);
    }
    async handleSubscriptionCreated(payload) {
        try {
            const { organizationId, planId } = payload;
            this.logger.debug(`Processing new subscription for organization ${organizationId}`);
            const organization = await this.organizationRepository.findOne({
                where: { id: organizationId }
            });
            if (!organization) {
                throw new Error(`Organization ${organizationId} not found`);
            }
            organization.billing = Object.assign(Object.assign({}, organization.billing), { status: 'active', planId, startDate: new Date() });
            await this.organizationRepository.save(organization);
        }
        catch (error) {
            this.logger.error('Error processing subscription creation:', error);
            throw error;
        }
    }
    async handleSubscriptionUpdated(payload) {
        try {
            const { organizationId, planId, changes } = payload;
            this.logger.debug(`Processing subscription update for organization ${organizationId}`);
            await this.subscriptionService.updateSubscription(organizationId, planId, changes);
        }
        catch (error) {
            this.logger.error('Error processing subscription update:', error);
            throw error;
        }
    }
    async handleSubscriptionCancelled(payload) {
        try {
            const { organizationId } = payload;
            this.logger.debug(`Processing subscription cancellation for organization ${organizationId}`);
            const organization = await this.organizationRepository.findOne({
                where: { id: organizationId }
            });
            if (!organization) {
                throw new Error(`Organization ${organizationId} not found`);
            }
            organization.billing = Object.assign(Object.assign({}, organization.billing), { status: 'cancelled', cancelledAt: new Date(), endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000) });
            await this.organizationRepository.save(organization);
        }
        catch (error) {
            this.logger.error('Error processing subscription cancellation:', error);
            throw error;
        }
    }
    async handlePaymentFailed(payload) {
        try {
            const { organizationId, failureReason, attemptCount } = payload;
            this.logger.debug(`Processing payment failure for organization ${organizationId}`);
            const organization = await this.organizationRepository.findOne({
                where: { id: organizationId }
            });
            if (!organization) {
                throw new Error(`Organization ${organizationId} not found`);
            }
            organization.billing = Object.assign(Object.assign({}, organization.billing), { lastPaymentFailure: {
                    date: new Date(),
                    reason: failureReason,
                    attemptCount,
                } });
            if (attemptCount > 2) {
                organization.billing.status = 'past_due';
            }
            await this.organizationRepository.save(organization);
        }
        catch (error) {
            this.logger.error('Error processing payment failure:', error);
            throw error;
        }
    }
    async handleInvoicePaid(payload) {
        try {
            const { organizationId, invoiceId, amount } = payload;
            this.logger.debug(`Processing paid invoice for organization ${organizationId}`);
            const organization = await this.organizationRepository.findOne({
                where: { id: organizationId }
            });
            if (!organization) {
                throw new Error(`Organization ${organizationId} not found`);
            }
            organization.billing = Object.assign(Object.assign({}, organization.billing), { lastPaymentDate: new Date(), lastPaymentAmount: amount, lastInvoiceId: invoiceId, status: 'active' });
            await this.organizationRepository.save(organization);
        }
        catch (error) {
            this.logger.error('Error processing paid invoice:', error);
            throw error;
        }
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('organization.subscription.created'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], OrganizationBillingListener.prototype, "handleSubscriptionCreated", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('organization.subscription.updated'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], OrganizationBillingListener.prototype, "handleSubscriptionUpdated", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('organization.subscription.cancelled'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], OrganizationBillingListener.prototype, "handleSubscriptionCancelled", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('organization.billing.payment_failed'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], OrganizationBillingListener.prototype, "handlePaymentFailed", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('organization.billing.invoice_paid'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], OrganizationBillingListener.prototype, "handleInvoicePaid", null);
OrganizationBillingListener = OrganizationBillingListener_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__.Organization)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        _services_organization_subscription_service__WEBPACK_IMPORTED_MODULE_5__.OrganizationSubscriptionService])
], OrganizationBillingListener);



/***/ }),

/***/ "./src/modules/organizations/organizations.module.ts":
/*!***********************************************************!*\
  !*** ./src/modules/organizations/organizations.module.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationsModule: () => (/* binding */ OrganizationsModule)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _controllers_organizations_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./controllers/organizations.controller */ "./src/modules/organizations/controllers/organizations.controller.ts");
/* harmony import */ var _services_organizations_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./services/organizations.service */ "./src/modules/organizations/services/organizations.service.ts");
/* harmony import */ var _entities_organization_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _users_users_module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../users/users.module */ "./src/modules/users/users.module.ts");
/* harmony import */ var _auth_auth_module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../auth/auth.module */ "./src/modules/auth/auth.module.ts");
/* harmony import */ var _listeners_organization_billing_listener__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./listeners/organization-billing.listener */ "./src/modules/organizations/listeners/organization-billing.listener.ts");
/* harmony import */ var _listeners_organization_audit_listener__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./listeners/organization-audit.listener */ "./src/modules/organizations/listeners/organization-audit.listener.ts");
/* harmony import */ var _services_organization_subscription_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./services/organization-subscription.service */ "./src/modules/organizations/services/organization-subscription.service.ts");
/* harmony import */ var _services_organization_invitation_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./services/organization-invitation.service */ "./src/modules/organizations/services/organization-invitation.service.ts");
/* harmony import */ var _services_organization_audit_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./services/organization-audit.service */ "./src/modules/organizations/services/organization-audit.service.ts");
/* harmony import */ var _guards_organization_access_guard__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./guards/organization-access.guard */ "./src/modules/organizations/guards/organization-access.guard.ts");
/* harmony import */ var _guards_organization_role_guard__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./guards/organization-role.guard */ "./src/modules/organizations/guards/organization-role.guard.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};















let OrganizationsModule = class OrganizationsModule {
};
OrganizationsModule = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Module)({
        imports: [
            _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.TypeOrmModule.forFeature([_entities_organization_entity__WEBPACK_IMPORTED_MODULE_5__.Organization]),
            _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__.EventEmitterModule.forRoot({
                wildcard: true,
                delimiter: '.',
                maxListeners: 20,
                verboseMemoryLeak: true,
            }),
            _users_users_module__WEBPACK_IMPORTED_MODULE_6__.UsersModule,
            _auth_auth_module__WEBPACK_IMPORTED_MODULE_7__.AuthModule,
        ],
        controllers: [
            _controllers_organizations_controller__WEBPACK_IMPORTED_MODULE_3__.OrganizationsController
        ],
        providers: [
            _services_organizations_service__WEBPACK_IMPORTED_MODULE_4__.OrganizationsService,
            _services_organization_subscription_service__WEBPACK_IMPORTED_MODULE_10__.OrganizationSubscriptionService,
            _services_organization_invitation_service__WEBPACK_IMPORTED_MODULE_11__.OrganizationInvitationService,
            _services_organization_audit_service__WEBPACK_IMPORTED_MODULE_12__.OrganizationAuditService,
            _listeners_organization_billing_listener__WEBPACK_IMPORTED_MODULE_8__.OrganizationBillingListener,
            _listeners_organization_audit_listener__WEBPACK_IMPORTED_MODULE_9__.OrganizationAuditListener,
            _guards_organization_access_guard__WEBPACK_IMPORTED_MODULE_13__.OrganizationAccessGuard,
            _guards_organization_role_guard__WEBPACK_IMPORTED_MODULE_14__.OrganizationRoleGuard,
        ],
        exports: [
            _services_organizations_service__WEBPACK_IMPORTED_MODULE_4__.OrganizationsService,
            _services_organization_subscription_service__WEBPACK_IMPORTED_MODULE_10__.OrganizationSubscriptionService,
            _services_organization_invitation_service__WEBPACK_IMPORTED_MODULE_11__.OrganizationInvitationService,
            _guards_organization_access_guard__WEBPACK_IMPORTED_MODULE_13__.OrganizationAccessGuard,
            _guards_organization_role_guard__WEBPACK_IMPORTED_MODULE_14__.OrganizationRoleGuard,
        ]
    })
], OrganizationsModule);



/***/ }),

/***/ "./src/modules/organizations/services/organization-audit.service.ts":
/*!**************************************************************************!*\
  !*** ./src/modules/organizations/services/organization-audit.service.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationAuditService: () => (/* binding */ OrganizationAuditService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _entities_organization_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/organization-audit-log.entity */ "./src/modules/organizations/entities/organization-audit-log.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var OrganizationAuditService_1;




let OrganizationAuditService = OrganizationAuditService_1 = class OrganizationAuditService {
    constructor(auditLogRepository) {
        this.auditLogRepository = auditLogRepository;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(OrganizationAuditService_1.name);
    }
    async logEvent(eventData) {
        try {
            const auditLog = this.auditLogRepository.create({
                organizationId: eventData.organizationId,
                eventType: eventData.eventType,
                data: this.sanitizeData(eventData.data),
                performedBy: eventData.performedBy,
                timestamp: eventData.timestamp || new Date(),
                metadata: eventData.metadata || {},
            });
            await this.auditLogRepository.save(auditLog);
            this.logger.debug(`Audit log created for ${eventData.eventType} in organization ${eventData.organizationId}`);
            return auditLog;
        }
        catch (error) {
            this.logger.error('Error creating audit log:', error);
            throw new Error(`Failed to create audit log: ${error.message}`);
        }
    }
    async getAuditLogs(organizationId, options = {}) {
        var _a;
        try {
            const where = {
                organizationId,
            };
            if (options.startDate || options.endDate) {
                where.timestamp = (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.Between)(options.startDate || new Date(0), options.endDate || new Date());
            }
            if ((_a = options.eventTypes) === null || _a === void 0 ? void 0 : _a.length) {
                where.eventType = (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.In)(options.eventTypes);
            }
            if (options.performedBy) {
                where.performedBy = options.performedBy;
            }
            const [logs, total] = await this.auditLogRepository.findAndCount({
                where,
                order: { timestamp: 'DESC' },
                take: options.limit || 50,
                skip: options.offset || 0,
            });
            return { logs, total };
        }
        catch (error) {
            this.logger.error('Error retrieving audit logs:', error);
            throw new Error(`Failed to retrieve audit logs: ${error.message}`);
        }
    }
    async getEventDetails(eventId) {
        try {
            const auditLog = await this.auditLogRepository.findOne({
                where: { id: eventId }
            });
            if (!auditLog) {
                throw new Error(`Audit log with ID ${eventId} not found`);
            }
            return auditLog;
        }
        catch (error) {
            this.logger.error(`Error retrieving audit log details for ID ${eventId}:`, error);
            throw new Error(`Failed to retrieve audit log details: ${error.message}`);
        }
    }
    async getActivitySummary(organizationId, startDate, endDate) {
        try {
            const logs = await this.auditLogRepository.find({
                where: {
                    organizationId,
                    timestamp: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.Between)(startDate, endDate)
                }
            });
            return logs.reduce((summary, log) => {
                summary[log.eventType] = (summary[log.eventType] || 0) + 1;
                return summary;
            }, {});
        }
        catch (error) {
            this.logger.error('Error generating activity summary:', error);
            throw new Error(`Failed to generate activity summary: ${error.message}`);
        }
    }
    async getUserActivity(organizationId, userId, options = {}) {
        try {
            const where = {
                organizationId,
                performedBy: userId,
            };
            if (options.startDate || options.endDate) {
                where.timestamp = (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.Between)(options.startDate || new Date(0), options.endDate || new Date());
            }
            return await this.auditLogRepository.find({
                where,
                order: { timestamp: 'DESC' },
                take: options.limit || 50,
                skip: options.offset || 0,
            });
        }
        catch (error) {
            this.logger.error(`Error retrieving user activity for user ${userId}:`, error);
            throw new Error(`Failed to retrieve user activity: ${error.message}`);
        }
    }
    async getRecentChanges(organizationId, limit = 10) {
        try {
            return await this.auditLogRepository.find({
                where: {
                    organizationId,
                    eventType: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.Like)('%updated%')
                },
                order: { timestamp: 'DESC' },
                take: limit,
            });
        }
        catch (error) {
            this.logger.error('Error retrieving recent changes:', error);
            throw new Error(`Failed to retrieve recent changes: ${error.message}`);
        }
    }
    sanitizeData(data) {
        const sensitiveFields = ['password', 'token', 'secret', 'key', 'credential'];
        const sanitized = Object.assign({}, data);
        const sanitizeObject = (obj) => {
            for (const [key, value] of Object.entries(obj)) {
                if (sensitiveFields.some(field => key.toLowerCase().includes(field))) {
                    obj[key] = '[REDACTED]';
                }
                else if (typeof value === 'object' && value !== null) {
                    sanitizeObject(value);
                }
            }
        };
        sanitizeObject(sanitized);
        return sanitized;
    }
    async cleanupOldLogs(retentionDays) {
        try {
            const cutoffDate = new Date();
            cutoffDate.setDate(cutoffDate.getDate() - retentionDays);
            const result = await this.auditLogRepository.delete({
                timestamp: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.LessThan)(cutoffDate)
            });
            this.logger.debug(`Cleaned up ${result.affected} old audit logs`);
            return result.affected || 0;
        }
        catch (error) {
            this.logger.error('Error cleaning up old audit logs:', error);
            throw new Error(`Failed to clean up old audit logs: ${error.message}`);
        }
    }
    async exportAuditLogs(organizationId, startDate, endDate) {
        try {
            const logs = await this.auditLogRepository.find({
                where: {
                    organizationId,
                    timestamp: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.Between)(startDate, endDate)
                },
                order: { timestamp: 'ASC' }
            });
            return logs.map(log => ({
                eventId: log.id,
                timestamp: log.timestamp.toISOString(),
                eventType: log.eventType,
                performedBy: log.performedBy,
                details: log.data,
                metadata: log.metadata
            }));
        }
        catch (error) {
            this.logger.error('Error exporting audit logs:', error);
            throw new Error(`Failed to export audit logs: ${error.message}`);
        }
    }
};
OrganizationAuditService = OrganizationAuditService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_organization_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.OrganizationAuditLog)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository])
], OrganizationAuditService);



/***/ }),

/***/ "./src/modules/organizations/services/organization-invitation.service.ts":
/*!*******************************************************************************!*\
  !*** ./src/modules/organizations/services/organization-invitation.service.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationInvitationService: () => (/* binding */ OrganizationInvitationService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! crypto */ "crypto");
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _entities_organization_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _entities_organization_invitation_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../entities/organization-invitation.entity */ "./src/modules/organizations/entities/organization-invitation.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _shared_services_email_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/services/email.service */ "./src/shared/services/email.service.ts");
/* harmony import */ var _organization_subscription_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./organization-subscription.service */ "./src/modules/organizations/services/organization-subscription.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var OrganizationInvitationService_1;










let OrganizationInvitationService = OrganizationInvitationService_1 = class OrganizationInvitationService {
    constructor(organizationRepository, invitationRepository, userRepository, emailService, subscriptionService, eventEmitter) {
        this.organizationRepository = organizationRepository;
        this.invitationRepository = invitationRepository;
        this.userRepository = userRepository;
        this.emailService = emailService;
        this.subscriptionService = subscriptionService;
        this.eventEmitter = eventEmitter;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(OrganizationInvitationService_1.name);
    }
    async createInvitation(organizationId, email, role, invitedBy) {
        try {
            const organization = await this.organizationRepository.findOne({
                where: { id: organizationId }
            });
            if (!organization) {
                throw new Error(`Organization ${organizationId} not found`);
            }
            const { allowed, limit, current } = await this.subscriptionService.checkResourceLimit(organizationId, 'users');
            if (!allowed) {
                throw new Error(`Organization has reached member limit (${current}/${limit})`);
            }
            const existingMember = await this.userRepository.findOne({
                where: {
                    email,
                    organizationId
                }
            });
            if (existingMember) {
                throw new Error(`User ${email} is already a member of the organization`);
            }
            const existingInvitations = await this.invitationRepository.createQueryBuilder("invitation")
                .where("invitation.organizationId = :organizationId", { organizationId })
                .andWhere("invitation.email = :email", { email })
                .andWhere("invitation.status = :status", { status: "PENDING" })
                .getMany();
            if (existingInvitations.length > 0) {
                throw new Error(`Pending invitation already exists for ${email}`);
            }
            const invitation = new _entities_organization_invitation_entity__WEBPACK_IMPORTED_MODULE_6__.OrganizationInvitation();
            invitation.organizationId = organizationId;
            invitation.email = email;
            invitation.roles = [role];
            const inviter = await this.userRepository.findOne({
                where: { id: invitedBy }
            });
            if (!inviter) {
                throw new Error(`Inviter ${invitedBy} not found`);
            }
            invitation.invitedBy = inviter;
            invitation.token = this.generateInvitationToken();
            invitation.expiresAt = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000);
            invitation.status = "PENDING";
            const savedInvitation = await this.invitationRepository.save(invitation);
            await this.sendInvitationEmail(savedInvitation, organization);
            this.eventEmitter.emit('organization.invitation.created', {
                organizationId,
                email,
                role,
                invitedBy,
            });
            return savedInvitation;
        }
        catch (error) {
            this.logger.error('Error creating invitation:', error);
            throw error;
        }
    }
    async acceptInvitation(token, userId) {
        try {
            const invitations = await this.invitationRepository.createQueryBuilder("invitation")
                .where("invitation.token = :token", { token })
                .andWhere("invitation.status = :status", { status: "PENDING" })
                .getMany();
            const invitation = invitations.length > 0 ? invitations[0] : null;
            if (!invitation) {
                throw new Error('Invalid or expired invitation');
            }
            if (new Date() > invitation.expiresAt) {
                throw new Error('Invitation has expired');
            }
            const user = await this.userRepository.findOne({
                where: { id: userId }
            });
            if (!user) {
                throw new Error('User not found');
            }
            if (user.email !== invitation.email) {
                throw new Error('Invitation email does not match user email');
            }
            const organization = await this.organizationRepository.findOne({
                where: { id: invitation.organizationId }
            });
            if (!organization) {
                throw new Error('Organization not found');
            }
            organization.members = [
                ...(organization.members || []),
                {
                    userId,
                    role: invitation.roles,
                    joinedAt: new Date(),
                }
            ];
            await this.organizationRepository.save(organization);
            invitation.status = "ACCEPTED";
            invitation.metadata = Object.assign(Object.assign({}, (invitation.metadata || {})), { acceptedAt: new Date() });
            await this.invitationRepository.save(invitation);
            this.eventEmitter.emit('organization.member.added', {
                organizationId: organization.id,
                userId,
                role: invitation.roles,
                invitedBy: invitation.invitedBy,
            });
        }
        catch (error) {
            this.logger.error('Error accepting invitation:', error);
            throw error;
        }
    }
    async cancelInvitation(invitationId, cancelledBy) {
        try {
            const invitations = await this.invitationRepository.createQueryBuilder("invitation")
                .where("invitation.id = :id", { id: invitationId })
                .andWhere("invitation.status = :status", { status: "PENDING" })
                .getMany();
            const invitation = invitations.length > 0 ? invitations[0] : null;
            if (!invitation) {
                throw new Error('Invitation not found or already processed');
            }
            invitation.status = "CANCELLED";
            invitation.metadata = Object.assign(Object.assign({}, (invitation.metadata || {})), { cancelledAt: new Date(), cancelledBy: cancelledBy });
            await this.invitationRepository.save(invitation);
            this.eventEmitter.emit('organization.invitation.cancelled', {
                organizationId: invitation.organizationId,
                email: invitation.email,
                cancelledBy,
            });
        }
        catch (error) {
            this.logger.error('Error cancelling invitation:', error);
            throw error;
        }
    }
    async resendInvitation(invitationId) {
        try {
            const invitation = await this.invitationRepository.findOne({
                where: { id: invitationId }
            });
            if (!invitation) {
                throw new Error('Invitation not found');
            }
            if (String(invitation.status) !== "PENDING") {
                throw new Error('Can only resend pending invitations');
            }
            const organization = await this.organizationRepository.findOne({
                where: { id: invitation.organizationId }
            });
            if (!organization) {
                throw new Error('Organization not found');
            }
            invitation.token = this.generateInvitationToken();
            invitation.expiresAt = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000);
            invitation.resendCount = (invitation.resendCount || 0) + 1;
            await this.invitationRepository.save(invitation);
            await this.sendInvitationEmail(invitation, organization);
            this.eventEmitter.emit('organization.invitation.resent', {
                organizationId: organization.id,
                email: invitation.email,
                resendCount: invitation.resendCount,
            });
        }
        catch (error) {
            this.logger.error('Error resending invitation:', error);
            throw error;
        }
    }
    async listPendingInvitations(organizationId) {
        try {
            return await this.invitationRepository.createQueryBuilder("invitation")
                .where("invitation.organizationId = :organizationId", { organizationId })
                .andWhere("invitation.status = :status", { status: "PENDING" })
                .orderBy("invitation.createdAt", "DESC")
                .getMany();
        }
        catch (error) {
            this.logger.error('Error listing pending invitations:', error);
            throw error;
        }
    }
    generateInvitationToken() {
        return crypto__WEBPACK_IMPORTED_MODULE_4__.randomBytes(32).toString('hex');
    }
    async sendInvitationEmail(invitation, organization) {
        try {
            let inviterName = 'An organization administrator';
            if (invitation.invitedBy) {
                if (typeof invitation.invitedBy === 'object' && invitation.invitedBy.firstName) {
                    inviterName = `${invitation.invitedBy.firstName} ${invitation.invitedBy.lastName || ''}`.trim();
                }
                else if (typeof invitation.invitedBy === 'string') {
                    inviterName = invitation.invitedBy;
                }
            }
            const roleValue = Array.isArray(invitation.roles)
                ? invitation.roles.join(', ')
                : String(invitation.roles || '');
            const emailData = {
                to: invitation.email,
                subject: `Invitation to join ${organization.name}`,
                template: 'organization-invitation',
                context: {
                    organizationName: organization.name,
                    inviterName: inviterName,
                    role: roleValue,
                    acceptUrl: `${process.env.APP_URL}/invitations/accept?token=${invitation.token}`,
                    expiresAt: invitation.expiresAt,
                }
            };
            if (typeof this.emailService.sendEmail === 'function') {
                await this.emailService.sendEmail(emailData);
            }
            else {
                this.logger.warn('No suitable email service method found. Please implement a proper email sending method.');
            }
        }
        catch (error) {
            this.logger.error('Error sending invitation email:', error);
            throw error;
        }
    }
    async cleanupExpiredInvitations() {
        try {
            const expiredInvitations = await this.invitationRepository.createQueryBuilder("invitation")
                .where("invitation.status = :status", { status: "PENDING" })
                .andWhere("invitation.expiresAt <= :now", { now: new Date() })
                .getMany();
            for (const invitation of expiredInvitations) {
                invitation.status = "EXPIRED";
                await this.invitationRepository.save(invitation);
                this.eventEmitter.emit('organization.invitation.expired', {
                    organizationId: invitation.organizationId,
                    email: invitation.email,
                });
            }
        }
        catch (error) {
            this.logger.error('Error cleaning up expired invitations:', error);
            throw error;
        }
    }
};
OrganizationInvitationService = OrganizationInvitationService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_organization_entity__WEBPACK_IMPORTED_MODULE_5__.Organization)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_organization_invitation_entity__WEBPACK_IMPORTED_MODULE_6__.OrganizationInvitation)),
    __param(2, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_7__.User)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _shared_services_email_service__WEBPACK_IMPORTED_MODULE_8__.EmailService,
        _organization_subscription_service__WEBPACK_IMPORTED_MODULE_9__.OrganizationSubscriptionService,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__.EventEmitter2])
], OrganizationInvitationService);



/***/ }),

/***/ "./src/modules/organizations/services/organization-subscription.service.ts":
/*!*********************************************************************************!*\
  !*** ./src/modules/organizations/services/organization-subscription.service.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationSubscriptionService: () => (/* binding */ OrganizationSubscriptionService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var OrganizationSubscriptionService_1;





let OrganizationSubscriptionService = OrganizationSubscriptionService_1 = class OrganizationSubscriptionService {
    constructor(organizationRepository, eventEmitter) {
        this.organizationRepository = organizationRepository;
        this.eventEmitter = eventEmitter;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(OrganizationSubscriptionService_1.name);
    }
    async createSubscription(organizationId, planId) {
        try {
            const organization = await this.organizationRepository.findOne({
                where: { id: organizationId }
            });
            if (!organization) {
                throw new Error(`Organization ${organizationId} not found`);
            }
            const plan = await this.getPlan(planId);
            if (!plan) {
                throw new Error(`Invalid plan ID: ${planId}`);
            }
            organization.subscription = {
                planId,
                status: 'active',
                startDate: new Date(),
                features: plan.features,
                limits: plan.limits,
            };
            await this.organizationRepository.save(organization);
            this.eventEmitter.emit('organization.subscription.created', {
                organizationId,
                planId,
            });
        }
        catch (error) {
            this.logger.error(`Error creating subscription for organization ${organizationId}:`, error);
            throw error;
        }
    }
    async updateSubscription(organizationId, planId, changes) {
        var _a;
        try {
            const organization = await this.organizationRepository.findOne({
                where: { id: organizationId }
            });
            if (!organization) {
                throw new Error(`Organization ${organizationId} not found`);
            }
            const oldPlanId = (_a = organization.subscription) === null || _a === void 0 ? void 0 : _a.planId;
            organization.subscription = Object.assign(Object.assign(Object.assign({}, organization.subscription), changes), { planId, updatedAt: new Date() });
            await this.organizationRepository.save(organization);
            this.eventEmitter.emit('organization.subscription.updated', {
                organizationId,
                oldPlanId,
                newPlanId: planId,
                changes,
            });
        }
        catch (error) {
            this.logger.error(`Error updating subscription for organization ${organizationId}:`, error);
            throw error;
        }
    }
    async cancelSubscription(organizationId, reason) {
        try {
            const organization = await this.organizationRepository.findOne({
                where: { id: organizationId }
            });
            if (!organization) {
                throw new Error(`Organization ${organizationId} not found`);
            }
            organization.subscription = Object.assign(Object.assign({}, organization.subscription), { status: 'cancelled', cancelledAt: new Date(), cancellationReason: reason, endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000) });
            await this.organizationRepository.save(organization);
            this.eventEmitter.emit('organization.subscription.cancelled', {
                organizationId,
                reason,
            });
        }
        catch (error) {
            this.logger.error(`Error cancelling subscription for organization ${organizationId}:`, error);
            throw error;
        }
    }
    async checkSubscriptionStatus(organizationId) {
        try {
            const organization = await this.organizationRepository.findOne({
                where: { id: organizationId }
            });
            if (!(organization === null || organization === void 0 ? void 0 : organization.subscription)) {
                return false;
            }
            return (organization.subscription.status === 'active' &&
                (!organization.subscription.endDate ||
                    new Date(organization.subscription.endDate) > new Date()));
        }
        catch (error) {
            this.logger.error(`Error checking subscription status for organization ${organizationId}:`, error);
            throw error;
        }
    }
    async validateFeatureAccess(organizationId, feature) {
        try {
            const organization = await this.organizationRepository.findOne({
                where: { id: organizationId }
            });
            if (!(organization === null || organization === void 0 ? void 0 : organization.subscription)) {
                return false;
            }
            return organization.subscription.features.includes(feature);
        }
        catch (error) {
            this.logger.error(`Error validating feature access for organization ${organizationId}:`, error);
            throw error;
        }
    }
    async checkResourceLimit(organizationId, resource) {
        try {
            const organization = await this.organizationRepository.findOne({
                where: { id: organizationId }
            });
            if (!(organization === null || organization === void 0 ? void 0 : organization.subscription)) {
                return { allowed: false, limit: 0, current: 0 };
            }
            const limit = organization.subscription.limits[resource] || 0;
            const current = await this.getCurrentResourceUsage(organizationId, resource);
            return {
                allowed: current < limit,
                limit,
                current,
            };
        }
        catch (error) {
            this.logger.error(`Error checking resource limit for organization ${organizationId}:`, error);
            throw error;
        }
    }
    async getPlan(planId) {
        const plans = {
            basic: {
                id: 'basic',
                name: 'Basic Plan',
                features: ['feature1', 'feature2'],
                limits: { users: 10, storage: 5 },
                price: 10,
            },
            pro: {
                id: 'pro',
                name: 'Pro Plan',
                features: ['feature1', 'feature2', 'feature3'],
                limits: { users: 50, storage: 25 },
                price: 25,
            },
        };
        return plans[planId] || null;
    }
    async getCurrentResourceUsage(organizationId, resource) {
        const resourceCounters = {
            users: async () => {
                var _a;
                const org = await this.organizationRepository.findOne({
                    where: { id: organizationId },
                    relations: ['members'],
                });
                return ((_a = org === null || org === void 0 ? void 0 : org.members) === null || _a === void 0 ? void 0 : _a.length) || 0;
            },
            storage: async () => {
                return 0;
            },
        };
        if (resourceCounters[resource]) {
            return await resourceCounters[resource]();
        }
        return 0;
    }
};
OrganizationSubscriptionService = OrganizationSubscriptionService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_organization_entity__WEBPACK_IMPORTED_MODULE_4__.Organization)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__.EventEmitter2])
], OrganizationSubscriptionService);



/***/ }),

/***/ "./src/modules/organizations/services/organizations.service.ts":
/*!*********************************************************************!*\
  !*** ./src/modules/organizations/services/organizations.service.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationsService: () => (/* binding */ OrganizationsService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _audit_entities_audit_log_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../audit/entities/audit-log.entity */ "./src/modules/audit/entities/audit-log.entity.ts");
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
/* harmony import */ var _utils_slug_util__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/slug.util */ "./src/utils/slug.util.ts");
/* harmony import */ var _domain_services_domain_verification_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../domain/services/domain-verification.service */ "./src/modules/domain/services/domain-verification.service.ts");
/* harmony import */ var _shared_services_email_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/services/email.service */ "./src/shared/services/email.service.ts");
/* harmony import */ var _storage_services_storage_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../storage/services/storage.service */ "./src/modules/storage/services/storage.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};












let OrganizationsService = class OrganizationsService {
    getMemberContext(organizationId, id) {
        throw new Error('Method not implemented.');
    }
    findById(organizationId) {
        throw new Error('Method not implemented.');
    }
    constructor(organizationRepository, userRepository, auditLogRepository, domainVerificationService, emailService, storageService) {
        this.organizationRepository = organizationRepository;
        this.userRepository = userRepository;
        this.auditLogRepository = auditLogRepository;
        this.domainVerificationService = domainVerificationService;
        this.emailService = emailService;
        this.storageService = storageService;
    }
    async create(createOrganizationDto) {
        const existingOrg = await this.organizationRepository.findOne({
            where: { name: createOrganizationDto.name }
        });
        if (existingOrg) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ConflictException('Organization with this name already exists');
        }
        const slug = await this.generateUniqueSlug(createOrganizationDto.name);
        const organization = this.organizationRepository.create(Object.assign(Object.assign({}, createOrganizationDto), { slug, status: _entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.OrganizationStatus.PENDING, subscriptionTier: _entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.SubscriptionTier.FREE, settings: this.getDefaultSettings() }));
        const savedOrg = await this.organizationRepository.save(organization);
        await this.createAuditLog({
            organizationId: savedOrg.id,
            action: 'CREATE_ORGANIZATION',
            metadata: { userId: createOrganizationDto.createdBy.id, organizationId: savedOrg.id }
        });
        return savedOrg;
    }
    async findAll(query) {
        const queryBuilder = this.organizationRepository.createQueryBuilder('organization');
        if (query.search) {
            queryBuilder.andWhere('(organization.name ILIKE :search OR organization.domain ILIKE :search)', { search: `%${query.search}%` });
        }
        if (query.status) {
            queryBuilder.andWhere('organization.status = :status', { status: query.status });
        }
        if (query.subscriptionTier) {
            queryBuilder.andWhere('organization.subscriptionTier = :tier', { tier: query.subscriptionTier });
        }
        queryBuilder.leftJoinAndSelect('organization.users', 'users');
        const page = query.page || 1;
        const limit = query.limit || 10;
        const skip = (page - 1) * limit;
        queryBuilder.skip(skip).take(limit);
        const sortBy = query.sortBy || 'createdAt';
        const sortOrder = query.sortOrder || 'DESC';
        queryBuilder.orderBy(`organization.${sortBy}`, sortOrder);
        const [items, total] = await queryBuilder.getManyAndCount();
        return { items, total };
    }
    async findOne(id) {
        const organization = await this.organizationRepository.findOne({
            where: { id },
            relations: ['users']
        });
        if (!organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('Organization not found');
        }
        return organization;
    }
    async update(id, updateOrganizationDto) {
        const organization = await this.findOne(id);
        if (updateOrganizationDto.domain && updateOrganizationDto.domain !== organization.domain) {
            organization.isDomainVerified = false;
        }
        Object.assign(organization, updateOrganizationDto);
        const updatedOrg = await this.organizationRepository.save(organization);
        await this.createAuditLog({
            organizationId: id,
            action: 'UPDATE_ORGANIZATION',
            metadata: {
                userId: updateOrganizationDto.updatedBy,
                organizationId: id,
                changes: updateOrganizationDto
            }
        });
        return updatedOrg;
    }
    async remove(id) {
        const organization = await this.findOne(id);
        await this.organizationRepository.softDelete(id);
        await this.createAuditLog({
            organizationId: id,
            action: 'DELETE_ORGANIZATION',
            metadata: { organizationId: id }
        });
    }
    async addUser(id, addUserDto) {
        const organization = await this.findOne(id);
        const userCount = await this.userRepository.count({ where: { organizationId: id } });
        if (userCount >= organization.maxUsers) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Organization user limit reached');
        }
        const user = this.userRepository.create(Object.assign(Object.assign({}, addUserDto), { organizationId: id, requirePasswordChange: true }));
        const savedUser = await this.userRepository.save(user);
        await this.sendWelcomeEmail(savedUser.email, {
            organizationName: organization.name,
            temporaryPassword: addUserDto.password
        });
        await this.createAuditLog({
            organizationId: id,
            action: 'ADD_USER',
            metadata: { userId: savedUser.id }
        });
        return savedUser;
    }
    async removeUser(id, userId) {
        const user = await this.userRepository.findOne({
            where: { id: userId, organizationId: id }
        });
        if (!user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('User not found in organization');
        }
        await this.userRepository.softDelete(userId);
        await this.createAuditLog({
            organizationId: id,
            action: 'REMOVE_USER',
            metadata: { userId }
        });
    }
    async getAdminCount(organizationId) {
        return this.userRepository.count({
            where: {
                organizationId,
                role: _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_6__.Role.ADMIN,
                deletedAt: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.IsNull)()
            }
        });
    }
    async updateSubscription(id, updateSubscriptionDto) {
        const organization = await this.findOne(id);
        Object.assign(organization, {
            subscriptionTier: updateSubscriptionDto.tier,
            subscriptionStartDate: updateSubscriptionDto.startDate,
            subscriptionEndDate: updateSubscriptionDto.endDate,
            maxUsers: updateSubscriptionDto.maxUsers,
            maxStorage: updateSubscriptionDto.maxStorage,
            isSubscriptionActive: true
        });
        const updatedOrg = await this.organizationRepository.save(organization);
        await this.createAuditLog({
            organizationId: id,
            action: 'UPDATE_SUBSCRIPTION',
            metadata: { changes: updateSubscriptionDto }
        });
        return updatedOrg;
    }
    async getStatistics(id) {
        const organization = await this.findOne(id);
        const totalUsers = await this.userRepository.count({
            where: { organizationId: id }
        });
        const activeUsers = await this.userRepository.count({
            where: { organizationId: id, isActive: true }
        });
        const storageUsed = await this.getStorageUsage(id);
        return {
            totalUsers,
            activeUsers,
            storageUsed,
            storageLimit: organization.maxStorage,
            subscriptionStatus: organization.isSubscriptionActive,
            subscriptionTier: organization.subscriptionTier
        };
    }
    async verifyDomain(id, domain) {
        const organization = await this.findOne(id);
        const isVerified = await this.verifyDomainOwnership(domain);
        if (isVerified) {
            organization.domain = domain;
            organization.isDomainVerified = true;
            await this.organizationRepository.save(organization);
            await this.createAuditLog({
                organizationId: id,
                action: 'VERIFY_DOMAIN',
                metadata: { domain }
            });
        }
        return isVerified;
    }
    async getAuditLogs(id, query) {
        const queryBuilder = this.auditLogRepository.createQueryBuilder('audit_log')
            .where('audit_log.organizationId = :id', { id });
        if (query.action) {
            queryBuilder.andWhere('audit_log.action = :action', { action: query.action });
        }
        if (query.userId) {
            queryBuilder.andWhere('audit_log.metadata->\'userId\' = :userId', { userId: query.userId });
        }
        if (query.startDate && query.endDate) {
            queryBuilder.andWhere('audit_log.createdAt BETWEEN :startDate AND :endDate', {
                startDate: query.startDate,
                endDate: query.endDate
            });
        }
        const page = query.page || 1;
        const limit = query.limit || 10;
        const skip = (page - 1) * limit;
        queryBuilder.skip(skip).take(limit);
        queryBuilder.orderBy('audit_log.createdAt', 'DESC');
        const [items, total] = await queryBuilder.getManyAndCount();
        return { items, total };
    }
    async generateUniqueSlug(name) {
        let slug = (0,_utils_slug_util__WEBPACK_IMPORTED_MODULE_7__.generateSlug)(name);
        let counter = 1;
        while (await this.organizationRepository.findOne({ where: { slug } })) {
            slug = (0,_utils_slug_util__WEBPACK_IMPORTED_MODULE_7__.generateSlug)(name) + '-' + counter;
            counter++;
        }
        return slug;
    }
    getDefaultSettings() {
        return {
            ticketPriorities: ['LOW', 'MEDIUM', 'HIGH', 'URGENT'],
            ticketCategories: ['GENERAL', 'TECHNICAL', 'BILLING', 'OTHER'],
            customFields: [],
            notificationSettings: {
                emailEnabled: true,
                smsEnabled: false,
                inAppEnabled: true
            },
            brandingSettings: {
                primaryColor: '#007bff',
                logoUrl: null,
                favIconUrl: null
            }
        };
    }
    async createAuditLog(data) {
        const auditLog = this.auditLogRepository.create(data);
        await this.auditLogRepository.save(auditLog);
    }
    async sendWelcomeEmail(email, data) {
        console.log(`Sending welcome email to ${email} for organization ${data.organizationName}`);
    }
    async getStorageUsage(organizationId) {
        console.log(`Getting storage usage for organization ${organizationId}`);
        return 0;
    }
    async verifyDomainOwnership(domain) {
        console.log(`Verifying domain ownership for ${domain}`);
        return true;
    }
};
OrganizationsService = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)),
    __param(2, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_audit_entities_audit_log_entity__WEBPACK_IMPORTED_MODULE_5__.AuditLog)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _domain_services_domain_verification_service__WEBPACK_IMPORTED_MODULE_8__.DomainVerificationService,
        _shared_services_email_service__WEBPACK_IMPORTED_MODULE_9__.EmailService,
        _storage_services_storage_service__WEBPACK_IMPORTED_MODULE_10__.StorageService])
], OrganizationsService);



/***/ }),

/***/ "./src/modules/storage/services/storage.service.ts":
/*!*********************************************************!*\
  !*** ./src/modules/storage/services/storage.service.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StorageService: () => (/* binding */ StorageService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aws-sdk/client-s3 */ "../node_modules/@aws-sdk/client-s3/dist-es/S3Client.js");
/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-sdk/client-s3 */ "../node_modules/@aws-sdk/client-s3/dist-es/commands/PutObjectCommand.js");
/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-sdk/client-s3 */ "../node_modules/@aws-sdk/client-s3/dist-es/commands/GetObjectCommand.js");
/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-sdk/client-s3 */ "../node_modules/@aws-sdk/client-s3/dist-es/commands/DeleteObjectCommand.js");
/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-sdk/client-s3 */ "../node_modules/@aws-sdk/client-s3/dist-es/commands/CopyObjectCommand.js");
/* harmony import */ var _aws_sdk_s3_request_presigner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/s3-request-presigner */ "../node_modules/@aws-sdk/s3-request-presigner/dist-es/index.js");
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ "path");
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! crypto */ "crypto");
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var mime_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! mime-types */ "mime-types");
/* harmony import */ var mime_types__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(mime_types__WEBPACK_IMPORTED_MODULE_5__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var StorageService_1;







let StorageService = StorageService_1 = class StorageService {
    constructor(configService) {
        this.configService = configService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(StorageService_1.name);
        const region = this.configService.get('AWS_REGION');
        const accessKeyId = this.configService.get('AWS_ACCESS_KEY_ID');
        const secretAccessKey = this.configService.get('AWS_SECRET_ACCESS_KEY');
        this.bucketName = this.configService.get('AWS_S3_BUCKET') || 'default-bucket-name';
        this.cdnDomain = this.configService.get('CDN_DOMAIN');
        if (!region || !accessKeyId || !secretAccessKey) {
            throw new Error('AWS S3 configuration is incomplete');
        }
        this.s3Client = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_6__.S3Client({
            region,
            credentials: {
                accessKeyId: accessKeyId,
                secretAccessKey: secretAccessKey,
            },
        });
    }
    async upload(options) {
        const { fileName, buffer, mimeType: providedMimeType, organizationId, module, isPrivate = false, metadata = {}, } = options;
        const key = this.generateStorageKey({
            fileName,
            organizationId,
            module,
        });
        const mimeType = providedMimeType || mime_types__WEBPACK_IMPORTED_MODULE_5__.lookup(fileName) || 'application/octet-stream';
        try {
            await this.s3Client.send(new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_7__.PutObjectCommand({
                Bucket: this.bucketName,
                Key: key,
                Body: buffer,
                ContentType: mimeType,
                Metadata: Object.assign(Object.assign({}, metadata), { fileName,
                    organizationId,
                    module, isPrivate: String(isPrivate) }),
            }));
            const url = isPrivate
                ? await this.generateSignedUrl({ key })
                : this.generatePublicUrl(key);
            return {
                key,
                url,
                size: buffer.length,
                mimeType,
            };
        }
        catch (error) {
            this.logger.error(`Error uploading file ${fileName}:`, error);
            throw error;
        }
    }
    async generateSignedUrl(options) {
        const { key, expiresIn = 3600 } = options;
        const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_8__.GetObjectCommand({
            Bucket: this.bucketName,
            Key: key,
            ResponseContentDisposition: options.responseContentDisposition,
        });
        return (0,_aws_sdk_s3_request_presigner__WEBPACK_IMPORTED_MODULE_2__.getSignedUrl)(this.s3Client, command, { expiresIn });
    }
    generatePublicUrl(key) {
        if (this.cdnDomain) {
            return `https://${this.cdnDomain}/${key}`;
        }
        return `https://${this.bucketName}.s3.amazonaws.com/${key}`;
    }
    async delete(key) {
        try {
            await this.s3Client.send(new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_9__.DeleteObjectCommand({
                Bucket: this.bucketName,
                Key: key,
            }));
        }
        catch (error) {
            this.logger.error(`Error deleting file ${key}:`, error);
            throw error;
        }
    }
    generateStorageKey(options) {
        const { fileName, organizationId, module } = options;
        const timestamp = Date.now();
        const random = crypto__WEBPACK_IMPORTED_MODULE_4__.randomBytes(8).toString('hex');
        const extension = path__WEBPACK_IMPORTED_MODULE_3__.extname(fileName);
        const sanitizedName = path__WEBPACK_IMPORTED_MODULE_3__.basename(fileName, extension)
            .toLowerCase()
            .replace(/[^a-z0-9]/g, '-');
        return `${organizationId}/${module}/${timestamp}-${random}-${sanitizedName}${extension}`;
    }
    async getMetadata(key) {
        try {
            const { Metadata } = await this.s3Client.send(new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_8__.GetObjectCommand({
                Bucket: this.bucketName,
                Key: key,
            }));
            return Metadata || {};
        }
        catch (error) {
            this.logger.error(`Error getting metadata for ${key}:`, error);
            throw error;
        }
    }
    async copy(sourceKey, destinationKey) {
        try {
            await this.s3Client.send(new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_10__.CopyObjectCommand({
                Bucket: this.bucketName,
                Key: destinationKey,
                CopySource: `${this.bucketName}/${sourceKey}`,
            }));
        }
        catch (error) {
            this.logger.error(`Error copying file from ${sourceKey} to ${destinationKey}:`, error);
            throw error;
        }
    }
    async move(sourceKey, destinationKey) {
        await this.copy(sourceKey, destinationKey);
        await this.delete(sourceKey);
    }
    getModuleBucketLocation(module) {
        return `${this.bucketName}/${module}`;
    }
};
StorageService = StorageService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigService])
], StorageService);



/***/ }),

/***/ "./src/modules/tickets/controllers/tickets.controller.ts":
/*!***************************************************************!*\
  !*** ./src/modules/tickets/controllers/tickets.controller.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TicketsController: () => (/* binding */ TicketsController)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../auth/guards/jwt-auth.guard */ "./src/modules/auth/guards/jwt-auth.guard.ts");
/* harmony import */ var _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../auth/guards/roles.guard */ "./src/modules/auth/guards/roles.guard.ts");
/* harmony import */ var _common_guards_organization_guard__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/guards/organization.guard */ "./src/common/guards/organization.guard.ts");
/* harmony import */ var _common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/decorators/roles.decorator */ "./src/common/decorators/roles.decorator.ts");
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
/* harmony import */ var _services_tickets_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../services/tickets.service */ "./src/modules/tickets/services/tickets.service.ts");
/* harmony import */ var _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dto/create-ticket.dto */ "./src/modules/tickets/dto/create-ticket.dto.ts");
/* harmony import */ var _dto_update_ticket_dto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../dto/update-ticket.dto */ "./src/modules/tickets/dto/update-ticket.dto.ts");
/* harmony import */ var _dto_ticket_comment_dto__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../dto/ticket-comment.dto */ "./src/modules/tickets/dto/ticket-comment.dto.ts");
/* harmony import */ var _dto_ticket_assignment_dto__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../dto/ticket-assignment.dto */ "./src/modules/tickets/dto/ticket-assignment.dto.ts");
/* harmony import */ var _dto_ticket_query_dto__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../dto/ticket-query.dto */ "./src/modules/tickets/dto/ticket-query.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};














let TicketsController = class TicketsController {
    constructor(ticketsService) {
        this.ticketsService = ticketsService;
    }
    async create(createTicketDto, req) {
        return this.ticketsService.create(Object.assign(Object.assign({}, createTicketDto), { organizationId: req.organization.id, createdBy: req.user.id }));
    }
    async findAll(query, req) {
        return this.ticketsService.findAll(Object.assign(Object.assign({}, query), { organizationId: req.organization.id }));
    }
    async getDashboard(req) {
        return this.ticketsService.getDashboard(req.organization.id);
    }
    async getAssignedTickets(query, req) {
        return this.ticketsService.getAssignedTickets(Object.assign(Object.assign({}, query), { organizationId: req.organization.id, userId: req.user.id }));
    }
    async findOne(id, req) {
        const ticket = await this.ticketsService.findOne(id, req.organization.id);
        if (!ticket) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.NotFoundException('Ticket not found');
        }
        return ticket;
    }
    async update(id, updateTicketDto, req) {
        return this.ticketsService.update(id, Object.assign(Object.assign({}, updateTicketDto), { organizationId: req.organization.id, updatedBy: req.user.id }));
    }
    async remove(id, req) {
        await this.ticketsService.remove(id, req.organization.id);
    }
    async addComment(id, commentDto, req) {
        return this.ticketsService.addComment(id, Object.assign(Object.assign({}, commentDto), { organizationId: req.organization.id, userId: req.user.id }));
    }
    async assignTicket(id, assignmentDto, req) {
        return this.ticketsService.assignTicket(id, Object.assign(Object.assign({}, assignmentDto), { organizationId: req.organization.id, assignedBy: req.user.id, ticketIds: [id] }));
    }
    async escalateTicket(id, reason, req) {
        return this.ticketsService.escalateTicket(id, {
            reason,
            organizationId: req.organization.id,
            escalatedBy: req.user.id,
        });
    }
    async resolveTicket(id, resolution, req) {
        return this.ticketsService.resolveTicket(id, {
            resolution,
            organizationId: req.organization.id,
            resolvedBy: req.user.id,
        });
    }
    async reopenTicket(id, reason, req) {
        return this.ticketsService.reopenTicket(id, {
            reason,
            organizationId: req.organization.id,
            reopenedBy: req.user.id,
        });
    }
    async getTimeline(id, req) {
        return this.ticketsService.getTimeline(id, req.organization.id);
    }
    async getRelatedTickets(id, req) {
        return this.ticketsService.getRelatedTickets(id, req.organization.id);
    }
};
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Create new ticket' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'Ticket created successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_8__.CreateTicketDto, Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "create", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get all tickets' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return all tickets' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_ticket_query_dto__WEBPACK_IMPORTED_MODULE_12__.TicketQueryDto, Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "findAll", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('dashboard'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get tickets dashboard data' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return tickets dashboard data' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: Object }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "getDashboard", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('assigned'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get tickets assigned to current user' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return assigned tickets' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_ticket_query_dto__WEBPACK_IMPORTED_MODULE_12__.TicketQueryDto, Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "getAssignedTickets", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get ticket by id' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return ticket details' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "findOne", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)(':id'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Update ticket' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Ticket updated successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_update_ticket_dto__WEBPACK_IMPORTED_MODULE_9__.UpdateTicketDto, Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "update", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Delete)(':id'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_5__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_6__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Delete ticket' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.NO_CONTENT, description: 'Ticket deleted successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "remove", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(':id/comments'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Add comment to ticket' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'Comment added successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/ticket-comment.entity */ "./src/modules/tickets/entities/ticket-comment.entity.ts").TicketComment) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_ticket_comment_dto__WEBPACK_IMPORTED_MODULE_10__.CreateTicketCommentDto, Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "addComment", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)(':id/assign'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_5__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_6__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_6__.Role.STAFF),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Assign ticket' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Ticket assigned successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_ticket_assignment_dto__WEBPACK_IMPORTED_MODULE_11__.TicketAssignmentDto, Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "assignTicket", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(':id/escalate'),
    (0,_common_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_5__.Roles)(_users_enums_role_enum__WEBPACK_IMPORTED_MODULE_6__.Role.ADMIN, _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_6__.Role.STAFF),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Escalate ticket' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Ticket escalated successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)('reason')),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "escalateTicket", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(':id/resolve'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Resolve ticket' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Ticket resolved successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)('resolution')),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "resolveTicket", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(':id/reopen'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Reopen ticket' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Ticket reopened successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)('reason')),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "reopenTicket", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id/timeline'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get ticket timeline' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return ticket timeline' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: [(__webpack_require__(/*! ../entities/ticket-activity.entity */ "./src/modules/tickets/entities/ticket-activity.entity.ts").TicketActivity)] }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "getTimeline", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id/related'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get related tickets' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return related tickets' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: Object }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], TicketsController.prototype, "getRelatedTickets", null);
TicketsController = __decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiTags)('Tickets'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Controller)('tickets'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UseGuards)(_auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__.JwtAuthGuard, _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__.RolesGuard, _common_guards_organization_guard__WEBPACK_IMPORTED_MODULE_4__.OrganizationGuard),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiBearerAuth)(),
    __metadata("design:paramtypes", [_services_tickets_service__WEBPACK_IMPORTED_MODULE_7__.TicketsService])
], TicketsController);



/***/ }),

/***/ "./src/modules/tickets/dto/create-ticket.dto.ts":
/*!******************************************************!*\
  !*** ./src/modules/tickets/dto/create-ticket.dto.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateTicketDto: () => (/* binding */ CreateTicketDto),
/* harmony export */   TicketAttachment: () => (/* binding */ TicketAttachment),
/* harmony export */   TicketPriority: () => (/* binding */ TicketPriority),
/* harmony export */   TicketSource: () => (/* binding */ TicketSource),
/* harmony export */   TicketStatus: () => (/* binding */ TicketStatus),
/* harmony export */   TicketType: () => (/* binding */ TicketType)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var TicketType;
(function (TicketType) {
    TicketType["GENERAL"] = "GENERAL";
    TicketType["TECHNICAL"] = "TECHNICAL";
    TicketType["BILLING"] = "BILLING";
    TicketType["MEDICAL"] = "MEDICAL";
    TicketType["APPOINTMENT"] = "APPOINTMENT";
    TicketType["ACCESS"] = "ACCESS";
    TicketType["COMPLAINT"] = "COMPLAINT";
    TicketType["FEEDBACK"] = "FEEDBACK";
})(TicketType || (TicketType = {}));
var TicketPriority;
(function (TicketPriority) {
    TicketPriority["LOW"] = "LOW";
    TicketPriority["NORMAL"] = "NORMAL";
    TicketPriority["HIGH"] = "HIGH";
    TicketPriority["URGENT"] = "URGENT";
})(TicketPriority || (TicketPriority = {}));
var TicketStatus;
(function (TicketStatus) {
    TicketStatus["OPEN"] = "OPEN";
    TicketStatus["IN_PROGRESS"] = "IN_PROGRESS";
    TicketStatus["PENDING"] = "PENDING";
    TicketStatus["RESOLVED"] = "RESOLVED";
    TicketStatus["CLOSED"] = "CLOSED";
    TicketStatus["ESCALATED"] = "ESCALATED";
    TicketStatus["REOPENED"] = "REOPENED";
    TicketStatus["DELETED"] = "DELETED";
})(TicketStatus || (TicketStatus = {}));
var TicketSource;
(function (TicketSource) {
    TicketSource["WEB"] = "WEB";
    TicketSource["MOBILE"] = "MOBILE";
    TicketSource["EMAIL"] = "EMAIL";
    TicketSource["PHONE"] = "PHONE";
    TicketSource["CHAT"] = "CHAT";
    TicketSource["SYSTEM"] = "SYSTEM";
})(TicketSource || (TicketSource = {}));
class TicketAttachment {
    static _OPENAPI_METADATA_FACTORY() {
        return { fileName: { required: true, type: () => String, maxLength: 255 }, fileType: { required: true, type: () => String, maxLength: 50 }, fileUrl: { required: true, type: () => String }, fileSize: { required: false, type: () => String }, description: { required: false, type: () => String, maxLength: 500 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(255),
    __metadata("design:type", String)
], TicketAttachment.prototype, "fileName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], TicketAttachment.prototype, "fileType", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], TicketAttachment.prototype, "fileUrl", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], TicketAttachment.prototype, "fileSize", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(500),
    __metadata("design:type", String)
], TicketAttachment.prototype, "description", void 0);
class CreateTicketDto {
    constructor() {
        this.priority = TicketPriority.NORMAL;
        this.source = TicketSource.WEB;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { title: { required: true, type: () => String, minLength: 5, maxLength: 200 }, description: { required: true, type: () => String, minLength: 10, maxLength: 5000 }, type: { required: true, enum: (__webpack_require__(/*! ./create-ticket.dto */ "./src/modules/tickets/dto/create-ticket.dto.ts").TicketType) }, priority: { required: false, default: TicketPriority.NORMAL, enum: (__webpack_require__(/*! ./create-ticket.dto */ "./src/modules/tickets/dto/create-ticket.dto.ts").TicketPriority) }, source: { required: false, default: TicketSource.WEB, enum: (__webpack_require__(/*! ./create-ticket.dto */ "./src/modules/tickets/dto/create-ticket.dto.ts").TicketSource) }, contactId: { required: false, type: () => String }, departmentId: { required: false, type: () => String }, assigneeId: { required: false, type: () => String }, category: { required: false, type: () => String, maxLength: 100 }, subCategory: { required: false, type: () => String, maxLength: 100 }, attachments: { required: false, type: () => [(__webpack_require__(/*! ./create-ticket.dto */ "./src/modules/tickets/dto/create-ticket.dto.ts").TicketAttachment)] }, tags: { required: false, type: () => [String] }, referenceNumber: { required: false, type: () => String, maxLength: 100 }, relatedTicketId: { required: false, type: () => String }, isPrivate: { required: false, type: () => Boolean }, internalNotes: { required: false, type: () => String, maxLength: 1000 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(5),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(200),
    __metadata("design:type", String)
], CreateTicketDto.prototype, "title", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(10),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(5000),
    __metadata("design:type", String)
], CreateTicketDto.prototype, "description", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ enum: TicketType }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(TicketType),
    __metadata("design:type", String)
], CreateTicketDto.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: TicketPriority }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(TicketPriority),
    __metadata("design:type", String)
], CreateTicketDto.prototype, "priority", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: TicketSource }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(TicketSource),
    __metadata("design:type", String)
], CreateTicketDto.prototype, "source", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], CreateTicketDto.prototype, "contactId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], CreateTicketDto.prototype, "departmentId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], CreateTicketDto.prototype, "assigneeId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], CreateTicketDto.prototype, "category", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], CreateTicketDto.prototype, "subCategory", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ type: [TicketAttachment] }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)({ each: true }),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => TicketAttachment),
    __metadata("design:type", Array)
], CreateTicketDto.prototype, "attachments", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], CreateTicketDto.prototype, "tags", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], CreateTicketDto.prototype, "referenceNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], CreateTicketDto.prototype, "relatedTicketId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], CreateTicketDto.prototype, "customFields", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateTicketDto.prototype, "isPrivate", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(1000),
    __metadata("design:type", String)
], CreateTicketDto.prototype, "internalNotes", void 0);


/***/ }),

/***/ "./src/modules/tickets/dto/ticket-assignment.dto.ts":
/*!**********************************************************!*\
  !*** ./src/modules/tickets/dto/ticket-assignment.dto.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AssignmentNotification: () => (/* binding */ AssignmentNotification),
/* harmony export */   AssignmentResponseDto: () => (/* binding */ AssignmentResponseDto),
/* harmony export */   AssignmentRules: () => (/* binding */ AssignmentRules),
/* harmony export */   AssignmentType: () => (/* binding */ AssignmentType),
/* harmony export */   BulkTicketAssignmentDto: () => (/* binding */ BulkTicketAssignmentDto),
/* harmony export */   CreateTicketAssignmentDto: () => (/* binding */ CreateTicketAssignmentDto),
/* harmony export */   TicketAssignmentDto: () => (/* binding */ TicketAssignmentDto),
/* harmony export */   UpdateTicketAssignmentDto: () => (/* binding */ UpdateTicketAssignmentDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var AssignmentType;
(function (AssignmentType) {
    AssignmentType["USER"] = "user";
    AssignmentType["TEAM"] = "team";
    AssignmentType["DEPARTMENT"] = "department";
    AssignmentType["AUTO"] = "auto";
    AssignmentType["ROUND_ROBIN"] = "round_robin";
})(AssignmentType || (AssignmentType = {}));
class AssignmentNotification {
    constructor() {
        this.notifyAssignee = true;
        this.notifyPreviousAssignee = true;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { notifyAssignee: { required: false, type: () => Boolean, default: true }, notifyPreviousAssignee: { required: false, type: () => Boolean, default: true }, customMessage: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Whether to notify the assignee',
        default: true
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Boolean)
], AssignmentNotification.prototype, "notifyAssignee", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Whether to notify the previous assignee',
        default: true
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Boolean)
], AssignmentNotification.prototype, "notifyPreviousAssignee", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Custom notification message',
        example: 'You have been assigned to handle this urgent support request.'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], AssignmentNotification.prototype, "customMessage", void 0);
class TicketAssignmentDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { assigneeId: { required: true, type: () => String }, note: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'The ID of the user to assign the ticket to',
        example: '123e4567-e89b-12d3-a456-426614174000'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], TicketAssignmentDto.prototype, "assigneeId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Optional note about the assignment',
        example: 'Assigning to support team lead for escalated issue'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], TicketAssignmentDto.prototype, "note", void 0);
class AssignmentRules {
    constructor() {
        this.considerWorkload = true;
        this.checkSkillMatch = true;
        this.considerTimeZone = false;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { considerWorkload: { required: false, type: () => Boolean, default: true }, checkSkillMatch: { required: false, type: () => Boolean, default: true }, considerTimeZone: { required: false, type: () => Boolean, default: false }, requiredSkills: { required: false, type: () => [String] } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Whether to consider workload when assigning',
        default: true
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Boolean)
], AssignmentRules.prototype, "considerWorkload", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Whether to check for skill match',
        default: true
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Boolean)
], AssignmentRules.prototype, "checkSkillMatch", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Whether to consider time zones',
        default: false
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Boolean)
], AssignmentRules.prototype, "considerTimeZone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Required skills for the assignment',
        type: [String]
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Array)
], AssignmentRules.prototype, "requiredSkills", void 0);
class CreateTicketAssignmentDto {
    constructor() {
        this.isTemporary = false;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { type: { required: true, enum: (__webpack_require__(/*! ./ticket-assignment.dto */ "./src/modules/tickets/dto/ticket-assignment.dto.ts").AssignmentType) }, assigneeId: { required: true, type: () => String }, notification: { required: false, type: () => (__webpack_require__(/*! ./ticket-assignment.dto */ "./src/modules/tickets/dto/ticket-assignment.dto.ts").AssignmentNotification) }, rules: { required: false, type: () => (__webpack_require__(/*! ./ticket-assignment.dto */ "./src/modules/tickets/dto/ticket-assignment.dto.ts").AssignmentRules) }, reason: { required: false, type: () => String }, notes: { required: false, type: () => [String] }, isTemporary: { required: false, type: () => Boolean, default: false }, temporaryUntil: { required: false, type: () => Date } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Type of assignment',
        enum: AssignmentType,
        example: AssignmentType.USER
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(AssignmentType),
    __metadata("design:type", String)
], CreateTicketAssignmentDto.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'ID of the assignee (user, team, or department)',
        example: '123e4567-e89b-12d3-a456-426614174000'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4'),
    __metadata("design:type", String)
], CreateTicketAssignmentDto.prototype, "assigneeId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Notification settings for the assignment'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => AssignmentNotification),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", AssignmentNotification)
], CreateTicketAssignmentDto.prototype, "notification", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Assignment rules and preferences'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => AssignmentRules),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", AssignmentRules)
], CreateTicketAssignmentDto.prototype, "rules", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Reason for the assignment',
        example: 'Reassigned due to technical expertise required'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], CreateTicketAssignmentDto.prototype, "reason", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        type: [String],
        description: 'Additional notes or comments about the assignment'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Array)
], CreateTicketAssignmentDto.prototype, "notes", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Whether this is a temporary assignment',
        default: false
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Boolean)
], CreateTicketAssignmentDto.prototype, "isTemporary", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        type: Date,
        description: 'If temporary, when the assignment should end'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    __metadata("design:type", Date)
], CreateTicketAssignmentDto.prototype, "temporaryUntil", void 0);
class UpdateTicketAssignmentDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { type: { required: false, enum: (__webpack_require__(/*! ./ticket-assignment.dto */ "./src/modules/tickets/dto/ticket-assignment.dto.ts").AssignmentType) }, assigneeId: { required: false, type: () => String }, notification: { required: false, type: () => (__webpack_require__(/*! ./ticket-assignment.dto */ "./src/modules/tickets/dto/ticket-assignment.dto.ts").AssignmentNotification) }, rules: { required: false, type: () => (__webpack_require__(/*! ./ticket-assignment.dto */ "./src/modules/tickets/dto/ticket-assignment.dto.ts").AssignmentRules) }, reason: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        enum: AssignmentType,
        description: 'Updated type of assignment'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(AssignmentType),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], UpdateTicketAssignmentDto.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Updated assignee ID',
        example: '123e4567-e89b-12d3-a456-426614174000'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4'),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], UpdateTicketAssignmentDto.prototype, "assigneeId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Updated notification settings'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => AssignmentNotification),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", AssignmentNotification)
], UpdateTicketAssignmentDto.prototype, "notification", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Updated assignment rules'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => AssignmentRules),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", AssignmentRules)
], UpdateTicketAssignmentDto.prototype, "rules", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Reason for updating the assignment',
        example: 'Adjusted assignment due to workload balancing'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], UpdateTicketAssignmentDto.prototype, "reason", void 0);
class BulkTicketAssignmentDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { ticketIds: { required: true, type: () => [String] }, assigneeId: { required: true, type: () => String }, note: { required: false, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Array of ticket IDs to assign',
        example: ['123e4567-e89b-12d3-a456-426614174000', '123e4567-e89b-12d3-a456-426614174001'],
        type: [String]
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4', { each: true }),
    ArrayMinSize(1),
    __metadata("design:type", Array)
], BulkTicketAssignmentDto.prototype, "ticketIds", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'The ID of the user to assign the tickets to',
        example: '123e4567-e89b-12d3-a456-426614174000'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], BulkTicketAssignmentDto.prototype, "assigneeId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Optional note about the bulk assignment',
        example: 'Assigning all pending tickets to the new support agent'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], BulkTicketAssignmentDto.prototype, "note", void 0);
class AssignmentResponseDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { success: { required: true, type: () => Boolean }, ticketId: { required: true, type: () => String }, assigneeId: { required: true, type: () => String }, type: { required: true, enum: (__webpack_require__(/*! ./ticket-assignment.dto */ "./src/modules/tickets/dto/ticket-assignment.dto.ts").AssignmentType) }, error: { required: false, type: () => String }, timestamp: { required: true, type: () => Date }, details: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Whether the assignment was successful'
    }),
    __metadata("design:type", Boolean)
], AssignmentResponseDto.prototype, "success", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'The ticket ID'
    }),
    __metadata("design:type", String)
], AssignmentResponseDto.prototype, "ticketId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'The assignee ID'
    }),
    __metadata("design:type", String)
], AssignmentResponseDto.prototype, "assigneeId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Type of assignment',
        enum: AssignmentType
    }),
    __metadata("design:type", String)
], AssignmentResponseDto.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Error message if assignment failed'
    }),
    __metadata("design:type", String)
], AssignmentResponseDto.prototype, "error", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Timestamp of the assignment'
    }),
    __metadata("design:type", Date)
], AssignmentResponseDto.prototype, "timestamp", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Additional details about the assignment'
    }),
    __metadata("design:type", Object)
], AssignmentResponseDto.prototype, "details", void 0);
function ArrayMinSize(min, validationOptions) {
    return function (object, propertyName) {
        (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.registerDecorator)({
            name: 'arrayMinSize',
            target: object.constructor,
            propertyName: propertyName,
            options: validationOptions,
            constraints: [min],
            validator: {
                validate(value, args) {
                    const [minSize] = args.constraints;
                    return Array.isArray(value) && value.length >= minSize;
                },
                defaultMessage(args) {
                    const [minSize] = args.constraints;
                    return `Array must contain at least ${minSize} elements`;
                }
            }
        });
    };
}


/***/ }),

/***/ "./src/modules/tickets/dto/ticket-comment.dto.ts":
/*!*******************************************************!*\
  !*** ./src/modules/tickets/dto/ticket-comment.dto.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CommentAttachment: () => (/* binding */ CommentAttachment),
/* harmony export */   CommentVisibility: () => (/* binding */ CommentVisibility),
/* harmony export */   CreateTicketCommentDto: () => (/* binding */ CreateTicketCommentDto),
/* harmony export */   TicketCommentResponseDto: () => (/* binding */ TicketCommentResponseDto),
/* harmony export */   UpdateTicketCommentDto: () => (/* binding */ UpdateTicketCommentDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var CommentVisibility;
(function (CommentVisibility) {
    CommentVisibility["PUBLIC"] = "public";
    CommentVisibility["INTERNAL"] = "internal";
    CommentVisibility["PRIVATE"] = "private";
})(CommentVisibility || (CommentVisibility = {}));
class CommentAttachment {
    static _OPENAPI_METADATA_FACTORY() {
        return { fileName: { required: true, type: () => String }, fileSize: { required: true, type: () => Number }, mimeType: { required: true, type: () => String }, fileUrl: { required: true, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'The original name of the uploaded file' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], CommentAttachment.prototype, "fileName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'The file size in bytes' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", Number)
], CommentAttachment.prototype, "fileSize", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'The MIME type of the file' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], CommentAttachment.prototype, "mimeType", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ description: 'The URL or path to the stored file' }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], CommentAttachment.prototype, "fileUrl", void 0);
class CreateTicketCommentDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { content: { required: true, type: () => String }, isInternal: { required: true, type: () => Boolean }, visibility: { required: false, enum: (__webpack_require__(/*! ./ticket-comment.dto */ "./src/modules/tickets/dto/ticket-comment.dto.ts").CommentVisibility) }, parentId: { required: false, type: () => String }, attachments: { required: false, type: () => [(__webpack_require__(/*! ./ticket-comment.dto */ "./src/modules/tickets/dto/ticket-comment.dto.ts").CommentAttachment)] }, mentionedUserIds: { required: false, type: () => [String] }, sendNotifications: { required: false, type: () => Boolean } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'The main content of the comment',
        example: 'This is a comment on the ticket'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    __metadata("design:type", String)
], CreateTicketCommentDto.prototype, "content", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        enum: CommentVisibility,
        description: 'Visibility level of the comment',
        default: CommentVisibility.PUBLIC
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(CommentVisibility),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], CreateTicketCommentDto.prototype, "visibility", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'ID of the parent comment if this is a reply',
        example: '123e4567-e89b-12d3-a456-426614174000'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], CreateTicketCommentDto.prototype, "parentId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        type: [CommentAttachment],
        description: 'Array of attachments for the comment'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)({ each: true }),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => CommentAttachment),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Array)
], CreateTicketCommentDto.prototype, "attachments", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Mentioned user IDs in the comment',
        type: [String]
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4', { each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Array)
], CreateTicketCommentDto.prototype, "mentionedUserIds", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Whether the comment should trigger notifications',
        default: true
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Boolean)
], CreateTicketCommentDto.prototype, "sendNotifications", void 0);
class UpdateTicketCommentDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { content: { required: false, type: () => String }, visibility: { required: false, enum: (__webpack_require__(/*! ./ticket-comment.dto */ "./src/modules/tickets/dto/ticket-comment.dto.ts").CommentVisibility) }, attachments: { required: false, type: () => [(__webpack_require__(/*! ./ticket-comment.dto */ "./src/modules/tickets/dto/ticket-comment.dto.ts").CommentAttachment)] } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Updated content of the comment',
        example: 'This is the updated comment'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], UpdateTicketCommentDto.prototype, "content", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        enum: CommentVisibility,
        description: 'Updated visibility level of the comment'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(CommentVisibility),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], UpdateTicketCommentDto.prototype, "visibility", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        type: [CommentAttachment],
        description: 'Updated array of attachments'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)({ each: true }),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => CommentAttachment),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Array)
], UpdateTicketCommentDto.prototype, "attachments", void 0);
class TicketCommentResponseDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, ticketId: { required: true, type: () => String }, authorId: { required: true, type: () => String }, content: { required: true, type: () => String }, visibility: { required: true, enum: (__webpack_require__(/*! ./ticket-comment.dto */ "./src/modules/tickets/dto/ticket-comment.dto.ts").CommentVisibility) }, parentId: { required: false, type: () => String }, attachments: { required: true, type: () => [(__webpack_require__(/*! ./ticket-comment.dto */ "./src/modules/tickets/dto/ticket-comment.dto.ts").CommentAttachment)] }, mentionedUserIds: { required: true, type: () => [String] }, createdAt: { required: true, type: () => Date }, updatedAt: { required: false, type: () => Date }, deletedAt: { required: false, type: () => Date }, isEdited: { required: true, type: () => Boolean }, replyCount: { required: true, type: () => Number } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Unique identifier of the comment',
        example: '123e4567-e89b-12d3-a456-426614174000'
    }),
    __metadata("design:type", String)
], TicketCommentResponseDto.prototype, "id", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'The ticket ID this comment belongs to',
        example: '123e4567-e89b-12d3-a456-426614174000'
    }),
    __metadata("design:type", String)
], TicketCommentResponseDto.prototype, "ticketId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'User ID of the comment author',
        example: '123e4567-e89b-12d3-a456-426614174000'
    }),
    __metadata("design:type", String)
], TicketCommentResponseDto.prototype, "authorId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'The main content of the comment',
        example: 'This is a comment on the ticket'
    }),
    __metadata("design:type", String)
], TicketCommentResponseDto.prototype, "content", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        enum: CommentVisibility,
        description: 'Visibility level of the comment'
    }),
    __metadata("design:type", String)
], TicketCommentResponseDto.prototype, "visibility", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'ID of the parent comment if this is a reply',
        example: '123e4567-e89b-12d3-a456-426614174000'
    }),
    __metadata("design:type", String)
], TicketCommentResponseDto.prototype, "parentId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        type: [CommentAttachment],
        description: 'Array of attachments for the comment'
    }),
    __metadata("design:type", Array)
], TicketCommentResponseDto.prototype, "attachments", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Array of mentioned user IDs',
        type: [String]
    }),
    __metadata("design:type", Array)
], TicketCommentResponseDto.prototype, "mentionedUserIds", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Timestamp when the comment was created',
        example: '2024-02-10T12:00:00Z'
    }),
    __metadata("design:type", Date)
], TicketCommentResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Timestamp when the comment was last updated',
        example: '2024-02-10T13:00:00Z'
    }),
    __metadata("design:type", Date)
], TicketCommentResponseDto.prototype, "updatedAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Timestamp when the comment was deleted',
        example: '2024-02-10T14:00:00Z'
    }),
    __metadata("design:type", Date)
], TicketCommentResponseDto.prototype, "deletedAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Whether the comment has been edited',
        example: false
    }),
    __metadata("design:type", Boolean)
], TicketCommentResponseDto.prototype, "isEdited", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'Number of replies to this comment',
        example: 0
    }),
    __metadata("design:type", Number)
], TicketCommentResponseDto.prototype, "replyCount", void 0);


/***/ }),

/***/ "./src/modules/tickets/dto/ticket-query.dto.ts":
/*!*****************************************************!*\
  !*** ./src/modules/tickets/dto/ticket-query.dto.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SortOrder: () => (/* binding */ SortOrder),
/* harmony export */   TicketQueryDto: () => (/* binding */ TicketQueryDto),
/* harmony export */   TicketSortField: () => (/* binding */ TicketSortField)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var TicketSortField;
(function (TicketSortField) {
    TicketSortField["CREATED_AT"] = "createdAt";
    TicketSortField["UPDATED_AT"] = "updatedAt";
    TicketSortField["PRIORITY"] = "priority";
    TicketSortField["STATUS"] = "status";
    TicketSortField["DUE_DATE"] = "dueDate";
    TicketSortField["LAST_ACTIVITY"] = "lastActivity";
})(TicketSortField || (TicketSortField = {}));
var SortOrder;
(function (SortOrder) {
    SortOrder["ASC"] = "ASC";
    SortOrder["DESC"] = "DESC";
})(SortOrder || (SortOrder = {}));
class TicketQueryDto {
    constructor() {
        this.page = 1;
        this.limit = 10;
        this.offset = 0;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { searchTerm: { required: false, type: () => String }, priority: { required: false, type: () => String }, type: { required: false, type: () => String }, assigneeId: { required: false, type: () => String }, contactId: { required: false, type: () => String }, departmentId: { required: false, type: () => String }, search: { required: false, type: () => String }, startDate: { required: false, type: () => String }, endDate: { required: false, type: () => String }, page: { required: false, type: () => Number, default: 1, minimum: 1 }, limit: { required: false, type: () => Number, default: 10, minimum: 1 }, status: { required: false, type: () => [String] }, category: { required: false, type: () => [String] }, assigneeIds: { required: false, type: () => [String] }, creatorIds: { required: false, type: () => [String] }, tags: { required: false, type: () => [String] }, createdAfter: { required: false, type: () => Date }, createdBefore: { required: false, type: () => Date }, updatedAfter: { required: false, type: () => Date }, updatedBefore: { required: false, type: () => Date }, dueDateStart: { required: false, type: () => Date }, dueDateEnd: { required: false, type: () => Date }, includeArchived: { required: false, type: () => Boolean }, hasUnreadUpdates: { required: false, type: () => Boolean }, hasAttachments: { required: false, type: () => Boolean }, sortField: { required: false, enum: (__webpack_require__(/*! ./ticket-query.dto */ "./src/modules/tickets/dto/ticket-query.dto.ts").TicketSortField) }, sortOrder: { required: false, enum: (__webpack_require__(/*! ./ticket-query.dto */ "./src/modules/tickets/dto/ticket-query.dto.ts").SortOrder) }, offset: { required: false, type: () => Number, default: 0, minimum: 1, maximum: 100 }, customFields: { required: false, type: () => Object }, relatedTicketIds: { required: false, type: () => [String] }, requiresAttention: { required: false, type: () => Boolean }, hasSlaBreach: { required: false, type: () => Boolean }, slaStatus: { required: false, type: () => [String] }, fields: { required: false, type: () => [String] } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Search term to filter tickets by title or description',
        example: 'login issue'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], TicketQueryDto.prototype, "searchTerm", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], TicketQueryDto.prototype, "priority", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], TicketQueryDto.prototype, "type", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], TicketQueryDto.prototype, "assigneeId", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], TicketQueryDto.prototype, "contactId", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)(),
    __metadata("design:type", String)
], TicketQueryDto.prototype, "departmentId", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], TicketQueryDto.prototype, "search", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], TicketQueryDto.prototype, "startDate", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", String)
], TicketQueryDto.prototype, "endDate", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Number),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    __metadata("design:type", Number)
], TicketQueryDto.prototype, "page", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Number),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    __metadata("design:type", Number)
], TicketQueryDto.prototype, "limit", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter tickets by status',
        isArray: true,
        example: ['OPEN', 'IN_PROGRESS']
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], TicketQueryDto.prototype, "status", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter tickets by priority',
        isArray: true,
        example: ['HIGH', 'URGENT']
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter tickets by category',
        isArray: true,
        example: ['TECHNICAL', 'BILLING']
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], TicketQueryDto.prototype, "category", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter tickets by assignee IDs',
        isArray: true
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4', { each: true }),
    __metadata("design:type", Array)
], TicketQueryDto.prototype, "assigneeIds", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter tickets by creator IDs',
        isArray: true
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4', { each: true }),
    __metadata("design:type", Array)
], TicketQueryDto.prototype, "creatorIds", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter tickets by tag names',
        isArray: true,
        example: ['bug', 'feature-request']
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], TicketQueryDto.prototype, "tags", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter tickets created after this date',
        type: Date
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    __metadata("design:type", Date)
], TicketQueryDto.prototype, "createdAfter", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter tickets created before this date',
        type: Date
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    __metadata("design:type", Date)
], TicketQueryDto.prototype, "createdBefore", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter tickets updated after this date',
        type: Date
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    __metadata("design:type", Date)
], TicketQueryDto.prototype, "updatedAfter", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter tickets updated before this date',
        type: Date
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    __metadata("design:type", Date)
], TicketQueryDto.prototype, "updatedBefore", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter tickets by due date range start',
        type: Date
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    __metadata("design:type", Date)
], TicketQueryDto.prototype, "dueDateStart", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter tickets by due date range end',
        type: Date
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Date),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsDate)(),
    __metadata("design:type", Date)
], TicketQueryDto.prototype, "dueDateEnd", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Include archived tickets in results',
        default: false
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], TicketQueryDto.prototype, "includeArchived", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Only return tickets that have unread updates',
        default: false
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], TicketQueryDto.prototype, "hasUnreadUpdates", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Only return tickets that have attachments',
        default: false
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], TicketQueryDto.prototype, "hasAttachments", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Field to sort tickets by',
        enum: TicketSortField,
        default: TicketSortField.CREATED_AT
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(TicketSortField),
    __metadata("design:type", String)
], TicketQueryDto.prototype, "sortField", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Sort order direction',
        enum: SortOrder,
        default: SortOrder.DESC
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(SortOrder),
    __metadata("design:type", String)
], TicketQueryDto.prototype, "sortOrder", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Number of tickets to return',
        minimum: 1,
        maximum: 100,
        default: 20
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(100),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Number of tickets to skip',
        minimum: 0,
        default: 0
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsInt)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    __metadata("design:type", Number)
], TicketQueryDto.prototype, "offset", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Custom field filters',
        type: 'object'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Object),
    __metadata("design:type", Object)
], TicketQueryDto.prototype, "customFields", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Relation IDs to filter by',
        isArray: true
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsUUID)('4', { each: true }),
    __metadata("design:type", Array)
], TicketQueryDto.prototype, "relatedTicketIds", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Get tickets requiring attention',
        default: false
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], TicketQueryDto.prototype, "requiresAttention", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Get tickets with SLA breaches',
        default: false
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], TicketQueryDto.prototype, "hasSlaBreach", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Filter by specific SLA status',
        example: ['warning', 'breached']
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], TicketQueryDto.prototype, "slaStatus", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Fields to include in the response',
        isArray: true,
        example: ['id', 'title', 'status']
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], TicketQueryDto.prototype, "fields", void 0);


/***/ }),

/***/ "./src/modules/tickets/dto/update-ticket.dto.ts":
/*!******************************************************!*\
  !*** ./src/modules/tickets/dto/update-ticket.dto.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UpdateTicketDto: () => (/* binding */ UpdateTicketDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _create_ticket_dto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./create-ticket.dto */ "./src/modules/tickets/dto/create-ticket.dto.ts");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




class UpdateTicketDto extends (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.PartialType)((0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.OmitType)(_create_ticket_dto__WEBPACK_IMPORTED_MODULE_1__.CreateTicketDto, ['type', 'source'])) {
    static _OPENAPI_METADATA_FACTORY() {
        return { status: { required: false, enum: (__webpack_require__(/*! ./create-ticket.dto */ "./src/modules/tickets/dto/create-ticket.dto.ts").TicketStatus) }, statusNote: { required: false, type: () => String, maxLength: 1000 }, resolution: { required: false, type: () => String, maxLength: 1000 } };
    }
}
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsEnum)(_create_ticket_dto__WEBPACK_IMPORTED_MODULE_1__.TicketStatus),
    __metadata("design:type", String)
], UpdateTicketDto.prototype, "status", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.MaxLength)(1000),
    __metadata("design:type", String)
], UpdateTicketDto.prototype, "statusNote", void 0);
__decorate([
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.MaxLength)(1000),
    __metadata("design:type", String)
], UpdateTicketDto.prototype, "resolution", void 0);


/***/ }),

/***/ "./src/modules/tickets/entities/ticket-activity.entity.ts":
/*!****************************************************************!*\
  !*** ./src/modules/tickets/entities/ticket-activity.entity.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TicketActivity: () => (/* binding */ TicketActivity)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _ticket_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _enums_ticket_activity_type_enum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../enums/ticket-activity-type.enum */ "./src/modules/tickets/enums/ticket-activity-type.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





let TicketActivity = class TicketActivity {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, userId: { required: true, type: () => String }, action: { required: true, type: () => String }, details: { required: true, type: () => Object }, ticketId: { required: true, type: () => String }, ticket: { required: true, type: () => (__webpack_require__(/*! ./ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket) }, performedById: { required: true, type: () => String }, performedBy: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, type: { required: true, enum: (__webpack_require__(/*! ../enums/ticket-activity-type.enum */ "./src/modules/tickets/enums/ticket-activity-type.enum.ts").TicketActivityType) }, data: { required: true, type: () => Object }, metadata: { required: false, type: () => Object }, timestamp: { required: true, type: () => Date }, ipAddress: { required: false, type: () => String }, userAgent: { required: false, type: () => String }, changes: { required: false }, tags: { required: false, type: () => [String] }, parentActivityId: { required: false, type: () => String }, parentActivity: { required: false, type: () => (__webpack_require__(/*! ./ticket-activity.entity */ "./src/modules/tickets/entities/ticket-activity.entity.ts").TicketActivity) }, context: { required: false, type: () => ({ location: { required: false, type: () => String }, deviceInfo: { required: false, type: () => String }, sessionId: { required: false, type: () => String }, referrer: { required: false, type: () => String } }) }, isSystem: { required: true, type: () => Boolean }, isAutomated: { required: true, type: () => Boolean }, requiresAttention: { required: true, type: () => Boolean }, expiresAt: { required: false, type: () => Date }, relatedEntities: { required: false }, duration: { required: false, type: () => Number }, status: { required: false, type: () => String }, importance: { required: true, type: () => Number }, isHidden: { required: true, type: () => Boolean }, customFields: { required: false, type: () => Object }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, processedAt: { required: false, type: () => Date }, categories: { required: false, type: () => [String] }, validationResults: { required: false, type: () => ({ isValid: { required: true, type: () => Boolean }, errors: { required: false, type: () => [String] }, warnings: { required: false, type: () => [String] } }) }, metrics: { required: false, type: () => ({ responseTime: { required: false, type: () => Number }, resourceUsage: { required: false, type: () => Object }, performance: { required: false, type: () => Object } }) }, securityContext: { required: false, type: () => ({ permissions: { required: false, type: () => [String] }, roles: { required: false, type: () => [String] }, accessLevel: { required: false, type: () => String }, authenticationType: { required: false, type: () => String } }) }, businessContext: { required: false, type: () => ({ department: { required: false, type: () => String }, costCenter: { required: false, type: () => String }, projectCode: { required: false, type: () => String }, priority: { required: false, type: () => String } }) }, audit: { required: false, type: () => ({ version: { required: true, type: () => Number }, changedBy: { required: true, type: () => String }, changedAt: { required: true, type: () => Date }, reason: { required: false, type: () => String } }) } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], TicketActivity.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], TicketActivity.prototype, "ticketId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _ticket_entity__WEBPACK_IMPORTED_MODULE_2__.Ticket, ticket => ticket.activities, { onDelete: 'CASCADE' }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'ticketId' }),
    __metadata("design:type", _ticket_entity__WEBPACK_IMPORTED_MODULE_2__.Ticket)
], TicketActivity.prototype, "ticket", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], TicketActivity.prototype, "performedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'performedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User)
], TicketActivity.prototype, "performedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _enums_ticket_activity_type_enum__WEBPACK_IMPORTED_MODULE_4__.TicketActivityType
    }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], TicketActivity.prototype, "type", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb'),
    __metadata("design:type", Object)
], TicketActivity.prototype, "data", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], TicketActivity.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", Date)
], TicketActivity.prototype, "timestamp", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], TicketActivity.prototype, "ipAddress", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], TicketActivity.prototype, "userAgent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], TicketActivity.prototype, "changes", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { array: true, nullable: true }),
    __metadata("design:type", Array)
], TicketActivity.prototype, "tags", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], TicketActivity.prototype, "parentActivityId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => TicketActivity, { nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'parentActivityId' }),
    __metadata("design:type", TicketActivity)
], TicketActivity.prototype, "parentActivity", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], TicketActivity.prototype, "context", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    __metadata("design:type", Boolean)
], TicketActivity.prototype, "isSystem", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    __metadata("design:type", Boolean)
], TicketActivity.prototype, "isAutomated", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    __metadata("design:type", Boolean)
], TicketActivity.prototype, "requiresAttention", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], TicketActivity.prototype, "expiresAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], TicketActivity.prototype, "relatedEntities", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('int', { nullable: true }),
    __metadata("design:type", Number)
], TicketActivity.prototype, "duration", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('varchar', { length: 50, nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], TicketActivity.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('int', { default: 0 }),
    __metadata("design:type", Number)
], TicketActivity.prototype, "importance", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('boolean', { default: false }),
    __metadata("design:type", Boolean)
], TicketActivity.prototype, "isHidden", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], TicketActivity.prototype, "customFields", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], TicketActivity.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], TicketActivity.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], TicketActivity.prototype, "processedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', array: true, nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", Array)
], TicketActivity.prototype, "categories", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], TicketActivity.prototype, "validationResults", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], TicketActivity.prototype, "metrics", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], TicketActivity.prototype, "securityContext", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], TicketActivity.prototype, "businessContext", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], TicketActivity.prototype, "audit", void 0);
TicketActivity = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('ticket_activities'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['ticketId', 'timestamp']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['performedById', 'timestamp'])
], TicketActivity);



/***/ }),

/***/ "./src/modules/tickets/entities/ticket-attachment.entity.ts":
/*!******************************************************************!*\
  !*** ./src/modules/tickets/entities/ticket-attachment.entity.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TicketAttachment: () => (/* binding */ TicketAttachment)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _ticket_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts");
/* harmony import */ var _ticket_comment_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ticket-comment.entity */ "./src/modules/tickets/entities/ticket-comment.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





let TicketAttachment = class TicketAttachment {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, fileName: { required: true, type: () => String }, fileSize: { required: true, type: () => Number }, mimeType: { required: true, type: () => String }, storageKey: { required: true, type: () => String }, description: { required: true, type: () => String }, ticketId: { required: true, type: () => String }, ticket: { required: true, type: () => (__webpack_require__(/*! ./ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket) }, commentId: { required: true, type: () => String }, comment: { required: true, type: () => (__webpack_require__(/*! ./ticket-comment.entity */ "./src/modules/tickets/entities/ticket-comment.entity.ts").TicketComment) }, uploadedById: { required: true, type: () => String }, uploadedBy: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, metadata: { required: true, type: () => Object }, createdAt: { required: true, type: () => Date }, isPrivate: { required: true, type: () => Boolean }, isActive: { required: true, type: () => Boolean } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], TicketAttachment.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], TicketAttachment.prototype, "fileName", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", Number)
], TicketAttachment.prototype, "fileSize", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], TicketAttachment.prototype, "mimeType", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], TicketAttachment.prototype, "storageKey", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], TicketAttachment.prototype, "description", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], TicketAttachment.prototype, "ticketId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _ticket_entity__WEBPACK_IMPORTED_MODULE_2__.Ticket, ticket => ticket.attachments),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'ticketId' }),
    __metadata("design:type", _ticket_entity__WEBPACK_IMPORTED_MODULE_2__.Ticket)
], TicketAttachment.prototype, "ticket", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], TicketAttachment.prototype, "commentId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _ticket_comment_entity__WEBPACK_IMPORTED_MODULE_3__.TicketComment, comment => comment.attachments, { nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'commentId' }),
    __metadata("design:type", _ticket_comment_entity__WEBPACK_IMPORTED_MODULE_3__.TicketComment)
], TicketAttachment.prototype, "comment", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], TicketAttachment.prototype, "uploadedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'uploadedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)
], TicketAttachment.prototype, "uploadedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], TicketAttachment.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], TicketAttachment.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], TicketAttachment.prototype, "isPrivate", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: true }),
    __metadata("design:type", Boolean)
], TicketAttachment.prototype, "isActive", void 0);
TicketAttachment = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('ticket_attachments')
], TicketAttachment);



/***/ }),

/***/ "./src/modules/tickets/entities/ticket-comment.entity.ts":
/*!***************************************************************!*\
  !*** ./src/modules/tickets/entities/ticket-comment.entity.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TicketComment: () => (/* binding */ TicketComment)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _ticket_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _ticket_attachment_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ticket-attachment.entity */ "./src/modules/tickets/entities/ticket-attachment.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





let TicketComment = class TicketComment {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, userId: { required: true, type: () => String }, content: { required: true, type: () => String }, isInternal: { required: true, type: () => Boolean }, ticketId: { required: true, type: () => String }, ticket: { required: true, type: () => (__webpack_require__(/*! ./ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket) }, authorId: { required: true, type: () => String }, author: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, attachments: { required: true, type: () => [(__webpack_require__(/*! ./ticket-attachment.entity */ "./src/modules/tickets/entities/ticket-attachment.entity.ts").TicketAttachment)] }, parentId: { required: true, type: () => String }, parent: { required: true, type: () => (__webpack_require__(/*! ./ticket-comment.entity */ "./src/modules/tickets/entities/ticket-comment.entity.ts").TicketComment) }, metadata: { required: true, type: () => Object }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, editedAt: { required: true, type: () => Date }, editedBy: { required: true, type: () => String } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], TicketComment.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text'),
    __metadata("design:type", String)
], TicketComment.prototype, "content", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], TicketComment.prototype, "isInternal", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], TicketComment.prototype, "ticketId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _ticket_entity__WEBPACK_IMPORTED_MODULE_2__.Ticket, ticket => ticket.comments),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'ticketId' }),
    __metadata("design:type", _ticket_entity__WEBPACK_IMPORTED_MODULE_2__.Ticket)
], TicketComment.prototype, "ticket", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], TicketComment.prototype, "authorId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'authorId' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_3__.User)
], TicketComment.prototype, "author", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _ticket_attachment_entity__WEBPACK_IMPORTED_MODULE_4__.TicketAttachment, attachment => attachment.comment),
    __metadata("design:type", Array)
], TicketComment.prototype, "attachments", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], TicketComment.prototype, "parentId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => TicketComment, { nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'parentId' }),
    __metadata("design:type", TicketComment)
], TicketComment.prototype, "parent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], TicketComment.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], TicketComment.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], TicketComment.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], TicketComment.prototype, "editedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], TicketComment.prototype, "editedBy", void 0);
TicketComment = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('ticket_comments')
], TicketComment);



/***/ }),

/***/ "./src/modules/tickets/entities/ticket.entity.ts":
/*!*******************************************************!*\
  !*** ./src/modules/tickets/entities/ticket.entity.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ticket: () => (/* binding */ Ticket)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dto/create-ticket.dto */ "./src/modules/tickets/dto/create-ticket.dto.ts");
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../contacts/entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts");
/* harmony import */ var _departments_entities_department_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../departments/entities/department.entity */ "./src/modules/departments/entities/department.entity.ts");
/* harmony import */ var _ticket_comment_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ticket-comment.entity */ "./src/modules/tickets/entities/ticket-comment.entity.ts");
/* harmony import */ var _ticket_attachment_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ticket-attachment.entity */ "./src/modules/tickets/entities/ticket-attachment.entity.ts");
/* harmony import */ var _ticket_activity_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ticket-activity.entity */ "./src/modules/tickets/entities/ticket-activity.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











let Ticket = class Ticket {
    get isEscalated() {
        return !!this.escalatedAt;
    }
    get isResolved() {
        return !!this.resolvedAt;
    }
    get isClosed() {
        return !!this.closedAt;
    }
    get isReopened() {
        return !!this.reopenedAt;
    }
    get hasFirstResponse() {
        return !!this.firstResponseAt;
    }
    get responseTime() {
        if (!this.firstResponseAt)
            return null;
        return this.firstResponseAt.getTime() - this.createdAt.getTime();
    }
    get resolutionTime() {
        if (!this.resolvedAt)
            return null;
        return this.resolvedAt.getTime() - this.createdAt.getTime();
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, title: { required: true, type: () => String }, description: { required: true, type: () => String }, type: { required: true, enum: (__webpack_require__(/*! ../dto/create-ticket.dto */ "./src/modules/tickets/dto/create-ticket.dto.ts").TicketType) }, priority: { required: true, enum: (__webpack_require__(/*! ../dto/create-ticket.dto */ "./src/modules/tickets/dto/create-ticket.dto.ts").TicketPriority) }, status: { required: true, enum: (__webpack_require__(/*! ../dto/create-ticket.dto */ "./src/modules/tickets/dto/create-ticket.dto.ts").TicketStatus) }, source: { required: true, enum: (__webpack_require__(/*! ../dto/create-ticket.dto */ "./src/modules/tickets/dto/create-ticket.dto.ts").TicketSource) }, contactId: { required: false, type: () => String }, departmentId: { required: false, type: () => String }, assigneeId: { required: false, type: () => String }, category: { required: false, type: () => String }, subCategory: { required: false, type: () => String }, tags: { required: false, type: () => [String] }, referenceNumber: { required: false, type: () => String }, relatedTicketId: { required: false, type: () => String }, isPrivate: { required: true, type: () => Boolean }, internalNotes: { required: false, type: () => String }, resolution: { required: false, type: () => String }, resolvedAt: { required: false, type: () => Date }, resolvedById: { required: false, type: () => String }, closedAt: { required: false, type: () => Date }, closedById: { required: false, type: () => String }, escalatedAt: { required: false, type: () => Date }, escalatedById: { required: false, type: () => String }, escalationReason: { required: false, type: () => String }, reopenedAt: { required: false, type: () => Date }, reopenedById: { required: false, type: () => String }, reopenReason: { required: false, type: () => String }, firstResponseAt: { required: false, type: () => Date }, lastActivityAt: { required: false, type: () => Date }, createdById: { required: true, type: () => String }, updatedById: { required: false, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, deletedAt: { required: false, type: () => Date }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, contact: { required: false, type: () => (__webpack_require__(/*! ../../contacts/entities/contact.entity */ "./src/modules/contacts/entities/contact.entity.ts").Contact) }, department: { required: false, type: () => (__webpack_require__(/*! ../../departments/entities/department.entity */ "./src/modules/departments/entities/department.entity.ts").Department) }, assignee: { required: false, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, createdBy: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, updatedBy: { required: false, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, resolvedBy: { required: false, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, closedBy: { required: false, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, escalatedBy: { required: false, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, reopenedBy: { required: false, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, relatedTicket: { required: false, type: () => (__webpack_require__(/*! ./ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket) }, comments: { required: true, type: () => [(__webpack_require__(/*! ./ticket-comment.entity */ "./src/modules/tickets/entities/ticket-comment.entity.ts").TicketComment)] }, attachments: { required: true, type: () => [(__webpack_require__(/*! ./ticket-attachment.entity */ "./src/modules/tickets/entities/ticket-attachment.entity.ts").TicketAttachment)] }, activities: { required: true, type: () => [(__webpack_require__(/*! ./ticket-activity.entity */ "./src/modules/tickets/entities/ticket-activity.entity.ts").TicketActivity)] } };
    }
};
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Ticket.prototype, "id", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Ticket.prototype, "organizationId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Ticket.prototype, "title", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text' }),
    __metadata("design:type", String)
], Ticket.prototype, "description", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_2__.TicketType,
    }),
    __metadata("design:type", String)
], Ticket.prototype, "type", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_2__.TicketPriority,
        default: _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_2__.TicketPriority.NORMAL,
    }),
    __metadata("design:type", String)
], Ticket.prototype, "priority", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_2__.TicketStatus,
        default: _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_2__.TicketStatus.OPEN,
    }),
    __metadata("design:type", String)
], Ticket.prototype, "status", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_2__.TicketSource,
        default: _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_2__.TicketSource.WEB,
    }),
    __metadata("design:type", String)
], Ticket.prototype, "source", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "contactId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "departmentId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "assigneeId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "category", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "subCategory", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('simple-array', { nullable: true }),
    __metadata("design:type", Array)
], Ticket.prototype, "tags", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "referenceNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "relatedTicketId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], Ticket.prototype, "customFields", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], Ticket.prototype, "isPrivate", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "internalNotes", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "resolution", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Ticket.prototype, "resolvedAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "resolvedById", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Ticket.prototype, "closedAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "closedById", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Ticket.prototype, "escalatedAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "escalatedById", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "escalationReason", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Ticket.prototype, "reopenedAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "reopenedById", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'text', nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "reopenReason", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Ticket.prototype, "firstResponseAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], Ticket.prototype, "lastActivityAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], Ticket.prototype, "createdById", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], Ticket.prototype, "updatedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], Ticket.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], Ticket.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.DeleteDateColumn)(),
    __metadata("design:type", Date)
], Ticket.prototype, "deletedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization)
], Ticket.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_5__.Contact),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'contactId' }),
    __metadata("design:type", _contacts_entities_contact_entity__WEBPACK_IMPORTED_MODULE_5__.Contact)
], Ticket.prototype, "contact", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _departments_entities_department_entity__WEBPACK_IMPORTED_MODULE_6__.Department),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'departmentId' }),
    __metadata("design:type", _departments_entities_department_entity__WEBPACK_IMPORTED_MODULE_6__.Department)
], Ticket.prototype, "department", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'assigneeId' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)
], Ticket.prototype, "assignee", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'createdById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)
], Ticket.prototype, "createdBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'updatedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)
], Ticket.prototype, "updatedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'resolvedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)
], Ticket.prototype, "resolvedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'closedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)
], Ticket.prototype, "closedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'escalatedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)
], Ticket.prototype, "escalatedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'reopenedById' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)
], Ticket.prototype, "reopenedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => Ticket),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'relatedTicketId' }),
    __metadata("design:type", Ticket)
], Ticket.prototype, "relatedTicket", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _ticket_comment_entity__WEBPACK_IMPORTED_MODULE_7__.TicketComment, comment => comment.ticket),
    __metadata("design:type", Array)
], Ticket.prototype, "comments", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _ticket_attachment_entity__WEBPACK_IMPORTED_MODULE_8__.TicketAttachment, attachment => attachment.ticket),
    __metadata("design:type", Array)
], Ticket.prototype, "attachments", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _ticket_activity_entity__WEBPACK_IMPORTED_MODULE_9__.TicketActivity, activity => activity.ticket),
    __metadata("design:type", Array)
], Ticket.prototype, "activities", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Ticket.prototype, "isEscalated", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Ticket.prototype, "isResolved", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Ticket.prototype, "isClosed", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Ticket.prototype, "isReopened", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], Ticket.prototype, "hasFirstResponse", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [])
], Ticket.prototype, "responseTime", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [])
], Ticket.prototype, "resolutionTime", null);
Ticket = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('tickets'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'status']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'assigneeId']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'contactId']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'departmentId']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'createdAt'])
], Ticket);



/***/ }),

/***/ "./src/modules/tickets/enums/ticket-activity-type.enum.ts":
/*!****************************************************************!*\
  !*** ./src/modules/tickets/enums/ticket-activity-type.enum.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TicketActivityType: () => (/* binding */ TicketActivityType)
/* harmony export */ });
var TicketActivityType;
(function (TicketActivityType) {
    TicketActivityType["TICKET_CREATED"] = "ticket_created";
    TicketActivityType["TICKET_DELETED"] = "ticket_deleted";
    TicketActivityType["TICKET_RESTORED"] = "ticket_restored";
    TicketActivityType["STATUS_CHANGED"] = "status_changed";
    TicketActivityType["PRIORITY_CHANGED"] = "priority_changed";
    TicketActivityType["CATEGORY_CHANGED"] = "category_changed";
    TicketActivityType["ESCALATION"] = "ESCALATION";
    TicketActivityType["RESPONSE"] = "RESPONSE";
    TicketActivityType["RESOLUTION"] = "RESOLUTION";
    TicketActivityType["ASSIGNED"] = "assigned";
    TicketActivityType["UNASSIGNED"] = "unassigned";
    TicketActivityType["SELF_ASSIGNED"] = "self_assigned";
    TicketActivityType["TEAM_ASSIGNED"] = "team_assigned";
    TicketActivityType["COMMENT_ADDED"] = "comment_added";
    TicketActivityType["COMMENT_UPDATED"] = "comment_updated";
    TicketActivityType["COMMENT_DELETED"] = "comment_deleted";
    TicketActivityType["INTERNAL_NOTE_ADDED"] = "internal_note_added";
    TicketActivityType["EMAIL_SENT"] = "email_sent";
    TicketActivityType["EMAIL_RECEIVED"] = "email_received";
    TicketActivityType["ATTACHMENT_ADDED"] = "attachment_added";
    TicketActivityType["ATTACHMENT_REMOVED"] = "attachment_removed";
    TicketActivityType["TAG_ADDED"] = "tag_added";
    TicketActivityType["TAG_REMOVED"] = "tag_removed";
    TicketActivityType["LINKED_TO_TICKET"] = "linked_to_ticket";
    TicketActivityType["UNLINKED_FROM_TICKET"] = "unlinked_from_ticket";
    TicketActivityType["DUPLICATED_FROM"] = "duplicated_from";
    TicketActivityType["MERGED_WITH"] = "merged_with";
    TicketActivityType["WORKFLOW_TRIGGERED"] = "workflow_triggered";
    TicketActivityType["AUTOMATION_EXECUTED"] = "automation_executed";
    TicketActivityType["SLA_UPDATED"] = "sla_updated";
    TicketActivityType["SLA_BREACHED"] = "sla_breached";
    TicketActivityType["ESCALATED"] = "escalated";
    TicketActivityType["TIME_LOGGED"] = "time_logged";
    TicketActivityType["TIME_ESTIMATE_UPDATED"] = "time_estimate_updated";
    TicketActivityType["DEADLINE_UPDATED"] = "deadline_updated";
    TicketActivityType["SHARED_WITH_USER"] = "shared_with_user";
    TicketActivityType["MENTIONED_USER"] = "mentioned_user";
    TicketActivityType["SUBSCRIPTION_ADDED"] = "subscription_added";
    TicketActivityType["SUBSCRIPTION_REMOVED"] = "subscription_removed";
    TicketActivityType["CUSTOMER_REPLIED"] = "customer_replied";
    TicketActivityType["CUSTOMER_VIEWED"] = "customer_viewed";
    TicketActivityType["FEEDBACK_SUBMITTED"] = "feedback_submitted";
    TicketActivityType["SATISFACTION_RATED"] = "satisfaction_rated";
    TicketActivityType["KB_ARTICLE_LINKED"] = "kb_article_linked";
    TicketActivityType["KB_ARTICLE_UNLINKED"] = "kb_article_unlinked";
    TicketActivityType["SOLUTION_ADDED"] = "solution_added";
    TicketActivityType["SOLUTION_APPROVED"] = "solution_approved";
    TicketActivityType["VISIBILITY_CHANGED"] = "visibility_changed";
    TicketActivityType["PERMISSIONS_UPDATED"] = "permissions_updated";
    TicketActivityType["CONFIDENTIALITY_CHANGED"] = "confidentiality_changed";
    TicketActivityType["CUSTOM_FIELD_UPDATED"] = "custom_field_updated";
    TicketActivityType["CUSTOM_FIELD_ADDED"] = "custom_field_added";
    TicketActivityType["CUSTOM_FIELD_REMOVED"] = "custom_field_removed";
    TicketActivityType["INTEGRATION_TRIGGERED"] = "integration_triggered";
    TicketActivityType["WEBHOOK_SENT"] = "webhook_sent";
    TicketActivityType["EXTERNAL_REFERENCE_ADDED"] = "external_reference_added";
    TicketActivityType["EXTERNAL_REFERENCE_REMOVED"] = "external_reference_removed";
    TicketActivityType["SYSTEM_UPDATE"] = "system_update";
    TicketActivityType["MAINTENANCE_NOTE"] = "maintenance_note";
    TicketActivityType["ERROR_LOGGED"] = "error_logged";
    TicketActivityType["WARNING_LOGGED"] = "warning_logged";
    TicketActivityType["ARCHIVED"] = "archived";
    TicketActivityType["UNARCHIVED"] = "unarchived";
    TicketActivityType["HISTORY_CLEARED"] = "history_cleared";
    TicketActivityType["EXPORTED"] = "exported";
    TicketActivityType["REPORT_GENERATED"] = "report_generated";
    TicketActivityType["METRICS_UPDATED"] = "metrics_updated";
    TicketActivityType["ANALYTICS_EVENT"] = "analytics_event";
    TicketActivityType["COST_UPDATED"] = "cost_updated";
    TicketActivityType["BILLING_STATUS_CHANGED"] = "billing_status_changed";
    TicketActivityType["EXPENSE_ADDED"] = "expense_added";
    TicketActivityType["EXPENSE_REMOVED"] = "expense_removed";
    TicketActivityType["COMPLIANCE_CHECK"] = "compliance_check";
    TicketActivityType["AUDIT_LOG_CREATED"] = "audit_log_created";
    TicketActivityType["SECURITY_REVIEW"] = "security_review";
    TicketActivityType["GDPR_REQUEST"] = "gdpr_request";
})(TicketActivityType || (TicketActivityType = {}));


/***/ }),

/***/ "./src/modules/tickets/enums/ticket-status.enum.ts":
/*!*********************************************************!*\
  !*** ./src/modules/tickets/enums/ticket-status.enum.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TicketStatus: () => (/* binding */ TicketStatus)
/* harmony export */ });
var TicketStatus;
(function (TicketStatus) {
    TicketStatus["NEW"] = "NEW";
    TicketStatus["OPEN"] = "OPEN";
    TicketStatus["IN_PROGRESS"] = "IN_PROGRESS";
    TicketStatus["RESOLVED"] = "RESOLVED";
    TicketStatus["CLOSED"] = "CLOSED";
})(TicketStatus || (TicketStatus = {}));


/***/ }),

/***/ "./src/modules/tickets/listeners/ticket-assignment.listener.ts":
/*!*********************************************************************!*\
  !*** ./src/modules/tickets/listeners/ticket-assignment.listener.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TicketAssignmentListener: () => (/* binding */ TicketAssignmentListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_ticket_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts");
/* harmony import */ var _entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/ticket-activity.entity */ "./src/modules/tickets/entities/ticket-activity.entity.ts");
/* harmony import */ var _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../notifications/services/notifications.service */ "./src/modules/notifications/services/notifications.service.ts");
/* harmony import */ var _users_services_users_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../users/services/users.service */ "./src/modules/users/services/users.service.ts");
/* harmony import */ var _enums_ticket_activity_type_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../enums/ticket-activity-type.enum */ "./src/modules/tickets/enums/ticket-activity-type.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};









let TicketAssignmentListener = class TicketAssignmentListener {
    constructor(ticketRepository, activityRepository, notificationsService, usersService) {
        this.ticketRepository = ticketRepository;
        this.activityRepository = activityRepository;
        this.notificationsService = notificationsService;
        this.usersService = usersService;
    }
    async handleTicketAssigned(event) {
        await this.createAssignmentActivity(event);
        await this.sendAssignmentNotifications(event);
    }
    async createAssignmentActivity(event) {
        const activity = this.activityRepository.create({
            ticketId: event.ticketId,
            type: _enums_ticket_activity_type_enum__WEBPACK_IMPORTED_MODULE_8__.TicketActivityType.ASSIGNED,
            metadata: {
                previousAssigneeId: event.previousAssigneeId,
                newAssigneeId: event.newAssigneeId,
                assignedById: event.assignedById
            }
        });
        await this.activityRepository.save(activity);
    }
    async sendAssignmentNotifications(event) {
        const ticket = await this.ticketRepository.findOne({
            where: { id: event.ticketId },
            relations: ['organization']
        });
        if (!ticket)
            return;
        if (event.newAssigneeId) {
            const newAssignee = await this.usersService.findById(event.newAssigneeId);
            if (newAssignee) {
                await this.notificationsService.send({
                    userId: newAssignee.id,
                    type: 'TICKET_ASSIGNED',
                    title: `Ticket #${ticket.id} Assigned to You`,
                    message: `You have been assigned to ticket: ${ticket.title}`,
                    data: {
                        ticketId: ticket.id,
                        organizationId: ticket.organizationId
                    }
                });
            }
        }
        if (event.previousAssigneeId) {
            const previousAssignee = await this.usersService.findById(event.previousAssigneeId);
            if (previousAssignee) {
                await this.notificationsService.send({
                    userId: previousAssignee.id,
                    type: 'TICKET_UNASSIGNED',
                    title: `Ticket #${ticket.id} Reassigned`,
                    message: `You have been unassigned from ticket: ${ticket.title}`,
                    data: {
                        ticketId: ticket.id,
                        organizationId: ticket.organizationId
                    }
                });
            }
        }
    }
    async handleAutoAssignment(payload) {
        const ticket = await this.ticketRepository.findOne({
            where: { id: payload.ticketId }
        });
        if (!ticket || ticket.assigneeId)
            return;
        const availableAgent = await this.findAvailableAgent(payload.organizationId, payload.priority);
        if (availableAgent) {
            await this.ticketRepository.update(payload.ticketId, {
                assigneeId: availableAgent.id
            });
            await this.handleTicketAssigned({
                ticketId: payload.ticketId,
                newAssigneeId: availableAgent.id,
                assignedById: 'SYSTEM'
            });
        }
    }
    async findAvailableAgent(organizationId, priority) {
        const supportAgents = await this.usersService.findByRole('SUPPORT', organizationId);
        if (!supportAgents || supportAgents.length === 0) {
            return null;
        }
        return supportAgents[0];
    }
    async handleAgentAvailabilityChange(payload) {
        if (!payload.isAvailable) {
            const assignedTickets = await this.ticketRepository.find({
                where: {
                    assigneeId: payload.userId,
                    status: (0,typeorm__WEBPACK_IMPORTED_MODULE_3__.In)(['OPEN', 'IN_PROGRESS'])
                }
            });
            for (const ticket of assignedTickets) {
                await this.handleAutoAssignment({
                    ticketId: ticket.id,
                    organizationId: ticket.organizationId,
                    priority: ticket.priority
                });
            }
        }
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('ticket.assigned'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], TicketAssignmentListener.prototype, "handleTicketAssigned", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('ticket.auto_assignment.needed'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], TicketAssignmentListener.prototype, "handleAutoAssignment", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.availability.changed'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], TicketAssignmentListener.prototype, "handleAgentAvailabilityChange", null);
TicketAssignmentListener = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_entities_ticket_entity__WEBPACK_IMPORTED_MODULE_4__.Ticket)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_5__.TicketActivity)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_6__.NotificationsService,
        _users_services_users_service__WEBPACK_IMPORTED_MODULE_7__.UsersService])
], TicketAssignmentListener);



/***/ }),

/***/ "./src/modules/tickets/listeners/ticket-escalation.listener.ts":
/*!*********************************************************************!*\
  !*** ./src/modules/tickets/listeners/ticket-escalation.listener.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TicketEscalationListener: () => (/* binding */ TicketEscalationListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _services_tickets_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/tickets.service */ "./src/modules/tickets/services/tickets.service.ts");
/* harmony import */ var _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../notifications/services/notifications.service */ "./src/modules/notifications/services/notifications.service.ts");
/* harmony import */ var _users_services_users_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../users/services/users.service */ "./src/modules/users/services/users.service.ts");
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






let TicketEscalationListener = class TicketEscalationListener {
    constructor(ticketsService, notificationsService, usersService) {
        this.ticketsService = ticketsService;
        this.notificationsService = notificationsService;
        this.usersService = usersService;
    }
    async handleSlaBreachEvent(payload) {
        const { ticketId, organizationId, slaType, elapsedTime } = payload;
        const ticket = await this.ticketsService.findOne(ticketId, organizationId);
        const admins = await this.findAdmins(organizationId);
        if (admins.length === 0) {
            console.warn('No admins to notify for SLA breach');
            return;
        }
        const typeMessage = slaType === 'response'
            ? 'Response time SLA breached'
            : 'Resolution time SLA breached';
        const formattedTime = this.formatElapsedTime(elapsedTime);
        for (const admin of admins) {
            await this.notificationsService.create({
                type: 'SLA_BREACH',
                title: `${typeMessage} for Ticket #${ticket.referenceNumber}`,
                content: `${typeMessage} (${formattedTime}) for Ticket #${ticket.referenceNumber}`,
                priority: 'HIGH',
                recipients: [{ userId: admin.id }],
                organizationId: organizationId,
                senderId: 'system'
            });
        }
    }
    async handleEscalationLevelChanged(payload) {
        const { ticketId, organizationId, previousLevel, newLevel } = payload;
        const ticket = await this.ticketsService.findOne(ticketId, organizationId);
        const admins = await this.findAdmins(organizationId);
        if (admins.length === 0) {
            console.warn('No admins to notify for escalation level change');
            return;
        }
        for (const admin of admins) {
            await this.notificationsService.create({
                type: 'ESCALATION_LEVEL_CHANGED',
                title: `Ticket #${ticket.referenceNumber} Escalation Level Changed`,
                content: `Ticket #${ticket.referenceNumber} escalation level changed from ${previousLevel} to ${newLevel}`,
                priority: 'MEDIUM',
                recipients: [{ userId: admin.id }],
                organizationId: organizationId,
                senderId: 'system'
            });
        }
    }
    async findAdmins(organizationId) {
        try {
            const result = await this.usersService.findAll({
                organizationId,
                role: _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN,
                isActive: true,
                page: 1,
                limit: 50
            });
            return result.items;
        }
        catch (error) {
            console.error('Error finding admin users:', error);
            return [];
        }
    }
    formatElapsedTime(milliseconds) {
        const seconds = Math.floor(milliseconds / 1000);
        const minutes = Math.floor(seconds / 60);
        const hours = Math.floor(minutes / 60);
        if (hours > 0) {
            return `${hours}h ${minutes % 60}m`;
        }
        else if (minutes > 0) {
            return `${minutes}m ${seconds % 60}s`;
        }
        else {
            return `${seconds}s`;
        }
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('ticket.sla.breach'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], TicketEscalationListener.prototype, "handleSlaBreachEvent", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('ticket.escalation.levelchanged'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], TicketEscalationListener.prototype, "handleEscalationLevelChanged", null);
TicketEscalationListener = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_services_tickets_service__WEBPACK_IMPORTED_MODULE_2__.TicketsService,
        _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_3__.NotificationsService,
        _users_services_users_service__WEBPACK_IMPORTED_MODULE_4__.UsersService])
], TicketEscalationListener);



/***/ }),

/***/ "./src/modules/tickets/listeners/ticket.listener.ts":
/*!**********************************************************!*\
  !*** ./src/modules/tickets/listeners/ticket.listener.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TicketListener: () => (/* binding */ TicketListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _entities_ticket_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts");
/* harmony import */ var _services_ticket_activity_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/ticket-activity.service */ "./src/modules/tickets/services/ticket-activity.service.ts");
/* harmony import */ var _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../notifications/services/notifications.service */ "./src/modules/notifications/services/notifications.service.ts");
/* harmony import */ var _modules_notifications_dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/modules/notifications/dto/create-notification.dto */ "./src/modules/notifications/dto/create-notification.dto.ts");
/* harmony import */ var _users_services_users_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../users/services/users.service */ "./src/modules/users/services/users.service.ts");
/* harmony import */ var _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../users/enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








let TicketListener = class TicketListener {
    constructor(activityService, notificationsService, usersService) {
        this.activityService = activityService;
        this.notificationsService = notificationsService;
        this.usersService = usersService;
    }
    async handleTicketCreated(ticket) {
        await this.activityService.recordActivity({
            ticketId: ticket.id,
            organizationId: ticket.organizationId,
            userId: ticket.createdById,
            action: 'CREATED',
            details: { status: ticket.status },
        });
        if (ticket.assigneeId) {
            await this.notificationsService.create({
                type: 'TICKET_ASSIGNED',
                title: 'New Ticket Assigned',
                content: `Ticket #${ticket.referenceNumber} has been assigned to you`,
                recipients: [{ userId: ticket.assigneeId }],
                organizationId: ticket.organizationId,
                senderId: ticket.createdById,
            });
        }
    }
    async handleTicketEscalated(payload) {
        const { ticket, reason } = payload;
        await this.activityService.recordActivity({
            ticketId: ticket.id,
            organizationId: ticket.organizationId,
            userId: ticket.escalatedById || '',
            action: 'ESCALATED',
            details: { status: ticket.status },
        });
        const adminUsers = await this.findAdminUsers(ticket.organizationId);
        if (adminUsers.length > 0) {
            await this.notificationsService.create({
                type: _modules_notifications_dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_5__.NotificationType.TICKET_ESCALATED,
                title: 'Ticket Escalated',
                content: `Ticket #${ticket.referenceNumber} has been escalated: ${reason}`,
                priority: _modules_notifications_dto_create_notification_dto__WEBPACK_IMPORTED_MODULE_5__.NotificationPriority.HIGH,
                recipients: adminUsers.map((admin) => ({ userId: admin.id })),
                organizationId: ticket.organizationId,
                senderId: ticket.escalatedById || '',
            });
        }
    }
    async findAdminUsers(organizationId) {
        try {
            const result = await this.usersService.findAll({
                organizationId,
                role: _users_enums_role_enum__WEBPACK_IMPORTED_MODULE_7__.Role.ADMIN,
                isActive: true,
                page: 1,
                limit: 50
            });
            return result.items.map(user => ({ id: user.id }));
        }
        catch (error) {
            console.error('Error finding admin users:', error);
            return [];
        }
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('ticket.created'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_entities_ticket_entity__WEBPACK_IMPORTED_MODULE_2__.Ticket]),
    __metadata("design:returntype", Promise)
], TicketListener.prototype, "handleTicketCreated", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('ticket.escalated'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], TicketListener.prototype, "handleTicketEscalated", null);
TicketListener = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_services_ticket_activity_service__WEBPACK_IMPORTED_MODULE_3__.TicketActivityService,
        _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_4__.NotificationsService,
        _users_services_users_service__WEBPACK_IMPORTED_MODULE_6__.UsersService])
], TicketListener);



/***/ }),

/***/ "./src/modules/tickets/services/ticket-activity.service.ts":
/*!*****************************************************************!*\
  !*** ./src/modules/tickets/services/ticket-activity.service.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TicketActivityService: () => (/* binding */ TicketActivityService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/ticket-activity.entity */ "./src/modules/tickets/entities/ticket-activity.entity.ts");
/* harmony import */ var _entities_ticket_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var TicketActivityService_1;







let TicketActivityService = TicketActivityService_1 = class TicketActivityService {
    recordActivity(arg0) {
        throw new Error('Method not implemented.');
    }
    constructor(activityRepository, ticketRepository, userRepository, eventEmitter) {
        this.activityRepository = activityRepository;
        this.ticketRepository = ticketRepository;
        this.userRepository = userRepository;
        this.eventEmitter = eventEmitter;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(TicketActivityService_1.name);
    }
    async logActivity(options) {
        try {
            const ticket = await this.ticketRepository.findOne({
                where: { id: options.ticketId }
            });
            if (!ticket) {
                throw new Error(`Ticket ${options.ticketId} not found`);
            }
            const activity = this.activityRepository.create({
                ticketId: options.ticketId,
                performedById: options.performedById,
                type: options.type,
                data: this.sanitizeActivityData(options.data || {}),
                metadata: options.metadata || {},
                timestamp: new Date()
            });
            await this.activityRepository.save(activity);
            this.eventEmitter.emit('ticket.activity.created', {
                activity,
                ticket
            });
            return activity;
        }
        catch (error) {
            this.logger.error('Error logging ticket activity:', error);
            throw error;
        }
    }
    async getTicketActivities(ticketId, options = {}) {
        var _a;
        try {
            const queryBuilder = this.activityRepository
                .createQueryBuilder('activity')
                .where('activity.ticketId = :ticketId', { ticketId });
            if ((_a = options.types) === null || _a === void 0 ? void 0 : _a.length) {
                queryBuilder.andWhere('activity.type IN (:...types)', { types: options.types });
            }
            if (options.startDate) {
                queryBuilder.andWhere('activity.timestamp >= :startDate', { startDate: options.startDate });
            }
            if (options.endDate) {
                queryBuilder.andWhere('activity.timestamp <= :endDate', { endDate: options.endDate });
            }
            queryBuilder
                .leftJoinAndSelect('activity.performedBy', 'user')
                .orderBy('activity.timestamp', 'DESC');
            if (options.limit) {
                queryBuilder.take(options.limit);
            }
            if (options.offset) {
                queryBuilder.skip(options.offset);
            }
            const [activities, total] = await queryBuilder.getManyAndCount();
            return { activities, total };
        }
        catch (error) {
            this.logger.error(`Error fetching activities for ticket ${ticketId}:`, error);
            throw error;
        }
    }
    async getUserActivities(userId, options = {}) {
        try {
            const queryBuilder = this.activityRepository
                .createQueryBuilder('activity')
                .where('activity.performedById = :userId', { userId });
            if (options.startDate) {
                queryBuilder.andWhere('activity.timestamp >= :startDate', { startDate: options.startDate });
            }
            if (options.endDate) {
                queryBuilder.andWhere('activity.timestamp <= :endDate', { endDate: options.endDate });
            }
            queryBuilder
                .leftJoinAndSelect('activity.ticket', 'ticket')
                .orderBy('activity.timestamp', 'DESC');
            if (options.limit) {
                queryBuilder.take(options.limit);
            }
            if (options.offset) {
                queryBuilder.skip(options.offset);
            }
            const [activities, total] = await queryBuilder.getManyAndCount();
            return { activities, total };
        }
        catch (error) {
            this.logger.error(`Error fetching activities for user ${userId}:`, error);
            throw error;
        }
    }
    async getActivityDetails(activityId) {
        try {
            const activity = await this.activityRepository.findOne({
                where: { id: activityId },
                relations: ['performedBy', 'ticket']
            });
            if (!activity) {
                throw new Error(`Activity ${activityId} not found`);
            }
            return activity;
        }
        catch (error) {
            this.logger.error(`Error fetching activity details for ${activityId}:`, error);
            throw error;
        }
    }
    async getActivitySummary(ticketId, startDate, endDate) {
        try {
            const activities = await this.activityRepository
                .createQueryBuilder('activity')
                .select('activity.type', 'type')
                .addSelect('COUNT(*)', 'count')
                .where('activity.ticketId = :ticketId', { ticketId })
                .andWhere('activity.timestamp BETWEEN :startDate AND :endDate', { startDate, endDate })
                .groupBy('activity.type')
                .getRawMany();
            return activities.reduce((acc, curr) => {
                acc[curr.type] = parseInt(curr.count, 10);
                return acc;
            }, {});
        }
        catch (error) {
            this.logger.error(`Error generating activity summary for ticket ${ticketId}:`, error);
            throw error;
        }
    }
    sanitizeActivityData(data) {
        const sensitiveFields = ['password', 'token', 'secret', 'key'];
        const sanitized = Object.assign({}, data);
        const sanitizeObject = (obj) => {
            for (const [key, value] of Object.entries(obj)) {
                if (sensitiveFields.some(field => key.toLowerCase().includes(field))) {
                    obj[key] = '[REDACTED]';
                }
                else if (typeof value === 'object' && value !== null) {
                    sanitizeObject(value);
                }
            }
        };
        sanitizeObject(sanitized);
        return sanitized;
    }
    async generateActivityReport(ticketId, startDate, endDate) {
        try {
            const activities = await this.activityRepository.find({
                where: {
                    ticketId,
                    timestamp: Between(startDate, endDate)
                },
                relations: ['performedBy'],
                order: { timestamp: 'ASC' }
            });
            const groupedActivities = activities.reduce((acc, activity) => {
                const date = activity.timestamp.toISOString().split('T')[0];
                if (!acc[date]) {
                    acc[date] = [];
                }
                acc[date].push(activity);
                return acc;
            }, {});
            const statistics = {
                totalActivities: activities.length,
                byType: this.calculateActivityTypeStats(activities),
                byUser: this.calculateUserActivityStats(activities),
                averageActivitiesPerDay: activities.length / ((endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24)),
            };
            return {
                ticketId,
                period: { startDate, endDate },
                statistics,
                activities: groupedActivities,
            };
        }
        catch (error) {
            this.logger.error(`Error generating activity report for ticket ${ticketId}:`, error);
            throw error;
        }
    }
    calculateActivityTypeStats(activities) {
        return activities.reduce((acc, activity) => {
            acc[activity.type] = (acc[activity.type] || 0) + 1;
            return acc;
        }, {});
    }
    calculateUserActivityStats(activities) {
        return activities.reduce((acc, activity) => {
            const userId = activity.performedById;
            acc[userId] = (acc[userId] || 0) + 1;
            return acc;
        }, {});
    }
};
TicketActivityService = TicketActivityService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_4__.TicketActivity)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_ticket_entity__WEBPACK_IMPORTED_MODULE_5__.Ticket)),
    __param(2, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_6__.User)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__.EventEmitter2])
], TicketActivityService);

function Between(startDate, endDate) {
    throw new Error('Function not implemented.');
}


/***/ }),

/***/ "./src/modules/tickets/services/ticket-escalation.service.ts":
/*!*******************************************************************!*\
  !*** ./src/modules/tickets/services/ticket-escalation.service.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TicketEscalationService: () => (/* binding */ TicketEscalationService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_ticket_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts");
/* harmony import */ var _entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/ticket-activity.entity */ "./src/modules/tickets/entities/ticket-activity.entity.ts");
/* harmony import */ var _enums_ticket_activity_type_enum__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../enums/ticket-activity-type.enum */ "./src/modules/tickets/enums/ticket-activity-type.enum.ts");
/* harmony import */ var _enums_ticket_status_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../enums/ticket-status.enum */ "./src/modules/tickets/enums/ticket-status.enum.ts");
/* harmony import */ var _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../notifications/services/notifications.service */ "./src/modules/notifications/services/notifications.service.ts");
/* harmony import */ var _organizations_services_organizations_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../organizations/services/organizations.service */ "./src/modules/organizations/services/organizations.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var TicketEscalationService_1;










let TicketEscalationService = TicketEscalationService_1 = class TicketEscalationService {
    constructor(ticketRepository, activityRepository, notificationsService, organizationsService, configService) {
        this.ticketRepository = ticketRepository;
        this.activityRepository = activityRepository;
        this.notificationsService = notificationsService;
        this.organizationsService = organizationsService;
        this.configService = configService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(TicketEscalationService_1.name);
        this.escalationRules = {
            HIGH: {
                priority: 'HIGH',
                responseTime: 1,
                resolutionTime: 4,
                escalationLevels: [
                    {
                        level: 1,
                        timeThreshold: 1,
                        notifyRoles: ['SUPERVISOR']
                    },
                    {
                        level: 2,
                        timeThreshold: 2,
                        notifyRoles: ['MANAGER']
                    },
                    {
                        level: 3,
                        timeThreshold: 4,
                        notifyRoles: ['DIRECTOR']
                    }
                ]
            },
            MEDIUM: {
                priority: 'MEDIUM',
                responseTime: 4,
                resolutionTime: 24,
                escalationLevels: [
                    {
                        level: 1,
                        timeThreshold: 4,
                        notifyRoles: ['SUPERVISOR']
                    },
                    {
                        level: 2,
                        timeThreshold: 8,
                        notifyRoles: ['MANAGER']
                    }
                ]
            },
            LOW: {
                priority: 'LOW',
                responseTime: 24,
                resolutionTime: 72,
                escalationLevels: [
                    {
                        level: 1,
                        timeThreshold: 24,
                        notifyRoles: ['SUPERVISOR']
                    }
                ]
            }
        };
    }
    async checkTicketsForEscalation() {
        const unresolved = await this.ticketRepository.find({
            where: {
                status: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.In)([_enums_ticket_status_enum__WEBPACK_IMPORTED_MODULE_7__.TicketStatus.OPEN, _enums_ticket_status_enum__WEBPACK_IMPORTED_MODULE_7__.TicketStatus.IN_PROGRESS])
            },
            relations: ['assignee', 'organization', 'activities']
        });
        for (const ticket of unresolved) {
            const currentLevel = this.getCurrentEscalationLevel(ticket);
            if (currentLevel < 3) {
                await this.checkTicketEscalation(ticket);
            }
        }
    }
    getCurrentEscalationLevel(ticket) {
        var _a, _b;
        const escalationActivities = ((_a = ticket.activities) === null || _a === void 0 ? void 0 : _a.filter(activity => activity.type === _enums_ticket_activity_type_enum__WEBPACK_IMPORTED_MODULE_6__.TicketActivityType.ESCALATION)) || [];
        if (escalationActivities.length > 0) {
            const latestEscalation = escalationActivities.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())[0];
            return ((_b = latestEscalation.metadata) === null || _b === void 0 ? void 0 : _b.newLevel) || 0;
        }
        return 0;
    }
    async checkTicketEscalation(ticket) {
        const rule = this.escalationRules[ticket.priority];
        if (!rule)
            return;
        const timeElapsed = this.getHoursElapsed(ticket.createdAt);
        const currentLevel = this.getCurrentEscalationLevel(ticket);
        const nextEscalation = rule.escalationLevels.find(level => level.level === currentLevel + 1 && timeElapsed >= level.timeThreshold);
        if (nextEscalation) {
            await this.escalateTicket(ticket, nextEscalation);
        }
    }
    async escalateTicket(ticket, escalation) {
        try {
            const activityData = {
                ticket,
                type: _enums_ticket_activity_type_enum__WEBPACK_IMPORTED_MODULE_6__.TicketActivityType.ESCALATION,
                metadata: {
                    description: `Ticket escalated to level ${escalation.level}`,
                    previousLevel: this.getCurrentEscalationLevel(ticket),
                    newLevel: escalation.level,
                    reason: 'SLA breach'
                }
            };
            const activity = this.activityRepository.create(activityData);
            await this.activityRepository.save(activity);
            await this.notifyEscalation(ticket, escalation);
        }
        catch (error) {
            this.logger.error(`Failed to escalate ticket ${ticket.id}:`, error);
        }
    }
    async notifyEscalation(ticket, escalation) {
        try {
            const staff = await this.getOrganizationStaffByRoles(ticket.organizationId, escalation.notifyRoles);
            for (const user of staff) {
                await this.notificationsService.send({
                    userId: user.id,
                    type: 'TICKET_ESCALATION',
                    title: `Ticket #${ticket.id} Escalated`,
                    message: `Ticket has been escalated to level ${escalation.level}`,
                    data: {
                        ticketId: ticket.id,
                        escalationLevel: escalation.level,
                        priority: ticket.priority
                    }
                });
            }
        }
        catch (error) {
            this.logger.error(`Failed to notify escalation for ticket ${ticket.id}:`, error);
        }
    }
    async getOrganizationStaffByRoles(organizationId, roles) {
        try {
            const organization = await this.organizationsService.findOne(organizationId);
            if (!organization)
                return [];
            const staff = organization.staff || [];
            return staff.filter((member) => roles.includes(member.role));
        }
        catch (error) {
            this.logger.error(`Failed to get staff for organization ${organizationId}:`, error);
            return [];
        }
    }
    getHoursElapsed(date) {
        const elapsed = Date.now() - date.getTime();
        return elapsed / (1000 * 60 * 60);
    }
    async getTicketSlaStatus(ticketId) {
        const ticket = await this.ticketRepository.findOne({
            where: { id: ticketId },
            relations: ['activities']
        });
        if (!ticket) {
            throw new Error('Ticket not found');
        }
        const rule = this.escalationRules[ticket.priority];
        const firstResponse = ticket.activities.find(a => a.type === _enums_ticket_activity_type_enum__WEBPACK_IMPORTED_MODULE_6__.TicketActivityType.RESPONSE);
        const resolution = ticket.activities.find(a => a.type === _enums_ticket_activity_type_enum__WEBPACK_IMPORTED_MODULE_6__.TicketActivityType.RESOLUTION);
        return {
            responseTime: {
                target: rule.responseTime,
                actual: firstResponse ?
                    this.getHoursElapsed(ticket.createdAt) : null,
                breached: !firstResponse &&
                    this.getHoursElapsed(ticket.createdAt) > rule.responseTime
            },
            resolutionTime: {
                target: rule.resolutionTime,
                actual: resolution ?
                    this.getHoursElapsed(ticket.createdAt) : null,
                breached: !resolution &&
                    this.getHoursElapsed(ticket.createdAt) > rule.resolutionTime
            }
        };
    }
    async checkSlaBreachEscalation(ticketId) {
        const slaStatus = await this.getTicketSlaStatus(ticketId);
        const ticket = await this.ticketRepository.findOne({
            where: { id: ticketId },
            relations: ['activities']
        });
        if (!ticket)
            return;
        if (slaStatus.responseTime.breached || slaStatus.resolutionTime.breached) {
            const rule = this.escalationRules[ticket.priority];
            const currentLevel = this.getCurrentEscalationLevel(ticket);
            const nextLevel = rule.escalationLevels.find(level => level.level === currentLevel + 1);
            if (nextLevel) {
                await this.escalateTicket(ticket, nextLevel);
            }
        }
    }
};
TicketEscalationService = TicketEscalationService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_ticket_entity__WEBPACK_IMPORTED_MODULE_4__.Ticket)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_5__.TicketActivity)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_8__.NotificationsService,
        _organizations_services_organizations_service__WEBPACK_IMPORTED_MODULE_9__.OrganizationsService,
        _nestjs_config__WEBPACK_IMPORTED_MODULE_3__.ConfigService])
], TicketEscalationService);



/***/ }),

/***/ "./src/modules/tickets/services/tickets.service.ts":
/*!*********************************************************!*\
  !*** ./src/modules/tickets/services/tickets.service.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TicketsService: () => (/* binding */ TicketsService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entities_ticket_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts");
/* harmony import */ var _entities_ticket_comment_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/ticket-comment.entity */ "./src/modules/tickets/entities/ticket-comment.entity.ts");
/* harmony import */ var _entities_ticket_attachment_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../entities/ticket-attachment.entity */ "./src/modules/tickets/entities/ticket-attachment.entity.ts");
/* harmony import */ var _entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../entities/ticket-activity.entity */ "./src/modules/tickets/entities/ticket-activity.entity.ts");
/* harmony import */ var _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dto/create-ticket.dto */ "./src/modules/tickets/dto/create-ticket.dto.ts");
/* harmony import */ var _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../notifications/services/notifications.service */ "./src/modules/notifications/services/notifications.service.ts");
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! nestjs-typeorm-paginate */ "nestjs-typeorm-paginate");
/* harmony import */ var nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_11__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};












let TicketsService = class TicketsService {
    constructor(ticketRepository, commentRepository, attachmentRepository, activityRepository, dataSource, userRepository, eventEmitter, notificationsService) {
        this.ticketRepository = ticketRepository;
        this.commentRepository = commentRepository;
        this.attachmentRepository = attachmentRepository;
        this.activityRepository = activityRepository;
        this.dataSource = dataSource;
        this.userRepository = userRepository;
        this.eventEmitter = eventEmitter;
        this.notificationsService = notificationsService;
    }
    async getRelatedTickets(ticketId, organizationId) {
        return [];
    }
    async remove(id, organizationId) {
        const ticket = await this.findOne(id, organizationId);
        ticket.status = _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_8__.TicketStatus.DELETED;
        ticket.deletedAt = new Date();
        await this.ticketRepository.save(ticket);
    }
    async reopenTicket(id, reopenDetails) {
        const ticket = await this.ticketRepository.findOne({ where: { id, organizationId: reopenDetails.organizationId } });
        if (!ticket) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('Ticket not found');
        }
        ticket.status = _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_8__.TicketStatus.REOPENED;
        ticket.reopenReason = reopenDetails.reason;
        const reopenedByUser = await this.userRepository.findOne({ where: { id: reopenDetails.reopenedBy } });
        if (!reopenedByUser) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('User not found');
        }
        ticket.reopenedBy = reopenedByUser;
        await this.ticketRepository.save(ticket);
        return ticket;
    }
    async create(data) {
        var _a, _b;
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const createdByUser = await this.userRepository.findOne({ where: { id: data.createdBy } });
            if (!createdByUser) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('User not found');
            }
            const ticket = this.ticketRepository.create(Object.assign(Object.assign({}, data), { status: _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_8__.TicketStatus.OPEN, createdBy: createdByUser, attachments: (_a = data.attachments) === null || _a === void 0 ? void 0 : _a.map(attachmentData => {
                    const attachment = new _entities_ticket_attachment_entity__WEBPACK_IMPORTED_MODULE_6__.TicketAttachment();
                    Object.assign(attachment, attachmentData);
                    attachment.organizationId = data.organizationId;
                    attachment.uploadedById = data.createdBy;
                    return attachment;
                }) }));
            await queryRunner.manager.save(ticket);
            if ((_b = data.attachments) === null || _b === void 0 ? void 0 : _b.length) {
                for (const attachmentData of data.attachments) {
                    const attachment = new _entities_ticket_attachment_entity__WEBPACK_IMPORTED_MODULE_6__.TicketAttachment();
                    Object.assign(attachment, attachmentData);
                    attachment.ticketId = ticket.id;
                    attachment.organizationId = data.organizationId;
                    attachment.uploadedById = data.createdBy;
                    await queryRunner.manager.save(attachment);
                }
            }
            const activity = new _entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_7__.TicketActivity();
            activity.ticketId = ticket.id;
            activity.organizationId = data.organizationId;
            activity.userId = data.createdBy;
            activity.action = 'CREATED';
            activity.details = { status: ticket.status };
            await queryRunner.manager.save(activity);
            await queryRunner.commitTransaction();
            if (ticket.assigneeId) {
                await this.notificationsService.create({
                    type: 'TICKET_ASSIGNED',
                    title: 'New Ticket Assigned',
                    content: `Ticket #${ticket.referenceNumber} has been assigned to you: ${ticket.title}`,
                    recipients: ticket.assigneeId ? [{ userId: ticket.assigneeId }] : [],
                    organizationId: data.organizationId,
                    senderId: data.createdBy,
                });
            }
            this.eventEmitter.emit('ticket.created', ticket);
            return ticket;
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async findAll(query) {
        const { organizationId, status, priority, type, assigneeId, contactId, departmentId, search, startDate, endDate, page = 1, limit = 10, } = query;
        const queryBuilder = this.ticketRepository
            .createQueryBuilder('ticket')
            .where('ticket.organizationId = :organizationId', { organizationId })
            .leftJoinAndSelect('ticket.assignee', 'assignee')
            .leftJoinAndSelect('ticket.contact', 'contact')
            .leftJoinAndSelect('ticket.department', 'department');
        if (status) {
            queryBuilder.andWhere('ticket.status = :status', { status });
        }
        if (priority) {
            queryBuilder.andWhere('ticket.priority = :priority', { priority });
        }
        if (type) {
            queryBuilder.andWhere('ticket.type = :type', { type });
        }
        if (assigneeId) {
            queryBuilder.andWhere('ticket.assigneeId = :assigneeId', { assigneeId });
        }
        if (contactId) {
            queryBuilder.andWhere('ticket.contactId = :contactId', { contactId });
        }
        if (departmentId) {
            queryBuilder.andWhere('ticket.departmentId = :departmentId', { departmentId });
        }
        if (search) {
            queryBuilder.andWhere('(LOWER(ticket.title) LIKE LOWER(:search) OR LOWER(ticket.description) LIKE LOWER(:search) OR ticket.referenceNumber LIKE :search)', { search: `%${search}%` });
        }
        if (startDate) {
            queryBuilder.andWhere('ticket.createdAt >= :startDate', { startDate });
        }
        if (endDate) {
            queryBuilder.andWhere('ticket.createdAt <= :endDate', { endDate });
        }
        queryBuilder.orderBy('ticket.createdAt', 'DESC');
        return (0,nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_11__.paginate)(queryBuilder, { page, limit });
    }
    async findOne(id, organizationId) {
        const ticket = await this.ticketRepository
            .createQueryBuilder('ticket')
            .where('ticket.id = :id', { id })
            .andWhere('ticket.organizationId = :organizationId', { organizationId })
            .leftJoinAndSelect('ticket.assignee', 'assignee')
            .leftJoinAndSelect('ticket.contact', 'contact')
            .leftJoinAndSelect('ticket.department', 'department')
            .leftJoinAndSelect('ticket.comments', 'comments')
            .leftJoinAndSelect('ticket.attachments', 'attachments')
            .leftJoinAndSelect('ticket.activities', 'activities')
            .getOne();
        if (!ticket) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('Ticket not found');
        }
        return ticket;
    }
    async update(id, data) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const ticket = await this.findOne(id, data.organizationId);
            const oldStatus = ticket.status;
            Object.assign(ticket, data);
            await queryRunner.manager.save(ticket);
            if (data.status && data.status !== oldStatus) {
                const activity = new _entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_7__.TicketActivity();
                activity.ticketId = ticket.id;
                activity.organizationId = data.organizationId;
                activity.userId = data.updatedBy;
                activity.action = 'STATUS_CHANGED';
                activity.details = {
                    oldStatus,
                    newStatus: data.status,
                    note: data.statusNote,
                };
                await queryRunner.manager.save(activity);
                if (ticket.assigneeId) {
                    await this.notificationsService.create({
                        type: 'TICKET_STATUS_CHANGED',
                        title: 'Ticket Status Updated',
                        content: `Ticket #${ticket.referenceNumber} status changed to ${data.status}`,
                        recipients: ticket.assigneeId ? [{ userId: ticket.assigneeId }] : [],
                        organizationId: data.organizationId,
                        senderId: data.updatedBy,
                    });
                }
            }
            await queryRunner.commitTransaction();
            return ticket;
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async assignTicket(id, data) {
        const ticket = await this.findOne(id, data.organizationId);
        const oldAssigneeId = ticket.assigneeId;
        ticket.assigneeId = data.assigneeId;
        await this.ticketRepository.save(ticket);
        const activity = new _entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_7__.TicketActivity();
        activity.ticketId = ticket.id;
        activity.organizationId = data.organizationId;
        activity.userId = data.assignedBy;
        activity.action = 'ASSIGNED';
        activity.details = {
            oldAssigneeId,
            newAssigneeId: data.assigneeId,
            note: data.note,
        };
        await this.activityRepository.save(activity);
        await this.notificationsService.create({
            type: 'TICKET_ASSIGNED',
            title: 'Ticket Assigned',
            content: `Ticket #${ticket.referenceNumber} has been assigned to you`,
            recipients: [{ userId: data.assigneeId }],
            organizationId: data.organizationId,
            senderId: data.assignedBy,
        });
        return ticket;
    }
    async addComment(id, data) {
        const ticket = await this.findOne(id, data.organizationId);
        const comment = new _entities_ticket_comment_entity__WEBPACK_IMPORTED_MODULE_5__.TicketComment();
        Object.assign(comment, data);
        comment.ticketId = ticket.id;
        comment.organizationId = data.organizationId;
        comment.userId = data.userId;
        await this.commentRepository.save(comment);
        ticket.lastActivityAt = new Date();
        await this.ticketRepository.save(ticket);
        const activity = new _entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_7__.TicketActivity();
        activity.ticketId = ticket.id;
        activity.organizationId = data.organizationId;
        activity.userId = data.userId;
        activity.action = 'COMMENTED';
        activity.details = { commentId: comment.id };
        await this.activityRepository.save(activity);
        if (data.isInternal && ticket.assigneeId !== data.userId) {
            await this.notificationsService.create({
                type: 'TICKET_INTERNAL_NOTE',
                title: 'New Internal Note',
                content: `New internal note added to ticket #${ticket.referenceNumber}`,
                recipients: ticket.assigneeId ? [{ userId: ticket.assigneeId }] : [],
                organizationId: data.organizationId,
                senderId: data.userId,
            });
        }
        return comment;
    }
    async escalateTicket(id, data) {
        const ticket = await this.findOne(id, data.organizationId);
        ticket.status = _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_8__.TicketStatus.ESCALATED;
        ticket.escalatedAt = new Date();
        ticket.escalatedById = data.escalatedBy;
        ticket.escalationReason = data.reason;
        await this.ticketRepository.save(ticket);
        const activity = new _entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_7__.TicketActivity();
        activity.ticketId = ticket.id;
        activity.organizationId = data.organizationId;
        activity.userId = data.escalatedBy;
        activity.action = 'ESCALATED';
        activity.details = { reason: data.reason };
        await this.activityRepository.save(activity);
        await this.notificationsService.create({
            type: 'TICKET_ESCALATED',
            title: 'Ticket Escalated',
            content: `Ticket #${ticket.referenceNumber} has been escalated: ${data.reason}`,
            priority: 'HIGH',
            recipients: [{ userId: 'ADMIN_USER_ID' }],
            organizationId: data.organizationId,
            senderId: data.escalatedBy,
        });
        return ticket;
    }
    async resolveTicket(id, data) {
        const ticket = await this.findOne(id, data.organizationId);
        ticket.status = _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_8__.TicketStatus.RESOLVED;
        ticket.resolvedAt = new Date();
        ticket.resolvedById = data.resolvedBy;
        ticket.resolution = data.resolution;
        await this.ticketRepository.save(ticket);
        const activity = new _entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_7__.TicketActivity();
        activity.ticketId = ticket.id;
        activity.organizationId = data.organizationId;
        activity.userId = data.resolvedBy;
        activity.action = 'RESOLVED';
        activity.details = { resolution: data.resolution };
        await this.activityRepository.save(activity);
        if (ticket.createdById !== data.resolvedBy) {
            await this.notificationsService.create({
                type: 'TICKET_RESOLVED',
                title: 'Ticket Resolved',
                content: `Your ticket #${ticket.referenceNumber} has been resolved`,
                recipients: [{ userId: ticket.createdById }],
                organizationId: data.organizationId,
                senderId: data.resolvedBy,
            });
        }
        return ticket;
    }
    async getAssignedTickets(query) {
        const { organizationId, userId, status, priority, type, contactId, departmentId, search, startDate, endDate, page = 1, limit = 10, } = query;
        const queryBuilder = this.ticketRepository
            .createQueryBuilder('ticket')
            .where('ticket.organizationId = :organizationId', { organizationId })
            .andWhere('ticket.assigneeId = :assigneeId', { assigneeId: userId })
            .leftJoinAndSelect('ticket.contact', 'contact')
            .leftJoinAndSelect('ticket.department', 'department');
        if (status) {
            queryBuilder.andWhere('ticket.status = :status', { status });
        }
        if (priority) {
            queryBuilder.andWhere('ticket.priority = :priority', { priority });
        }
        if (type) {
            queryBuilder.andWhere('ticket.type = :type', { type });
        }
        if (contactId) {
            queryBuilder.andWhere('ticket.contactId = :contactId', { contactId });
        }
        if (departmentId) {
            queryBuilder.andWhere('ticket.departmentId = :departmentId', { departmentId });
        }
        if (search) {
            queryBuilder.andWhere('(LOWER(ticket.title) LIKE LOWER(:search) OR LOWER(ticket.description) LIKE LOWER(:search) OR ticket.referenceNumber LIKE :search)', { search: `%${search}%` });
        }
        if (startDate) {
            queryBuilder.andWhere('ticket.createdAt >= :startDate', { startDate });
        }
        if (endDate) {
            queryBuilder.andWhere('ticket.createdAt <= :endDate', { endDate });
        }
        queryBuilder.orderBy('ticket.createdAt', 'DESC');
        return (0,nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_11__.paginate)(queryBuilder, { page, limit });
    }
    async getTimeline(id, organizationId) {
        const activities = await this.activityRepository
            .createQueryBuilder('activity')
            .where('activity.ticketId = :ticketId', { ticketId: id })
            .andWhere('activity.organizationId = :organizationId', { organizationId })
            .leftJoinAndSelect('activity.user', 'user')
            .orderBy('activity.createdAt', 'DESC')
            .getMany();
        return activities;
    }
    async getDashboard(organizationId) {
        const stats = await this.ticketRepository
            .createQueryBuilder('ticket')
            .where('ticket.organizationId = :organizationId', { organizationId })
            .select([
            'COUNT(*) as total',
            'COUNT(CASE WHEN status = :open THEN 1 END) as open',
            'COUNT(CASE WHEN status = :inProgress THEN 1 END) as inProgress',
            'COUNT(CASE WHEN status = :escalated THEN 1 END) as escalated',
            'COUNT(CASE WHEN priority = :urgent THEN 1 END) as urgent',
        ])
            .setParameter('open', _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_8__.TicketStatus.OPEN)
            .setParameter('inProgress', _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_8__.TicketStatus.IN_PROGRESS)
            .setParameter('escalated', _dto_create_ticket_dto__WEBPACK_IMPORTED_MODULE_8__.TicketStatus.ESCALATED)
            .setParameter('urgent', 'URGENT')
            .getRawOne();
        return stats;
    }
};
TicketsService = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_ticket_entity__WEBPACK_IMPORTED_MODULE_4__.Ticket)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_ticket_comment_entity__WEBPACK_IMPORTED_MODULE_5__.TicketComment)),
    __param(2, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_ticket_attachment_entity__WEBPACK_IMPORTED_MODULE_6__.TicketAttachment)),
    __param(3, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_7__.TicketActivity)),
    __param(5, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_users_entities_user_entity__WEBPACK_IMPORTED_MODULE_10__.User)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.DataSource,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__.EventEmitter2,
        _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_9__.NotificationsService])
], TicketsService);



/***/ }),

/***/ "./src/modules/tickets/tickets.module.ts":
/*!***********************************************!*\
  !*** ./src/modules/tickets/tickets.module.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TicketsModule: () => (/* binding */ TicketsModule)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _controllers_tickets_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./controllers/tickets.controller */ "./src/modules/tickets/controllers/tickets.controller.ts");
/* harmony import */ var _services_tickets_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./services/tickets.service */ "./src/modules/tickets/services/tickets.service.ts");
/* harmony import */ var _services_ticket_activity_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./services/ticket-activity.service */ "./src/modules/tickets/services/ticket-activity.service.ts");
/* harmony import */ var _services_ticket_escalation_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./services/ticket-escalation.service */ "./src/modules/tickets/services/ticket-escalation.service.ts");
/* harmony import */ var _entities_ticket_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts");
/* harmony import */ var _entities_ticket_comment_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./entities/ticket-comment.entity */ "./src/modules/tickets/entities/ticket-comment.entity.ts");
/* harmony import */ var _entities_ticket_attachment_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./entities/ticket-attachment.entity */ "./src/modules/tickets/entities/ticket-attachment.entity.ts");
/* harmony import */ var _entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./entities/ticket-activity.entity */ "./src/modules/tickets/entities/ticket-activity.entity.ts");
/* harmony import */ var _listeners_ticket_listener__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./listeners/ticket.listener */ "./src/modules/tickets/listeners/ticket.listener.ts");
/* harmony import */ var _listeners_ticket_escalation_listener__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./listeners/ticket-escalation.listener */ "./src/modules/tickets/listeners/ticket-escalation.listener.ts");
/* harmony import */ var _listeners_ticket_assignment_listener__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./listeners/ticket-assignment.listener */ "./src/modules/tickets/listeners/ticket-assignment.listener.ts");
/* harmony import */ var _notifications_notifications_module__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../notifications/notifications.module */ "./src/modules/notifications/notifications.module.ts");
/* harmony import */ var _users_users_module__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../users/users.module */ "./src/modules/users/users.module.ts");
/* harmony import */ var _contacts_contacts_module__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../contacts/contacts.module */ "./src/modules/contacts/contacts.module.ts");
/* harmony import */ var _organizations_organizations_module__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../organizations/organizations.module */ "./src/modules/organizations/organizations.module.ts");
/* harmony import */ var _departments_departments_module__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../departments/departments.module */ "./src/modules/departments/departments.module.ts");
/* harmony import */ var _auth_auth_module__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../auth/auth.module */ "./src/modules/auth/auth.module.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




















let TicketsModule = class TicketsModule {
};
TicketsModule = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Module)({
        imports: [
            _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.TypeOrmModule.forFeature([
                _entities_ticket_entity__WEBPACK_IMPORTED_MODULE_7__.Ticket,
                _entities_ticket_comment_entity__WEBPACK_IMPORTED_MODULE_8__.TicketComment,
                _entities_ticket_attachment_entity__WEBPACK_IMPORTED_MODULE_9__.TicketAttachment,
                _entities_ticket_activity_entity__WEBPACK_IMPORTED_MODULE_10__.TicketActivity
            ]),
            _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__.EventEmitterModule.forRoot({
                wildcard: true,
                maxListeners: 20,
                verboseMemoryLeak: true,
            }),
            _notifications_notifications_module__WEBPACK_IMPORTED_MODULE_14__.NotificationsModule,
            _users_users_module__WEBPACK_IMPORTED_MODULE_15__.UsersModule,
            _contacts_contacts_module__WEBPACK_IMPORTED_MODULE_16__.ContactsModule,
            _organizations_organizations_module__WEBPACK_IMPORTED_MODULE_17__.OrganizationsModule,
            _departments_departments_module__WEBPACK_IMPORTED_MODULE_18__.DepartmentsModule,
            _auth_auth_module__WEBPACK_IMPORTED_MODULE_19__.AuthModule
        ],
        controllers: [_controllers_tickets_controller__WEBPACK_IMPORTED_MODULE_3__.TicketsController],
        providers: [
            _services_tickets_service__WEBPACK_IMPORTED_MODULE_4__.TicketsService,
            _services_ticket_activity_service__WEBPACK_IMPORTED_MODULE_5__.TicketActivityService,
            _services_ticket_escalation_service__WEBPACK_IMPORTED_MODULE_6__.TicketEscalationService,
            _listeners_ticket_listener__WEBPACK_IMPORTED_MODULE_11__.TicketListener,
            _listeners_ticket_escalation_listener__WEBPACK_IMPORTED_MODULE_12__.TicketEscalationListener,
            _listeners_ticket_assignment_listener__WEBPACK_IMPORTED_MODULE_13__.TicketAssignmentListener,
        ],
        exports: [_services_tickets_service__WEBPACK_IMPORTED_MODULE_4__.TicketsService]
    })
], TicketsModule);



/***/ }),

/***/ "./src/modules/users/controllers/users.controller.ts":
/*!***********************************************************!*\
  !*** ./src/modules/users/controllers/users.controller.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UsersController: () => (/* binding */ UsersController)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../auth/guards/jwt-auth.guard */ "./src/modules/auth/guards/jwt-auth.guard.ts");
/* harmony import */ var _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../auth/guards/roles.guard */ "./src/modules/auth/guards/roles.guard.ts");
/* harmony import */ var _auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../auth/decorators/roles.decorator */ "./src/modules/auth/decorators/roles.decorator.ts");
/* harmony import */ var _enums_role_enum__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
/* harmony import */ var _services_users_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../services/users.service */ "./src/modules/users/services/users.service.ts");
/* harmony import */ var _dto_create_user_dto__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../dto/create-user.dto */ "./src/modules/users/dto/create-user.dto.ts");
/* harmony import */ var _dto_update_user_dto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dto/update-user.dto */ "./src/modules/users/dto/update-user.dto.ts");
/* harmony import */ var _dto_user_query_dto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../dto/user-query.dto */ "./src/modules/users/dto/user-query.dto.ts");
/* harmony import */ var _dto_update_password_dto__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../dto/update-password.dto */ "./src/modules/users/dto/update-password.dto.ts");
/* harmony import */ var _dto_update_profile_dto__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../dto/update-profile.dto */ "./src/modules/users/dto/update-profile.dto.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};













let UsersController = class UsersController {
    constructor(usersService) {
        this.usersService = usersService;
    }
    async create(createUserDto, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Organization context is required');
        }
        if (!req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('User context is required');
        }
        return this.usersService.create(Object.assign(Object.assign({}, createUserDto), { organizationId: req.organization.id, createdBy: req.user.id }));
    }
    async findAll(query, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Organization context is required');
        }
        return this.usersService.findAll(Object.assign(Object.assign({}, query), { organizationId: req.organization.id }));
    }
    async getProfile(req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Organization context is required');
        }
        if (!req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('User context is required');
        }
        return this.usersService.findOne(req.user.id, req.organization.id);
    }
    async updateProfile(updateProfileDto, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Organization context is required');
        }
        if (!req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('User context is required');
        }
        return this.usersService.updateProfile(req.user.id, Object.assign(Object.assign({}, updateProfileDto), { organizationId: req.organization.id }));
    }
    async updatePassword(updatePasswordDto, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Organization context is required');
        }
        if (!req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('User context is required');
        }
        return this.usersService.updatePassword(req.user.id, Object.assign(Object.assign({}, updatePasswordDto), { organizationId: req.organization.id }));
    }
    async findOne(id, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Organization context is required');
        }
        const user = await this.usersService.findOne(id, req.organization.id);
        if (!user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.NotFoundException('User not found');
        }
        return user;
    }
    async update(id, updateUserDto, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Organization context is required');
        }
        if (!req.user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('User context is required');
        }
        if (updateUserDto.role && updateUserDto.role !== _enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN) {
            const admins = await this.usersService.getAdminCount(req.organization.id);
            if (admins === 1) {
                const currentUser = await this.usersService.findOne(id, req.organization.id);
                if (currentUser.role === _enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN) {
                    throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Cannot demote the last administrator');
                }
            }
        }
        return this.usersService.update(id, Object.assign(Object.assign({}, updateUserDto), { organizationId: req.organization.id, updatedBy: req.user.id }));
    }
    async remove(id, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Organization context is required');
        }
        const user = await this.usersService.findOne(id, req.organization.id);
        if (user.role === _enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN) {
            const admins = await this.usersService.getAdminCount(req.organization.id);
            if (admins === 1) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Cannot delete the last administrator');
            }
        }
        await this.usersService.remove(id, req.organization.id);
    }
    async activate(id, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Organization context is required');
        }
        return this.usersService.activate(id, req.organization.id);
    }
    async deactivate(id, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Organization context is required');
        }
        const user = await this.usersService.findOne(id, req.organization.id);
        if (user.role === _enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN) {
            const admins = await this.usersService.getAdminCount(req.organization.id);
            if (admins === 1) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.BadRequestException('Cannot deactivate the last administrator');
            }
        }
        return this.usersService.deactivate(id, req.organization.id);
    }
    async getActivity(id, query, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Organization context is required');
        }
        return this.usersService.getActivity(id, Object.assign(Object.assign({}, query), { organizationId: req.organization.id }));
    }
    async getPermissions(id, req) {
        if (!req.organization) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ForbiddenException('Organization context is required');
        }
        return this.usersService.getPermissions(id, req.organization.id);
    }
};
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Post)(),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Create new user' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.CREATED, description: 'User created successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 201, type: (__webpack_require__(/*! ../entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_create_user_dto__WEBPACK_IMPORTED_MODULE_7__.CreateUserDto, Object]),
    __metadata("design:returntype", Promise)
], UsersController.prototype, "create", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get all users' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return all users' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_user_query_dto__WEBPACK_IMPORTED_MODULE_9__.UserQueryDto, Object]),
    __metadata("design:returntype", Promise)
], UsersController.prototype, "findAll", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)('profile'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get current user profile' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return current user profile' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UsersController.prototype, "getProfile", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)('profile'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Update current user profile' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Profile updated successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_update_profile_dto__WEBPACK_IMPORTED_MODULE_11__.UpdateProfileDto, Object]),
    __metadata("design:returntype", Promise)
], UsersController.prototype, "updateProfile", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)('profile/password'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Update current user password' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Password updated successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [_dto_update_password_dto__WEBPACK_IMPORTED_MODULE_10__.UpdatePasswordDto, Object]),
    __metadata("design:returntype", Promise)
], UsersController.prototype, "updatePassword", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id'),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get user by id' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return user details' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], UsersController.prototype, "findOne", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)(':id'),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Update user' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'User updated successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Body)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, _dto_update_user_dto__WEBPACK_IMPORTED_MODULE_8__.UpdateUserDto, Object]),
    __metadata("design:returntype", Promise)
], UsersController.prototype, "update", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Delete)(':id'),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Delete user' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.NO_CONTENT, description: 'User deleted successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200 }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], UsersController.prototype, "remove", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)(':id/activate'),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Activate user' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'User activated successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], UsersController.prototype, "activate", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Put)(':id/deactivate'),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Deactivate user' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'User deactivated successfully' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: (__webpack_require__(/*! ../entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], UsersController.prototype, "deactivate", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id/activity'),
    (0,_auth_decorators_roles_decorator__WEBPACK_IMPORTED_MODULE_4__.Roles)(_enums_role_enum__WEBPACK_IMPORTED_MODULE_5__.Role.ADMIN),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get user activity' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return user activity' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: [(__webpack_require__(/*! ../entities/user-activity.entity */ "./src/modules/users/entities/user-activity.entity.ts").UserActivity)] }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Query)()),
    __param(2, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object, Object]),
    __metadata("design:returntype", Promise)
], UsersController.prototype, "getActivity", null);
__decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Get)(':id/permissions'),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiOperation)({ summary: 'Get user permissions' }),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse)({ status: _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.HttpStatus.OK, description: 'Return user permissions' }),
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiResponse({ status: 200, type: [String] }),
    __param(0, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Param)('id', _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ParseUUIDPipe)),
    __param(1, (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Request)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], UsersController.prototype, "getPermissions", null);
UsersController = __decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiTags)('Users'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.Controller)('users'),
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_1__.UseGuards)(_auth_guards_jwt_auth_guard__WEBPACK_IMPORTED_MODULE_2__.JwtAuthGuard, _auth_guards_roles_guard__WEBPACK_IMPORTED_MODULE_3__.RolesGuard),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiBearerAuth)(),
    __metadata("design:paramtypes", [_services_users_service__WEBPACK_IMPORTED_MODULE_6__.UsersService])
], UsersController);



/***/ }),

/***/ "./src/modules/users/dto/create-user.dto.ts":
/*!**************************************************!*\
  !*** ./src/modules/users/dto/create-user.dto.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateUserDto: () => (/* binding */ CreateUserDto),
/* harmony export */   EmergencyContact: () => (/* binding */ EmergencyContact),
/* harmony export */   UserAddress: () => (/* binding */ UserAddress)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _enums_role_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





class UserAddress {
    static _OPENAPI_METADATA_FACTORY() {
        return { street: { required: true, type: () => String, maxLength: 100 }, city: { required: true, type: () => String, maxLength: 100 }, state: { required: true, type: () => String, maxLength: 100 }, postalCode: { required: true, type: () => String, maxLength: 20 }, country: { required: true, type: () => String, maxLength: 100 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], UserAddress.prototype, "street", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], UserAddress.prototype, "city", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], UserAddress.prototype, "state", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(20),
    __metadata("design:type", String)
], UserAddress.prototype, "postalCode", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], UserAddress.prototype, "country", void 0);
class EmergencyContact {
    static _OPENAPI_METADATA_FACTORY() {
        return { name: { required: true, type: () => String, maxLength: 100 }, relationship: { required: true, type: () => String, maxLength: 100 }, phone: { required: true, type: () => String }, address: { required: false, type: () => String, maxLength: 200 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], EmergencyContact.prototype, "name", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], EmergencyContact.prototype, "relationship", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    __metadata("design:type", String)
], EmergencyContact.prototype, "phone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(200),
    __metadata("design:type", String)
], EmergencyContact.prototype, "address", void 0);
class CreateUserDto {
    constructor() {
        this.requirePasswordChange = true;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { firstName: { required: true, type: () => String, minLength: 2, maxLength: 50 }, lastName: { required: true, type: () => String, minLength: 2, maxLength: 50 }, email: { required: true, type: () => String, maxLength: 100 }, password: { required: true, type: () => String, minLength: 8, maxLength: 100, pattern: "/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/" }, phoneNumber: { required: true, type: () => String }, role: { required: true, enum: (__webpack_require__(/*! ../enums/role.enum */ "./src/modules/users/enums/role.enum.ts").Role) }, title: { required: false, type: () => String, maxLength: 100 }, department: { required: false, type: () => String, maxLength: 100 }, employeeId: { required: false, type: () => String, maxLength: 50 }, address: { required: false, type: () => (__webpack_require__(/*! ./create-user.dto */ "./src/modules/users/dto/create-user.dto.ts").UserAddress) }, emergencyContact: { required: false, type: () => (__webpack_require__(/*! ./create-user.dto */ "./src/modules/users/dto/create-user.dto.ts").EmergencyContact) }, licenseNumber: { required: false, type: () => String, maxLength: 50 }, specialization: { required: false, type: () => String, maxLength: 50 }, qualifications: { required: false, type: () => [String] }, certifications: { required: false, type: () => [String] }, isOnCall: { required: false, type: () => Boolean }, languages: { required: false, type: () => [String] }, requirePasswordChange: { required: false, type: () => Boolean, default: true }, preferences: { required: false, type: () => ({ theme: { required: false, type: () => String }, notifications: { required: false, type: () => ({ email: { required: false, type: () => Boolean }, sms: { required: false, type: () => Boolean }, inApp: { required: false, type: () => Boolean } }) }, timezone: { required: false, type: () => String }, language: { required: false, type: () => String } }) }, metadata: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], CreateUserDto.prototype, "firstName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(2),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], CreateUserDto.prototype, "lastName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], CreateUserDto.prototype, "email", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(8),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Matches)(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/, {
        message: 'Password must contain at least one uppercase letter, one lowercase letter, one number and one special character',
    }),
    __metadata("design:type", String)
], CreateUserDto.prototype, "password", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    __metadata("design:type", String)
], CreateUserDto.prototype, "phoneNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({ enum: _enums_role_enum__WEBPACK_IMPORTED_MODULE_3__.Role }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_role_enum__WEBPACK_IMPORTED_MODULE_3__.Role),
    __metadata("design:type", String)
], CreateUserDto.prototype, "role", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], CreateUserDto.prototype, "title", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], CreateUserDto.prototype, "department", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], CreateUserDto.prototype, "employeeId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => UserAddress),
    __metadata("design:type", UserAddress)
], CreateUserDto.prototype, "address", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.ValidateNested)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => EmergencyContact),
    __metadata("design:type", EmergencyContact)
], CreateUserDto.prototype, "emergencyContact", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], CreateUserDto.prototype, "licenseNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(50),
    __metadata("design:type", String)
], CreateUserDto.prototype, "specialization", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], CreateUserDto.prototype, "qualifications", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], CreateUserDto.prototype, "certifications", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateUserDto.prototype, "isOnCall", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], CreateUserDto.prototype, "languages", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateUserDto.prototype, "requirePasswordChange", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Object)
], CreateUserDto.prototype, "preferences", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    __metadata("design:type", Object)
], CreateUserDto.prototype, "metadata", void 0);


/***/ }),

/***/ "./src/modules/users/dto/update-password.dto.ts":
/*!******************************************************!*\
  !*** ./src/modules/users/dto/update-password.dto.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UpdatePasswordDto: () => (/* binding */ UpdatePasswordDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



class UpdatePasswordDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { currentPassword: { required: true, type: () => String }, newPassword: { required: true, type: () => String, minLength: 8, pattern: "/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]+$/" }, confirmPassword: { required: true, type: () => String } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdatePasswordDto.prototype, "currentPassword", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)({
        description: 'New password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, one number, and one special character'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MinLength)(8),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Matches)(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]+$/, {
        message: 'Password too weak - must contain at least one uppercase letter, one lowercase letter, one number, and one special character'
    }),
    __metadata("design:type", String)
], UpdatePasswordDto.prototype, "newPassword", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNotEmpty)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdatePasswordDto.prototype, "confirmPassword", void 0);


/***/ }),

/***/ "./src/modules/users/dto/update-profile.dto.ts":
/*!*****************************************************!*\
  !*** ./src/modules/users/dto/update-profile.dto.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UpdateProfileDto: () => (/* binding */ UpdateProfileDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



class UpdateProfileDto {
    static _OPENAPI_METADATA_FACTORY() {
        return { firstName: { required: false, type: () => String, maxLength: 100 }, lastName: { required: false, type: () => String, maxLength: 100 }, email: { required: false, type: () => String }, phone: { required: false, type: () => String }, title: { required: false, type: () => String, maxLength: 200 }, bio: { required: false, type: () => String, maxLength: 500 }, timezone: { required: false, type: () => String }, language: { required: false, type: () => String }, metadata: { required: false, type: () => Object } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], UpdateProfileDto.prototype, "firstName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(100),
    __metadata("design:type", String)
], UpdateProfileDto.prototype, "lastName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEmail)(),
    __metadata("design:type", String)
], UpdateProfileDto.prototype, "email", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsPhoneNumber)(),
    __metadata("design:type", String)
], UpdateProfileDto.prototype, "phone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(200),
    __metadata("design:type", String)
], UpdateProfileDto.prototype, "title", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.MaxLength)(500),
    __metadata("design:type", String)
], UpdateProfileDto.prototype, "bio", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdateProfileDto.prototype, "timezone", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UpdateProfileDto.prototype, "language", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], UpdateProfileDto.prototype, "preferences", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsObject)(),
    __metadata("design:type", Object)
], UpdateProfileDto.prototype, "metadata", void 0);


/***/ }),

/***/ "./src/modules/users/dto/update-user.dto.ts":
/*!**************************************************!*\
  !*** ./src/modules/users/dto/update-user.dto.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UpdateUserDto: () => (/* binding */ UpdateUserDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _create_user_dto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./create-user.dto */ "./src/modules/users/dto/create-user.dto.ts");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




class UpdateUserDto extends (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.PartialType)((0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.OmitType)(_create_user_dto__WEBPACK_IMPORTED_MODULE_1__.CreateUserDto, ['password', 'email'])) {
    static _OPENAPI_METADATA_FACTORY() {
        return { isActive: { required: false, type: () => Boolean }, isLocked: { required: false, type: () => Boolean }, isEmailVerified: { required: false, type: () => Boolean }, isPhoneVerified: { required: false, type: () => Boolean } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateUserDto.prototype, "isActive", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateUserDto.prototype, "isLocked", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateUserDto.prototype, "isEmailVerified", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_2__.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateUserDto.prototype, "isPhoneVerified", void 0);


/***/ }),

/***/ "./src/modules/users/dto/user-query.dto.ts":
/*!*************************************************!*\
  !*** ./src/modules/users/dto/user-query.dto.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UserQueryDto: () => (/* binding */ UserQueryDto)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-validator */ "class-validator");
/* harmony import */ var class_validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_validator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "class-transformer");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _enums_role_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





class UserQueryDto {
    constructor() {
        this.orderDirection = 'DESC';
        this.skip = 0;
        this.take = 10;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { search: { required: false, type: () => String }, role: { required: false, enum: (__webpack_require__(/*! ../enums/role.enum */ "./src/modules/users/enums/role.enum.ts").Role) }, isActive: { required: false, type: () => Boolean }, department: { required: false, type: () => String }, page: { required: false, type: () => Number }, limit: { required: false, type: () => Number }, roles: { required: false, enum: (__webpack_require__(/*! ../enums/role.enum */ "./src/modules/users/enums/role.enum.ts").Role), isArray: true }, departmentIds: { required: false, type: () => [String] }, hasVerifiedEmail: { required: false, type: () => Boolean }, relations: { required: false, type: () => [String] }, orderBy: { required: false, type: () => String }, orderDirection: { required: false, type: () => Object, default: "DESC" }, skip: { required: false, type: () => Number, default: 0, minimum: 0 }, take: { required: false, type: () => Number, default: 10, minimum: 1, maximum: 100 } };
    }
}
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UserQueryDto.prototype, "search", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ enum: _enums_role_enum__WEBPACK_IMPORTED_MODULE_3__.Role, isArray: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsEnum)(_enums_role_enum__WEBPACK_IMPORTED_MODULE_3__.Role, { each: true }),
    __metadata("design:type", Array)
], UserQueryDto.prototype, "roles", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    __metadata("design:type", Array)
], UserQueryDto.prototype, "departmentIds", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Boolean),
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsBoolean)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Boolean),
    __metadata("design:type", Boolean)
], UserQueryDto.prototype, "hasVerifiedEmail", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsArray)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)({ each: true }),
    __metadata("design:type", Array)
], UserQueryDto.prototype, "relations", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        description: 'Order by field (e.g., "firstName", "lastName", "createdAt")'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UserQueryDto.prototype, "orderBy", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({
        enum: ['ASC', 'DESC'],
        default: 'DESC'
    }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsString)(),
    __metadata("design:type", String)
], UserQueryDto.prototype, "orderDirection", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ default: 0 }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNumber)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Number),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(0),
    __metadata("design:type", Number)
], UserQueryDto.prototype, "skip", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiPropertyOptional)({ default: 10 }),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsOptional)(),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.IsNumber)(),
    (0,class_transformer__WEBPACK_IMPORTED_MODULE_2__.Type)(() => Number),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Min)(1),
    (0,class_validator__WEBPACK_IMPORTED_MODULE_1__.Max)(100),
    __metadata("design:type", Number)
], UserQueryDto.prototype, "take", void 0);


/***/ }),

/***/ "./src/modules/users/entities/user-activity.entity.ts":
/*!************************************************************!*\
  !*** ./src/modules/users/entities/user-activity.entity.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ActivityType: () => (/* binding */ ActivityType),
/* harmony export */   UserActivity: () => (/* binding */ UserActivity)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _user_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var ActivityType;
(function (ActivityType) {
    ActivityType["LOGIN"] = "LOGIN";
    ActivityType["LOGOUT"] = "LOGOUT";
    ActivityType["PASSWORD_CHANGE"] = "PASSWORD_CHANGE";
    ActivityType["PROFILE_UPDATE"] = "PROFILE_UPDATE";
    ActivityType["TICKET_CREATE"] = "TICKET_CREATE";
    ActivityType["TICKET_UPDATE"] = "TICKET_UPDATE";
    ActivityType["TICKET_COMMENT"] = "TICKET_COMMENT";
    ActivityType["TICKET_ASSIGNMENT"] = "TICKET_ASSIGNMENT";
    ActivityType["TICKET_STATUS_CHANGE"] = "TICKET_STATUS_CHANGE";
    ActivityType["MESSAGE_SEND"] = "MESSAGE_SEND";
    ActivityType["APPOINTMENT_CREATE"] = "APPOINTMENT_CREATE";
    ActivityType["APPOINTMENT_UPDATE"] = "APPOINTMENT_UPDATE";
    ActivityType["APPOINTMENT_CANCEL"] = "APPOINTMENT_CANCEL";
    ActivityType["DOCUMENT_UPLOAD"] = "DOCUMENT_UPLOAD";
    ActivityType["DOCUMENT_DELETE"] = "DOCUMENT_DELETE";
    ActivityType["SETTINGS_UPDATE"] = "SETTINGS_UPDATE";
    ActivityType["API_ACCESS"] = "API_ACCESS";
    ActivityType["FAILED_LOGIN"] = "FAILED_LOGIN";
    ActivityType["EMAIL_VERIFICATION"] = "EMAIL_VERIFICATION";
    ActivityType["PHONE_VERIFICATION"] = "PHONE_VERIFICATION";
})(ActivityType || (ActivityType = {}));
let UserActivity = class UserActivity {
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, userId: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, action: { required: true, type: () => String }, performedById: { required: true, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, type: { required: true, type: () => String }, description: { required: true, type: () => String }, metadata: { required: true, type: () => Object }, ipAddress: { required: true, type: () => String }, userAgent: { required: true, type: () => String }, referrer: { required: true, type: () => String }, status: { required: true, type: () => String }, failureReason: { required: true, type: () => String }, activityType: { required: true, enum: (__webpack_require__(/*! ./user-activity.entity */ "./src/modules/users/entities/user-activity.entity.ts").ActivityType) }, details: { required: true, type: () => ({ resourceId: { required: false, type: () => String }, resourceType: { required: false, type: () => String }, oldValue: { required: false, type: () => Object }, newValue: { required: false, type: () => Object }, description: { required: false, type: () => String }, additionalInfo: { required: false, type: () => Object } }) }, isSuccess: { required: true, type: () => Boolean }, errorMessage: { required: false, type: () => String }, context: { required: true, type: () => ({ module: { required: false, type: () => String }, action: { required: false, type: () => String }, target: { required: false, type: () => String }, result: { required: false, type: () => String }, severity: { required: false, type: () => Object } }) }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, user: { required: true, type: () => (__webpack_require__(/*! ./user.entity */ "./src/modules/users/entities/user.entity.ts").User) } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], UserActivity.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], UserActivity.prototype, "userId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], UserActivity.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], UserActivity.prototype, "action", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], UserActivity.prototype, "performedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], UserActivity.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], UserActivity.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], UserActivity.prototype, "type", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserActivity.prototype, "description", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], UserActivity.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserActivity.prototype, "ipAddress", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserActivity.prototype, "userAgent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserActivity.prototype, "referrer", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserActivity.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserActivity.prototype, "failureReason", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: ActivityType
    }),
    __metadata("design:type", String)
], UserActivity.prototype, "activityType", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], UserActivity.prototype, "details", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: true }),
    __metadata("design:type", Boolean)
], UserActivity.prototype, "isSuccess", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserActivity.prototype, "errorMessage", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], UserActivity.prototype, "context", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization)
], UserActivity.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _user_entity__WEBPACK_IMPORTED_MODULE_2__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'userId' }),
    __metadata("design:type", _user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], UserActivity.prototype, "user", void 0);
UserActivity = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('user_activities'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'userId']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'activityType']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'createdAt'])
], UserActivity);



/***/ }),

/***/ "./src/modules/users/entities/user-session.entity.ts":
/*!***********************************************************!*\
  !*** ./src/modules/users/entities/user-session.entity.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SessionStatus: () => (/* binding */ SessionStatus),
/* harmony export */   UserSession: () => (/* binding */ UserSession)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _user_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./user.entity */ "./src/modules/users/entities/user.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var SessionStatus;
(function (SessionStatus) {
    SessionStatus["ACTIVE"] = "ACTIVE";
    SessionStatus["EXPIRED"] = "EXPIRED";
    SessionStatus["REVOKED"] = "REVOKED";
    SessionStatus["LOGGED_OUT"] = "LOGGED_OUT";
})(SessionStatus || (SessionStatus = {}));
let UserSession = class UserSession {
    isExpired() {
        return new Date() > this.expiresAt;
    }
    isActive() {
        return (this.status === SessionStatus.ACTIVE &&
            !this.isExpired());
    }
    canBeExtended() {
        return (this.isActive() &&
            this.isRemembered &&
            this.tokenRotationCount < 10);
    }
    requiresRotation() {
        if (!this.lastTokenRotation) {
            return false;
        }
        const rotationThreshold = 24 * 60 * 60 * 1000;
        const timeSinceLastRotation = Date.now() - this.lastTokenRotation.getTime();
        return timeSinceLastRotation >= rotationThreshold;
    }
    extend(duration) {
        if (!this.canBeExtended()) {
            throw new Error('Session cannot be extended');
        }
        const newExpiryDate = new Date();
        newExpiryDate.setTime(newExpiryDate.getTime() + duration);
        this.expiresAt = newExpiryDate;
        this.tokenRotationCount += 1;
        this.lastTokenRotation = new Date();
    }
    updateActivity() {
        this.lastActivityAt = new Date();
    }
    revoke(revokedBy, reason = '') {
        this.status = SessionStatus.REVOKED;
        this.revokedAt = new Date();
        this.revokedBy = revokedBy;
        this.revokedReason = reason;
    }
    logout() {
        this.status = SessionStatus.LOGGED_OUT;
    }
    isSameIp(ip) {
        return this.ipAddress === ip;
    }
    isSameDevice(deviceId) {
        return this.deviceId === deviceId;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, userId: { required: true, type: () => String }, user: { required: true, type: () => (__webpack_require__(/*! ./user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, organizationId: { required: true, type: () => String }, token: { required: true, type: () => String }, refreshToken: { required: true, type: () => String }, status: { required: true, enum: (__webpack_require__(/*! ./user-session.entity */ "./src/modules/users/entities/user-session.entity.ts").SessionStatus) }, expiresAt: { required: true, type: () => Date }, lastActivityAt: { required: true, type: () => Date }, ipAddress: { required: true, type: () => String }, userAgent: { required: true, type: () => String }, deviceId: { required: true, type: () => String }, deviceType: { required: true, type: () => String }, browser: { required: true, type: () => String }, operatingSystem: { required: true, type: () => String }, location: { required: true, type: () => String }, metadata: { required: true, type: () => Object }, isMobile: { required: true, type: () => Boolean }, isRemembered: { required: true, type: () => Boolean }, revokedAt: { required: true, type: () => Date }, revokedBy: { required: true, type: () => String }, revokedReason: { required: true, type: () => String }, tokenRotationCount: { required: true, type: () => Number }, lastTokenRotation: { required: true, type: () => Date }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], UserSession.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], UserSession.prototype, "userId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _user_entity__WEBPACK_IMPORTED_MODULE_2__.User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'userId' }),
    __metadata("design:type", _user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], UserSession.prototype, "user", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], UserSession.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ unique: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], UserSession.prototype, "token", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserSession.prototype, "refreshToken", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: SessionStatus,
        default: SessionStatus.ACTIVE
    }),
    __metadata("design:type", String)
], UserSession.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp' }),
    __metadata("design:type", Date)
], UserSession.prototype, "expiresAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], UserSession.prototype, "lastActivityAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserSession.prototype, "ipAddress", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserSession.prototype, "userAgent", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserSession.prototype, "deviceId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserSession.prototype, "deviceType", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserSession.prototype, "browser", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserSession.prototype, "operatingSystem", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserSession.prototype, "location", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], UserSession.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], UserSession.prototype, "isMobile", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], UserSession.prototype, "isRemembered", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], UserSession.prototype, "revokedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], UserSession.prototype, "revokedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], UserSession.prototype, "revokedReason", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: 0 }),
    __metadata("design:type", Number)
], UserSession.prototype, "tokenRotationCount", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], UserSession.prototype, "lastTokenRotation", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], UserSession.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], UserSession.prototype, "updatedAt", void 0);
UserSession = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('user_sessions')
], UserSession);



/***/ }),

/***/ "./src/modules/users/entities/user.entity.ts":
/*!***************************************************!*\
  !*** ./src/modules/users/entities/user.entity.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   User: () => (/* binding */ User)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _enums_role_enum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
/* harmony import */ var _tickets_entities_ticket_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../tickets/entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts");
/* harmony import */ var _messages_entities_message_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../messages/entities/message.entity */ "./src/modules/messages/entities/message.entity.ts");
/* harmony import */ var _appointments_entities_appointment_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../appointments/entities/appointment.entity */ "./src/modules/appointments/entities/appointment.entity.ts");
/* harmony import */ var _notifications_entities_notification_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../notifications/entities/notification.entity */ "./src/modules/notifications/entities/notification.entity.ts");
/* harmony import */ var _user_activity_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./user-activity.entity */ "./src/modules/users/entities/user-activity.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










let User = class User {
    get fullName() {
        return `${this.firstName} ${this.lastName}`;
    }
    get isAvailable() {
        return this.isActive && !this.isLocked;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, mobilePhone: { required: false, type: () => String }, organizationId: { required: true, type: () => String }, firstName: { required: true, type: () => String }, lastName: { required: true, type: () => String }, email: { required: true, type: () => String }, password: { required: true, type: () => String }, phoneNumber: { required: false, type: () => String }, role: { required: true, enum: (__webpack_require__(/*! ../enums/role.enum */ "./src/modules/users/enums/role.enum.ts").Role) }, title: { required: false, type: () => String }, department: { required: false, type: () => String }, employeeId: { required: false, type: () => String }, address: { required: false, type: () => ({ street: { required: true, type: () => String }, city: { required: true, type: () => String }, state: { required: true, type: () => String }, postalCode: { required: true, type: () => String }, country: { required: true, type: () => String } }) }, emergencyContact: { required: false, type: () => ({ name: { required: true, type: () => String }, relationship: { required: true, type: () => String }, phone: { required: true, type: () => String }, address: { required: false, type: () => String } }) }, licenseNumber: { required: false, type: () => String }, specialization: { required: false, type: () => String }, qualifications: { required: false, type: () => [String] }, certifications: { required: false, type: () => [String] }, isOnCall: { required: true, type: () => Boolean }, languages: { required: false, type: () => [String] }, requirePasswordChange: { required: true, type: () => Boolean }, preferences: { required: false, type: () => ({ theme: { required: false, type: () => String }, notifications: { required: false, type: () => ({ email: { required: false, type: () => Boolean }, sms: { required: false, type: () => Boolean }, inApp: { required: false, type: () => Boolean } }) }, timezone: { required: false, type: () => String }, language: { required: false, type: () => String } }) }, metadata: { required: false, type: () => Object }, isActive: { required: true, type: () => Boolean }, isLocked: { required: true, type: () => Boolean }, isEmailVerified: { required: true, type: () => Boolean }, isPhoneVerified: { required: true, type: () => Boolean }, lastLoginAt: { required: false, type: () => Date }, lastActiveAt: { required: false, type: () => Date }, deviceTokens: { required: false, type: () => [String] }, avatar: { required: false, type: () => String }, signature: { required: false, type: () => String }, createdById: { required: true, type: () => String }, updatedById: { required: false, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, deletedAt: { required: false, type: () => Date }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, createdBy: { required: true, type: () => (__webpack_require__(/*! ./user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, updatedBy: { required: false, type: () => (__webpack_require__(/*! ./user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, assignedTickets: { required: true, type: () => [(__webpack_require__(/*! ../../tickets/entities/ticket.entity */ "./src/modules/tickets/entities/ticket.entity.ts").Ticket)] }, messages: { required: true, type: () => [(__webpack_require__(/*! ../../messages/entities/message.entity */ "./src/modules/messages/entities/message.entity.ts").Message)] }, appointments: { required: true, type: () => [(__webpack_require__(/*! ../../appointments/entities/appointment.entity */ "./src/modules/appointments/entities/appointment.entity.ts").Appointment)] }, notifications: { required: true, type: () => [(__webpack_require__(/*! ../../notifications/entities/notification.entity */ "./src/modules/notifications/entities/notification.entity.ts").Notification)] }, activities: { required: true, type: () => [(__webpack_require__(/*! ./user-activity.entity */ "./src/modules/users/entities/user-activity.entity.ts").UserActivity)] } };
    }
};
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], User.prototype, "id", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], User.prototype, "organizationId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], User.prototype, "firstName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], User.prototype, "lastName", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ unique: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], User.prototype, "email", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], User.prototype, "password", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "phoneNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _enums_role_enum__WEBPACK_IMPORTED_MODULE_2__.Role,
        default: _enums_role_enum__WEBPACK_IMPORTED_MODULE_2__.Role.STAFF
    }),
    __metadata("design:type", String)
], User.prototype, "role", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "title", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "department", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "employeeId", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], User.prototype, "address", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], User.prototype, "emergencyContact", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "licenseNumber", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "specialization", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('simple-array', { nullable: true }),
    __metadata("design:type", Array)
], User.prototype, "qualifications", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('simple-array', { nullable: true }),
    __metadata("design:type", Array)
], User.prototype, "certifications", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], User.prototype, "isOnCall", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('simple-array', { nullable: true }),
    __metadata("design:type", Array)
], User.prototype, "languages", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: true }),
    __metadata("design:type", Boolean)
], User.prototype, "requirePasswordChange", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], User.prototype, "preferences", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], User.prototype, "metadata", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: true }),
    __metadata("design:type", Boolean)
], User.prototype, "isActive", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], User.prototype, "isLocked", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], User.prototype, "isEmailVerified", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], User.prototype, "isPhoneVerified", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], User.prototype, "lastLoginAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], User.prototype, "lastActiveAt", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('simple-array', { nullable: true }),
    __metadata("design:type", Array)
], User.prototype, "deviceTokens", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "avatar", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "signature", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    __metadata("design:type", String)
], User.prototype, "createdById", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "updatedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], User.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], User.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.DeleteDateColumn)(),
    __metadata("design:type", Date)
], User.prototype, "deletedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization)
], User.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'createdById' }),
    __metadata("design:type", User)
], User.prototype, "createdBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => User),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'updatedById' }),
    __metadata("design:type", User)
], User.prototype, "updatedBy", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _tickets_entities_ticket_entity__WEBPACK_IMPORTED_MODULE_4__.Ticket, ticket => ticket.assignee),
    __metadata("design:type", Array)
], User.prototype, "assignedTickets", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _messages_entities_message_entity__WEBPACK_IMPORTED_MODULE_5__.Message, message => message.sender),
    __metadata("design:type", Array)
], User.prototype, "messages", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _appointments_entities_appointment_entity__WEBPACK_IMPORTED_MODULE_6__.Appointment, appointment => appointment.provider),
    __metadata("design:type", Array)
], User.prototype, "appointments", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _notifications_entities_notification_entity__WEBPACK_IMPORTED_MODULE_7__.Notification, notification => notification.user),
    __metadata("design:type", Array)
], User.prototype, "notifications", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.OneToMany)(() => _user_activity_entity__WEBPACK_IMPORTED_MODULE_8__.UserActivity, activity => activity.user),
    __metadata("design:type", Array)
], User.prototype, "activities", void 0);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", String),
    __metadata("design:paramtypes", [])
], User.prototype, "fullName", null);
__decorate([
    (0,_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__.ApiProperty)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], User.prototype, "isAvailable", null);
User = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('users'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'email']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'phoneNumber']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'role'])
], User);



/***/ }),

/***/ "./src/modules/users/enums/role.enum.ts":
/*!**********************************************!*\
  !*** ./src/modules/users/enums/role.enum.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Role: () => (/* binding */ Role),
/* harmony export */   RoleHierarchy: () => (/* binding */ RoleHierarchy),
/* harmony export */   RolePermissions: () => (/* binding */ RolePermissions),
/* harmony export */   getRoleDisplayName: () => (/* binding */ getRoleDisplayName),
/* harmony export */   hasHigherOrEqualRole: () => (/* binding */ hasHigherOrEqualRole),
/* harmony export */   hasPermission: () => (/* binding */ hasPermission)
/* harmony export */ });
var Role;
(function (Role) {
    Role["SUPER_ADMIN"] = "SUPER_ADMIN";
    Role["ADMIN"] = "ADMIN";
    Role["MANAGER"] = "MANAGER";
    Role["DOCTOR"] = "DOCTOR";
    Role["NURSE"] = "NURSE";
    Role["RECEPTIONIST"] = "RECEPTIONIST";
    Role["PATIENT"] = "PATIENT";
    Role["USER"] = "USER";
    Role["STAFF"] = "STAFF";
    Role["AGENT"] = "AGENT";
    Role["SUPERVISOR"] = "SUPERVISOR";
    Role["CLIENT"] = "CLIENT";
    Role["GUEST"] = "GUEST";
})(Role || (Role = {}));
const RoleHierarchy = {
    [Role.SUPER_ADMIN]: 100,
    [Role.ADMIN]: 90,
    [Role.MANAGER]: 80,
    [Role.DOCTOR]: 70,
    [Role.NURSE]: 60,
    [Role.RECEPTIONIST]: 50,
    [Role.PATIENT]: 20,
    [Role.USER]: 10,
    [Role.STAFF]: 0,
    [Role.AGENT]: 0,
    [Role.SUPERVISOR]: 0,
    [Role.CLIENT]: 0,
    [Role.GUEST]: 0
};
const RolePermissions = {
    [Role.SUPER_ADMIN]: ['*'],
    [Role.ADMIN]: [
        'user:manage',
        'department:manage',
        'organization:manage',
        'appointment:manage',
        'patient:manage',
        'report:view'
    ],
    [Role.MANAGER]: [
        'department:view',
        'department:edit',
        'user:view',
        'appointment:manage',
        'patient:view',
        'report:view'
    ],
    [Role.DOCTOR]: [
        'appointment:view',
        'appointment:edit',
        'patient:view',
        'patient:edit',
        'prescription:manage'
    ],
    [Role.NURSE]: [
        'appointment:view',
        'patient:view',
        'patient:edit',
        'vitals:manage'
    ],
    [Role.RECEPTIONIST]: [
        'appointment:view',
        'appointment:schedule',
        'patient:view',
        'patient:register'
    ],
    [Role.PATIENT]: [
        'appointment:view',
        'appointment:schedule',
        'profile:edit'
    ],
    [Role.USER]: [
        'profile:view',
        'profile:edit'
    ],
    [Role.STAFF]: [],
    [Role.AGENT]: [],
    [Role.SUPERVISOR]: [],
    [Role.CLIENT]: [],
    [Role.GUEST]: []
};
function hasPermission(role, permission) {
    const permissions = RolePermissions[role];
    return permissions.includes('*') || permissions.includes(permission);
}
function hasHigherOrEqualRole(userRole, requiredRole) {
    return RoleHierarchy[userRole] >= RoleHierarchy[requiredRole];
}
function getRoleDisplayName(role) {
    return role.split('_')
        .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
        .join(' ');
}


/***/ }),

/***/ "./src/modules/users/listeners/user-activity.listener.ts":
/*!***************************************************************!*\
  !*** ./src/modules/users/listeners/user-activity.listener.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UserActivityListener: () => (/* binding */ UserActivityListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _services_user_activity_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/user-activity.service */ "./src/modules/users/services/user-activity.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var UserActivityListener_1;



let UserActivityListener = UserActivityListener_1 = class UserActivityListener {
    constructor(activityService) {
        this.activityService = activityService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(UserActivityListener_1.name);
    }
    async handleUserLogin(event) {
        var _a, _b, _c;
        await this.activityService.logActivity({
            userId: event.userId,
            organizationId: event.organizationId,
            type: _services_user_activity_service__WEBPACK_IMPORTED_MODULE_2__.ActivityType.LOGIN,
            status: event.status,
            failureReason: event.failureReason,
            ip: (_a = event.request) === null || _a === void 0 ? void 0 : _a.ip,
            userAgent: (_b = event.request) === null || _b === void 0 ? void 0 : _b.headers['user-agent'],
            referrer: (_c = event.request) === null || _c === void 0 ? void 0 : _c.headers.referer,
        });
    }
    async handleUserLogout(event) {
        var _a, _b;
        await this.activityService.logActivity({
            userId: event.userId,
            organizationId: event.organizationId,
            type: _services_user_activity_service__WEBPACK_IMPORTED_MODULE_2__.ActivityType.LOGOUT,
            ip: (_a = event.request) === null || _a === void 0 ? void 0 : _a.ip,
            userAgent: (_b = event.request) === null || _b === void 0 ? void 0 : _b.headers['user-agent'],
        });
    }
    async handlePasswordChange(event) {
        var _a, _b;
        await this.activityService.logActivity({
            userId: event.userId,
            organizationId: event.organizationId,
            type: _services_user_activity_service__WEBPACK_IMPORTED_MODULE_2__.ActivityType.PASSWORD_CHANGE,
            status: event.status,
            failureReason: event.failureReason,
            ip: (_a = event.request) === null || _a === void 0 ? void 0 : _a.ip,
            userAgent: (_b = event.request) === null || _b === void 0 ? void 0 : _b.headers['user-agent'],
        });
    }
    async handleProfileUpdate(event) {
        var _a, _b;
        await this.activityService.logActivity({
            userId: event.userId,
            organizationId: event.organizationId,
            type: _services_user_activity_service__WEBPACK_IMPORTED_MODULE_2__.ActivityType.PROFILE_UPDATE,
            metadata: { changes: event.changes },
            ip: (_a = event.request) === null || _a === void 0 ? void 0 : _a.ip,
            userAgent: (_b = event.request) === null || _b === void 0 ? void 0 : _b.headers['user-agent'],
        });
    }
    async handleMfaEnabled(event) {
        var _a, _b;
        await this.activityService.logActivity({
            userId: event.userId,
            organizationId: event.organizationId,
            type: _services_user_activity_service__WEBPACK_IMPORTED_MODULE_2__.ActivityType.MFA_ENABLED,
            ip: (_a = event.request) === null || _a === void 0 ? void 0 : _a.ip,
            userAgent: (_b = event.request) === null || _b === void 0 ? void 0 : _b.headers['user-agent'],
        });
    }
    async handleMfaDisabled(event) {
        var _a, _b;
        await this.activityService.logActivity({
            userId: event.userId,
            organizationId: event.organizationId,
            type: _services_user_activity_service__WEBPACK_IMPORTED_MODULE_2__.ActivityType.MFA_DISABLED,
            ip: (_a = event.request) === null || _a === void 0 ? void 0 : _a.ip,
            userAgent: (_b = event.request) === null || _b === void 0 ? void 0 : _b.headers['user-agent'],
        });
    }
    async handleRoleChange(event) {
        var _a, _b;
        await this.activityService.logActivity({
            userId: event.userId,
            organizationId: event.organizationId,
            type: _services_user_activity_service__WEBPACK_IMPORTED_MODULE_2__.ActivityType.ROLE_CHANGE,
            metadata: {
                oldRole: event.oldRole,
                newRole: event.newRole,
                changedBy: event.changedBy,
            },
            ip: (_a = event.request) === null || _a === void 0 ? void 0 : _a.ip,
            userAgent: (_b = event.request) === null || _b === void 0 ? void 0 : _b.headers['user-agent'],
        });
    }
    async handleDepartmentAssignment(event) {
        var _a, _b;
        await this.activityService.logActivity({
            userId: event.userId,
            organizationId: event.organizationId,
            type: _services_user_activity_service__WEBPACK_IMPORTED_MODULE_2__.ActivityType.DEPARTMENT_ASSIGNMENT,
            metadata: {
                departmentId: event.departmentId,
                action: event.action,
                performedBy: event.performedBy,
            },
            ip: (_a = event.request) === null || _a === void 0 ? void 0 : _a.ip,
            userAgent: (_b = event.request) === null || _b === void 0 ? void 0 : _b.headers['user-agent'],
        });
    }
    async handlePermissionChange(event) {
        var _a, _b;
        await this.activityService.logActivity({
            userId: event.userId,
            organizationId: event.organizationId,
            type: _services_user_activity_service__WEBPACK_IMPORTED_MODULE_2__.ActivityType.PERMISSION_CHANGE,
            metadata: {
                changes: event.changes,
                performedBy: event.performedBy,
            },
            ip: (_a = event.request) === null || _a === void 0 ? void 0 : _a.ip,
            userAgent: (_b = event.request) === null || _b === void 0 ? void 0 : _b.headers['user-agent'],
        });
    }
    async handleDataExport(event) {
        var _a, _b;
        await this.activityService.logActivity({
            userId: event.userId,
            organizationId: event.organizationId,
            type: _services_user_activity_service__WEBPACK_IMPORTED_MODULE_2__.ActivityType.EXPORT_DATA,
            metadata: {
                exportType: event.exportType,
                dataTypes: event.dataTypes,
            },
            ip: (_a = event.request) === null || _a === void 0 ? void 0 : _a.ip,
            userAgent: (_b = event.request) === null || _b === void 0 ? void 0 : _b.headers['user-agent'],
        });
    }
    async handleBulkAction(event) {
        var _a, _b;
        await this.activityService.logActivity({
            userId: event.userId,
            organizationId: event.organizationId,
            type: _services_user_activity_service__WEBPACK_IMPORTED_MODULE_2__.ActivityType.BULK_ACTION,
            metadata: Object.assign({ action: event.action, targetIds: event.targetIds }, event.metadata),
            ip: (_a = event.request) === null || _a === void 0 ? void 0 : _a.ip,
            userAgent: (_b = event.request) === null || _b === void 0 ? void 0 : _b.headers['user-agent'],
        });
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.login'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserActivityListener.prototype, "handleUserLogin", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.logout'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserActivityListener.prototype, "handleUserLogout", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.password_change'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserActivityListener.prototype, "handlePasswordChange", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.profile_update'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserActivityListener.prototype, "handleProfileUpdate", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.mfa.enabled'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserActivityListener.prototype, "handleMfaEnabled", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.mfa.disabled'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserActivityListener.prototype, "handleMfaDisabled", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.role_change'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserActivityListener.prototype, "handleRoleChange", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.department_assignment'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserActivityListener.prototype, "handleDepartmentAssignment", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.permission_change'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserActivityListener.prototype, "handlePermissionChange", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.data_export'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserActivityListener.prototype, "handleDataExport", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.bulk_action'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserActivityListener.prototype, "handleBulkAction", null);
UserActivityListener = UserActivityListener_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_services_user_activity_service__WEBPACK_IMPORTED_MODULE_2__.UserActivityService])
], UserActivityListener);



/***/ }),

/***/ "./src/modules/users/listeners/user.listener.ts":
/*!******************************************************!*\
  !*** ./src/modules/users/listeners/user.listener.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UserEventListener: () => (/* binding */ UserEventListener)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../notifications/services/notifications.service */ "./src/modules/notifications/services/notifications.service.ts");
/* harmony import */ var _shared_services_email_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared/services/email.service */ "./src/shared/services/email.service.ts");
/* harmony import */ var _shared_services_audit_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../shared/services/audit.service */ "./src/shared/services/audit.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var UserEventListener_1;





let UserEventListener = UserEventListener_1 = class UserEventListener {
    constructor(notificationsService, emailService, auditService) {
        this.notificationsService = notificationsService;
        this.emailService = emailService;
        this.auditService = auditService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(UserEventListener_1.name);
    }
    async handleUserCreated(event) {
        try {
            await Promise.all([
                this.auditService.log({
                    action: 'USER_CREATED',
                    entityType: 'USER',
                    entityId: event.user.id,
                    actorId: event.performedBy,
                    organizationId: event.organizationId,
                    metadata: event.metadata,
                }),
                this.emailService.sendEmail({
                    to: event.user.email,
                    subject: 'Welcome to the Platform',
                    template: 'welcome-email',
                    context: {
                        firstName: event.user.firstName,
                        loginUrl: `${process.env.APP_URL}/login`,
                    },
                }),
                event.organizationId &&
                    this.notificationsService.send({
                        type: 'USER_CREATED',
                        title: 'New User Created',
                        message: `${event.user.firstName} ${event.user.lastName} has joined the organization`,
                        organizationId: event.organizationId,
                        data: {
                            userId: event.user.id,
                            email: event.user.email,
                        },
                        userId: '',
                    }),
            ].filter(Boolean));
        }
        catch (error) {
            this.logger.error('Error handling user created event', {
                error,
                userId: event.user.id
            });
            throw error;
        }
    }
    async handleUserUpdated(event) {
        var _a;
        try {
            await this.auditService.log({
                action: 'USER_UPDATED',
                entityType: 'USER',
                entityId: event.user.id,
                actorId: event.performedBy,
                organizationId: event.organizationId,
                metadata: event.metadata,
            });
            if ((_a = event.metadata) === null || _a === void 0 ? void 0 : _a.importantChanges) {
                await this.notificationsService.send({
                    type: 'PROFILE_UPDATED',
                    title: 'Profile Updates',
                    message: 'Your profile information has been updated',
                    data: {
                        changes: event.metadata.importantChanges,
                    },
                    userId: '',
                });
            }
        }
        catch (error) {
            this.logger.error('Error handling user updated event', {
                error,
                userId: event.user.id,
            });
            throw error;
        }
    }
    async handlePasswordChanged(event) {
        try {
            await Promise.all([
                this.auditService.log({
                    action: 'PASSWORD_CHANGED',
                    entityType: 'USER',
                    entityId: event.user.id,
                    actorId: event.performedBy || event.user.id,
                    organizationId: event.organizationId,
                    metadata: {
                        requiresReset: event.requiresReset,
                        expiresAt: event.expiresAt,
                    },
                }),
                this.emailService.sendEmail({
                    to: event.user.email,
                    subject: 'Password Changed',
                    template: 'password-changed',
                    context: {
                        firstName: event.user.firstName,
                        requiresReset: event.requiresReset,
                        expiresAt: event.expiresAt,
                    },
                }),
            ]);
        }
        catch (error) {
            this.logger.error('Error handling password changed event', {
                error,
                userId: event.user.id,
            });
            throw error;
        }
    }
    async handleStatusChanged(event) {
        try {
            const status = event.user.isActive ? 'activated' : 'deactivated';
            await Promise.all([
                this.auditService.log({
                    action: `USER_${status.toUpperCase()}`,
                    entityType: 'USER',
                    entityId: event.user.id,
                    actorId: event.performedBy,
                    organizationId: event.organizationId,
                    metadata: event.metadata,
                }),
                event.organizationId &&
                    this.notificationsService.send({
                        type: 'USER_STATUS_CHANGED',
                        title: `User Account ${status}`,
                        message: `${event.user.firstName} ${event.user.lastName}'s account has been ${status}`,
                        organizationId: event.organizationId,
                        data: {
                            userId: event.user.id,
                            status,
                        },
                        userId: '',
                    }),
                this.emailService.sendEmail({
                    to: event.user.email,
                    subject: `Account ${status}`,
                    template: `account-${status}`,
                    context: {
                        firstName: event.user.firstName,
                    },
                }),
            ].filter(Boolean));
        }
        catch (error) {
            this.logger.error('Error handling user status changed event', {
                error,
                userId: event.user.id,
            });
            throw error;
        }
    }
    async handleUserDeleted(event) {
        try {
            await Promise.all([
                this.auditService.log({
                    action: 'USER_DELETED',
                    entityType: 'USER',
                    entityId: event.user.id,
                    actorId: event.performedBy,
                    organizationId: event.organizationId,
                    metadata: event.metadata,
                }),
                event.organizationId &&
                    this.notificationsService.send({
                        type: 'USER_DELETED',
                        title: 'User Account Deleted',
                        message: `${event.user.firstName} ${event.user.lastName}'s account has been deleted`,
                        organizationId: event.organizationId,
                        data: {
                            userId: event.user.id,
                            email: event.user.email,
                        },
                        userId: '',
                    }),
            ].filter(Boolean));
        }
        catch (error) {
            this.logger.error('Error handling user deleted event', {
                error,
                userId: event.user.id,
            });
            throw error;
        }
    }
    async handleUserLogin(event) {
        var _a;
        try {
            await Promise.all([
                this.auditService.log({
                    action: 'USER_LOGIN',
                    entityType: 'USER',
                    entityId: event.user.id,
                    actorId: event.user.id,
                    organizationId: event.organizationId,
                    metadata: Object.assign({ ip: event.ip, userAgent: event.userAgent }, event.metadata),
                }),
                ((_a = event.metadata) === null || _a === void 0 ? void 0 : _a.suspicious) &&
                    this.notificationsService.send({
                        type: 'SUSPICIOUS_LOGIN',
                        title: 'Suspicious Login Detected',
                        message: 'A login attempt from an unrecognized device was detected',
                        userId: event.user.id,
                        priority: 'HIGH',
                        data: {
                            ip: event.ip,
                            userAgent: event.userAgent,
                            location: event.metadata.location,
                        },
                    }),
            ].filter(Boolean));
        }
        catch (error) {
            this.logger.error('Error handling user login event', {
                error,
                userId: event.user.id,
            });
            throw error;
        }
    }
};
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.created'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserEventListener.prototype, "handleUserCreated", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.updated'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserEventListener.prototype, "handleUserUpdated", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.password.changed'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserEventListener.prototype, "handlePasswordChanged", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.status.changed'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserEventListener.prototype, "handleStatusChanged", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.deleted'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserEventListener.prototype, "handleUserDeleted", null);
__decorate([
    (0,_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_1__.OnEvent)('user.login'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserEventListener.prototype, "handleUserLogin", null);
UserEventListener = UserEventListener_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_2__.NotificationsService,
        _shared_services_email_service__WEBPACK_IMPORTED_MODULE_3__.EmailService,
        _shared_services_audit_service__WEBPACK_IMPORTED_MODULE_4__.AuditService])
], UserEventListener);



/***/ }),

/***/ "./src/modules/users/services/user-activity.service.ts":
/*!*************************************************************!*\
  !*** ./src/modules/users/services/user-activity.service.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ActivityType: () => (/* binding */ ActivityType),
/* harmony export */   UserActivityService: () => (/* binding */ UserActivityService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _entities_user_activity_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/user-activity.entity */ "./src/modules/users/entities/user-activity.entity.ts");
/* harmony import */ var _entities_user_entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var UserActivityService_1;





var ActivityType;
(function (ActivityType) {
    ActivityType["LOGIN"] = "LOGIN";
    ActivityType["LOGOUT"] = "LOGOUT";
    ActivityType["PASSWORD_CHANGE"] = "PASSWORD_CHANGE";
    ActivityType["PROFILE_UPDATE"] = "PROFILE_UPDATE";
    ActivityType["MFA_ENABLED"] = "MFA_ENABLED";
    ActivityType["MFA_DISABLED"] = "MFA_DISABLED";
    ActivityType["API_ACCESS"] = "API_ACCESS";
    ActivityType["SETTINGS_CHANGE"] = "SETTINGS_CHANGE";
    ActivityType["ROLE_CHANGE"] = "ROLE_CHANGE";
    ActivityType["DEPARTMENT_ASSIGNMENT"] = "DEPARTMENT_ASSIGNMENT";
    ActivityType["PERMISSION_CHANGE"] = "PERMISSION_CHANGE";
    ActivityType["EXPORT_DATA"] = "EXPORT_DATA";
    ActivityType["BULK_ACTION"] = "BULK_ACTION";
})(ActivityType || (ActivityType = {}));
let UserActivityService = UserActivityService_1 = class UserActivityService {
    constructor(activityRepository, userRepository) {
        this.activityRepository = activityRepository;
        this.userRepository = userRepository;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(UserActivityService_1.name);
    }
    async logActivity(options) {
        try {
            const activity = this.activityRepository.create({
                userId: options.userId,
                organizationId: options.organizationId,
                type: options.type,
                description: options.description,
                metadata: options.metadata,
                ipAddress: options.ip,
                userAgent: options.userAgent,
                referrer: options.referrer,
                status: options.status || 'SUCCESS',
                failureReason: options.failureReason
            });
            const savedActivity = await this.activityRepository.save(activity);
            return Array.isArray(savedActivity) ? savedActivity[0] : savedActivity;
        }
        catch (error) {
            this.logger.error(`Failed to log activity for user ${options.userId}:`, error);
            throw error;
        }
    }
    async getUserActivity(userId, options = {}) {
        var _a;
        const queryBuilder = this.activityRepository
            .createQueryBuilder('activity')
            .where('activity.userId = :userId', { userId })
            .orderBy('activity.createdAt', 'DESC');
        if (options.startDate) {
            queryBuilder.andWhere('activity.createdAt >= :startDate', {
                startDate: options.startDate
            });
        }
        if (options.endDate) {
            queryBuilder.andWhere('activity.createdAt <= :endDate', {
                endDate: options.endDate
            });
        }
        if ((_a = options.types) === null || _a === void 0 ? void 0 : _a.length) {
            queryBuilder.andWhere('activity.type IN (:...types)', {
                types: options.types
            });
        }
        if (options.status) {
            queryBuilder.andWhere('activity.status = :status', {
                status: options.status
            });
        }
        return queryBuilder
            .take(options.limit || 50)
            .skip(options.offset || 0)
            .getManyAndCount();
    }
    async getOrganizationActivity(organizationId, options = {}) {
        var _a, _b;
        const queryBuilder = this.activityRepository
            .createQueryBuilder('activity')
            .where('activity.organizationId = :organizationId', { organizationId })
            .orderBy('activity.createdAt', 'DESC');
        if (options.startDate) {
            queryBuilder.andWhere('activity.createdAt >= :startDate', {
                startDate: options.startDate
            });
        }
        if (options.endDate) {
            queryBuilder.andWhere('activity.createdAt <= :endDate', {
                endDate: options.endDate
            });
        }
        if ((_a = options.types) === null || _a === void 0 ? void 0 : _a.length) {
            queryBuilder.andWhere('activity.type IN (:...types)', {
                types: options.types
            });
        }
        if ((_b = options.userIds) === null || _b === void 0 ? void 0 : _b.length) {
            queryBuilder.andWhere('activity.userId IN (:...userIds)', {
                userIds: options.userIds
            });
        }
        if (options.status) {
            queryBuilder.andWhere('activity.status = :status', {
                status: options.status
            });
        }
        return queryBuilder
            .take(options.limit || 50)
            .skip(options.offset || 0)
            .getManyAndCount();
    }
    async getUserActivitySummary(userId, days = 30) {
        const startDate = new Date();
        startDate.setDate(startDate.getDate() - days);
        const activities = await this.activityRepository
            .createQueryBuilder('activity')
            .select('activity.type')
            .addSelect('COUNT(*)', 'count')
            .where('activity.userId = :userId', { userId })
            .andWhere('activity.createdAt >= :startDate', { startDate })
            .groupBy('activity.type')
            .getRawMany();
        return activities.reduce((acc, curr) => {
            acc[curr.activity_type] = parseInt(curr.count);
            return acc;
        }, {});
    }
    async getMostActiveUsers(organizationId, options = {}) {
        const queryBuilder = this.activityRepository
            .createQueryBuilder('activity')
            .select('activity.userId')
            .addSelect('COUNT(*)', 'count')
            .where('activity.organizationId = :organizationId', { organizationId });
        if (options.startDate) {
            queryBuilder.andWhere('activity.createdAt >= :startDate', {
                startDate: options.startDate
            });
        }
        if (options.endDate) {
            queryBuilder.andWhere('activity.createdAt <= :endDate', {
                endDate: options.endDate
            });
        }
        const results = await queryBuilder
            .groupBy('activity.userId')
            .orderBy('count', 'DESC')
            .limit(options.limit || 10)
            .getRawMany();
        return results.map(result => ({
            userId: result.activity_userId,
            count: parseInt(result.count)
        }));
    }
    async cleanupOldLogs(retentionDays = 90) {
        const cutoffDate = new Date();
        cutoffDate.setDate(cutoffDate.getDate() - retentionDays);
        const result = await this.activityRepository
            .createQueryBuilder()
            .delete()
            .where('createdAt < :cutoffDate', { cutoffDate })
            .execute();
        return result.affected || 0;
    }
};
UserActivityService = UserActivityService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_user_activity_entity__WEBPACK_IMPORTED_MODULE_3__.UserActivity)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_user_entity__WEBPACK_IMPORTED_MODULE_4__.User)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository])
], UserActivityService);



/***/ }),

/***/ "./src/modules/users/services/users.service.ts":
/*!*****************************************************!*\
  !*** ./src/modules/users/services/users.service.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UsersService: () => (/* binding */ UsersService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! bcrypt */ "bcrypt");
/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _entities_user_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _entities_user_activity_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../entities/user-activity.entity */ "./src/modules/users/entities/user-activity.entity.ts");
/* harmony import */ var _enums_role_enum__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../enums/role.enum */ "./src/modules/users/enums/role.enum.ts");
/* harmony import */ var _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../notifications/services/notifications.service */ "./src/modules/notifications/services/notifications.service.ts");
/* harmony import */ var nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! nestjs-typeorm-paginate */ "nestjs-typeorm-paginate");
/* harmony import */ var nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_9__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};










let UsersService = class UsersService {
    findUsersByRole(organizationId, arg1) {
        throw new Error('Method not implemented.');
    }
    constructor(userRepository, activityRepository, dataSource, eventEmitter, notificationsService) {
        this.userRepository = userRepository;
        this.activityRepository = activityRepository;
        this.dataSource = dataSource;
        this.eventEmitter = eventEmitter;
        this.notificationsService = notificationsService;
        this.permissionsByRole = {
            [_enums_role_enum__WEBPACK_IMPORTED_MODULE_7__.Role.SUPER_ADMIN]: [
                'all.read', 'all.create', 'all.update', 'all.delete',
                'users.manage', 'organizations.manage', 'settings.manage',
                'reports.access', 'permissions.manage', 'billing.manage'
            ],
            [_enums_role_enum__WEBPACK_IMPORTED_MODULE_7__.Role.ADMIN]: [
                'users.read', 'users.create', 'users.update', 'users.delete',
                'contacts.read', 'contacts.create', 'contacts.update', 'contacts.delete',
                'appointments.read', 'appointments.create', 'appointments.update', 'appointments.delete',
                'reports.access', 'settings.manage', 'notifications.manage'
            ],
            [_enums_role_enum__WEBPACK_IMPORTED_MODULE_7__.Role.MANAGER]: [
                'users.read', 'contacts.read', 'contacts.create', 'contacts.update',
                'appointments.read', 'appointments.create', 'appointments.update',
                'reports.access', 'tasks.manage'
            ],
            [_enums_role_enum__WEBPACK_IMPORTED_MODULE_7__.Role.DOCTOR]: [
                'contacts.read', 'contacts.create', 'contacts.update',
                'appointments.read', 'appointments.create', 'appointments.update',
                'medical.read', 'medical.write'
            ],
            [_enums_role_enum__WEBPACK_IMPORTED_MODULE_7__.Role.NURSE]: [
                'contacts.read', 'contacts.update',
                'appointments.read', 'appointments.update',
                'medical.read', 'medical.write', 'vitals.manage'
            ],
            [_enums_role_enum__WEBPACK_IMPORTED_MODULE_7__.Role.STAFF]: [
                'contacts.read', 'appointments.read', 'appointments.create',
                'tasks.read', 'tasks.create'
            ]
        };
    }
    async findByRole(role, organizationId) {
        return this.userRepository.find({
            where: {
                role: role,
                organizationId,
            },
        });
    }
    async create(data) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const existingUser = await this.userRepository.findOne({
                where: [
                    { email: data.email },
                    { phoneNumber: data.phoneNumber },
                ],
            });
            if (existingUser) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.ConflictException(existingUser.email === data.email
                    ? 'Email already registered'
                    : 'Phone number already registered');
            }
            const hashedPassword = await (0,bcrypt__WEBPACK_IMPORTED_MODULE_4__.hash)(data.password, 12);
            const { createdBy } = data, userData = __rest(data, ["createdBy"]);
            const user = this.userRepository.create(Object.assign(Object.assign({}, userData), { password: hashedPassword }));
            await queryRunner.manager.save(user);
            const activity = this.activityRepository.create({
                userId: user.id,
                organizationId: data.organizationId,
                action: 'USER_CREATED',
                performedById: data.createdBy,
            });
            await queryRunner.manager.save(activity);
            await queryRunner.commitTransaction();
            await this.notificationsService.create({
                type: 'WELCOME',
                title: 'Welcome to the System',
                content: `Welcome ${user.firstName}! Your account has been created successfully.`,
                recipients: [{ userId: user.id }],
                organizationId: data.organizationId,
                senderId: data.createdBy,
            });
            this.eventEmitter.emit('user.created', user);
            const { password } = user, result = __rest(user, ["password"]);
            return result;
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async findById(id, relations = []) {
        return this.userRepository.findOne({
            where: { id },
            relations
        });
    }
    async findAll(query) {
        const { organizationId, role, isActive, search, department, page = 1, limit = 10, } = query;
        const queryBuilder = this.userRepository
            .createQueryBuilder('user')
            .where('user.organizationId = :organizationId', { organizationId });
        if (role) {
            queryBuilder.andWhere('user.role = :role', { role });
        }
        if (isActive !== undefined) {
            queryBuilder.andWhere('user.isActive = :isActive', { isActive });
        }
        if (department) {
            queryBuilder.andWhere('user.department = :department', { department });
        }
        if (search) {
            queryBuilder.andWhere('(LOWER(user.firstName) LIKE LOWER(:search) OR LOWER(user.lastName) LIKE LOWER(:search) OR LOWER(user.email) LIKE LOWER(:search))', { search: `%${search}%` });
        }
        return (0,nestjs_typeorm_paginate__WEBPACK_IMPORTED_MODULE_9__.paginate)(queryBuilder, { page, limit });
    }
    async findOne(id, organizationId) {
        const user = await this.userRepository.findOne({
            where: { id, organizationId },
        });
        if (!user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('User not found');
        }
        return user;
    }
    async update(id, data) {
        const user = await this.findOne(id, data.organizationId);
        Object.assign(user, data);
        await this.userRepository.save(user);
        await this.activityRepository.save({
            userId: user.id,
            organizationId: data.organizationId,
            action: 'USER_UPDATED',
            performedById: data.updatedBy,
        });
        return user;
    }
    async updateProfile(id, data) {
        const user = await this.findOne(id, data.organizationId);
        Object.assign(user, data);
        return this.userRepository.save(user);
    }
    async updatePassword(id, data) {
        const user = await this.findOne(id, data.organizationId);
        const isValidPassword = await (0,bcrypt__WEBPACK_IMPORTED_MODULE_4__.compare)(data.currentPassword, user.password);
        if (!isValidPassword) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Current password is incorrect');
        }
        user.password = await (0,bcrypt__WEBPACK_IMPORTED_MODULE_4__.hash)(data.newPassword, 12);
        user.requirePasswordChange = false;
        await this.userRepository.save(user);
        await this.activityRepository.save({
            userId: user.id,
            organizationId: data.organizationId,
            action: 'PASSWORD_CHANGED',
            performedById: user.id,
        });
    }
    async remove(id, organizationId) {
        const user = await this.findOne(id, organizationId);
        await this.userRepository.softRemove(user);
    }
    async activate(id, organizationId) {
        const user = await this.findOne(id, organizationId);
        user.isActive = true;
        user.isLocked = false;
        return this.userRepository.save(user);
    }
    async deactivate(id, organizationId) {
        const user = await this.findOne(id, organizationId);
        user.isActive = false;
        return this.userRepository.save(user);
    }
    async getAdminCount(organizationId) {
        return this.userRepository.count({
            where: {
                organizationId,
                role: _enums_role_enum__WEBPACK_IMPORTED_MODULE_7__.Role.ADMIN,
                isActive: true,
            },
        });
    }
    async getActivity(id, query) {
        return this.activityRepository.find({
            where: {
                userId: id,
                organizationId: query.organizationId,
            },
            order: { createdAt: 'DESC' },
        });
    }
    async getPermissions(userId, organizationId) {
        const user = await this.findOne(userId, organizationId);
        if (!user) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException('User not found');
        }
        return this.permissionsByRole[user.role] || [];
    }
};
UsersService = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_user_entity__WEBPACK_IMPORTED_MODULE_5__.User)),
    __param(1, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_user_activity_entity__WEBPACK_IMPORTED_MODULE_6__.UserActivity)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_2__.DataSource,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_3__.EventEmitter2,
        _notifications_services_notifications_service__WEBPACK_IMPORTED_MODULE_8__.NotificationsService])
], UsersService);



/***/ }),

/***/ "./src/modules/users/users.module.ts":
/*!*******************************************!*\
  !*** ./src/modules/users/users.module.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UsersModule: () => (/* binding */ UsersModule)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _controllers_users_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./controllers/users.controller */ "./src/modules/users/controllers/users.controller.ts");
/* harmony import */ var _services_users_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./services/users.service */ "./src/modules/users/services/users.service.ts");
/* harmony import */ var _services_user_activity_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./services/user-activity.service */ "./src/modules/users/services/user-activity.service.ts");
/* harmony import */ var _entities_user_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _entities_user_activity_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./entities/user-activity.entity */ "./src/modules/users/entities/user-activity.entity.ts");
/* harmony import */ var _entities_user_session_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./entities/user-session.entity */ "./src/modules/users/entities/user-session.entity.ts");
/* harmony import */ var _listeners_user_listener__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./listeners/user.listener */ "./src/modules/users/listeners/user.listener.ts");
/* harmony import */ var _listeners_user_activity_listener__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./listeners/user-activity.listener */ "./src/modules/users/listeners/user-activity.listener.ts");
/* harmony import */ var _notifications_notifications_module__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../notifications/notifications.module */ "./src/modules/notifications/notifications.module.ts");
/* harmony import */ var _organizations_organizations_module__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../organizations/organizations.module */ "./src/modules/organizations/organizations.module.ts");
/* harmony import */ var _auth_auth_module__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../auth/auth.module */ "./src/modules/auth/auth.module.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};














let UsersModule = class UsersModule {
};
UsersModule = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Module)({
        imports: [
            _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.TypeOrmModule.forFeature([
                _entities_user_entity__WEBPACK_IMPORTED_MODULE_6__.User,
                _entities_user_activity_entity__WEBPACK_IMPORTED_MODULE_7__.UserActivity,
                _entities_user_session_entity__WEBPACK_IMPORTED_MODULE_8__.UserSession
            ]),
            _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_2__.EventEmitterModule.forRoot({
                wildcard: true,
                maxListeners: 20,
                verboseMemoryLeak: true,
            }),
            _notifications_notifications_module__WEBPACK_IMPORTED_MODULE_11__.NotificationsModule,
            _organizations_organizations_module__WEBPACK_IMPORTED_MODULE_12__.OrganizationsModule,
            _auth_auth_module__WEBPACK_IMPORTED_MODULE_13__.AuthModule
        ],
        controllers: [_controllers_users_controller__WEBPACK_IMPORTED_MODULE_3__.UsersController],
        providers: [
            _services_users_service__WEBPACK_IMPORTED_MODULE_4__.UsersService,
            _services_user_activity_service__WEBPACK_IMPORTED_MODULE_5__.UserActivityService,
            _listeners_user_listener__WEBPACK_IMPORTED_MODULE_9__.UserEventListener,
            _listeners_user_activity_listener__WEBPACK_IMPORTED_MODULE_10__.UserActivityListener
        ],
        exports: [_services_users_service__WEBPACK_IMPORTED_MODULE_4__.UsersService]
    })
], UsersModule);



/***/ }),

/***/ "./src/modules/whatsapp/entities/whatsapp-message.entity.ts":
/*!******************************************************************!*\
  !*** ./src/modules/whatsapp/entities/whatsapp-message.entity.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageDirection: () => (/* binding */ MessageDirection),
/* harmony export */   MessageStatus: () => (/* binding */ MessageStatus),
/* harmony export */   MessageType: () => (/* binding */ MessageType),
/* harmony export */   WhatsAppMessage: () => (/* binding */ WhatsAppMessage)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts");
/* harmony import */ var _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var MessageType;
(function (MessageType) {
    MessageType["TEXT"] = "TEXT";
    MessageType["IMAGE"] = "IMAGE";
    MessageType["VIDEO"] = "VIDEO";
    MessageType["DOCUMENT"] = "DOCUMENT";
    MessageType["AUDIO"] = "AUDIO";
    MessageType["LOCATION"] = "LOCATION";
    MessageType["CONTACT"] = "CONTACT";
    MessageType["TEMPLATE"] = "TEMPLATE";
    MessageType["INTERACTIVE"] = "INTERACTIVE";
})(MessageType || (MessageType = {}));
var MessageStatus;
(function (MessageStatus) {
    MessageStatus["QUEUED"] = "QUEUED";
    MessageStatus["SENT"] = "SENT";
    MessageStatus["DELIVERED"] = "DELIVERED";
    MessageStatus["READ"] = "READ";
    MessageStatus["FAILED"] = "FAILED";
    MessageStatus["UNKNOWN"] = "UNKNOWN";
})(MessageStatus || (MessageStatus = {}));
var MessageDirection;
(function (MessageDirection) {
    MessageDirection["INBOUND"] = "INBOUND";
    MessageDirection["OUTBOUND"] = "OUTBOUND";
})(MessageDirection || (MessageDirection = {}));
let WhatsAppMessage = class WhatsAppMessage {
    canRetry() {
        return (this.status === MessageStatus.FAILED &&
            this.retryCount < 3 &&
            !this.isExpired());
    }
    isExpired() {
        if (this.isScheduled && this.scheduledFor) {
            return this.scheduledFor < new Date();
        }
        if (this.requiresUserReply && this.replyDeadline) {
            return this.replyDeadline < new Date();
        }
        return false;
    }
    shouldSendNow() {
        if (!this.isScheduled) {
            return true;
        }
        if (!this.scheduledFor) {
            return true;
        }
        return this.scheduledFor <= new Date();
    }
    updateStatus(status) {
        this.status = status;
        switch (status) {
            case MessageStatus.SENT:
                this.sentAt = new Date();
                break;
            case MessageStatus.DELIVERED:
                this.deliveredAt = new Date();
                break;
            case MessageStatus.READ:
                this.readAt = new Date();
                break;
            case MessageStatus.FAILED:
                this.failedAt = new Date();
                break;
        }
    }
    retry() {
        if (!this.canRetry()) {
            throw new Error('Message cannot be retried');
        }
        this.retryCount += 1;
        this.lastRetryAt = new Date();
        this.status = MessageStatus.QUEUED;
        this.errorCode = null;
        this.errorMessage = null;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, from: { required: true, type: () => String }, to: { required: true, type: () => String }, messageType: { required: true, type: () => String }, content: { required: true, type: () => String }, receivedAt: { required: false, type: () => Date }, lastError: { required: false, type: () => String }, organizationId: { required: true, type: () => String }, organization: { required: true, type: () => (__webpack_require__(/*! ../../organizations/entities/organization.entity */ "./src/modules/organizations/entities/organization.entity.ts").Organization) }, userId: { required: true, type: () => String }, user: { required: true, type: () => (__webpack_require__(/*! ../../users/entities/user.entity */ "./src/modules/users/entities/user.entity.ts").User) }, recipientPhone: { required: true, type: () => String }, recipientName: { required: true, type: () => String }, direction: { required: true, enum: (__webpack_require__(/*! ./whatsapp-message.entity */ "./src/modules/whatsapp/entities/whatsapp-message.entity.ts").MessageDirection) }, type: { required: true, enum: (__webpack_require__(/*! ./whatsapp-message.entity */ "./src/modules/whatsapp/entities/whatsapp-message.entity.ts").MessageType) }, metadata: { required: false, type: () => Object }, templateName: { required: true, type: () => String }, templateData: { required: true, type: () => Object }, status: { required: true, enum: (__webpack_require__(/*! ./whatsapp-message.entity */ "./src/modules/whatsapp/entities/whatsapp-message.entity.ts").MessageStatus) }, whatsappMessageId: { required: true, type: () => String }, errorCode: { required: true, type: () => String, nullable: true }, errorMessage: { required: true, type: () => String, nullable: true }, retryCount: { required: true, type: () => Number }, lastRetryAt: { required: true, type: () => Date }, sentAt: { required: false, type: () => Date }, queuedAt: { required: true, type: () => Date }, deliveredAt: { required: true, type: () => Date, nullable: true }, readAt: { required: true, type: () => Date, nullable: true }, failedAt: { required: true, type: () => Date }, attachments: { required: true }, locationData: { required: true, type: () => ({ latitude: { required: true, type: () => Number }, longitude: { required: true, type: () => Number }, name: { required: false, type: () => String }, address: { required: false, type: () => String } }) }, contactData: { required: true }, interactiveData: { required: true, type: () => ({ type: { required: true, type: () => String }, title: { required: true, type: () => String }, body: { required: true, type: () => String }, buttons: { required: false, type: () => [Object] }, selectedOption: { required: false, type: () => String } }) }, isScheduled: { required: true, type: () => Boolean }, scheduledFor: { required: true, type: () => Date }, isTemplate: { required: true, type: () => Boolean }, requiresUserReply: { required: true, type: () => Boolean }, replyTimeoutHours: { required: true, type: () => Number }, replyDeadline: { required: true, type: () => Date }, isAutomatedReply: { required: true, type: () => Boolean }, automationTriggerId: { required: true, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], WhatsAppMessage.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('text', { nullable: true }),
    __metadata("design:type", String)
], WhatsAppMessage.prototype, "content", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid'),
    __metadata("design:type", String)
], WhatsAppMessage.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'organizationId' }),
    __metadata("design:type", _organizations_entities_organization_entity__WEBPACK_IMPORTED_MODULE_3__.Organization)
], WhatsAppMessage.prototype, "organization", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], WhatsAppMessage.prototype, "userId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.ManyToOne)(() => _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User, { nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.JoinColumn)({ name: 'userId' }),
    __metadata("design:type", _users_entities_user_entity__WEBPACK_IMPORTED_MODULE_2__.User)
], WhatsAppMessage.prototype, "user", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], WhatsAppMessage.prototype, "recipientPhone", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], WhatsAppMessage.prototype, "recipientName", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: MessageDirection,
        default: MessageDirection.OUTBOUND
    }),
    __metadata("design:type", String)
], WhatsAppMessage.prototype, "direction", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: MessageType,
        default: MessageType.TEXT
    }),
    __metadata("design:type", String)
], WhatsAppMessage.prototype, "type", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], WhatsAppMessage.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], WhatsAppMessage.prototype, "templateName", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], WhatsAppMessage.prototype, "templateData", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: MessageStatus,
        default: MessageStatus.QUEUED
    }),
    __metadata("design:type", String)
], WhatsAppMessage.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], WhatsAppMessage.prototype, "whatsappMessageId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Object)
], WhatsAppMessage.prototype, "errorCode", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Object)
], WhatsAppMessage.prototype, "errorMessage", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'int', default: 0 }),
    __metadata("design:type", Number)
], WhatsAppMessage.prototype, "retryCount", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], WhatsAppMessage.prototype, "lastRetryAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], WhatsAppMessage.prototype, "sentAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], WhatsAppMessage.prototype, "queuedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Object)
], WhatsAppMessage.prototype, "deliveredAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Object)
], WhatsAppMessage.prototype, "readAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], WhatsAppMessage.prototype, "attachments", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], WhatsAppMessage.prototype, "locationData", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], WhatsAppMessage.prototype, "contactData", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], WhatsAppMessage.prototype, "interactiveData", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], WhatsAppMessage.prototype, "isScheduled", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], WhatsAppMessage.prototype, "scheduledFor", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], WhatsAppMessage.prototype, "isTemplate", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], WhatsAppMessage.prototype, "requiresUserReply", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: 0 }),
    __metadata("design:type", Number)
], WhatsAppMessage.prototype, "replyTimeoutHours", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", Date)
], WhatsAppMessage.prototype, "replyDeadline", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], WhatsAppMessage.prototype, "isAutomatedReply", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], WhatsAppMessage.prototype, "automationTriggerId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], WhatsAppMessage.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], WhatsAppMessage.prototype, "updatedAt", void 0);
WhatsAppMessage = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('whatsapp_messages'),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['organizationId', 'createdAt']),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(['recipientPhone', 'createdAt'])
], WhatsAppMessage);



/***/ }),

/***/ "./src/modules/whatsapp/entities/whatsapp-template.entity.ts":
/*!*******************************************************************!*\
  !*** ./src/modules/whatsapp/entities/whatsapp-template.entity.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WhatsappTemplate: () => (/* binding */ WhatsappTemplate),
/* harmony export */   WhatsappTemplateButtonType: () => (/* reexport safe */ _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateButtonType),
/* harmony export */   WhatsappTemplateCategory: () => (/* reexport safe */ _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateCategory),
/* harmony export */   WhatsappTemplateComponentType: () => (/* reexport safe */ _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateComponentType),
/* harmony export */   WhatsappTemplateHeaderType: () => (/* reexport safe */ _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateHeaderType),
/* harmony export */   WhatsappTemplateStatus: () => (/* reexport safe */ _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateStatus)
/* harmony export */ });
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/whatsapp-template.service */ "./src/modules/whatsapp/services/whatsapp-template.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




let WhatsappTemplate = class WhatsappTemplate {
    getVariables() {
        const variables = new Set();
        const regex = /{{([^{}]+)}}/g;
        this.components.forEach(component => {
            if (component.text) {
                let match;
                while ((match = regex.exec(component.text)) !== null) {
                    variables.add(match[1].trim());
                }
            }
            if (component.buttons) {
                component.buttons.forEach(button => {
                    if (button.url) {
                        let match;
                        while ((match = regex.exec(button.url)) !== null) {
                            variables.add(match[1].trim());
                        }
                    }
                });
            }
        });
        return Array.from(variables);
    }
    getBodyText() {
        const bodyComponent = this.components.find(c => c.type === _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateComponentType.BODY);
        return (bodyComponent === null || bodyComponent === void 0 ? void 0 : bodyComponent.text) || null;
    }
    getHeaderText() {
        const headerComponent = this.components.find(c => c.type === _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateComponentType.HEADER &&
            c.format === _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateHeaderType.TEXT);
        return (headerComponent === null || headerComponent === void 0 ? void 0 : headerComponent.text) || null;
    }
    processTemplate(variables = {}) {
        const result = {
            body: ''
        };
        for (const component of this.components) {
            switch (component.type) {
                case _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateComponentType.BODY:
                    result.body = this.processText(component.text || '', variables);
                    break;
                case _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateComponentType.HEADER:
                    if (component.format === _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateHeaderType.TEXT) {
                        result.header = this.processText(component.text || '', variables);
                    }
                    break;
                case _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateComponentType.FOOTER:
                    result.footer = this.processText(component.text || '', variables);
                    break;
                case _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateComponentType.BUTTONS:
                    if (component.buttons) {
                        result.buttons = component.buttons.map(button => {
                            const processedButton = Object.assign({}, button);
                            if (button.url) {
                                processedButton.url = this.processText(button.url, variables);
                            }
                            return processedButton;
                        });
                    }
                    break;
            }
        }
        return result;
    }
    processText(text, variables) {
        let processed = text;
        for (const [key, value] of Object.entries(variables)) {
            const regex = new RegExp(`{{\\s*${key}\\s*}}`, 'g');
            processed = processed.replace(regex, String(value !== null && value !== void 0 ? value : ''));
        }
        return processed;
    }
    static _OPENAPI_METADATA_FACTORY() {
        return { id: { required: true, type: () => String }, organizationId: { required: true, type: () => String }, name: { required: true, type: () => String }, description: { required: false, type: () => String }, category: { required: true, enum: (__webpack_require__(/*! ../services/whatsapp-template.service */ "./src/modules/whatsapp/services/whatsapp-template.service.ts").WhatsappTemplateCategory) }, status: { required: true, enum: (__webpack_require__(/*! ../services/whatsapp-template.service */ "./src/modules/whatsapp/services/whatsapp-template.service.ts").WhatsappTemplateStatus) }, language: { required: true, type: () => String }, externalTemplateId: { required: false, type: () => String }, components: { required: true, type: () => [Object] }, isDefault: { required: true, type: () => Boolean }, submittedAt: { required: false, type: () => Date }, approvedAt: { required: false, type: () => Date }, rejectionReason: { required: false, type: () => String }, metadata: { required: false, type: () => Object }, useCount: { required: true, type: () => Number }, lastUsedAt: { required: false, type: () => Date }, createdById: { required: false, type: () => String }, updatedById: { required: false, type: () => String }, createdAt: { required: true, type: () => Date }, updatedAt: { required: true, type: () => Date }, deletedAt: { required: false, type: () => Date } };
    }
};
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], WhatsappTemplate.prototype, "id", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], WhatsappTemplate.prototype, "organizationId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)(),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], WhatsappTemplate.prototype, "name", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], WhatsappTemplate.prototype, "description", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateCategory,
        default: _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateCategory.UTILITY
    }),
    __metadata("design:type", String)
], WhatsappTemplate.prototype, "category", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({
        type: 'enum',
        enum: _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateStatus,
        default: _services_whatsapp_template_service__WEBPACK_IMPORTED_MODULE_2__.WhatsappTemplateStatus.DRAFT
    }),
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Index)(),
    __metadata("design:type", String)
], WhatsappTemplate.prototype, "status", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: 'en' }),
    __metadata("design:type", String)
], WhatsappTemplate.prototype, "language", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], WhatsappTemplate.prototype, "externalTemplateId", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'jsonb' }),
    __metadata("design:type", Array)
], WhatsappTemplate.prototype, "components", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: false }),
    __metadata("design:type", Boolean)
], WhatsappTemplate.prototype, "isDefault", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], WhatsappTemplate.prototype, "submittedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], WhatsappTemplate.prototype, "approvedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], WhatsappTemplate.prototype, "rejectionReason", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true, type: 'jsonb' }),
    __metadata("design:type", Object)
], WhatsappTemplate.prototype, "metadata", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ default: 0 }),
    __metadata("design:type", Number)
], WhatsappTemplate.prototype, "useCount", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], WhatsappTemplate.prototype, "lastUsedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], WhatsappTemplate.prototype, "createdById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Column)({ nullable: true }),
    __metadata("design:type", String)
], WhatsappTemplate.prototype, "updatedById", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.CreateDateColumn)(),
    __metadata("design:type", Date)
], WhatsappTemplate.prototype, "createdAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.UpdateDateColumn)(),
    __metadata("design:type", Date)
], WhatsappTemplate.prototype, "updatedAt", void 0);
__decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.DeleteDateColumn)(),
    __metadata("design:type", Date)
], WhatsappTemplate.prototype, "deletedAt", void 0);
WhatsappTemplate = __decorate([
    (0,typeorm__WEBPACK_IMPORTED_MODULE_1__.Entity)('whatsapp_templates')
], WhatsappTemplate);



/***/ }),

/***/ "./src/modules/whatsapp/enums/whatsapp-message-status.enum.ts":
/*!********************************************************************!*\
  !*** ./src/modules/whatsapp/enums/whatsapp-message-status.enum.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MESSAGE_STATUS_PROPERTIES: () => (/* binding */ MESSAGE_STATUS_PROPERTIES),
/* harmony export */   WhatsAppMessageStatus: () => (/* binding */ WhatsAppMessageStatus)
/* harmony export */ });
var WhatsAppMessageStatus;
(function (WhatsAppMessageStatus) {
    WhatsAppMessageStatus["DRAFT"] = "DRAFT";
    WhatsAppMessageStatus["QUEUED"] = "QUEUED";
    WhatsAppMessageStatus["SCHEDULED"] = "SCHEDULED";
    WhatsAppMessageStatus["PENDING"] = "PENDING";
    WhatsAppMessageStatus["SENT"] = "SENT";
    WhatsAppMessageStatus["DELIVERED"] = "DELIVERED";
    WhatsAppMessageStatus["READ"] = "READ";
    WhatsAppMessageStatus["FAILED"] = "FAILED";
    WhatsAppMessageStatus["CANCELED"] = "CANCELED";
    WhatsAppMessageStatus["BLOCKED"] = "BLOCKED";
    WhatsAppMessageStatus["EXPIRED"] = "EXPIRED";
    WhatsAppMessageStatus["DELETED"] = "DELETED";
    WhatsAppMessageStatus["UNDELIVERABLE"] = "UNDELIVERABLE";
    WhatsAppMessageStatus["UNKNOWN"] = "UNKNOWN";
    WhatsAppMessageStatus["PERMANENTLY_FAILED"] = "PERMANENTLY_FAILED";
    WhatsAppMessageStatus["RECEIVED"] = "RECEIVED";
})(WhatsAppMessageStatus || (WhatsAppMessageStatus = {}));
const MESSAGE_STATUS_PROPERTIES = {
    [WhatsAppMessageStatus.DRAFT]: {
        final: false,
        retryable: true,
        description: 'Message is drafted but not yet queued for sending',
    },
    [WhatsAppMessageStatus.QUEUED]: {
        final: false,
        retryable: true,
        description: 'Message is queued for sending',
    },
    [WhatsAppMessageStatus.SCHEDULED]: {
        final: false,
        retryable: true,
        description: 'Message is scheduled to be sent at a later time',
    },
    [WhatsAppMessageStatus.PENDING]: {
        final: false,
        retryable: true,
        description: 'Message is being processed for sending',
    },
    [WhatsAppMessageStatus.SENT]: {
        final: false,
        retryable: false,
        description: 'Message has been sent to WhatsApp servers',
    },
    [WhatsAppMessageStatus.DELIVERED]: {
        final: false,
        retryable: false,
        description: 'Message has been delivered to the recipient',
    },
    [WhatsAppMessageStatus.READ]: {
        final: true,
        retryable: false,
        description: 'Message has been read by the recipient',
    },
    [WhatsAppMessageStatus.FAILED]: {
        final: false,
        retryable: true,
        description: 'Message failed to send but can be retried',
    },
    [WhatsAppMessageStatus.CANCELED]: {
        final: true,
        retryable: false,
        description: 'Message was canceled before it could be sent',
    },
    [WhatsAppMessageStatus.BLOCKED]: {
        final: true,
        retryable: false,
        description: 'Message was blocked by WhatsApp',
    },
    [WhatsAppMessageStatus.EXPIRED]: {
        final: true,
        retryable: false,
        description: 'Message expired before it could be delivered',
    },
    [WhatsAppMessageStatus.DELETED]: {
        final: true,
        retryable: false,
        description: 'Message was deleted',
    },
    [WhatsAppMessageStatus.UNDELIVERABLE]: {
        final: true,
        retryable: false,
        description: 'Message cannot be delivered to the recipient',
    },
    [WhatsAppMessageStatus.UNKNOWN]: {
        final: false,
        retryable: false,
        description: 'Message status is unknown',
    },
    [WhatsAppMessageStatus.PERMANENTLY_FAILED]: {
        final: true,
        retryable: false,
        description: 'Message has permanently failed to send after max retries',
    },
    [WhatsAppMessageStatus.RECEIVED]: {
        final: false,
        retryable: false,
        description: 'Message has been received from a user',
    },
};


/***/ }),

/***/ "./src/modules/whatsapp/services/whatsapp-template.service.ts":
/*!********************************************************************!*\
  !*** ./src/modules/whatsapp/services/whatsapp-template.service.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WhatsappTemplateButtonType: () => (/* binding */ WhatsappTemplateButtonType),
/* harmony export */   WhatsappTemplateCategory: () => (/* binding */ WhatsappTemplateCategory),
/* harmony export */   WhatsappTemplateComponentType: () => (/* binding */ WhatsappTemplateComponentType),
/* harmony export */   WhatsappTemplateHeaderType: () => (/* binding */ WhatsappTemplateHeaderType),
/* harmony export */   WhatsappTemplateService: () => (/* binding */ WhatsappTemplateService),
/* harmony export */   WhatsappTemplateStatus: () => (/* binding */ WhatsappTemplateStatus)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _entities_whatsapp_template_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entities/whatsapp-template.entity */ "./src/modules/whatsapp/entities/whatsapp-template.entity.ts");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_4__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var WhatsappTemplateService_1;






var WhatsappTemplateStatus;
(function (WhatsappTemplateStatus) {
    WhatsappTemplateStatus["DRAFT"] = "draft";
    WhatsappTemplateStatus["PENDING_APPROVAL"] = "pending_approval";
    WhatsappTemplateStatus["APPROVED"] = "approved";
    WhatsappTemplateStatus["REJECTED"] = "rejected";
    WhatsappTemplateStatus["ACTIVE"] = "active";
    WhatsappTemplateStatus["INACTIVE"] = "inactive";
    WhatsappTemplateStatus["DELETED"] = "deleted";
})(WhatsappTemplateStatus || (WhatsappTemplateStatus = {}));
var WhatsappTemplateCategory;
(function (WhatsappTemplateCategory) {
    WhatsappTemplateCategory["ACCOUNT_UPDATE"] = "account_update";
    WhatsappTemplateCategory["PAYMENT_UPDATE"] = "payment_update";
    WhatsappTemplateCategory["PERSONAL_FINANCE_UPDATE"] = "personal_finance_update";
    WhatsappTemplateCategory["SHIPPING_UPDATE"] = "shipping_update";
    WhatsappTemplateCategory["RESERVATION_UPDATE"] = "reservation_update";
    WhatsappTemplateCategory["ISSUE_RESOLUTION"] = "issue_resolution";
    WhatsappTemplateCategory["APPOINTMENT_UPDATE"] = "appointment_update";
    WhatsappTemplateCategory["TRANSPORTATION_UPDATE"] = "transportation_update";
    WhatsappTemplateCategory["TICKET_UPDATE"] = "ticket_update";
    WhatsappTemplateCategory["ALERT_UPDATE"] = "alert_update";
    WhatsappTemplateCategory["AUTO_REPLY"] = "auto_reply";
    WhatsappTemplateCategory["TRANSACTIONAL"] = "transactional";
    WhatsappTemplateCategory["MARKETING"] = "marketing";
    WhatsappTemplateCategory["UTILITY"] = "utility";
    WhatsappTemplateCategory["AUTHENTICATION"] = "authentication";
})(WhatsappTemplateCategory || (WhatsappTemplateCategory = {}));
var WhatsappTemplateComponentType;
(function (WhatsappTemplateComponentType) {
    WhatsappTemplateComponentType["HEADER"] = "header";
    WhatsappTemplateComponentType["BODY"] = "body";
    WhatsappTemplateComponentType["FOOTER"] = "footer";
    WhatsappTemplateComponentType["BUTTONS"] = "buttons";
})(WhatsappTemplateComponentType || (WhatsappTemplateComponentType = {}));
var WhatsappTemplateHeaderType;
(function (WhatsappTemplateHeaderType) {
    WhatsappTemplateHeaderType["TEXT"] = "text";
    WhatsappTemplateHeaderType["IMAGE"] = "image";
    WhatsappTemplateHeaderType["VIDEO"] = "video";
    WhatsappTemplateHeaderType["DOCUMENT"] = "document";
    WhatsappTemplateHeaderType["LOCATION"] = "location";
})(WhatsappTemplateHeaderType || (WhatsappTemplateHeaderType = {}));
var WhatsappTemplateButtonType;
(function (WhatsappTemplateButtonType) {
    WhatsappTemplateButtonType["PHONE_NUMBER"] = "phone_number";
    WhatsappTemplateButtonType["URL"] = "url";
    WhatsappTemplateButtonType["QUICK_REPLY"] = "quick_reply";
})(WhatsappTemplateButtonType || (WhatsappTemplateButtonType = {}));
let WhatsappTemplateService = WhatsappTemplateService_1 = class WhatsappTemplateService {
    constructor(whatsappTemplateRepository, configService) {
        this.whatsappTemplateRepository = whatsappTemplateRepository;
        this.configService = configService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(WhatsappTemplateService_1.name);
    }
    async findById(id, organizationId) {
        const template = await this.whatsappTemplateRepository.findOne({
            where: { id, organizationId }
        });
        if (!template) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.NotFoundException(`WhatsApp template with ID "${id}" not found`);
        }
        return template;
    }
    async findByName(name, organizationId) {
        return this.whatsappTemplateRepository.findOne({
            where: { name, organizationId, status: WhatsappTemplateStatus.ACTIVE }
        });
    }
    async findAll(options) {
        const { organizationId, status, category, language, search, page = 1, limit = 25 } = options;
        const where = { organizationId };
        if (status) {
            where.status = Array.isArray(status) ? (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.In)(status) : status;
        }
        if (category) {
            where.category = Array.isArray(category) ? (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.In)(category) : category;
        }
        if (language) {
            where.language = language;
        }
        if (search) {
            where.name = (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.Like)(`%${search}%`);
        }
        const [items, total] = await this.whatsappTemplateRepository.findAndCount({
            where,
            order: { updatedAt: 'DESC' },
            skip: (page - 1) * limit,
            take: limit,
        });
        return {
            items,
            total,
            page,
            limit,
        };
    }
    async create(data) {
        this.validateTemplate(data);
        const existingTemplate = await this.whatsappTemplateRepository.findOne({
            where: {
                name: data.name,
                organizationId: data.organizationId,
                language: data.language
            }
        });
        if (existingTemplate) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException(`Template with name "${data.name}" and language "${data.language}" already exists`);
        }
        const template = this.whatsappTemplateRepository.create(Object.assign(Object.assign({}, data), { status: data.status || WhatsappTemplateStatus.DRAFT }));
        return this.whatsappTemplateRepository.save(template);
    }
    async update(id, organizationId, data) {
        const template = await this.findById(id, organizationId);
        if (template.status === WhatsappTemplateStatus.PENDING_APPROVAL) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Cannot update a template that is pending approval');
        }
        if (template.status === WhatsappTemplateStatus.APPROVED && data.components) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Cannot update components of an approved template. Create a new version instead.');
        }
        if (data.name && data.name !== template.name) {
            const existingTemplate = await this.whatsappTemplateRepository.findOne({
                where: {
                    name: data.name,
                    organizationId,
                    language: data.language || template.language,
                    id: (0,typeorm__WEBPACK_IMPORTED_MODULE_2__.Not)(id)
                }
            });
            if (existingTemplate) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException(`Template with name "${data.name}" and language "${data.language || template.language}" already exists`);
            }
        }
        if (data.components) {
            this.validateTemplate(Object.assign(Object.assign({}, template), data));
        }
        Object.assign(template, data);
        if (data.components &&
            (template.status === WhatsappTemplateStatus.REJECTED)) {
            template.status = WhatsappTemplateStatus.DRAFT;
            template.rejectionReason = undefined;
        }
        return this.whatsappTemplateRepository.save(template);
    }
    async submitForApproval(id, organizationId) {
        const template = await this.findById(id, organizationId);
        if (template.status !== WhatsappTemplateStatus.DRAFT) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException(`Only templates in DRAFT status can be submitted for approval`);
        }
        this.validateTemplate(template);
        template.status = WhatsappTemplateStatus.PENDING_APPROVAL;
        template.submittedAt = new Date();
        const updatedTemplate = await this.whatsappTemplateRepository.save(template);
        this.submitTemplateToWhatsAppAPI(updatedTemplate).catch(error => {
            this.logger.error(`Failed to submit template to WhatsApp API: ${error.message}`, error.stack);
        });
        return updatedTemplate;
    }
    async delete(id, organizationId) {
        const template = await this.findById(id, organizationId);
        if (template.status === WhatsappTemplateStatus.ACTIVE) {
            template.status = WhatsappTemplateStatus.INACTIVE;
            await this.whatsappTemplateRepository.save(template);
        }
        else {
            await this.whatsappTemplateRepository.softRemove(template);
        }
        if ([WhatsappTemplateStatus.APPROVED, WhatsappTemplateStatus.ACTIVE].includes(template.status)) {
            this.deleteTemplateFromWhatsAppAPI(template).catch(error => {
                this.logger.error(`Failed to delete template from WhatsApp API: ${error.message}`, error.stack);
            });
        }
    }
    async getAvailableLanguages() {
        return [
            { code: 'en', name: 'English' },
            { code: 'es', name: 'Spanish' },
            { code: 'pt_BR', name: 'Portuguese (Brazil)' },
            { code: 'fr', name: 'French' },
            { code: 'de', name: 'German' },
            { code: 'it', name: 'Italian' },
            { code: 'ar', name: 'Arabic' },
            { code: 'hi', name: 'Hindi' },
            { code: 'id', name: 'Indonesian' },
            { code: 'ru', name: 'Russian' },
            { code: 'zh_CN', name: 'Chinese (Simplified)' },
            { code: 'ja', name: 'Japanese' },
            { code: 'ko', name: 'Korean' },
        ];
    }
    processTemplateText(text, variables = {}) {
        if (!text)
            return '';
        let processed = text;
        for (const [key, value] of Object.entries(variables)) {
            const regex = new RegExp(`{{\\s*${key}\\s*}}`, 'g');
            processed = processed.replace(regex, String(value !== null && value !== void 0 ? value : ''));
        }
        return processed;
    }
    validateTemplate(template) {
        if (!template.components || !Array.isArray(template.components) || template.components.length === 0) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Template must have at least one component');
        }
        const bodyComponent = template.components.find(c => c.type === WhatsappTemplateComponentType.BODY);
        if (!bodyComponent) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Template must have a body component');
        }
        if (!bodyComponent.text) {
            throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Body component must have text');
        }
        const headerComponent = template.components.find(c => c.type === WhatsappTemplateComponentType.HEADER);
        if (headerComponent) {
            if (!headerComponent.format) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Header component must specify a format');
            }
            if (headerComponent.format === WhatsappTemplateHeaderType.TEXT && !headerComponent.text) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Text header must have text content');
            }
        }
        const buttonsComponent = template.components.find(c => c.type === WhatsappTemplateComponentType.BUTTONS);
        if (buttonsComponent && buttonsComponent.buttons) {
            if (buttonsComponent.buttons.length > 3) {
                throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Template can have a maximum of 3 buttons');
            }
            for (const button of buttonsComponent.buttons) {
                if (!button.type) {
                    throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Each button must have a type');
                }
                if (!button.text) {
                    throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Each button must have text');
                }
                if (button.type === WhatsappTemplateButtonType.URL && !button.url) {
                    throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('URL button must have a URL');
                }
                if (button.type === WhatsappTemplateButtonType.PHONE_NUMBER && !button.phoneNumber) {
                    throw new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.BadRequestException('Phone number button must have a phone number');
                }
            }
        }
    }
    async submitTemplateToWhatsAppAPI(template) {
        const apiKey = this.configService.get('WHATSAPP_API_KEY');
        const accountId = this.configService.get('WHATSAPP_ACCOUNT_ID');
        this.logger.log(`[Mock] Submitting template ${template.name} to WhatsApp API`);
        return {
            id: `${Date.now()}`,
            status: 'PENDING',
            category: template.category
        };
    }
    async deleteTemplateFromWhatsAppAPI(template) {
        this.logger.log(`[Mock] Deleting template ${template.name} from WhatsApp API`);
        return {
            success: true
        };
    }
    async syncTemplatesFromWhatsAppAPI(organizationId) {
        const pendingTemplates = await this.whatsappTemplateRepository.find({
            where: {
                organizationId,
                status: WhatsappTemplateStatus.PENDING_APPROVAL
            }
        });
        for (const template of pendingTemplates) {
            const mockApiResponse = {
                status: Math.random() > 0.3 ? 'APPROVED' : 'REJECTED',
                reason: 'This is a simulated response'
            };
            if (mockApiResponse.status === 'APPROVED') {
                template.status = WhatsappTemplateStatus.APPROVED;
                template.approvedAt = new Date();
            }
            else {
                template.status = WhatsappTemplateStatus.REJECTED;
                template.rejectionReason = mockApiResponse.reason;
            }
            await this.whatsappTemplateRepository.save(template);
        }
    }
};
WhatsappTemplateService = WhatsappTemplateService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_entities_whatsapp_template_entity__WEBPACK_IMPORTED_MODULE_3__.WhatsappTemplate)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository,
        _nestjs_config__WEBPACK_IMPORTED_MODULE_4__.ConfigService])
], WhatsappTemplateService);



/***/ }),

/***/ "./src/modules/whatsapp/services/whatsapp.services.ts":
/*!************************************************************!*\
  !*** ./src/modules/whatsapp/services/whatsapp.services.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WhatsappService: () => (/* binding */ WhatsappService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
/* harmony import */ var _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ "axios");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _entities_whatsapp_message_entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../entities/whatsapp-message.entity */ "./src/modules/whatsapp/entities/whatsapp-message.entity.ts");
/* harmony import */ var _entities_whatsapp_template_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../entities/whatsapp-template.entity */ "./src/modules/whatsapp/entities/whatsapp-template.entity.ts");
/* harmony import */ var _enums_whatsapp_message_status_enum__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../enums/whatsapp-message-status.enum */ "./src/modules/whatsapp/enums/whatsapp-message-status.enum.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var WhatsappService_1;









let WhatsappService = WhatsappService_1 = class WhatsappService {
    constructor(configService, eventEmitter, messageRepository, templateRepository) {
        this.configService = configService;
        this.eventEmitter = eventEmitter;
        this.messageRepository = messageRepository;
        this.templateRepository = templateRepository;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(WhatsappService_1.name);
        this.maxRetries = 3;
        this.client = axios__WEBPACK_IMPORTED_MODULE_5___default().create({
            baseURL: this.configService.get('WHATSAPP_API_URL'),
            headers: {
                'Authorization': `Bearer ${this.configService.get('WHATSAPP_API_TOKEN')}`,
                'Content-Type': 'application/json',
            },
            timeout: 10000,
        });
    }
    async sendAppointmentReminder(whatsappNumber, data) {
        try {
            const template = await this.templateRepository.findOne({
                where: { name: 'appointment_reminder' }
            });
            if (!template) {
                throw new Error('Appointment reminder template not found');
            }
            await this.sendMessage({
                to: whatsappNumber,
                template: 'appointment_reminder',
                parameters: {
                    header: data.organizationName,
                    body: {
                        patientName: data.patientName,
                        doctorName: data.doctorName,
                        dateTime: data.dateTime.toLocaleString(),
                        location: data.location
                    }
                },
                metadata: {
                    appointmentId: data.appointmentId,
                    type: 'APPOINTMENT_REMINDER'
                }
            });
        }
        catch (error) {
            this.logger.error(`Failed to send WhatsApp reminder to ${whatsappNumber}:`, error);
            throw error;
        }
    }
    async sendMessage(options) {
        try {
            const formattedNumber = this.formatPhoneNumber(options.to);
            if (!this.isValidPhoneNumber(formattedNumber)) {
                throw new Error(`Invalid phone number: ${options.to}`);
            }
            let messageData;
            if (options.template) {
                messageData = await this.prepareTemplateMessage(options);
            }
            else if (options.mediaUrl) {
                messageData = await this.prepareMediaMessage(options);
            }
            else {
                messageData = this.prepareTextMessage(options);
            }
            const message = this.messageRepository.create({
                to: formattedNumber,
                messageType: options.template ? 'template' : options.mediaUrl ? 'media' : 'text',
                content: messageData,
                metadata: options.metadata,
                status: this.mapWhatsAppStatus(_enums_whatsapp_message_status_enum__WEBPACK_IMPORTED_MODULE_8__.WhatsAppMessageStatus.PENDING),
                retryCount: 0,
            });
            await this.messageRepository.save(message);
            const response = await this.client.post('/messages', Object.assign({ messaging_product: 'whatsapp', recipient_type: 'individual', to: formattedNumber }, messageData));
            message.whatsappMessageId = response.data.messages[0].id;
            message.status = this.mapWhatsAppStatus(_enums_whatsapp_message_status_enum__WEBPACK_IMPORTED_MODULE_8__.WhatsAppMessageStatus.SENT);
            message.sentAt = new Date();
            await this.messageRepository.save(message);
            this.eventEmitter.emit('whatsapp.message.sent', message);
            return message;
        }
        catch (error) {
            this.logger.error('Error sending WhatsApp message:', error);
            throw error;
        }
    }
    async prepareTemplateMessage(options) {
        const template = await this.templateRepository.findOne({
            where: { name: options.template }
        });
        if (!template) {
            throw new Error(`Template not found: ${options.template}`);
        }
        return {
            type: 'template',
            template: {
                name: template.name,
                language: {
                    code: template.language
                },
                components: this.buildTemplateComponents(template, options.parameters)
            }
        };
    }
    async prepareMediaMessage(options) {
        if (!options.mediaType) {
            throw new Error('Media type is required for media messages');
        }
        return {
            type: options.mediaType.toLowerCase(),
            [options.mediaType.toLowerCase()]: {
                link: options.mediaUrl
            },
            text: options.text
        };
    }
    prepareTextMessage(options) {
        if (!options.text) {
            throw new Error('Text is required for text messages');
        }
        return {
            type: 'text',
            text: {
                body: options.text,
                preview_url: true
            }
        };
    }
    buildTemplateComponents(template, parameters) {
        const components = [];
        const headerComponent = template.components.find(c => c.type === _entities_whatsapp_template_entity__WEBPACK_IMPORTED_MODULE_7__.WhatsappTemplateComponentType.HEADER);
        if (headerComponent && (parameters === null || parameters === void 0 ? void 0 : parameters.header)) {
            components.push({
                type: 'header',
                parameters: this.formatParameters(headerComponent.format || _entities_whatsapp_template_entity__WEBPACK_IMPORTED_MODULE_7__.WhatsappTemplateHeaderType.TEXT, parameters.header)
            });
        }
        if (parameters === null || parameters === void 0 ? void 0 : parameters.body) {
            components.push({
                type: 'body',
                parameters: this.formatParameters('text', parameters.body)
            });
        }
        const buttonComponent = template.components.find(c => c.type === _entities_whatsapp_template_entity__WEBPACK_IMPORTED_MODULE_7__.WhatsappTemplateComponentType.BUTTONS);
        if ((buttonComponent === null || buttonComponent === void 0 ? void 0 : buttonComponent.buttons) && (parameters === null || parameters === void 0 ? void 0 : parameters.buttons)) {
            components.push({
                type: 'button',
                sub_type: 'quick_reply',
                index: 0,
                parameters: parameters.buttons
            });
        }
        return components;
    }
    formatParameters(type, value) {
        switch (type) {
            case 'text':
                return [{ type: 'text', text: value }];
            case 'image':
                return [{ type: 'image', image: { link: value } }];
            case 'document':
                return [{ type: 'document', document: { link: value } }];
            case 'video':
                return [{ type: 'video', video: { link: value } }];
            default:
                return [{ type: 'text', text: value }];
        }
    }
    async handleWebhook(data) {
        try {
            const { entry } = data;
            for (const e of entry) {
                for (const change of e.changes) {
                    if (change.value.messages) {
                        await this.handleIncomingMessages(change.value.messages);
                    }
                    if (change.value.statuses) {
                        await this.handleMessageStatuses(change.value.statuses);
                    }
                }
            }
        }
        catch (error) {
            this.logger.error('Error processing WhatsApp webhook:', error);
            throw error;
        }
    }
    async handleIncomingMessages(messages) {
        for (const message of messages) {
            try {
                const incomingMessage = this.messageRepository.create({
                    whatsappMessageId: message.id,
                    from: message.from,
                    messageType: message.type,
                    content: message,
                    status: this.mapWhatsAppStatus(_enums_whatsapp_message_status_enum__WEBPACK_IMPORTED_MODULE_8__.WhatsAppMessageStatus.RECEIVED),
                    receivedAt: new Date(),
                });
                await this.messageRepository.save(incomingMessage);
                this.eventEmitter.emit('whatsapp.message.received', incomingMessage);
            }
            catch (error) {
                this.logger.error('Error processing incoming WhatsApp message:', error);
            }
        }
    }
    async handleMessageStatuses(statuses) {
        for (const status of statuses) {
            try {
                const message = await this.messageRepository.findOne({
                    where: { whatsappMessageId: status.id }
                });
                if (message) {
                    message.status = this.mapWhatsAppStatus(status.status);
                    message.deliveredAt = status.status === 'delivered' ? new Date() : null;
                    message.readAt = status.status === 'read' ? new Date() : null;
                    await this.messageRepository.save(message);
                    this.eventEmitter.emit('whatsapp.message.status_updated', message);
                }
            }
            catch (error) {
                this.logger.error('Error processing WhatsApp message status:', error);
            }
        }
    }
    mapWhatsAppStatus(status) {
        const statusMapping = {
            'sent': _enums_whatsapp_message_status_enum__WEBPACK_IMPORTED_MODULE_8__.WhatsAppMessageStatus.SENT,
            'delivered': _enums_whatsapp_message_status_enum__WEBPACK_IMPORTED_MODULE_8__.WhatsAppMessageStatus.DELIVERED,
            'read': _enums_whatsapp_message_status_enum__WEBPACK_IMPORTED_MODULE_8__.WhatsAppMessageStatus.READ,
            'failed': _enums_whatsapp_message_status_enum__WEBPACK_IMPORTED_MODULE_8__.WhatsAppMessageStatus.FAILED,
            'pending': _enums_whatsapp_message_status_enum__WEBPACK_IMPORTED_MODULE_8__.WhatsAppMessageStatus.PENDING
        };
        const mappedStatus = statusMapping[status.toLowerCase()] || _enums_whatsapp_message_status_enum__WEBPACK_IMPORTED_MODULE_8__.WhatsAppMessageStatus.UNKNOWN;
        return mappedStatus;
    }
    formatPhoneNumber(phone) {
        const cleaned = phone.replace(/\D/g, '');
        if (!cleaned.startsWith('1') && cleaned.length === 10) {
            return `1${cleaned}`;
        }
        return cleaned;
    }
    isValidPhoneNumber(phone) {
        return /^\d{11,15}$/.test(phone);
    }
    async getMessageStatus(messageId) {
        try {
            return await this.messageRepository.findOne({
                where: { id: messageId }
            });
        }
        catch (error) {
            this.logger.error(`Error getting message status for ${messageId}:`, error);
            throw error;
        }
    }
    async retryFailedMessages() {
        try {
            const failedMessages = await this.messageRepository.find({
                where: {
                    status: _enums_whatsapp_message_status_enum__WEBPACK_IMPORTED_MODULE_8__.WhatsAppMessageStatus.FAILED,
                    retryCount: (0,typeorm__WEBPACK_IMPORTED_MODULE_3__.LessThan)(this.maxRetries)
                }
            });
            for (const message of failedMessages) {
                try {
                    const response = await this.client.post('/messages', message.content);
                    message.whatsappMessageId = response.data.messages[0].id;
                    message.status = this.mapWhatsAppStatus(_enums_whatsapp_message_status_enum__WEBPACK_IMPORTED_MODULE_8__.WhatsAppMessageStatus.SENT);
                    message.sentAt = new Date();
                    message.retryCount += 1;
                    await this.messageRepository.save(message);
                }
                catch (error) {
                    this.logger.error(`Error retrying message ${message.id}:`, error);
                    message.retryCount += 1;
                    message.lastError = error.message;
                    if (message.retryCount >= this.maxRetries) {
                        message.status = this.mapWhatsAppStatus(_enums_whatsapp_message_status_enum__WEBPACK_IMPORTED_MODULE_8__.WhatsAppMessageStatus.PERMANENTLY_FAILED);
                    }
                    await this.messageRepository.save(message);
                }
            }
        }
        catch (error) {
            this.logger.error('Error retrying failed messages:', error);
            throw error;
        }
    }
};
WhatsappService = WhatsappService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(2, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_entities_whatsapp_message_entity__WEBPACK_IMPORTED_MODULE_6__.WhatsAppMessage)),
    __param(3, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_entities_whatsapp_template_entity__WEBPACK_IMPORTED_MODULE_7__.WhatsappTemplate)),
    __metadata("design:paramtypes", [_nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigService,
        _nestjs_event_emitter__WEBPACK_IMPORTED_MODULE_4__.EventEmitter2,
        typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository])
], WhatsappService);



/***/ }),

/***/ "./src/shared/services/audit.service.ts":
/*!**********************************************!*\
  !*** ./src/shared/services/audit.service.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuditService: () => (/* binding */ AuditService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _modules_audit_entities_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../modules/audit/entities/audit-log.entity */ "./src/modules/audit/entities/audit-log.entity.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




let AuditService = class AuditService {
    constructor(auditLogRepository) {
        this.auditLogRepository = auditLogRepository;
    }
    async log(dto, request) {
        var _a, _b;
        const auditLog = this.auditLogRepository.create({
            action: dto.action,
            entityType: dto.entityType,
            entityId: dto.entityId.toString(),
            changes: dto.changes || {},
            metadata: Object.assign(Object.assign({}, dto.metadata), { ipAddress: dto.ipAddress || (request === null || request === void 0 ? void 0 : request.ip), userAgent: dto.userAgent || (request === null || request === void 0 ? void 0 : request.headers['user-agent']), timestamp: new Date() }),
            actorId: (_a = dto.actorId) === null || _a === void 0 ? void 0 : _a.toString(),
            organizationId: (_b = dto.organizationId) === null || _b === void 0 ? void 0 : _b.toString(),
        });
        return this.auditLogRepository.save(auditLog);
    }
    async getEntityAuditLogs(entityType, entityId, options = {}) {
        var _a;
        const query = this.auditLogRepository
            .createQueryBuilder('audit_log')
            .where('audit_log.entityType = :entityType', { entityType })
            .andWhere('audit_log.entityId = :entityId', { entityId: entityId.toString() });
        if (options.startDate) {
            query.andWhere('audit_log.createdAt >= :startDate', { startDate: options.startDate });
        }
        if (options.endDate) {
            query.andWhere('audit_log.createdAt <= :endDate', { endDate: options.endDate });
        }
        if ((_a = options.actions) === null || _a === void 0 ? void 0 : _a.length) {
            query.andWhere('audit_log.action IN (:...actions)', { actions: options.actions });
        }
        query
            .orderBy('audit_log.createdAt', 'DESC')
            .skip(options.offset || 0)
            .take(options.limit || 50);
        return query.getManyAndCount();
    }
    async getUserAuditLogs(actorId, options = {}) {
        var _a, _b;
        const query = this.auditLogRepository
            .createQueryBuilder('audit_log')
            .where('audit_log.actorId = :actorId', { actorId: actorId.toString() });
        if (options.startDate) {
            query.andWhere('audit_log.createdAt >= :startDate', { startDate: options.startDate });
        }
        if (options.endDate) {
            query.andWhere('audit_log.createdAt <= :endDate', { endDate: options.endDate });
        }
        if ((_a = options.actions) === null || _a === void 0 ? void 0 : _a.length) {
            query.andWhere('audit_log.action IN (:...actions)', { actions: options.actions });
        }
        if ((_b = options.entityTypes) === null || _b === void 0 ? void 0 : _b.length) {
            query.andWhere('audit_log.entityType IN (:...entityTypes)', { entityTypes: options.entityTypes });
        }
        query
            .orderBy('audit_log.createdAt', 'DESC')
            .skip(options.offset || 0)
            .take(options.limit || 50);
        return query.getManyAndCount();
    }
    async getOrganizationAuditLogs(organizationId, options = {}) {
        var _a, _b, _c;
        const query = this.auditLogRepository
            .createQueryBuilder('audit_log')
            .where('audit_log.organizationId = :organizationId', { organizationId: organizationId.toString() });
        if (options.startDate) {
            query.andWhere('audit_log.createdAt >= :startDate', { startDate: options.startDate });
        }
        if (options.endDate) {
            query.andWhere('audit_log.createdAt <= :endDate', { endDate: options.endDate });
        }
        if ((_a = options.actions) === null || _a === void 0 ? void 0 : _a.length) {
            query.andWhere('audit_log.action IN (:...actions)', { actions: options.actions });
        }
        if ((_b = options.entityTypes) === null || _b === void 0 ? void 0 : _b.length) {
            query.andWhere('audit_log.entityType IN (:...entityTypes)', { entityTypes: options.entityTypes });
        }
        if ((_c = options.actorIds) === null || _c === void 0 ? void 0 : _c.length) {
            query.andWhere('audit_log.actorId IN (:...actorIds)', {
                actorIds: options.actorIds.map(id => id.toString()),
            });
        }
        query
            .orderBy('audit_log.createdAt', 'DESC')
            .skip(options.offset || 0)
            .take(options.limit || 50);
        return query.getManyAndCount();
    }
    async cleanupOldLogs(retentionDays = 90) {
        const cutoffDate = new Date();
        cutoffDate.setDate(cutoffDate.getDate() - retentionDays);
        const result = await this.auditLogRepository
            .createQueryBuilder()
            .delete()
            .where('createdAt < :cutoffDate', { cutoffDate })
            .execute();
        return result.affected || 0;
    }
};
AuditService = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(0, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_1__.InjectRepository)(_modules_audit_entities_audit_log_entity__WEBPACK_IMPORTED_MODULE_3__.AuditLog)),
    __metadata("design:paramtypes", [typeorm__WEBPACK_IMPORTED_MODULE_2__.Repository])
], AuditService);



/***/ }),

/***/ "./src/shared/services/email.service.ts":
/*!**********************************************!*\
  !*** ./src/shared/services/email.service.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EmailService: () => (/* binding */ EmailService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
/* harmony import */ var _nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! typeorm */ "typeorm");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(typeorm__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! nodemailer */ "nodemailer");
/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! util */ "util");
/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var dns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! dns */ "dns");
/* harmony import */ var dns__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(dns__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _modules_notifications_entities_email_template_entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../modules/notifications/entities/email-template.entity */ "./src/modules/notifications/entities/email-template.entity.ts");
/* harmony import */ var _modules_notifications_entities_email_log_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../modules/notifications/entities/email-log.entity */ "./src/modules/notifications/entities/email-log.entity.ts");
/* harmony import */ var _modules_notifications_entities_email_queue_entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../modules/notifications/entities/email-queue.entity */ "./src/modules/notifications/entities/email-queue.entity.ts");
/* harmony import */ var _modules_notifications_enums_email_status_enum__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../modules/notifications/enums/email-status.enum */ "./src/modules/notifications/enums/email-status.enum.ts");
/* harmony import */ var _modules_domain_enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../modules/domain/enums/domain-verification-status.enum */ "./src/modules/domain/enums/domain-verification-status.enum.ts");
/* harmony import */ var _modules_domain_services_domain_verification_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../modules/domain/services/domain-verification.service */ "./src/modules/domain/services/domain-verification.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var EmailService_1;













let EmailService = EmailService_1 = class EmailService {
    constructor(configService, domainVerificationService, templateRepository, logRepository, queueRepository) {
        this.configService = configService;
        this.domainVerificationService = domainVerificationService;
        this.templateRepository = templateRepository;
        this.logRepository = logRepository;
        this.queueRepository = queueRepository;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(EmailService_1.name);
        this.maxRetries = 3;
        this.resolveTxt = (0,util__WEBPACK_IMPORTED_MODULE_5__.promisify)(dns__WEBPACK_IMPORTED_MODULE_6__.resolveTxt);
        this.transporter = nodemailer__WEBPACK_IMPORTED_MODULE_4__.createTransport({
            host: this.configService.get('SMTP_HOST'),
            port: this.configService.get('SMTP_PORT'),
            secure: this.configService.get('SMTP_SECURE'),
            auth: {
                user: this.configService.get('SMTP_USER'),
                pass: this.configService.get('SMTP_PASSWORD'),
            },
            pool: true,
            maxConnections: 5,
            rateDelta: 1000,
            rateLimit: 5,
        });
    }
    async send(notification) {
        return this.sendEmail({
            to: notification.recipient,
            subject: notification.title,
            template: notification.template,
            context: notification.data,
            metadata: { notificationId: notification.id }
        });
    }
    async sendEmail(options) {
        try {
            let htmlContent = '';
            let textContent = '';
            if (options.template) {
                const template = await this.templateRepository.findOne({
                    where: { name: options.template }
                });
                if (!template) {
                    throw new Error(`Email template ${options.template} not found`);
                }
                ({ html: htmlContent, text: textContent } = await this.processTemplate(template, options.context || {}));
            }
            const emailData = {
                from: this.configService.get('MAIL_FROM'),
                to: Array.isArray(options.to) ? options.to.join(',') : options.to,
                cc: options.cc,
                bcc: options.bcc,
                replyTo: options.replyTo,
                subject: options.subject,
                html: htmlContent,
                text: textContent || this.stripHtml(htmlContent),
                attachments: options.attachments,
                priority: options.priority || 'normal',
                headers: this.generateHeaders(options),
            };
            if (this.configService.get('EMAIL_QUEUE_ENABLED')) {
                await this.queueEmail(emailData, options.metadata);
                return true;
            }
            else {
                const result = await this.transporter.sendMail(emailData);
                await this.logEmail(emailData, result, options.metadata);
                return true;
            }
        }
        catch (error) {
            this.logger.error('Error sending email:', error);
            throw error;
        }
    }
    async processTemplate(template, context) {
        try {
            let html = template.htmlContent;
            let text = template.textContent || '';
            Object.entries(context).forEach(([key, value]) => {
                const regex = new RegExp(`{{\\s*${key}\\s*}}`, 'g');
                html = html.replace(regex, String(value));
                text = text.replace(regex, String(value));
            });
            return { html, text };
        }
        catch (error) {
            this.logger.error('Error processing email template:', error);
            throw error;
        }
    }
    async queueEmail(emailData, metadata) {
        const queueEntry = this.queueRepository.create({
            data: emailData,
            metadata,
            status: _modules_notifications_enums_email_status_enum__WEBPACK_IMPORTED_MODULE_10__.EmailStatus.QUEUED,
            priority: emailData.priority === 'high' ? 1 : emailData.priority === 'low' ? 3 : 2,
            attempts: 0,
            maxAttempts: this.maxRetries,
        });
        await this.queueRepository.save(queueEntry);
    }
    async logEmail(emailData, result, metadata) {
        const log = this.logRepository.create({
            recipient: emailData.to,
            subject: emailData.subject,
            template: emailData.template,
            metadata,
            messageId: result.messageId,
            status: _modules_notifications_enums_email_status_enum__WEBPACK_IMPORTED_MODULE_10__.EmailStatus.SENT,
            sentAt: new Date(),
        });
        await this.logRepository.save(log);
    }
    stripHtml(html) {
        return html.replace(/<[^>]*>/g, '')
            .replace(/\s+/g, ' ')
            .trim();
    }
    generateHeaders(options) {
        const headers = {
            'X-Message-ID': `${Date.now()}-${Math.random().toString(36).substring(2, 15)}`,
            'X-Priority': options.priority === 'high' ? '1' : options.priority === 'low' ? '5' : '3',
            'X-Environment': this.configService.get('NODE_ENV', 'development'),
            'X-Application': this.configService.get('APP_NAME', 'DefaultAppName'),
        };
        if (options.metadata) {
            headers['X-Metadata'] = Buffer.from(JSON.stringify(options.metadata)).toString('base64');
        }
        return headers;
    }
    async verifyEmailDomain(domain) {
        try {
            const verificationStatus = await this.domainVerificationService.getDomainVerificationStatus(domain);
            if (!verificationStatus) {
                throw new Error(`Domain ${domain} not found`);
            }
            const [hasDmarc, hasSpf] = await Promise.all([
                this.verifyDmarcRecord(domain),
                this.verifySpfRecord(domain)
            ]);
            if (!hasDmarc) {
                this.logger.warn(`DMARC record not found for domain ${domain}`);
            }
            if (!hasSpf) {
                this.logger.warn(`SPF record not found for domain ${domain}`);
            }
            return verificationStatus.status === _modules_domain_enums_domain_verification_status_enum__WEBPACK_IMPORTED_MODULE_11__.DomainVerificationStatus.VERIFIED && hasDmarc && hasSpf;
        }
        catch (error) {
            this.logger.error(`Error verifying email domain ${domain}:`, error);
            throw error;
        }
    }
    async verifyDmarcRecord(domain) {
        try {
            const records = await this.resolveTxt(`_dmarc.${domain}`);
            return records.some(record => record.join('').toLowerCase().includes('v=dmarc1'));
        }
        catch (error) {
            return false;
        }
    }
    async verifySpfRecord(domain) {
        try {
            const records = await this.resolveTxt(domain);
            return records.some(record => record.join('').toLowerCase().includes('v=spf1'));
        }
        catch (error) {
            return false;
        }
    }
    async getEmailStatus(messageId) {
        try {
            return await this.logRepository.findOne({
                where: { messageId }
            });
        }
        catch (error) {
            this.logger.error(`Error getting email status for message ${messageId}:`, error);
            throw error;
        }
    }
    async processEmailQueue(batchSize = 10) {
        try {
            const queuedEmails = await this.queueRepository.find({
                where: {
                    status: _modules_notifications_enums_email_status_enum__WEBPACK_IMPORTED_MODULE_10__.EmailStatus.QUEUED,
                    attempts: (0,typeorm__WEBPACK_IMPORTED_MODULE_3__.LessThan)(this.maxRetries)
                },
                order: {
                    createdAt: 'ASC'
                },
                take: batchSize
            });
            for (const queuedEmail of queuedEmails) {
                try {
                    const result = await this.transporter.sendMail(queuedEmail.data);
                    await this.logEmail(queuedEmail.data, result, queuedEmail.metadata);
                    queuedEmail.status = _modules_notifications_enums_email_status_enum__WEBPACK_IMPORTED_MODULE_10__.EmailStatus.SENT;
                    queuedEmail.sentAt = new Date();
                    await this.queueRepository.save(queuedEmail);
                }
                catch (error) {
                    queuedEmail.attempts += 1;
                    queuedEmail.lastError = error.message;
                    queuedEmail.status = queuedEmail.attempts >= this.maxRetries
                        ? _modules_notifications_enums_email_status_enum__WEBPACK_IMPORTED_MODULE_10__.EmailStatus.FAILED
                        : _modules_notifications_enums_email_status_enum__WEBPACK_IMPORTED_MODULE_10__.EmailStatus.QUEUED;
                    await this.queueRepository.save(queuedEmail);
                }
            }
        }
        catch (error) {
            this.logger.error('Error processing email queue:', error);
            throw error;
        }
    }
    async cleanupEmailQueue(days = 30) {
        try {
            const cutoffDate = new Date();
            cutoffDate.setDate(cutoffDate.getDate() - days);
            await this.queueRepository.delete({
                status: (0,typeorm__WEBPACK_IMPORTED_MODULE_3__.In)([_modules_notifications_enums_email_status_enum__WEBPACK_IMPORTED_MODULE_10__.EmailStatus.SENT, _modules_notifications_enums_email_status_enum__WEBPACK_IMPORTED_MODULE_10__.EmailStatus.FAILED]),
                updatedAt: (0,typeorm__WEBPACK_IMPORTED_MODULE_3__.LessThan)(cutoffDate)
            });
        }
        catch (error) {
            this.logger.error('Error cleaning up email queue:', error);
            throw error;
        }
    }
};
EmailService = EmailService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __param(2, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_modules_notifications_entities_email_template_entity__WEBPACK_IMPORTED_MODULE_7__.EmailTemplate)),
    __param(3, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_modules_notifications_entities_email_log_entity__WEBPACK_IMPORTED_MODULE_8__.EmailLog)),
    __param(4, (0,_nestjs_typeorm__WEBPACK_IMPORTED_MODULE_2__.InjectRepository)(_modules_notifications_entities_email_queue_entity__WEBPACK_IMPORTED_MODULE_9__.EmailQueue)),
    __metadata("design:paramtypes", [_nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigService,
        _modules_domain_services_domain_verification_service__WEBPACK_IMPORTED_MODULE_12__.DomainVerificationService,
        typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository,
        typeorm__WEBPACK_IMPORTED_MODULE_3__.Repository])
], EmailService);



/***/ }),

/***/ "./src/shared/services/push-notification.service.ts":
/*!**********************************************************!*\
  !*** ./src/shared/services/push-notification.service.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PushNotificationService: () => (/* binding */ PushNotificationService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase-admin */ "firebase-admin");
/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(firebase_admin__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var PushNotificationService_1;



let PushNotificationService = PushNotificationService_1 = class PushNotificationService {
    constructor(configService) {
        this.configService = configService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(PushNotificationService_1.name);
        if (!firebase_admin__WEBPACK_IMPORTED_MODULE_2__.apps.length) {
            this.firebaseApp = firebase_admin__WEBPACK_IMPORTED_MODULE_2__.initializeApp({
                credential: firebase_admin__WEBPACK_IMPORTED_MODULE_2__.credential.cert({
                    projectId: this.configService.get('FIREBASE_PROJECT_ID'),
                    clientEmail: this.configService.get('FIREBASE_CLIENT_EMAIL'),
                    privateKey: (this.configService.get('FIREBASE_PRIVATE_KEY') || '').replace(/\\n/g, '\n'),
                }),
                databaseURL: this.configService.get('FIREBASE_DATABASE_URL'),
            });
        }
        else {
            this.firebaseApp = firebase_admin__WEBPACK_IMPORTED_MODULE_2__.apps[0];
        }
    }
    async send(notification) {
        try {
            const { recipient, content, subject, metadata } = notification;
            if (!recipient.fcmToken) {
                throw new Error('Recipient FCM token not found');
            }
            const message = {
                notification: {
                    title: subject,
                    body: this.formatContent(content),
                },
                data: this.prepareData(metadata),
                token: recipient.fcmToken,
                android: this.getAndroidConfig(metadata),
                apns: this.getApnsConfig(metadata),
                webpush: this.getWebPushConfig(metadata),
            };
            const response = await this.firebaseApp.messaging().send(message);
            this.logger.debug(`Push notification sent: ${response}`);
        }
        catch (error) {
            this.logger.error('Failed to send push notification:', error);
            throw new Error(`Push notification delivery failed: ${error.message}`);
        }
    }
    formatContent(content) {
        return content.replace(/<[^>]*>/g, '').substring(0, 1000);
    }
    prepareData(metadata = {}) {
        const data = {};
        Object.entries(metadata || {}).forEach(([key, value]) => {
            if (typeof value !== 'undefined' && value !== null) {
                data[key] = String(value);
            }
        });
        return data;
    }
    getAndroidConfig(metadata = {}) {
        return {
            priority: 'high',
            notification: {
                icon: (metadata === null || metadata === void 0 ? void 0 : metadata.androidIcon) || 'default_icon',
                color: (metadata === null || metadata === void 0 ? void 0 : metadata.androidColor) || '#000000',
                clickAction: (metadata === null || metadata === void 0 ? void 0 : metadata.androidClickAction) || 'FLUTTER_NOTIFICATION_CLICK',
            },
            data: this.prepareData(metadata === null || metadata === void 0 ? void 0 : metadata.androidData),
        };
    }
    getApnsConfig(metadata = {}) {
        return {
            payload: Object.assign({ aps: {
                    alert: {
                        title: metadata === null || metadata === void 0 ? void 0 : metadata.apnsTitle,
                        body: metadata === null || metadata === void 0 ? void 0 : metadata.apnsBody,
                    },
                    badge: (metadata === null || metadata === void 0 ? void 0 : metadata.apnsBadge) || 1,
                    sound: (metadata === null || metadata === void 0 ? void 0 : metadata.apnsSound) || 'default',
                } }, this.prepareData(metadata === null || metadata === void 0 ? void 0 : metadata.apnsData)),
        };
    }
    getWebPushConfig(metadata = {}) {
        return {
            notification: {
                icon: metadata === null || metadata === void 0 ? void 0 : metadata.webIcon,
                badge: metadata === null || metadata === void 0 ? void 0 : metadata.webBadge,
                actions: metadata === null || metadata === void 0 ? void 0 : metadata.webActions,
            },
            data: this.prepareData(metadata === null || metadata === void 0 ? void 0 : metadata.webData),
        };
    }
    async sendBatch(notifications) {
        try {
            const messages = notifications.map(notification => ({
                token: notification.recipient.fcmToken,
                notification: {
                    title: notification.subject,
                    body: this.formatContent(notification.content),
                },
                data: this.prepareData(notification.metadata),
            }));
            return await this.firebaseApp.messaging().sendAll(messages);
        }
        catch (error) {
            this.logger.error('Failed to send batch push notifications:', error);
            throw new Error(`Batch push notification delivery failed: ${error.message}`);
        }
    }
    async subscribeTopic(tokens, topic) {
        try {
            await this.firebaseApp.messaging().subscribeToTopic(tokens, topic);
        }
        catch (error) {
            this.logger.error(`Failed to subscribe tokens to topic ${topic}:`, error);
            throw new Error(`Topic subscription failed: ${error.message}`);
        }
    }
    async unsubscribeTopic(tokens, topic) {
        try {
            await this.firebaseApp.messaging().unsubscribeFromTopic(tokens, topic);
        }
        catch (error) {
            this.logger.error(`Failed to unsubscribe tokens from topic ${topic}:`, error);
            throw new Error(`Topic unsubscription failed: ${error.message}`);
        }
    }
};
PushNotificationService = PushNotificationService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigService])
], PushNotificationService);



/***/ }),

/***/ "./src/shared/services/sms.service.ts":
/*!********************************************!*\
  !*** ./src/shared/services/sms.service.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SmsService: () => (/* binding */ SmsService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var twilio__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! twilio */ "twilio");
/* harmony import */ var twilio__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(twilio__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var SmsService_1;



let SmsService = SmsService_1 = class SmsService {
    constructor(configService) {
        this.configService = configService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(SmsService_1.name);
        const accountSid = this.configService.get('TWILIO_ACCOUNT_SID');
        const authToken = this.configService.get('TWILIO_AUTH_TOKEN');
        this.twilioClient = twilio__WEBPACK_IMPORTED_MODULE_2___default()(accountSid, authToken);
        this.fromNumber = this.configService.get('TWILIO_FROM_NUMBER') || '';
        if (!this.fromNumber) {
            throw new Error('TWILIO_FROM_NUMBER is not defined in the configuration');
        }
    }
    async send(notification) {
        try {
            const { recipient, content } = notification;
            const toNumber = this.formatPhoneNumber(recipient.phoneNumber);
            const smsContent = this.formatContent(content);
            const message = await this.twilioClient.messages.create(Object.assign({ body: smsContent, from: this.fromNumber, to: toNumber }, this.getOptionalParams(notification.metadata)));
            this.logger.debug(`SMS sent to ${toNumber}: ${message.sid}`);
        }
        catch (error) {
            this.logger.error('Failed to send SMS:', error);
            throw new Error(`SMS delivery failed: ${error.message}`);
        }
    }
    formatPhoneNumber(phoneNumber) {
        const cleaned = phoneNumber.replace(/\D/g, '');
        if (!cleaned.startsWith('1') && cleaned.length === 10) {
            return `+1${cleaned}`;
        }
        return `+${cleaned}`;
    }
    formatContent(content) {
        let smsContent = content.replace(/<[^>]*>/g, '');
        smsContent = smsContent.replace(/\s+/g, ' ').trim();
        if (smsContent.length > 160) {
            smsContent = smsContent.substring(0, 157) + '...';
        }
        return smsContent;
    }
    getOptionalParams(metadata = {}) {
        const params = {};
        if (metadata === null || metadata === void 0 ? void 0 : metadata.statusCallback) {
            params.statusCallback = metadata.statusCallback;
        }
        if (metadata === null || metadata === void 0 ? void 0 : metadata.mediaUrl) {
            params.mediaUrl = metadata.mediaUrl;
        }
        return params;
    }
    async getDeliveryStatus(messageSid) {
        try {
            const message = await this.twilioClient.messages(messageSid).fetch();
            return {
                status: message.status,
                error: message.errorMessage,
                dateCreated: message.dateCreated,
                dateUpdated: message.dateUpdated
            };
        }
        catch (error) {
            this.logger.error(`Failed to get SMS status for ${messageSid}:`, error);
            throw new Error(`Failed to get SMS status: ${error.message}`);
        }
    }
};
SmsService = SmsService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigService])
], SmsService);



/***/ }),

/***/ "./src/shared/services/webhook.service.ts":
/*!************************************************!*\
  !*** ./src/shared/services/webhook.service.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WebhookService: () => (/* binding */ WebhookService)
/* harmony export */ });
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ "axios");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! crypto */ "crypto");
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_3__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var WebhookService_1;




const SENSITIVE_FIELDS = ['password', 'token', 'secret', 'key', 'auth', 'credentials'];
let WebhookService = WebhookService_1 = class WebhookService {
    constructor(configService) {
        this.configService = configService;
        this.logger = new _nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Logger(WebhookService_1.name);
        this.axiosInstance = axios__WEBPACK_IMPORTED_MODULE_2___default().create({
            timeout: this.configService.get('WEBHOOK_TIMEOUT', 5000),
            headers: {
                'Content-Type': 'application/json',
                'User-Agent': `${this.configService.get('APP_NAME', 'NotificationService')}/1.0`,
            },
            validateStatus: (status) => status >= 200 && status < 300,
        });
        this.defaultConfig = {
            method: 'POST',
            timeout: 5000,
            retryAttempts: 3,
            retryDelay: 1000,
            validateResponse: true,
        };
        this.axiosInstance.interceptors.request.use((config) => {
            config.metadata = { startTime: Date.now() };
            return config;
        }, (error) => {
            return Promise.reject(error);
        });
        this.axiosInstance.interceptors.response.use((response) => {
            var _a;
            const metadata = response.config.metadata;
            const duration = Date.now() - ((_a = metadata === null || metadata === void 0 ? void 0 : metadata.startTime) !== null && _a !== void 0 ? _a : Date.now());
            this.logger.debug(`Webhook request completed in ${duration}ms`);
            return response;
        }, (error) => {
            const duration = Date.now() - error.config.metadata.startTime;
            this.logger.error(`Webhook request failed after ${duration}ms: ${error.message}`);
            return Promise.reject(error);
        });
    }
    async send(notification) {
        var _a, _b, _c, _d, _e, _f;
        const startTime = Date.now();
        const webhookConfig = this.getWebhookConfig(notification);
        let attempt = 0;
        let lastError = null;
        while (attempt < ((_b = (_a = webhookConfig.retryAttempts) !== null && _a !== void 0 ? _a : this.defaultConfig.retryAttempts) !== null && _b !== void 0 ? _b : 3)) {
            try {
                const response = await this.makeRequest(notification, webhookConfig);
                const duration = Date.now() - startTime;
                if (webhookConfig.validateResponse && !this.isValidResponse(response)) {
                    throw new Error('Invalid response received from webhook endpoint');
                }
                return {
                    success: true,
                    statusCode: response.status,
                    retryCount: attempt,
                    duration,
                };
            }
            catch (error) {
                attempt++;
                lastError = error;
                this.logger.warn(`Webhook delivery attempt ${attempt} failed for notification ${notification.id}:`, error.message);
                if (attempt < ((_d = ((_c = webhookConfig.retryAttempts) !== null && _c !== void 0 ? _c : this.defaultConfig.retryAttempts)) !== null && _d !== void 0 ? _d : 3)) {
                    await this.delay(((_f = ((_e = webhookConfig.retryDelay) !== null && _e !== void 0 ? _e : this.defaultConfig.retryDelay)) !== null && _f !== void 0 ? _f : 1000) * Math.pow(2, attempt - 1));
                }
            }
        }
        return {
            success: false,
            error: (lastError === null || lastError === void 0 ? void 0 : lastError.message) || 'Unknown error',
            retryCount: attempt,
            duration: Date.now() - startTime,
        };
    }
    async makeRequest(notification, config) {
        var _a;
        const payload = this.preparePayload(notification);
        const signature = this.generateSignature(payload, config.secret);
        const requestId = crypto__WEBPACK_IMPORTED_MODULE_3__.randomUUID();
        const requestConfig = {
            method: config.method,
            url: config.url,
            data: payload,
            timeout: config.timeout,
            headers: Object.assign(Object.assign({}, config.headers), { 'X-Webhook-Signature': signature, 'X-Notification-ID': notification.id, 'X-Request-ID': requestId, 'X-Timestamp': new Date().toISOString() }),
        };
        try {
            return await this.axiosInstance.request(requestConfig);
        }
        catch (error) {
            if (axios__WEBPACK_IMPORTED_MODULE_2___default().isAxiosError(error)) {
                const responseData = (_a = error.response) === null || _a === void 0 ? void 0 : _a.data;
                throw new Error(`Webhook request failed: ${error.message}. Response: ${JSON.stringify(responseData)}`);
            }
            throw error;
        }
    }
    generateSignature(payload, secret) {
        if (!secret)
            return '';
        return crypto__WEBPACK_IMPORTED_MODULE_3__.createHmac('sha256', secret)
            .update(JSON.stringify(payload))
            .digest('hex');
    }
    preparePayload(notification) {
        const basePayload = {
            id: notification.id,
            type: notification.type,
            subject: notification.subject,
            content: notification.content,
            recipient: this.filterSensitiveData(notification.recipient),
            metadata: notification.metadata,
            timestamp: new Date().toISOString(),
            version: '1.0',
            context: notification.context ? this.filterSensitiveData(notification.context) : undefined,
        };
        if (notification.context) {
            basePayload['context'] = this.filterSensitiveData(notification.context);
        }
        return basePayload;
    }
    filterSensitiveData(data) {
        const filtered = {};
        for (const [key, value] of Object.entries(data)) {
            if (SENSITIVE_FIELDS.some(field => key.toLowerCase().includes(field))) {
                continue;
            }
            if (value && typeof value === 'object' && !Array.isArray(value)) {
                filtered[key] = this.filterSensitiveData(value);
            }
            else {
                filtered[key] = value;
            }
        }
        return filtered;
    }
    getWebhookConfig(notification) {
        const webhookUrl = this.getWebhookUrl(notification);
        if (!webhookUrl) {
            throw new Error('No webhook URL configured for notification');
        }
        return Object.assign(Object.assign({}, this.defaultConfig), { url: webhookUrl, secret: this.configService.get('WEBHOOK_SECRET'), headers: this.getCustomHeaders(notification) });
    }
    getWebhookUrl(notification) {
        var _a;
        if ((_a = notification.metadata) === null || _a === void 0 ? void 0 : _a.webhookUrl) {
            return notification.metadata.webhookUrl;
        }
        const typeSpecificUrl = this.configService.get(`WEBHOOK_URL_${notification.type}`);
        if (typeSpecificUrl) {
            return typeSpecificUrl;
        }
        return this.configService.get('WEBHOOK_URL') || '';
    }
    getCustomHeaders(notification) {
        const customHeaders = {};
        if (notification.type) {
            customHeaders['X-Notification-Type'] = notification.type;
        }
        if (notification.organizationId) {
            customHeaders['X-Organization-ID'] = notification.organizationId;
        }
        return customHeaders;
    }
    isValidResponse(response) {
        return response.status >= 200 && response.status < 300;
    }
    delay(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
};
WebhookService = WebhookService_1 = __decorate([
    (0,_nestjs_common__WEBPACK_IMPORTED_MODULE_0__.Injectable)(),
    __metadata("design:paramtypes", [_nestjs_config__WEBPACK_IMPORTED_MODULE_1__.ConfigService])
], WebhookService);



/***/ }),

/***/ "./src/utils/slug.util.ts":
/*!********************************!*\
  !*** ./src/utils/slug.util.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   generateRandomString: () => (/* binding */ generateRandomString),
/* harmony export */   generateSlug: () => (/* binding */ generateSlug),
/* harmony export */   isValidSlug: () => (/* binding */ isValidSlug),
/* harmony export */   makeSlugUnique: () => (/* binding */ makeSlugUnique)
/* harmony export */ });
function generateSlug(text, options = {}) {
    const { lowercase = true, separator = '-', removeStopWords = true, maxLength = 100 } = options;
    const stopWords = new Set([
        'a', 'an', 'and', 'are', 'as', 'at', 'be', 'by', 'for',
        'from', 'has', 'he', 'in', 'is', 'it', 'its', 'of', 'on',
        'that', 'the', 'to', 'was', 'were', 'will', 'with'
    ]);
    let slug = lowercase ? text.toLowerCase() : text;
    if (removeStopWords) {
        slug = slug
            .split(' ')
            .filter(word => !stopWords.has(word.toLowerCase()))
            .join(' ');
    }
    slug = slug
        .normalize('NFD')
        .replace(/[\u0300-\u036f]/g, '')
        .replace(/[^a-zA-Z0-9\s-]/g, '')
        .replace(/\s+/g, separator)
        .replace(new RegExp(`${separator}+`, 'g'), separator)
        .replace(new RegExp(`^${separator}+|${separator}+$`, 'g'), '');
    if (maxLength && slug.length > maxLength) {
        const truncated = slug.substring(0, maxLength);
        const lastSeparator = truncated.lastIndexOf(separator);
        if (lastSeparator !== -1) {
            slug = truncated.substring(0, lastSeparator);
        }
        else {
            slug = truncated;
        }
    }
    return slug;
}
function generateRandomString(length = 6) {
    const characters = 'abcdefghijklmnopqrstuvwxyz0123456789';
    let result = '';
    for (let i = 0; i < length; i++) {
        result += characters.charAt(Math.floor(Math.random() * characters.length));
    }
    return result;
}
function makeSlugUnique(slug, existingSlugs) {
    if (!existingSlugs.includes(slug)) {
        return slug;
    }
    let counter = 1;
    let uniqueSlug = slug;
    while (existingSlugs.includes(uniqueSlug)) {
        uniqueSlug = `${slug}-${generateRandomString(4)}`;
        counter++;
    }
    return uniqueSlug;
}
function isValidSlug(slug) {
    const slugRegex = /^[a-z0-9]+(?:-[a-z0-9]+)*$/;
    return slugRegex.test(slug);
}


/***/ }),

/***/ "../node_modules/@aws-crypto/crc32/build/module/aws_crc32.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@aws-crypto/crc32/build/module/aws_crc32.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AwsCrc32: () => (/* binding */ AwsCrc32)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "tslib");
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tslib__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-crypto/util */ "../node_modules/@aws-crypto/util/build/module/index.js");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ "../node_modules/@aws-crypto/crc32/build/module/index.js");
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0



var AwsCrc32 = /** @class */ (function () {
    function AwsCrc32() {
        this.crc32 = new _index__WEBPACK_IMPORTED_MODULE_2__.Crc32();
    }
    AwsCrc32.prototype.update = function (toHash) {
        if ((0,_aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__.isEmptyData)(toHash))
            return;
        this.crc32.update((0,_aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__.convertToBuffer)(toHash));
    };
    AwsCrc32.prototype.digest = function () {
        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {
            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {
                return [2 /*return*/, (0,_aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__.numToUint8)(this.crc32.digest())];
            });
        });
    };
    AwsCrc32.prototype.reset = function () {
        this.crc32 = new _index__WEBPACK_IMPORTED_MODULE_2__.Crc32();
    };
    return AwsCrc32;
}());

//# sourceMappingURL=aws_crc32.js.map

/***/ }),

/***/ "../node_modules/@aws-crypto/crc32/build/module/index.js":
/*!***************************************************************!*\
  !*** ../node_modules/@aws-crypto/crc32/build/module/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AwsCrc32: () => (/* reexport safe */ _aws_crc32__WEBPACK_IMPORTED_MODULE_2__.AwsCrc32),
/* harmony export */   Crc32: () => (/* binding */ Crc32),
/* harmony export */   crc32: () => (/* binding */ crc32)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "tslib");
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tslib__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-crypto/util */ "../node_modules/@aws-crypto/util/build/module/index.js");
/* harmony import */ var _aws_crc32__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./aws_crc32 */ "../node_modules/@aws-crypto/crc32/build/module/aws_crc32.js");


function crc32(data) {
    return new Crc32().update(data).digest();
}
var Crc32 = /** @class */ (function () {
    function Crc32() {
        this.checksum = 0xffffffff;
    }
    Crc32.prototype.update = function (data) {
        var e_1, _a;
        try {
            for (var data_1 = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__values)(data), data_1_1 = data_1.next(); !data_1_1.done; data_1_1 = data_1.next()) {
                var byte = data_1_1.value;
                this.checksum =
                    (this.checksum >>> 8) ^ lookupTable[(this.checksum ^ byte) & 0xff];
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (data_1_1 && !data_1_1.done && (_a = data_1.return)) _a.call(data_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return this;
    };
    Crc32.prototype.digest = function () {
        return (this.checksum ^ 0xffffffff) >>> 0;
    };
    return Crc32;
}());

// prettier-ignore
var a_lookUpTable = [
    0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA,
    0x076DC419, 0x706AF48F, 0xE963A535, 0x9E6495A3,
    0x0EDB8832, 0x79DCB8A4, 0xE0D5E91E, 0x97D2D988,
    0x09B64C2B, 0x7EB17CBD, 0xE7B82D07, 0x90BF1D91,
    0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,
    0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7,
    0x136C9856, 0x646BA8C0, 0xFD62F97A, 0x8A65C9EC,
    0x14015C4F, 0x63066CD9, 0xFA0F3D63, 0x8D080DF5,
    0x3B6E20C8, 0x4C69105E, 0xD56041E4, 0xA2677172,
    0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,
    0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940,
    0x32D86CE3, 0x45DF5C75, 0xDCD60DCF, 0xABD13D59,
    0x26D930AC, 0x51DE003A, 0xC8D75180, 0xBFD06116,
    0x21B4F4B5, 0x56B3C423, 0xCFBA9599, 0xB8BDA50F,
    0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,
    0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D,
    0x76DC4190, 0x01DB7106, 0x98D220BC, 0xEFD5102A,
    0x71B18589, 0x06B6B51F, 0x9FBFE4A5, 0xE8B8D433,
    0x7807C9A2, 0x0F00F934, 0x9609A88E, 0xE10E9818,
    0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,
    0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E,
    0x6C0695ED, 0x1B01A57B, 0x8208F4C1, 0xF50FC457,
    0x65B0D9C6, 0x12B7E950, 0x8BBEB8EA, 0xFCB9887C,
    0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3, 0xFBD44C65,
    0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,
    0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB,
    0x4369E96A, 0x346ED9FC, 0xAD678846, 0xDA60B8D0,
    0x44042D73, 0x33031DE5, 0xAA0A4C5F, 0xDD0D7CC9,
    0x5005713C, 0x270241AA, 0xBE0B1010, 0xC90C2086,
    0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,
    0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4,
    0x59B33D17, 0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD,
    0xEDB88320, 0x9ABFB3B6, 0x03B6E20C, 0x74B1D29A,
    0xEAD54739, 0x9DD277AF, 0x04DB2615, 0x73DC1683,
    0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,
    0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1,
    0xF00F9344, 0x8708A3D2, 0x1E01F268, 0x6906C2FE,
    0xF762575D, 0x806567CB, 0x196C3671, 0x6E6B06E7,
    0xFED41B76, 0x89D32BE0, 0x10DA7A5A, 0x67DD4ACC,
    0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,
    0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252,
    0xD1BB67F1, 0xA6BC5767, 0x3FB506DD, 0x48B2364B,
    0xD80D2BDA, 0xAF0A1B4C, 0x36034AF6, 0x41047A60,
    0xDF60EFC3, 0xA867DF55, 0x316E8EEF, 0x4669BE79,
    0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,
    0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F,
    0xC5BA3BBE, 0xB2BD0B28, 0x2BB45A92, 0x5CB36A04,
    0xC2D7FFA7, 0xB5D0CF31, 0x2CD99E8B, 0x5BDEAE1D,
    0x9B64C2B0, 0xEC63F226, 0x756AA39C, 0x026D930A,
    0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,
    0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38,
    0x92D28E9B, 0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21,
    0x86D3D2D4, 0xF1D4E242, 0x68DDB3F8, 0x1FDA836E,
    0x81BE16CD, 0xF6B9265B, 0x6FB077E1, 0x18B74777,
    0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,
    0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45,
    0xA00AE278, 0xD70DD2EE, 0x4E048354, 0x3903B3C2,
    0xA7672661, 0xD06016F7, 0x4969474D, 0x3E6E77DB,
    0xAED16A4A, 0xD9D65ADC, 0x40DF0B66, 0x37D83BF0,
    0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,
    0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6,
    0xBAD03605, 0xCDD70693, 0x54DE5729, 0x23D967BF,
    0xB3667A2E, 0xC4614AB8, 0x5D681B02, 0x2A6F2B94,
    0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B, 0x2D02EF8D,
];
var lookupTable = (0,_aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__.uint32ArrayFrom)(a_lookUpTable);

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../node_modules/@aws-crypto/crc32c/build/module/aws_crc32c.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@aws-crypto/crc32c/build/module/aws_crc32c.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AwsCrc32c: () => (/* binding */ AwsCrc32c)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "tslib");
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tslib__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-crypto/util */ "../node_modules/@aws-crypto/util/build/module/index.js");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ "../node_modules/@aws-crypto/crc32c/build/module/index.js");
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0



var AwsCrc32c = /** @class */ (function () {
    function AwsCrc32c() {
        this.crc32c = new _index__WEBPACK_IMPORTED_MODULE_2__.Crc32c();
    }
    AwsCrc32c.prototype.update = function (toHash) {
        if ((0,_aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__.isEmptyData)(toHash))
            return;
        this.crc32c.update((0,_aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__.convertToBuffer)(toHash));
    };
    AwsCrc32c.prototype.digest = function () {
        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {
            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {
                return [2 /*return*/, (0,_aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__.numToUint8)(this.crc32c.digest())];
            });
        });
    };
    AwsCrc32c.prototype.reset = function () {
        this.crc32c = new _index__WEBPACK_IMPORTED_MODULE_2__.Crc32c();
    };
    return AwsCrc32c;
}());

//# sourceMappingURL=aws_crc32c.js.map

/***/ }),

/***/ "../node_modules/@aws-crypto/crc32c/build/module/index.js":
/*!****************************************************************!*\
  !*** ../node_modules/@aws-crypto/crc32c/build/module/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AwsCrc32c: () => (/* reexport safe */ _aws_crc32c__WEBPACK_IMPORTED_MODULE_2__.AwsCrc32c),
/* harmony export */   Crc32c: () => (/* binding */ Crc32c),
/* harmony export */   crc32c: () => (/* binding */ crc32c)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "tslib");
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tslib__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-crypto/util */ "../node_modules/@aws-crypto/util/build/module/index.js");
/* harmony import */ var _aws_crc32c__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./aws_crc32c */ "../node_modules/@aws-crypto/crc32c/build/module/aws_crc32c.js");
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0


function crc32c(data) {
    return new Crc32c().update(data).digest();
}
var Crc32c = /** @class */ (function () {
    function Crc32c() {
        this.checksum = 0xffffffff;
    }
    Crc32c.prototype.update = function (data) {
        var e_1, _a;
        try {
            for (var data_1 = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__values)(data), data_1_1 = data_1.next(); !data_1_1.done; data_1_1 = data_1.next()) {
                var byte = data_1_1.value;
                this.checksum =
                    (this.checksum >>> 8) ^ lookupTable[(this.checksum ^ byte) & 0xff];
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (data_1_1 && !data_1_1.done && (_a = data_1.return)) _a.call(data_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return this;
    };
    Crc32c.prototype.digest = function () {
        return (this.checksum ^ 0xffffffff) >>> 0;
    };
    return Crc32c;
}());

// prettier-ignore
var a_lookupTable = [
    0x00000000, 0xF26B8303, 0xE13B70F7, 0x1350F3F4, 0xC79A971F, 0x35F1141C, 0x26A1E7E8, 0xD4CA64EB,
    0x8AD958CF, 0x78B2DBCC, 0x6BE22838, 0x9989AB3B, 0x4D43CFD0, 0xBF284CD3, 0xAC78BF27, 0x5E133C24,
    0x105EC76F, 0xE235446C, 0xF165B798, 0x030E349B, 0xD7C45070, 0x25AFD373, 0x36FF2087, 0xC494A384,
    0x9A879FA0, 0x68EC1CA3, 0x7BBCEF57, 0x89D76C54, 0x5D1D08BF, 0xAF768BBC, 0xBC267848, 0x4E4DFB4B,
    0x20BD8EDE, 0xD2D60DDD, 0xC186FE29, 0x33ED7D2A, 0xE72719C1, 0x154C9AC2, 0x061C6936, 0xF477EA35,
    0xAA64D611, 0x580F5512, 0x4B5FA6E6, 0xB93425E5, 0x6DFE410E, 0x9F95C20D, 0x8CC531F9, 0x7EAEB2FA,
    0x30E349B1, 0xC288CAB2, 0xD1D83946, 0x23B3BA45, 0xF779DEAE, 0x05125DAD, 0x1642AE59, 0xE4292D5A,
    0xBA3A117E, 0x4851927D, 0x5B016189, 0xA96AE28A, 0x7DA08661, 0x8FCB0562, 0x9C9BF696, 0x6EF07595,
    0x417B1DBC, 0xB3109EBF, 0xA0406D4B, 0x522BEE48, 0x86E18AA3, 0x748A09A0, 0x67DAFA54, 0x95B17957,
    0xCBA24573, 0x39C9C670, 0x2A993584, 0xD8F2B687, 0x0C38D26C, 0xFE53516F, 0xED03A29B, 0x1F682198,
    0x5125DAD3, 0xA34E59D0, 0xB01EAA24, 0x42752927, 0x96BF4DCC, 0x64D4CECF, 0x77843D3B, 0x85EFBE38,
    0xDBFC821C, 0x2997011F, 0x3AC7F2EB, 0xC8AC71E8, 0x1C661503, 0xEE0D9600, 0xFD5D65F4, 0x0F36E6F7,
    0x61C69362, 0x93AD1061, 0x80FDE395, 0x72966096, 0xA65C047D, 0x5437877E, 0x4767748A, 0xB50CF789,
    0xEB1FCBAD, 0x197448AE, 0x0A24BB5A, 0xF84F3859, 0x2C855CB2, 0xDEEEDFB1, 0xCDBE2C45, 0x3FD5AF46,
    0x7198540D, 0x83F3D70E, 0x90A324FA, 0x62C8A7F9, 0xB602C312, 0x44694011, 0x5739B3E5, 0xA55230E6,
    0xFB410CC2, 0x092A8FC1, 0x1A7A7C35, 0xE811FF36, 0x3CDB9BDD, 0xCEB018DE, 0xDDE0EB2A, 0x2F8B6829,
    0x82F63B78, 0x709DB87B, 0x63CD4B8F, 0x91A6C88C, 0x456CAC67, 0xB7072F64, 0xA457DC90, 0x563C5F93,
    0x082F63B7, 0xFA44E0B4, 0xE9141340, 0x1B7F9043, 0xCFB5F4A8, 0x3DDE77AB, 0x2E8E845F, 0xDCE5075C,
    0x92A8FC17, 0x60C37F14, 0x73938CE0, 0x81F80FE3, 0x55326B08, 0xA759E80B, 0xB4091BFF, 0x466298FC,
    0x1871A4D8, 0xEA1A27DB, 0xF94AD42F, 0x0B21572C, 0xDFEB33C7, 0x2D80B0C4, 0x3ED04330, 0xCCBBC033,
    0xA24BB5A6, 0x502036A5, 0x4370C551, 0xB11B4652, 0x65D122B9, 0x97BAA1BA, 0x84EA524E, 0x7681D14D,
    0x2892ED69, 0xDAF96E6A, 0xC9A99D9E, 0x3BC21E9D, 0xEF087A76, 0x1D63F975, 0x0E330A81, 0xFC588982,
    0xB21572C9, 0x407EF1CA, 0x532E023E, 0xA145813D, 0x758FE5D6, 0x87E466D5, 0x94B49521, 0x66DF1622,
    0x38CC2A06, 0xCAA7A905, 0xD9F75AF1, 0x2B9CD9F2, 0xFF56BD19, 0x0D3D3E1A, 0x1E6DCDEE, 0xEC064EED,
    0xC38D26C4, 0x31E6A5C7, 0x22B65633, 0xD0DDD530, 0x0417B1DB, 0xF67C32D8, 0xE52CC12C, 0x1747422F,
    0x49547E0B, 0xBB3FFD08, 0xA86F0EFC, 0x5A048DFF, 0x8ECEE914, 0x7CA56A17, 0x6FF599E3, 0x9D9E1AE0,
    0xD3D3E1AB, 0x21B862A8, 0x32E8915C, 0xC083125F, 0x144976B4, 0xE622F5B7, 0xF5720643, 0x07198540,
    0x590AB964, 0xAB613A67, 0xB831C993, 0x4A5A4A90, 0x9E902E7B, 0x6CFBAD78, 0x7FAB5E8C, 0x8DC0DD8F,
    0xE330A81A, 0x115B2B19, 0x020BD8ED, 0xF0605BEE, 0x24AA3F05, 0xD6C1BC06, 0xC5914FF2, 0x37FACCF1,
    0x69E9F0D5, 0x9B8273D6, 0x88D28022, 0x7AB90321, 0xAE7367CA, 0x5C18E4C9, 0x4F48173D, 0xBD23943E,
    0xF36E6F75, 0x0105EC76, 0x12551F82, 0xE03E9C81, 0x34F4F86A, 0xC69F7B69, 0xD5CF889D, 0x27A40B9E,
    0x79B737BA, 0x8BDCB4B9, 0x988C474D, 0x6AE7C44E, 0xBE2DA0A5, 0x4C4623A6, 0x5F16D052, 0xAD7D5351,
];
var lookupTable = (0,_aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__.uint32ArrayFrom)(a_lookupTable);

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../node_modules/@aws-crypto/util/build/module/convertToBuffer.js":
/*!************************************************************************!*\
  !*** ../node_modules/@aws-crypto/util/build/module/convertToBuffer.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertToBuffer: () => (/* binding */ convertToBuffer)
/* harmony export */ });
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-utf8 */ "../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/index.js");
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0

// Quick polyfill
var fromUtf8 = typeof Buffer !== "undefined" && Buffer.from
    ? function (input) { return Buffer.from(input, "utf8"); }
    : _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_0__.fromUtf8;
function convertToBuffer(data) {
    // Already a Uint8, do nothing
    if (data instanceof Uint8Array)
        return data;
    if (typeof data === "string") {
        return fromUtf8(data);
    }
    if (ArrayBuffer.isView(data)) {
        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);
    }
    return new Uint8Array(data);
}
//# sourceMappingURL=convertToBuffer.js.map

/***/ }),

/***/ "../node_modules/@aws-crypto/util/build/module/index.js":
/*!**************************************************************!*\
  !*** ../node_modules/@aws-crypto/util/build/module/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertToBuffer: () => (/* reexport safe */ _convertToBuffer__WEBPACK_IMPORTED_MODULE_0__.convertToBuffer),
/* harmony export */   isEmptyData: () => (/* reexport safe */ _isEmptyData__WEBPACK_IMPORTED_MODULE_1__.isEmptyData),
/* harmony export */   numToUint8: () => (/* reexport safe */ _numToUint8__WEBPACK_IMPORTED_MODULE_2__.numToUint8),
/* harmony export */   uint32ArrayFrom: () => (/* reexport safe */ _uint32ArrayFrom__WEBPACK_IMPORTED_MODULE_3__.uint32ArrayFrom)
/* harmony export */ });
/* harmony import */ var _convertToBuffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./convertToBuffer */ "../node_modules/@aws-crypto/util/build/module/convertToBuffer.js");
/* harmony import */ var _isEmptyData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isEmptyData */ "../node_modules/@aws-crypto/util/build/module/isEmptyData.js");
/* harmony import */ var _numToUint8__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./numToUint8 */ "../node_modules/@aws-crypto/util/build/module/numToUint8.js");
/* harmony import */ var _uint32ArrayFrom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./uint32ArrayFrom */ "../node_modules/@aws-crypto/util/build/module/uint32ArrayFrom.js");
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0




//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../node_modules/@aws-crypto/util/build/module/isEmptyData.js":
/*!********************************************************************!*\
  !*** ../node_modules/@aws-crypto/util/build/module/isEmptyData.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isEmptyData: () => (/* binding */ isEmptyData)
/* harmony export */ });
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function isEmptyData(data) {
    if (typeof data === "string") {
        return data.length === 0;
    }
    return data.byteLength === 0;
}
//# sourceMappingURL=isEmptyData.js.map

/***/ }),

/***/ "../node_modules/@aws-crypto/util/build/module/numToUint8.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@aws-crypto/util/build/module/numToUint8.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   numToUint8: () => (/* binding */ numToUint8)
/* harmony export */ });
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function numToUint8(num) {
    return new Uint8Array([
        (num & 0xff000000) >> 24,
        (num & 0x00ff0000) >> 16,
        (num & 0x0000ff00) >> 8,
        num & 0x000000ff,
    ]);
}
//# sourceMappingURL=numToUint8.js.map

/***/ }),

/***/ "../node_modules/@aws-crypto/util/build/module/uint32ArrayFrom.js":
/*!************************************************************************!*\
  !*** ../node_modules/@aws-crypto/util/build/module/uint32ArrayFrom.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   uint32ArrayFrom: () => (/* binding */ uint32ArrayFrom)
/* harmony export */ });
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// IE 11 does not support Array.from, so we do it manually
function uint32ArrayFrom(a_lookUpTable) {
    if (!Uint32Array.from) {
        var return_array = new Uint32Array(a_lookUpTable.length);
        var a_index = 0;
        while (a_index < a_lookUpTable.length) {
            return_array[a_index] = a_lookUpTable[a_index];
            a_index += 1;
        }
        return return_array;
    }
    return Uint32Array.from(a_lookUpTable);
}
//# sourceMappingURL=uint32ArrayFrom.js.map

/***/ }),

/***/ "../node_modules/@aws-crypto/util/node_modules/@smithy/is-array-buffer/dist-es/index.js":
/*!**********************************************************************************************!*\
  !*** ../node_modules/@aws-crypto/util/node_modules/@smithy/is-array-buffer/dist-es/index.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isArrayBuffer: () => (/* binding */ isArrayBuffer)
/* harmony export */ });
const isArrayBuffer = (arg) => (typeof ArrayBuffer === "function" && arg instanceof ArrayBuffer) ||
    Object.prototype.toString.call(arg) === "[object ArrayBuffer]";


/***/ }),

/***/ "../node_modules/@aws-crypto/util/node_modules/@smithy/util-buffer-from/dist-es/index.js":
/*!***********************************************************************************************!*\
  !*** ../node_modules/@aws-crypto/util/node_modules/@smithy/util-buffer-from/dist-es/index.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromArrayBuffer: () => (/* binding */ fromArrayBuffer),
/* harmony export */   fromString: () => (/* binding */ fromString)
/* harmony export */ });
/* harmony import */ var _smithy_is_array_buffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/is-array-buffer */ "../node_modules/@aws-crypto/util/node_modules/@smithy/is-array-buffer/dist-es/index.js");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "buffer");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(buffer__WEBPACK_IMPORTED_MODULE_1__);


const fromArrayBuffer = (input, offset = 0, length = input.byteLength - offset) => {
    if (!(0,_smithy_is_array_buffer__WEBPACK_IMPORTED_MODULE_0__.isArrayBuffer)(input)) {
        throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof input} (${input})`);
    }
    return buffer__WEBPACK_IMPORTED_MODULE_1__.Buffer.from(input, offset, length);
};
const fromString = (input, encoding) => {
    if (typeof input !== "string") {
        throw new TypeError(`The "input" argument must be of type string. Received type ${typeof input} (${input})`);
    }
    return encoding ? buffer__WEBPACK_IMPORTED_MODULE_1__.Buffer.from(input, encoding) : buffer__WEBPACK_IMPORTED_MODULE_1__.Buffer.from(input);
};


/***/ }),

/***/ "../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/fromUtf8.js":
/*!*******************************************************************************************!*\
  !*** ../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/fromUtf8.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromUtf8: () => (/* binding */ fromUtf8)
/* harmony export */ });
/* harmony import */ var _smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-buffer-from */ "../node_modules/@aws-crypto/util/node_modules/@smithy/util-buffer-from/dist-es/index.js");

const fromUtf8 = (input) => {
    const buf = (0,_smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__.fromString)(input, "utf8");
    return new Uint8Array(buf.buffer, buf.byteOffset, buf.byteLength / Uint8Array.BYTES_PER_ELEMENT);
};


/***/ }),

/***/ "../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/index.js":
/*!****************************************************************************************!*\
  !*** ../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/index.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromUtf8: () => (/* reexport safe */ _fromUtf8__WEBPACK_IMPORTED_MODULE_0__.fromUtf8),
/* harmony export */   toUint8Array: () => (/* reexport safe */ _toUint8Array__WEBPACK_IMPORTED_MODULE_1__.toUint8Array),
/* harmony export */   toUtf8: () => (/* reexport safe */ _toUtf8__WEBPACK_IMPORTED_MODULE_2__.toUtf8)
/* harmony export */ });
/* harmony import */ var _fromUtf8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fromUtf8 */ "../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/fromUtf8.js");
/* harmony import */ var _toUint8Array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toUint8Array */ "../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/toUint8Array.js");
/* harmony import */ var _toUtf8__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./toUtf8 */ "../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/toUtf8.js");





/***/ }),

/***/ "../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/toUint8Array.js":
/*!***********************************************************************************************!*\
  !*** ../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/toUint8Array.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toUint8Array: () => (/* binding */ toUint8Array)
/* harmony export */ });
/* harmony import */ var _fromUtf8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fromUtf8 */ "../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/fromUtf8.js");

const toUint8Array = (data) => {
    if (typeof data === "string") {
        return (0,_fromUtf8__WEBPACK_IMPORTED_MODULE_0__.fromUtf8)(data);
    }
    if (ArrayBuffer.isView(data)) {
        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);
    }
    return new Uint8Array(data);
};


/***/ }),

/***/ "../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/toUtf8.js":
/*!*****************************************************************************************!*\
  !*** ../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/toUtf8.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toUtf8: () => (/* binding */ toUtf8)
/* harmony export */ });
/* harmony import */ var _smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-buffer-from */ "../node_modules/@aws-crypto/util/node_modules/@smithy/util-buffer-from/dist-es/index.js");

const toUtf8 = (input) => {
    if (typeof input === "string") {
        return input;
    }
    if (typeof input !== "object" || typeof input.byteOffset !== "number" || typeof input.byteLength !== "number") {
        throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");
    }
    return (0,_smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__.fromArrayBuffer)(input.buffer, input.byteOffset, input.byteLength).toString("utf8");
};


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/S3Client.js":
/*!**************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/S3Client.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S3Client: () => (/* binding */ S3Client),
/* harmony export */   __Client: () => (/* reexport safe */ _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_13__.Client)
/* harmony export */ });
/* harmony import */ var _aws_sdk_middleware_expect_continue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/middleware-expect-continue */ "../node_modules/@aws-sdk/middleware-expect-continue/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_flexible_checksums__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/middleware-flexible-checksums */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_host_header__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/middleware-host-header */ "../node_modules/@aws-sdk/middleware-host-header/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-sdk/middleware-logger */ "../node_modules/@aws-sdk/middleware-logger/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_recursion_detection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-sdk/middleware-recursion-detection */ "../node_modules/@aws-sdk/middleware-recursion-detection/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-sdk/middleware-sdk-s3 */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_user_agent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aws-sdk/middleware-user-agent */ "../node_modules/@aws-sdk/middleware-user-agent/dist-es/index.js");
/* harmony import */ var _smithy_config_resolver__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @smithy/config-resolver */ "../node_modules/@smithy/config-resolver/dist-es/index.js");
/* harmony import */ var _smithy_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @smithy/core */ "../node_modules/@smithy/core/dist-es/index.js");
/* harmony import */ var _smithy_eventstream_serde_config_resolver__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @smithy/eventstream-serde-config-resolver */ "../node_modules/@smithy/eventstream-serde-config-resolver/dist-es/index.js");
/* harmony import */ var _smithy_middleware_content_length__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @smithy/middleware-content-length */ "../node_modules/@smithy/middleware-content-length/dist-es/index.js");
/* harmony import */ var _smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @smithy/middleware-endpoint */ "../node_modules/@smithy/middleware-endpoint/dist-es/index.js");
/* harmony import */ var _smithy_middleware_retry__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @smithy/middleware-retry */ "../node_modules/@smithy/middleware-retry/dist-es/index.js");
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var _auth_httpAuthSchemeProvider__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./auth/httpAuthSchemeProvider */ "../node_modules/@aws-sdk/client-s3/dist-es/auth/httpAuthSchemeProvider.js");
/* harmony import */ var _commands_CreateSessionCommand__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./commands/CreateSessionCommand */ "../node_modules/@aws-sdk/client-s3/dist-es/commands/CreateSessionCommand.js");
/* harmony import */ var _endpoint_EndpointParameters__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./endpoint/EndpointParameters */ "../node_modules/@aws-sdk/client-s3/dist-es/endpoint/EndpointParameters.js");
/* harmony import */ var _runtimeConfig__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./runtimeConfig */ "../node_modules/@aws-sdk/client-s3/dist-es/runtimeConfig.js");
/* harmony import */ var _runtimeExtensions__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./runtimeExtensions */ "../node_modules/@aws-sdk/client-s3/dist-es/runtimeExtensions.js");




















class S3Client extends _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_13__.Client {
    config;
    constructor(...[configuration]) {
        const _config_0 = (0,_runtimeConfig__WEBPACK_IMPORTED_MODULE_14__.getRuntimeConfig)(configuration || {});
        const _config_1 = (0,_endpoint_EndpointParameters__WEBPACK_IMPORTED_MODULE_15__.resolveClientEndpointParameters)(_config_0);
        const _config_2 = (0,_aws_sdk_middleware_user_agent__WEBPACK_IMPORTED_MODULE_6__.resolveUserAgentConfig)(_config_1);
        const _config_3 = (0,_aws_sdk_middleware_flexible_checksums__WEBPACK_IMPORTED_MODULE_1__.resolveFlexibleChecksumsConfig)(_config_2);
        const _config_4 = (0,_smithy_middleware_retry__WEBPACK_IMPORTED_MODULE_12__.resolveRetryConfig)(_config_3);
        const _config_5 = (0,_smithy_config_resolver__WEBPACK_IMPORTED_MODULE_7__.resolveRegionConfig)(_config_4);
        const _config_6 = (0,_aws_sdk_middleware_host_header__WEBPACK_IMPORTED_MODULE_2__.resolveHostHeaderConfig)(_config_5);
        const _config_7 = (0,_smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_11__.resolveEndpointConfig)(_config_6);
        const _config_8 = (0,_smithy_eventstream_serde_config_resolver__WEBPACK_IMPORTED_MODULE_9__.resolveEventStreamSerdeConfig)(_config_7);
        const _config_9 = (0,_auth_httpAuthSchemeProvider__WEBPACK_IMPORTED_MODULE_16__.resolveHttpAuthSchemeConfig)(_config_8);
        const _config_10 = (0,_aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_5__.resolveS3Config)(_config_9, { session: [() => this, _commands_CreateSessionCommand__WEBPACK_IMPORTED_MODULE_17__.CreateSessionCommand] });
        const _config_11 = (0,_runtimeExtensions__WEBPACK_IMPORTED_MODULE_18__.resolveRuntimeExtensions)(_config_10, configuration?.extensions || []);
        super(_config_11);
        this.config = _config_11;
        this.middlewareStack.use((0,_aws_sdk_middleware_user_agent__WEBPACK_IMPORTED_MODULE_6__.getUserAgentPlugin)(this.config));
        this.middlewareStack.use((0,_smithy_middleware_retry__WEBPACK_IMPORTED_MODULE_12__.getRetryPlugin)(this.config));
        this.middlewareStack.use((0,_smithy_middleware_content_length__WEBPACK_IMPORTED_MODULE_10__.getContentLengthPlugin)(this.config));
        this.middlewareStack.use((0,_aws_sdk_middleware_host_header__WEBPACK_IMPORTED_MODULE_2__.getHostHeaderPlugin)(this.config));
        this.middlewareStack.use((0,_aws_sdk_middleware_logger__WEBPACK_IMPORTED_MODULE_3__.getLoggerPlugin)(this.config));
        this.middlewareStack.use((0,_aws_sdk_middleware_recursion_detection__WEBPACK_IMPORTED_MODULE_4__.getRecursionDetectionPlugin)(this.config));
        this.middlewareStack.use((0,_smithy_core__WEBPACK_IMPORTED_MODULE_8__.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config, {
            httpAuthSchemeParametersProvider: _auth_httpAuthSchemeProvider__WEBPACK_IMPORTED_MODULE_16__.defaultS3HttpAuthSchemeParametersProvider,
            identityProviderConfigProvider: async (config) => new _smithy_core__WEBPACK_IMPORTED_MODULE_8__.DefaultIdentityProviderConfig({
                "aws.auth#sigv4": config.credentials,
                "aws.auth#sigv4a": config.credentials,
            }),
        }));
        this.middlewareStack.use((0,_smithy_core__WEBPACK_IMPORTED_MODULE_8__.getHttpSigningPlugin)(this.config));
        this.middlewareStack.use((0,_aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_5__.getValidateBucketNamePlugin)(this.config));
        this.middlewareStack.use((0,_aws_sdk_middleware_expect_continue__WEBPACK_IMPORTED_MODULE_0__.getAddExpectContinuePlugin)(this.config));
        this.middlewareStack.use((0,_aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_5__.getRegionRedirectMiddlewarePlugin)(this.config));
        this.middlewareStack.use((0,_aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_5__.getS3ExpressPlugin)(this.config));
        this.middlewareStack.use((0,_aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_5__.getS3ExpressHttpSigningPlugin)(this.config));
    }
    destroy() {
        super.destroy();
    }
}


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/auth/httpAuthExtensionConfiguration.js":
/*!*****************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/auth/httpAuthExtensionConfiguration.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHttpAuthExtensionConfiguration: () => (/* binding */ getHttpAuthExtensionConfiguration),
/* harmony export */   resolveHttpAuthRuntimeConfig: () => (/* binding */ resolveHttpAuthRuntimeConfig)
/* harmony export */ });
const getHttpAuthExtensionConfiguration = (runtimeConfig) => {
    const _httpAuthSchemes = runtimeConfig.httpAuthSchemes;
    let _httpAuthSchemeProvider = runtimeConfig.httpAuthSchemeProvider;
    let _credentials = runtimeConfig.credentials;
    return {
        setHttpAuthScheme(httpAuthScheme) {
            const index = _httpAuthSchemes.findIndex((scheme) => scheme.schemeId === httpAuthScheme.schemeId);
            if (index === -1) {
                _httpAuthSchemes.push(httpAuthScheme);
            }
            else {
                _httpAuthSchemes.splice(index, 1, httpAuthScheme);
            }
        },
        httpAuthSchemes() {
            return _httpAuthSchemes;
        },
        setHttpAuthSchemeProvider(httpAuthSchemeProvider) {
            _httpAuthSchemeProvider = httpAuthSchemeProvider;
        },
        httpAuthSchemeProvider() {
            return _httpAuthSchemeProvider;
        },
        setCredentials(credentials) {
            _credentials = credentials;
        },
        credentials() {
            return _credentials;
        },
    };
};
const resolveHttpAuthRuntimeConfig = (config) => {
    return {
        httpAuthSchemes: config.httpAuthSchemes(),
        httpAuthSchemeProvider: config.httpAuthSchemeProvider(),
        credentials: config.credentials(),
    };
};


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/auth/httpAuthSchemeProvider.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/auth/httpAuthSchemeProvider.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   defaultS3HttpAuthSchemeParametersProvider: () => (/* binding */ defaultS3HttpAuthSchemeParametersProvider),
/* harmony export */   defaultS3HttpAuthSchemeProvider: () => (/* binding */ defaultS3HttpAuthSchemeProvider),
/* harmony export */   resolveHttpAuthSchemeConfig: () => (/* binding */ resolveHttpAuthSchemeConfig)
/* harmony export */ });
/* harmony import */ var _aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-sdk/core */ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/resolveAwsSdkSigV4Config.js");
/* harmony import */ var _aws_sdk_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-sdk/core */ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/resolveAwsSdkSigV4AConfig.js");
/* harmony import */ var _aws_sdk_signature_v4_multi_region__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/signature-v4-multi-region */ "../node_modules/@aws-sdk/signature-v4-multi-region/dist-es/index.js");
/* harmony import */ var _smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/middleware-endpoint */ "../node_modules/@smithy/middleware-endpoint/dist-es/index.js");
/* harmony import */ var _smithy_util_middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/util-middleware */ "../node_modules/@smithy/util-middleware/dist-es/index.js");
/* harmony import */ var _endpoint_endpointResolver__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../endpoint/endpointResolver */ "../node_modules/@aws-sdk/client-s3/dist-es/endpoint/endpointResolver.js");





const createEndpointRuleSetHttpAuthSchemeParametersProvider = (defaultHttpAuthSchemeParametersProvider) => async (config, context, input) => {
    if (!input) {
        throw new Error(`Could not find \`input\` for \`defaultEndpointRuleSetHttpAuthSchemeParametersProvider\``);
    }
    const defaultParameters = await defaultHttpAuthSchemeParametersProvider(config, context, input);
    const instructionsFn = (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_2__.getSmithyContext)(context)?.commandInstance?.constructor
        ?.getEndpointParameterInstructions;
    if (!instructionsFn) {
        throw new Error(`getEndpointParameterInstructions() is not defined on \`${context.commandName}\``);
    }
    const endpointParameters = await (0,_smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_1__.resolveParams)(input, { getEndpointParameterInstructions: instructionsFn }, config);
    return Object.assign(defaultParameters, endpointParameters);
};
const _defaultS3HttpAuthSchemeParametersProvider = async (config, context, input) => {
    return {
        operation: (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_2__.getSmithyContext)(context).operation,
        region: (await (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_2__.normalizeProvider)(config.region)()) ||
            (() => {
                throw new Error("expected `region` to be configured for `aws.auth#sigv4`");
            })(),
    };
};
const defaultS3HttpAuthSchemeParametersProvider = createEndpointRuleSetHttpAuthSchemeParametersProvider(_defaultS3HttpAuthSchemeParametersProvider);
function createAwsAuthSigv4HttpAuthOption(authParameters) {
    return {
        schemeId: "aws.auth#sigv4",
        signingProperties: {
            name: "s3",
            region: authParameters.region,
        },
        propertiesExtractor: (config, context) => ({
            signingProperties: {
                config,
                context,
            },
        }),
    };
}
function createAwsAuthSigv4aHttpAuthOption(authParameters) {
    return {
        schemeId: "aws.auth#sigv4a",
        signingProperties: {
            name: "s3",
            region: authParameters.region,
        },
        propertiesExtractor: (config, context) => ({
            signingProperties: {
                config,
                context,
            },
        }),
    };
}
const createEndpointRuleSetHttpAuthSchemeProvider = (defaultEndpointResolver, defaultHttpAuthSchemeResolver, createHttpAuthOptionFunctions) => {
    const endpointRuleSetHttpAuthSchemeProvider = (authParameters) => {
        const endpoint = defaultEndpointResolver(authParameters);
        const authSchemes = endpoint.properties?.authSchemes;
        if (!authSchemes) {
            return defaultHttpAuthSchemeResolver(authParameters);
        }
        const options = [];
        for (const scheme of authSchemes) {
            const { name: resolvedName, properties = {}, ...rest } = scheme;
            const name = resolvedName.toLowerCase();
            if (resolvedName !== name) {
                console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${resolvedName}\` to \`${name}\``);
            }
            let schemeId;
            if (name === "sigv4a") {
                schemeId = "aws.auth#sigv4a";
                const sigv4Present = authSchemes.find((s) => {
                    const name = s.name.toLowerCase();
                    return name !== "sigv4a" && name.startsWith("sigv4");
                });
                if (!_aws_sdk_signature_v4_multi_region__WEBPACK_IMPORTED_MODULE_0__.signatureV4CrtContainer.CrtSignerV4 && sigv4Present) {
                    continue;
                }
            }
            else if (name.startsWith("sigv4")) {
                schemeId = "aws.auth#sigv4";
            }
            else {
                throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${name}\``);
            }
            const createOption = createHttpAuthOptionFunctions[schemeId];
            if (!createOption) {
                throw new Error(`Could not find HttpAuthOption create function for \`${schemeId}\``);
            }
            const option = createOption(authParameters);
            option.schemeId = schemeId;
            option.signingProperties = { ...(option.signingProperties || {}), ...rest, ...properties };
            options.push(option);
        }
        return options;
    };
    return endpointRuleSetHttpAuthSchemeProvider;
};
const _defaultS3HttpAuthSchemeProvider = (authParameters) => {
    const options = [];
    switch (authParameters.operation) {
        default: {
            options.push(createAwsAuthSigv4HttpAuthOption(authParameters));
            options.push(createAwsAuthSigv4aHttpAuthOption(authParameters));
        }
    }
    return options;
};
const defaultS3HttpAuthSchemeProvider = createEndpointRuleSetHttpAuthSchemeProvider(_endpoint_endpointResolver__WEBPACK_IMPORTED_MODULE_3__.defaultEndpointResolver, _defaultS3HttpAuthSchemeProvider, {
    "aws.auth#sigv4": createAwsAuthSigv4HttpAuthOption,
    "aws.auth#sigv4a": createAwsAuthSigv4aHttpAuthOption,
});
const resolveHttpAuthSchemeConfig = (config) => {
    const config_0 = (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.resolveAwsSdkSigV4Config)(config);
    const config_1 = (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_5__.resolveAwsSdkSigV4AConfig)(config_0);
    return {
        ...config_1,
    };
};


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/commands/CopyObjectCommand.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/commands/CopyObjectCommand.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $Command: () => (/* reexport safe */ _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_4__.Command),
/* harmony export */   CopyObjectCommand: () => (/* binding */ CopyObjectCommand)
/* harmony export */ });
/* harmony import */ var _aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/middleware-sdk-s3 */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_ssec__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/middleware-ssec */ "../node_modules/@aws-sdk/middleware-ssec/dist-es/index.js");
/* harmony import */ var _smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/middleware-endpoint */ "../node_modules/@smithy/middleware-endpoint/dist-es/index.js");
/* harmony import */ var _smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @smithy/middleware-serde */ "../node_modules/@smithy/middleware-serde/dist-es/index.js");
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var _endpoint_EndpointParameters__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../endpoint/EndpointParameters */ "../node_modules/@aws-sdk/client-s3/dist-es/endpoint/EndpointParameters.js");
/* harmony import */ var _models_models_0__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../models/models_0 */ "../node_modules/@aws-sdk/client-s3/dist-es/models/models_0.js");
/* harmony import */ var _protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../protocols/Aws_restXml */ "../node_modules/@aws-sdk/client-s3/dist-es/protocols/Aws_restXml.js");









class CopyObjectCommand extends _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_4__.Command
    .classBuilder()
    .ep({
    ..._endpoint_EndpointParameters__WEBPACK_IMPORTED_MODULE_5__.commonParams,
    DisableS3ExpressSessionAuth: { type: "staticContextParams", value: true },
    Bucket: { type: "contextParams", name: "Bucket" },
    Key: { type: "contextParams", name: "Key" },
    CopySource: { type: "contextParams", name: "CopySource" },
})
    .m(function (Command, cs, config, o) {
    return [
        (0,_smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_3__.getSerdePlugin)(config, this.serialize, this.deserialize),
        (0,_smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_2__.getEndpointPlugin)(config, Command.getEndpointParameterInstructions()),
        (0,_aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_0__.getThrow200ExceptionsPlugin)(config),
        (0,_aws_sdk_middleware_ssec__WEBPACK_IMPORTED_MODULE_1__.getSsecPlugin)(config),
    ];
})
    .s("AmazonS3", "CopyObject", {})
    .n("S3Client", "CopyObjectCommand")
    .f(_models_models_0__WEBPACK_IMPORTED_MODULE_6__.CopyObjectRequestFilterSensitiveLog, _models_models_0__WEBPACK_IMPORTED_MODULE_6__.CopyObjectOutputFilterSensitiveLog)
    .ser(_protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_7__.se_CopyObjectCommand)
    .de(_protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_7__.de_CopyObjectCommand)
    .build() {
}


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/commands/CreateSessionCommand.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/commands/CreateSessionCommand.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $Command: () => (/* reexport safe */ _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.Command),
/* harmony export */   CreateSessionCommand: () => (/* binding */ CreateSessionCommand)
/* harmony export */ });
/* harmony import */ var _aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/middleware-sdk-s3 */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/index.js");
/* harmony import */ var _smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/middleware-endpoint */ "../node_modules/@smithy/middleware-endpoint/dist-es/index.js");
/* harmony import */ var _smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/middleware-serde */ "../node_modules/@smithy/middleware-serde/dist-es/index.js");
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var _endpoint_EndpointParameters__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../endpoint/EndpointParameters */ "../node_modules/@aws-sdk/client-s3/dist-es/endpoint/EndpointParameters.js");
/* harmony import */ var _models_models_0__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/models_0 */ "../node_modules/@aws-sdk/client-s3/dist-es/models/models_0.js");
/* harmony import */ var _protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../protocols/Aws_restXml */ "../node_modules/@aws-sdk/client-s3/dist-es/protocols/Aws_restXml.js");








class CreateSessionCommand extends _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.Command
    .classBuilder()
    .ep({
    ..._endpoint_EndpointParameters__WEBPACK_IMPORTED_MODULE_4__.commonParams,
    DisableS3ExpressSessionAuth: { type: "staticContextParams", value: true },
    Bucket: { type: "contextParams", name: "Bucket" },
})
    .m(function (Command, cs, config, o) {
    return [
        (0,_smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_2__.getSerdePlugin)(config, this.serialize, this.deserialize),
        (0,_smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_1__.getEndpointPlugin)(config, Command.getEndpointParameterInstructions()),
        (0,_aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_0__.getThrow200ExceptionsPlugin)(config),
    ];
})
    .s("AmazonS3", "CreateSession", {})
    .n("S3Client", "CreateSessionCommand")
    .f(_models_models_0__WEBPACK_IMPORTED_MODULE_5__.CreateSessionRequestFilterSensitiveLog, _models_models_0__WEBPACK_IMPORTED_MODULE_5__.CreateSessionOutputFilterSensitiveLog)
    .ser(_protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_6__.se_CreateSessionCommand)
    .de(_protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_6__.de_CreateSessionCommand)
    .build() {
}


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/commands/DeleteObjectCommand.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/commands/DeleteObjectCommand.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $Command: () => (/* reexport safe */ _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.Command),
/* harmony export */   DeleteObjectCommand: () => (/* binding */ DeleteObjectCommand)
/* harmony export */ });
/* harmony import */ var _aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/middleware-sdk-s3 */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/index.js");
/* harmony import */ var _smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/middleware-endpoint */ "../node_modules/@smithy/middleware-endpoint/dist-es/index.js");
/* harmony import */ var _smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/middleware-serde */ "../node_modules/@smithy/middleware-serde/dist-es/index.js");
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var _endpoint_EndpointParameters__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../endpoint/EndpointParameters */ "../node_modules/@aws-sdk/client-s3/dist-es/endpoint/EndpointParameters.js");
/* harmony import */ var _protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../protocols/Aws_restXml */ "../node_modules/@aws-sdk/client-s3/dist-es/protocols/Aws_restXml.js");







class DeleteObjectCommand extends _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.Command
    .classBuilder()
    .ep({
    ..._endpoint_EndpointParameters__WEBPACK_IMPORTED_MODULE_4__.commonParams,
    Bucket: { type: "contextParams", name: "Bucket" },
    Key: { type: "contextParams", name: "Key" },
})
    .m(function (Command, cs, config, o) {
    return [
        (0,_smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_2__.getSerdePlugin)(config, this.serialize, this.deserialize),
        (0,_smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_1__.getEndpointPlugin)(config, Command.getEndpointParameterInstructions()),
        (0,_aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_0__.getThrow200ExceptionsPlugin)(config),
    ];
})
    .s("AmazonS3", "DeleteObject", {})
    .n("S3Client", "DeleteObjectCommand")
    .f(void 0, void 0)
    .ser(_protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_5__.se_DeleteObjectCommand)
    .de(_protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_5__.de_DeleteObjectCommand)
    .build() {
}


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/commands/GetObjectCommand.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/commands/GetObjectCommand.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $Command: () => (/* reexport safe */ _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_5__.Command),
/* harmony export */   GetObjectCommand: () => (/* binding */ GetObjectCommand)
/* harmony export */ });
/* harmony import */ var _aws_sdk_middleware_flexible_checksums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/middleware-flexible-checksums */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/middleware-sdk-s3 */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_ssec__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/middleware-ssec */ "../node_modules/@aws-sdk/middleware-ssec/dist-es/index.js");
/* harmony import */ var _smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @smithy/middleware-endpoint */ "../node_modules/@smithy/middleware-endpoint/dist-es/index.js");
/* harmony import */ var _smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @smithy/middleware-serde */ "../node_modules/@smithy/middleware-serde/dist-es/index.js");
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var _endpoint_EndpointParameters__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../endpoint/EndpointParameters */ "../node_modules/@aws-sdk/client-s3/dist-es/endpoint/EndpointParameters.js");
/* harmony import */ var _models_models_0__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../models/models_0 */ "../node_modules/@aws-sdk/client-s3/dist-es/models/models_0.js");
/* harmony import */ var _protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../protocols/Aws_restXml */ "../node_modules/@aws-sdk/client-s3/dist-es/protocols/Aws_restXml.js");










class GetObjectCommand extends _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_5__.Command
    .classBuilder()
    .ep({
    ..._endpoint_EndpointParameters__WEBPACK_IMPORTED_MODULE_6__.commonParams,
    Bucket: { type: "contextParams", name: "Bucket" },
    Key: { type: "contextParams", name: "Key" },
})
    .m(function (Command, cs, config, o) {
    return [
        (0,_smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_4__.getSerdePlugin)(config, this.serialize, this.deserialize),
        (0,_smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_3__.getEndpointPlugin)(config, Command.getEndpointParameterInstructions()),
        (0,_aws_sdk_middleware_flexible_checksums__WEBPACK_IMPORTED_MODULE_0__.getFlexibleChecksumsPlugin)(config, {
            requestChecksumRequired: false,
            requestValidationModeMember: "ChecksumMode",
            responseAlgorithms: ["CRC64NVME", "CRC32", "CRC32C", "SHA256", "SHA1"],
        }),
        (0,_aws_sdk_middleware_ssec__WEBPACK_IMPORTED_MODULE_2__.getSsecPlugin)(config),
        (0,_aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_1__.getS3ExpiresMiddlewarePlugin)(config),
    ];
})
    .s("AmazonS3", "GetObject", {})
    .n("S3Client", "GetObjectCommand")
    .f(_models_models_0__WEBPACK_IMPORTED_MODULE_7__.GetObjectRequestFilterSensitiveLog, _models_models_0__WEBPACK_IMPORTED_MODULE_7__.GetObjectOutputFilterSensitiveLog)
    .ser(_protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_8__.se_GetObjectCommand)
    .de(_protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_8__.de_GetObjectCommand)
    .build() {
}


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/commands/PutObjectCommand.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/commands/PutObjectCommand.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $Command: () => (/* reexport safe */ _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_5__.Command),
/* harmony export */   PutObjectCommand: () => (/* binding */ PutObjectCommand)
/* harmony export */ });
/* harmony import */ var _aws_sdk_middleware_flexible_checksums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/middleware-flexible-checksums */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/middleware-sdk-s3 */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_ssec__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/middleware-ssec */ "../node_modules/@aws-sdk/middleware-ssec/dist-es/index.js");
/* harmony import */ var _smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @smithy/middleware-endpoint */ "../node_modules/@smithy/middleware-endpoint/dist-es/index.js");
/* harmony import */ var _smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @smithy/middleware-serde */ "../node_modules/@smithy/middleware-serde/dist-es/index.js");
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var _endpoint_EndpointParameters__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../endpoint/EndpointParameters */ "../node_modules/@aws-sdk/client-s3/dist-es/endpoint/EndpointParameters.js");
/* harmony import */ var _models_models_1__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../models/models_1 */ "../node_modules/@aws-sdk/client-s3/dist-es/models/models_1.js");
/* harmony import */ var _protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../protocols/Aws_restXml */ "../node_modules/@aws-sdk/client-s3/dist-es/protocols/Aws_restXml.js");










class PutObjectCommand extends _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_5__.Command
    .classBuilder()
    .ep({
    ..._endpoint_EndpointParameters__WEBPACK_IMPORTED_MODULE_6__.commonParams,
    Bucket: { type: "contextParams", name: "Bucket" },
    Key: { type: "contextParams", name: "Key" },
})
    .m(function (Command, cs, config, o) {
    return [
        (0,_smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_4__.getSerdePlugin)(config, this.serialize, this.deserialize),
        (0,_smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_3__.getEndpointPlugin)(config, Command.getEndpointParameterInstructions()),
        (0,_aws_sdk_middleware_flexible_checksums__WEBPACK_IMPORTED_MODULE_0__.getFlexibleChecksumsPlugin)(config, {
            requestAlgorithmMember: { httpHeader: "x-amz-sdk-checksum-algorithm", name: "ChecksumAlgorithm" },
            requestChecksumRequired: false,
        }),
        (0,_aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_1__.getCheckContentLengthHeaderPlugin)(config),
        (0,_aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_1__.getThrow200ExceptionsPlugin)(config),
        (0,_aws_sdk_middleware_ssec__WEBPACK_IMPORTED_MODULE_2__.getSsecPlugin)(config),
    ];
})
    .s("AmazonS3", "PutObject", {})
    .n("S3Client", "PutObjectCommand")
    .f(_models_models_1__WEBPACK_IMPORTED_MODULE_7__.PutObjectRequestFilterSensitiveLog, _models_models_1__WEBPACK_IMPORTED_MODULE_7__.PutObjectOutputFilterSensitiveLog)
    .ser(_protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_8__.se_PutObjectCommand)
    .de(_protocols_Aws_restXml__WEBPACK_IMPORTED_MODULE_8__.de_PutObjectCommand)
    .build() {
}


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/endpoint/EndpointParameters.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/endpoint/EndpointParameters.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   commonParams: () => (/* binding */ commonParams),
/* harmony export */   resolveClientEndpointParameters: () => (/* binding */ resolveClientEndpointParameters)
/* harmony export */ });
const resolveClientEndpointParameters = (options) => {
    return {
        ...options,
        useFipsEndpoint: options.useFipsEndpoint ?? false,
        useDualstackEndpoint: options.useDualstackEndpoint ?? false,
        forcePathStyle: options.forcePathStyle ?? false,
        useAccelerateEndpoint: options.useAccelerateEndpoint ?? false,
        useGlobalEndpoint: options.useGlobalEndpoint ?? false,
        disableMultiregionAccessPoints: options.disableMultiregionAccessPoints ?? false,
        defaultSigningName: "s3",
    };
};
const commonParams = {
    ForcePathStyle: { type: "clientContextParams", name: "forcePathStyle" },
    UseArnRegion: { type: "clientContextParams", name: "useArnRegion" },
    DisableMultiRegionAccessPoints: { type: "clientContextParams", name: "disableMultiregionAccessPoints" },
    Accelerate: { type: "clientContextParams", name: "useAccelerateEndpoint" },
    DisableS3ExpressSessionAuth: { type: "clientContextParams", name: "disableS3ExpressSessionAuth" },
    UseGlobalEndpoint: { type: "builtInParams", name: "useGlobalEndpoint" },
    UseFIPS: { type: "builtInParams", name: "useFipsEndpoint" },
    Endpoint: { type: "builtInParams", name: "endpoint" },
    Region: { type: "builtInParams", name: "region" },
    UseDualStack: { type: "builtInParams", name: "useDualstackEndpoint" },
};


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/endpoint/endpointResolver.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/endpoint/endpointResolver.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   defaultEndpointResolver: () => (/* binding */ defaultEndpointResolver)
/* harmony export */ });
/* harmony import */ var _aws_sdk_util_endpoints__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/util-endpoints */ "../node_modules/@aws-sdk/util-endpoints/dist-es/index.js");
/* harmony import */ var _smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-endpoints */ "../node_modules/@smithy/util-endpoints/dist-es/index.js");
/* harmony import */ var _ruleset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ruleset */ "../node_modules/@aws-sdk/client-s3/dist-es/endpoint/ruleset.js");



const cache = new _smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_1__.EndpointCache({
    size: 50,
    params: [
        "Accelerate",
        "Bucket",
        "DisableAccessPoints",
        "DisableMultiRegionAccessPoints",
        "DisableS3ExpressSessionAuth",
        "Endpoint",
        "ForcePathStyle",
        "Region",
        "UseArnRegion",
        "UseDualStack",
        "UseFIPS",
        "UseGlobalEndpoint",
        "UseObjectLambdaEndpoint",
        "UseS3ExpressControlEndpoint",
    ],
});
const defaultEndpointResolver = (endpointParams, context = {}) => {
    return cache.get(endpointParams, () => (0,_smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_1__.resolveEndpoint)(_ruleset__WEBPACK_IMPORTED_MODULE_2__.ruleSet, {
        endpointParams: endpointParams,
        logger: context.logger,
    }));
};
_smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_1__.customEndpointFunctions.aws = _aws_sdk_util_endpoints__WEBPACK_IMPORTED_MODULE_0__.awsEndpointFunctions;


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/endpoint/ruleset.js":
/*!**********************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/endpoint/ruleset.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ruleSet: () => (/* binding */ ruleSet)
/* harmony export */ });
const ci = "required", cj = "type", ck = "conditions", cl = "fn", cm = "argv", cn = "ref", co = "assign", cp = "url", cq = "properties", cr = "backend", cs = "authSchemes", ct = "disableDoubleEncoding", cu = "signingName", cv = "signingRegion", cw = "headers", cx = "signingRegionSet";
const a = 6, b = false, c = true, d = "isSet", e = "booleanEquals", f = "error", g = "aws.partition", h = "stringEquals", i = "getAttr", j = "name", k = "substring", l = "bucketSuffix", m = "parseURL", n = "{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}", o = "endpoint", p = "tree", q = "aws.isVirtualHostableS3Bucket", r = "{url#scheme}://{Bucket}.{url#authority}{url#path}", s = "not", t = "{url#scheme}://{url#authority}{url#path}", u = "hardwareType", v = "regionPrefix", w = "bucketAliasSuffix", x = "outpostId", y = "isValidHostLabel", z = "sigv4a", A = "s3-outposts", B = "s3", C = "{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}", D = "https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}", E = "https://{Bucket}.s3.{partitionResult#dnsSuffix}", F = "aws.parseArn", G = "bucketArn", H = "arnType", I = "", J = "s3-object-lambda", K = "accesspoint", L = "accessPointName", M = "{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}", N = "mrapPartition", O = "outpostType", P = "arnPrefix", Q = "{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}", R = "https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}", S = "https://s3.{partitionResult#dnsSuffix}", T = { [ci]: false, [cj]: "String" }, U = { [ci]: true, "default": false, [cj]: "Boolean" }, V = { [ci]: false, [cj]: "Boolean" }, W = { [cl]: e, [cm]: [{ [cn]: "Accelerate" }, true] }, X = { [cl]: e, [cm]: [{ [cn]: "UseFIPS" }, true] }, Y = { [cl]: e, [cm]: [{ [cn]: "UseDualStack" }, true] }, Z = { [cl]: d, [cm]: [{ [cn]: "Endpoint" }] }, aa = { [cl]: g, [cm]: [{ [cn]: "Region" }], [co]: "partitionResult" }, ab = { [cl]: h, [cm]: [{ [cl]: i, [cm]: [{ [cn]: "partitionResult" }, j] }, "aws-cn"] }, ac = { [cl]: d, [cm]: [{ [cn]: "Bucket" }] }, ad = { [cn]: "Bucket" }, ae = { [cl]: m, [cm]: [{ [cn]: "Endpoint" }], [co]: "url" }, af = { [cl]: e, [cm]: [{ [cl]: i, [cm]: [{ [cn]: "url" }, "isIp"] }, true] }, ag = { [cn]: "url" }, ah = { [cl]: "uriEncode", [cm]: [ad], [co]: "uri_encoded_bucket" }, ai = { [cr]: "S3Express", [cs]: [{ [ct]: true, [j]: "sigv4", [cu]: "s3express", [cv]: "{Region}" }] }, aj = {}, ak = { [cl]: q, [cm]: [ad, false] }, al = { [f]: "S3Express bucket name is not a valid virtual hostable name.", [cj]: f }, am = { [cr]: "S3Express", [cs]: [{ [ct]: true, [j]: "sigv4-s3express", [cu]: "s3express", [cv]: "{Region}" }] }, an = { [cl]: d, [cm]: [{ [cn]: "UseS3ExpressControlEndpoint" }] }, ao = { [cl]: e, [cm]: [{ [cn]: "UseS3ExpressControlEndpoint" }, true] }, ap = { [cl]: s, [cm]: [Z] }, aq = { [f]: "Unrecognized S3Express bucket name format.", [cj]: f }, ar = { [cl]: s, [cm]: [ac] }, as = { [cn]: u }, at = { [ck]: [ap], [f]: "Expected a endpoint to be specified but no endpoint was found", [cj]: f }, au = { [cs]: [{ [ct]: true, [j]: z, [cu]: A, [cx]: ["*"] }, { [ct]: true, [j]: "sigv4", [cu]: A, [cv]: "{Region}" }] }, av = { [cl]: e, [cm]: [{ [cn]: "ForcePathStyle" }, false] }, aw = { [cn]: "ForcePathStyle" }, ax = { [cl]: e, [cm]: [{ [cn]: "Accelerate" }, false] }, ay = { [cl]: h, [cm]: [{ [cn]: "Region" }, "aws-global"] }, az = { [cs]: [{ [ct]: true, [j]: "sigv4", [cu]: B, [cv]: "us-east-1" }] }, aA = { [cl]: s, [cm]: [ay] }, aB = { [cl]: e, [cm]: [{ [cn]: "UseGlobalEndpoint" }, true] }, aC = { [cp]: "https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}", [cq]: { [cs]: [{ [ct]: true, [j]: "sigv4", [cu]: B, [cv]: "{Region}" }] }, [cw]: {} }, aD = { [cs]: [{ [ct]: true, [j]: "sigv4", [cu]: B, [cv]: "{Region}" }] }, aE = { [cl]: e, [cm]: [{ [cn]: "UseGlobalEndpoint" }, false] }, aF = { [cl]: e, [cm]: [{ [cn]: "UseDualStack" }, false] }, aG = { [cp]: "https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}", [cq]: aD, [cw]: {} }, aH = { [cl]: e, [cm]: [{ [cn]: "UseFIPS" }, false] }, aI = { [cp]: "https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}", [cq]: aD, [cw]: {} }, aJ = { [cp]: "https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}", [cq]: aD, [cw]: {} }, aK = { [cl]: e, [cm]: [{ [cl]: i, [cm]: [ag, "isIp"] }, false] }, aL = { [cp]: C, [cq]: aD, [cw]: {} }, aM = { [cp]: r, [cq]: aD, [cw]: {} }, aN = { [o]: aM, [cj]: o }, aO = { [cp]: D, [cq]: aD, [cw]: {} }, aP = { [cp]: "https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}", [cq]: aD, [cw]: {} }, aQ = { [f]: "Invalid region: region was not a valid DNS name.", [cj]: f }, aR = { [cn]: G }, aS = { [cn]: H }, aT = { [cl]: i, [cm]: [aR, "service"] }, aU = { [cn]: L }, aV = { [ck]: [Y], [f]: "S3 Object Lambda does not support Dual-stack", [cj]: f }, aW = { [ck]: [W], [f]: "S3 Object Lambda does not support S3 Accelerate", [cj]: f }, aX = { [ck]: [{ [cl]: d, [cm]: [{ [cn]: "DisableAccessPoints" }] }, { [cl]: e, [cm]: [{ [cn]: "DisableAccessPoints" }, true] }], [f]: "Access points are not supported for this operation", [cj]: f }, aY = { [ck]: [{ [cl]: d, [cm]: [{ [cn]: "UseArnRegion" }] }, { [cl]: e, [cm]: [{ [cn]: "UseArnRegion" }, false] }, { [cl]: s, [cm]: [{ [cl]: h, [cm]: [{ [cl]: i, [cm]: [aR, "region"] }, "{Region}"] }] }], [f]: "Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`", [cj]: f }, aZ = { [cl]: i, [cm]: [{ [cn]: "bucketPartition" }, j] }, ba = { [cl]: i, [cm]: [aR, "accountId"] }, bb = { [cs]: [{ [ct]: true, [j]: "sigv4", [cu]: J, [cv]: "{bucketArn#region}" }] }, bc = { [f]: "Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`", [cj]: f }, bd = { [f]: "Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`", [cj]: f }, be = { [f]: "Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)", [cj]: f }, bf = { [f]: "Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`", [cj]: f }, bg = { [f]: "Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.", [cj]: f }, bh = { [f]: "Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided", [cj]: f }, bi = { [cs]: [{ [ct]: true, [j]: "sigv4", [cu]: B, [cv]: "{bucketArn#region}" }] }, bj = { [cs]: [{ [ct]: true, [j]: z, [cu]: A, [cx]: ["*"] }, { [ct]: true, [j]: "sigv4", [cu]: A, [cv]: "{bucketArn#region}" }] }, bk = { [cl]: F, [cm]: [ad] }, bl = { [cp]: "https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}", [cq]: aD, [cw]: {} }, bm = { [cp]: "https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}", [cq]: aD, [cw]: {} }, bn = { [cp]: "https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}", [cq]: aD, [cw]: {} }, bo = { [cp]: Q, [cq]: aD, [cw]: {} }, bp = { [cp]: "https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}", [cq]: aD, [cw]: {} }, bq = { [cn]: "UseObjectLambdaEndpoint" }, br = { [cs]: [{ [ct]: true, [j]: "sigv4", [cu]: J, [cv]: "{Region}" }] }, bs = { [cp]: "https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}", [cq]: aD, [cw]: {} }, bt = { [cp]: "https://s3-fips.{Region}.{partitionResult#dnsSuffix}", [cq]: aD, [cw]: {} }, bu = { [cp]: "https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}", [cq]: aD, [cw]: {} }, bv = { [cp]: t, [cq]: aD, [cw]: {} }, bw = { [cp]: "https://s3.{Region}.{partitionResult#dnsSuffix}", [cq]: aD, [cw]: {} }, bx = [{ [cn]: "Region" }], by = [{ [cn]: "Endpoint" }], bz = [ad], bA = [Y], bB = [W], bC = [Z, ae], bD = [{ [cl]: d, [cm]: [{ [cn]: "DisableS3ExpressSessionAuth" }] }, { [cl]: e, [cm]: [{ [cn]: "DisableS3ExpressSessionAuth" }, true] }], bE = [af], bF = [ah], bG = [ak], bH = [X], bI = [{ [cl]: k, [cm]: [ad, 6, 14, true], [co]: "s3expressAvailabilityZoneId" }, { [cl]: k, [cm]: [ad, 14, 16, true], [co]: "s3expressAvailabilityZoneDelim" }, { [cl]: h, [cm]: [{ [cn]: "s3expressAvailabilityZoneDelim" }, "--"] }], bJ = [{ [ck]: [X], [o]: { [cp]: "https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com", [cq]: ai, [cw]: {} }, [cj]: o }, { [o]: { [cp]: "https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com", [cq]: ai, [cw]: {} }, [cj]: o }], bK = [{ [cl]: k, [cm]: [ad, 6, 15, true], [co]: "s3expressAvailabilityZoneId" }, { [cl]: k, [cm]: [ad, 15, 17, true], [co]: "s3expressAvailabilityZoneDelim" }, { [cl]: h, [cm]: [{ [cn]: "s3expressAvailabilityZoneDelim" }, "--"] }], bL = [{ [cl]: k, [cm]: [ad, 6, 19, true], [co]: "s3expressAvailabilityZoneId" }, { [cl]: k, [cm]: [ad, 19, 21, true], [co]: "s3expressAvailabilityZoneDelim" }, { [cl]: h, [cm]: [{ [cn]: "s3expressAvailabilityZoneDelim" }, "--"] }], bM = [{ [cl]: k, [cm]: [ad, 6, 20, true], [co]: "s3expressAvailabilityZoneId" }, { [cl]: k, [cm]: [ad, 20, 22, true], [co]: "s3expressAvailabilityZoneDelim" }, { [cl]: h, [cm]: [{ [cn]: "s3expressAvailabilityZoneDelim" }, "--"] }], bN = [{ [cl]: k, [cm]: [ad, 6, 26, true], [co]: "s3expressAvailabilityZoneId" }, { [cl]: k, [cm]: [ad, 26, 28, true], [co]: "s3expressAvailabilityZoneDelim" }, { [cl]: h, [cm]: [{ [cn]: "s3expressAvailabilityZoneDelim" }, "--"] }], bO = [{ [ck]: [X], [o]: { [cp]: "https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com", [cq]: am, [cw]: {} }, [cj]: o }, { [o]: { [cp]: "https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com", [cq]: am, [cw]: {} }, [cj]: o }], bP = [ac], bQ = [{ [cl]: y, [cm]: [{ [cn]: x }, false] }], bR = [{ [cl]: h, [cm]: [{ [cn]: v }, "beta"] }], bS = ["*"], bT = [aa], bU = [{ [cl]: y, [cm]: [{ [cn]: "Region" }, false] }], bV = [{ [cl]: h, [cm]: [{ [cn]: "Region" }, "us-east-1"] }], bW = [{ [cl]: h, [cm]: [aS, K] }], bX = [{ [cl]: i, [cm]: [aR, "resourceId[1]"], [co]: L }, { [cl]: s, [cm]: [{ [cl]: h, [cm]: [aU, I] }] }], bY = [aR, "resourceId[1]"], bZ = [{ [cl]: s, [cm]: [{ [cl]: h, [cm]: [{ [cl]: i, [cm]: [aR, "region"] }, I] }] }], ca = [{ [cl]: s, [cm]: [{ [cl]: d, [cm]: [{ [cl]: i, [cm]: [aR, "resourceId[2]"] }] }] }], cb = [aR, "resourceId[2]"], cc = [{ [cl]: g, [cm]: [{ [cl]: i, [cm]: [aR, "region"] }], [co]: "bucketPartition" }], cd = [{ [cl]: h, [cm]: [aZ, { [cl]: i, [cm]: [{ [cn]: "partitionResult" }, j] }] }], ce = [{ [cl]: y, [cm]: [{ [cl]: i, [cm]: [aR, "region"] }, true] }], cf = [{ [cl]: y, [cm]: [ba, false] }], cg = [{ [cl]: y, [cm]: [aU, false] }], ch = [{ [cl]: y, [cm]: [{ [cn]: "Region" }, true] }];
const _data = { version: "1.0", parameters: { Bucket: T, Region: T, UseFIPS: U, UseDualStack: U, Endpoint: T, ForcePathStyle: U, Accelerate: U, UseGlobalEndpoint: U, UseObjectLambdaEndpoint: V, Key: T, Prefix: T, CopySource: T, DisableAccessPoints: V, DisableMultiRegionAccessPoints: U, UseArnRegion: V, UseS3ExpressControlEndpoint: V, DisableS3ExpressSessionAuth: V }, rules: [{ [ck]: [{ [cl]: d, [cm]: bx }], rules: [{ [ck]: [W, X], error: "Accelerate cannot be used with FIPS", [cj]: f }, { [ck]: [Y, Z], error: "Cannot set dual-stack in combination with a custom endpoint.", [cj]: f }, { [ck]: [Z, X], error: "A custom endpoint cannot be combined with FIPS", [cj]: f }, { [ck]: [Z, W], error: "A custom endpoint cannot be combined with S3 Accelerate", [cj]: f }, { [ck]: [X, aa, ab], error: "Partition does not support FIPS", [cj]: f }, { [ck]: [ac, { [cl]: k, [cm]: [ad, 0, a, c], [co]: l }, { [cl]: h, [cm]: [{ [cn]: l }, "--x-s3"] }], rules: [{ [ck]: bA, error: "S3Express does not support Dual-stack.", [cj]: f }, { [ck]: bB, error: "S3Express does not support S3 Accelerate.", [cj]: f }, { [ck]: bC, rules: [{ [ck]: bD, rules: [{ [ck]: bE, rules: [{ [ck]: bF, rules: [{ endpoint: { [cp]: n, [cq]: ai, [cw]: aj }, [cj]: o }], [cj]: p }], [cj]: p }, { [ck]: bG, rules: [{ endpoint: { [cp]: r, [cq]: ai, [cw]: aj }, [cj]: o }], [cj]: p }, al], [cj]: p }, { [ck]: bE, rules: [{ [ck]: bF, rules: [{ endpoint: { [cp]: n, [cq]: am, [cw]: aj }, [cj]: o }], [cj]: p }], [cj]: p }, { [ck]: bG, rules: [{ endpoint: { [cp]: r, [cq]: am, [cw]: aj }, [cj]: o }], [cj]: p }, al], [cj]: p }, { [ck]: [an, ao], rules: [{ [ck]: [ah, ap], rules: [{ [ck]: bH, endpoint: { [cp]: "https://s3express-control-fips.{Region}.amazonaws.com/{uri_encoded_bucket}", [cq]: ai, [cw]: aj }, [cj]: o }, { endpoint: { [cp]: "https://s3express-control.{Region}.amazonaws.com/{uri_encoded_bucket}", [cq]: ai, [cw]: aj }, [cj]: o }], [cj]: p }], [cj]: p }, { [ck]: bG, rules: [{ [ck]: bD, rules: [{ [ck]: bI, rules: bJ, [cj]: p }, { [ck]: bK, rules: bJ, [cj]: p }, { [ck]: bL, rules: bJ, [cj]: p }, { [ck]: bM, rules: bJ, [cj]: p }, { [ck]: bN, rules: bJ, [cj]: p }, aq], [cj]: p }, { [ck]: bI, rules: bO, [cj]: p }, { [ck]: bK, rules: bO, [cj]: p }, { [ck]: bL, rules: bO, [cj]: p }, { [ck]: bM, rules: bO, [cj]: p }, { [ck]: bN, rules: bO, [cj]: p }, aq], [cj]: p }, al], [cj]: p }, { [ck]: [ar, an, ao], rules: [{ [ck]: bC, endpoint: { [cp]: t, [cq]: ai, [cw]: aj }, [cj]: o }, { [ck]: bH, endpoint: { [cp]: "https://s3express-control-fips.{Region}.amazonaws.com", [cq]: ai, [cw]: aj }, [cj]: o }, { endpoint: { [cp]: "https://s3express-control.{Region}.amazonaws.com", [cq]: ai, [cw]: aj }, [cj]: o }], [cj]: p }, { [ck]: [ac, { [cl]: k, [cm]: [ad, 49, 50, c], [co]: u }, { [cl]: k, [cm]: [ad, 8, 12, c], [co]: v }, { [cl]: k, [cm]: [ad, 0, 7, c], [co]: w }, { [cl]: k, [cm]: [ad, 32, 49, c], [co]: x }, { [cl]: g, [cm]: bx, [co]: "regionPartition" }, { [cl]: h, [cm]: [{ [cn]: w }, "--op-s3"] }], rules: [{ [ck]: bQ, rules: [{ [ck]: [{ [cl]: h, [cm]: [as, "e"] }], rules: [{ [ck]: bR, rules: [at, { [ck]: bC, endpoint: { [cp]: "https://{Bucket}.ec2.{url#authority}", [cq]: au, [cw]: aj }, [cj]: o }], [cj]: p }, { endpoint: { [cp]: "https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}", [cq]: au, [cw]: aj }, [cj]: o }], [cj]: p }, { [ck]: [{ [cl]: h, [cm]: [as, "o"] }], rules: [{ [ck]: bR, rules: [at, { [ck]: bC, endpoint: { [cp]: "https://{Bucket}.op-{outpostId}.{url#authority}", [cq]: au, [cw]: aj }, [cj]: o }], [cj]: p }, { endpoint: { [cp]: "https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}", [cq]: au, [cw]: aj }, [cj]: o }], [cj]: p }, { error: "Unrecognized hardware type: \"Expected hardware type o or e but got {hardwareType}\"", [cj]: f }], [cj]: p }, { error: "Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.", [cj]: f }], [cj]: p }, { [ck]: bP, rules: [{ [ck]: [Z, { [cl]: s, [cm]: [{ [cl]: d, [cm]: [{ [cl]: m, [cm]: by }] }] }], error: "Custom endpoint `{Endpoint}` was not a valid URI", [cj]: f }, { [ck]: [av, ak], rules: [{ [ck]: bT, rules: [{ [ck]: bU, rules: [{ [ck]: [W, ab], error: "S3 Accelerate cannot be used in this region", [cj]: f }, { [ck]: [Y, X, ax, ap, ay], endpoint: { [cp]: "https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}", [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [Y, X, ax, ap, aA, aB], rules: [{ endpoint: aC, [cj]: o }], [cj]: p }, { [ck]: [Y, X, ax, ap, aA, aE], endpoint: aC, [cj]: o }, { [ck]: [aF, X, ax, ap, ay], endpoint: { [cp]: "https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}", [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [aF, X, ax, ap, aA, aB], rules: [{ endpoint: aG, [cj]: o }], [cj]: p }, { [ck]: [aF, X, ax, ap, aA, aE], endpoint: aG, [cj]: o }, { [ck]: [Y, aH, W, ap, ay], endpoint: { [cp]: "https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}", [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [Y, aH, W, ap, aA, aB], rules: [{ endpoint: aI, [cj]: o }], [cj]: p }, { [ck]: [Y, aH, W, ap, aA, aE], endpoint: aI, [cj]: o }, { [ck]: [Y, aH, ax, ap, ay], endpoint: { [cp]: "https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}", [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [Y, aH, ax, ap, aA, aB], rules: [{ endpoint: aJ, [cj]: o }], [cj]: p }, { [ck]: [Y, aH, ax, ap, aA, aE], endpoint: aJ, [cj]: o }, { [ck]: [aF, aH, ax, Z, ae, af, ay], endpoint: { [cp]: C, [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [aF, aH, ax, Z, ae, aK, ay], endpoint: { [cp]: r, [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [aF, aH, ax, Z, ae, af, aA, aB], rules: [{ [ck]: bV, endpoint: aL, [cj]: o }, { endpoint: aL, [cj]: o }], [cj]: p }, { [ck]: [aF, aH, ax, Z, ae, aK, aA, aB], rules: [{ [ck]: bV, endpoint: aM, [cj]: o }, aN], [cj]: p }, { [ck]: [aF, aH, ax, Z, ae, af, aA, aE], endpoint: aL, [cj]: o }, { [ck]: [aF, aH, ax, Z, ae, aK, aA, aE], endpoint: aM, [cj]: o }, { [ck]: [aF, aH, W, ap, ay], endpoint: { [cp]: D, [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [aF, aH, W, ap, aA, aB], rules: [{ [ck]: bV, endpoint: aO, [cj]: o }, { endpoint: aO, [cj]: o }], [cj]: p }, { [ck]: [aF, aH, W, ap, aA, aE], endpoint: aO, [cj]: o }, { [ck]: [aF, aH, ax, ap, ay], endpoint: { [cp]: E, [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [aF, aH, ax, ap, aA, aB], rules: [{ [ck]: bV, endpoint: { [cp]: E, [cq]: aD, [cw]: aj }, [cj]: o }, { endpoint: aP, [cj]: o }], [cj]: p }, { [ck]: [aF, aH, ax, ap, aA, aE], endpoint: aP, [cj]: o }], [cj]: p }, aQ], [cj]: p }], [cj]: p }, { [ck]: [Z, ae, { [cl]: h, [cm]: [{ [cl]: i, [cm]: [ag, "scheme"] }, "http"] }, { [cl]: q, [cm]: [ad, c] }, av, aH, aF, ax], rules: [{ [ck]: bT, rules: [{ [ck]: bU, rules: [aN], [cj]: p }, aQ], [cj]: p }], [cj]: p }, { [ck]: [av, { [cl]: F, [cm]: bz, [co]: G }], rules: [{ [ck]: [{ [cl]: i, [cm]: [aR, "resourceId[0]"], [co]: H }, { [cl]: s, [cm]: [{ [cl]: h, [cm]: [aS, I] }] }], rules: [{ [ck]: [{ [cl]: h, [cm]: [aT, J] }], rules: [{ [ck]: bW, rules: [{ [ck]: bX, rules: [aV, aW, { [ck]: bZ, rules: [aX, { [ck]: ca, rules: [aY, { [ck]: cc, rules: [{ [ck]: bT, rules: [{ [ck]: cd, rules: [{ [ck]: ce, rules: [{ [ck]: [{ [cl]: h, [cm]: [ba, I] }], error: "Invalid ARN: Missing account id", [cj]: f }, { [ck]: cf, rules: [{ [ck]: cg, rules: [{ [ck]: bC, endpoint: { [cp]: M, [cq]: bb, [cw]: aj }, [cj]: o }, { [ck]: bH, endpoint: { [cp]: "https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}", [cq]: bb, [cw]: aj }, [cj]: o }, { endpoint: { [cp]: "https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}", [cq]: bb, [cw]: aj }, [cj]: o }], [cj]: p }, bc], [cj]: p }, bd], [cj]: p }, be], [cj]: p }, bf], [cj]: p }], [cj]: p }], [cj]: p }, bg], [cj]: p }, { error: "Invalid ARN: bucket ARN is missing a region", [cj]: f }], [cj]: p }, bh], [cj]: p }, { error: "Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`", [cj]: f }], [cj]: p }, { [ck]: bW, rules: [{ [ck]: bX, rules: [{ [ck]: bZ, rules: [{ [ck]: bW, rules: [{ [ck]: bZ, rules: [aX, { [ck]: ca, rules: [aY, { [ck]: cc, rules: [{ [ck]: bT, rules: [{ [ck]: [{ [cl]: h, [cm]: [aZ, "{partitionResult#name}"] }], rules: [{ [ck]: ce, rules: [{ [ck]: [{ [cl]: h, [cm]: [aT, B] }], rules: [{ [ck]: cf, rules: [{ [ck]: cg, rules: [{ [ck]: bB, error: "Access Points do not support S3 Accelerate", [cj]: f }, { [ck]: [X, Y], endpoint: { [cp]: "https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}", [cq]: bi, [cw]: aj }, [cj]: o }, { [ck]: [X, aF], endpoint: { [cp]: "https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}", [cq]: bi, [cw]: aj }, [cj]: o }, { [ck]: [aH, Y], endpoint: { [cp]: "https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}", [cq]: bi, [cw]: aj }, [cj]: o }, { [ck]: [aH, aF, Z, ae], endpoint: { [cp]: M, [cq]: bi, [cw]: aj }, [cj]: o }, { [ck]: [aH, aF], endpoint: { [cp]: "https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}", [cq]: bi, [cw]: aj }, [cj]: o }], [cj]: p }, bc], [cj]: p }, bd], [cj]: p }, { error: "Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}", [cj]: f }], [cj]: p }, be], [cj]: p }, bf], [cj]: p }], [cj]: p }], [cj]: p }, bg], [cj]: p }], [cj]: p }], [cj]: p }, { [ck]: [{ [cl]: y, [cm]: [aU, c] }], rules: [{ [ck]: bA, error: "S3 MRAP does not support dual-stack", [cj]: f }, { [ck]: bH, error: "S3 MRAP does not support FIPS", [cj]: f }, { [ck]: bB, error: "S3 MRAP does not support S3 Accelerate", [cj]: f }, { [ck]: [{ [cl]: e, [cm]: [{ [cn]: "DisableMultiRegionAccessPoints" }, c] }], error: "Invalid configuration: Multi-Region Access Point ARNs are disabled.", [cj]: f }, { [ck]: [{ [cl]: g, [cm]: bx, [co]: N }], rules: [{ [ck]: [{ [cl]: h, [cm]: [{ [cl]: i, [cm]: [{ [cn]: N }, j] }, { [cl]: i, [cm]: [aR, "partition"] }] }], rules: [{ endpoint: { [cp]: "https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}", [cq]: { [cs]: [{ [ct]: c, name: z, [cu]: B, [cx]: bS }] }, [cw]: aj }, [cj]: o }], [cj]: p }, { error: "Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`", [cj]: f }], [cj]: p }], [cj]: p }, { error: "Invalid Access Point Name", [cj]: f }], [cj]: p }, bh], [cj]: p }, { [ck]: [{ [cl]: h, [cm]: [aT, A] }], rules: [{ [ck]: bA, error: "S3 Outposts does not support Dual-stack", [cj]: f }, { [ck]: bH, error: "S3 Outposts does not support FIPS", [cj]: f }, { [ck]: bB, error: "S3 Outposts does not support S3 Accelerate", [cj]: f }, { [ck]: [{ [cl]: d, [cm]: [{ [cl]: i, [cm]: [aR, "resourceId[4]"] }] }], error: "Invalid Arn: Outpost Access Point ARN contains sub resources", [cj]: f }, { [ck]: [{ [cl]: i, [cm]: bY, [co]: x }], rules: [{ [ck]: bQ, rules: [aY, { [ck]: cc, rules: [{ [ck]: bT, rules: [{ [ck]: cd, rules: [{ [ck]: ce, rules: [{ [ck]: cf, rules: [{ [ck]: [{ [cl]: i, [cm]: cb, [co]: O }], rules: [{ [ck]: [{ [cl]: i, [cm]: [aR, "resourceId[3]"], [co]: L }], rules: [{ [ck]: [{ [cl]: h, [cm]: [{ [cn]: O }, K] }], rules: [{ [ck]: bC, endpoint: { [cp]: "https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}", [cq]: bj, [cw]: aj }, [cj]: o }, { endpoint: { [cp]: "https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}", [cq]: bj, [cw]: aj }, [cj]: o }], [cj]: p }, { error: "Expected an outpost type `accesspoint`, found {outpostType}", [cj]: f }], [cj]: p }, { error: "Invalid ARN: expected an access point name", [cj]: f }], [cj]: p }, { error: "Invalid ARN: Expected a 4-component resource", [cj]: f }], [cj]: p }, bd], [cj]: p }, be], [cj]: p }, bf], [cj]: p }], [cj]: p }], [cj]: p }, { error: "Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`", [cj]: f }], [cj]: p }, { error: "Invalid ARN: The Outpost Id was not set", [cj]: f }], [cj]: p }, { error: "Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})", [cj]: f }], [cj]: p }, { error: "Invalid ARN: No ARN type specified", [cj]: f }], [cj]: p }, { [ck]: [{ [cl]: k, [cm]: [ad, 0, 4, b], [co]: P }, { [cl]: h, [cm]: [{ [cn]: P }, "arn:"] }, { [cl]: s, [cm]: [{ [cl]: d, [cm]: [bk] }] }], error: "Invalid ARN: `{Bucket}` was not a valid ARN", [cj]: f }, { [ck]: [{ [cl]: e, [cm]: [aw, c] }, bk], error: "Path-style addressing cannot be used with ARN buckets", [cj]: f }, { [ck]: bF, rules: [{ [ck]: bT, rules: [{ [ck]: [ax], rules: [{ [ck]: [Y, ap, X, ay], endpoint: { [cp]: "https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}", [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [Y, ap, X, aA, aB], rules: [{ endpoint: bl, [cj]: o }], [cj]: p }, { [ck]: [Y, ap, X, aA, aE], endpoint: bl, [cj]: o }, { [ck]: [aF, ap, X, ay], endpoint: { [cp]: "https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}", [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [aF, ap, X, aA, aB], rules: [{ endpoint: bm, [cj]: o }], [cj]: p }, { [ck]: [aF, ap, X, aA, aE], endpoint: bm, [cj]: o }, { [ck]: [Y, ap, aH, ay], endpoint: { [cp]: "https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}", [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [Y, ap, aH, aA, aB], rules: [{ endpoint: bn, [cj]: o }], [cj]: p }, { [ck]: [Y, ap, aH, aA, aE], endpoint: bn, [cj]: o }, { [ck]: [aF, Z, ae, aH, ay], endpoint: { [cp]: Q, [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [aF, Z, ae, aH, aA, aB], rules: [{ [ck]: bV, endpoint: bo, [cj]: o }, { endpoint: bo, [cj]: o }], [cj]: p }, { [ck]: [aF, Z, ae, aH, aA, aE], endpoint: bo, [cj]: o }, { [ck]: [aF, ap, aH, ay], endpoint: { [cp]: R, [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [aF, ap, aH, aA, aB], rules: [{ [ck]: bV, endpoint: { [cp]: R, [cq]: aD, [cw]: aj }, [cj]: o }, { endpoint: bp, [cj]: o }], [cj]: p }, { [ck]: [aF, ap, aH, aA, aE], endpoint: bp, [cj]: o }], [cj]: p }, { error: "Path-style addressing cannot be used with S3 Accelerate", [cj]: f }], [cj]: p }], [cj]: p }], [cj]: p }, { [ck]: [{ [cl]: d, [cm]: [bq] }, { [cl]: e, [cm]: [bq, c] }], rules: [{ [ck]: bT, rules: [{ [ck]: ch, rules: [aV, aW, { [ck]: bC, endpoint: { [cp]: t, [cq]: br, [cw]: aj }, [cj]: o }, { [ck]: bH, endpoint: { [cp]: "https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}", [cq]: br, [cw]: aj }, [cj]: o }, { endpoint: { [cp]: "https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}", [cq]: br, [cw]: aj }, [cj]: o }], [cj]: p }, aQ], [cj]: p }], [cj]: p }, { [ck]: [ar], rules: [{ [ck]: bT, rules: [{ [ck]: ch, rules: [{ [ck]: [X, Y, ap, ay], endpoint: { [cp]: "https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}", [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [X, Y, ap, aA, aB], rules: [{ endpoint: bs, [cj]: o }], [cj]: p }, { [ck]: [X, Y, ap, aA, aE], endpoint: bs, [cj]: o }, { [ck]: [X, aF, ap, ay], endpoint: { [cp]: "https://s3-fips.us-east-1.{partitionResult#dnsSuffix}", [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [X, aF, ap, aA, aB], rules: [{ endpoint: bt, [cj]: o }], [cj]: p }, { [ck]: [X, aF, ap, aA, aE], endpoint: bt, [cj]: o }, { [ck]: [aH, Y, ap, ay], endpoint: { [cp]: "https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}", [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [aH, Y, ap, aA, aB], rules: [{ endpoint: bu, [cj]: o }], [cj]: p }, { [ck]: [aH, Y, ap, aA, aE], endpoint: bu, [cj]: o }, { [ck]: [aH, aF, Z, ae, ay], endpoint: { [cp]: t, [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [aH, aF, Z, ae, aA, aB], rules: [{ [ck]: bV, endpoint: bv, [cj]: o }, { endpoint: bv, [cj]: o }], [cj]: p }, { [ck]: [aH, aF, Z, ae, aA, aE], endpoint: bv, [cj]: o }, { [ck]: [aH, aF, ap, ay], endpoint: { [cp]: S, [cq]: az, [cw]: aj }, [cj]: o }, { [ck]: [aH, aF, ap, aA, aB], rules: [{ [ck]: bV, endpoint: { [cp]: S, [cq]: aD, [cw]: aj }, [cj]: o }, { endpoint: bw, [cj]: o }], [cj]: p }, { [ck]: [aH, aF, ap, aA, aE], endpoint: bw, [cj]: o }], [cj]: p }, aQ], [cj]: p }], [cj]: p }], [cj]: p }, { error: "A region must be set when sending requests to S3.", [cj]: f }] };
const ruleSet = _data;


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/models/S3ServiceException.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/models/S3ServiceException.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S3ServiceException: () => (/* binding */ S3ServiceException),
/* harmony export */   __ServiceException: () => (/* reexport safe */ _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.ServiceException)
/* harmony export */ });
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");


class S3ServiceException extends _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.ServiceException {
    constructor(options) {
        super(options);
        Object.setPrototypeOf(this, S3ServiceException.prototype);
    }
}


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/models/models_0.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/models/models_0.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AnalyticsFilter: () => (/* binding */ AnalyticsFilter),
/* harmony export */   AnalyticsS3ExportFileFormat: () => (/* binding */ AnalyticsS3ExportFileFormat),
/* harmony export */   ArchiveStatus: () => (/* binding */ ArchiveStatus),
/* harmony export */   BucketAccelerateStatus: () => (/* binding */ BucketAccelerateStatus),
/* harmony export */   BucketAlreadyExists: () => (/* binding */ BucketAlreadyExists),
/* harmony export */   BucketAlreadyOwnedByYou: () => (/* binding */ BucketAlreadyOwnedByYou),
/* harmony export */   BucketCannedACL: () => (/* binding */ BucketCannedACL),
/* harmony export */   BucketLocationConstraint: () => (/* binding */ BucketLocationConstraint),
/* harmony export */   BucketLogsPermission: () => (/* binding */ BucketLogsPermission),
/* harmony export */   BucketType: () => (/* binding */ BucketType),
/* harmony export */   BucketVersioningStatus: () => (/* binding */ BucketVersioningStatus),
/* harmony export */   ChecksumAlgorithm: () => (/* binding */ ChecksumAlgorithm),
/* harmony export */   ChecksumMode: () => (/* binding */ ChecksumMode),
/* harmony export */   ChecksumType: () => (/* binding */ ChecksumType),
/* harmony export */   CompleteMultipartUploadOutputFilterSensitiveLog: () => (/* binding */ CompleteMultipartUploadOutputFilterSensitiveLog),
/* harmony export */   CompleteMultipartUploadRequestFilterSensitiveLog: () => (/* binding */ CompleteMultipartUploadRequestFilterSensitiveLog),
/* harmony export */   CopyObjectOutputFilterSensitiveLog: () => (/* binding */ CopyObjectOutputFilterSensitiveLog),
/* harmony export */   CopyObjectRequestFilterSensitiveLog: () => (/* binding */ CopyObjectRequestFilterSensitiveLog),
/* harmony export */   CreateMultipartUploadOutputFilterSensitiveLog: () => (/* binding */ CreateMultipartUploadOutputFilterSensitiveLog),
/* harmony export */   CreateMultipartUploadRequestFilterSensitiveLog: () => (/* binding */ CreateMultipartUploadRequestFilterSensitiveLog),
/* harmony export */   CreateSessionOutputFilterSensitiveLog: () => (/* binding */ CreateSessionOutputFilterSensitiveLog),
/* harmony export */   CreateSessionRequestFilterSensitiveLog: () => (/* binding */ CreateSessionRequestFilterSensitiveLog),
/* harmony export */   DataRedundancy: () => (/* binding */ DataRedundancy),
/* harmony export */   DeleteMarkerReplicationStatus: () => (/* binding */ DeleteMarkerReplicationStatus),
/* harmony export */   EncodingType: () => (/* binding */ EncodingType),
/* harmony export */   Event: () => (/* binding */ Event),
/* harmony export */   ExistingObjectReplicationStatus: () => (/* binding */ ExistingObjectReplicationStatus),
/* harmony export */   ExpirationStatus: () => (/* binding */ ExpirationStatus),
/* harmony export */   FilterRuleName: () => (/* binding */ FilterRuleName),
/* harmony export */   GetBucketEncryptionOutputFilterSensitiveLog: () => (/* binding */ GetBucketEncryptionOutputFilterSensitiveLog),
/* harmony export */   GetBucketInventoryConfigurationOutputFilterSensitiveLog: () => (/* binding */ GetBucketInventoryConfigurationOutputFilterSensitiveLog),
/* harmony export */   GetObjectAttributesRequestFilterSensitiveLog: () => (/* binding */ GetObjectAttributesRequestFilterSensitiveLog),
/* harmony export */   GetObjectOutputFilterSensitiveLog: () => (/* binding */ GetObjectOutputFilterSensitiveLog),
/* harmony export */   GetObjectRequestFilterSensitiveLog: () => (/* binding */ GetObjectRequestFilterSensitiveLog),
/* harmony export */   GetObjectTorrentOutputFilterSensitiveLog: () => (/* binding */ GetObjectTorrentOutputFilterSensitiveLog),
/* harmony export */   HeadObjectOutputFilterSensitiveLog: () => (/* binding */ HeadObjectOutputFilterSensitiveLog),
/* harmony export */   HeadObjectRequestFilterSensitiveLog: () => (/* binding */ HeadObjectRequestFilterSensitiveLog),
/* harmony export */   IntelligentTieringAccessTier: () => (/* binding */ IntelligentTieringAccessTier),
/* harmony export */   IntelligentTieringStatus: () => (/* binding */ IntelligentTieringStatus),
/* harmony export */   InvalidObjectState: () => (/* binding */ InvalidObjectState),
/* harmony export */   InventoryConfigurationFilterSensitiveLog: () => (/* binding */ InventoryConfigurationFilterSensitiveLog),
/* harmony export */   InventoryDestinationFilterSensitiveLog: () => (/* binding */ InventoryDestinationFilterSensitiveLog),
/* harmony export */   InventoryEncryptionFilterSensitiveLog: () => (/* binding */ InventoryEncryptionFilterSensitiveLog),
/* harmony export */   InventoryFormat: () => (/* binding */ InventoryFormat),
/* harmony export */   InventoryFrequency: () => (/* binding */ InventoryFrequency),
/* harmony export */   InventoryIncludedObjectVersions: () => (/* binding */ InventoryIncludedObjectVersions),
/* harmony export */   InventoryOptionalField: () => (/* binding */ InventoryOptionalField),
/* harmony export */   InventoryS3BucketDestinationFilterSensitiveLog: () => (/* binding */ InventoryS3BucketDestinationFilterSensitiveLog),
/* harmony export */   ListBucketInventoryConfigurationsOutputFilterSensitiveLog: () => (/* binding */ ListBucketInventoryConfigurationsOutputFilterSensitiveLog),
/* harmony export */   ListPartsRequestFilterSensitiveLog: () => (/* binding */ ListPartsRequestFilterSensitiveLog),
/* harmony export */   LocationType: () => (/* binding */ LocationType),
/* harmony export */   MFADeleteStatus: () => (/* binding */ MFADeleteStatus),
/* harmony export */   MetadataDirective: () => (/* binding */ MetadataDirective),
/* harmony export */   MetricsFilter: () => (/* binding */ MetricsFilter),
/* harmony export */   MetricsStatus: () => (/* binding */ MetricsStatus),
/* harmony export */   NoSuchBucket: () => (/* binding */ NoSuchBucket),
/* harmony export */   NoSuchKey: () => (/* binding */ NoSuchKey),
/* harmony export */   NoSuchUpload: () => (/* binding */ NoSuchUpload),
/* harmony export */   NotFound: () => (/* binding */ NotFound),
/* harmony export */   ObjectAttributes: () => (/* binding */ ObjectAttributes),
/* harmony export */   ObjectCannedACL: () => (/* binding */ ObjectCannedACL),
/* harmony export */   ObjectLockEnabled: () => (/* binding */ ObjectLockEnabled),
/* harmony export */   ObjectLockLegalHoldStatus: () => (/* binding */ ObjectLockLegalHoldStatus),
/* harmony export */   ObjectLockMode: () => (/* binding */ ObjectLockMode),
/* harmony export */   ObjectLockRetentionMode: () => (/* binding */ ObjectLockRetentionMode),
/* harmony export */   ObjectNotInActiveTierError: () => (/* binding */ ObjectNotInActiveTierError),
/* harmony export */   ObjectOwnership: () => (/* binding */ ObjectOwnership),
/* harmony export */   ObjectStorageClass: () => (/* binding */ ObjectStorageClass),
/* harmony export */   ObjectVersionStorageClass: () => (/* binding */ ObjectVersionStorageClass),
/* harmony export */   OptionalObjectAttributes: () => (/* binding */ OptionalObjectAttributes),
/* harmony export */   OwnerOverride: () => (/* binding */ OwnerOverride),
/* harmony export */   PartitionDateSource: () => (/* binding */ PartitionDateSource),
/* harmony export */   Payer: () => (/* binding */ Payer),
/* harmony export */   Permission: () => (/* binding */ Permission),
/* harmony export */   Protocol: () => (/* binding */ Protocol),
/* harmony export */   ReplicaModificationsStatus: () => (/* binding */ ReplicaModificationsStatus),
/* harmony export */   ReplicationRuleStatus: () => (/* binding */ ReplicationRuleStatus),
/* harmony export */   ReplicationStatus: () => (/* binding */ ReplicationStatus),
/* harmony export */   ReplicationTimeStatus: () => (/* binding */ ReplicationTimeStatus),
/* harmony export */   RequestCharged: () => (/* binding */ RequestCharged),
/* harmony export */   RequestPayer: () => (/* binding */ RequestPayer),
/* harmony export */   SSEKMSFilterSensitiveLog: () => (/* binding */ SSEKMSFilterSensitiveLog),
/* harmony export */   ServerSideEncryption: () => (/* binding */ ServerSideEncryption),
/* harmony export */   ServerSideEncryptionByDefaultFilterSensitiveLog: () => (/* binding */ ServerSideEncryptionByDefaultFilterSensitiveLog),
/* harmony export */   ServerSideEncryptionConfigurationFilterSensitiveLog: () => (/* binding */ ServerSideEncryptionConfigurationFilterSensitiveLog),
/* harmony export */   ServerSideEncryptionRuleFilterSensitiveLog: () => (/* binding */ ServerSideEncryptionRuleFilterSensitiveLog),
/* harmony export */   SessionCredentialsFilterSensitiveLog: () => (/* binding */ SessionCredentialsFilterSensitiveLog),
/* harmony export */   SessionMode: () => (/* binding */ SessionMode),
/* harmony export */   SseKmsEncryptedObjectsStatus: () => (/* binding */ SseKmsEncryptedObjectsStatus),
/* harmony export */   StorageClass: () => (/* binding */ StorageClass),
/* harmony export */   StorageClassAnalysisSchemaVersion: () => (/* binding */ StorageClassAnalysisSchemaVersion),
/* harmony export */   TaggingDirective: () => (/* binding */ TaggingDirective),
/* harmony export */   TransitionDefaultMinimumObjectSize: () => (/* binding */ TransitionDefaultMinimumObjectSize),
/* harmony export */   TransitionStorageClass: () => (/* binding */ TransitionStorageClass),
/* harmony export */   Type: () => (/* binding */ Type)
/* harmony export */ });
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./S3ServiceException */ "../node_modules/@aws-sdk/client-s3/dist-es/models/S3ServiceException.js");


const RequestCharged = {
    requester: "requester",
};
const RequestPayer = {
    requester: "requester",
};
class NoSuchUpload extends _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__.S3ServiceException {
    name = "NoSuchUpload";
    $fault = "client";
    constructor(opts) {
        super({
            name: "NoSuchUpload",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, NoSuchUpload.prototype);
    }
}
const BucketAccelerateStatus = {
    Enabled: "Enabled",
    Suspended: "Suspended",
};
const Type = {
    AmazonCustomerByEmail: "AmazonCustomerByEmail",
    CanonicalUser: "CanonicalUser",
    Group: "Group",
};
const Permission = {
    FULL_CONTROL: "FULL_CONTROL",
    READ: "READ",
    READ_ACP: "READ_ACP",
    WRITE: "WRITE",
    WRITE_ACP: "WRITE_ACP",
};
const OwnerOverride = {
    Destination: "Destination",
};
const ChecksumType = {
    COMPOSITE: "COMPOSITE",
    FULL_OBJECT: "FULL_OBJECT",
};
const ServerSideEncryption = {
    AES256: "AES256",
    aws_kms: "aws:kms",
    aws_kms_dsse: "aws:kms:dsse",
};
const ObjectCannedACL = {
    authenticated_read: "authenticated-read",
    aws_exec_read: "aws-exec-read",
    bucket_owner_full_control: "bucket-owner-full-control",
    bucket_owner_read: "bucket-owner-read",
    private: "private",
    public_read: "public-read",
    public_read_write: "public-read-write",
};
const ChecksumAlgorithm = {
    CRC32: "CRC32",
    CRC32C: "CRC32C",
    CRC64NVME: "CRC64NVME",
    SHA1: "SHA1",
    SHA256: "SHA256",
};
const MetadataDirective = {
    COPY: "COPY",
    REPLACE: "REPLACE",
};
const ObjectLockLegalHoldStatus = {
    OFF: "OFF",
    ON: "ON",
};
const ObjectLockMode = {
    COMPLIANCE: "COMPLIANCE",
    GOVERNANCE: "GOVERNANCE",
};
const StorageClass = {
    DEEP_ARCHIVE: "DEEP_ARCHIVE",
    EXPRESS_ONEZONE: "EXPRESS_ONEZONE",
    GLACIER: "GLACIER",
    GLACIER_IR: "GLACIER_IR",
    INTELLIGENT_TIERING: "INTELLIGENT_TIERING",
    ONEZONE_IA: "ONEZONE_IA",
    OUTPOSTS: "OUTPOSTS",
    REDUCED_REDUNDANCY: "REDUCED_REDUNDANCY",
    SNOW: "SNOW",
    STANDARD: "STANDARD",
    STANDARD_IA: "STANDARD_IA",
};
const TaggingDirective = {
    COPY: "COPY",
    REPLACE: "REPLACE",
};
class ObjectNotInActiveTierError extends _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__.S3ServiceException {
    name = "ObjectNotInActiveTierError";
    $fault = "client";
    constructor(opts) {
        super({
            name: "ObjectNotInActiveTierError",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, ObjectNotInActiveTierError.prototype);
    }
}
class BucketAlreadyExists extends _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__.S3ServiceException {
    name = "BucketAlreadyExists";
    $fault = "client";
    constructor(opts) {
        super({
            name: "BucketAlreadyExists",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, BucketAlreadyExists.prototype);
    }
}
class BucketAlreadyOwnedByYou extends _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__.S3ServiceException {
    name = "BucketAlreadyOwnedByYou";
    $fault = "client";
    constructor(opts) {
        super({
            name: "BucketAlreadyOwnedByYou",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, BucketAlreadyOwnedByYou.prototype);
    }
}
const BucketCannedACL = {
    authenticated_read: "authenticated-read",
    private: "private",
    public_read: "public-read",
    public_read_write: "public-read-write",
};
const DataRedundancy = {
    SingleAvailabilityZone: "SingleAvailabilityZone",
    SingleLocalZone: "SingleLocalZone",
};
const BucketType = {
    Directory: "Directory",
};
const LocationType = {
    AvailabilityZone: "AvailabilityZone",
    LocalZone: "LocalZone",
};
const BucketLocationConstraint = {
    EU: "EU",
    af_south_1: "af-south-1",
    ap_east_1: "ap-east-1",
    ap_northeast_1: "ap-northeast-1",
    ap_northeast_2: "ap-northeast-2",
    ap_northeast_3: "ap-northeast-3",
    ap_south_1: "ap-south-1",
    ap_south_2: "ap-south-2",
    ap_southeast_1: "ap-southeast-1",
    ap_southeast_2: "ap-southeast-2",
    ap_southeast_3: "ap-southeast-3",
    ap_southeast_4: "ap-southeast-4",
    ap_southeast_5: "ap-southeast-5",
    ca_central_1: "ca-central-1",
    cn_north_1: "cn-north-1",
    cn_northwest_1: "cn-northwest-1",
    eu_central_1: "eu-central-1",
    eu_central_2: "eu-central-2",
    eu_north_1: "eu-north-1",
    eu_south_1: "eu-south-1",
    eu_south_2: "eu-south-2",
    eu_west_1: "eu-west-1",
    eu_west_2: "eu-west-2",
    eu_west_3: "eu-west-3",
    il_central_1: "il-central-1",
    me_central_1: "me-central-1",
    me_south_1: "me-south-1",
    sa_east_1: "sa-east-1",
    us_east_2: "us-east-2",
    us_gov_east_1: "us-gov-east-1",
    us_gov_west_1: "us-gov-west-1",
    us_west_1: "us-west-1",
    us_west_2: "us-west-2",
};
const ObjectOwnership = {
    BucketOwnerEnforced: "BucketOwnerEnforced",
    BucketOwnerPreferred: "BucketOwnerPreferred",
    ObjectWriter: "ObjectWriter",
};
const SessionMode = {
    ReadOnly: "ReadOnly",
    ReadWrite: "ReadWrite",
};
class NoSuchBucket extends _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__.S3ServiceException {
    name = "NoSuchBucket";
    $fault = "client";
    constructor(opts) {
        super({
            name: "NoSuchBucket",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, NoSuchBucket.prototype);
    }
}
var AnalyticsFilter;
(function (AnalyticsFilter) {
    AnalyticsFilter.visit = (value, visitor) => {
        if (value.Prefix !== undefined)
            return visitor.Prefix(value.Prefix);
        if (value.Tag !== undefined)
            return visitor.Tag(value.Tag);
        if (value.And !== undefined)
            return visitor.And(value.And);
        return visitor._(value.$unknown[0], value.$unknown[1]);
    };
})(AnalyticsFilter || (AnalyticsFilter = {}));
const AnalyticsS3ExportFileFormat = {
    CSV: "CSV",
};
const StorageClassAnalysisSchemaVersion = {
    V_1: "V_1",
};
const IntelligentTieringStatus = {
    Disabled: "Disabled",
    Enabled: "Enabled",
};
const IntelligentTieringAccessTier = {
    ARCHIVE_ACCESS: "ARCHIVE_ACCESS",
    DEEP_ARCHIVE_ACCESS: "DEEP_ARCHIVE_ACCESS",
};
const InventoryFormat = {
    CSV: "CSV",
    ORC: "ORC",
    Parquet: "Parquet",
};
const InventoryIncludedObjectVersions = {
    All: "All",
    Current: "Current",
};
const InventoryOptionalField = {
    BucketKeyStatus: "BucketKeyStatus",
    ChecksumAlgorithm: "ChecksumAlgorithm",
    ETag: "ETag",
    EncryptionStatus: "EncryptionStatus",
    IntelligentTieringAccessTier: "IntelligentTieringAccessTier",
    IsMultipartUploaded: "IsMultipartUploaded",
    LastModifiedDate: "LastModifiedDate",
    ObjectAccessControlList: "ObjectAccessControlList",
    ObjectLockLegalHoldStatus: "ObjectLockLegalHoldStatus",
    ObjectLockMode: "ObjectLockMode",
    ObjectLockRetainUntilDate: "ObjectLockRetainUntilDate",
    ObjectOwner: "ObjectOwner",
    ReplicationStatus: "ReplicationStatus",
    Size: "Size",
    StorageClass: "StorageClass",
};
const InventoryFrequency = {
    Daily: "Daily",
    Weekly: "Weekly",
};
const TransitionStorageClass = {
    DEEP_ARCHIVE: "DEEP_ARCHIVE",
    GLACIER: "GLACIER",
    GLACIER_IR: "GLACIER_IR",
    INTELLIGENT_TIERING: "INTELLIGENT_TIERING",
    ONEZONE_IA: "ONEZONE_IA",
    STANDARD_IA: "STANDARD_IA",
};
const ExpirationStatus = {
    Disabled: "Disabled",
    Enabled: "Enabled",
};
const TransitionDefaultMinimumObjectSize = {
    all_storage_classes_128K: "all_storage_classes_128K",
    varies_by_storage_class: "varies_by_storage_class",
};
const BucketLogsPermission = {
    FULL_CONTROL: "FULL_CONTROL",
    READ: "READ",
    WRITE: "WRITE",
};
const PartitionDateSource = {
    DeliveryTime: "DeliveryTime",
    EventTime: "EventTime",
};
var MetricsFilter;
(function (MetricsFilter) {
    MetricsFilter.visit = (value, visitor) => {
        if (value.Prefix !== undefined)
            return visitor.Prefix(value.Prefix);
        if (value.Tag !== undefined)
            return visitor.Tag(value.Tag);
        if (value.AccessPointArn !== undefined)
            return visitor.AccessPointArn(value.AccessPointArn);
        if (value.And !== undefined)
            return visitor.And(value.And);
        return visitor._(value.$unknown[0], value.$unknown[1]);
    };
})(MetricsFilter || (MetricsFilter = {}));
const Event = {
    s3_IntelligentTiering: "s3:IntelligentTiering",
    s3_LifecycleExpiration_: "s3:LifecycleExpiration:*",
    s3_LifecycleExpiration_Delete: "s3:LifecycleExpiration:Delete",
    s3_LifecycleExpiration_DeleteMarkerCreated: "s3:LifecycleExpiration:DeleteMarkerCreated",
    s3_LifecycleTransition: "s3:LifecycleTransition",
    s3_ObjectAcl_Put: "s3:ObjectAcl:Put",
    s3_ObjectCreated_: "s3:ObjectCreated:*",
    s3_ObjectCreated_CompleteMultipartUpload: "s3:ObjectCreated:CompleteMultipartUpload",
    s3_ObjectCreated_Copy: "s3:ObjectCreated:Copy",
    s3_ObjectCreated_Post: "s3:ObjectCreated:Post",
    s3_ObjectCreated_Put: "s3:ObjectCreated:Put",
    s3_ObjectRemoved_: "s3:ObjectRemoved:*",
    s3_ObjectRemoved_Delete: "s3:ObjectRemoved:Delete",
    s3_ObjectRemoved_DeleteMarkerCreated: "s3:ObjectRemoved:DeleteMarkerCreated",
    s3_ObjectRestore_: "s3:ObjectRestore:*",
    s3_ObjectRestore_Completed: "s3:ObjectRestore:Completed",
    s3_ObjectRestore_Delete: "s3:ObjectRestore:Delete",
    s3_ObjectRestore_Post: "s3:ObjectRestore:Post",
    s3_ObjectTagging_: "s3:ObjectTagging:*",
    s3_ObjectTagging_Delete: "s3:ObjectTagging:Delete",
    s3_ObjectTagging_Put: "s3:ObjectTagging:Put",
    s3_ReducedRedundancyLostObject: "s3:ReducedRedundancyLostObject",
    s3_Replication_: "s3:Replication:*",
    s3_Replication_OperationFailedReplication: "s3:Replication:OperationFailedReplication",
    s3_Replication_OperationMissedThreshold: "s3:Replication:OperationMissedThreshold",
    s3_Replication_OperationNotTracked: "s3:Replication:OperationNotTracked",
    s3_Replication_OperationReplicatedAfterThreshold: "s3:Replication:OperationReplicatedAfterThreshold",
};
const FilterRuleName = {
    prefix: "prefix",
    suffix: "suffix",
};
const DeleteMarkerReplicationStatus = {
    Disabled: "Disabled",
    Enabled: "Enabled",
};
const MetricsStatus = {
    Disabled: "Disabled",
    Enabled: "Enabled",
};
const ReplicationTimeStatus = {
    Disabled: "Disabled",
    Enabled: "Enabled",
};
const ExistingObjectReplicationStatus = {
    Disabled: "Disabled",
    Enabled: "Enabled",
};
const ReplicaModificationsStatus = {
    Disabled: "Disabled",
    Enabled: "Enabled",
};
const SseKmsEncryptedObjectsStatus = {
    Disabled: "Disabled",
    Enabled: "Enabled",
};
const ReplicationRuleStatus = {
    Disabled: "Disabled",
    Enabled: "Enabled",
};
const Payer = {
    BucketOwner: "BucketOwner",
    Requester: "Requester",
};
const MFADeleteStatus = {
    Disabled: "Disabled",
    Enabled: "Enabled",
};
const BucketVersioningStatus = {
    Enabled: "Enabled",
    Suspended: "Suspended",
};
const Protocol = {
    http: "http",
    https: "https",
};
const ReplicationStatus = {
    COMPLETE: "COMPLETE",
    COMPLETED: "COMPLETED",
    FAILED: "FAILED",
    PENDING: "PENDING",
    REPLICA: "REPLICA",
};
const ChecksumMode = {
    ENABLED: "ENABLED",
};
class InvalidObjectState extends _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__.S3ServiceException {
    name = "InvalidObjectState";
    $fault = "client";
    StorageClass;
    AccessTier;
    constructor(opts) {
        super({
            name: "InvalidObjectState",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, InvalidObjectState.prototype);
        this.StorageClass = opts.StorageClass;
        this.AccessTier = opts.AccessTier;
    }
}
class NoSuchKey extends _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__.S3ServiceException {
    name = "NoSuchKey";
    $fault = "client";
    constructor(opts) {
        super({
            name: "NoSuchKey",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, NoSuchKey.prototype);
    }
}
const ObjectAttributes = {
    CHECKSUM: "Checksum",
    ETAG: "ETag",
    OBJECT_PARTS: "ObjectParts",
    OBJECT_SIZE: "ObjectSize",
    STORAGE_CLASS: "StorageClass",
};
const ObjectLockEnabled = {
    Enabled: "Enabled",
};
const ObjectLockRetentionMode = {
    COMPLIANCE: "COMPLIANCE",
    GOVERNANCE: "GOVERNANCE",
};
class NotFound extends _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__.S3ServiceException {
    name = "NotFound";
    $fault = "client";
    constructor(opts) {
        super({
            name: "NotFound",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, NotFound.prototype);
    }
}
const ArchiveStatus = {
    ARCHIVE_ACCESS: "ARCHIVE_ACCESS",
    DEEP_ARCHIVE_ACCESS: "DEEP_ARCHIVE_ACCESS",
};
const EncodingType = {
    url: "url",
};
const ObjectStorageClass = {
    DEEP_ARCHIVE: "DEEP_ARCHIVE",
    EXPRESS_ONEZONE: "EXPRESS_ONEZONE",
    GLACIER: "GLACIER",
    GLACIER_IR: "GLACIER_IR",
    INTELLIGENT_TIERING: "INTELLIGENT_TIERING",
    ONEZONE_IA: "ONEZONE_IA",
    OUTPOSTS: "OUTPOSTS",
    REDUCED_REDUNDANCY: "REDUCED_REDUNDANCY",
    SNOW: "SNOW",
    STANDARD: "STANDARD",
    STANDARD_IA: "STANDARD_IA",
};
const OptionalObjectAttributes = {
    RESTORE_STATUS: "RestoreStatus",
};
const ObjectVersionStorageClass = {
    STANDARD: "STANDARD",
};
const CompleteMultipartUploadOutputFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const CompleteMultipartUploadRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSECustomerKey && { SSECustomerKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const CopyObjectOutputFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.SSEKMSEncryptionContext && { SSEKMSEncryptionContext: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const CopyObjectRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSECustomerKey && { SSECustomerKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.SSEKMSEncryptionContext && { SSEKMSEncryptionContext: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.CopySourceSSECustomerKey && { CopySourceSSECustomerKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const CreateMultipartUploadOutputFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.SSEKMSEncryptionContext && { SSEKMSEncryptionContext: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const CreateMultipartUploadRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSECustomerKey && { SSECustomerKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.SSEKMSEncryptionContext && { SSEKMSEncryptionContext: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const SessionCredentialsFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SecretAccessKey && { SecretAccessKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.SessionToken && { SessionToken: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const CreateSessionOutputFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.SSEKMSEncryptionContext && { SSEKMSEncryptionContext: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.Credentials && { Credentials: SessionCredentialsFilterSensitiveLog(obj.Credentials) }),
});
const CreateSessionRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.SSEKMSEncryptionContext && { SSEKMSEncryptionContext: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const ServerSideEncryptionByDefaultFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.KMSMasterKeyID && { KMSMasterKeyID: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const ServerSideEncryptionRuleFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.ApplyServerSideEncryptionByDefault && {
        ApplyServerSideEncryptionByDefault: ServerSideEncryptionByDefaultFilterSensitiveLog(obj.ApplyServerSideEncryptionByDefault),
    }),
});
const ServerSideEncryptionConfigurationFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.Rules && { Rules: obj.Rules.map((item) => ServerSideEncryptionRuleFilterSensitiveLog(item)) }),
});
const GetBucketEncryptionOutputFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.ServerSideEncryptionConfiguration && {
        ServerSideEncryptionConfiguration: ServerSideEncryptionConfigurationFilterSensitiveLog(obj.ServerSideEncryptionConfiguration),
    }),
});
const SSEKMSFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.KeyId && { KeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const InventoryEncryptionFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSEKMS && { SSEKMS: SSEKMSFilterSensitiveLog(obj.SSEKMS) }),
});
const InventoryS3BucketDestinationFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.Encryption && { Encryption: InventoryEncryptionFilterSensitiveLog(obj.Encryption) }),
});
const InventoryDestinationFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.S3BucketDestination && {
        S3BucketDestination: InventoryS3BucketDestinationFilterSensitiveLog(obj.S3BucketDestination),
    }),
});
const InventoryConfigurationFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.Destination && { Destination: InventoryDestinationFilterSensitiveLog(obj.Destination) }),
});
const GetBucketInventoryConfigurationOutputFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.InventoryConfiguration && {
        InventoryConfiguration: InventoryConfigurationFilterSensitiveLog(obj.InventoryConfiguration),
    }),
});
const GetObjectOutputFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const GetObjectRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSECustomerKey && { SSECustomerKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const GetObjectAttributesRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSECustomerKey && { SSECustomerKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const GetObjectTorrentOutputFilterSensitiveLog = (obj) => ({
    ...obj,
});
const HeadObjectOutputFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const HeadObjectRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSECustomerKey && { SSECustomerKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const ListBucketInventoryConfigurationsOutputFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.InventoryConfigurationList && {
        InventoryConfigurationList: obj.InventoryConfigurationList.map((item) => InventoryConfigurationFilterSensitiveLog(item)),
    }),
});
const ListPartsRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSECustomerKey && { SSECustomerKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/models/models_1.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/models/models_1.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CompressionType: () => (/* binding */ CompressionType),
/* harmony export */   EncryptionFilterSensitiveLog: () => (/* binding */ EncryptionFilterSensitiveLog),
/* harmony export */   EncryptionTypeMismatch: () => (/* binding */ EncryptionTypeMismatch),
/* harmony export */   ExpressionType: () => (/* binding */ ExpressionType),
/* harmony export */   FileHeaderInfo: () => (/* binding */ FileHeaderInfo),
/* harmony export */   InvalidRequest: () => (/* binding */ InvalidRequest),
/* harmony export */   InvalidWriteOffset: () => (/* binding */ InvalidWriteOffset),
/* harmony export */   JSONType: () => (/* binding */ JSONType),
/* harmony export */   MFADelete: () => (/* binding */ MFADelete),
/* harmony export */   ObjectAlreadyInActiveTierError: () => (/* binding */ ObjectAlreadyInActiveTierError),
/* harmony export */   OutputLocationFilterSensitiveLog: () => (/* binding */ OutputLocationFilterSensitiveLog),
/* harmony export */   PutBucketEncryptionRequestFilterSensitiveLog: () => (/* binding */ PutBucketEncryptionRequestFilterSensitiveLog),
/* harmony export */   PutBucketInventoryConfigurationRequestFilterSensitiveLog: () => (/* binding */ PutBucketInventoryConfigurationRequestFilterSensitiveLog),
/* harmony export */   PutObjectOutputFilterSensitiveLog: () => (/* binding */ PutObjectOutputFilterSensitiveLog),
/* harmony export */   PutObjectRequestFilterSensitiveLog: () => (/* binding */ PutObjectRequestFilterSensitiveLog),
/* harmony export */   QuoteFields: () => (/* binding */ QuoteFields),
/* harmony export */   RestoreObjectRequestFilterSensitiveLog: () => (/* binding */ RestoreObjectRequestFilterSensitiveLog),
/* harmony export */   RestoreRequestFilterSensitiveLog: () => (/* binding */ RestoreRequestFilterSensitiveLog),
/* harmony export */   RestoreRequestType: () => (/* binding */ RestoreRequestType),
/* harmony export */   S3LocationFilterSensitiveLog: () => (/* binding */ S3LocationFilterSensitiveLog),
/* harmony export */   SelectObjectContentEventStream: () => (/* binding */ SelectObjectContentEventStream),
/* harmony export */   SelectObjectContentEventStreamFilterSensitiveLog: () => (/* binding */ SelectObjectContentEventStreamFilterSensitiveLog),
/* harmony export */   SelectObjectContentOutputFilterSensitiveLog: () => (/* binding */ SelectObjectContentOutputFilterSensitiveLog),
/* harmony export */   SelectObjectContentRequestFilterSensitiveLog: () => (/* binding */ SelectObjectContentRequestFilterSensitiveLog),
/* harmony export */   Tier: () => (/* binding */ Tier),
/* harmony export */   TooManyParts: () => (/* binding */ TooManyParts),
/* harmony export */   UploadPartCopyOutputFilterSensitiveLog: () => (/* binding */ UploadPartCopyOutputFilterSensitiveLog),
/* harmony export */   UploadPartCopyRequestFilterSensitiveLog: () => (/* binding */ UploadPartCopyRequestFilterSensitiveLog),
/* harmony export */   UploadPartOutputFilterSensitiveLog: () => (/* binding */ UploadPartOutputFilterSensitiveLog),
/* harmony export */   UploadPartRequestFilterSensitiveLog: () => (/* binding */ UploadPartRequestFilterSensitiveLog),
/* harmony export */   WriteGetObjectResponseRequestFilterSensitiveLog: () => (/* binding */ WriteGetObjectResponseRequestFilterSensitiveLog)
/* harmony export */ });
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var _models_0__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./models_0 */ "../node_modules/@aws-sdk/client-s3/dist-es/models/models_0.js");
/* harmony import */ var _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./S3ServiceException */ "../node_modules/@aws-sdk/client-s3/dist-es/models/S3ServiceException.js");



const MFADelete = {
    Disabled: "Disabled",
    Enabled: "Enabled",
};
class EncryptionTypeMismatch extends _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__.S3ServiceException {
    name = "EncryptionTypeMismatch";
    $fault = "client";
    constructor(opts) {
        super({
            name: "EncryptionTypeMismatch",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, EncryptionTypeMismatch.prototype);
    }
}
class InvalidRequest extends _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__.S3ServiceException {
    name = "InvalidRequest";
    $fault = "client";
    constructor(opts) {
        super({
            name: "InvalidRequest",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, InvalidRequest.prototype);
    }
}
class InvalidWriteOffset extends _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__.S3ServiceException {
    name = "InvalidWriteOffset";
    $fault = "client";
    constructor(opts) {
        super({
            name: "InvalidWriteOffset",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, InvalidWriteOffset.prototype);
    }
}
class TooManyParts extends _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__.S3ServiceException {
    name = "TooManyParts";
    $fault = "client";
    constructor(opts) {
        super({
            name: "TooManyParts",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, TooManyParts.prototype);
    }
}
class ObjectAlreadyInActiveTierError extends _S3ServiceException__WEBPACK_IMPORTED_MODULE_1__.S3ServiceException {
    name = "ObjectAlreadyInActiveTierError";
    $fault = "client";
    constructor(opts) {
        super({
            name: "ObjectAlreadyInActiveTierError",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, ObjectAlreadyInActiveTierError.prototype);
    }
}
const Tier = {
    Bulk: "Bulk",
    Expedited: "Expedited",
    Standard: "Standard",
};
const ExpressionType = {
    SQL: "SQL",
};
const CompressionType = {
    BZIP2: "BZIP2",
    GZIP: "GZIP",
    NONE: "NONE",
};
const FileHeaderInfo = {
    IGNORE: "IGNORE",
    NONE: "NONE",
    USE: "USE",
};
const JSONType = {
    DOCUMENT: "DOCUMENT",
    LINES: "LINES",
};
const QuoteFields = {
    ALWAYS: "ALWAYS",
    ASNEEDED: "ASNEEDED",
};
const RestoreRequestType = {
    SELECT: "SELECT",
};
var SelectObjectContentEventStream;
(function (SelectObjectContentEventStream) {
    SelectObjectContentEventStream.visit = (value, visitor) => {
        if (value.Records !== undefined)
            return visitor.Records(value.Records);
        if (value.Stats !== undefined)
            return visitor.Stats(value.Stats);
        if (value.Progress !== undefined)
            return visitor.Progress(value.Progress);
        if (value.Cont !== undefined)
            return visitor.Cont(value.Cont);
        if (value.End !== undefined)
            return visitor.End(value.End);
        return visitor._(value.$unknown[0], value.$unknown[1]);
    };
})(SelectObjectContentEventStream || (SelectObjectContentEventStream = {}));
const PutBucketEncryptionRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.ServerSideEncryptionConfiguration && {
        ServerSideEncryptionConfiguration: (0,_models_0__WEBPACK_IMPORTED_MODULE_2__.ServerSideEncryptionConfigurationFilterSensitiveLog)(obj.ServerSideEncryptionConfiguration),
    }),
});
const PutBucketInventoryConfigurationRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.InventoryConfiguration && {
        InventoryConfiguration: (0,_models_0__WEBPACK_IMPORTED_MODULE_2__.InventoryConfigurationFilterSensitiveLog)(obj.InventoryConfiguration),
    }),
});
const PutObjectOutputFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.SSEKMSEncryptionContext && { SSEKMSEncryptionContext: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const PutObjectRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSECustomerKey && { SSECustomerKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.SSEKMSEncryptionContext && { SSEKMSEncryptionContext: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const EncryptionFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.KMSKeyId && { KMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const S3LocationFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.Encryption && { Encryption: EncryptionFilterSensitiveLog(obj.Encryption) }),
});
const OutputLocationFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.S3 && { S3: S3LocationFilterSensitiveLog(obj.S3) }),
});
const RestoreRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.OutputLocation && { OutputLocation: OutputLocationFilterSensitiveLog(obj.OutputLocation) }),
});
const RestoreObjectRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.RestoreRequest && { RestoreRequest: RestoreRequestFilterSensitiveLog(obj.RestoreRequest) }),
});
const SelectObjectContentEventStreamFilterSensitiveLog = (obj) => {
    if (obj.Records !== undefined)
        return { Records: obj.Records };
    if (obj.Stats !== undefined)
        return { Stats: obj.Stats };
    if (obj.Progress !== undefined)
        return { Progress: obj.Progress };
    if (obj.Cont !== undefined)
        return { Cont: obj.Cont };
    if (obj.End !== undefined)
        return { End: obj.End };
    if (obj.$unknown !== undefined)
        return { [obj.$unknown[0]]: "UNKNOWN" };
};
const SelectObjectContentOutputFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.Payload && { Payload: "STREAMING_CONTENT" }),
});
const SelectObjectContentRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSECustomerKey && { SSECustomerKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const UploadPartOutputFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const UploadPartRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSECustomerKey && { SSECustomerKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const UploadPartCopyOutputFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const UploadPartCopyRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSECustomerKey && { SSECustomerKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
    ...(obj.CopySourceSSECustomerKey && { CopySourceSSECustomerKey: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});
const WriteGetObjectResponseRequestFilterSensitiveLog = (obj) => ({
    ...obj,
    ...(obj.SSEKMSKeyId && { SSEKMSKeyId: _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.SENSITIVE_STRING }),
});


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/protocols/Aws_restXml.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/protocols/Aws_restXml.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   de_AbortMultipartUploadCommand: () => (/* binding */ de_AbortMultipartUploadCommand),
/* harmony export */   de_CompleteMultipartUploadCommand: () => (/* binding */ de_CompleteMultipartUploadCommand),
/* harmony export */   de_CopyObjectCommand: () => (/* binding */ de_CopyObjectCommand),
/* harmony export */   de_CreateBucketCommand: () => (/* binding */ de_CreateBucketCommand),
/* harmony export */   de_CreateBucketMetadataTableConfigurationCommand: () => (/* binding */ de_CreateBucketMetadataTableConfigurationCommand),
/* harmony export */   de_CreateMultipartUploadCommand: () => (/* binding */ de_CreateMultipartUploadCommand),
/* harmony export */   de_CreateSessionCommand: () => (/* binding */ de_CreateSessionCommand),
/* harmony export */   de_DeleteBucketAnalyticsConfigurationCommand: () => (/* binding */ de_DeleteBucketAnalyticsConfigurationCommand),
/* harmony export */   de_DeleteBucketCommand: () => (/* binding */ de_DeleteBucketCommand),
/* harmony export */   de_DeleteBucketCorsCommand: () => (/* binding */ de_DeleteBucketCorsCommand),
/* harmony export */   de_DeleteBucketEncryptionCommand: () => (/* binding */ de_DeleteBucketEncryptionCommand),
/* harmony export */   de_DeleteBucketIntelligentTieringConfigurationCommand: () => (/* binding */ de_DeleteBucketIntelligentTieringConfigurationCommand),
/* harmony export */   de_DeleteBucketInventoryConfigurationCommand: () => (/* binding */ de_DeleteBucketInventoryConfigurationCommand),
/* harmony export */   de_DeleteBucketLifecycleCommand: () => (/* binding */ de_DeleteBucketLifecycleCommand),
/* harmony export */   de_DeleteBucketMetadataTableConfigurationCommand: () => (/* binding */ de_DeleteBucketMetadataTableConfigurationCommand),
/* harmony export */   de_DeleteBucketMetricsConfigurationCommand: () => (/* binding */ de_DeleteBucketMetricsConfigurationCommand),
/* harmony export */   de_DeleteBucketOwnershipControlsCommand: () => (/* binding */ de_DeleteBucketOwnershipControlsCommand),
/* harmony export */   de_DeleteBucketPolicyCommand: () => (/* binding */ de_DeleteBucketPolicyCommand),
/* harmony export */   de_DeleteBucketReplicationCommand: () => (/* binding */ de_DeleteBucketReplicationCommand),
/* harmony export */   de_DeleteBucketTaggingCommand: () => (/* binding */ de_DeleteBucketTaggingCommand),
/* harmony export */   de_DeleteBucketWebsiteCommand: () => (/* binding */ de_DeleteBucketWebsiteCommand),
/* harmony export */   de_DeleteObjectCommand: () => (/* binding */ de_DeleteObjectCommand),
/* harmony export */   de_DeleteObjectTaggingCommand: () => (/* binding */ de_DeleteObjectTaggingCommand),
/* harmony export */   de_DeleteObjectsCommand: () => (/* binding */ de_DeleteObjectsCommand),
/* harmony export */   de_DeletePublicAccessBlockCommand: () => (/* binding */ de_DeletePublicAccessBlockCommand),
/* harmony export */   de_GetBucketAccelerateConfigurationCommand: () => (/* binding */ de_GetBucketAccelerateConfigurationCommand),
/* harmony export */   de_GetBucketAclCommand: () => (/* binding */ de_GetBucketAclCommand),
/* harmony export */   de_GetBucketAnalyticsConfigurationCommand: () => (/* binding */ de_GetBucketAnalyticsConfigurationCommand),
/* harmony export */   de_GetBucketCorsCommand: () => (/* binding */ de_GetBucketCorsCommand),
/* harmony export */   de_GetBucketEncryptionCommand: () => (/* binding */ de_GetBucketEncryptionCommand),
/* harmony export */   de_GetBucketIntelligentTieringConfigurationCommand: () => (/* binding */ de_GetBucketIntelligentTieringConfigurationCommand),
/* harmony export */   de_GetBucketInventoryConfigurationCommand: () => (/* binding */ de_GetBucketInventoryConfigurationCommand),
/* harmony export */   de_GetBucketLifecycleConfigurationCommand: () => (/* binding */ de_GetBucketLifecycleConfigurationCommand),
/* harmony export */   de_GetBucketLocationCommand: () => (/* binding */ de_GetBucketLocationCommand),
/* harmony export */   de_GetBucketLoggingCommand: () => (/* binding */ de_GetBucketLoggingCommand),
/* harmony export */   de_GetBucketMetadataTableConfigurationCommand: () => (/* binding */ de_GetBucketMetadataTableConfigurationCommand),
/* harmony export */   de_GetBucketMetricsConfigurationCommand: () => (/* binding */ de_GetBucketMetricsConfigurationCommand),
/* harmony export */   de_GetBucketNotificationConfigurationCommand: () => (/* binding */ de_GetBucketNotificationConfigurationCommand),
/* harmony export */   de_GetBucketOwnershipControlsCommand: () => (/* binding */ de_GetBucketOwnershipControlsCommand),
/* harmony export */   de_GetBucketPolicyCommand: () => (/* binding */ de_GetBucketPolicyCommand),
/* harmony export */   de_GetBucketPolicyStatusCommand: () => (/* binding */ de_GetBucketPolicyStatusCommand),
/* harmony export */   de_GetBucketReplicationCommand: () => (/* binding */ de_GetBucketReplicationCommand),
/* harmony export */   de_GetBucketRequestPaymentCommand: () => (/* binding */ de_GetBucketRequestPaymentCommand),
/* harmony export */   de_GetBucketTaggingCommand: () => (/* binding */ de_GetBucketTaggingCommand),
/* harmony export */   de_GetBucketVersioningCommand: () => (/* binding */ de_GetBucketVersioningCommand),
/* harmony export */   de_GetBucketWebsiteCommand: () => (/* binding */ de_GetBucketWebsiteCommand),
/* harmony export */   de_GetObjectAclCommand: () => (/* binding */ de_GetObjectAclCommand),
/* harmony export */   de_GetObjectAttributesCommand: () => (/* binding */ de_GetObjectAttributesCommand),
/* harmony export */   de_GetObjectCommand: () => (/* binding */ de_GetObjectCommand),
/* harmony export */   de_GetObjectLegalHoldCommand: () => (/* binding */ de_GetObjectLegalHoldCommand),
/* harmony export */   de_GetObjectLockConfigurationCommand: () => (/* binding */ de_GetObjectLockConfigurationCommand),
/* harmony export */   de_GetObjectRetentionCommand: () => (/* binding */ de_GetObjectRetentionCommand),
/* harmony export */   de_GetObjectTaggingCommand: () => (/* binding */ de_GetObjectTaggingCommand),
/* harmony export */   de_GetObjectTorrentCommand: () => (/* binding */ de_GetObjectTorrentCommand),
/* harmony export */   de_GetPublicAccessBlockCommand: () => (/* binding */ de_GetPublicAccessBlockCommand),
/* harmony export */   de_HeadBucketCommand: () => (/* binding */ de_HeadBucketCommand),
/* harmony export */   de_HeadObjectCommand: () => (/* binding */ de_HeadObjectCommand),
/* harmony export */   de_ListBucketAnalyticsConfigurationsCommand: () => (/* binding */ de_ListBucketAnalyticsConfigurationsCommand),
/* harmony export */   de_ListBucketIntelligentTieringConfigurationsCommand: () => (/* binding */ de_ListBucketIntelligentTieringConfigurationsCommand),
/* harmony export */   de_ListBucketInventoryConfigurationsCommand: () => (/* binding */ de_ListBucketInventoryConfigurationsCommand),
/* harmony export */   de_ListBucketMetricsConfigurationsCommand: () => (/* binding */ de_ListBucketMetricsConfigurationsCommand),
/* harmony export */   de_ListBucketsCommand: () => (/* binding */ de_ListBucketsCommand),
/* harmony export */   de_ListDirectoryBucketsCommand: () => (/* binding */ de_ListDirectoryBucketsCommand),
/* harmony export */   de_ListMultipartUploadsCommand: () => (/* binding */ de_ListMultipartUploadsCommand),
/* harmony export */   de_ListObjectVersionsCommand: () => (/* binding */ de_ListObjectVersionsCommand),
/* harmony export */   de_ListObjectsCommand: () => (/* binding */ de_ListObjectsCommand),
/* harmony export */   de_ListObjectsV2Command: () => (/* binding */ de_ListObjectsV2Command),
/* harmony export */   de_ListPartsCommand: () => (/* binding */ de_ListPartsCommand),
/* harmony export */   de_PutBucketAccelerateConfigurationCommand: () => (/* binding */ de_PutBucketAccelerateConfigurationCommand),
/* harmony export */   de_PutBucketAclCommand: () => (/* binding */ de_PutBucketAclCommand),
/* harmony export */   de_PutBucketAnalyticsConfigurationCommand: () => (/* binding */ de_PutBucketAnalyticsConfigurationCommand),
/* harmony export */   de_PutBucketCorsCommand: () => (/* binding */ de_PutBucketCorsCommand),
/* harmony export */   de_PutBucketEncryptionCommand: () => (/* binding */ de_PutBucketEncryptionCommand),
/* harmony export */   de_PutBucketIntelligentTieringConfigurationCommand: () => (/* binding */ de_PutBucketIntelligentTieringConfigurationCommand),
/* harmony export */   de_PutBucketInventoryConfigurationCommand: () => (/* binding */ de_PutBucketInventoryConfigurationCommand),
/* harmony export */   de_PutBucketLifecycleConfigurationCommand: () => (/* binding */ de_PutBucketLifecycleConfigurationCommand),
/* harmony export */   de_PutBucketLoggingCommand: () => (/* binding */ de_PutBucketLoggingCommand),
/* harmony export */   de_PutBucketMetricsConfigurationCommand: () => (/* binding */ de_PutBucketMetricsConfigurationCommand),
/* harmony export */   de_PutBucketNotificationConfigurationCommand: () => (/* binding */ de_PutBucketNotificationConfigurationCommand),
/* harmony export */   de_PutBucketOwnershipControlsCommand: () => (/* binding */ de_PutBucketOwnershipControlsCommand),
/* harmony export */   de_PutBucketPolicyCommand: () => (/* binding */ de_PutBucketPolicyCommand),
/* harmony export */   de_PutBucketReplicationCommand: () => (/* binding */ de_PutBucketReplicationCommand),
/* harmony export */   de_PutBucketRequestPaymentCommand: () => (/* binding */ de_PutBucketRequestPaymentCommand),
/* harmony export */   de_PutBucketTaggingCommand: () => (/* binding */ de_PutBucketTaggingCommand),
/* harmony export */   de_PutBucketVersioningCommand: () => (/* binding */ de_PutBucketVersioningCommand),
/* harmony export */   de_PutBucketWebsiteCommand: () => (/* binding */ de_PutBucketWebsiteCommand),
/* harmony export */   de_PutObjectAclCommand: () => (/* binding */ de_PutObjectAclCommand),
/* harmony export */   de_PutObjectCommand: () => (/* binding */ de_PutObjectCommand),
/* harmony export */   de_PutObjectLegalHoldCommand: () => (/* binding */ de_PutObjectLegalHoldCommand),
/* harmony export */   de_PutObjectLockConfigurationCommand: () => (/* binding */ de_PutObjectLockConfigurationCommand),
/* harmony export */   de_PutObjectRetentionCommand: () => (/* binding */ de_PutObjectRetentionCommand),
/* harmony export */   de_PutObjectTaggingCommand: () => (/* binding */ de_PutObjectTaggingCommand),
/* harmony export */   de_PutPublicAccessBlockCommand: () => (/* binding */ de_PutPublicAccessBlockCommand),
/* harmony export */   de_RestoreObjectCommand: () => (/* binding */ de_RestoreObjectCommand),
/* harmony export */   de_SelectObjectContentCommand: () => (/* binding */ de_SelectObjectContentCommand),
/* harmony export */   de_UploadPartCommand: () => (/* binding */ de_UploadPartCommand),
/* harmony export */   de_UploadPartCopyCommand: () => (/* binding */ de_UploadPartCopyCommand),
/* harmony export */   de_WriteGetObjectResponseCommand: () => (/* binding */ de_WriteGetObjectResponseCommand),
/* harmony export */   se_AbortMultipartUploadCommand: () => (/* binding */ se_AbortMultipartUploadCommand),
/* harmony export */   se_CompleteMultipartUploadCommand: () => (/* binding */ se_CompleteMultipartUploadCommand),
/* harmony export */   se_CopyObjectCommand: () => (/* binding */ se_CopyObjectCommand),
/* harmony export */   se_CreateBucketCommand: () => (/* binding */ se_CreateBucketCommand),
/* harmony export */   se_CreateBucketMetadataTableConfigurationCommand: () => (/* binding */ se_CreateBucketMetadataTableConfigurationCommand),
/* harmony export */   se_CreateMultipartUploadCommand: () => (/* binding */ se_CreateMultipartUploadCommand),
/* harmony export */   se_CreateSessionCommand: () => (/* binding */ se_CreateSessionCommand),
/* harmony export */   se_DeleteBucketAnalyticsConfigurationCommand: () => (/* binding */ se_DeleteBucketAnalyticsConfigurationCommand),
/* harmony export */   se_DeleteBucketCommand: () => (/* binding */ se_DeleteBucketCommand),
/* harmony export */   se_DeleteBucketCorsCommand: () => (/* binding */ se_DeleteBucketCorsCommand),
/* harmony export */   se_DeleteBucketEncryptionCommand: () => (/* binding */ se_DeleteBucketEncryptionCommand),
/* harmony export */   se_DeleteBucketIntelligentTieringConfigurationCommand: () => (/* binding */ se_DeleteBucketIntelligentTieringConfigurationCommand),
/* harmony export */   se_DeleteBucketInventoryConfigurationCommand: () => (/* binding */ se_DeleteBucketInventoryConfigurationCommand),
/* harmony export */   se_DeleteBucketLifecycleCommand: () => (/* binding */ se_DeleteBucketLifecycleCommand),
/* harmony export */   se_DeleteBucketMetadataTableConfigurationCommand: () => (/* binding */ se_DeleteBucketMetadataTableConfigurationCommand),
/* harmony export */   se_DeleteBucketMetricsConfigurationCommand: () => (/* binding */ se_DeleteBucketMetricsConfigurationCommand),
/* harmony export */   se_DeleteBucketOwnershipControlsCommand: () => (/* binding */ se_DeleteBucketOwnershipControlsCommand),
/* harmony export */   se_DeleteBucketPolicyCommand: () => (/* binding */ se_DeleteBucketPolicyCommand),
/* harmony export */   se_DeleteBucketReplicationCommand: () => (/* binding */ se_DeleteBucketReplicationCommand),
/* harmony export */   se_DeleteBucketTaggingCommand: () => (/* binding */ se_DeleteBucketTaggingCommand),
/* harmony export */   se_DeleteBucketWebsiteCommand: () => (/* binding */ se_DeleteBucketWebsiteCommand),
/* harmony export */   se_DeleteObjectCommand: () => (/* binding */ se_DeleteObjectCommand),
/* harmony export */   se_DeleteObjectTaggingCommand: () => (/* binding */ se_DeleteObjectTaggingCommand),
/* harmony export */   se_DeleteObjectsCommand: () => (/* binding */ se_DeleteObjectsCommand),
/* harmony export */   se_DeletePublicAccessBlockCommand: () => (/* binding */ se_DeletePublicAccessBlockCommand),
/* harmony export */   se_GetBucketAccelerateConfigurationCommand: () => (/* binding */ se_GetBucketAccelerateConfigurationCommand),
/* harmony export */   se_GetBucketAclCommand: () => (/* binding */ se_GetBucketAclCommand),
/* harmony export */   se_GetBucketAnalyticsConfigurationCommand: () => (/* binding */ se_GetBucketAnalyticsConfigurationCommand),
/* harmony export */   se_GetBucketCorsCommand: () => (/* binding */ se_GetBucketCorsCommand),
/* harmony export */   se_GetBucketEncryptionCommand: () => (/* binding */ se_GetBucketEncryptionCommand),
/* harmony export */   se_GetBucketIntelligentTieringConfigurationCommand: () => (/* binding */ se_GetBucketIntelligentTieringConfigurationCommand),
/* harmony export */   se_GetBucketInventoryConfigurationCommand: () => (/* binding */ se_GetBucketInventoryConfigurationCommand),
/* harmony export */   se_GetBucketLifecycleConfigurationCommand: () => (/* binding */ se_GetBucketLifecycleConfigurationCommand),
/* harmony export */   se_GetBucketLocationCommand: () => (/* binding */ se_GetBucketLocationCommand),
/* harmony export */   se_GetBucketLoggingCommand: () => (/* binding */ se_GetBucketLoggingCommand),
/* harmony export */   se_GetBucketMetadataTableConfigurationCommand: () => (/* binding */ se_GetBucketMetadataTableConfigurationCommand),
/* harmony export */   se_GetBucketMetricsConfigurationCommand: () => (/* binding */ se_GetBucketMetricsConfigurationCommand),
/* harmony export */   se_GetBucketNotificationConfigurationCommand: () => (/* binding */ se_GetBucketNotificationConfigurationCommand),
/* harmony export */   se_GetBucketOwnershipControlsCommand: () => (/* binding */ se_GetBucketOwnershipControlsCommand),
/* harmony export */   se_GetBucketPolicyCommand: () => (/* binding */ se_GetBucketPolicyCommand),
/* harmony export */   se_GetBucketPolicyStatusCommand: () => (/* binding */ se_GetBucketPolicyStatusCommand),
/* harmony export */   se_GetBucketReplicationCommand: () => (/* binding */ se_GetBucketReplicationCommand),
/* harmony export */   se_GetBucketRequestPaymentCommand: () => (/* binding */ se_GetBucketRequestPaymentCommand),
/* harmony export */   se_GetBucketTaggingCommand: () => (/* binding */ se_GetBucketTaggingCommand),
/* harmony export */   se_GetBucketVersioningCommand: () => (/* binding */ se_GetBucketVersioningCommand),
/* harmony export */   se_GetBucketWebsiteCommand: () => (/* binding */ se_GetBucketWebsiteCommand),
/* harmony export */   se_GetObjectAclCommand: () => (/* binding */ se_GetObjectAclCommand),
/* harmony export */   se_GetObjectAttributesCommand: () => (/* binding */ se_GetObjectAttributesCommand),
/* harmony export */   se_GetObjectCommand: () => (/* binding */ se_GetObjectCommand),
/* harmony export */   se_GetObjectLegalHoldCommand: () => (/* binding */ se_GetObjectLegalHoldCommand),
/* harmony export */   se_GetObjectLockConfigurationCommand: () => (/* binding */ se_GetObjectLockConfigurationCommand),
/* harmony export */   se_GetObjectRetentionCommand: () => (/* binding */ se_GetObjectRetentionCommand),
/* harmony export */   se_GetObjectTaggingCommand: () => (/* binding */ se_GetObjectTaggingCommand),
/* harmony export */   se_GetObjectTorrentCommand: () => (/* binding */ se_GetObjectTorrentCommand),
/* harmony export */   se_GetPublicAccessBlockCommand: () => (/* binding */ se_GetPublicAccessBlockCommand),
/* harmony export */   se_HeadBucketCommand: () => (/* binding */ se_HeadBucketCommand),
/* harmony export */   se_HeadObjectCommand: () => (/* binding */ se_HeadObjectCommand),
/* harmony export */   se_ListBucketAnalyticsConfigurationsCommand: () => (/* binding */ se_ListBucketAnalyticsConfigurationsCommand),
/* harmony export */   se_ListBucketIntelligentTieringConfigurationsCommand: () => (/* binding */ se_ListBucketIntelligentTieringConfigurationsCommand),
/* harmony export */   se_ListBucketInventoryConfigurationsCommand: () => (/* binding */ se_ListBucketInventoryConfigurationsCommand),
/* harmony export */   se_ListBucketMetricsConfigurationsCommand: () => (/* binding */ se_ListBucketMetricsConfigurationsCommand),
/* harmony export */   se_ListBucketsCommand: () => (/* binding */ se_ListBucketsCommand),
/* harmony export */   se_ListDirectoryBucketsCommand: () => (/* binding */ se_ListDirectoryBucketsCommand),
/* harmony export */   se_ListMultipartUploadsCommand: () => (/* binding */ se_ListMultipartUploadsCommand),
/* harmony export */   se_ListObjectVersionsCommand: () => (/* binding */ se_ListObjectVersionsCommand),
/* harmony export */   se_ListObjectsCommand: () => (/* binding */ se_ListObjectsCommand),
/* harmony export */   se_ListObjectsV2Command: () => (/* binding */ se_ListObjectsV2Command),
/* harmony export */   se_ListPartsCommand: () => (/* binding */ se_ListPartsCommand),
/* harmony export */   se_PutBucketAccelerateConfigurationCommand: () => (/* binding */ se_PutBucketAccelerateConfigurationCommand),
/* harmony export */   se_PutBucketAclCommand: () => (/* binding */ se_PutBucketAclCommand),
/* harmony export */   se_PutBucketAnalyticsConfigurationCommand: () => (/* binding */ se_PutBucketAnalyticsConfigurationCommand),
/* harmony export */   se_PutBucketCorsCommand: () => (/* binding */ se_PutBucketCorsCommand),
/* harmony export */   se_PutBucketEncryptionCommand: () => (/* binding */ se_PutBucketEncryptionCommand),
/* harmony export */   se_PutBucketIntelligentTieringConfigurationCommand: () => (/* binding */ se_PutBucketIntelligentTieringConfigurationCommand),
/* harmony export */   se_PutBucketInventoryConfigurationCommand: () => (/* binding */ se_PutBucketInventoryConfigurationCommand),
/* harmony export */   se_PutBucketLifecycleConfigurationCommand: () => (/* binding */ se_PutBucketLifecycleConfigurationCommand),
/* harmony export */   se_PutBucketLoggingCommand: () => (/* binding */ se_PutBucketLoggingCommand),
/* harmony export */   se_PutBucketMetricsConfigurationCommand: () => (/* binding */ se_PutBucketMetricsConfigurationCommand),
/* harmony export */   se_PutBucketNotificationConfigurationCommand: () => (/* binding */ se_PutBucketNotificationConfigurationCommand),
/* harmony export */   se_PutBucketOwnershipControlsCommand: () => (/* binding */ se_PutBucketOwnershipControlsCommand),
/* harmony export */   se_PutBucketPolicyCommand: () => (/* binding */ se_PutBucketPolicyCommand),
/* harmony export */   se_PutBucketReplicationCommand: () => (/* binding */ se_PutBucketReplicationCommand),
/* harmony export */   se_PutBucketRequestPaymentCommand: () => (/* binding */ se_PutBucketRequestPaymentCommand),
/* harmony export */   se_PutBucketTaggingCommand: () => (/* binding */ se_PutBucketTaggingCommand),
/* harmony export */   se_PutBucketVersioningCommand: () => (/* binding */ se_PutBucketVersioningCommand),
/* harmony export */   se_PutBucketWebsiteCommand: () => (/* binding */ se_PutBucketWebsiteCommand),
/* harmony export */   se_PutObjectAclCommand: () => (/* binding */ se_PutObjectAclCommand),
/* harmony export */   se_PutObjectCommand: () => (/* binding */ se_PutObjectCommand),
/* harmony export */   se_PutObjectLegalHoldCommand: () => (/* binding */ se_PutObjectLegalHoldCommand),
/* harmony export */   se_PutObjectLockConfigurationCommand: () => (/* binding */ se_PutObjectLockConfigurationCommand),
/* harmony export */   se_PutObjectRetentionCommand: () => (/* binding */ se_PutObjectRetentionCommand),
/* harmony export */   se_PutObjectTaggingCommand: () => (/* binding */ se_PutObjectTaggingCommand),
/* harmony export */   se_PutPublicAccessBlockCommand: () => (/* binding */ se_PutPublicAccessBlockCommand),
/* harmony export */   se_RestoreObjectCommand: () => (/* binding */ se_RestoreObjectCommand),
/* harmony export */   se_SelectObjectContentCommand: () => (/* binding */ se_SelectObjectContentCommand),
/* harmony export */   se_UploadPartCommand: () => (/* binding */ se_UploadPartCommand),
/* harmony export */   se_UploadPartCopyCommand: () => (/* binding */ se_UploadPartCopyCommand),
/* harmony export */   se_WriteGetObjectResponseCommand: () => (/* binding */ se_WriteGetObjectResponseCommand)
/* harmony export */ });
/* harmony import */ var _aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-sdk/core */ "../node_modules/@aws-sdk/core/dist-es/submodules/protocols/xml/parseXmlBody.js");
/* harmony import */ var _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/xml-builder */ "../node_modules/@aws-sdk/xml-builder/dist-es/index.js");
/* harmony import */ var _smithy_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/core */ "../node_modules/@smithy/core/dist-es/index.js");
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var _models_models_0__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../models/models_0 */ "../node_modules/@aws-sdk/client-s3/dist-es/models/models_0.js");
/* harmony import */ var _models_models_1__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../models/models_1 */ "../node_modules/@aws-sdk/client-s3/dist-es/models/models_1.js");
/* harmony import */ var _models_S3ServiceException__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/S3ServiceException */ "../node_modules/@aws-sdk/client-s3/dist-es/models/S3ServiceException.js");








const se_AbortMultipartUploadCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
        [_xaimit]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_IMIT]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_IMIT]).toString()],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_xi]: [, "AbortMultipartUpload"],
        [_uI]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_UI], `UploadId`)],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_CompleteMultipartUploadCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xacc]: input[_CCRC],
        [_xacc_]: input[_CCRCC],
        [_xacc__]: input[_CCRCNVME],
        [_xacs]: input[_CSHA],
        [_xacs_]: input[_CSHAh],
        [_xact]: input[_CT],
        [_xamos]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_MOS]), () => input[_MOS].toString()],
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
        [_im]: input[_IM],
        [_inm]: input[_INM],
        [_xasseca]: input[_SSECA],
        [_xasseck]: input[_SSECK],
        [_xasseckm]: input[_SSECKMD],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_uI]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_UI], `UploadId`)],
    });
    let body;
    let contents;
    if (input.MultipartUpload !== undefined) {
        contents = se_CompletedMultipartUpload(input.MultipartUpload, context);
        contents = contents.n("CompleteMultipartUpload");
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("POST").h(headers).q(query).b(body);
    return b.build();
};
const se_CopyObjectCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaa]: input[_ACL],
        [_cc]: input[_CC],
        [_xaca]: input[_CA],
        [_cd]: input[_CD],
        [_ce]: input[_CE],
        [_cl]: input[_CL],
        [_ct]: input[_CTo],
        [_xacs__]: input[_CS],
        [_xacsim]: input[_CSIM],
        [_xacsims]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_CSIMS]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_CSIMS]).toString()],
        [_xacsinm]: input[_CSINM],
        [_xacsius]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_CSIUS]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_CSIUS]).toString()],
        [_e]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_E]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_E]).toString()],
        [_xagfc]: input[_GFC],
        [_xagr]: input[_GR],
        [_xagra]: input[_GRACP],
        [_xagwa]: input[_GWACP],
        [_xamd]: input[_MD],
        [_xatd]: input[_TD],
        [_xasse]: input[_SSE],
        [_xasc]: input[_SC],
        [_xawrl]: input[_WRL],
        [_xasseca]: input[_SSECA],
        [_xasseck]: input[_SSECK],
        [_xasseckm]: input[_SSECKMD],
        [_xasseakki]: input[_SSEKMSKI],
        [_xassec]: input[_SSEKMSEC],
        [_xassebke]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_BKE]), () => input[_BKE].toString()],
        [_xacssseca]: input[_CSSSECA],
        [_xacssseck]: input[_CSSSECK],
        [_xacssseckm]: input[_CSSSECKMD],
        [_xarp]: input[_RP],
        [_xat]: input[_T],
        [_xaolm]: input[_OLM],
        [_xaolrud]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_OLRUD]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.serializeDateTime)(input[_OLRUD]).toString()],
        [_xaollh]: input[_OLLHS],
        [_xaebo]: input[_EBO],
        [_xasebo]: input[_ESBO],
        ...(input.Metadata !== undefined &&
            Object.keys(input.Metadata).reduce((acc, suffix) => {
                acc[`x-amz-meta-${suffix.toLowerCase()}`] = input.Metadata[suffix];
                return acc;
            }, {})),
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_xi]: [, "CopyObject"],
    });
    let body;
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_CreateBucketCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xaa]: input[_ACL],
        [_xagfc]: input[_GFC],
        [_xagr]: input[_GR],
        [_xagra]: input[_GRACP],
        [_xagw]: input[_GW],
        [_xagwa]: input[_GWACP],
        [_xabole]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_OLEFB]), () => input[_OLEFB].toString()],
        [_xaoo]: input[_OO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    let body;
    let contents;
    if (input.CreateBucketConfiguration !== undefined) {
        contents = se_CreateBucketConfiguration(input.CreateBucketConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).b(body);
    return b.build();
};
const se_CreateBucketMetadataTableConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_mT]: [, ""],
    });
    let body;
    let contents;
    if (input.MetadataTableConfiguration !== undefined) {
        contents = se_MetadataTableConfiguration(input.MetadataTableConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("POST").h(headers).q(query).b(body);
    return b.build();
};
const se_CreateMultipartUploadCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaa]: input[_ACL],
        [_cc]: input[_CC],
        [_cd]: input[_CD],
        [_ce]: input[_CE],
        [_cl]: input[_CL],
        [_ct]: input[_CTo],
        [_e]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_E]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_E]).toString()],
        [_xagfc]: input[_GFC],
        [_xagr]: input[_GR],
        [_xagra]: input[_GRACP],
        [_xagwa]: input[_GWACP],
        [_xasse]: input[_SSE],
        [_xasc]: input[_SC],
        [_xawrl]: input[_WRL],
        [_xasseca]: input[_SSECA],
        [_xasseck]: input[_SSECK],
        [_xasseckm]: input[_SSECKMD],
        [_xasseakki]: input[_SSEKMSKI],
        [_xassec]: input[_SSEKMSEC],
        [_xassebke]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_BKE]), () => input[_BKE].toString()],
        [_xarp]: input[_RP],
        [_xat]: input[_T],
        [_xaolm]: input[_OLM],
        [_xaolrud]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_OLRUD]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.serializeDateTime)(input[_OLRUD]).toString()],
        [_xaollh]: input[_OLLHS],
        [_xaebo]: input[_EBO],
        [_xaca]: input[_CA],
        [_xact]: input[_CT],
        ...(input.Metadata !== undefined &&
            Object.keys(input.Metadata).reduce((acc, suffix) => {
                acc[`x-amz-meta-${suffix.toLowerCase()}`] = input.Metadata[suffix];
                return acc;
            }, {})),
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_u]: [, ""],
    });
    let body;
    b.m("POST").h(headers).q(query).b(body);
    return b.build();
};
const se_CreateSessionCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xacsm]: input[_SM],
        [_xasse]: input[_SSE],
        [_xasseakki]: input[_SSEKMSKI],
        [_xassec]: input[_SSEKMSEC],
        [_xassebke]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_BKE]), () => input[_BKE].toString()],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_s]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteBucketCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    let body;
    b.m("DELETE").h(headers).b(body);
    return b.build();
};
const se_DeleteBucketAnalyticsConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_a]: [, ""],
        [_i]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_I], `Id`)],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteBucketCorsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_c]: [, ""],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteBucketEncryptionCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_en]: [, ""],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteBucketIntelligentTieringConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = {};
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_it]: [, ""],
        [_i]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_I], `Id`)],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteBucketInventoryConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_in]: [, ""],
        [_i]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_I], `Id`)],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteBucketLifecycleCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_l]: [, ""],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteBucketMetadataTableConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_mT]: [, ""],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteBucketMetricsConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_m]: [, ""],
        [_i]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_I], `Id`)],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteBucketOwnershipControlsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_oC]: [, ""],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteBucketPolicyCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_p]: [, ""],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteBucketReplicationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_r]: [, ""],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteBucketTaggingCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_t]: [, ""],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteBucketWebsiteCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_w]: [, ""],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteObjectCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xam]: input[_MFA],
        [_xarp]: input[_RP],
        [_xabgr]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_BGR]), () => input[_BGR].toString()],
        [_xaebo]: input[_EBO],
        [_im]: input[_IM],
        [_xaimlmt]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_IMLMT]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_IMLMT]).toString()],
        [_xaims]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_IMS]), () => input[_IMS].toString()],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_xi]: [, "DeleteObject"],
        [_vI]: [, input[_VI]],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteObjectsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xam]: input[_MFA],
        [_xarp]: input[_RP],
        [_xabgr]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_BGR]), () => input[_BGR].toString()],
        [_xaebo]: input[_EBO],
        [_xasca]: input[_CA],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_d]: [, ""],
    });
    let body;
    let contents;
    if (input.Delete !== undefined) {
        contents = se_Delete(input.Delete, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("POST").h(headers).q(query).b(body);
    return b.build();
};
const se_DeleteObjectTaggingCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_t]: [, ""],
        [_vI]: [, input[_VI]],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_DeletePublicAccessBlockCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_pAB]: [, ""],
    });
    let body;
    b.m("DELETE").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketAccelerateConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
        [_xarp]: input[_RP],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_ac]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketAclCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_acl]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketAnalyticsConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_a]: [, ""],
        [_xi]: [, "GetBucketAnalyticsConfiguration"],
        [_i]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_I], `Id`)],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketCorsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_c]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketEncryptionCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_en]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketIntelligentTieringConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = {};
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_it]: [, ""],
        [_xi]: [, "GetBucketIntelligentTieringConfiguration"],
        [_i]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_I], `Id`)],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketInventoryConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_in]: [, ""],
        [_xi]: [, "GetBucketInventoryConfiguration"],
        [_i]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_I], `Id`)],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketLifecycleConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_l]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketLocationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_lo]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketLoggingCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_log]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketMetadataTableConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_mT]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketMetricsConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_m]: [, ""],
        [_xi]: [, "GetBucketMetricsConfiguration"],
        [_i]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_I], `Id`)],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketNotificationConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_n]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketOwnershipControlsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_oC]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketPolicyCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_p]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketPolicyStatusCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_pS]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketReplicationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_r]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketRequestPaymentCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_rP]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketTaggingCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_t]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketVersioningCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_v]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetBucketWebsiteCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_w]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetObjectCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_im]: input[_IM],
        [_ims]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_IMSf]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_IMSf]).toString()],
        [_inm]: input[_INM],
        [_ius]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_IUS]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_IUS]).toString()],
        [_ra]: input[_R],
        [_xasseca]: input[_SSECA],
        [_xasseck]: input[_SSECK],
        [_xasseckm]: input[_SSECKMD],
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
        [_xacm]: input[_CM],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_xi]: [, "GetObject"],
        [_rcc]: [, input[_RCC]],
        [_rcd]: [, input[_RCD]],
        [_rce]: [, input[_RCE]],
        [_rcl]: [, input[_RCL]],
        [_rct]: [, input[_RCT]],
        [_re]: [() => input.ResponseExpires !== void 0, () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_RE]).toString()],
        [_vI]: [, input[_VI]],
        [_pN]: [() => input.PartNumber !== void 0, () => input[_PN].toString()],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetObjectAclCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_acl]: [, ""],
        [_vI]: [, input[_VI]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetObjectAttributesCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xamp]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_MP]), () => input[_MP].toString()],
        [_xapnm]: input[_PNM],
        [_xasseca]: input[_SSECA],
        [_xasseck]: input[_SSECK],
        [_xasseckm]: input[_SSECKMD],
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
        [_xaoa]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_OA]), () => (input[_OA] || []).map(_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.quoteHeader).join(", ")],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_at]: [, ""],
        [_vI]: [, input[_VI]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetObjectLegalHoldCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_lh]: [, ""],
        [_vI]: [, input[_VI]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetObjectLockConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_ol]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetObjectRetentionCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_ret]: [, ""],
        [_vI]: [, input[_VI]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetObjectTaggingCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
        [_xarp]: input[_RP],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_t]: [, ""],
        [_vI]: [, input[_VI]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetObjectTorrentCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_to]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_GetPublicAccessBlockCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_pAB]: [, ""],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_HeadBucketCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    let body;
    b.m("HEAD").h(headers).b(body);
    return b.build();
};
const se_HeadObjectCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_im]: input[_IM],
        [_ims]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_IMSf]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_IMSf]).toString()],
        [_inm]: input[_INM],
        [_ius]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_IUS]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_IUS]).toString()],
        [_ra]: input[_R],
        [_xasseca]: input[_SSECA],
        [_xasseck]: input[_SSECK],
        [_xasseckm]: input[_SSECKMD],
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
        [_xacm]: input[_CM],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_rcc]: [, input[_RCC]],
        [_rcd]: [, input[_RCD]],
        [_rce]: [, input[_RCE]],
        [_rcl]: [, input[_RCL]],
        [_rct]: [, input[_RCT]],
        [_re]: [() => input.ResponseExpires !== void 0, () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_RE]).toString()],
        [_vI]: [, input[_VI]],
        [_pN]: [() => input.PartNumber !== void 0, () => input[_PN].toString()],
    });
    let body;
    b.m("HEAD").h(headers).q(query).b(body);
    return b.build();
};
const se_ListBucketAnalyticsConfigurationsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_a]: [, ""],
        [_xi]: [, "ListBucketAnalyticsConfigurations"],
        [_ct_]: [, input[_CTon]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_ListBucketIntelligentTieringConfigurationsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = {};
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_it]: [, ""],
        [_xi]: [, "ListBucketIntelligentTieringConfigurations"],
        [_ct_]: [, input[_CTon]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_ListBucketInventoryConfigurationsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_in]: [, ""],
        [_xi]: [, "ListBucketInventoryConfigurations"],
        [_ct_]: [, input[_CTon]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_ListBucketMetricsConfigurationsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_m]: [, ""],
        [_xi]: [, "ListBucketMetricsConfigurations"],
        [_ct_]: [, input[_CTon]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_ListBucketsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = {};
    b.bp("/");
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_xi]: [, "ListBuckets"],
        [_mb]: [() => input.MaxBuckets !== void 0, () => input[_MB].toString()],
        [_ct_]: [, input[_CTon]],
        [_pr]: [, input[_P]],
        [_br]: [, input[_BR]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_ListDirectoryBucketsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = {};
    b.bp("/");
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_xi]: [, "ListDirectoryBuckets"],
        [_ct_]: [, input[_CTon]],
        [_mdb]: [() => input.MaxDirectoryBuckets !== void 0, () => input[_MDB].toString()],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_ListMultipartUploadsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
        [_xarp]: input[_RP],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_u]: [, ""],
        [_de]: [, input[_D]],
        [_et]: [, input[_ET]],
        [_km]: [, input[_KM]],
        [_mu]: [() => input.MaxUploads !== void 0, () => input[_MU].toString()],
        [_pr]: [, input[_P]],
        [_uim]: [, input[_UIM]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_ListObjectsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
        [_xaooa]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_OOA]), () => (input[_OOA] || []).map(_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.quoteHeader).join(", ")],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_de]: [, input[_D]],
        [_et]: [, input[_ET]],
        [_ma]: [, input[_M]],
        [_mk]: [() => input.MaxKeys !== void 0, () => input[_MK].toString()],
        [_pr]: [, input[_P]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_ListObjectsV2Command = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
        [_xaooa]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_OOA]), () => (input[_OOA] || []).map(_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.quoteHeader).join(", ")],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_lt]: [, "2"],
        [_de]: [, input[_D]],
        [_et]: [, input[_ET]],
        [_mk]: [() => input.MaxKeys !== void 0, () => input[_MK].toString()],
        [_pr]: [, input[_P]],
        [_ct_]: [, input[_CTon]],
        [_fo]: [() => input.FetchOwner !== void 0, () => input[_FO].toString()],
        [_sa]: [, input[_SA]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_ListObjectVersionsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xaebo]: input[_EBO],
        [_xarp]: input[_RP],
        [_xaooa]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_OOA]), () => (input[_OOA] || []).map(_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.quoteHeader).join(", ")],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_ver]: [, ""],
        [_de]: [, input[_D]],
        [_et]: [, input[_ET]],
        [_km]: [, input[_KM]],
        [_mk]: [() => input.MaxKeys !== void 0, () => input[_MK].toString()],
        [_pr]: [, input[_P]],
        [_vim]: [, input[_VIM]],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_ListPartsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
        [_xasseca]: input[_SSECA],
        [_xasseck]: input[_SSECK],
        [_xasseckm]: input[_SSECKMD],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_xi]: [, "ListParts"],
        [_mp]: [() => input.MaxParts !== void 0, () => input[_MP].toString()],
        [_pnm]: [, input[_PNM]],
        [_uI]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_UI], `UploadId`)],
    });
    let body;
    b.m("GET").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketAccelerateConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xaebo]: input[_EBO],
        [_xasca]: input[_CA],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_ac]: [, ""],
    });
    let body;
    let contents;
    if (input.AccelerateConfiguration !== undefined) {
        contents = se_AccelerateConfiguration(input.AccelerateConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketAclCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xaa]: input[_ACL],
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xagfc]: input[_GFC],
        [_xagr]: input[_GR],
        [_xagra]: input[_GRACP],
        [_xagw]: input[_GW],
        [_xagwa]: input[_GWACP],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_acl]: [, ""],
    });
    let body;
    let contents;
    if (input.AccessControlPolicy !== undefined) {
        contents = se_AccessControlPolicy(input.AccessControlPolicy, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketAnalyticsConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_a]: [, ""],
        [_i]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_I], `Id`)],
    });
    let body;
    let contents;
    if (input.AnalyticsConfiguration !== undefined) {
        contents = se_AnalyticsConfiguration(input.AnalyticsConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketCorsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_c]: [, ""],
    });
    let body;
    let contents;
    if (input.CORSConfiguration !== undefined) {
        contents = se_CORSConfiguration(input.CORSConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketEncryptionCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_en]: [, ""],
    });
    let body;
    let contents;
    if (input.ServerSideEncryptionConfiguration !== undefined) {
        contents = se_ServerSideEncryptionConfiguration(input.ServerSideEncryptionConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketIntelligentTieringConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = {
        "content-type": "application/xml",
    };
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_it]: [, ""],
        [_i]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_I], `Id`)],
    });
    let body;
    let contents;
    if (input.IntelligentTieringConfiguration !== undefined) {
        contents = se_IntelligentTieringConfiguration(input.IntelligentTieringConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketInventoryConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_in]: [, ""],
        [_i]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_I], `Id`)],
    });
    let body;
    let contents;
    if (input.InventoryConfiguration !== undefined) {
        contents = se_InventoryConfiguration(input.InventoryConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketLifecycleConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
        [_xatdmos]: input[_TDMOS],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_l]: [, ""],
    });
    let body;
    let contents;
    if (input.LifecycleConfiguration !== undefined) {
        contents = se_BucketLifecycleConfiguration(input.LifecycleConfiguration, context);
        contents = contents.n("LifecycleConfiguration");
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketLoggingCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_log]: [, ""],
    });
    let body;
    let contents;
    if (input.BucketLoggingStatus !== undefined) {
        contents = se_BucketLoggingStatus(input.BucketLoggingStatus, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketMetricsConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_m]: [, ""],
        [_i]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_I], `Id`)],
    });
    let body;
    let contents;
    if (input.MetricsConfiguration !== undefined) {
        contents = se_MetricsConfiguration(input.MetricsConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketNotificationConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xaebo]: input[_EBO],
        [_xasdv]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_SDV]), () => input[_SDV].toString()],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_n]: [, ""],
    });
    let body;
    let contents;
    if (input.NotificationConfiguration !== undefined) {
        contents = se_NotificationConfiguration(input.NotificationConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketOwnershipControlsCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_cm]: input[_CMD],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_oC]: [, ""],
    });
    let body;
    let contents;
    if (input.OwnershipControls !== undefined) {
        contents = se_OwnershipControls(input.OwnershipControls, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketPolicyCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "text/plain",
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xacrsba]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_CRSBA]), () => input[_CRSBA].toString()],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_p]: [, ""],
    });
    let body;
    let contents;
    if (input.Policy !== undefined) {
        contents = input.Policy;
        body = contents;
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketReplicationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xabolt]: input[_To],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_r]: [, ""],
    });
    let body;
    let contents;
    if (input.ReplicationConfiguration !== undefined) {
        contents = se_ReplicationConfiguration(input.ReplicationConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketRequestPaymentCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_rP]: [, ""],
    });
    let body;
    let contents;
    if (input.RequestPaymentConfiguration !== undefined) {
        contents = se_RequestPaymentConfiguration(input.RequestPaymentConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketTaggingCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_t]: [, ""],
    });
    let body;
    let contents;
    if (input.Tagging !== undefined) {
        contents = se_Tagging(input.Tagging, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketVersioningCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xam]: input[_MFA],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_v]: [, ""],
    });
    let body;
    let contents;
    if (input.VersioningConfiguration !== undefined) {
        contents = se_VersioningConfiguration(input.VersioningConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutBucketWebsiteCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_w]: [, ""],
    });
    let body;
    let contents;
    if (input.WebsiteConfiguration !== undefined) {
        contents = se_WebsiteConfiguration(input.WebsiteConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutObjectCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_ct]: input[_CTo] || "application/octet-stream",
        [_xaa]: input[_ACL],
        [_cc]: input[_CC],
        [_cd]: input[_CD],
        [_ce]: input[_CE],
        [_cl]: input[_CL],
        [_cl_]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_CLo]), () => input[_CLo].toString()],
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xacc]: input[_CCRC],
        [_xacc_]: input[_CCRCC],
        [_xacc__]: input[_CCRCNVME],
        [_xacs]: input[_CSHA],
        [_xacs_]: input[_CSHAh],
        [_e]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_E]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_E]).toString()],
        [_im]: input[_IM],
        [_inm]: input[_INM],
        [_xagfc]: input[_GFC],
        [_xagr]: input[_GR],
        [_xagra]: input[_GRACP],
        [_xagwa]: input[_GWACP],
        [_xawob]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_WOB]), () => input[_WOB].toString()],
        [_xasse]: input[_SSE],
        [_xasc]: input[_SC],
        [_xawrl]: input[_WRL],
        [_xasseca]: input[_SSECA],
        [_xasseck]: input[_SSECK],
        [_xasseckm]: input[_SSECKMD],
        [_xasseakki]: input[_SSEKMSKI],
        [_xassec]: input[_SSEKMSEC],
        [_xassebke]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_BKE]), () => input[_BKE].toString()],
        [_xarp]: input[_RP],
        [_xat]: input[_T],
        [_xaolm]: input[_OLM],
        [_xaolrud]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_OLRUD]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.serializeDateTime)(input[_OLRUD]).toString()],
        [_xaollh]: input[_OLLHS],
        [_xaebo]: input[_EBO],
        ...(input.Metadata !== undefined &&
            Object.keys(input.Metadata).reduce((acc, suffix) => {
                acc[`x-amz-meta-${suffix.toLowerCase()}`] = input.Metadata[suffix];
                return acc;
            }, {})),
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_xi]: [, "PutObject"],
    });
    let body;
    let contents;
    if (input.Body !== undefined) {
        contents = input.Body;
        body = contents;
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutObjectAclCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xaa]: input[_ACL],
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xagfc]: input[_GFC],
        [_xagr]: input[_GR],
        [_xagra]: input[_GRACP],
        [_xagw]: input[_GW],
        [_xagwa]: input[_GWACP],
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_acl]: [, ""],
        [_vI]: [, input[_VI]],
    });
    let body;
    let contents;
    if (input.AccessControlPolicy !== undefined) {
        contents = se_AccessControlPolicy(input.AccessControlPolicy, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutObjectLegalHoldCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xarp]: input[_RP],
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_lh]: [, ""],
        [_vI]: [, input[_VI]],
    });
    let body;
    let contents;
    if (input.LegalHold !== undefined) {
        contents = se_ObjectLockLegalHold(input.LegalHold, context);
        contents = contents.n("LegalHold");
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutObjectLockConfigurationCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xarp]: input[_RP],
        [_xabolt]: input[_To],
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_ol]: [, ""],
    });
    let body;
    let contents;
    if (input.ObjectLockConfiguration !== undefined) {
        contents = se_ObjectLockConfiguration(input.ObjectLockConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutObjectRetentionCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xarp]: input[_RP],
        [_xabgr]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_BGR]), () => input[_BGR].toString()],
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_ret]: [, ""],
        [_vI]: [, input[_VI]],
    });
    let body;
    let contents;
    if (input.Retention !== undefined) {
        contents = se_ObjectLockRetention(input.Retention, context);
        contents = contents.n("Retention");
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutObjectTaggingCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
        [_xarp]: input[_RP],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_t]: [, ""],
        [_vI]: [, input[_VI]],
    });
    let body;
    let contents;
    if (input.Tagging !== undefined) {
        contents = se_Tagging(input.Tagging, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_PutPublicAccessBlockCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
    });
    b.bp("/");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_pAB]: [, ""],
    });
    let body;
    let contents;
    if (input.PublicAccessBlockConfiguration !== undefined) {
        contents = se_PublicAccessBlockConfiguration(input.PublicAccessBlockConfiguration, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_RestoreObjectCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xarp]: input[_RP],
        [_xasca]: input[_CA],
        [_xaebo]: input[_EBO],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_res]: [, ""],
        [_vI]: [, input[_VI]],
    });
    let body;
    let contents;
    if (input.RestoreRequest !== undefined) {
        contents = se_RestoreRequest(input.RestoreRequest, context);
        body = _ve;
        contents.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
        body += contents.toString();
    }
    b.m("POST").h(headers).q(query).b(body);
    return b.build();
};
const se_SelectObjectContentCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/xml",
        [_xasseca]: input[_SSECA],
        [_xasseck]: input[_SSECK],
        [_xasseckm]: input[_SSECKMD],
        [_xaebo]: input[_EBO],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_se]: [, ""],
        [_st]: [, "2"],
    });
    let body;
    body = _ve;
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SOCR);
    bn.a("xmlns", "http://s3.amazonaws.com/doc/2006-03-01/");
    bn.cc(input, _Ex);
    bn.cc(input, _ETx);
    if (input[_IS] != null) {
        bn.c(se_InputSerialization(input[_IS], context).n(_IS));
    }
    if (input[_OS] != null) {
        bn.c(se_OutputSerialization(input[_OS], context).n(_OS));
    }
    if (input[_RPe] != null) {
        bn.c(se_RequestProgress(input[_RPe], context).n(_RPe));
    }
    if (input[_SR] != null) {
        bn.c(se_ScanRange(input[_SR], context).n(_SR));
    }
    body += bn.toString();
    b.m("POST").h(headers).q(query).b(body);
    return b.build();
};
const se_UploadPartCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "content-type": "application/octet-stream",
        [_cl_]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_CLo]), () => input[_CLo].toString()],
        [_cm]: input[_CMD],
        [_xasca]: input[_CA],
        [_xacc]: input[_CCRC],
        [_xacc_]: input[_CCRCC],
        [_xacc__]: input[_CCRCNVME],
        [_xacs]: input[_CSHA],
        [_xacs_]: input[_CSHAh],
        [_xasseca]: input[_SSECA],
        [_xasseck]: input[_SSECK],
        [_xasseckm]: input[_SSECKMD],
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_xi]: [, "UploadPart"],
        [_pN]: [(0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input.PartNumber, `PartNumber`) != null, () => input[_PN].toString()],
        [_uI]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_UI], `UploadId`)],
    });
    let body;
    let contents;
    if (input.Body !== undefined) {
        contents = input.Body;
        body = contents;
    }
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_UploadPartCopyCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        [_xacs__]: input[_CS],
        [_xacsim]: input[_CSIM],
        [_xacsims]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_CSIMS]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_CSIMS]).toString()],
        [_xacsinm]: input[_CSINM],
        [_xacsius]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_CSIUS]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_CSIUS]).toString()],
        [_xacsr]: input[_CSR],
        [_xasseca]: input[_SSECA],
        [_xasseck]: input[_SSECK],
        [_xasseckm]: input[_SSECKMD],
        [_xacssseca]: input[_CSSSECA],
        [_xacssseck]: input[_CSSSECK],
        [_xacssseckm]: input[_CSSSECKMD],
        [_xarp]: input[_RP],
        [_xaebo]: input[_EBO],
        [_xasebo]: input[_ESBO],
    });
    b.bp("/{Key+}");
    b.p("Bucket", () => input.Bucket, "{Bucket}", false);
    b.p("Key", () => input.Key, "{Key+}", true);
    const query = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        [_xi]: [, "UploadPartCopy"],
        [_pN]: [(0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input.PartNumber, `PartNumber`) != null, () => input[_PN].toString()],
        [_uI]: [, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)(input[_UI], `UploadId`)],
    });
    let body;
    b.m("PUT").h(headers).q(query).b(body);
    return b.build();
};
const se_WriteGetObjectResponseCommand = async (input, context) => {
    const b = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_1__.requestBuilder)(input, context);
    const headers = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({}, _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue, {
        "x-amz-content-sha256": "UNSIGNED-PAYLOAD",
        "content-type": "application/octet-stream",
        [_xarr]: input[_RR],
        [_xart]: input[_RT],
        [_xafs]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_SCt]), () => input[_SCt].toString()],
        [_xafec]: input[_EC],
        [_xafem]: input[_EM],
        [_xafhar]: input[_AR],
        [_xafhcc]: input[_CC],
        [_xafhcd]: input[_CD],
        [_xafhce]: input[_CE],
        [_xafhcl]: input[_CL],
        [_cl_]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_CLo]), () => input[_CLo].toString()],
        [_xafhcr]: input[_CR],
        [_xafhct]: input[_CTo],
        [_xafhxacc]: input[_CCRC],
        [_xafhxacc_]: input[_CCRCC],
        [_xafhxacc__]: input[_CCRCNVME],
        [_xafhxacs]: input[_CSHA],
        [_xafhxacs_]: input[_CSHAh],
        [_xafhxadm]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_DM]), () => input[_DM].toString()],
        [_xafhe]: input[_ETa],
        [_xafhe_]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_E]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_E]).toString()],
        [_xafhxae]: input[_Exp],
        [_xafhlm]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_LM]), () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_LM]).toString()],
        [_xafhxamm]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_MM]), () => input[_MM].toString()],
        [_xafhxaolm]: input[_OLM],
        [_xafhxaollh]: input[_OLLHS],
        [_xafhxaolrud]: [
            () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_OLRUD]),
            () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.serializeDateTime)(input[_OLRUD]).toString(),
        ],
        [_xafhxampc]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_PC]), () => input[_PC].toString()],
        [_xafhxars]: input[_RS],
        [_xafhxarc]: input[_RC],
        [_xafhxar]: input[_Re],
        [_xafhxasse]: input[_SSE],
        [_xafhxasseca]: input[_SSECA],
        [_xafhxasseakki]: input[_SSEKMSKI],
        [_xafhxasseckm]: input[_SSECKMD],
        [_xafhxasc]: input[_SC],
        [_xafhxatc]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_TC]), () => input[_TC].toString()],
        [_xafhxavi]: input[_VI],
        [_xafhxassebke]: [() => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.isSerializableHeaderValue)(input[_BKE]), () => input[_BKE].toString()],
        ...(input.Metadata !== undefined &&
            Object.keys(input.Metadata).reduce((acc, suffix) => {
                acc[`x-amz-meta-${suffix.toLowerCase()}`] = input.Metadata[suffix];
                return acc;
            }, {})),
    });
    b.bp("/WriteGetObjectResponse");
    let body;
    let contents;
    if (input.Body !== undefined) {
        contents = input.Body;
        body = contents;
    }
    let { hostname: resolvedHostname } = await context.endpoint();
    if (context.disableHostPrefix !== true) {
        resolvedHostname = "{RequestRoute}." + resolvedHostname;
        if (input.RequestRoute === undefined) {
            throw new Error("Empty value provided for input host prefix: RequestRoute.");
        }
        resolvedHostname = resolvedHostname.replace("{RequestRoute}", input.RequestRoute);
        if (!(0,_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_2__.isValidHostname)(resolvedHostname)) {
            throw new Error("ValidationError: prefixed hostname must be hostname compatible.");
        }
    }
    b.hn(resolvedHostname);
    b.m("POST").h(headers).b(body);
    return b.build();
};
const de_AbortMultipartUploadCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_CompleteMultipartUploadCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_Exp]: [, output.headers[_xae]],
        [_SSE]: [, output.headers[_xasse]],
        [_VI]: [, output.headers[_xavi]],
        [_SSEKMSKI]: [, output.headers[_xasseakki]],
        [_BKE]: [() => void 0 !== output.headers[_xassebke], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xassebke])],
        [_RC]: [, output.headers[_xarc]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_B] != null) {
        contents[_B] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_B]);
    }
    if (data[_CCRC] != null) {
        contents[_CCRC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CCRC]);
    }
    if (data[_CCRCC] != null) {
        contents[_CCRCC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CCRCC]);
    }
    if (data[_CCRCNVME] != null) {
        contents[_CCRCNVME] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CCRCNVME]);
    }
    if (data[_CSHA] != null) {
        contents[_CSHA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CSHA]);
    }
    if (data[_CSHAh] != null) {
        contents[_CSHAh] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CSHAh]);
    }
    if (data[_CT] != null) {
        contents[_CT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CT]);
    }
    if (data[_ETa] != null) {
        contents[_ETa] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_ETa]);
    }
    if (data[_K] != null) {
        contents[_K] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_K]);
    }
    if (data[_L] != null) {
        contents[_L] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_L]);
    }
    return contents;
};
const de_CopyObjectCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_Exp]: [, output.headers[_xae]],
        [_CSVI]: [, output.headers[_xacsvi]],
        [_VI]: [, output.headers[_xavi]],
        [_SSE]: [, output.headers[_xasse]],
        [_SSECA]: [, output.headers[_xasseca]],
        [_SSECKMD]: [, output.headers[_xasseckm]],
        [_SSEKMSKI]: [, output.headers[_xasseakki]],
        [_SSEKMSEC]: [, output.headers[_xassec]],
        [_BKE]: [() => void 0 !== output.headers[_xassebke], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xassebke])],
        [_RC]: [, output.headers[_xarc]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.CopyObjectResult = de_CopyObjectResult(data, context);
    return contents;
};
const de_CreateBucketCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_L]: [, output.headers[_lo]],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_CreateBucketMetadataTableConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_CreateMultipartUploadCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_AD]: [
            () => void 0 !== output.headers[_xaad],
            () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc7231DateTime)(output.headers[_xaad])),
        ],
        [_ARI]: [, output.headers[_xaari]],
        [_SSE]: [, output.headers[_xasse]],
        [_SSECA]: [, output.headers[_xasseca]],
        [_SSECKMD]: [, output.headers[_xasseckm]],
        [_SSEKMSKI]: [, output.headers[_xasseakki]],
        [_SSEKMSEC]: [, output.headers[_xassec]],
        [_BKE]: [() => void 0 !== output.headers[_xassebke], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xassebke])],
        [_RC]: [, output.headers[_xarc]],
        [_CA]: [, output.headers[_xaca]],
        [_CT]: [, output.headers[_xact]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_B] != null) {
        contents[_B] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_B]);
    }
    if (data[_K] != null) {
        contents[_K] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_K]);
    }
    if (data[_UI] != null) {
        contents[_UI] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_UI]);
    }
    return contents;
};
const de_CreateSessionCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_SSE]: [, output.headers[_xasse]],
        [_SSEKMSKI]: [, output.headers[_xasseakki]],
        [_SSEKMSEC]: [, output.headers[_xassec]],
        [_BKE]: [() => void 0 !== output.headers[_xassebke], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xassebke])],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_C] != null) {
        contents[_C] = de_SessionCredentials(data[_C], context);
    }
    return contents;
};
const de_DeleteBucketCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteBucketAnalyticsConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteBucketCorsCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteBucketEncryptionCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteBucketIntelligentTieringConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteBucketInventoryConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteBucketLifecycleCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteBucketMetadataTableConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteBucketMetricsConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteBucketOwnershipControlsCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteBucketPolicyCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteBucketReplicationCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteBucketTaggingCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteBucketWebsiteCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteObjectCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_DM]: [() => void 0 !== output.headers[_xadm], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xadm])],
        [_VI]: [, output.headers[_xavi]],
        [_RC]: [, output.headers[_xarc]],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeleteObjectsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data.Deleted === "") {
        contents[_De] = [];
    }
    else if (data[_De] != null) {
        contents[_De] = de_DeletedObjects((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_De]), context);
    }
    if (data.Error === "") {
        contents[_Err] = [];
    }
    else if (data[_Er] != null) {
        contents[_Err] = de_Errors((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_Er]), context);
    }
    return contents;
};
const de_DeleteObjectTaggingCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_VI]: [, output.headers[_xavi]],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_DeletePublicAccessBlockCommand = async (output, context) => {
    if (output.statusCode !== 204 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_GetBucketAccelerateConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_S] != null) {
        contents[_S] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_S]);
    }
    return contents;
};
const de_GetBucketAclCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data.AccessControlList === "") {
        contents[_Gr] = [];
    }
    else if (data[_ACLc] != null && data[_ACLc][_G] != null) {
        contents[_Gr] = de_Grants((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_ACLc][_G]), context);
    }
    if (data[_O] != null) {
        contents[_O] = de_Owner(data[_O], context);
    }
    return contents;
};
const de_GetBucketAnalyticsConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.AnalyticsConfiguration = de_AnalyticsConfiguration(data, context);
    return contents;
};
const de_GetBucketCorsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data.CORSRule === "") {
        contents[_CORSRu] = [];
    }
    else if (data[_CORSR] != null) {
        contents[_CORSRu] = de_CORSRules((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_CORSR]), context);
    }
    return contents;
};
const de_GetBucketEncryptionCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.ServerSideEncryptionConfiguration = de_ServerSideEncryptionConfiguration(data, context);
    return contents;
};
const de_GetBucketIntelligentTieringConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.IntelligentTieringConfiguration = de_IntelligentTieringConfiguration(data, context);
    return contents;
};
const de_GetBucketInventoryConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.InventoryConfiguration = de_InventoryConfiguration(data, context);
    return contents;
};
const de_GetBucketLifecycleConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_TDMOS]: [, output.headers[_xatdmos]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data.Rule === "") {
        contents[_Rul] = [];
    }
    else if (data[_Ru] != null) {
        contents[_Rul] = de_LifecycleRules((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_Ru]), context);
    }
    return contents;
};
const de_GetBucketLocationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_LC] != null) {
        contents[_LC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_LC]);
    }
    return contents;
};
const de_GetBucketLoggingCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_LE] != null) {
        contents[_LE] = de_LoggingEnabled(data[_LE], context);
    }
    return contents;
};
const de_GetBucketMetadataTableConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.GetBucketMetadataTableConfigurationResult = de_GetBucketMetadataTableConfigurationResult(data, context);
    return contents;
};
const de_GetBucketMetricsConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.MetricsConfiguration = de_MetricsConfiguration(data, context);
    return contents;
};
const de_GetBucketNotificationConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_EBC] != null) {
        contents[_EBC] = de_EventBridgeConfiguration(data[_EBC], context);
    }
    if (data.CloudFunctionConfiguration === "") {
        contents[_LFC] = [];
    }
    else if (data[_CFC] != null) {
        contents[_LFC] = de_LambdaFunctionConfigurationList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_CFC]), context);
    }
    if (data.QueueConfiguration === "") {
        contents[_QCu] = [];
    }
    else if (data[_QC] != null) {
        contents[_QCu] = de_QueueConfigurationList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_QC]), context);
    }
    if (data.TopicConfiguration === "") {
        contents[_TCop] = [];
    }
    else if (data[_TCo] != null) {
        contents[_TCop] = de_TopicConfigurationList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_TCo]), context);
    }
    return contents;
};
const de_GetBucketOwnershipControlsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.OwnershipControls = de_OwnershipControls(data, context);
    return contents;
};
const de_GetBucketPolicyCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = await collectBodyString(output.body, context);
    contents.Policy = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data);
    return contents;
};
const de_GetBucketPolicyStatusCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.PolicyStatus = de_PolicyStatus(data, context);
    return contents;
};
const de_GetBucketReplicationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.ReplicationConfiguration = de_ReplicationConfiguration(data, context);
    return contents;
};
const de_GetBucketRequestPaymentCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_Pa] != null) {
        contents[_Pa] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_Pa]);
    }
    return contents;
};
const de_GetBucketTaggingCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data.TagSet === "") {
        contents[_TS] = [];
    }
    else if (data[_TS] != null && data[_TS][_Ta] != null) {
        contents[_TS] = de_TagSet((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_TS][_Ta]), context);
    }
    return contents;
};
const de_GetBucketVersioningCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_MDf] != null) {
        contents[_MFAD] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_MDf]);
    }
    if (data[_S] != null) {
        contents[_S] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_S]);
    }
    return contents;
};
const de_GetBucketWebsiteCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_ED] != null) {
        contents[_ED] = de_ErrorDocument(data[_ED], context);
    }
    if (data[_ID] != null) {
        contents[_ID] = de_IndexDocument(data[_ID], context);
    }
    if (data[_RART] != null) {
        contents[_RART] = de_RedirectAllRequestsTo(data[_RART], context);
    }
    if (data.RoutingRules === "") {
        contents[_RRo] = [];
    }
    else if (data[_RRo] != null && data[_RRo][_RRou] != null) {
        contents[_RRo] = de_RoutingRules((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_RRo][_RRou]), context);
    }
    return contents;
};
const de_GetObjectCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_DM]: [() => void 0 !== output.headers[_xadm], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xadm])],
        [_AR]: [, output.headers[_ar]],
        [_Exp]: [, output.headers[_xae]],
        [_Re]: [, output.headers[_xar]],
        [_LM]: [() => void 0 !== output.headers[_lm], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc7231DateTime)(output.headers[_lm]))],
        [_CLo]: [() => void 0 !== output.headers[_cl_], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output.headers[_cl_])],
        [_ETa]: [, output.headers[_eta]],
        [_CCRC]: [, output.headers[_xacc]],
        [_CCRCC]: [, output.headers[_xacc_]],
        [_CCRCNVME]: [, output.headers[_xacc__]],
        [_CSHA]: [, output.headers[_xacs]],
        [_CSHAh]: [, output.headers[_xacs_]],
        [_CT]: [, output.headers[_xact]],
        [_MM]: [() => void 0 !== output.headers[_xamm], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output.headers[_xamm])],
        [_VI]: [, output.headers[_xavi]],
        [_CC]: [, output.headers[_cc]],
        [_CD]: [, output.headers[_cd]],
        [_CE]: [, output.headers[_ce]],
        [_CL]: [, output.headers[_cl]],
        [_CR]: [, output.headers[_cr]],
        [_CTo]: [, output.headers[_ct]],
        [_E]: [() => void 0 !== output.headers[_e], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc7231DateTime)(output.headers[_e]))],
        [_ES]: [, output.headers[_ex]],
        [_WRL]: [, output.headers[_xawrl]],
        [_SSE]: [, output.headers[_xasse]],
        [_SSECA]: [, output.headers[_xasseca]],
        [_SSECKMD]: [, output.headers[_xasseckm]],
        [_SSEKMSKI]: [, output.headers[_xasseakki]],
        [_BKE]: [() => void 0 !== output.headers[_xassebke], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xassebke])],
        [_SC]: [, output.headers[_xasc]],
        [_RC]: [, output.headers[_xarc]],
        [_RS]: [, output.headers[_xars]],
        [_PC]: [() => void 0 !== output.headers[_xampc], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output.headers[_xampc])],
        [_TC]: [() => void 0 !== output.headers[_xatc], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output.headers[_xatc])],
        [_OLM]: [, output.headers[_xaolm]],
        [_OLRUD]: [
            () => void 0 !== output.headers[_xaolrud],
            () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output.headers[_xaolrud])),
        ],
        [_OLLHS]: [, output.headers[_xaollh]],
        Metadata: [
            ,
            Object.keys(output.headers)
                .filter((header) => header.startsWith("x-amz-meta-"))
                .reduce((acc, header) => {
                acc[header.substring(11)] = output.headers[header];
                return acc;
            }, {}),
        ],
    });
    const data = output.body;
    context.sdkStreamMixin(data);
    contents.Body = data;
    return contents;
};
const de_GetObjectAclCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data.AccessControlList === "") {
        contents[_Gr] = [];
    }
    else if (data[_ACLc] != null && data[_ACLc][_G] != null) {
        contents[_Gr] = de_Grants((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_ACLc][_G]), context);
    }
    if (data[_O] != null) {
        contents[_O] = de_Owner(data[_O], context);
    }
    return contents;
};
const de_GetObjectAttributesCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_DM]: [() => void 0 !== output.headers[_xadm], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xadm])],
        [_LM]: [() => void 0 !== output.headers[_lm], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc7231DateTime)(output.headers[_lm]))],
        [_VI]: [, output.headers[_xavi]],
        [_RC]: [, output.headers[_xarc]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_Ch] != null) {
        contents[_Ch] = de_Checksum(data[_Ch], context);
    }
    if (data[_ETa] != null) {
        contents[_ETa] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_ETa]);
    }
    if (data[_OP] != null) {
        contents[_OP] = de_GetObjectAttributesParts(data[_OP], context);
    }
    if (data[_OSb] != null) {
        contents[_OSb] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(data[_OSb]);
    }
    if (data[_SC] != null) {
        contents[_SC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_SC]);
    }
    return contents;
};
const de_GetObjectLegalHoldCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.LegalHold = de_ObjectLockLegalHold(data, context);
    return contents;
};
const de_GetObjectLockConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.ObjectLockConfiguration = de_ObjectLockConfiguration(data, context);
    return contents;
};
const de_GetObjectRetentionCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.Retention = de_ObjectLockRetention(data, context);
    return contents;
};
const de_GetObjectTaggingCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_VI]: [, output.headers[_xavi]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data.TagSet === "") {
        contents[_TS] = [];
    }
    else if (data[_TS] != null && data[_TS][_Ta] != null) {
        contents[_TS] = de_TagSet((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_TS][_Ta]), context);
    }
    return contents;
};
const de_GetObjectTorrentCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
    });
    const data = output.body;
    context.sdkStreamMixin(data);
    contents.Body = data;
    return contents;
};
const de_GetPublicAccessBlockCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.PublicAccessBlockConfiguration = de_PublicAccessBlockConfiguration(data, context);
    return contents;
};
const de_HeadBucketCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_BLT]: [, output.headers[_xablt]],
        [_BLN]: [, output.headers[_xabln]],
        [_BR]: [, output.headers[_xabr]],
        [_APA]: [() => void 0 !== output.headers[_xaapa], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xaapa])],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_HeadObjectCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_DM]: [() => void 0 !== output.headers[_xadm], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xadm])],
        [_AR]: [, output.headers[_ar]],
        [_Exp]: [, output.headers[_xae]],
        [_Re]: [, output.headers[_xar]],
        [_AS]: [, output.headers[_xaas]],
        [_LM]: [() => void 0 !== output.headers[_lm], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc7231DateTime)(output.headers[_lm]))],
        [_CLo]: [() => void 0 !== output.headers[_cl_], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output.headers[_cl_])],
        [_CCRC]: [, output.headers[_xacc]],
        [_CCRCC]: [, output.headers[_xacc_]],
        [_CCRCNVME]: [, output.headers[_xacc__]],
        [_CSHA]: [, output.headers[_xacs]],
        [_CSHAh]: [, output.headers[_xacs_]],
        [_CT]: [, output.headers[_xact]],
        [_ETa]: [, output.headers[_eta]],
        [_MM]: [() => void 0 !== output.headers[_xamm], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output.headers[_xamm])],
        [_VI]: [, output.headers[_xavi]],
        [_CC]: [, output.headers[_cc]],
        [_CD]: [, output.headers[_cd]],
        [_CE]: [, output.headers[_ce]],
        [_CL]: [, output.headers[_cl]],
        [_CTo]: [, output.headers[_ct]],
        [_E]: [() => void 0 !== output.headers[_e], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc7231DateTime)(output.headers[_e]))],
        [_ES]: [, output.headers[_ex]],
        [_WRL]: [, output.headers[_xawrl]],
        [_SSE]: [, output.headers[_xasse]],
        [_SSECA]: [, output.headers[_xasseca]],
        [_SSECKMD]: [, output.headers[_xasseckm]],
        [_SSEKMSKI]: [, output.headers[_xasseakki]],
        [_BKE]: [() => void 0 !== output.headers[_xassebke], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xassebke])],
        [_SC]: [, output.headers[_xasc]],
        [_RC]: [, output.headers[_xarc]],
        [_RS]: [, output.headers[_xars]],
        [_PC]: [() => void 0 !== output.headers[_xampc], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output.headers[_xampc])],
        [_OLM]: [, output.headers[_xaolm]],
        [_OLRUD]: [
            () => void 0 !== output.headers[_xaolrud],
            () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output.headers[_xaolrud])),
        ],
        [_OLLHS]: [, output.headers[_xaollh]],
        Metadata: [
            ,
            Object.keys(output.headers)
                .filter((header) => header.startsWith("x-amz-meta-"))
                .reduce((acc, header) => {
                acc[header.substring(11)] = output.headers[header];
                return acc;
            }, {}),
        ],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_ListBucketAnalyticsConfigurationsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data.AnalyticsConfiguration === "") {
        contents[_ACLn] = [];
    }
    else if (data[_AC] != null) {
        contents[_ACLn] = de_AnalyticsConfigurationList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_AC]), context);
    }
    if (data[_CTon] != null) {
        contents[_CTon] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CTon]);
    }
    if (data[_IT] != null) {
        contents[_IT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(data[_IT]);
    }
    if (data[_NCT] != null) {
        contents[_NCT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_NCT]);
    }
    return contents;
};
const de_ListBucketIntelligentTieringConfigurationsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_CTon] != null) {
        contents[_CTon] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CTon]);
    }
    if (data.IntelligentTieringConfiguration === "") {
        contents[_ITCL] = [];
    }
    else if (data[_ITC] != null) {
        contents[_ITCL] = de_IntelligentTieringConfigurationList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_ITC]), context);
    }
    if (data[_IT] != null) {
        contents[_IT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(data[_IT]);
    }
    if (data[_NCT] != null) {
        contents[_NCT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_NCT]);
    }
    return contents;
};
const de_ListBucketInventoryConfigurationsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_CTon] != null) {
        contents[_CTon] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CTon]);
    }
    if (data.InventoryConfiguration === "") {
        contents[_ICL] = [];
    }
    else if (data[_IC] != null) {
        contents[_ICL] = de_InventoryConfigurationList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_IC]), context);
    }
    if (data[_IT] != null) {
        contents[_IT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(data[_IT]);
    }
    if (data[_NCT] != null) {
        contents[_NCT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_NCT]);
    }
    return contents;
};
const de_ListBucketMetricsConfigurationsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_CTon] != null) {
        contents[_CTon] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CTon]);
    }
    if (data[_IT] != null) {
        contents[_IT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(data[_IT]);
    }
    if (data.MetricsConfiguration === "") {
        contents[_MCL] = [];
    }
    else if (data[_MC] != null) {
        contents[_MCL] = de_MetricsConfigurationList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_MC]), context);
    }
    if (data[_NCT] != null) {
        contents[_NCT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_NCT]);
    }
    return contents;
};
const de_ListBucketsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data.Buckets === "") {
        contents[_Bu] = [];
    }
    else if (data[_Bu] != null && data[_Bu][_B] != null) {
        contents[_Bu] = de_Buckets((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_Bu][_B]), context);
    }
    if (data[_CTon] != null) {
        contents[_CTon] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CTon]);
    }
    if (data[_O] != null) {
        contents[_O] = de_Owner(data[_O], context);
    }
    if (data[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_P]);
    }
    return contents;
};
const de_ListDirectoryBucketsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data.Buckets === "") {
        contents[_Bu] = [];
    }
    else if (data[_Bu] != null && data[_Bu][_B] != null) {
        contents[_Bu] = de_Buckets((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_Bu][_B]), context);
    }
    if (data[_CTon] != null) {
        contents[_CTon] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CTon]);
    }
    return contents;
};
const de_ListMultipartUploadsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_B] != null) {
        contents[_B] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_B]);
    }
    if (data.CommonPrefixes === "") {
        contents[_CP] = [];
    }
    else if (data[_CP] != null) {
        contents[_CP] = de_CommonPrefixList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_CP]), context);
    }
    if (data[_D] != null) {
        contents[_D] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_D]);
    }
    if (data[_ET] != null) {
        contents[_ET] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_ET]);
    }
    if (data[_IT] != null) {
        contents[_IT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(data[_IT]);
    }
    if (data[_KM] != null) {
        contents[_KM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_KM]);
    }
    if (data[_MU] != null) {
        contents[_MU] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(data[_MU]);
    }
    if (data[_NKM] != null) {
        contents[_NKM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_NKM]);
    }
    if (data[_NUIM] != null) {
        contents[_NUIM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_NUIM]);
    }
    if (data[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_P]);
    }
    if (data[_UIM] != null) {
        contents[_UIM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_UIM]);
    }
    if (data.Upload === "") {
        contents[_Up] = [];
    }
    else if (data[_U] != null) {
        contents[_Up] = de_MultipartUploadList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_U]), context);
    }
    return contents;
};
const de_ListObjectsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data.CommonPrefixes === "") {
        contents[_CP] = [];
    }
    else if (data[_CP] != null) {
        contents[_CP] = de_CommonPrefixList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_CP]), context);
    }
    if (data.Contents === "") {
        contents[_Co] = [];
    }
    else if (data[_Co] != null) {
        contents[_Co] = de_ObjectList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_Co]), context);
    }
    if (data[_D] != null) {
        contents[_D] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_D]);
    }
    if (data[_ET] != null) {
        contents[_ET] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_ET]);
    }
    if (data[_IT] != null) {
        contents[_IT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(data[_IT]);
    }
    if (data[_M] != null) {
        contents[_M] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_M]);
    }
    if (data[_MK] != null) {
        contents[_MK] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(data[_MK]);
    }
    if (data[_N] != null) {
        contents[_N] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_N]);
    }
    if (data[_NM] != null) {
        contents[_NM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_NM]);
    }
    if (data[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_P]);
    }
    return contents;
};
const de_ListObjectsV2Command = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data.CommonPrefixes === "") {
        contents[_CP] = [];
    }
    else if (data[_CP] != null) {
        contents[_CP] = de_CommonPrefixList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_CP]), context);
    }
    if (data.Contents === "") {
        contents[_Co] = [];
    }
    else if (data[_Co] != null) {
        contents[_Co] = de_ObjectList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_Co]), context);
    }
    if (data[_CTon] != null) {
        contents[_CTon] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CTon]);
    }
    if (data[_D] != null) {
        contents[_D] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_D]);
    }
    if (data[_ET] != null) {
        contents[_ET] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_ET]);
    }
    if (data[_IT] != null) {
        contents[_IT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(data[_IT]);
    }
    if (data[_KC] != null) {
        contents[_KC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(data[_KC]);
    }
    if (data[_MK] != null) {
        contents[_MK] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(data[_MK]);
    }
    if (data[_N] != null) {
        contents[_N] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_N]);
    }
    if (data[_NCT] != null) {
        contents[_NCT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_NCT]);
    }
    if (data[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_P]);
    }
    if (data[_SA] != null) {
        contents[_SA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_SA]);
    }
    return contents;
};
const de_ListObjectVersionsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data.CommonPrefixes === "") {
        contents[_CP] = [];
    }
    else if (data[_CP] != null) {
        contents[_CP] = de_CommonPrefixList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_CP]), context);
    }
    if (data.DeleteMarker === "") {
        contents[_DMe] = [];
    }
    else if (data[_DM] != null) {
        contents[_DMe] = de_DeleteMarkers((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_DM]), context);
    }
    if (data[_D] != null) {
        contents[_D] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_D]);
    }
    if (data[_ET] != null) {
        contents[_ET] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_ET]);
    }
    if (data[_IT] != null) {
        contents[_IT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(data[_IT]);
    }
    if (data[_KM] != null) {
        contents[_KM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_KM]);
    }
    if (data[_MK] != null) {
        contents[_MK] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(data[_MK]);
    }
    if (data[_N] != null) {
        contents[_N] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_N]);
    }
    if (data[_NKM] != null) {
        contents[_NKM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_NKM]);
    }
    if (data[_NVIM] != null) {
        contents[_NVIM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_NVIM]);
    }
    if (data[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_P]);
    }
    if (data[_VIM] != null) {
        contents[_VIM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_VIM]);
    }
    if (data.Version === "") {
        contents[_Ve] = [];
    }
    else if (data[_V] != null) {
        contents[_Ve] = de_ObjectVersionList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_V]), context);
    }
    return contents;
};
const de_ListPartsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_AD]: [
            () => void 0 !== output.headers[_xaad],
            () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc7231DateTime)(output.headers[_xaad])),
        ],
        [_ARI]: [, output.headers[_xaari]],
        [_RC]: [, output.headers[_xarc]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context)), "body");
    if (data[_B] != null) {
        contents[_B] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_B]);
    }
    if (data[_CA] != null) {
        contents[_CA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CA]);
    }
    if (data[_CT] != null) {
        contents[_CT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_CT]);
    }
    if (data[_In] != null) {
        contents[_In] = de_Initiator(data[_In], context);
    }
    if (data[_IT] != null) {
        contents[_IT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(data[_IT]);
    }
    if (data[_K] != null) {
        contents[_K] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_K]);
    }
    if (data[_MP] != null) {
        contents[_MP] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(data[_MP]);
    }
    if (data[_NPNM] != null) {
        contents[_NPNM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_NPNM]);
    }
    if (data[_O] != null) {
        contents[_O] = de_Owner(data[_O], context);
    }
    if (data[_PNM] != null) {
        contents[_PNM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_PNM]);
    }
    if (data.Part === "") {
        contents[_Part] = [];
    }
    else if (data[_Par] != null) {
        contents[_Part] = de_Parts((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(data[_Par]), context);
    }
    if (data[_SC] != null) {
        contents[_SC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_SC]);
    }
    if (data[_UI] != null) {
        contents[_UI] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_UI]);
    }
    return contents;
};
const de_PutBucketAccelerateConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketAclCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketAnalyticsConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketCorsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketEncryptionCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketIntelligentTieringConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketInventoryConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketLifecycleConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_TDMOS]: [, output.headers[_xatdmos]],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketLoggingCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketMetricsConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketNotificationConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketOwnershipControlsCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketPolicyCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketReplicationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketRequestPaymentCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketTaggingCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketVersioningCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutBucketWebsiteCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutObjectCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_Exp]: [, output.headers[_xae]],
        [_ETa]: [, output.headers[_eta]],
        [_CCRC]: [, output.headers[_xacc]],
        [_CCRCC]: [, output.headers[_xacc_]],
        [_CCRCNVME]: [, output.headers[_xacc__]],
        [_CSHA]: [, output.headers[_xacs]],
        [_CSHAh]: [, output.headers[_xacs_]],
        [_CT]: [, output.headers[_xact]],
        [_SSE]: [, output.headers[_xasse]],
        [_VI]: [, output.headers[_xavi]],
        [_SSECA]: [, output.headers[_xasseca]],
        [_SSECKMD]: [, output.headers[_xasseckm]],
        [_SSEKMSKI]: [, output.headers[_xasseakki]],
        [_SSEKMSEC]: [, output.headers[_xassec]],
        [_BKE]: [() => void 0 !== output.headers[_xassebke], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xassebke])],
        [_Si]: [() => void 0 !== output.headers[_xaos], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output.headers[_xaos])],
        [_RC]: [, output.headers[_xarc]],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutObjectAclCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutObjectLegalHoldCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutObjectLockConfigurationCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutObjectRetentionCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutObjectTaggingCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_VI]: [, output.headers[_xavi]],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_PutPublicAccessBlockCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_RestoreObjectCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_RC]: [, output.headers[_xarc]],
        [_ROP]: [, output.headers[_xarop]],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_SelectObjectContentCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    const data = output.body;
    contents.Payload = de_SelectObjectContentEventStream(data, context);
    return contents;
};
const de_UploadPartCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_SSE]: [, output.headers[_xasse]],
        [_ETa]: [, output.headers[_eta]],
        [_CCRC]: [, output.headers[_xacc]],
        [_CCRCC]: [, output.headers[_xacc_]],
        [_CCRCNVME]: [, output.headers[_xacc__]],
        [_CSHA]: [, output.headers[_xacs]],
        [_CSHAh]: [, output.headers[_xacs_]],
        [_SSECA]: [, output.headers[_xasseca]],
        [_SSECKMD]: [, output.headers[_xasseckm]],
        [_SSEKMSKI]: [, output.headers[_xasseakki]],
        [_BKE]: [() => void 0 !== output.headers[_xassebke], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xassebke])],
        [_RC]: [, output.headers[_xarc]],
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_UploadPartCopyCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
        [_CSVI]: [, output.headers[_xacsvi]],
        [_SSE]: [, output.headers[_xasse]],
        [_SSECA]: [, output.headers[_xasseca]],
        [_SSECKMD]: [, output.headers[_xasseckm]],
        [_SSEKMSKI]: [, output.headers[_xasseakki]],
        [_BKE]: [() => void 0 !== output.headers[_xassebke], () => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output.headers[_xassebke])],
        [_RC]: [, output.headers[_xarc]],
    });
    const data = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectObject)(await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context));
    contents.CopyPartResult = de_CopyPartResult(data, context);
    return contents;
};
const de_WriteGetObjectResponseCommand = async (output, context) => {
    if (output.statusCode !== 200 && output.statusCode >= 300) {
        return de_CommandError(output, context);
    }
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({
        $metadata: deserializeMetadata(output),
    });
    await (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(output.body, context);
    return contents;
};
const de_CommandError = async (output, context) => {
    const parsedOutput = {
        ...output,
        body: await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlErrorBody)(output.body, context),
    };
    const errorCode = (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.loadRestXmlErrorCode)(output, parsedOutput.body);
    switch (errorCode) {
        case "NoSuchUpload":
        case "com.amazonaws.s3#NoSuchUpload":
            throw await de_NoSuchUploadRes(parsedOutput, context);
        case "ObjectNotInActiveTierError":
        case "com.amazonaws.s3#ObjectNotInActiveTierError":
            throw await de_ObjectNotInActiveTierErrorRes(parsedOutput, context);
        case "BucketAlreadyExists":
        case "com.amazonaws.s3#BucketAlreadyExists":
            throw await de_BucketAlreadyExistsRes(parsedOutput, context);
        case "BucketAlreadyOwnedByYou":
        case "com.amazonaws.s3#BucketAlreadyOwnedByYou":
            throw await de_BucketAlreadyOwnedByYouRes(parsedOutput, context);
        case "NoSuchBucket":
        case "com.amazonaws.s3#NoSuchBucket":
            throw await de_NoSuchBucketRes(parsedOutput, context);
        case "InvalidObjectState":
        case "com.amazonaws.s3#InvalidObjectState":
            throw await de_InvalidObjectStateRes(parsedOutput, context);
        case "NoSuchKey":
        case "com.amazonaws.s3#NoSuchKey":
            throw await de_NoSuchKeyRes(parsedOutput, context);
        case "NotFound":
        case "com.amazonaws.s3#NotFound":
            throw await de_NotFoundRes(parsedOutput, context);
        case "EncryptionTypeMismatch":
        case "com.amazonaws.s3#EncryptionTypeMismatch":
            throw await de_EncryptionTypeMismatchRes(parsedOutput, context);
        case "InvalidRequest":
        case "com.amazonaws.s3#InvalidRequest":
            throw await de_InvalidRequestRes(parsedOutput, context);
        case "InvalidWriteOffset":
        case "com.amazonaws.s3#InvalidWriteOffset":
            throw await de_InvalidWriteOffsetRes(parsedOutput, context);
        case "TooManyParts":
        case "com.amazonaws.s3#TooManyParts":
            throw await de_TooManyPartsRes(parsedOutput, context);
        case "ObjectAlreadyInActiveTierError":
        case "com.amazonaws.s3#ObjectAlreadyInActiveTierError":
            throw await de_ObjectAlreadyInActiveTierErrorRes(parsedOutput, context);
        default:
            const parsedBody = parsedOutput.body;
            return throwDefaultError({
                output,
                parsedBody,
                errorCode,
            });
    }
};
const throwDefaultError = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.withBaseException)(_models_S3ServiceException__WEBPACK_IMPORTED_MODULE_5__.S3ServiceException);
const de_BucketAlreadyExistsRes = async (parsedOutput, context) => {
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({});
    const data = parsedOutput.body;
    const exception = new _models_models_0__WEBPACK_IMPORTED_MODULE_6__.BucketAlreadyExists({
        $metadata: deserializeMetadata(parsedOutput),
        ...contents,
    });
    return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.decorateServiceException)(exception, parsedOutput.body);
};
const de_BucketAlreadyOwnedByYouRes = async (parsedOutput, context) => {
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({});
    const data = parsedOutput.body;
    const exception = new _models_models_0__WEBPACK_IMPORTED_MODULE_6__.BucketAlreadyOwnedByYou({
        $metadata: deserializeMetadata(parsedOutput),
        ...contents,
    });
    return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.decorateServiceException)(exception, parsedOutput.body);
};
const de_EncryptionTypeMismatchRes = async (parsedOutput, context) => {
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({});
    const data = parsedOutput.body;
    const exception = new _models_models_1__WEBPACK_IMPORTED_MODULE_7__.EncryptionTypeMismatch({
        $metadata: deserializeMetadata(parsedOutput),
        ...contents,
    });
    return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.decorateServiceException)(exception, parsedOutput.body);
};
const de_InvalidObjectStateRes = async (parsedOutput, context) => {
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({});
    const data = parsedOutput.body;
    if (data[_AT] != null) {
        contents[_AT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_AT]);
    }
    if (data[_SC] != null) {
        contents[_SC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(data[_SC]);
    }
    const exception = new _models_models_0__WEBPACK_IMPORTED_MODULE_6__.InvalidObjectState({
        $metadata: deserializeMetadata(parsedOutput),
        ...contents,
    });
    return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.decorateServiceException)(exception, parsedOutput.body);
};
const de_InvalidRequestRes = async (parsedOutput, context) => {
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({});
    const data = parsedOutput.body;
    const exception = new _models_models_1__WEBPACK_IMPORTED_MODULE_7__.InvalidRequest({
        $metadata: deserializeMetadata(parsedOutput),
        ...contents,
    });
    return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.decorateServiceException)(exception, parsedOutput.body);
};
const de_InvalidWriteOffsetRes = async (parsedOutput, context) => {
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({});
    const data = parsedOutput.body;
    const exception = new _models_models_1__WEBPACK_IMPORTED_MODULE_7__.InvalidWriteOffset({
        $metadata: deserializeMetadata(parsedOutput),
        ...contents,
    });
    return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.decorateServiceException)(exception, parsedOutput.body);
};
const de_NoSuchBucketRes = async (parsedOutput, context) => {
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({});
    const data = parsedOutput.body;
    const exception = new _models_models_0__WEBPACK_IMPORTED_MODULE_6__.NoSuchBucket({
        $metadata: deserializeMetadata(parsedOutput),
        ...contents,
    });
    return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.decorateServiceException)(exception, parsedOutput.body);
};
const de_NoSuchKeyRes = async (parsedOutput, context) => {
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({});
    const data = parsedOutput.body;
    const exception = new _models_models_0__WEBPACK_IMPORTED_MODULE_6__.NoSuchKey({
        $metadata: deserializeMetadata(parsedOutput),
        ...contents,
    });
    return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.decorateServiceException)(exception, parsedOutput.body);
};
const de_NoSuchUploadRes = async (parsedOutput, context) => {
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({});
    const data = parsedOutput.body;
    const exception = new _models_models_0__WEBPACK_IMPORTED_MODULE_6__.NoSuchUpload({
        $metadata: deserializeMetadata(parsedOutput),
        ...contents,
    });
    return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.decorateServiceException)(exception, parsedOutput.body);
};
const de_NotFoundRes = async (parsedOutput, context) => {
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({});
    const data = parsedOutput.body;
    const exception = new _models_models_0__WEBPACK_IMPORTED_MODULE_6__.NotFound({
        $metadata: deserializeMetadata(parsedOutput),
        ...contents,
    });
    return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.decorateServiceException)(exception, parsedOutput.body);
};
const de_ObjectAlreadyInActiveTierErrorRes = async (parsedOutput, context) => {
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({});
    const data = parsedOutput.body;
    const exception = new _models_models_1__WEBPACK_IMPORTED_MODULE_7__.ObjectAlreadyInActiveTierError({
        $metadata: deserializeMetadata(parsedOutput),
        ...contents,
    });
    return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.decorateServiceException)(exception, parsedOutput.body);
};
const de_ObjectNotInActiveTierErrorRes = async (parsedOutput, context) => {
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({});
    const data = parsedOutput.body;
    const exception = new _models_models_0__WEBPACK_IMPORTED_MODULE_6__.ObjectNotInActiveTierError({
        $metadata: deserializeMetadata(parsedOutput),
        ...contents,
    });
    return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.decorateServiceException)(exception, parsedOutput.body);
};
const de_TooManyPartsRes = async (parsedOutput, context) => {
    const contents = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.map)({});
    const data = parsedOutput.body;
    const exception = new _models_models_1__WEBPACK_IMPORTED_MODULE_7__.TooManyParts({
        $metadata: deserializeMetadata(parsedOutput),
        ...contents,
    });
    return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.decorateServiceException)(exception, parsedOutput.body);
};
const de_SelectObjectContentEventStream = (output, context) => {
    return context.eventStreamMarshaller.deserialize(output, async (event) => {
        if (event["Records"] != null) {
            return {
                Records: await de_RecordsEvent_event(event["Records"], context),
            };
        }
        if (event["Stats"] != null) {
            return {
                Stats: await de_StatsEvent_event(event["Stats"], context),
            };
        }
        if (event["Progress"] != null) {
            return {
                Progress: await de_ProgressEvent_event(event["Progress"], context),
            };
        }
        if (event["Cont"] != null) {
            return {
                Cont: await de_ContinuationEvent_event(event["Cont"], context),
            };
        }
        if (event["End"] != null) {
            return {
                End: await de_EndEvent_event(event["End"], context),
            };
        }
        return { $unknown: output };
    });
};
const de_ContinuationEvent_event = async (output, context) => {
    const contents = {};
    const data = await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context);
    Object.assign(contents, de_ContinuationEvent(data, context));
    return contents;
};
const de_EndEvent_event = async (output, context) => {
    const contents = {};
    const data = await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context);
    Object.assign(contents, de_EndEvent(data, context));
    return contents;
};
const de_ProgressEvent_event = async (output, context) => {
    const contents = {};
    const data = await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context);
    contents.Details = de_Progress(data, context);
    return contents;
};
const de_RecordsEvent_event = async (output, context) => {
    const contents = {};
    contents.Payload = output.body;
    return contents;
};
const de_StatsEvent_event = async (output, context) => {
    const contents = {};
    const data = await (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_4__.parseXmlBody)(output.body, context);
    contents.Details = de_Stats(data, context);
    return contents;
};
const se_AbortIncompleteMultipartUpload = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_AIMU);
    if (input[_DAI] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_DAI, String(input[_DAI])).n(_DAI));
    }
    return bn;
};
const se_AccelerateConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_ACc);
    if (input[_S] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_BAS, input[_S]).n(_S));
    }
    return bn;
};
const se_AccessControlPolicy = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_ACP);
    bn.lc(input, "Grants", "AccessControlList", () => se_Grants(input[_Gr], context));
    if (input[_O] != null) {
        bn.c(se_Owner(input[_O], context).n(_O));
    }
    return bn;
};
const se_AccessControlTranslation = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_ACT);
    if (input[_O] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_OOw, input[_O]).n(_O));
    }
    return bn;
};
const se_AllowedHeaders = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_AH, entry);
        return n.n(_me);
    });
};
const se_AllowedMethods = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_AM, entry);
        return n.n(_me);
    });
};
const se_AllowedOrigins = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_AO, entry);
        return n.n(_me);
    });
};
const se_AnalyticsAndOperator = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_AAO);
    bn.cc(input, _P);
    bn.l(input, "Tags", "Tag", () => se_TagSet(input[_Tag], context));
    return bn;
};
const se_AnalyticsConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_AC);
    if (input[_I] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_AI, input[_I]).n(_I));
    }
    if (input[_F] != null) {
        bn.c(se_AnalyticsFilter(input[_F], context).n(_F));
    }
    if (input[_SCA] != null) {
        bn.c(se_StorageClassAnalysis(input[_SCA], context).n(_SCA));
    }
    return bn;
};
const se_AnalyticsExportDestination = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_AED);
    if (input[_SBD] != null) {
        bn.c(se_AnalyticsS3BucketDestination(input[_SBD], context).n(_SBD));
    }
    return bn;
};
const se_AnalyticsFilter = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_AF);
    _models_models_0__WEBPACK_IMPORTED_MODULE_6__.AnalyticsFilter.visit(input, {
        Prefix: (value) => {
            if (input[_P] != null) {
                bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_P, value).n(_P));
            }
        },
        Tag: (value) => {
            if (input[_Ta] != null) {
                bn.c(se_Tag(value, context).n(_Ta));
            }
        },
        And: (value) => {
            if (input[_A] != null) {
                bn.c(se_AnalyticsAndOperator(value, context).n(_A));
            }
        },
        _: (name, value) => {
            if (!(value instanceof _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode || value instanceof _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlText)) {
                throw new Error("Unable to serialize unknown union members in XML.");
            }
            bn.c(new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(name).c(value));
        },
    });
    return bn;
};
const se_AnalyticsS3BucketDestination = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_ASBD);
    if (input[_Fo] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_ASEFF, input[_Fo]).n(_Fo));
    }
    if (input[_BAI] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_AIc, input[_BAI]).n(_BAI));
    }
    if (input[_B] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_BN, input[_B]).n(_B));
    }
    bn.cc(input, _P);
    return bn;
};
const se_BucketInfo = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_BI);
    bn.cc(input, _DR);
    if (input[_Ty] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_BT, input[_Ty]).n(_Ty));
    }
    return bn;
};
const se_BucketLifecycleConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_BLC);
    bn.l(input, "Rules", "Rule", () => se_LifecycleRules(input[_Rul], context));
    return bn;
};
const se_BucketLoggingStatus = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_BLS);
    if (input[_LE] != null) {
        bn.c(se_LoggingEnabled(input[_LE], context).n(_LE));
    }
    return bn;
};
const se_CompletedMultipartUpload = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_CMU);
    bn.l(input, "Parts", "Part", () => se_CompletedPartList(input[_Part], context));
    return bn;
};
const se_CompletedPart = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_CPo);
    bn.cc(input, _ETa);
    bn.cc(input, _CCRC);
    bn.cc(input, _CCRCC);
    bn.cc(input, _CCRCNVME);
    bn.cc(input, _CSHA);
    bn.cc(input, _CSHAh);
    if (input[_PN] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_PN, String(input[_PN])).n(_PN));
    }
    return bn;
};
const se_CompletedPartList = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_CompletedPart(entry, context);
        return n.n(_me);
    });
};
const se_Condition = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_Con);
    bn.cc(input, _HECRE);
    bn.cc(input, _KPE);
    return bn;
};
const se_CORSConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_CORSC);
    bn.l(input, "CORSRules", "CORSRule", () => se_CORSRules(input[_CORSRu], context));
    return bn;
};
const se_CORSRule = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_CORSR);
    bn.cc(input, _ID_);
    bn.l(input, "AllowedHeaders", "AllowedHeader", () => se_AllowedHeaders(input[_AHl], context));
    bn.l(input, "AllowedMethods", "AllowedMethod", () => se_AllowedMethods(input[_AMl], context));
    bn.l(input, "AllowedOrigins", "AllowedOrigin", () => se_AllowedOrigins(input[_AOl], context));
    bn.l(input, "ExposeHeaders", "ExposeHeader", () => se_ExposeHeaders(input[_EH], context));
    if (input[_MAS] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_MAS, String(input[_MAS])).n(_MAS));
    }
    return bn;
};
const se_CORSRules = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_CORSRule(entry, context);
        return n.n(_me);
    });
};
const se_CreateBucketConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_CBC);
    if (input[_LC] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_BLCu, input[_LC]).n(_LC));
    }
    if (input[_L] != null) {
        bn.c(se_LocationInfo(input[_L], context).n(_L));
    }
    if (input[_B] != null) {
        bn.c(se_BucketInfo(input[_B], context).n(_B));
    }
    return bn;
};
const se_CSVInput = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_CSVIn);
    bn.cc(input, _FHI);
    bn.cc(input, _Com);
    bn.cc(input, _QEC);
    bn.cc(input, _RD);
    bn.cc(input, _FD);
    bn.cc(input, _QCuo);
    if (input[_AQRD] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_AQRD, String(input[_AQRD])).n(_AQRD));
    }
    return bn;
};
const se_CSVOutput = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_CSVO);
    bn.cc(input, _QF);
    bn.cc(input, _QEC);
    bn.cc(input, _RD);
    bn.cc(input, _FD);
    bn.cc(input, _QCuo);
    return bn;
};
const se_DefaultRetention = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_DRe);
    if (input[_Mo] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_OLRM, input[_Mo]).n(_Mo));
    }
    if (input[_Da] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Da, String(input[_Da])).n(_Da));
    }
    if (input[_Y] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Y, String(input[_Y])).n(_Y));
    }
    return bn;
};
const se_Delete = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_Del);
    bn.l(input, "Objects", "Object", () => se_ObjectIdentifierList(input[_Ob], context));
    if (input[_Q] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Q, String(input[_Q])).n(_Q));
    }
    return bn;
};
const se_DeleteMarkerReplication = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_DMR);
    if (input[_S] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_DMRS, input[_S]).n(_S));
    }
    return bn;
};
const se_Destination = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_Des);
    if (input[_B] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_BN, input[_B]).n(_B));
    }
    if (input[_Ac] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_AIc, input[_Ac]).n(_Ac));
    }
    bn.cc(input, _SC);
    if (input[_ACT] != null) {
        bn.c(se_AccessControlTranslation(input[_ACT], context).n(_ACT));
    }
    if (input[_ECn] != null) {
        bn.c(se_EncryptionConfiguration(input[_ECn], context).n(_ECn));
    }
    if (input[_RTe] != null) {
        bn.c(se_ReplicationTime(input[_RTe], context).n(_RTe));
    }
    if (input[_Me] != null) {
        bn.c(se_Metrics(input[_Me], context).n(_Me));
    }
    return bn;
};
const se_Encryption = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_En);
    if (input[_ETn] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_SSE, input[_ETn]).n(_ETn));
    }
    if (input[_KMSKI] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_SSEKMSKI, input[_KMSKI]).n(_KMSKI));
    }
    bn.cc(input, _KMSC);
    return bn;
};
const se_EncryptionConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_ECn);
    bn.cc(input, _RKKID);
    return bn;
};
const se_ErrorDocument = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_ED);
    if (input[_K] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_OK, input[_K]).n(_K));
    }
    return bn;
};
const se_EventBridgeConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_EBC);
    return bn;
};
const se_EventList = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Ev, entry);
        return n.n(_me);
    });
};
const se_ExistingObjectReplication = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_EOR);
    if (input[_S] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_EORS, input[_S]).n(_S));
    }
    return bn;
};
const se_ExposeHeaders = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_EHx, entry);
        return n.n(_me);
    });
};
const se_FilterRule = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_FR);
    if (input[_N] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_FRN, input[_N]).n(_N));
    }
    if (input[_Va] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_FRV, input[_Va]).n(_Va));
    }
    return bn;
};
const se_FilterRuleList = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_FilterRule(entry, context);
        return n.n(_me);
    });
};
const se_GlacierJobParameters = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_GJP);
    bn.cc(input, _Ti);
    return bn;
};
const se_Grant = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_G);
    if (input[_Gra] != null) {
        const n = se_Grantee(input[_Gra], context).n(_Gra);
        n.a("xmlns:xsi", "http://www.w3.org/2001/XMLSchema-instance");
        bn.c(n);
    }
    bn.cc(input, _Pe);
    return bn;
};
const se_Grantee = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_Gra);
    bn.cc(input, _DN);
    bn.cc(input, _EA);
    bn.cc(input, _ID_);
    bn.cc(input, _URI);
    bn.a("xsi:type", input[_Ty]);
    return bn;
};
const se_Grants = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_Grant(entry, context);
        return n.n(_G);
    });
};
const se_IndexDocument = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_ID);
    bn.cc(input, _Su);
    return bn;
};
const se_InputSerialization = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_IS);
    if (input[_CSV] != null) {
        bn.c(se_CSVInput(input[_CSV], context).n(_CSV));
    }
    bn.cc(input, _CTom);
    if (input[_JSON] != null) {
        bn.c(se_JSONInput(input[_JSON], context).n(_JSON));
    }
    if (input[_Parq] != null) {
        bn.c(se_ParquetInput(input[_Parq], context).n(_Parq));
    }
    return bn;
};
const se_IntelligentTieringAndOperator = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_ITAO);
    bn.cc(input, _P);
    bn.l(input, "Tags", "Tag", () => se_TagSet(input[_Tag], context));
    return bn;
};
const se_IntelligentTieringConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_ITC);
    if (input[_I] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_ITI, input[_I]).n(_I));
    }
    if (input[_F] != null) {
        bn.c(se_IntelligentTieringFilter(input[_F], context).n(_F));
    }
    if (input[_S] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_ITS, input[_S]).n(_S));
    }
    bn.l(input, "Tierings", "Tiering", () => se_TieringList(input[_Tie], context));
    return bn;
};
const se_IntelligentTieringFilter = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_ITF);
    bn.cc(input, _P);
    if (input[_Ta] != null) {
        bn.c(se_Tag(input[_Ta], context).n(_Ta));
    }
    if (input[_A] != null) {
        bn.c(se_IntelligentTieringAndOperator(input[_A], context).n(_A));
    }
    return bn;
};
const se_InventoryConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_IC);
    if (input[_Des] != null) {
        bn.c(se_InventoryDestination(input[_Des], context).n(_Des));
    }
    if (input[_IE] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_IE, String(input[_IE])).n(_IE));
    }
    if (input[_F] != null) {
        bn.c(se_InventoryFilter(input[_F], context).n(_F));
    }
    if (input[_I] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_II, input[_I]).n(_I));
    }
    if (input[_IOV] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_IIOV, input[_IOV]).n(_IOV));
    }
    bn.lc(input, "OptionalFields", "OptionalFields", () => se_InventoryOptionalFields(input[_OF], context));
    if (input[_Sc] != null) {
        bn.c(se_InventorySchedule(input[_Sc], context).n(_Sc));
    }
    return bn;
};
const se_InventoryDestination = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_IDn);
    if (input[_SBD] != null) {
        bn.c(se_InventoryS3BucketDestination(input[_SBD], context).n(_SBD));
    }
    return bn;
};
const se_InventoryEncryption = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_IEn);
    if (input[_SSES] != null) {
        bn.c(se_SSES3(input[_SSES], context).n(_SS));
    }
    if (input[_SSEKMS] != null) {
        bn.c(se_SSEKMS(input[_SSEKMS], context).n(_SK));
    }
    return bn;
};
const se_InventoryFilter = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_IF);
    bn.cc(input, _P);
    return bn;
};
const se_InventoryOptionalFields = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_IOF, entry);
        return n.n(_Fi);
    });
};
const se_InventoryS3BucketDestination = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_ISBD);
    bn.cc(input, _AIc);
    if (input[_B] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_BN, input[_B]).n(_B));
    }
    if (input[_Fo] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_IFn, input[_Fo]).n(_Fo));
    }
    bn.cc(input, _P);
    if (input[_En] != null) {
        bn.c(se_InventoryEncryption(input[_En], context).n(_En));
    }
    return bn;
};
const se_InventorySchedule = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_ISn);
    if (input[_Fr] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_IFnv, input[_Fr]).n(_Fr));
    }
    return bn;
};
const se_JSONInput = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_JSONI);
    if (input[_Ty] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_JSONT, input[_Ty]).n(_Ty));
    }
    return bn;
};
const se_JSONOutput = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_JSONO);
    bn.cc(input, _RD);
    return bn;
};
const se_LambdaFunctionConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_LFCa);
    if (input[_I] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_NI, input[_I]).n(_I));
    }
    if (input[_LFA] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_LFA, input[_LFA]).n(_CF));
    }
    bn.l(input, "Events", "Event", () => se_EventList(input[_Eve], context));
    if (input[_F] != null) {
        bn.c(se_NotificationConfigurationFilter(input[_F], context).n(_F));
    }
    return bn;
};
const se_LambdaFunctionConfigurationList = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_LambdaFunctionConfiguration(entry, context);
        return n.n(_me);
    });
};
const se_LifecycleExpiration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_LEi);
    if (input[_Dat] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Dat, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.serializeDateTime)(input[_Dat]).toString()).n(_Dat));
    }
    if (input[_Da] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Da, String(input[_Da])).n(_Da));
    }
    if (input[_EODM] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_EODM, String(input[_EODM])).n(_EODM));
    }
    return bn;
};
const se_LifecycleRule = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_LR);
    if (input[_Exp] != null) {
        bn.c(se_LifecycleExpiration(input[_Exp], context).n(_Exp));
    }
    bn.cc(input, _ID_);
    bn.cc(input, _P);
    if (input[_F] != null) {
        bn.c(se_LifecycleRuleFilter(input[_F], context).n(_F));
    }
    if (input[_S] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_ESx, input[_S]).n(_S));
    }
    bn.l(input, "Transitions", "Transition", () => se_TransitionList(input[_Tr], context));
    bn.l(input, "NoncurrentVersionTransitions", "NoncurrentVersionTransition", () => se_NoncurrentVersionTransitionList(input[_NVT], context));
    if (input[_NVE] != null) {
        bn.c(se_NoncurrentVersionExpiration(input[_NVE], context).n(_NVE));
    }
    if (input[_AIMU] != null) {
        bn.c(se_AbortIncompleteMultipartUpload(input[_AIMU], context).n(_AIMU));
    }
    return bn;
};
const se_LifecycleRuleAndOperator = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_LRAO);
    bn.cc(input, _P);
    bn.l(input, "Tags", "Tag", () => se_TagSet(input[_Tag], context));
    if (input[_OSGT] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_OSGTB, String(input[_OSGT])).n(_OSGT));
    }
    if (input[_OSLT] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_OSLTB, String(input[_OSLT])).n(_OSLT));
    }
    return bn;
};
const se_LifecycleRuleFilter = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_LRF);
    bn.cc(input, _P);
    if (input[_Ta] != null) {
        bn.c(se_Tag(input[_Ta], context).n(_Ta));
    }
    if (input[_OSGT] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_OSGTB, String(input[_OSGT])).n(_OSGT));
    }
    if (input[_OSLT] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_OSLTB, String(input[_OSLT])).n(_OSLT));
    }
    if (input[_A] != null) {
        bn.c(se_LifecycleRuleAndOperator(input[_A], context).n(_A));
    }
    return bn;
};
const se_LifecycleRules = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_LifecycleRule(entry, context);
        return n.n(_me);
    });
};
const se_LocationInfo = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_LI);
    if (input[_Ty] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_LT, input[_Ty]).n(_Ty));
    }
    if (input[_N] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_LNAS, input[_N]).n(_N));
    }
    return bn;
};
const se_LoggingEnabled = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_LE);
    bn.cc(input, _TB);
    bn.lc(input, "TargetGrants", "TargetGrants", () => se_TargetGrants(input[_TG], context));
    bn.cc(input, _TP);
    if (input[_TOKF] != null) {
        bn.c(se_TargetObjectKeyFormat(input[_TOKF], context).n(_TOKF));
    }
    return bn;
};
const se_MetadataEntry = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_ME);
    if (input[_N] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_MKe, input[_N]).n(_N));
    }
    if (input[_Va] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_MV, input[_Va]).n(_Va));
    }
    return bn;
};
const se_MetadataTableConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_MTC);
    if (input[_STD] != null) {
        bn.c(se_S3TablesDestination(input[_STD], context).n(_STD));
    }
    return bn;
};
const se_Metrics = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_Me);
    if (input[_S] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_MS, input[_S]).n(_S));
    }
    if (input[_ETv] != null) {
        bn.c(se_ReplicationTimeValue(input[_ETv], context).n(_ETv));
    }
    return bn;
};
const se_MetricsAndOperator = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_MAO);
    bn.cc(input, _P);
    bn.l(input, "Tags", "Tag", () => se_TagSet(input[_Tag], context));
    bn.cc(input, _APAc);
    return bn;
};
const se_MetricsConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_MC);
    if (input[_I] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_MI, input[_I]).n(_I));
    }
    if (input[_F] != null) {
        bn.c(se_MetricsFilter(input[_F], context).n(_F));
    }
    return bn;
};
const se_MetricsFilter = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_MF);
    _models_models_0__WEBPACK_IMPORTED_MODULE_6__.MetricsFilter.visit(input, {
        Prefix: (value) => {
            if (input[_P] != null) {
                bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_P, value).n(_P));
            }
        },
        Tag: (value) => {
            if (input[_Ta] != null) {
                bn.c(se_Tag(value, context).n(_Ta));
            }
        },
        AccessPointArn: (value) => {
            if (input[_APAc] != null) {
                bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_APAc, value).n(_APAc));
            }
        },
        And: (value) => {
            if (input[_A] != null) {
                bn.c(se_MetricsAndOperator(value, context).n(_A));
            }
        },
        _: (name, value) => {
            if (!(value instanceof _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode || value instanceof _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlText)) {
                throw new Error("Unable to serialize unknown union members in XML.");
            }
            bn.c(new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(name).c(value));
        },
    });
    return bn;
};
const se_NoncurrentVersionExpiration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_NVE);
    if (input[_ND] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Da, String(input[_ND])).n(_ND));
    }
    if (input[_NNV] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_VC, String(input[_NNV])).n(_NNV));
    }
    return bn;
};
const se_NoncurrentVersionTransition = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_NVTo);
    if (input[_ND] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Da, String(input[_ND])).n(_ND));
    }
    if (input[_SC] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_TSC, input[_SC]).n(_SC));
    }
    if (input[_NNV] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_VC, String(input[_NNV])).n(_NNV));
    }
    return bn;
};
const se_NoncurrentVersionTransitionList = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_NoncurrentVersionTransition(entry, context);
        return n.n(_me);
    });
};
const se_NotificationConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_NC);
    bn.l(input, "TopicConfigurations", "TopicConfiguration", () => se_TopicConfigurationList(input[_TCop], context));
    bn.l(input, "QueueConfigurations", "QueueConfiguration", () => se_QueueConfigurationList(input[_QCu], context));
    bn.l(input, "LambdaFunctionConfigurations", "CloudFunctionConfiguration", () => se_LambdaFunctionConfigurationList(input[_LFC], context));
    if (input[_EBC] != null) {
        bn.c(se_EventBridgeConfiguration(input[_EBC], context).n(_EBC));
    }
    return bn;
};
const se_NotificationConfigurationFilter = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_NCF);
    if (input[_K] != null) {
        bn.c(se_S3KeyFilter(input[_K], context).n(_SKe));
    }
    return bn;
};
const se_ObjectIdentifier = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_OI);
    if (input[_K] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_OK, input[_K]).n(_K));
    }
    if (input[_VI] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_OVI, input[_VI]).n(_VI));
    }
    bn.cc(input, _ETa);
    if (input[_LMT] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_LMT, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.dateToUtcString)(input[_LMT]).toString()).n(_LMT));
    }
    if (input[_Si] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Si, String(input[_Si])).n(_Si));
    }
    return bn;
};
const se_ObjectIdentifierList = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_ObjectIdentifier(entry, context);
        return n.n(_me);
    });
};
const se_ObjectLockConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_OLC);
    bn.cc(input, _OLE);
    if (input[_Ru] != null) {
        bn.c(se_ObjectLockRule(input[_Ru], context).n(_Ru));
    }
    return bn;
};
const se_ObjectLockLegalHold = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_OLLH);
    if (input[_S] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_OLLHS, input[_S]).n(_S));
    }
    return bn;
};
const se_ObjectLockRetention = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_OLR);
    if (input[_Mo] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_OLRM, input[_Mo]).n(_Mo));
    }
    if (input[_RUD] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Dat, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.serializeDateTime)(input[_RUD]).toString()).n(_RUD));
    }
    return bn;
};
const se_ObjectLockRule = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_OLRb);
    if (input[_DRe] != null) {
        bn.c(se_DefaultRetention(input[_DRe], context).n(_DRe));
    }
    return bn;
};
const se_OutputLocation = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_OL);
    if (input[_S_] != null) {
        bn.c(se_S3Location(input[_S_], context).n(_S_));
    }
    return bn;
};
const se_OutputSerialization = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_OS);
    if (input[_CSV] != null) {
        bn.c(se_CSVOutput(input[_CSV], context).n(_CSV));
    }
    if (input[_JSON] != null) {
        bn.c(se_JSONOutput(input[_JSON], context).n(_JSON));
    }
    return bn;
};
const se_Owner = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_O);
    bn.cc(input, _DN);
    bn.cc(input, _ID_);
    return bn;
};
const se_OwnershipControls = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_OC);
    bn.l(input, "Rules", "Rule", () => se_OwnershipControlsRules(input[_Rul], context));
    return bn;
};
const se_OwnershipControlsRule = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_OCR);
    bn.cc(input, _OO);
    return bn;
};
const se_OwnershipControlsRules = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_OwnershipControlsRule(entry, context);
        return n.n(_me);
    });
};
const se_ParquetInput = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_PI);
    return bn;
};
const se_PartitionedPrefix = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_PP);
    bn.cc(input, _PDS);
    return bn;
};
const se_PublicAccessBlockConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_PABC);
    if (input[_BPA] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Se, String(input[_BPA])).n(_BPA));
    }
    if (input[_IPA] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Se, String(input[_IPA])).n(_IPA));
    }
    if (input[_BPP] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Se, String(input[_BPP])).n(_BPP));
    }
    if (input[_RPB] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Se, String(input[_RPB])).n(_RPB));
    }
    return bn;
};
const se_QueueConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_QC);
    if (input[_I] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_NI, input[_I]).n(_I));
    }
    if (input[_QA] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_QA, input[_QA]).n(_Qu));
    }
    bn.l(input, "Events", "Event", () => se_EventList(input[_Eve], context));
    if (input[_F] != null) {
        bn.c(se_NotificationConfigurationFilter(input[_F], context).n(_F));
    }
    return bn;
};
const se_QueueConfigurationList = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_QueueConfiguration(entry, context);
        return n.n(_me);
    });
};
const se_Redirect = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_Red);
    bn.cc(input, _HN);
    bn.cc(input, _HRC);
    bn.cc(input, _Pr);
    bn.cc(input, _RKPW);
    bn.cc(input, _RKW);
    return bn;
};
const se_RedirectAllRequestsTo = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_RART);
    bn.cc(input, _HN);
    bn.cc(input, _Pr);
    return bn;
};
const se_ReplicaModifications = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_RM);
    if (input[_S] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_RMS, input[_S]).n(_S));
    }
    return bn;
};
const se_ReplicationConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_RCe);
    bn.cc(input, _Ro);
    bn.l(input, "Rules", "Rule", () => se_ReplicationRules(input[_Rul], context));
    return bn;
};
const se_ReplicationRule = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_RRe);
    bn.cc(input, _ID_);
    if (input[_Pri] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Pri, String(input[_Pri])).n(_Pri));
    }
    bn.cc(input, _P);
    if (input[_F] != null) {
        bn.c(se_ReplicationRuleFilter(input[_F], context).n(_F));
    }
    if (input[_S] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_RRS, input[_S]).n(_S));
    }
    if (input[_SSC] != null) {
        bn.c(se_SourceSelectionCriteria(input[_SSC], context).n(_SSC));
    }
    if (input[_EOR] != null) {
        bn.c(se_ExistingObjectReplication(input[_EOR], context).n(_EOR));
    }
    if (input[_Des] != null) {
        bn.c(se_Destination(input[_Des], context).n(_Des));
    }
    if (input[_DMR] != null) {
        bn.c(se_DeleteMarkerReplication(input[_DMR], context).n(_DMR));
    }
    return bn;
};
const se_ReplicationRuleAndOperator = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_RRAO);
    bn.cc(input, _P);
    bn.l(input, "Tags", "Tag", () => se_TagSet(input[_Tag], context));
    return bn;
};
const se_ReplicationRuleFilter = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_RRF);
    bn.cc(input, _P);
    if (input[_Ta] != null) {
        bn.c(se_Tag(input[_Ta], context).n(_Ta));
    }
    if (input[_A] != null) {
        bn.c(se_ReplicationRuleAndOperator(input[_A], context).n(_A));
    }
    return bn;
};
const se_ReplicationRules = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_ReplicationRule(entry, context);
        return n.n(_me);
    });
};
const se_ReplicationTime = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_RTe);
    if (input[_S] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_RTS, input[_S]).n(_S));
    }
    if (input[_Tim] != null) {
        bn.c(se_ReplicationTimeValue(input[_Tim], context).n(_Tim));
    }
    return bn;
};
const se_ReplicationTimeValue = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_RTV);
    if (input[_Mi] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Mi, String(input[_Mi])).n(_Mi));
    }
    return bn;
};
const se_RequestPaymentConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_RPC);
    bn.cc(input, _Pa);
    return bn;
};
const se_RequestProgress = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_RPe);
    if (input[_Ena] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_ERP, String(input[_Ena])).n(_Ena));
    }
    return bn;
};
const se_RestoreRequest = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_RRes);
    if (input[_Da] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Da, String(input[_Da])).n(_Da));
    }
    if (input[_GJP] != null) {
        bn.c(se_GlacierJobParameters(input[_GJP], context).n(_GJP));
    }
    if (input[_Ty] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_RRT, input[_Ty]).n(_Ty));
    }
    bn.cc(input, _Ti);
    bn.cc(input, _Desc);
    if (input[_SP] != null) {
        bn.c(se_SelectParameters(input[_SP], context).n(_SP));
    }
    if (input[_OL] != null) {
        bn.c(se_OutputLocation(input[_OL], context).n(_OL));
    }
    return bn;
};
const se_RoutingRule = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_RRou);
    if (input[_Con] != null) {
        bn.c(se_Condition(input[_Con], context).n(_Con));
    }
    if (input[_Red] != null) {
        bn.c(se_Redirect(input[_Red], context).n(_Red));
    }
    return bn;
};
const se_RoutingRules = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_RoutingRule(entry, context);
        return n.n(_RRou);
    });
};
const se_S3KeyFilter = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SKF);
    bn.l(input, "FilterRules", "FilterRule", () => se_FilterRuleList(input[_FRi], context));
    return bn;
};
const se_S3Location = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SL);
    bn.cc(input, _BN);
    if (input[_P] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_LP, input[_P]).n(_P));
    }
    if (input[_En] != null) {
        bn.c(se_Encryption(input[_En], context).n(_En));
    }
    if (input[_CACL] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_OCACL, input[_CACL]).n(_CACL));
    }
    bn.lc(input, "AccessControlList", "AccessControlList", () => se_Grants(input[_ACLc], context));
    if (input[_T] != null) {
        bn.c(se_Tagging(input[_T], context).n(_T));
    }
    bn.lc(input, "UserMetadata", "UserMetadata", () => se_UserMetadata(input[_UM], context));
    bn.cc(input, _SC);
    return bn;
};
const se_S3TablesDestination = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_STD);
    if (input[_TBA] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_STBA, input[_TBA]).n(_TBA));
    }
    if (input[_TN] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_STN, input[_TN]).n(_TN));
    }
    return bn;
};
const se_ScanRange = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SR);
    if (input[_St] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_St, String(input[_St])).n(_St));
    }
    if (input[_End] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_End, String(input[_End])).n(_End));
    }
    return bn;
};
const se_SelectParameters = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SP);
    if (input[_IS] != null) {
        bn.c(se_InputSerialization(input[_IS], context).n(_IS));
    }
    bn.cc(input, _ETx);
    bn.cc(input, _Ex);
    if (input[_OS] != null) {
        bn.c(se_OutputSerialization(input[_OS], context).n(_OS));
    }
    return bn;
};
const se_ServerSideEncryptionByDefault = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SSEBD);
    if (input[_SSEA] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_SSE, input[_SSEA]).n(_SSEA));
    }
    if (input[_KMSMKID] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_SSEKMSKI, input[_KMSMKID]).n(_KMSMKID));
    }
    return bn;
};
const se_ServerSideEncryptionConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SSEC);
    bn.l(input, "Rules", "Rule", () => se_ServerSideEncryptionRules(input[_Rul], context));
    return bn;
};
const se_ServerSideEncryptionRule = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SSER);
    if (input[_ASSEBD] != null) {
        bn.c(se_ServerSideEncryptionByDefault(input[_ASSEBD], context).n(_ASSEBD));
    }
    if (input[_BKE] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_BKE, String(input[_BKE])).n(_BKE));
    }
    return bn;
};
const se_ServerSideEncryptionRules = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_ServerSideEncryptionRule(entry, context);
        return n.n(_me);
    });
};
const se_SimplePrefix = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SPi);
    return bn;
};
const se_SourceSelectionCriteria = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SSC);
    if (input[_SKEO] != null) {
        bn.c(se_SseKmsEncryptedObjects(input[_SKEO], context).n(_SKEO));
    }
    if (input[_RM] != null) {
        bn.c(se_ReplicaModifications(input[_RM], context).n(_RM));
    }
    return bn;
};
const se_SSEKMS = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SK);
    if (input[_KI] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_SSEKMSKI, input[_KI]).n(_KI));
    }
    return bn;
};
const se_SseKmsEncryptedObjects = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SKEO);
    if (input[_S] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_SKEOS, input[_S]).n(_S));
    }
    return bn;
};
const se_SSES3 = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SS);
    return bn;
};
const se_StorageClassAnalysis = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SCA);
    if (input[_DE] != null) {
        bn.c(se_StorageClassAnalysisDataExport(input[_DE], context).n(_DE));
    }
    return bn;
};
const se_StorageClassAnalysisDataExport = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_SCADE);
    if (input[_OSV] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_SCASV, input[_OSV]).n(_OSV));
    }
    if (input[_Des] != null) {
        bn.c(se_AnalyticsExportDestination(input[_Des], context).n(_Des));
    }
    return bn;
};
const se_Tag = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_Ta);
    if (input[_K] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_OK, input[_K]).n(_K));
    }
    bn.cc(input, _Va);
    return bn;
};
const se_Tagging = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_T);
    bn.lc(input, "TagSet", "TagSet", () => se_TagSet(input[_TS], context));
    return bn;
};
const se_TagSet = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_Tag(entry, context);
        return n.n(_Ta);
    });
};
const se_TargetGrant = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_TGa);
    if (input[_Gra] != null) {
        const n = se_Grantee(input[_Gra], context).n(_Gra);
        n.a("xmlns:xsi", "http://www.w3.org/2001/XMLSchema-instance");
        bn.c(n);
    }
    if (input[_Pe] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_BLP, input[_Pe]).n(_Pe));
    }
    return bn;
};
const se_TargetGrants = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_TargetGrant(entry, context);
        return n.n(_G);
    });
};
const se_TargetObjectKeyFormat = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_TOKF);
    if (input[_SPi] != null) {
        bn.c(se_SimplePrefix(input[_SPi], context).n(_SPi));
    }
    if (input[_PP] != null) {
        bn.c(se_PartitionedPrefix(input[_PP], context).n(_PP));
    }
    return bn;
};
const se_Tiering = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_Tier);
    if (input[_Da] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_ITD, String(input[_Da])).n(_Da));
    }
    if (input[_AT] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_ITAT, input[_AT]).n(_AT));
    }
    return bn;
};
const se_TieringList = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_Tiering(entry, context);
        return n.n(_me);
    });
};
const se_TopicConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_TCo);
    if (input[_I] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_NI, input[_I]).n(_I));
    }
    if (input[_TA] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_TA, input[_TA]).n(_Top));
    }
    bn.l(input, "Events", "Event", () => se_EventList(input[_Eve], context));
    if (input[_F] != null) {
        bn.c(se_NotificationConfigurationFilter(input[_F], context).n(_F));
    }
    return bn;
};
const se_TopicConfigurationList = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_TopicConfiguration(entry, context);
        return n.n(_me);
    });
};
const se_Transition = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_Tra);
    if (input[_Dat] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Dat, (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.serializeDateTime)(input[_Dat]).toString()).n(_Dat));
    }
    if (input[_Da] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_Da, String(input[_Da])).n(_Da));
    }
    if (input[_SC] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_TSC, input[_SC]).n(_SC));
    }
    return bn;
};
const se_TransitionList = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_Transition(entry, context);
        return n.n(_me);
    });
};
const se_UserMetadata = (input, context) => {
    return input
        .filter((e) => e != null)
        .map((entry) => {
        const n = se_MetadataEntry(entry, context);
        return n.n(_ME);
    });
};
const se_VersioningConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_VCe);
    if (input[_MFAD] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_MFAD, input[_MFAD]).n(_MDf));
    }
    if (input[_S] != null) {
        bn.c(_aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode.of(_BVS, input[_S]).n(_S));
    }
    return bn;
};
const se_WebsiteConfiguration = (input, context) => {
    const bn = new _aws_sdk_xml_builder__WEBPACK_IMPORTED_MODULE_0__.XmlNode(_WC);
    if (input[_ED] != null) {
        bn.c(se_ErrorDocument(input[_ED], context).n(_ED));
    }
    if (input[_ID] != null) {
        bn.c(se_IndexDocument(input[_ID], context).n(_ID));
    }
    if (input[_RART] != null) {
        bn.c(se_RedirectAllRequestsTo(input[_RART], context).n(_RART));
    }
    bn.lc(input, "RoutingRules", "RoutingRules", () => se_RoutingRules(input[_RRo], context));
    return bn;
};
const de_AbortIncompleteMultipartUpload = (output, context) => {
    const contents = {};
    if (output[_DAI] != null) {
        contents[_DAI] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_DAI]);
    }
    return contents;
};
const de_AccessControlTranslation = (output, context) => {
    const contents = {};
    if (output[_O] != null) {
        contents[_O] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_O]);
    }
    return contents;
};
const de_AllowedHeaders = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(entry);
    });
};
const de_AllowedMethods = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(entry);
    });
};
const de_AllowedOrigins = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(entry);
    });
};
const de_AnalyticsAndOperator = (output, context) => {
    const contents = {};
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    if (output.Tag === "") {
        contents[_Tag] = [];
    }
    else if (output[_Ta] != null) {
        contents[_Tag] = de_TagSet((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Ta]), context);
    }
    return contents;
};
const de_AnalyticsConfiguration = (output, context) => {
    const contents = {};
    if (output[_I] != null) {
        contents[_I] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_I]);
    }
    if (output.Filter === "") {
    }
    else if (output[_F] != null) {
        contents[_F] = de_AnalyticsFilter((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectUnion)(output[_F]), context);
    }
    if (output[_SCA] != null) {
        contents[_SCA] = de_StorageClassAnalysis(output[_SCA], context);
    }
    return contents;
};
const de_AnalyticsConfigurationList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_AnalyticsConfiguration(entry, context);
    });
};
const de_AnalyticsExportDestination = (output, context) => {
    const contents = {};
    if (output[_SBD] != null) {
        contents[_SBD] = de_AnalyticsS3BucketDestination(output[_SBD], context);
    }
    return contents;
};
const de_AnalyticsFilter = (output, context) => {
    if (output[_P] != null) {
        return {
            Prefix: (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]),
        };
    }
    if (output[_Ta] != null) {
        return {
            Tag: de_Tag(output[_Ta], context),
        };
    }
    if (output[_A] != null) {
        return {
            And: de_AnalyticsAndOperator(output[_A], context),
        };
    }
    return { $unknown: Object.entries(output)[0] };
};
const de_AnalyticsS3BucketDestination = (output, context) => {
    const contents = {};
    if (output[_Fo] != null) {
        contents[_Fo] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Fo]);
    }
    if (output[_BAI] != null) {
        contents[_BAI] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_BAI]);
    }
    if (output[_B] != null) {
        contents[_B] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_B]);
    }
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    return contents;
};
const de_Bucket = (output, context) => {
    const contents = {};
    if (output[_N] != null) {
        contents[_N] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_N]);
    }
    if (output[_CDr] != null) {
        contents[_CDr] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output[_CDr]));
    }
    if (output[_BR] != null) {
        contents[_BR] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_BR]);
    }
    return contents;
};
const de_Buckets = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_Bucket(entry, context);
    });
};
const de_Checksum = (output, context) => {
    const contents = {};
    if (output[_CCRC] != null) {
        contents[_CCRC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRC]);
    }
    if (output[_CCRCC] != null) {
        contents[_CCRCC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRCC]);
    }
    if (output[_CCRCNVME] != null) {
        contents[_CCRCNVME] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRCNVME]);
    }
    if (output[_CSHA] != null) {
        contents[_CSHA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CSHA]);
    }
    if (output[_CSHAh] != null) {
        contents[_CSHAh] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CSHAh]);
    }
    if (output[_CT] != null) {
        contents[_CT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CT]);
    }
    return contents;
};
const de_ChecksumAlgorithmList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(entry);
    });
};
const de_CommonPrefix = (output, context) => {
    const contents = {};
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    return contents;
};
const de_CommonPrefixList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_CommonPrefix(entry, context);
    });
};
const de_Condition = (output, context) => {
    const contents = {};
    if (output[_HECRE] != null) {
        contents[_HECRE] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_HECRE]);
    }
    if (output[_KPE] != null) {
        contents[_KPE] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_KPE]);
    }
    return contents;
};
const de_ContinuationEvent = (output, context) => {
    const contents = {};
    return contents;
};
const de_CopyObjectResult = (output, context) => {
    const contents = {};
    if (output[_ETa] != null) {
        contents[_ETa] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_ETa]);
    }
    if (output[_LM] != null) {
        contents[_LM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output[_LM]));
    }
    if (output[_CT] != null) {
        contents[_CT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CT]);
    }
    if (output[_CCRC] != null) {
        contents[_CCRC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRC]);
    }
    if (output[_CCRCC] != null) {
        contents[_CCRCC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRCC]);
    }
    if (output[_CCRCNVME] != null) {
        contents[_CCRCNVME] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRCNVME]);
    }
    if (output[_CSHA] != null) {
        contents[_CSHA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CSHA]);
    }
    if (output[_CSHAh] != null) {
        contents[_CSHAh] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CSHAh]);
    }
    return contents;
};
const de_CopyPartResult = (output, context) => {
    const contents = {};
    if (output[_ETa] != null) {
        contents[_ETa] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_ETa]);
    }
    if (output[_LM] != null) {
        contents[_LM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output[_LM]));
    }
    if (output[_CCRC] != null) {
        contents[_CCRC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRC]);
    }
    if (output[_CCRCC] != null) {
        contents[_CCRCC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRCC]);
    }
    if (output[_CCRCNVME] != null) {
        contents[_CCRCNVME] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRCNVME]);
    }
    if (output[_CSHA] != null) {
        contents[_CSHA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CSHA]);
    }
    if (output[_CSHAh] != null) {
        contents[_CSHAh] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CSHAh]);
    }
    return contents;
};
const de_CORSRule = (output, context) => {
    const contents = {};
    if (output[_ID_] != null) {
        contents[_ID_] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_ID_]);
    }
    if (output.AllowedHeader === "") {
        contents[_AHl] = [];
    }
    else if (output[_AH] != null) {
        contents[_AHl] = de_AllowedHeaders((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_AH]), context);
    }
    if (output.AllowedMethod === "") {
        contents[_AMl] = [];
    }
    else if (output[_AM] != null) {
        contents[_AMl] = de_AllowedMethods((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_AM]), context);
    }
    if (output.AllowedOrigin === "") {
        contents[_AOl] = [];
    }
    else if (output[_AO] != null) {
        contents[_AOl] = de_AllowedOrigins((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_AO]), context);
    }
    if (output.ExposeHeader === "") {
        contents[_EH] = [];
    }
    else if (output[_EHx] != null) {
        contents[_EH] = de_ExposeHeaders((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_EHx]), context);
    }
    if (output[_MAS] != null) {
        contents[_MAS] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_MAS]);
    }
    return contents;
};
const de_CORSRules = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_CORSRule(entry, context);
    });
};
const de_DefaultRetention = (output, context) => {
    const contents = {};
    if (output[_Mo] != null) {
        contents[_Mo] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Mo]);
    }
    if (output[_Da] != null) {
        contents[_Da] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_Da]);
    }
    if (output[_Y] != null) {
        contents[_Y] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_Y]);
    }
    return contents;
};
const de_DeletedObject = (output, context) => {
    const contents = {};
    if (output[_K] != null) {
        contents[_K] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_K]);
    }
    if (output[_VI] != null) {
        contents[_VI] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_VI]);
    }
    if (output[_DM] != null) {
        contents[_DM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output[_DM]);
    }
    if (output[_DMVI] != null) {
        contents[_DMVI] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_DMVI]);
    }
    return contents;
};
const de_DeletedObjects = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_DeletedObject(entry, context);
    });
};
const de_DeleteMarkerEntry = (output, context) => {
    const contents = {};
    if (output[_O] != null) {
        contents[_O] = de_Owner(output[_O], context);
    }
    if (output[_K] != null) {
        contents[_K] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_K]);
    }
    if (output[_VI] != null) {
        contents[_VI] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_VI]);
    }
    if (output[_IL] != null) {
        contents[_IL] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output[_IL]);
    }
    if (output[_LM] != null) {
        contents[_LM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output[_LM]));
    }
    return contents;
};
const de_DeleteMarkerReplication = (output, context) => {
    const contents = {};
    if (output[_S] != null) {
        contents[_S] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_S]);
    }
    return contents;
};
const de_DeleteMarkers = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_DeleteMarkerEntry(entry, context);
    });
};
const de_Destination = (output, context) => {
    const contents = {};
    if (output[_B] != null) {
        contents[_B] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_B]);
    }
    if (output[_Ac] != null) {
        contents[_Ac] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Ac]);
    }
    if (output[_SC] != null) {
        contents[_SC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_SC]);
    }
    if (output[_ACT] != null) {
        contents[_ACT] = de_AccessControlTranslation(output[_ACT], context);
    }
    if (output[_ECn] != null) {
        contents[_ECn] = de_EncryptionConfiguration(output[_ECn], context);
    }
    if (output[_RTe] != null) {
        contents[_RTe] = de_ReplicationTime(output[_RTe], context);
    }
    if (output[_Me] != null) {
        contents[_Me] = de_Metrics(output[_Me], context);
    }
    return contents;
};
const de_EncryptionConfiguration = (output, context) => {
    const contents = {};
    if (output[_RKKID] != null) {
        contents[_RKKID] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_RKKID]);
    }
    return contents;
};
const de_EndEvent = (output, context) => {
    const contents = {};
    return contents;
};
const de__Error = (output, context) => {
    const contents = {};
    if (output[_K] != null) {
        contents[_K] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_K]);
    }
    if (output[_VI] != null) {
        contents[_VI] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_VI]);
    }
    if (output[_Cod] != null) {
        contents[_Cod] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Cod]);
    }
    if (output[_Mes] != null) {
        contents[_Mes] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Mes]);
    }
    return contents;
};
const de_ErrorDetails = (output, context) => {
    const contents = {};
    if (output[_EC] != null) {
        contents[_EC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_EC]);
    }
    if (output[_EM] != null) {
        contents[_EM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_EM]);
    }
    return contents;
};
const de_ErrorDocument = (output, context) => {
    const contents = {};
    if (output[_K] != null) {
        contents[_K] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_K]);
    }
    return contents;
};
const de_Errors = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de__Error(entry, context);
    });
};
const de_EventBridgeConfiguration = (output, context) => {
    const contents = {};
    return contents;
};
const de_EventList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(entry);
    });
};
const de_ExistingObjectReplication = (output, context) => {
    const contents = {};
    if (output[_S] != null) {
        contents[_S] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_S]);
    }
    return contents;
};
const de_ExposeHeaders = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(entry);
    });
};
const de_FilterRule = (output, context) => {
    const contents = {};
    if (output[_N] != null) {
        contents[_N] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_N]);
    }
    if (output[_Va] != null) {
        contents[_Va] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Va]);
    }
    return contents;
};
const de_FilterRuleList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_FilterRule(entry, context);
    });
};
const de_GetBucketMetadataTableConfigurationResult = (output, context) => {
    const contents = {};
    if (output[_MTCR] != null) {
        contents[_MTCR] = de_MetadataTableConfigurationResult(output[_MTCR], context);
    }
    if (output[_S] != null) {
        contents[_S] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_S]);
    }
    if (output[_Er] != null) {
        contents[_Er] = de_ErrorDetails(output[_Er], context);
    }
    return contents;
};
const de_GetObjectAttributesParts = (output, context) => {
    const contents = {};
    if (output[_PC] != null) {
        contents[_TPC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_PC]);
    }
    if (output[_PNM] != null) {
        contents[_PNM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_PNM]);
    }
    if (output[_NPNM] != null) {
        contents[_NPNM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_NPNM]);
    }
    if (output[_MP] != null) {
        contents[_MP] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_MP]);
    }
    if (output[_IT] != null) {
        contents[_IT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output[_IT]);
    }
    if (output.Part === "") {
        contents[_Part] = [];
    }
    else if (output[_Par] != null) {
        contents[_Part] = de_PartsList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Par]), context);
    }
    return contents;
};
const de_Grant = (output, context) => {
    const contents = {};
    if (output[_Gra] != null) {
        contents[_Gra] = de_Grantee(output[_Gra], context);
    }
    if (output[_Pe] != null) {
        contents[_Pe] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Pe]);
    }
    return contents;
};
const de_Grantee = (output, context) => {
    const contents = {};
    if (output[_DN] != null) {
        contents[_DN] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_DN]);
    }
    if (output[_EA] != null) {
        contents[_EA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_EA]);
    }
    if (output[_ID_] != null) {
        contents[_ID_] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_ID_]);
    }
    if (output[_URI] != null) {
        contents[_URI] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_URI]);
    }
    if (output[_x] != null) {
        contents[_Ty] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_x]);
    }
    return contents;
};
const de_Grants = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_Grant(entry, context);
    });
};
const de_IndexDocument = (output, context) => {
    const contents = {};
    if (output[_Su] != null) {
        contents[_Su] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Su]);
    }
    return contents;
};
const de_Initiator = (output, context) => {
    const contents = {};
    if (output[_ID_] != null) {
        contents[_ID_] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_ID_]);
    }
    if (output[_DN] != null) {
        contents[_DN] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_DN]);
    }
    return contents;
};
const de_IntelligentTieringAndOperator = (output, context) => {
    const contents = {};
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    if (output.Tag === "") {
        contents[_Tag] = [];
    }
    else if (output[_Ta] != null) {
        contents[_Tag] = de_TagSet((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Ta]), context);
    }
    return contents;
};
const de_IntelligentTieringConfiguration = (output, context) => {
    const contents = {};
    if (output[_I] != null) {
        contents[_I] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_I]);
    }
    if (output[_F] != null) {
        contents[_F] = de_IntelligentTieringFilter(output[_F], context);
    }
    if (output[_S] != null) {
        contents[_S] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_S]);
    }
    if (output.Tiering === "") {
        contents[_Tie] = [];
    }
    else if (output[_Tier] != null) {
        contents[_Tie] = de_TieringList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Tier]), context);
    }
    return contents;
};
const de_IntelligentTieringConfigurationList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_IntelligentTieringConfiguration(entry, context);
    });
};
const de_IntelligentTieringFilter = (output, context) => {
    const contents = {};
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    if (output[_Ta] != null) {
        contents[_Ta] = de_Tag(output[_Ta], context);
    }
    if (output[_A] != null) {
        contents[_A] = de_IntelligentTieringAndOperator(output[_A], context);
    }
    return contents;
};
const de_InventoryConfiguration = (output, context) => {
    const contents = {};
    if (output[_Des] != null) {
        contents[_Des] = de_InventoryDestination(output[_Des], context);
    }
    if (output[_IE] != null) {
        contents[_IE] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output[_IE]);
    }
    if (output[_F] != null) {
        contents[_F] = de_InventoryFilter(output[_F], context);
    }
    if (output[_I] != null) {
        contents[_I] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_I]);
    }
    if (output[_IOV] != null) {
        contents[_IOV] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_IOV]);
    }
    if (output.OptionalFields === "") {
        contents[_OF] = [];
    }
    else if (output[_OF] != null && output[_OF][_Fi] != null) {
        contents[_OF] = de_InventoryOptionalFields((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_OF][_Fi]), context);
    }
    if (output[_Sc] != null) {
        contents[_Sc] = de_InventorySchedule(output[_Sc], context);
    }
    return contents;
};
const de_InventoryConfigurationList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_InventoryConfiguration(entry, context);
    });
};
const de_InventoryDestination = (output, context) => {
    const contents = {};
    if (output[_SBD] != null) {
        contents[_SBD] = de_InventoryS3BucketDestination(output[_SBD], context);
    }
    return contents;
};
const de_InventoryEncryption = (output, context) => {
    const contents = {};
    if (output[_SS] != null) {
        contents[_SSES] = de_SSES3(output[_SS], context);
    }
    if (output[_SK] != null) {
        contents[_SSEKMS] = de_SSEKMS(output[_SK], context);
    }
    return contents;
};
const de_InventoryFilter = (output, context) => {
    const contents = {};
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    return contents;
};
const de_InventoryOptionalFields = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(entry);
    });
};
const de_InventoryS3BucketDestination = (output, context) => {
    const contents = {};
    if (output[_AIc] != null) {
        contents[_AIc] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_AIc]);
    }
    if (output[_B] != null) {
        contents[_B] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_B]);
    }
    if (output[_Fo] != null) {
        contents[_Fo] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Fo]);
    }
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    if (output[_En] != null) {
        contents[_En] = de_InventoryEncryption(output[_En], context);
    }
    return contents;
};
const de_InventorySchedule = (output, context) => {
    const contents = {};
    if (output[_Fr] != null) {
        contents[_Fr] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Fr]);
    }
    return contents;
};
const de_LambdaFunctionConfiguration = (output, context) => {
    const contents = {};
    if (output[_I] != null) {
        contents[_I] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_I]);
    }
    if (output[_CF] != null) {
        contents[_LFA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CF]);
    }
    if (output.Event === "") {
        contents[_Eve] = [];
    }
    else if (output[_Ev] != null) {
        contents[_Eve] = de_EventList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Ev]), context);
    }
    if (output[_F] != null) {
        contents[_F] = de_NotificationConfigurationFilter(output[_F], context);
    }
    return contents;
};
const de_LambdaFunctionConfigurationList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_LambdaFunctionConfiguration(entry, context);
    });
};
const de_LifecycleExpiration = (output, context) => {
    const contents = {};
    if (output[_Dat] != null) {
        contents[_Dat] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output[_Dat]));
    }
    if (output[_Da] != null) {
        contents[_Da] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_Da]);
    }
    if (output[_EODM] != null) {
        contents[_EODM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output[_EODM]);
    }
    return contents;
};
const de_LifecycleRule = (output, context) => {
    const contents = {};
    if (output[_Exp] != null) {
        contents[_Exp] = de_LifecycleExpiration(output[_Exp], context);
    }
    if (output[_ID_] != null) {
        contents[_ID_] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_ID_]);
    }
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    if (output[_F] != null) {
        contents[_F] = de_LifecycleRuleFilter(output[_F], context);
    }
    if (output[_S] != null) {
        contents[_S] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_S]);
    }
    if (output.Transition === "") {
        contents[_Tr] = [];
    }
    else if (output[_Tra] != null) {
        contents[_Tr] = de_TransitionList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Tra]), context);
    }
    if (output.NoncurrentVersionTransition === "") {
        contents[_NVT] = [];
    }
    else if (output[_NVTo] != null) {
        contents[_NVT] = de_NoncurrentVersionTransitionList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_NVTo]), context);
    }
    if (output[_NVE] != null) {
        contents[_NVE] = de_NoncurrentVersionExpiration(output[_NVE], context);
    }
    if (output[_AIMU] != null) {
        contents[_AIMU] = de_AbortIncompleteMultipartUpload(output[_AIMU], context);
    }
    return contents;
};
const de_LifecycleRuleAndOperator = (output, context) => {
    const contents = {};
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    if (output.Tag === "") {
        contents[_Tag] = [];
    }
    else if (output[_Ta] != null) {
        contents[_Tag] = de_TagSet((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Ta]), context);
    }
    if (output[_OSGT] != null) {
        contents[_OSGT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_OSGT]);
    }
    if (output[_OSLT] != null) {
        contents[_OSLT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_OSLT]);
    }
    return contents;
};
const de_LifecycleRuleFilter = (output, context) => {
    const contents = {};
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    if (output[_Ta] != null) {
        contents[_Ta] = de_Tag(output[_Ta], context);
    }
    if (output[_OSGT] != null) {
        contents[_OSGT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_OSGT]);
    }
    if (output[_OSLT] != null) {
        contents[_OSLT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_OSLT]);
    }
    if (output[_A] != null) {
        contents[_A] = de_LifecycleRuleAndOperator(output[_A], context);
    }
    return contents;
};
const de_LifecycleRules = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_LifecycleRule(entry, context);
    });
};
const de_LoggingEnabled = (output, context) => {
    const contents = {};
    if (output[_TB] != null) {
        contents[_TB] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_TB]);
    }
    if (output.TargetGrants === "") {
        contents[_TG] = [];
    }
    else if (output[_TG] != null && output[_TG][_G] != null) {
        contents[_TG] = de_TargetGrants((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_TG][_G]), context);
    }
    if (output[_TP] != null) {
        contents[_TP] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_TP]);
    }
    if (output[_TOKF] != null) {
        contents[_TOKF] = de_TargetObjectKeyFormat(output[_TOKF], context);
    }
    return contents;
};
const de_MetadataTableConfigurationResult = (output, context) => {
    const contents = {};
    if (output[_STDR] != null) {
        contents[_STDR] = de_S3TablesDestinationResult(output[_STDR], context);
    }
    return contents;
};
const de_Metrics = (output, context) => {
    const contents = {};
    if (output[_S] != null) {
        contents[_S] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_S]);
    }
    if (output[_ETv] != null) {
        contents[_ETv] = de_ReplicationTimeValue(output[_ETv], context);
    }
    return contents;
};
const de_MetricsAndOperator = (output, context) => {
    const contents = {};
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    if (output.Tag === "") {
        contents[_Tag] = [];
    }
    else if (output[_Ta] != null) {
        contents[_Tag] = de_TagSet((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Ta]), context);
    }
    if (output[_APAc] != null) {
        contents[_APAc] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_APAc]);
    }
    return contents;
};
const de_MetricsConfiguration = (output, context) => {
    const contents = {};
    if (output[_I] != null) {
        contents[_I] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_I]);
    }
    if (output.Filter === "") {
    }
    else if (output[_F] != null) {
        contents[_F] = de_MetricsFilter((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectUnion)(output[_F]), context);
    }
    return contents;
};
const de_MetricsConfigurationList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_MetricsConfiguration(entry, context);
    });
};
const de_MetricsFilter = (output, context) => {
    if (output[_P] != null) {
        return {
            Prefix: (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]),
        };
    }
    if (output[_Ta] != null) {
        return {
            Tag: de_Tag(output[_Ta], context),
        };
    }
    if (output[_APAc] != null) {
        return {
            AccessPointArn: (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_APAc]),
        };
    }
    if (output[_A] != null) {
        return {
            And: de_MetricsAndOperator(output[_A], context),
        };
    }
    return { $unknown: Object.entries(output)[0] };
};
const de_MultipartUpload = (output, context) => {
    const contents = {};
    if (output[_UI] != null) {
        contents[_UI] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_UI]);
    }
    if (output[_K] != null) {
        contents[_K] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_K]);
    }
    if (output[_Ini] != null) {
        contents[_Ini] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output[_Ini]));
    }
    if (output[_SC] != null) {
        contents[_SC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_SC]);
    }
    if (output[_O] != null) {
        contents[_O] = de_Owner(output[_O], context);
    }
    if (output[_In] != null) {
        contents[_In] = de_Initiator(output[_In], context);
    }
    if (output[_CA] != null) {
        contents[_CA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CA]);
    }
    if (output[_CT] != null) {
        contents[_CT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CT]);
    }
    return contents;
};
const de_MultipartUploadList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_MultipartUpload(entry, context);
    });
};
const de_NoncurrentVersionExpiration = (output, context) => {
    const contents = {};
    if (output[_ND] != null) {
        contents[_ND] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_ND]);
    }
    if (output[_NNV] != null) {
        contents[_NNV] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_NNV]);
    }
    return contents;
};
const de_NoncurrentVersionTransition = (output, context) => {
    const contents = {};
    if (output[_ND] != null) {
        contents[_ND] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_ND]);
    }
    if (output[_SC] != null) {
        contents[_SC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_SC]);
    }
    if (output[_NNV] != null) {
        contents[_NNV] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_NNV]);
    }
    return contents;
};
const de_NoncurrentVersionTransitionList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_NoncurrentVersionTransition(entry, context);
    });
};
const de_NotificationConfigurationFilter = (output, context) => {
    const contents = {};
    if (output[_SKe] != null) {
        contents[_K] = de_S3KeyFilter(output[_SKe], context);
    }
    return contents;
};
const de__Object = (output, context) => {
    const contents = {};
    if (output[_K] != null) {
        contents[_K] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_K]);
    }
    if (output[_LM] != null) {
        contents[_LM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output[_LM]));
    }
    if (output[_ETa] != null) {
        contents[_ETa] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_ETa]);
    }
    if (output.ChecksumAlgorithm === "") {
        contents[_CA] = [];
    }
    else if (output[_CA] != null) {
        contents[_CA] = de_ChecksumAlgorithmList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_CA]), context);
    }
    if (output[_CT] != null) {
        contents[_CT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CT]);
    }
    if (output[_Si] != null) {
        contents[_Si] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_Si]);
    }
    if (output[_SC] != null) {
        contents[_SC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_SC]);
    }
    if (output[_O] != null) {
        contents[_O] = de_Owner(output[_O], context);
    }
    if (output[_RSe] != null) {
        contents[_RSe] = de_RestoreStatus(output[_RSe], context);
    }
    return contents;
};
const de_ObjectList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de__Object(entry, context);
    });
};
const de_ObjectLockConfiguration = (output, context) => {
    const contents = {};
    if (output[_OLE] != null) {
        contents[_OLE] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_OLE]);
    }
    if (output[_Ru] != null) {
        contents[_Ru] = de_ObjectLockRule(output[_Ru], context);
    }
    return contents;
};
const de_ObjectLockLegalHold = (output, context) => {
    const contents = {};
    if (output[_S] != null) {
        contents[_S] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_S]);
    }
    return contents;
};
const de_ObjectLockRetention = (output, context) => {
    const contents = {};
    if (output[_Mo] != null) {
        contents[_Mo] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Mo]);
    }
    if (output[_RUD] != null) {
        contents[_RUD] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output[_RUD]));
    }
    return contents;
};
const de_ObjectLockRule = (output, context) => {
    const contents = {};
    if (output[_DRe] != null) {
        contents[_DRe] = de_DefaultRetention(output[_DRe], context);
    }
    return contents;
};
const de_ObjectPart = (output, context) => {
    const contents = {};
    if (output[_PN] != null) {
        contents[_PN] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_PN]);
    }
    if (output[_Si] != null) {
        contents[_Si] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_Si]);
    }
    if (output[_CCRC] != null) {
        contents[_CCRC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRC]);
    }
    if (output[_CCRCC] != null) {
        contents[_CCRCC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRCC]);
    }
    if (output[_CCRCNVME] != null) {
        contents[_CCRCNVME] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRCNVME]);
    }
    if (output[_CSHA] != null) {
        contents[_CSHA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CSHA]);
    }
    if (output[_CSHAh] != null) {
        contents[_CSHAh] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CSHAh]);
    }
    return contents;
};
const de_ObjectVersion = (output, context) => {
    const contents = {};
    if (output[_ETa] != null) {
        contents[_ETa] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_ETa]);
    }
    if (output.ChecksumAlgorithm === "") {
        contents[_CA] = [];
    }
    else if (output[_CA] != null) {
        contents[_CA] = de_ChecksumAlgorithmList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_CA]), context);
    }
    if (output[_CT] != null) {
        contents[_CT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CT]);
    }
    if (output[_Si] != null) {
        contents[_Si] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_Si]);
    }
    if (output[_SC] != null) {
        contents[_SC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_SC]);
    }
    if (output[_K] != null) {
        contents[_K] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_K]);
    }
    if (output[_VI] != null) {
        contents[_VI] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_VI]);
    }
    if (output[_IL] != null) {
        contents[_IL] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output[_IL]);
    }
    if (output[_LM] != null) {
        contents[_LM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output[_LM]));
    }
    if (output[_O] != null) {
        contents[_O] = de_Owner(output[_O], context);
    }
    if (output[_RSe] != null) {
        contents[_RSe] = de_RestoreStatus(output[_RSe], context);
    }
    return contents;
};
const de_ObjectVersionList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_ObjectVersion(entry, context);
    });
};
const de_Owner = (output, context) => {
    const contents = {};
    if (output[_DN] != null) {
        contents[_DN] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_DN]);
    }
    if (output[_ID_] != null) {
        contents[_ID_] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_ID_]);
    }
    return contents;
};
const de_OwnershipControls = (output, context) => {
    const contents = {};
    if (output.Rule === "") {
        contents[_Rul] = [];
    }
    else if (output[_Ru] != null) {
        contents[_Rul] = de_OwnershipControlsRules((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Ru]), context);
    }
    return contents;
};
const de_OwnershipControlsRule = (output, context) => {
    const contents = {};
    if (output[_OO] != null) {
        contents[_OO] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_OO]);
    }
    return contents;
};
const de_OwnershipControlsRules = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_OwnershipControlsRule(entry, context);
    });
};
const de_Part = (output, context) => {
    const contents = {};
    if (output[_PN] != null) {
        contents[_PN] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_PN]);
    }
    if (output[_LM] != null) {
        contents[_LM] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output[_LM]));
    }
    if (output[_ETa] != null) {
        contents[_ETa] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_ETa]);
    }
    if (output[_Si] != null) {
        contents[_Si] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_Si]);
    }
    if (output[_CCRC] != null) {
        contents[_CCRC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRC]);
    }
    if (output[_CCRCC] != null) {
        contents[_CCRCC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRCC]);
    }
    if (output[_CCRCNVME] != null) {
        contents[_CCRCNVME] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CCRCNVME]);
    }
    if (output[_CSHA] != null) {
        contents[_CSHA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CSHA]);
    }
    if (output[_CSHAh] != null) {
        contents[_CSHAh] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_CSHAh]);
    }
    return contents;
};
const de_PartitionedPrefix = (output, context) => {
    const contents = {};
    if (output[_PDS] != null) {
        contents[_PDS] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_PDS]);
    }
    return contents;
};
const de_Parts = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_Part(entry, context);
    });
};
const de_PartsList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_ObjectPart(entry, context);
    });
};
const de_PolicyStatus = (output, context) => {
    const contents = {};
    if (output[_IP] != null) {
        contents[_IP] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output[_IP]);
    }
    return contents;
};
const de_Progress = (output, context) => {
    const contents = {};
    if (output[_BS] != null) {
        contents[_BS] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_BS]);
    }
    if (output[_BP] != null) {
        contents[_BP] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_BP]);
    }
    if (output[_BRy] != null) {
        contents[_BRy] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_BRy]);
    }
    return contents;
};
const de_PublicAccessBlockConfiguration = (output, context) => {
    const contents = {};
    if (output[_BPA] != null) {
        contents[_BPA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output[_BPA]);
    }
    if (output[_IPA] != null) {
        contents[_IPA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output[_IPA]);
    }
    if (output[_BPP] != null) {
        contents[_BPP] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output[_BPP]);
    }
    if (output[_RPB] != null) {
        contents[_RPB] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output[_RPB]);
    }
    return contents;
};
const de_QueueConfiguration = (output, context) => {
    const contents = {};
    if (output[_I] != null) {
        contents[_I] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_I]);
    }
    if (output[_Qu] != null) {
        contents[_QA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Qu]);
    }
    if (output.Event === "") {
        contents[_Eve] = [];
    }
    else if (output[_Ev] != null) {
        contents[_Eve] = de_EventList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Ev]), context);
    }
    if (output[_F] != null) {
        contents[_F] = de_NotificationConfigurationFilter(output[_F], context);
    }
    return contents;
};
const de_QueueConfigurationList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_QueueConfiguration(entry, context);
    });
};
const de_Redirect = (output, context) => {
    const contents = {};
    if (output[_HN] != null) {
        contents[_HN] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_HN]);
    }
    if (output[_HRC] != null) {
        contents[_HRC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_HRC]);
    }
    if (output[_Pr] != null) {
        contents[_Pr] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Pr]);
    }
    if (output[_RKPW] != null) {
        contents[_RKPW] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_RKPW]);
    }
    if (output[_RKW] != null) {
        contents[_RKW] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_RKW]);
    }
    return contents;
};
const de_RedirectAllRequestsTo = (output, context) => {
    const contents = {};
    if (output[_HN] != null) {
        contents[_HN] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_HN]);
    }
    if (output[_Pr] != null) {
        contents[_Pr] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Pr]);
    }
    return contents;
};
const de_ReplicaModifications = (output, context) => {
    const contents = {};
    if (output[_S] != null) {
        contents[_S] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_S]);
    }
    return contents;
};
const de_ReplicationConfiguration = (output, context) => {
    const contents = {};
    if (output[_Ro] != null) {
        contents[_Ro] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Ro]);
    }
    if (output.Rule === "") {
        contents[_Rul] = [];
    }
    else if (output[_Ru] != null) {
        contents[_Rul] = de_ReplicationRules((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Ru]), context);
    }
    return contents;
};
const de_ReplicationRule = (output, context) => {
    const contents = {};
    if (output[_ID_] != null) {
        contents[_ID_] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_ID_]);
    }
    if (output[_Pri] != null) {
        contents[_Pri] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_Pri]);
    }
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    if (output[_F] != null) {
        contents[_F] = de_ReplicationRuleFilter(output[_F], context);
    }
    if (output[_S] != null) {
        contents[_S] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_S]);
    }
    if (output[_SSC] != null) {
        contents[_SSC] = de_SourceSelectionCriteria(output[_SSC], context);
    }
    if (output[_EOR] != null) {
        contents[_EOR] = de_ExistingObjectReplication(output[_EOR], context);
    }
    if (output[_Des] != null) {
        contents[_Des] = de_Destination(output[_Des], context);
    }
    if (output[_DMR] != null) {
        contents[_DMR] = de_DeleteMarkerReplication(output[_DMR], context);
    }
    return contents;
};
const de_ReplicationRuleAndOperator = (output, context) => {
    const contents = {};
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    if (output.Tag === "") {
        contents[_Tag] = [];
    }
    else if (output[_Ta] != null) {
        contents[_Tag] = de_TagSet((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Ta]), context);
    }
    return contents;
};
const de_ReplicationRuleFilter = (output, context) => {
    const contents = {};
    if (output[_P] != null) {
        contents[_P] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_P]);
    }
    if (output[_Ta] != null) {
        contents[_Ta] = de_Tag(output[_Ta], context);
    }
    if (output[_A] != null) {
        contents[_A] = de_ReplicationRuleAndOperator(output[_A], context);
    }
    return contents;
};
const de_ReplicationRules = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_ReplicationRule(entry, context);
    });
};
const de_ReplicationTime = (output, context) => {
    const contents = {};
    if (output[_S] != null) {
        contents[_S] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_S]);
    }
    if (output[_Tim] != null) {
        contents[_Tim] = de_ReplicationTimeValue(output[_Tim], context);
    }
    return contents;
};
const de_ReplicationTimeValue = (output, context) => {
    const contents = {};
    if (output[_Mi] != null) {
        contents[_Mi] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_Mi]);
    }
    return contents;
};
const de_RestoreStatus = (output, context) => {
    const contents = {};
    if (output[_IRIP] != null) {
        contents[_IRIP] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output[_IRIP]);
    }
    if (output[_RED] != null) {
        contents[_RED] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output[_RED]));
    }
    return contents;
};
const de_RoutingRule = (output, context) => {
    const contents = {};
    if (output[_Con] != null) {
        contents[_Con] = de_Condition(output[_Con], context);
    }
    if (output[_Red] != null) {
        contents[_Red] = de_Redirect(output[_Red], context);
    }
    return contents;
};
const de_RoutingRules = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_RoutingRule(entry, context);
    });
};
const de_S3KeyFilter = (output, context) => {
    const contents = {};
    if (output.FilterRule === "") {
        contents[_FRi] = [];
    }
    else if (output[_FR] != null) {
        contents[_FRi] = de_FilterRuleList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_FR]), context);
    }
    return contents;
};
const de_S3TablesDestinationResult = (output, context) => {
    const contents = {};
    if (output[_TBA] != null) {
        contents[_TBA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_TBA]);
    }
    if (output[_TN] != null) {
        contents[_TN] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_TN]);
    }
    if (output[_TAa] != null) {
        contents[_TAa] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_TAa]);
    }
    if (output[_TNa] != null) {
        contents[_TNa] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_TNa]);
    }
    return contents;
};
const de_ServerSideEncryptionByDefault = (output, context) => {
    const contents = {};
    if (output[_SSEA] != null) {
        contents[_SSEA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_SSEA]);
    }
    if (output[_KMSMKID] != null) {
        contents[_KMSMKID] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_KMSMKID]);
    }
    return contents;
};
const de_ServerSideEncryptionConfiguration = (output, context) => {
    const contents = {};
    if (output.Rule === "") {
        contents[_Rul] = [];
    }
    else if (output[_Ru] != null) {
        contents[_Rul] = de_ServerSideEncryptionRules((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Ru]), context);
    }
    return contents;
};
const de_ServerSideEncryptionRule = (output, context) => {
    const contents = {};
    if (output[_ASSEBD] != null) {
        contents[_ASSEBD] = de_ServerSideEncryptionByDefault(output[_ASSEBD], context);
    }
    if (output[_BKE] != null) {
        contents[_BKE] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseBoolean)(output[_BKE]);
    }
    return contents;
};
const de_ServerSideEncryptionRules = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_ServerSideEncryptionRule(entry, context);
    });
};
const de_SessionCredentials = (output, context) => {
    const contents = {};
    if (output[_AKI] != null) {
        contents[_AKI] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_AKI]);
    }
    if (output[_SAK] != null) {
        contents[_SAK] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_SAK]);
    }
    if (output[_ST] != null) {
        contents[_ST] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_ST]);
    }
    if (output[_Exp] != null) {
        contents[_Exp] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output[_Exp]));
    }
    return contents;
};
const de_SimplePrefix = (output, context) => {
    const contents = {};
    return contents;
};
const de_SourceSelectionCriteria = (output, context) => {
    const contents = {};
    if (output[_SKEO] != null) {
        contents[_SKEO] = de_SseKmsEncryptedObjects(output[_SKEO], context);
    }
    if (output[_RM] != null) {
        contents[_RM] = de_ReplicaModifications(output[_RM], context);
    }
    return contents;
};
const de_SSEKMS = (output, context) => {
    const contents = {};
    if (output[_KI] != null) {
        contents[_KI] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_KI]);
    }
    return contents;
};
const de_SseKmsEncryptedObjects = (output, context) => {
    const contents = {};
    if (output[_S] != null) {
        contents[_S] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_S]);
    }
    return contents;
};
const de_SSES3 = (output, context) => {
    const contents = {};
    return contents;
};
const de_Stats = (output, context) => {
    const contents = {};
    if (output[_BS] != null) {
        contents[_BS] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_BS]);
    }
    if (output[_BP] != null) {
        contents[_BP] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_BP]);
    }
    if (output[_BRy] != null) {
        contents[_BRy] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseLong)(output[_BRy]);
    }
    return contents;
};
const de_StorageClassAnalysis = (output, context) => {
    const contents = {};
    if (output[_DE] != null) {
        contents[_DE] = de_StorageClassAnalysisDataExport(output[_DE], context);
    }
    return contents;
};
const de_StorageClassAnalysisDataExport = (output, context) => {
    const contents = {};
    if (output[_OSV] != null) {
        contents[_OSV] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_OSV]);
    }
    if (output[_Des] != null) {
        contents[_Des] = de_AnalyticsExportDestination(output[_Des], context);
    }
    return contents;
};
const de_Tag = (output, context) => {
    const contents = {};
    if (output[_K] != null) {
        contents[_K] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_K]);
    }
    if (output[_Va] != null) {
        contents[_Va] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Va]);
    }
    return contents;
};
const de_TagSet = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_Tag(entry, context);
    });
};
const de_TargetGrant = (output, context) => {
    const contents = {};
    if (output[_Gra] != null) {
        contents[_Gra] = de_Grantee(output[_Gra], context);
    }
    if (output[_Pe] != null) {
        contents[_Pe] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Pe]);
    }
    return contents;
};
const de_TargetGrants = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_TargetGrant(entry, context);
    });
};
const de_TargetObjectKeyFormat = (output, context) => {
    const contents = {};
    if (output[_SPi] != null) {
        contents[_SPi] = de_SimplePrefix(output[_SPi], context);
    }
    if (output[_PP] != null) {
        contents[_PP] = de_PartitionedPrefix(output[_PP], context);
    }
    return contents;
};
const de_Tiering = (output, context) => {
    const contents = {};
    if (output[_Da] != null) {
        contents[_Da] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_Da]);
    }
    if (output[_AT] != null) {
        contents[_AT] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_AT]);
    }
    return contents;
};
const de_TieringList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_Tiering(entry, context);
    });
};
const de_TopicConfiguration = (output, context) => {
    const contents = {};
    if (output[_I] != null) {
        contents[_I] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_I]);
    }
    if (output[_Top] != null) {
        contents[_TA] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_Top]);
    }
    if (output.Event === "") {
        contents[_Eve] = [];
    }
    else if (output[_Ev] != null) {
        contents[_Eve] = de_EventList((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.getArrayIfSingleItem)(output[_Ev]), context);
    }
    if (output[_F] != null) {
        contents[_F] = de_NotificationConfigurationFilter(output[_F], context);
    }
    return contents;
};
const de_TopicConfigurationList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_TopicConfiguration(entry, context);
    });
};
const de_Transition = (output, context) => {
    const contents = {};
    if (output[_Dat] != null) {
        contents[_Dat] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectNonNull)((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.parseRfc3339DateTimeWithOffset)(output[_Dat]));
    }
    if (output[_Da] != null) {
        contents[_Da] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.strictParseInt32)(output[_Da]);
    }
    if (output[_SC] != null) {
        contents[_SC] = (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.expectString)(output[_SC]);
    }
    return contents;
};
const de_TransitionList = (output, context) => {
    return (output || [])
        .filter((e) => e != null)
        .map((entry) => {
        return de_Transition(entry, context);
    });
};
const deserializeMetadata = (output) => ({
    httpStatusCode: output.statusCode,
    requestId: output.headers["x-amzn-requestid"] ?? output.headers["x-amzn-request-id"] ?? output.headers["x-amz-request-id"],
    extendedRequestId: output.headers["x-amz-id-2"],
    cfId: output.headers["x-amz-cf-id"],
});
const collectBodyString = (streamBody, context) => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_3__.collectBody)(streamBody, context).then((body) => context.utf8Encoder(body));
const _A = "And";
const _AAO = "AnalyticsAndOperator";
const _AC = "AnalyticsConfiguration";
const _ACL = "ACL";
const _ACLc = "AccessControlList";
const _ACLn = "AnalyticsConfigurationList";
const _ACP = "AccessControlPolicy";
const _ACT = "AccessControlTranslation";
const _ACc = "AccelerateConfiguration";
const _AD = "AbortDate";
const _AED = "AnalyticsExportDestination";
const _AF = "AnalyticsFilter";
const _AH = "AllowedHeader";
const _AHl = "AllowedHeaders";
const _AI = "AnalyticsId";
const _AIMU = "AbortIncompleteMultipartUpload";
const _AIc = "AccountId";
const _AKI = "AccessKeyId";
const _AM = "AllowedMethod";
const _AMl = "AllowedMethods";
const _AO = "AllowedOrigin";
const _AOl = "AllowedOrigins";
const _APA = "AccessPointAlias";
const _APAc = "AccessPointArn";
const _AQRD = "AllowQuotedRecordDelimiter";
const _AR = "AcceptRanges";
const _ARI = "AbortRuleId";
const _AS = "ArchiveStatus";
const _ASBD = "AnalyticsS3BucketDestination";
const _ASEFF = "AnalyticsS3ExportFileFormat";
const _ASSEBD = "ApplyServerSideEncryptionByDefault";
const _AT = "AccessTier";
const _Ac = "Account";
const _B = "Bucket";
const _BAI = "BucketAccountId";
const _BAS = "BucketAccelerateStatus";
const _BGR = "BypassGovernanceRetention";
const _BI = "BucketInfo";
const _BKE = "BucketKeyEnabled";
const _BLC = "BucketLifecycleConfiguration";
const _BLCu = "BucketLocationConstraint";
const _BLN = "BucketLocationName";
const _BLP = "BucketLogsPermission";
const _BLS = "BucketLoggingStatus";
const _BLT = "BucketLocationType";
const _BN = "BucketName";
const _BP = "BytesProcessed";
const _BPA = "BlockPublicAcls";
const _BPP = "BlockPublicPolicy";
const _BR = "BucketRegion";
const _BRy = "BytesReturned";
const _BS = "BytesScanned";
const _BT = "BucketType";
const _BVS = "BucketVersioningStatus";
const _Bu = "Buckets";
const _C = "Credentials";
const _CA = "ChecksumAlgorithm";
const _CACL = "CannedACL";
const _CBC = "CreateBucketConfiguration";
const _CC = "CacheControl";
const _CCRC = "ChecksumCRC32";
const _CCRCC = "ChecksumCRC32C";
const _CCRCNVME = "ChecksumCRC64NVME";
const _CD = "ContentDisposition";
const _CDr = "CreationDate";
const _CE = "ContentEncoding";
const _CF = "CloudFunction";
const _CFC = "CloudFunctionConfiguration";
const _CL = "ContentLanguage";
const _CLo = "ContentLength";
const _CM = "ChecksumMode";
const _CMD = "ContentMD5";
const _CMU = "CompletedMultipartUpload";
const _CORSC = "CORSConfiguration";
const _CORSR = "CORSRule";
const _CORSRu = "CORSRules";
const _CP = "CommonPrefixes";
const _CPo = "CompletedPart";
const _CR = "ContentRange";
const _CRSBA = "ConfirmRemoveSelfBucketAccess";
const _CS = "CopySource";
const _CSHA = "ChecksumSHA1";
const _CSHAh = "ChecksumSHA256";
const _CSIM = "CopySourceIfMatch";
const _CSIMS = "CopySourceIfModifiedSince";
const _CSINM = "CopySourceIfNoneMatch";
const _CSIUS = "CopySourceIfUnmodifiedSince";
const _CSR = "CopySourceRange";
const _CSSSECA = "CopySourceSSECustomerAlgorithm";
const _CSSSECK = "CopySourceSSECustomerKey";
const _CSSSECKMD = "CopySourceSSECustomerKeyMD5";
const _CSV = "CSV";
const _CSVI = "CopySourceVersionId";
const _CSVIn = "CSVInput";
const _CSVO = "CSVOutput";
const _CT = "ChecksumType";
const _CTo = "ContentType";
const _CTom = "CompressionType";
const _CTon = "ContinuationToken";
const _Ch = "Checksum";
const _Co = "Contents";
const _Cod = "Code";
const _Com = "Comments";
const _Con = "Condition";
const _D = "Delimiter";
const _DAI = "DaysAfterInitiation";
const _DE = "DataExport";
const _DM = "DeleteMarker";
const _DMR = "DeleteMarkerReplication";
const _DMRS = "DeleteMarkerReplicationStatus";
const _DMVI = "DeleteMarkerVersionId";
const _DMe = "DeleteMarkers";
const _DN = "DisplayName";
const _DR = "DataRedundancy";
const _DRe = "DefaultRetention";
const _Da = "Days";
const _Dat = "Date";
const _De = "Deleted";
const _Del = "Delete";
const _Des = "Destination";
const _Desc = "Description";
const _E = "Expires";
const _EA = "EmailAddress";
const _EBC = "EventBridgeConfiguration";
const _EBO = "ExpectedBucketOwner";
const _EC = "ErrorCode";
const _ECn = "EncryptionConfiguration";
const _ED = "ErrorDocument";
const _EH = "ExposeHeaders";
const _EHx = "ExposeHeader";
const _EM = "ErrorMessage";
const _EODM = "ExpiredObjectDeleteMarker";
const _EOR = "ExistingObjectReplication";
const _EORS = "ExistingObjectReplicationStatus";
const _ERP = "EnableRequestProgress";
const _ES = "ExpiresString";
const _ESBO = "ExpectedSourceBucketOwner";
const _ESx = "ExpirationStatus";
const _ET = "EncodingType";
const _ETa = "ETag";
const _ETn = "EncryptionType";
const _ETv = "EventThreshold";
const _ETx = "ExpressionType";
const _En = "Encryption";
const _Ena = "Enabled";
const _End = "End";
const _Er = "Error";
const _Err = "Errors";
const _Ev = "Event";
const _Eve = "Events";
const _Ex = "Expression";
const _Exp = "Expiration";
const _F = "Filter";
const _FD = "FieldDelimiter";
const _FHI = "FileHeaderInfo";
const _FO = "FetchOwner";
const _FR = "FilterRule";
const _FRN = "FilterRuleName";
const _FRV = "FilterRuleValue";
const _FRi = "FilterRules";
const _Fi = "Field";
const _Fo = "Format";
const _Fr = "Frequency";
const _G = "Grant";
const _GFC = "GrantFullControl";
const _GJP = "GlacierJobParameters";
const _GR = "GrantRead";
const _GRACP = "GrantReadACP";
const _GW = "GrantWrite";
const _GWACP = "GrantWriteACP";
const _Gr = "Grants";
const _Gra = "Grantee";
const _HECRE = "HttpErrorCodeReturnedEquals";
const _HN = "HostName";
const _HRC = "HttpRedirectCode";
const _I = "Id";
const _IC = "InventoryConfiguration";
const _ICL = "InventoryConfigurationList";
const _ID = "IndexDocument";
const _ID_ = "ID";
const _IDn = "InventoryDestination";
const _IE = "IsEnabled";
const _IEn = "InventoryEncryption";
const _IF = "InventoryFilter";
const _IFn = "InventoryFormat";
const _IFnv = "InventoryFrequency";
const _II = "InventoryId";
const _IIOV = "InventoryIncludedObjectVersions";
const _IL = "IsLatest";
const _IM = "IfMatch";
const _IMIT = "IfMatchInitiatedTime";
const _IMLMT = "IfMatchLastModifiedTime";
const _IMS = "IfMatchSize";
const _IMSf = "IfModifiedSince";
const _INM = "IfNoneMatch";
const _IOF = "InventoryOptionalField";
const _IOV = "IncludedObjectVersions";
const _IP = "IsPublic";
const _IPA = "IgnorePublicAcls";
const _IRIP = "IsRestoreInProgress";
const _IS = "InputSerialization";
const _ISBD = "InventoryS3BucketDestination";
const _ISn = "InventorySchedule";
const _IT = "IsTruncated";
const _ITAO = "IntelligentTieringAndOperator";
const _ITAT = "IntelligentTieringAccessTier";
const _ITC = "IntelligentTieringConfiguration";
const _ITCL = "IntelligentTieringConfigurationList";
const _ITD = "IntelligentTieringDays";
const _ITF = "IntelligentTieringFilter";
const _ITI = "IntelligentTieringId";
const _ITS = "IntelligentTieringStatus";
const _IUS = "IfUnmodifiedSince";
const _In = "Initiator";
const _Ini = "Initiated";
const _JSON = "JSON";
const _JSONI = "JSONInput";
const _JSONO = "JSONOutput";
const _JSONT = "JSONType";
const _K = "Key";
const _KC = "KeyCount";
const _KI = "KeyId";
const _KM = "KeyMarker";
const _KMSC = "KMSContext";
const _KMSKI = "KMSKeyId";
const _KMSMKID = "KMSMasterKeyID";
const _KPE = "KeyPrefixEquals";
const _L = "Location";
const _LC = "LocationConstraint";
const _LE = "LoggingEnabled";
const _LEi = "LifecycleExpiration";
const _LFA = "LambdaFunctionArn";
const _LFC = "LambdaFunctionConfigurations";
const _LFCa = "LambdaFunctionConfiguration";
const _LI = "LocationInfo";
const _LM = "LastModified";
const _LMT = "LastModifiedTime";
const _LNAS = "LocationNameAsString";
const _LP = "LocationPrefix";
const _LR = "LifecycleRule";
const _LRAO = "LifecycleRuleAndOperator";
const _LRF = "LifecycleRuleFilter";
const _LT = "LocationType";
const _M = "Marker";
const _MAO = "MetricsAndOperator";
const _MAS = "MaxAgeSeconds";
const _MB = "MaxBuckets";
const _MC = "MetricsConfiguration";
const _MCL = "MetricsConfigurationList";
const _MD = "MetadataDirective";
const _MDB = "MaxDirectoryBuckets";
const _MDf = "MfaDelete";
const _ME = "MetadataEntry";
const _MF = "MetricsFilter";
const _MFA = "MFA";
const _MFAD = "MFADelete";
const _MI = "MetricsId";
const _MK = "MaxKeys";
const _MKe = "MetadataKey";
const _MM = "MissingMeta";
const _MOS = "MpuObjectSize";
const _MP = "MaxParts";
const _MS = "MetricsStatus";
const _MTC = "MetadataTableConfiguration";
const _MTCR = "MetadataTableConfigurationResult";
const _MU = "MaxUploads";
const _MV = "MetadataValue";
const _Me = "Metrics";
const _Mes = "Message";
const _Mi = "Minutes";
const _Mo = "Mode";
const _N = "Name";
const _NC = "NotificationConfiguration";
const _NCF = "NotificationConfigurationFilter";
const _NCT = "NextContinuationToken";
const _ND = "NoncurrentDays";
const _NI = "NotificationId";
const _NKM = "NextKeyMarker";
const _NM = "NextMarker";
const _NNV = "NewerNoncurrentVersions";
const _NPNM = "NextPartNumberMarker";
const _NUIM = "NextUploadIdMarker";
const _NVE = "NoncurrentVersionExpiration";
const _NVIM = "NextVersionIdMarker";
const _NVT = "NoncurrentVersionTransitions";
const _NVTo = "NoncurrentVersionTransition";
const _O = "Owner";
const _OA = "ObjectAttributes";
const _OC = "OwnershipControls";
const _OCACL = "ObjectCannedACL";
const _OCR = "OwnershipControlsRule";
const _OF = "OptionalFields";
const _OI = "ObjectIdentifier";
const _OK = "ObjectKey";
const _OL = "OutputLocation";
const _OLC = "ObjectLockConfiguration";
const _OLE = "ObjectLockEnabled";
const _OLEFB = "ObjectLockEnabledForBucket";
const _OLLH = "ObjectLockLegalHold";
const _OLLHS = "ObjectLockLegalHoldStatus";
const _OLM = "ObjectLockMode";
const _OLR = "ObjectLockRetention";
const _OLRM = "ObjectLockRetentionMode";
const _OLRUD = "ObjectLockRetainUntilDate";
const _OLRb = "ObjectLockRule";
const _OO = "ObjectOwnership";
const _OOA = "OptionalObjectAttributes";
const _OOw = "OwnerOverride";
const _OP = "ObjectParts";
const _OS = "OutputSerialization";
const _OSGT = "ObjectSizeGreaterThan";
const _OSGTB = "ObjectSizeGreaterThanBytes";
const _OSLT = "ObjectSizeLessThan";
const _OSLTB = "ObjectSizeLessThanBytes";
const _OSV = "OutputSchemaVersion";
const _OSb = "ObjectSize";
const _OVI = "ObjectVersionId";
const _Ob = "Objects";
const _P = "Prefix";
const _PABC = "PublicAccessBlockConfiguration";
const _PC = "PartsCount";
const _PDS = "PartitionDateSource";
const _PI = "ParquetInput";
const _PN = "PartNumber";
const _PNM = "PartNumberMarker";
const _PP = "PartitionedPrefix";
const _Pa = "Payer";
const _Par = "Part";
const _Parq = "Parquet";
const _Part = "Parts";
const _Pe = "Permission";
const _Pr = "Protocol";
const _Pri = "Priority";
const _Q = "Quiet";
const _QA = "QueueArn";
const _QC = "QueueConfiguration";
const _QCu = "QueueConfigurations";
const _QCuo = "QuoteCharacter";
const _QEC = "QuoteEscapeCharacter";
const _QF = "QuoteFields";
const _Qu = "Queue";
const _R = "Range";
const _RART = "RedirectAllRequestsTo";
const _RC = "RequestCharged";
const _RCC = "ResponseCacheControl";
const _RCD = "ResponseContentDisposition";
const _RCE = "ResponseContentEncoding";
const _RCL = "ResponseContentLanguage";
const _RCT = "ResponseContentType";
const _RCe = "ReplicationConfiguration";
const _RD = "RecordDelimiter";
const _RE = "ResponseExpires";
const _RED = "RestoreExpiryDate";
const _RKKID = "ReplicaKmsKeyID";
const _RKPW = "ReplaceKeyPrefixWith";
const _RKW = "ReplaceKeyWith";
const _RM = "ReplicaModifications";
const _RMS = "ReplicaModificationsStatus";
const _ROP = "RestoreOutputPath";
const _RP = "RequestPayer";
const _RPB = "RestrictPublicBuckets";
const _RPC = "RequestPaymentConfiguration";
const _RPe = "RequestProgress";
const _RR = "RequestRoute";
const _RRAO = "ReplicationRuleAndOperator";
const _RRF = "ReplicationRuleFilter";
const _RRS = "ReplicationRuleStatus";
const _RRT = "RestoreRequestType";
const _RRe = "ReplicationRule";
const _RRes = "RestoreRequest";
const _RRo = "RoutingRules";
const _RRou = "RoutingRule";
const _RS = "ReplicationStatus";
const _RSe = "RestoreStatus";
const _RT = "RequestToken";
const _RTS = "ReplicationTimeStatus";
const _RTV = "ReplicationTimeValue";
const _RTe = "ReplicationTime";
const _RUD = "RetainUntilDate";
const _Re = "Restore";
const _Red = "Redirect";
const _Ro = "Role";
const _Ru = "Rule";
const _Rul = "Rules";
const _S = "Status";
const _SA = "StartAfter";
const _SAK = "SecretAccessKey";
const _SBD = "S3BucketDestination";
const _SC = "StorageClass";
const _SCA = "StorageClassAnalysis";
const _SCADE = "StorageClassAnalysisDataExport";
const _SCASV = "StorageClassAnalysisSchemaVersion";
const _SCt = "StatusCode";
const _SDV = "SkipDestinationValidation";
const _SK = "SSE-KMS";
const _SKEO = "SseKmsEncryptedObjects";
const _SKEOS = "SseKmsEncryptedObjectsStatus";
const _SKF = "S3KeyFilter";
const _SKe = "S3Key";
const _SL = "S3Location";
const _SM = "SessionMode";
const _SOCR = "SelectObjectContentRequest";
const _SP = "SelectParameters";
const _SPi = "SimplePrefix";
const _SR = "ScanRange";
const _SS = "SSE-S3";
const _SSC = "SourceSelectionCriteria";
const _SSE = "ServerSideEncryption";
const _SSEA = "SSEAlgorithm";
const _SSEBD = "ServerSideEncryptionByDefault";
const _SSEC = "ServerSideEncryptionConfiguration";
const _SSECA = "SSECustomerAlgorithm";
const _SSECK = "SSECustomerKey";
const _SSECKMD = "SSECustomerKeyMD5";
const _SSEKMS = "SSEKMS";
const _SSEKMSEC = "SSEKMSEncryptionContext";
const _SSEKMSKI = "SSEKMSKeyId";
const _SSER = "ServerSideEncryptionRule";
const _SSES = "SSES3";
const _ST = "SessionToken";
const _STBA = "S3TablesBucketArn";
const _STD = "S3TablesDestination";
const _STDR = "S3TablesDestinationResult";
const _STN = "S3TablesName";
const _S_ = "S3";
const _Sc = "Schedule";
const _Se = "Setting";
const _Si = "Size";
const _St = "Start";
const _Su = "Suffix";
const _T = "Tagging";
const _TA = "TopicArn";
const _TAa = "TableArn";
const _TB = "TargetBucket";
const _TBA = "TableBucketArn";
const _TC = "TagCount";
const _TCo = "TopicConfiguration";
const _TCop = "TopicConfigurations";
const _TD = "TaggingDirective";
const _TDMOS = "TransitionDefaultMinimumObjectSize";
const _TG = "TargetGrants";
const _TGa = "TargetGrant";
const _TN = "TableName";
const _TNa = "TableNamespace";
const _TOKF = "TargetObjectKeyFormat";
const _TP = "TargetPrefix";
const _TPC = "TotalPartsCount";
const _TS = "TagSet";
const _TSC = "TransitionStorageClass";
const _Ta = "Tag";
const _Tag = "Tags";
const _Ti = "Tier";
const _Tie = "Tierings";
const _Tier = "Tiering";
const _Tim = "Time";
const _To = "Token";
const _Top = "Topic";
const _Tr = "Transitions";
const _Tra = "Transition";
const _Ty = "Type";
const _U = "Upload";
const _UI = "UploadId";
const _UIM = "UploadIdMarker";
const _UM = "UserMetadata";
const _URI = "URI";
const _Up = "Uploads";
const _V = "Version";
const _VC = "VersionCount";
const _VCe = "VersioningConfiguration";
const _VI = "VersionId";
const _VIM = "VersionIdMarker";
const _Va = "Value";
const _Ve = "Versions";
const _WC = "WebsiteConfiguration";
const _WOB = "WriteOffsetBytes";
const _WRL = "WebsiteRedirectLocation";
const _Y = "Years";
const _a = "analytics";
const _ac = "accelerate";
const _acl = "acl";
const _ar = "accept-ranges";
const _at = "attributes";
const _br = "bucket-region";
const _c = "cors";
const _cc = "cache-control";
const _cd = "content-disposition";
const _ce = "content-encoding";
const _cl = "content-language";
const _cl_ = "content-length";
const _cm = "content-md5";
const _cr = "content-range";
const _ct = "content-type";
const _ct_ = "continuation-token";
const _d = "delete";
const _de = "delimiter";
const _e = "expires";
const _en = "encryption";
const _et = "encoding-type";
const _eta = "etag";
const _ex = "expiresstring";
const _fo = "fetch-owner";
const _i = "id";
const _im = "if-match";
const _ims = "if-modified-since";
const _in = "inventory";
const _inm = "if-none-match";
const _it = "intelligent-tiering";
const _ius = "if-unmodified-since";
const _km = "key-marker";
const _l = "lifecycle";
const _lh = "legal-hold";
const _lm = "last-modified";
const _lo = "location";
const _log = "logging";
const _lt = "list-type";
const _m = "metrics";
const _mT = "metadataTable";
const _ma = "marker";
const _mb = "max-buckets";
const _mdb = "max-directory-buckets";
const _me = "member";
const _mk = "max-keys";
const _mp = "max-parts";
const _mu = "max-uploads";
const _n = "notification";
const _oC = "ownershipControls";
const _ol = "object-lock";
const _p = "policy";
const _pAB = "publicAccessBlock";
const _pN = "partNumber";
const _pS = "policyStatus";
const _pnm = "part-number-marker";
const _pr = "prefix";
const _r = "replication";
const _rP = "requestPayment";
const _ra = "range";
const _rcc = "response-cache-control";
const _rcd = "response-content-disposition";
const _rce = "response-content-encoding";
const _rcl = "response-content-language";
const _rct = "response-content-type";
const _re = "response-expires";
const _res = "restore";
const _ret = "retention";
const _s = "session";
const _sa = "start-after";
const _se = "select";
const _st = "select-type";
const _t = "tagging";
const _to = "torrent";
const _u = "uploads";
const _uI = "uploadId";
const _uim = "upload-id-marker";
const _v = "versioning";
const _vI = "versionId";
const _ve = '<?xml version="1.0" encoding="UTF-8"?>';
const _ver = "versions";
const _vim = "version-id-marker";
const _w = "website";
const _x = "xsi:type";
const _xaa = "x-amz-acl";
const _xaad = "x-amz-abort-date";
const _xaapa = "x-amz-access-point-alias";
const _xaari = "x-amz-abort-rule-id";
const _xaas = "x-amz-archive-status";
const _xabgr = "x-amz-bypass-governance-retention";
const _xabln = "x-amz-bucket-location-name";
const _xablt = "x-amz-bucket-location-type";
const _xabole = "x-amz-bucket-object-lock-enabled";
const _xabolt = "x-amz-bucket-object-lock-token";
const _xabr = "x-amz-bucket-region";
const _xaca = "x-amz-checksum-algorithm";
const _xacc = "x-amz-checksum-crc32";
const _xacc_ = "x-amz-checksum-crc32c";
const _xacc__ = "x-amz-checksum-crc64nvme";
const _xacm = "x-amz-checksum-mode";
const _xacrsba = "x-amz-confirm-remove-self-bucket-access";
const _xacs = "x-amz-checksum-sha1";
const _xacs_ = "x-amz-checksum-sha256";
const _xacs__ = "x-amz-copy-source";
const _xacsim = "x-amz-copy-source-if-match";
const _xacsims = "x-amz-copy-source-if-modified-since";
const _xacsinm = "x-amz-copy-source-if-none-match";
const _xacsius = "x-amz-copy-source-if-unmodified-since";
const _xacsm = "x-amz-create-session-mode";
const _xacsr = "x-amz-copy-source-range";
const _xacssseca = "x-amz-copy-source-server-side-encryption-customer-algorithm";
const _xacssseck = "x-amz-copy-source-server-side-encryption-customer-key";
const _xacssseckm = "x-amz-copy-source-server-side-encryption-customer-key-md5";
const _xacsvi = "x-amz-copy-source-version-id";
const _xact = "x-amz-checksum-type";
const _xadm = "x-amz-delete-marker";
const _xae = "x-amz-expiration";
const _xaebo = "x-amz-expected-bucket-owner";
const _xafec = "x-amz-fwd-error-code";
const _xafem = "x-amz-fwd-error-message";
const _xafhar = "x-amz-fwd-header-accept-ranges";
const _xafhcc = "x-amz-fwd-header-cache-control";
const _xafhcd = "x-amz-fwd-header-content-disposition";
const _xafhce = "x-amz-fwd-header-content-encoding";
const _xafhcl = "x-amz-fwd-header-content-language";
const _xafhcr = "x-amz-fwd-header-content-range";
const _xafhct = "x-amz-fwd-header-content-type";
const _xafhe = "x-amz-fwd-header-etag";
const _xafhe_ = "x-amz-fwd-header-expires";
const _xafhlm = "x-amz-fwd-header-last-modified";
const _xafhxacc = "x-amz-fwd-header-x-amz-checksum-crc32";
const _xafhxacc_ = "x-amz-fwd-header-x-amz-checksum-crc32c";
const _xafhxacc__ = "x-amz-fwd-header-x-amz-checksum-crc64nvme";
const _xafhxacs = "x-amz-fwd-header-x-amz-checksum-sha1";
const _xafhxacs_ = "x-amz-fwd-header-x-amz-checksum-sha256";
const _xafhxadm = "x-amz-fwd-header-x-amz-delete-marker";
const _xafhxae = "x-amz-fwd-header-x-amz-expiration";
const _xafhxamm = "x-amz-fwd-header-x-amz-missing-meta";
const _xafhxampc = "x-amz-fwd-header-x-amz-mp-parts-count";
const _xafhxaollh = "x-amz-fwd-header-x-amz-object-lock-legal-hold";
const _xafhxaolm = "x-amz-fwd-header-x-amz-object-lock-mode";
const _xafhxaolrud = "x-amz-fwd-header-x-amz-object-lock-retain-until-date";
const _xafhxar = "x-amz-fwd-header-x-amz-restore";
const _xafhxarc = "x-amz-fwd-header-x-amz-request-charged";
const _xafhxars = "x-amz-fwd-header-x-amz-replication-status";
const _xafhxasc = "x-amz-fwd-header-x-amz-storage-class";
const _xafhxasse = "x-amz-fwd-header-x-amz-server-side-encryption";
const _xafhxasseakki = "x-amz-fwd-header-x-amz-server-side-encryption-aws-kms-key-id";
const _xafhxassebke = "x-amz-fwd-header-x-amz-server-side-encryption-bucket-key-enabled";
const _xafhxasseca = "x-amz-fwd-header-x-amz-server-side-encryption-customer-algorithm";
const _xafhxasseckm = "x-amz-fwd-header-x-amz-server-side-encryption-customer-key-md5";
const _xafhxatc = "x-amz-fwd-header-x-amz-tagging-count";
const _xafhxavi = "x-amz-fwd-header-x-amz-version-id";
const _xafs = "x-amz-fwd-status";
const _xagfc = "x-amz-grant-full-control";
const _xagr = "x-amz-grant-read";
const _xagra = "x-amz-grant-read-acp";
const _xagw = "x-amz-grant-write";
const _xagwa = "x-amz-grant-write-acp";
const _xaimit = "x-amz-if-match-initiated-time";
const _xaimlmt = "x-amz-if-match-last-modified-time";
const _xaims = "x-amz-if-match-size";
const _xam = "x-amz-mfa";
const _xamd = "x-amz-metadata-directive";
const _xamm = "x-amz-missing-meta";
const _xamos = "x-amz-mp-object-size";
const _xamp = "x-amz-max-parts";
const _xampc = "x-amz-mp-parts-count";
const _xaoa = "x-amz-object-attributes";
const _xaollh = "x-amz-object-lock-legal-hold";
const _xaolm = "x-amz-object-lock-mode";
const _xaolrud = "x-amz-object-lock-retain-until-date";
const _xaoo = "x-amz-object-ownership";
const _xaooa = "x-amz-optional-object-attributes";
const _xaos = "x-amz-object-size";
const _xapnm = "x-amz-part-number-marker";
const _xar = "x-amz-restore";
const _xarc = "x-amz-request-charged";
const _xarop = "x-amz-restore-output-path";
const _xarp = "x-amz-request-payer";
const _xarr = "x-amz-request-route";
const _xars = "x-amz-replication-status";
const _xart = "x-amz-request-token";
const _xasc = "x-amz-storage-class";
const _xasca = "x-amz-sdk-checksum-algorithm";
const _xasdv = "x-amz-skip-destination-validation";
const _xasebo = "x-amz-source-expected-bucket-owner";
const _xasse = "x-amz-server-side-encryption";
const _xasseakki = "x-amz-server-side-encryption-aws-kms-key-id";
const _xassebke = "x-amz-server-side-encryption-bucket-key-enabled";
const _xassec = "x-amz-server-side-encryption-context";
const _xasseca = "x-amz-server-side-encryption-customer-algorithm";
const _xasseck = "x-amz-server-side-encryption-customer-key";
const _xasseckm = "x-amz-server-side-encryption-customer-key-md5";
const _xat = "x-amz-tagging";
const _xatc = "x-amz-tagging-count";
const _xatd = "x-amz-tagging-directive";
const _xatdmos = "x-amz-transition-default-minimum-object-size";
const _xavi = "x-amz-version-id";
const _xawob = "x-amz-write-offset-bytes";
const _xawrl = "x-amz-website-redirect-location";
const _xi = "x-id";


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/runtimeConfig.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/runtimeConfig.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRuntimeConfig: () => (/* binding */ getRuntimeConfig)
/* harmony export */ });
/* harmony import */ var _package_json__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../package.json */ "../node_modules/@aws-sdk/client-s3/package.json");
/* harmony import */ var _aws_sdk_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @aws-sdk/core */ "../node_modules/@aws-sdk/core/dist-es/submodules/client/emitWarningIfUnsupportedVersion.js");
/* harmony import */ var _aws_sdk_core__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @aws-sdk/core */ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/resolveAwsSdkSigV4AConfig.js");
/* harmony import */ var _aws_sdk_credential_provider_node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/credential-provider-node */ "../node_modules/@aws-sdk/credential-provider-node/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_bucket_endpoint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/middleware-bucket-endpoint */ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_flexible_checksums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/middleware-flexible-checksums */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/index.js");
/* harmony import */ var _aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-sdk/middleware-sdk-s3 */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/index.js");
/* harmony import */ var _aws_sdk_util_user_agent_node__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-sdk/util-user-agent-node */ "../node_modules/@aws-sdk/util-user-agent-node/dist-es/index.js");
/* harmony import */ var _smithy_config_resolver__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @smithy/config-resolver */ "../node_modules/@smithy/config-resolver/dist-es/index.js");
/* harmony import */ var _smithy_eventstream_serde_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @smithy/eventstream-serde-node */ "../node_modules/@smithy/eventstream-serde-node/dist-es/index.js");
/* harmony import */ var _smithy_hash_node__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @smithy/hash-node */ "../node_modules/@smithy/hash-node/dist-es/index.js");
/* harmony import */ var _smithy_hash_stream_node__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @smithy/hash-stream-node */ "../node_modules/@smithy/hash-stream-node/dist-es/index.js");
/* harmony import */ var _smithy_middleware_retry__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @smithy/middleware-retry */ "../node_modules/@smithy/middleware-retry/dist-es/index.js");
/* harmony import */ var _smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @smithy/node-config-provider */ "../node_modules/@smithy/node-config-provider/dist-es/index.js");
/* harmony import */ var _smithy_node_http_handler__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @smithy/node-http-handler */ "../node_modules/@smithy/node-http-handler/dist-es/index.js");
/* harmony import */ var _smithy_util_body_length_node__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @smithy/util-body-length-node */ "../node_modules/@smithy/util-body-length-node/dist-es/index.js");
/* harmony import */ var _smithy_util_retry__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @smithy/util-retry */ "../node_modules/@smithy/util-retry/dist-es/index.js");
/* harmony import */ var _runtimeConfig_shared__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./runtimeConfig.shared */ "../node_modules/@aws-sdk/client-s3/dist-es/runtimeConfig.shared.js");
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var _smithy_util_defaults_mode_node__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @smithy/util-defaults-mode-node */ "../node_modules/@smithy/util-defaults-mode-node/dist-es/index.js");




















const getRuntimeConfig = (config) => {
    (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_14__.emitWarningIfUnsupportedVersion)(process.version);
    const defaultsMode = (0,_smithy_util_defaults_mode_node__WEBPACK_IMPORTED_MODULE_15__.resolveDefaultsModeConfig)(config);
    const defaultConfigProvider = () => defaultsMode().then(_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_14__.loadConfigsForDefaultMode);
    const clientSharedValues = (0,_runtimeConfig_shared__WEBPACK_IMPORTED_MODULE_16__.getRuntimeConfig)(config);
    (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_17__.emitWarningIfUnsupportedVersion)(process.version);
    const profileConfig = { profile: config?.profile };
    return {
        ...clientSharedValues,
        ...config,
        runtime: "node",
        defaultsMode,
        bodyLengthChecker: config?.bodyLengthChecker ?? _smithy_util_body_length_node__WEBPACK_IMPORTED_MODULE_12__.calculateBodyLength,
        credentialDefaultProvider: config?.credentialDefaultProvider ?? _aws_sdk_credential_provider_node__WEBPACK_IMPORTED_MODULE_0__.defaultProvider,
        defaultUserAgentProvider: config?.defaultUserAgentProvider ??
            (0,_aws_sdk_util_user_agent_node__WEBPACK_IMPORTED_MODULE_4__.createDefaultUserAgentProvider)({ serviceId: clientSharedValues.serviceId, clientVersion: _package_json__WEBPACK_IMPORTED_MODULE_18__.version }),
        disableS3ExpressSessionAuth: config?.disableS3ExpressSessionAuth ??
            (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_10__.loadConfig)(_aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_3__.NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS, profileConfig),
        eventStreamSerdeProvider: config?.eventStreamSerdeProvider ?? _smithy_eventstream_serde_node__WEBPACK_IMPORTED_MODULE_6__.eventStreamSerdeProvider,
        maxAttempts: config?.maxAttempts ?? (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_10__.loadConfig)(_smithy_middleware_retry__WEBPACK_IMPORTED_MODULE_9__.NODE_MAX_ATTEMPT_CONFIG_OPTIONS, config),
        md5: config?.md5 ?? _smithy_hash_node__WEBPACK_IMPORTED_MODULE_7__.Hash.bind(null, "md5"),
        region: config?.region ??
            (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_10__.loadConfig)(_smithy_config_resolver__WEBPACK_IMPORTED_MODULE_5__.NODE_REGION_CONFIG_OPTIONS, { ..._smithy_config_resolver__WEBPACK_IMPORTED_MODULE_5__.NODE_REGION_CONFIG_FILE_OPTIONS, ...profileConfig }),
        requestChecksumCalculation: config?.requestChecksumCalculation ??
            (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_10__.loadConfig)(_aws_sdk_middleware_flexible_checksums__WEBPACK_IMPORTED_MODULE_2__.NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS, profileConfig),
        requestHandler: _smithy_node_http_handler__WEBPACK_IMPORTED_MODULE_11__.NodeHttpHandler.create(config?.requestHandler ?? defaultConfigProvider),
        responseChecksumValidation: config?.responseChecksumValidation ??
            (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_10__.loadConfig)(_aws_sdk_middleware_flexible_checksums__WEBPACK_IMPORTED_MODULE_2__.NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS, profileConfig),
        retryMode: config?.retryMode ??
            (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_10__.loadConfig)({
                ..._smithy_middleware_retry__WEBPACK_IMPORTED_MODULE_9__.NODE_RETRY_MODE_CONFIG_OPTIONS,
                default: async () => (await defaultConfigProvider()).retryMode || _smithy_util_retry__WEBPACK_IMPORTED_MODULE_13__.DEFAULT_RETRY_MODE,
            }, config),
        sha1: config?.sha1 ?? _smithy_hash_node__WEBPACK_IMPORTED_MODULE_7__.Hash.bind(null, "sha1"),
        sha256: config?.sha256 ?? _smithy_hash_node__WEBPACK_IMPORTED_MODULE_7__.Hash.bind(null, "sha256"),
        sigv4aSigningRegionSet: config?.sigv4aSigningRegionSet ?? (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_10__.loadConfig)(_aws_sdk_core__WEBPACK_IMPORTED_MODULE_19__.NODE_SIGV4A_CONFIG_OPTIONS, profileConfig),
        streamCollector: config?.streamCollector ?? _smithy_node_http_handler__WEBPACK_IMPORTED_MODULE_11__.streamCollector,
        streamHasher: config?.streamHasher ?? _smithy_hash_stream_node__WEBPACK_IMPORTED_MODULE_8__.readableStreamHasher,
        useArnRegion: config?.useArnRegion ?? (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_10__.loadConfig)(_aws_sdk_middleware_bucket_endpoint__WEBPACK_IMPORTED_MODULE_1__.NODE_USE_ARN_REGION_CONFIG_OPTIONS, profileConfig),
        useDualstackEndpoint: config?.useDualstackEndpoint ?? (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_10__.loadConfig)(_smithy_config_resolver__WEBPACK_IMPORTED_MODULE_5__.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS, profileConfig),
        useFipsEndpoint: config?.useFipsEndpoint ?? (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_10__.loadConfig)(_smithy_config_resolver__WEBPACK_IMPORTED_MODULE_5__.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS, profileConfig),
        userAgentAppId: config?.userAgentAppId ?? (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_10__.loadConfig)(_aws_sdk_util_user_agent_node__WEBPACK_IMPORTED_MODULE_4__.NODE_APP_ID_CONFIG_OPTIONS, profileConfig),
    };
};


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/runtimeConfig.shared.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/runtimeConfig.shared.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRuntimeConfig: () => (/* binding */ getRuntimeConfig)
/* harmony export */ });
/* harmony import */ var _aws_sdk_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-sdk/core */ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/AwsSdkSigV4Signer.js");
/* harmony import */ var _aws_sdk_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-sdk/core */ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/AwsSdkSigV4ASigner.js");
/* harmony import */ var _aws_sdk_signature_v4_multi_region__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/signature-v4-multi-region */ "../node_modules/@aws-sdk/signature-v4-multi-region/dist-es/index.js");
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var _smithy_url_parser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/url-parser */ "../node_modules/@smithy/url-parser/dist-es/index.js");
/* harmony import */ var _smithy_util_base64__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @smithy/util-base64 */ "../node_modules/@smithy/util-base64/dist-es/index.js");
/* harmony import */ var _smithy_util_stream__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @smithy/util-stream */ "../node_modules/@smithy/util-stream/dist-es/index.js");
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @smithy/util-utf8 */ "../node_modules/@smithy/util-utf8/dist-es/index.js");
/* harmony import */ var _auth_httpAuthSchemeProvider__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./auth/httpAuthSchemeProvider */ "../node_modules/@aws-sdk/client-s3/dist-es/auth/httpAuthSchemeProvider.js");
/* harmony import */ var _endpoint_endpointResolver__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./endpoint/endpointResolver */ "../node_modules/@aws-sdk/client-s3/dist-es/endpoint/endpointResolver.js");









const getRuntimeConfig = (config) => {
    return {
        apiVersion: "2006-03-01",
        base64Decoder: config?.base64Decoder ?? _smithy_util_base64__WEBPACK_IMPORTED_MODULE_3__.fromBase64,
        base64Encoder: config?.base64Encoder ?? _smithy_util_base64__WEBPACK_IMPORTED_MODULE_3__.toBase64,
        disableHostPrefix: config?.disableHostPrefix ?? false,
        endpointProvider: config?.endpointProvider ?? _endpoint_endpointResolver__WEBPACK_IMPORTED_MODULE_6__.defaultEndpointResolver,
        extensions: config?.extensions ?? [],
        getAwsChunkedEncodingStream: config?.getAwsChunkedEncodingStream ?? _smithy_util_stream__WEBPACK_IMPORTED_MODULE_4__.getAwsChunkedEncodingStream,
        httpAuthSchemeProvider: config?.httpAuthSchemeProvider ?? _auth_httpAuthSchemeProvider__WEBPACK_IMPORTED_MODULE_7__.defaultS3HttpAuthSchemeProvider,
        httpAuthSchemes: config?.httpAuthSchemes ?? [
            {
                schemeId: "aws.auth#sigv4",
                identityProvider: (ipc) => ipc.getIdentityProvider("aws.auth#sigv4"),
                signer: new _aws_sdk_core__WEBPACK_IMPORTED_MODULE_8__.AwsSdkSigV4Signer(),
            },
            {
                schemeId: "aws.auth#sigv4a",
                identityProvider: (ipc) => ipc.getIdentityProvider("aws.auth#sigv4a"),
                signer: new _aws_sdk_core__WEBPACK_IMPORTED_MODULE_9__.AwsSdkSigV4ASigner(),
            },
        ],
        logger: config?.logger ?? new _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_1__.NoOpLogger(),
        sdkStreamMixin: config?.sdkStreamMixin ?? _smithy_util_stream__WEBPACK_IMPORTED_MODULE_4__.sdkStreamMixin,
        serviceId: config?.serviceId ?? "S3",
        signerConstructor: config?.signerConstructor ?? _aws_sdk_signature_v4_multi_region__WEBPACK_IMPORTED_MODULE_0__.SignatureV4MultiRegion,
        signingEscapePath: config?.signingEscapePath ?? false,
        urlParser: config?.urlParser ?? _smithy_url_parser__WEBPACK_IMPORTED_MODULE_2__.parseUrl,
        useArnRegion: config?.useArnRegion ?? false,
        utf8Decoder: config?.utf8Decoder ?? _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_5__.fromUtf8,
        utf8Encoder: config?.utf8Encoder ?? _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_5__.toUtf8,
    };
};


/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/dist-es/runtimeExtensions.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/dist-es/runtimeExtensions.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveRuntimeExtensions: () => (/* binding */ resolveRuntimeExtensions)
/* harmony export */ });
/* harmony import */ var _aws_sdk_region_config_resolver__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/region-config-resolver */ "../node_modules/@aws-sdk/region-config-resolver/dist-es/index.js");
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var _auth_httpAuthExtensionConfiguration__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./auth/httpAuthExtensionConfiguration */ "../node_modules/@aws-sdk/client-s3/dist-es/auth/httpAuthExtensionConfiguration.js");




const asPartial = (t) => t;
const resolveRuntimeExtensions = (runtimeConfig, extensions) => {
    const extensionConfiguration = {
        ...asPartial((0,_aws_sdk_region_config_resolver__WEBPACK_IMPORTED_MODULE_0__.getAwsRegionExtensionConfiguration)(runtimeConfig)),
        ...asPartial((0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_2__.getDefaultExtensionConfiguration)(runtimeConfig)),
        ...asPartial((0,_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_1__.getHttpHandlerExtensionConfiguration)(runtimeConfig)),
        ...asPartial((0,_auth_httpAuthExtensionConfiguration__WEBPACK_IMPORTED_MODULE_3__.getHttpAuthExtensionConfiguration)(runtimeConfig)),
    };
    extensions.forEach((extension) => extension.configure(extensionConfiguration));
    return {
        ...runtimeConfig,
        ...(0,_aws_sdk_region_config_resolver__WEBPACK_IMPORTED_MODULE_0__.resolveAwsRegionExtensionConfiguration)(extensionConfiguration),
        ...(0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_2__.resolveDefaultRuntimeConfig)(extensionConfiguration),
        ...(0,_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_1__.resolveHttpHandlerRuntimeConfig)(extensionConfiguration),
        ...(0,_auth_httpAuthExtensionConfiguration__WEBPACK_IMPORTED_MODULE_3__.resolveHttpAuthRuntimeConfig)(extensionConfiguration),
    };
};


/***/ }),

/***/ "../node_modules/@aws-sdk/core/dist-es/submodules/client/emitWarningIfUnsupportedVersion.js":
/*!**************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/core/dist-es/submodules/client/emitWarningIfUnsupportedVersion.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   emitWarningIfUnsupportedVersion: () => (/* binding */ emitWarningIfUnsupportedVersion),
/* harmony export */   state: () => (/* binding */ state)
/* harmony export */ });
const state = {
    warningEmitted: false,
};
const emitWarningIfUnsupportedVersion = (version) => {
    if (version && !state.warningEmitted && parseInt(version.substring(1, version.indexOf("."))) < 18) {
        state.warningEmitted = true;
        process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`);
    }
};


/***/ }),

/***/ "../node_modules/@aws-sdk/core/dist-es/submodules/client/setCredentialFeature.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/core/dist-es/submodules/client/setCredentialFeature.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   setCredentialFeature: () => (/* binding */ setCredentialFeature)
/* harmony export */ });
function setCredentialFeature(credentials, feature, value) {
    if (!credentials.$source) {
        credentials.$source = {};
    }
    credentials.$source[feature] = value;
    return credentials;
}


/***/ }),

/***/ "../node_modules/@aws-sdk/core/dist-es/submodules/client/setFeature.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@aws-sdk/core/dist-es/submodules/client/setFeature.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   setFeature: () => (/* binding */ setFeature)
/* harmony export */ });
function setFeature(context, feature, value) {
    if (!context.__aws_sdk_context) {
        context.__aws_sdk_context = {
            features: {},
        };
    }
    else if (!context.__aws_sdk_context.features) {
        context.__aws_sdk_context.features = {};
    }
    context.__aws_sdk_context.features[feature] = value;
}


/***/ }),

/***/ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/AwsSdkSigV4ASigner.js":
/*!******************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/AwsSdkSigV4ASigner.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AwsSdkSigV4ASigner: () => (/* binding */ AwsSdkSigV4ASigner)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/getSkewCorrectedDate.js");
/* harmony import */ var _AwsSdkSigV4Signer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AwsSdkSigV4Signer */ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/AwsSdkSigV4Signer.js");



class AwsSdkSigV4ASigner extends _AwsSdkSigV4Signer__WEBPACK_IMPORTED_MODULE_1__.AwsSdkSigV4Signer {
    async sign(httpRequest, identity, signingProperties) {
        if (!_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(httpRequest)) {
            throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");
        }
        const { config, signer, signingRegion, signingRegionSet, signingName } = await (0,_AwsSdkSigV4Signer__WEBPACK_IMPORTED_MODULE_1__.validateSigningProperties)(signingProperties);
        const configResolvedSigningRegionSet = await config.sigv4aSigningRegionSet?.();
        const multiRegionOverride = (configResolvedSigningRegionSet ??
            signingRegionSet ?? [signingRegion]).join(",");
        const signedRequest = await signer.sign(httpRequest, {
            signingDate: (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getSkewCorrectedDate)(config.systemClockOffset),
            signingRegion: multiRegionOverride,
            signingService: signingName,
        });
        return signedRequest;
    }
}


/***/ }),

/***/ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/AwsSdkSigV4Signer.js":
/*!*****************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/AwsSdkSigV4Signer.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AWSSDKSigV4Signer: () => (/* binding */ AWSSDKSigV4Signer),
/* harmony export */   AwsSdkSigV4Signer: () => (/* binding */ AwsSdkSigV4Signer),
/* harmony export */   validateSigningProperties: () => (/* binding */ validateSigningProperties)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/getSkewCorrectedDate.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/getDateHeader.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/getUpdatedSystemClockOffset.js");


const throwSigningPropertyError = (name, property) => {
    if (!property) {
        throw new Error(`Property \`${name}\` is not resolved for AWS SDK SigV4Auth`);
    }
    return property;
};
const validateSigningProperties = async (signingProperties) => {
    const context = throwSigningPropertyError("context", signingProperties.context);
    const config = throwSigningPropertyError("config", signingProperties.config);
    const authScheme = context.endpointV2?.properties?.authSchemes?.[0];
    const signerFunction = throwSigningPropertyError("signer", config.signer);
    const signer = await signerFunction(authScheme);
    const signingRegion = signingProperties?.signingRegion;
    const signingRegionSet = signingProperties?.signingRegionSet;
    const signingName = signingProperties?.signingName;
    return {
        config,
        signer,
        signingRegion,
        signingRegionSet,
        signingName,
    };
};
class AwsSdkSigV4Signer {
    async sign(httpRequest, identity, signingProperties) {
        if (!_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(httpRequest)) {
            throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");
        }
        const validatedProps = await validateSigningProperties(signingProperties);
        const { config, signer } = validatedProps;
        let { signingRegion, signingName } = validatedProps;
        const handlerExecutionContext = signingProperties.context;
        if (handlerExecutionContext?.authSchemes?.length ?? 0 > 1) {
            const [first, second] = handlerExecutionContext.authSchemes;
            if (first?.name === "sigv4a" && second?.name === "sigv4") {
                signingRegion = second?.signingRegion ?? signingRegion;
                signingName = second?.signingName ?? signingName;
            }
        }
        const signedRequest = await signer.sign(httpRequest, {
            signingDate: (0,_utils__WEBPACK_IMPORTED_MODULE_1__.getSkewCorrectedDate)(config.systemClockOffset),
            signingRegion: signingRegion,
            signingService: signingName,
        });
        return signedRequest;
    }
    errorHandler(signingProperties) {
        return (error) => {
            const serverTime = error.ServerTime ?? (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getDateHeader)(error.$response);
            if (serverTime) {
                const config = throwSigningPropertyError("config", signingProperties.config);
                const initialSystemClockOffset = config.systemClockOffset;
                config.systemClockOffset = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.getUpdatedSystemClockOffset)(serverTime, config.systemClockOffset);
                const clockSkewCorrected = config.systemClockOffset !== initialSystemClockOffset;
                if (clockSkewCorrected && error.$metadata) {
                    error.$metadata.clockSkewCorrected = true;
                }
            }
            throw error;
        };
    }
    successHandler(httpResponse, signingProperties) {
        const dateHeader = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getDateHeader)(httpResponse);
        if (dateHeader) {
            const config = throwSigningPropertyError("config", signingProperties.config);
            config.systemClockOffset = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.getUpdatedSystemClockOffset)(dateHeader, config.systemClockOffset);
        }
    }
}
const AWSSDKSigV4Signer = AwsSdkSigV4Signer;


/***/ }),

/***/ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/resolveAwsSdkSigV4AConfig.js":
/*!*************************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/resolveAwsSdkSigV4AConfig.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_SIGV4A_CONFIG_OPTIONS: () => (/* binding */ NODE_SIGV4A_CONFIG_OPTIONS),
/* harmony export */   resolveAwsSdkSigV4AConfig: () => (/* binding */ resolveAwsSdkSigV4AConfig)
/* harmony export */ });
/* harmony import */ var _smithy_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/core */ "../node_modules/@smithy/core/dist-es/index.js");
/* harmony import */ var _smithy_property_provider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/property-provider */ "../node_modules/@smithy/property-provider/dist-es/index.js");


const resolveAwsSdkSigV4AConfig = (config) => {
    config.sigv4aSigningRegionSet = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(config.sigv4aSigningRegionSet);
    return config;
};
const NODE_SIGV4A_CONFIG_OPTIONS = {
    environmentVariableSelector(env) {
        if (env.AWS_SIGV4A_SIGNING_REGION_SET) {
            return env.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map((_) => _.trim());
        }
        throw new _smithy_property_provider__WEBPACK_IMPORTED_MODULE_1__.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.", {
            tryNextLink: true,
        });
    },
    configFileSelector(profile) {
        if (profile.sigv4a_signing_region_set) {
            return (profile.sigv4a_signing_region_set ?? "").split(",").map((_) => _.trim());
        }
        throw new _smithy_property_provider__WEBPACK_IMPORTED_MODULE_1__.ProviderError("sigv4a_signing_region_set not set in profile.", {
            tryNextLink: true,
        });
    },
    default: undefined,
};


/***/ }),

/***/ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/resolveAwsSdkSigV4Config.js":
/*!************************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/resolveAwsSdkSigV4Config.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveAWSSDKSigV4Config: () => (/* binding */ resolveAWSSDKSigV4Config),
/* harmony export */   resolveAwsSdkSigV4Config: () => (/* binding */ resolveAwsSdkSigV4Config)
/* harmony export */ });
/* harmony import */ var _aws_sdk_core_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/core/client */ "../node_modules/@aws-sdk/core/dist-es/submodules/client/setCredentialFeature.js");
/* harmony import */ var _smithy_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/core */ "../node_modules/@smithy/core/dist-es/index.js");
/* harmony import */ var _smithy_signature_v4__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/signature-v4 */ "../node_modules/@smithy/signature-v4/dist-es/index.js");



const resolveAwsSdkSigV4Config = (config) => {
    let isUserSupplied = false;
    let credentialsProvider;
    if (config.credentials) {
        isUserSupplied = true;
        credentialsProvider = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_0__.memoizeIdentityProvider)(config.credentials, _smithy_core__WEBPACK_IMPORTED_MODULE_0__.isIdentityExpired, _smithy_core__WEBPACK_IMPORTED_MODULE_0__.doesIdentityRequireRefresh);
    }
    if (!credentialsProvider) {
        if (config.credentialDefaultProvider) {
            credentialsProvider = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(config.credentialDefaultProvider(Object.assign({}, config, {
                parentClientConfig: config,
            })));
        }
        else {
            credentialsProvider = async () => {
                throw new Error("`credentials` is missing");
            };
        }
    }
    const boundCredentialsProvider = async () => credentialsProvider({ callerClientConfig: config });
    const { signingEscapePath = true, systemClockOffset = config.systemClockOffset || 0, sha256, } = config;
    let signer;
    if (config.signer) {
        signer = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(config.signer);
    }
    else if (config.regionInfoProvider) {
        signer = () => (0,_smithy_core__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(config.region)()
            .then(async (region) => [
            (await config.regionInfoProvider(region, {
                useFipsEndpoint: await config.useFipsEndpoint(),
                useDualstackEndpoint: await config.useDualstackEndpoint(),
            })) || {},
            region,
        ])
            .then(([regionInfo, region]) => {
            const { signingRegion, signingService } = regionInfo;
            config.signingRegion = config.signingRegion || signingRegion || region;
            config.signingName = config.signingName || signingService || config.serviceId;
            const params = {
                ...config,
                credentials: boundCredentialsProvider,
                region: config.signingRegion,
                service: config.signingName,
                sha256,
                uriEscapePath: signingEscapePath,
            };
            const SignerCtor = config.signerConstructor || _smithy_signature_v4__WEBPACK_IMPORTED_MODULE_1__.SignatureV4;
            return new SignerCtor(params);
        });
    }
    else {
        signer = async (authScheme) => {
            authScheme = Object.assign({}, {
                name: "sigv4",
                signingName: config.signingName || config.defaultSigningName,
                signingRegion: await (0,_smithy_core__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(config.region)(),
                properties: {},
            }, authScheme);
            const signingRegion = authScheme.signingRegion;
            const signingService = authScheme.signingName;
            config.signingRegion = config.signingRegion || signingRegion;
            config.signingName = config.signingName || signingService || config.serviceId;
            const params = {
                ...config,
                credentials: boundCredentialsProvider,
                region: config.signingRegion,
                service: config.signingName,
                sha256,
                uriEscapePath: signingEscapePath,
            };
            const SignerCtor = config.signerConstructor || _smithy_signature_v4__WEBPACK_IMPORTED_MODULE_1__.SignatureV4;
            return new SignerCtor(params);
        };
    }
    return {
        ...config,
        systemClockOffset,
        signingEscapePath,
        credentials: isUserSupplied
            ? async () => boundCredentialsProvider().then((creds) => (0,_aws_sdk_core_client__WEBPACK_IMPORTED_MODULE_2__.setCredentialFeature)(creds, "CREDENTIALS_CODE", "e"))
            : boundCredentialsProvider,
        signer,
    };
};
const resolveAWSSDKSigV4Config = resolveAwsSdkSigV4Config;


/***/ }),

/***/ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/getDateHeader.js":
/*!***********************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/getDateHeader.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDateHeader: () => (/* binding */ getDateHeader)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");

const getDateHeader = (response) => _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpResponse.isInstance(response) ? response.headers?.date ?? response.headers?.Date : undefined;


/***/ }),

/***/ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/getSkewCorrectedDate.js":
/*!******************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/getSkewCorrectedDate.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSkewCorrectedDate: () => (/* binding */ getSkewCorrectedDate)
/* harmony export */ });
const getSkewCorrectedDate = (systemClockOffset) => new Date(Date.now() + systemClockOffset);


/***/ }),

/***/ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/getUpdatedSystemClockOffset.js":
/*!*************************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/getUpdatedSystemClockOffset.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getUpdatedSystemClockOffset: () => (/* binding */ getUpdatedSystemClockOffset)
/* harmony export */ });
/* harmony import */ var _isClockSkewed__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isClockSkewed */ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/isClockSkewed.js");

const getUpdatedSystemClockOffset = (clockTime, currentSystemClockOffset) => {
    const clockTimeInMs = Date.parse(clockTime);
    if ((0,_isClockSkewed__WEBPACK_IMPORTED_MODULE_0__.isClockSkewed)(clockTimeInMs, currentSystemClockOffset)) {
        return clockTimeInMs - Date.now();
    }
    return currentSystemClockOffset;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/isClockSkewed.js":
/*!***********************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/isClockSkewed.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isClockSkewed: () => (/* binding */ isClockSkewed)
/* harmony export */ });
/* harmony import */ var _getSkewCorrectedDate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getSkewCorrectedDate */ "../node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/utils/getSkewCorrectedDate.js");

const isClockSkewed = (clockTime, systemClockOffset) => Math.abs((0,_getSkewCorrectedDate__WEBPACK_IMPORTED_MODULE_0__.getSkewCorrectedDate)(systemClockOffset).getTime() - clockTime) >= 300000;


/***/ }),

/***/ "../node_modules/@aws-sdk/core/dist-es/submodules/protocols/common.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@aws-sdk/core/dist-es/submodules/protocols/common.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   collectBodyString: () => (/* binding */ collectBodyString)
/* harmony export */ });
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");

const collectBodyString = (streamBody, context) => (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.collectBody)(streamBody, context).then((body) => context.utf8Encoder(body));


/***/ }),

/***/ "../node_modules/@aws-sdk/core/dist-es/submodules/protocols/xml/parseXmlBody.js":
/*!**************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/core/dist-es/submodules/protocols/xml/parseXmlBody.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   loadRestXmlErrorCode: () => (/* binding */ loadRestXmlErrorCode),
/* harmony export */   parseXmlBody: () => (/* binding */ parseXmlBody),
/* harmony export */   parseXmlErrorBody: () => (/* binding */ parseXmlErrorBody)
/* harmony export */ });
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fast-xml-parser */ "fast-xml-parser");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fast_xml_parser__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common */ "../node_modules/@aws-sdk/core/dist-es/submodules/protocols/common.js");



const parseXmlBody = (streamBody, context) => (0,_common__WEBPACK_IMPORTED_MODULE_2__.collectBodyString)(streamBody, context).then((encoded) => {
    if (encoded.length) {
        const parser = new fast_xml_parser__WEBPACK_IMPORTED_MODULE_1__.XMLParser({
            attributeNamePrefix: "",
            htmlEntities: true,
            ignoreAttributes: false,
            ignoreDeclaration: true,
            parseTagValue: false,
            trimValues: false,
            tagValueProcessor: (_, val) => (val.trim() === "" && val.includes("\n") ? "" : undefined),
        });
        parser.addEntity("#xD", "\r");
        parser.addEntity("#10", "\n");
        let parsedObj;
        try {
            parsedObj = parser.parse(encoded, true);
        }
        catch (e) {
            if (e && typeof e === "object") {
                Object.defineProperty(e, "$responseBodyText", {
                    value: encoded,
                });
            }
            throw e;
        }
        const textNodeName = "#text";
        const key = Object.keys(parsedObj)[0];
        const parsedObjToReturn = parsedObj[key];
        if (parsedObjToReturn[textNodeName]) {
            parsedObjToReturn[key] = parsedObjToReturn[textNodeName];
            delete parsedObjToReturn[textNodeName];
        }
        return (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_0__.getValueFromTextNode)(parsedObjToReturn);
    }
    return {};
});
const parseXmlErrorBody = async (errorBody, context) => {
    const value = await parseXmlBody(errorBody, context);
    if (value.Error) {
        value.Error.message = value.Error.message ?? value.Error.Message;
    }
    return value;
};
const loadRestXmlErrorCode = (output, data) => {
    if (data?.Error?.Code !== undefined) {
        return data.Error.Code;
    }
    if (data?.Code !== undefined) {
        return data.Code;
    }
    if (output.statusCode == 404) {
        return "NotFound";
    }
};


/***/ }),

/***/ "../node_modules/@aws-sdk/credential-provider-env/dist-es/fromEnv.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@aws-sdk/credential-provider-env/dist-es/fromEnv.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ENV_ACCOUNT_ID: () => (/* binding */ ENV_ACCOUNT_ID),
/* harmony export */   ENV_CREDENTIAL_SCOPE: () => (/* binding */ ENV_CREDENTIAL_SCOPE),
/* harmony export */   ENV_EXPIRATION: () => (/* binding */ ENV_EXPIRATION),
/* harmony export */   ENV_KEY: () => (/* binding */ ENV_KEY),
/* harmony export */   ENV_SECRET: () => (/* binding */ ENV_SECRET),
/* harmony export */   ENV_SESSION: () => (/* binding */ ENV_SESSION),
/* harmony export */   fromEnv: () => (/* binding */ fromEnv)
/* harmony export */ });
/* harmony import */ var _aws_sdk_core_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/core/client */ "../node_modules/@aws-sdk/core/dist-es/submodules/client/setCredentialFeature.js");
/* harmony import */ var _smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/property-provider */ "../node_modules/@smithy/property-provider/dist-es/index.js");


const ENV_KEY = "AWS_ACCESS_KEY_ID";
const ENV_SECRET = "AWS_SECRET_ACCESS_KEY";
const ENV_SESSION = "AWS_SESSION_TOKEN";
const ENV_EXPIRATION = "AWS_CREDENTIAL_EXPIRATION";
const ENV_CREDENTIAL_SCOPE = "AWS_CREDENTIAL_SCOPE";
const ENV_ACCOUNT_ID = "AWS_ACCOUNT_ID";
const fromEnv = (init) => async () => {
    init?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");
    const accessKeyId = process.env[ENV_KEY];
    const secretAccessKey = process.env[ENV_SECRET];
    const sessionToken = process.env[ENV_SESSION];
    const expiry = process.env[ENV_EXPIRATION];
    const credentialScope = process.env[ENV_CREDENTIAL_SCOPE];
    const accountId = process.env[ENV_ACCOUNT_ID];
    if (accessKeyId && secretAccessKey) {
        const credentials = {
            accessKeyId,
            secretAccessKey,
            ...(sessionToken && { sessionToken }),
            ...(expiry && { expiration: new Date(expiry) }),
            ...(credentialScope && { credentialScope }),
            ...(accountId && { accountId }),
        };
        (0,_aws_sdk_core_client__WEBPACK_IMPORTED_MODULE_1__.setCredentialFeature)(credentials, "CREDENTIALS_ENV_VARS", "g");
        return credentials;
    }
    throw new _smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__.CredentialsProviderError("Unable to find environment variable credentials.", { logger: init?.logger });
};


/***/ }),

/***/ "../node_modules/@aws-sdk/credential-provider-env/dist-es/index.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@aws-sdk/credential-provider-env/dist-es/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ENV_ACCOUNT_ID: () => (/* reexport safe */ _fromEnv__WEBPACK_IMPORTED_MODULE_0__.ENV_ACCOUNT_ID),
/* harmony export */   ENV_CREDENTIAL_SCOPE: () => (/* reexport safe */ _fromEnv__WEBPACK_IMPORTED_MODULE_0__.ENV_CREDENTIAL_SCOPE),
/* harmony export */   ENV_EXPIRATION: () => (/* reexport safe */ _fromEnv__WEBPACK_IMPORTED_MODULE_0__.ENV_EXPIRATION),
/* harmony export */   ENV_KEY: () => (/* reexport safe */ _fromEnv__WEBPACK_IMPORTED_MODULE_0__.ENV_KEY),
/* harmony export */   ENV_SECRET: () => (/* reexport safe */ _fromEnv__WEBPACK_IMPORTED_MODULE_0__.ENV_SECRET),
/* harmony export */   ENV_SESSION: () => (/* reexport safe */ _fromEnv__WEBPACK_IMPORTED_MODULE_0__.ENV_SESSION),
/* harmony export */   fromEnv: () => (/* reexport safe */ _fromEnv__WEBPACK_IMPORTED_MODULE_0__.fromEnv)
/* harmony export */ });
/* harmony import */ var _fromEnv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fromEnv */ "../node_modules/@aws-sdk/credential-provider-env/dist-es/fromEnv.js");



/***/ }),

/***/ "../node_modules/@aws-sdk/credential-provider-node/dist-es/defaultProvider.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/credential-provider-node/dist-es/defaultProvider.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   credentialsTreatedAsExpired: () => (/* binding */ credentialsTreatedAsExpired),
/* harmony export */   credentialsWillNeedRefresh: () => (/* binding */ credentialsWillNeedRefresh),
/* harmony export */   defaultProvider: () => (/* binding */ defaultProvider)
/* harmony export */ });
/* harmony import */ var _aws_sdk_credential_provider_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/credential-provider-env */ "../node_modules/@aws-sdk/credential-provider-env/dist-es/index.js");
/* harmony import */ var _smithy_property_provider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/property-provider */ "../node_modules/@smithy/property-provider/dist-es/index.js");
/* harmony import */ var _smithy_shared_ini_file_loader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/shared-ini-file-loader */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/index.js");
/* harmony import */ var _remoteProvider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./remoteProvider */ "../node_modules/@aws-sdk/credential-provider-node/dist-es/remoteProvider.js");




let multipleCredentialSourceWarningEmitted = false;
const defaultProvider = (init = {}) => (0,_smithy_property_provider__WEBPACK_IMPORTED_MODULE_1__.memoize)((0,_smithy_property_provider__WEBPACK_IMPORTED_MODULE_1__.chain)(async () => {
    const profile = init.profile ?? process.env[_smithy_shared_ini_file_loader__WEBPACK_IMPORTED_MODULE_2__.ENV_PROFILE];
    if (profile) {
        const envStaticCredentialsAreSet = process.env[_aws_sdk_credential_provider_env__WEBPACK_IMPORTED_MODULE_0__.ENV_KEY] && process.env[_aws_sdk_credential_provider_env__WEBPACK_IMPORTED_MODULE_0__.ENV_SECRET];
        if (envStaticCredentialsAreSet) {
            if (!multipleCredentialSourceWarningEmitted) {
                const warnFn = init.logger?.warn && init.logger?.constructor?.name !== "NoOpLogger" ? init.logger.warn : console.warn;
                warnFn(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`);
                multipleCredentialSourceWarningEmitted = true;
            }
        }
        throw new _smithy_property_provider__WEBPACK_IMPORTED_MODULE_1__.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.", {
            logger: init.logger,
            tryNextLink: true,
        });
    }
    init.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv");
    return (0,_aws_sdk_credential_provider_env__WEBPACK_IMPORTED_MODULE_0__.fromEnv)(init)();
}, async () => {
    init.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");
    const { ssoStartUrl, ssoAccountId, ssoRegion, ssoRoleName, ssoSession } = init;
    if (!ssoStartUrl && !ssoAccountId && !ssoRegion && !ssoRoleName && !ssoSession) {
        throw new _smithy_property_provider__WEBPACK_IMPORTED_MODULE_1__.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).", { logger: init.logger });
    }
    const { fromSSO } = await __webpack_require__.e(/*! import() */ "vendors-node_modules_aws-sdk_credential-provider-sso_dist-es_index_js").then(__webpack_require__.bind(__webpack_require__, /*! @aws-sdk/credential-provider-sso */ "../node_modules/@aws-sdk/credential-provider-sso/dist-es/index.js"));
    return fromSSO(init)();
}, async () => {
    init.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");
    const { fromIni } = await __webpack_require__.e(/*! import() */ "vendors-node_modules_aws-sdk_credential-provider-ini_dist-es_index_js").then(__webpack_require__.bind(__webpack_require__, /*! @aws-sdk/credential-provider-ini */ "../node_modules/@aws-sdk/credential-provider-ini/dist-es/index.js"));
    return fromIni(init)();
}, async () => {
    init.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");
    const { fromProcess } = await __webpack_require__.e(/*! import() */ "node_modules_aws-sdk_credential-provider-process_dist-es_index_js").then(__webpack_require__.bind(__webpack_require__, /*! @aws-sdk/credential-provider-process */ "../node_modules/@aws-sdk/credential-provider-process/dist-es/index.js"));
    return fromProcess(init)();
}, async () => {
    init.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");
    const { fromTokenFile } = await __webpack_require__.e(/*! import() */ "node_modules_aws-sdk_credential-provider-web-identity_dist-es_index_js").then(__webpack_require__.bind(__webpack_require__, /*! @aws-sdk/credential-provider-web-identity */ "../node_modules/@aws-sdk/credential-provider-web-identity/dist-es/index.js"));
    return fromTokenFile(init)();
}, async () => {
    init.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider");
    return (await (0,_remoteProvider__WEBPACK_IMPORTED_MODULE_3__.remoteProvider)(init))();
}, async () => {
    throw new _smithy_property_provider__WEBPACK_IMPORTED_MODULE_1__.CredentialsProviderError("Could not load credentials from any providers", {
        tryNextLink: false,
        logger: init.logger,
    });
}), credentialsTreatedAsExpired, credentialsWillNeedRefresh);
const credentialsWillNeedRefresh = (credentials) => credentials?.expiration !== undefined;
const credentialsTreatedAsExpired = (credentials) => credentials?.expiration !== undefined && credentials.expiration.getTime() - Date.now() < 300000;


/***/ }),

/***/ "../node_modules/@aws-sdk/credential-provider-node/dist-es/index.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@aws-sdk/credential-provider-node/dist-es/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   credentialsTreatedAsExpired: () => (/* reexport safe */ _defaultProvider__WEBPACK_IMPORTED_MODULE_0__.credentialsTreatedAsExpired),
/* harmony export */   credentialsWillNeedRefresh: () => (/* reexport safe */ _defaultProvider__WEBPACK_IMPORTED_MODULE_0__.credentialsWillNeedRefresh),
/* harmony export */   defaultProvider: () => (/* reexport safe */ _defaultProvider__WEBPACK_IMPORTED_MODULE_0__.defaultProvider)
/* harmony export */ });
/* harmony import */ var _defaultProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaultProvider */ "../node_modules/@aws-sdk/credential-provider-node/dist-es/defaultProvider.js");



/***/ }),

/***/ "../node_modules/@aws-sdk/credential-provider-node/dist-es/remoteProvider.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/credential-provider-node/dist-es/remoteProvider.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ENV_IMDS_DISABLED: () => (/* binding */ ENV_IMDS_DISABLED),
/* harmony export */   remoteProvider: () => (/* binding */ remoteProvider)
/* harmony export */ });
/* harmony import */ var _smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/property-provider */ "../node_modules/@smithy/property-provider/dist-es/index.js");

const ENV_IMDS_DISABLED = "AWS_EC2_METADATA_DISABLED";
const remoteProvider = async (init) => {
    const { ENV_CMDS_FULL_URI, ENV_CMDS_RELATIVE_URI, fromContainerMetadata, fromInstanceMetadata } = await __webpack_require__.e(/*! import() */ "vendors-node_modules_smithy_credential-provider-imds_dist-es_index_js").then(__webpack_require__.bind(__webpack_require__, /*! @smithy/credential-provider-imds */ "../node_modules/@smithy/credential-provider-imds/dist-es/index.js"));
    if (process.env[ENV_CMDS_RELATIVE_URI] || process.env[ENV_CMDS_FULL_URI]) {
        init.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");
        const { fromHttp } = await __webpack_require__.e(/*! import() */ "node_modules_aws-sdk_credential-provider-http_dist-es_index_js").then(__webpack_require__.bind(__webpack_require__, /*! @aws-sdk/credential-provider-http */ "../node_modules/@aws-sdk/credential-provider-http/dist-es/index.js"));
        return (0,_smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__.chain)(fromHttp(init), fromContainerMetadata(init));
    }
    if (process.env[ENV_IMDS_DISABLED] && process.env[ENV_IMDS_DISABLED] !== "false") {
        return async () => {
            throw new _smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__.CredentialsProviderError("EC2 Instance Metadata Service access disabled", { logger: init.logger });
        };
    }
    init.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata");
    return fromInstanceMetadata(init);
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/NodeDisableMultiregionAccessPointConfigOptions.js":
/*!*********************************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/NodeDisableMultiregionAccessPointConfigOptions.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_DISABLE_MULTIREGION_ACCESS_POINT_CONFIG_OPTIONS: () => (/* binding */ NODE_DISABLE_MULTIREGION_ACCESS_POINT_CONFIG_OPTIONS),
/* harmony export */   NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME: () => (/* binding */ NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME),
/* harmony export */   NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME: () => (/* binding */ NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME)
/* harmony export */ });
/* harmony import */ var _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-config-provider */ "../node_modules/@smithy/util-config-provider/dist-es/index.js");

const NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME = "AWS_S3_DISABLE_MULTIREGION_ACCESS_POINTS";
const NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME = "s3_disable_multiregion_access_points";
const NODE_DISABLE_MULTIREGION_ACCESS_POINT_CONFIG_OPTIONS = {
    environmentVariableSelector: (env) => (0,_smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.booleanSelector)(env, NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME, _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.SelectorType.ENV),
    configFileSelector: (profile) => (0,_smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.booleanSelector)(profile, NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME, _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.SelectorType.CONFIG),
    default: false,
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/NodeUseArnRegionConfigOptions.js":
/*!****************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/NodeUseArnRegionConfigOptions.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_USE_ARN_REGION_CONFIG_OPTIONS: () => (/* binding */ NODE_USE_ARN_REGION_CONFIG_OPTIONS),
/* harmony export */   NODE_USE_ARN_REGION_ENV_NAME: () => (/* binding */ NODE_USE_ARN_REGION_ENV_NAME),
/* harmony export */   NODE_USE_ARN_REGION_INI_NAME: () => (/* binding */ NODE_USE_ARN_REGION_INI_NAME)
/* harmony export */ });
/* harmony import */ var _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-config-provider */ "../node_modules/@smithy/util-config-provider/dist-es/index.js");

const NODE_USE_ARN_REGION_ENV_NAME = "AWS_S3_USE_ARN_REGION";
const NODE_USE_ARN_REGION_INI_NAME = "s3_use_arn_region";
const NODE_USE_ARN_REGION_CONFIG_OPTIONS = {
    environmentVariableSelector: (env) => (0,_smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.booleanSelector)(env, NODE_USE_ARN_REGION_ENV_NAME, _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.SelectorType.ENV),
    configFileSelector: (profile) => (0,_smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.booleanSelector)(profile, NODE_USE_ARN_REGION_INI_NAME, _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.SelectorType.CONFIG),
    default: false,
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/bucketEndpointMiddleware.js":
/*!***********************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/bucketEndpointMiddleware.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   bucketEndpointMiddleware: () => (/* binding */ bucketEndpointMiddleware),
/* harmony export */   bucketEndpointMiddlewareOptions: () => (/* binding */ bucketEndpointMiddlewareOptions),
/* harmony export */   getBucketEndpointPlugin: () => (/* binding */ getBucketEndpointPlugin)
/* harmony export */ });
/* harmony import */ var _aws_sdk_util_arn_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/util-arn-parser */ "../node_modules/@aws-sdk/util-arn-parser/dist-es/index.js");
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _bucketHostname__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bucketHostname */ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/bucketHostname.js");



const bucketEndpointMiddleware = (options) => (next, context) => async (args) => {
    const { Bucket: bucketName } = args.input;
    let replaceBucketInPath = options.bucketEndpoint;
    const request = args.request;
    if (_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_1__.HttpRequest.isInstance(request)) {
        if (options.bucketEndpoint) {
            request.hostname = bucketName;
        }
        else if ((0,_aws_sdk_util_arn_parser__WEBPACK_IMPORTED_MODULE_0__.validate)(bucketName)) {
            const bucketArn = (0,_aws_sdk_util_arn_parser__WEBPACK_IMPORTED_MODULE_0__.parse)(bucketName);
            const clientRegion = await options.region();
            const useDualstackEndpoint = await options.useDualstackEndpoint();
            const useFipsEndpoint = await options.useFipsEndpoint();
            const { partition, signingRegion = clientRegion } = (await options.regionInfoProvider(clientRegion, { useDualstackEndpoint, useFipsEndpoint })) || {};
            const useArnRegion = await options.useArnRegion();
            const { hostname, bucketEndpoint, signingRegion: modifiedSigningRegion, signingService, } = (0,_bucketHostname__WEBPACK_IMPORTED_MODULE_2__.bucketHostname)({
                bucketName: bucketArn,
                baseHostname: request.hostname,
                accelerateEndpoint: options.useAccelerateEndpoint,
                dualstackEndpoint: useDualstackEndpoint,
                fipsEndpoint: useFipsEndpoint,
                pathStyleEndpoint: options.forcePathStyle,
                tlsCompatible: request.protocol === "https:",
                useArnRegion,
                clientPartition: partition,
                clientSigningRegion: signingRegion,
                clientRegion: clientRegion,
                isCustomEndpoint: options.isCustomEndpoint,
                disableMultiregionAccessPoints: await options.disableMultiregionAccessPoints(),
            });
            if (modifiedSigningRegion && modifiedSigningRegion !== signingRegion) {
                context["signing_region"] = modifiedSigningRegion;
            }
            if (signingService && signingService !== "s3") {
                context["signing_service"] = signingService;
            }
            request.hostname = hostname;
            replaceBucketInPath = bucketEndpoint;
        }
        else {
            const clientRegion = await options.region();
            const dualstackEndpoint = await options.useDualstackEndpoint();
            const fipsEndpoint = await options.useFipsEndpoint();
            const { hostname, bucketEndpoint } = (0,_bucketHostname__WEBPACK_IMPORTED_MODULE_2__.bucketHostname)({
                bucketName,
                clientRegion,
                baseHostname: request.hostname,
                accelerateEndpoint: options.useAccelerateEndpoint,
                dualstackEndpoint,
                fipsEndpoint,
                pathStyleEndpoint: options.forcePathStyle,
                tlsCompatible: request.protocol === "https:",
                isCustomEndpoint: options.isCustomEndpoint,
            });
            request.hostname = hostname;
            replaceBucketInPath = bucketEndpoint;
        }
        if (replaceBucketInPath) {
            request.path = request.path.replace(/^(\/)?[^\/]+/, "");
            if (request.path === "") {
                request.path = "/";
            }
        }
    }
    return next({ ...args, request });
};
const bucketEndpointMiddlewareOptions = {
    tags: ["BUCKET_ENDPOINT"],
    name: "bucketEndpointMiddleware",
    relation: "before",
    toMiddleware: "hostHeaderMiddleware",
    override: true,
};
const getBucketEndpointPlugin = (options) => ({
    applyToStack: (clientStack) => {
        clientStack.addRelativeTo(bucketEndpointMiddleware(options), bucketEndpointMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/bucketHostname.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/bucketHostname.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   bucketHostname: () => (/* binding */ bucketHostname)
/* harmony export */ });
/* harmony import */ var _bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bucketHostnameUtils */ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/bucketHostnameUtils.js");

const bucketHostname = (options) => {
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateCustomEndpoint)(options);
    return (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.isBucketNameOptions)(options)
        ?
            getEndpointFromBucketName(options)
        :
            getEndpointFromArn(options);
};
const getEndpointFromBucketName = ({ accelerateEndpoint = false, clientRegion: region, baseHostname, bucketName, dualstackEndpoint = false, fipsEndpoint = false, pathStyleEndpoint = false, tlsCompatible = true, isCustomEndpoint = false, }) => {
    const [clientRegion, hostnameSuffix] = isCustomEndpoint ? [region, baseHostname] : (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.getSuffix)(baseHostname);
    if (pathStyleEndpoint || !(0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.isDnsCompatibleBucketName)(bucketName) || (tlsCompatible && _bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.DOT_PATTERN.test(bucketName))) {
        return {
            bucketEndpoint: false,
            hostname: dualstackEndpoint ? `s3.dualstack.${clientRegion}.${hostnameSuffix}` : baseHostname,
        };
    }
    if (accelerateEndpoint) {
        baseHostname = `s3-accelerate${dualstackEndpoint ? ".dualstack" : ""}.${hostnameSuffix}`;
    }
    else if (dualstackEndpoint) {
        baseHostname = `s3.dualstack.${clientRegion}.${hostnameSuffix}`;
    }
    return {
        bucketEndpoint: true,
        hostname: `${bucketName}.${baseHostname}`,
    };
};
const getEndpointFromArn = (options) => {
    const { isCustomEndpoint, baseHostname, clientRegion } = options;
    const hostnameSuffix = isCustomEndpoint ? baseHostname : (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.getSuffixForArnEndpoint)(baseHostname)[1];
    const { pathStyleEndpoint, accelerateEndpoint = false, fipsEndpoint = false, tlsCompatible = true, bucketName, clientPartition = "aws", } = options;
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateArnEndpointOptions)({ pathStyleEndpoint, accelerateEndpoint, tlsCompatible });
    const { service, partition, accountId, region, resource } = bucketName;
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateService)(service);
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validatePartition)(partition, { clientPartition });
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateAccountId)(accountId);
    const { accesspointName, outpostId } = (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.getArnResources)(resource);
    if (service === "s3-object-lambda") {
        return getEndpointFromObjectLambdaArn({ ...options, tlsCompatible, bucketName, accesspointName, hostnameSuffix });
    }
    if (region === "") {
        return getEndpointFromMRAPArn({ ...options, clientRegion, mrapAlias: accesspointName, hostnameSuffix });
    }
    if (outpostId) {
        return getEndpointFromOutpostArn({ ...options, clientRegion, outpostId, accesspointName, hostnameSuffix });
    }
    return getEndpointFromAccessPointArn({ ...options, clientRegion, accesspointName, hostnameSuffix });
};
const getEndpointFromObjectLambdaArn = ({ dualstackEndpoint = false, fipsEndpoint = false, tlsCompatible = true, useArnRegion, clientRegion, clientSigningRegion = clientRegion, accesspointName, bucketName, hostnameSuffix, }) => {
    const { accountId, region, service } = bucketName;
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateRegionalClient)(clientRegion);
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateRegion)(region, {
        useArnRegion,
        clientRegion,
        clientSigningRegion,
        allowFipsRegion: true,
        useFipsEndpoint: fipsEndpoint,
    });
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateNoDualstack)(dualstackEndpoint);
    const DNSHostLabel = `${accesspointName}-${accountId}`;
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateDNSHostLabel)(DNSHostLabel, { tlsCompatible });
    const endpointRegion = useArnRegion ? region : clientRegion;
    const signingRegion = useArnRegion ? region : clientSigningRegion;
    return {
        bucketEndpoint: true,
        hostname: `${DNSHostLabel}.${service}${fipsEndpoint ? "-fips" : ""}.${endpointRegion}.${hostnameSuffix}`,
        signingRegion,
        signingService: service,
    };
};
const getEndpointFromMRAPArn = ({ disableMultiregionAccessPoints, dualstackEndpoint = false, isCustomEndpoint, mrapAlias, hostnameSuffix, }) => {
    if (disableMultiregionAccessPoints === true) {
        throw new Error("SDK is attempting to use a MRAP ARN. Please enable to feature.");
    }
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateMrapAlias)(mrapAlias);
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateNoDualstack)(dualstackEndpoint);
    return {
        bucketEndpoint: true,
        hostname: `${mrapAlias}${isCustomEndpoint ? "" : `.accesspoint.s3-global`}.${hostnameSuffix}`,
        signingRegion: "*",
    };
};
const getEndpointFromOutpostArn = ({ useArnRegion, clientRegion, clientSigningRegion = clientRegion, bucketName, outpostId, dualstackEndpoint = false, fipsEndpoint = false, tlsCompatible = true, accesspointName, isCustomEndpoint, hostnameSuffix, }) => {
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateRegionalClient)(clientRegion);
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateRegion)(bucketName.region, { useArnRegion, clientRegion, clientSigningRegion, useFipsEndpoint: fipsEndpoint });
    const DNSHostLabel = `${accesspointName}-${bucketName.accountId}`;
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateDNSHostLabel)(DNSHostLabel, { tlsCompatible });
    const endpointRegion = useArnRegion ? bucketName.region : clientRegion;
    const signingRegion = useArnRegion ? bucketName.region : clientSigningRegion;
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateOutpostService)(bucketName.service);
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateDNSHostLabel)(outpostId, { tlsCompatible });
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateNoDualstack)(dualstackEndpoint);
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateNoFIPS)(fipsEndpoint);
    const hostnamePrefix = `${DNSHostLabel}.${outpostId}`;
    return {
        bucketEndpoint: true,
        hostname: `${hostnamePrefix}${isCustomEndpoint ? "" : `.s3-outposts.${endpointRegion}`}.${hostnameSuffix}`,
        signingRegion,
        signingService: "s3-outposts",
    };
};
const getEndpointFromAccessPointArn = ({ useArnRegion, clientRegion, clientSigningRegion = clientRegion, bucketName, dualstackEndpoint = false, fipsEndpoint = false, tlsCompatible = true, accesspointName, isCustomEndpoint, hostnameSuffix, }) => {
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateRegionalClient)(clientRegion);
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateRegion)(bucketName.region, {
        useArnRegion,
        clientRegion,
        clientSigningRegion,
        allowFipsRegion: true,
        useFipsEndpoint: fipsEndpoint,
    });
    const hostnamePrefix = `${accesspointName}-${bucketName.accountId}`;
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateDNSHostLabel)(hostnamePrefix, { tlsCompatible });
    const endpointRegion = useArnRegion ? bucketName.region : clientRegion;
    const signingRegion = useArnRegion ? bucketName.region : clientSigningRegion;
    (0,_bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_0__.validateS3Service)(bucketName.service);
    return {
        bucketEndpoint: true,
        hostname: `${hostnamePrefix}${isCustomEndpoint
            ? ""
            : `.s3-accesspoint${fipsEndpoint ? "-fips" : ""}${dualstackEndpoint ? ".dualstack" : ""}.${endpointRegion}`}.${hostnameSuffix}`,
        signingRegion,
    };
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/bucketHostnameUtils.js":
/*!******************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/bucketHostnameUtils.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DOT_PATTERN: () => (/* binding */ DOT_PATTERN),
/* harmony export */   S3_HOSTNAME_PATTERN: () => (/* binding */ S3_HOSTNAME_PATTERN),
/* harmony export */   getArnResources: () => (/* binding */ getArnResources),
/* harmony export */   getSuffix: () => (/* binding */ getSuffix),
/* harmony export */   getSuffixForArnEndpoint: () => (/* binding */ getSuffixForArnEndpoint),
/* harmony export */   isBucketNameOptions: () => (/* binding */ isBucketNameOptions),
/* harmony export */   isDnsCompatibleBucketName: () => (/* binding */ isDnsCompatibleBucketName),
/* harmony export */   validateAccountId: () => (/* binding */ validateAccountId),
/* harmony export */   validateArnEndpointOptions: () => (/* binding */ validateArnEndpointOptions),
/* harmony export */   validateCustomEndpoint: () => (/* binding */ validateCustomEndpoint),
/* harmony export */   validateDNSHostLabel: () => (/* binding */ validateDNSHostLabel),
/* harmony export */   validateMrapAlias: () => (/* binding */ validateMrapAlias),
/* harmony export */   validateNoDualstack: () => (/* binding */ validateNoDualstack),
/* harmony export */   validateNoFIPS: () => (/* binding */ validateNoFIPS),
/* harmony export */   validateOutpostService: () => (/* binding */ validateOutpostService),
/* harmony export */   validatePartition: () => (/* binding */ validatePartition),
/* harmony export */   validateRegion: () => (/* binding */ validateRegion),
/* harmony export */   validateRegionalClient: () => (/* binding */ validateRegionalClient),
/* harmony export */   validateS3Service: () => (/* binding */ validateS3Service),
/* harmony export */   validateService: () => (/* binding */ validateService)
/* harmony export */ });
const DOMAIN_PATTERN = /^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/;
const IP_ADDRESS_PATTERN = /(\d+\.){3}\d+/;
const DOTS_PATTERN = /\.\./;
const DOT_PATTERN = /\./;
const S3_HOSTNAME_PATTERN = /^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./;
const S3_US_EAST_1_ALTNAME_PATTERN = /^s3(-external-1)?\.amazonaws\.com$/;
const AWS_PARTITION_SUFFIX = "amazonaws.com";
const isBucketNameOptions = (options) => typeof options.bucketName === "string";
const isDnsCompatibleBucketName = (bucketName) => DOMAIN_PATTERN.test(bucketName) && !IP_ADDRESS_PATTERN.test(bucketName) && !DOTS_PATTERN.test(bucketName);
const getRegionalSuffix = (hostname) => {
    const parts = hostname.match(S3_HOSTNAME_PATTERN);
    return [parts[4], hostname.replace(new RegExp(`^${parts[0]}`), "")];
};
const getSuffix = (hostname) => S3_US_EAST_1_ALTNAME_PATTERN.test(hostname) ? ["us-east-1", AWS_PARTITION_SUFFIX] : getRegionalSuffix(hostname);
const getSuffixForArnEndpoint = (hostname) => S3_US_EAST_1_ALTNAME_PATTERN.test(hostname)
    ? [hostname.replace(`.${AWS_PARTITION_SUFFIX}`, ""), AWS_PARTITION_SUFFIX]
    : getRegionalSuffix(hostname);
const validateArnEndpointOptions = (options) => {
    if (options.pathStyleEndpoint) {
        throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");
    }
    if (options.accelerateEndpoint) {
        throw new Error("Accelerate endpoint is not supported when bucket is an ARN");
    }
    if (!options.tlsCompatible) {
        throw new Error("HTTPS is required when bucket is an ARN");
    }
};
const validateService = (service) => {
    if (service !== "s3" && service !== "s3-outposts" && service !== "s3-object-lambda") {
        throw new Error("Expect 's3' or 's3-outposts' or 's3-object-lambda' in ARN service component");
    }
};
const validateS3Service = (service) => {
    if (service !== "s3") {
        throw new Error("Expect 's3' in Accesspoint ARN service component");
    }
};
const validateOutpostService = (service) => {
    if (service !== "s3-outposts") {
        throw new Error("Expect 's3-posts' in Outpost ARN service component");
    }
};
const validatePartition = (partition, options) => {
    if (partition !== options.clientPartition) {
        throw new Error(`Partition in ARN is incompatible, got "${partition}" but expected "${options.clientPartition}"`);
    }
};
const validateRegion = (region, options) => {
    if (region === "") {
        throw new Error("ARN region is empty");
    }
    if (options.useFipsEndpoint) {
        if (!options.allowFipsRegion) {
            throw new Error("FIPS region is not supported");
        }
        else if (!isEqualRegions(region, options.clientRegion)) {
            throw new Error(`Client FIPS region ${options.clientRegion} doesn't match region ${region} in ARN`);
        }
    }
    if (!options.useArnRegion &&
        !isEqualRegions(region, options.clientRegion || "") &&
        !isEqualRegions(region, options.clientSigningRegion || "")) {
        throw new Error(`Region in ARN is incompatible, got ${region} but expected ${options.clientRegion}`);
    }
};
const validateRegionalClient = (region) => {
    if (["s3-external-1", "aws-global"].includes(region)) {
        throw new Error(`Client region ${region} is not regional`);
    }
};
const isEqualRegions = (regionA, regionB) => regionA === regionB;
const validateAccountId = (accountId) => {
    if (!/[0-9]{12}/.exec(accountId)) {
        throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'");
    }
};
const validateDNSHostLabel = (label, options = { tlsCompatible: true }) => {
    if (label.length >= 64 ||
        !/^[a-z0-9][a-z0-9.-]*[a-z0-9]$/.test(label) ||
        /(\d+\.){3}\d+/.test(label) ||
        /[.-]{2}/.test(label) ||
        (options?.tlsCompatible && DOT_PATTERN.test(label))) {
        throw new Error(`Invalid DNS label ${label}`);
    }
};
const validateCustomEndpoint = (options) => {
    if (options.isCustomEndpoint) {
        if (options.dualstackEndpoint)
            throw new Error("Dualstack endpoint is not supported with custom endpoint");
        if (options.accelerateEndpoint)
            throw new Error("Accelerate endpoint is not supported with custom endpoint");
    }
};
const getArnResources = (resource) => {
    const delimiter = resource.includes(":") ? ":" : "/";
    const [resourceType, ...rest] = resource.split(delimiter);
    if (resourceType === "accesspoint") {
        if (rest.length !== 1 || rest[0] === "") {
            throw new Error(`Access Point ARN should have one resource accesspoint${delimiter}{accesspointname}`);
        }
        return { accesspointName: rest[0] };
    }
    else if (resourceType === "outpost") {
        if (!rest[0] || rest[1] !== "accesspoint" || !rest[2] || rest.length !== 3) {
            throw new Error(`Outpost ARN should have resource outpost${delimiter}{outpostId}${delimiter}accesspoint${delimiter}{accesspointName}`);
        }
        const [outpostId, _, accesspointName] = rest;
        return { outpostId, accesspointName };
    }
    else {
        throw new Error(`ARN resource should begin with 'accesspoint${delimiter}' or 'outpost${delimiter}'`);
    }
};
const validateNoDualstack = (dualstackEndpoint) => {
    if (dualstackEndpoint)
        throw new Error("Dualstack endpoint is not supported with Outpost or Multi-region Access Point ARN.");
};
const validateNoFIPS = (useFipsEndpoint) => {
    if (useFipsEndpoint)
        throw new Error(`FIPS region is not supported with Outpost.`);
};
const validateMrapAlias = (name) => {
    try {
        name.split(".").forEach((label) => {
            validateDNSHostLabel(label);
        });
    }
    catch (e) {
        throw new Error(`"${name}" is not a DNS compatible name.`);
    }
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/configurations.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/configurations.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveBucketEndpointConfig: () => (/* binding */ resolveBucketEndpointConfig)
/* harmony export */ });
function resolveBucketEndpointConfig(input) {
    const { bucketEndpoint = false, forcePathStyle = false, useAccelerateEndpoint = false, useArnRegion = false, disableMultiregionAccessPoints = false, } = input;
    return {
        ...input,
        bucketEndpoint,
        forcePathStyle,
        useAccelerateEndpoint,
        useArnRegion: typeof useArnRegion === "function" ? useArnRegion : () => Promise.resolve(useArnRegion),
        disableMultiregionAccessPoints: typeof disableMultiregionAccessPoints === "function"
            ? disableMultiregionAccessPoints
            : () => Promise.resolve(disableMultiregionAccessPoints),
    };
}


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/index.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_DISABLE_MULTIREGION_ACCESS_POINT_CONFIG_OPTIONS: () => (/* reexport safe */ _NodeDisableMultiregionAccessPointConfigOptions__WEBPACK_IMPORTED_MODULE_0__.NODE_DISABLE_MULTIREGION_ACCESS_POINT_CONFIG_OPTIONS),
/* harmony export */   NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME: () => (/* reexport safe */ _NodeDisableMultiregionAccessPointConfigOptions__WEBPACK_IMPORTED_MODULE_0__.NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME),
/* harmony export */   NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME: () => (/* reexport safe */ _NodeDisableMultiregionAccessPointConfigOptions__WEBPACK_IMPORTED_MODULE_0__.NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME),
/* harmony export */   NODE_USE_ARN_REGION_CONFIG_OPTIONS: () => (/* reexport safe */ _NodeUseArnRegionConfigOptions__WEBPACK_IMPORTED_MODULE_1__.NODE_USE_ARN_REGION_CONFIG_OPTIONS),
/* harmony export */   NODE_USE_ARN_REGION_ENV_NAME: () => (/* reexport safe */ _NodeUseArnRegionConfigOptions__WEBPACK_IMPORTED_MODULE_1__.NODE_USE_ARN_REGION_ENV_NAME),
/* harmony export */   NODE_USE_ARN_REGION_INI_NAME: () => (/* reexport safe */ _NodeUseArnRegionConfigOptions__WEBPACK_IMPORTED_MODULE_1__.NODE_USE_ARN_REGION_INI_NAME),
/* harmony export */   bucketEndpointMiddleware: () => (/* reexport safe */ _bucketEndpointMiddleware__WEBPACK_IMPORTED_MODULE_2__.bucketEndpointMiddleware),
/* harmony export */   bucketEndpointMiddlewareOptions: () => (/* reexport safe */ _bucketEndpointMiddleware__WEBPACK_IMPORTED_MODULE_2__.bucketEndpointMiddlewareOptions),
/* harmony export */   bucketHostname: () => (/* reexport safe */ _bucketHostname__WEBPACK_IMPORTED_MODULE_3__.bucketHostname),
/* harmony export */   getArnResources: () => (/* reexport safe */ _bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_5__.getArnResources),
/* harmony export */   getBucketEndpointPlugin: () => (/* reexport safe */ _bucketEndpointMiddleware__WEBPACK_IMPORTED_MODULE_2__.getBucketEndpointPlugin),
/* harmony export */   getSuffixForArnEndpoint: () => (/* reexport safe */ _bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_5__.getSuffixForArnEndpoint),
/* harmony export */   resolveBucketEndpointConfig: () => (/* reexport safe */ _configurations__WEBPACK_IMPORTED_MODULE_4__.resolveBucketEndpointConfig),
/* harmony export */   validateAccountId: () => (/* reexport safe */ _bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_5__.validateAccountId),
/* harmony export */   validateDNSHostLabel: () => (/* reexport safe */ _bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_5__.validateDNSHostLabel),
/* harmony export */   validateNoDualstack: () => (/* reexport safe */ _bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_5__.validateNoDualstack),
/* harmony export */   validateNoFIPS: () => (/* reexport safe */ _bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_5__.validateNoFIPS),
/* harmony export */   validateOutpostService: () => (/* reexport safe */ _bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_5__.validateOutpostService),
/* harmony export */   validatePartition: () => (/* reexport safe */ _bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_5__.validatePartition),
/* harmony export */   validateRegion: () => (/* reexport safe */ _bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_5__.validateRegion)
/* harmony export */ });
/* harmony import */ var _NodeDisableMultiregionAccessPointConfigOptions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./NodeDisableMultiregionAccessPointConfigOptions */ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/NodeDisableMultiregionAccessPointConfigOptions.js");
/* harmony import */ var _NodeUseArnRegionConfigOptions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./NodeUseArnRegionConfigOptions */ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/NodeUseArnRegionConfigOptions.js");
/* harmony import */ var _bucketEndpointMiddleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bucketEndpointMiddleware */ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/bucketEndpointMiddleware.js");
/* harmony import */ var _bucketHostname__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./bucketHostname */ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/bucketHostname.js");
/* harmony import */ var _configurations__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./configurations */ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/configurations.js");
/* harmony import */ var _bucketHostnameUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./bucketHostnameUtils */ "../node_modules/@aws-sdk/middleware-bucket-endpoint/dist-es/bucketHostnameUtils.js");








/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-expect-continue/dist-es/index.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-expect-continue/dist-es/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addExpectContinueMiddleware: () => (/* binding */ addExpectContinueMiddleware),
/* harmony export */   addExpectContinueMiddlewareOptions: () => (/* binding */ addExpectContinueMiddlewareOptions),
/* harmony export */   getAddExpectContinuePlugin: () => (/* binding */ getAddExpectContinuePlugin)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");

function addExpectContinueMiddleware(options) {
    return (next) => async (args) => {
        const { request } = args;
        if (_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(request) && request.body && options.runtime === "node") {
            if (options.requestHandler?.constructor?.name !== "FetchHttpHandler") {
                request.headers = {
                    ...request.headers,
                    Expect: "100-continue",
                };
            }
        }
        return next({
            ...args,
            request,
        });
    };
}
const addExpectContinueMiddlewareOptions = {
    step: "build",
    tags: ["SET_EXPECT_HEADER", "EXPECT_HEADER"],
    name: "addExpectContinueMiddleware",
    override: true,
};
const getAddExpectContinuePlugin = (options) => ({
    applyToStack: (clientStack) => {
        clientStack.add(addExpectContinueMiddleware(options), addExpectContinueMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS.js":
/*!**************************************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CONFIG_REQUEST_CHECKSUM_CALCULATION: () => (/* binding */ CONFIG_REQUEST_CHECKSUM_CALCULATION),
/* harmony export */   ENV_REQUEST_CHECKSUM_CALCULATION: () => (/* binding */ ENV_REQUEST_CHECKSUM_CALCULATION),
/* harmony export */   NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS: () => (/* binding */ NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/constants.js");
/* harmony import */ var _stringUnionSelector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringUnionSelector */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/stringUnionSelector.js");


const ENV_REQUEST_CHECKSUM_CALCULATION = "AWS_REQUEST_CHECKSUM_CALCULATION";
const CONFIG_REQUEST_CHECKSUM_CALCULATION = "request_checksum_calculation";
const NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS = {
    environmentVariableSelector: (env) => (0,_stringUnionSelector__WEBPACK_IMPORTED_MODULE_1__.stringUnionSelector)(env, ENV_REQUEST_CHECKSUM_CALCULATION, _constants__WEBPACK_IMPORTED_MODULE_0__.RequestChecksumCalculation, _stringUnionSelector__WEBPACK_IMPORTED_MODULE_1__.SelectorType.ENV),
    configFileSelector: (profile) => (0,_stringUnionSelector__WEBPACK_IMPORTED_MODULE_1__.stringUnionSelector)(profile, CONFIG_REQUEST_CHECKSUM_CALCULATION, _constants__WEBPACK_IMPORTED_MODULE_0__.RequestChecksumCalculation, _stringUnionSelector__WEBPACK_IMPORTED_MODULE_1__.SelectorType.CONFIG),
    default: _constants__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_REQUEST_CHECKSUM_CALCULATION,
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS.js":
/*!**************************************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CONFIG_RESPONSE_CHECKSUM_VALIDATION: () => (/* binding */ CONFIG_RESPONSE_CHECKSUM_VALIDATION),
/* harmony export */   ENV_RESPONSE_CHECKSUM_VALIDATION: () => (/* binding */ ENV_RESPONSE_CHECKSUM_VALIDATION),
/* harmony export */   NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS: () => (/* binding */ NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/constants.js");
/* harmony import */ var _stringUnionSelector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringUnionSelector */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/stringUnionSelector.js");


const ENV_RESPONSE_CHECKSUM_VALIDATION = "AWS_RESPONSE_CHECKSUM_VALIDATION";
const CONFIG_RESPONSE_CHECKSUM_VALIDATION = "response_checksum_validation";
const NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS = {
    environmentVariableSelector: (env) => (0,_stringUnionSelector__WEBPACK_IMPORTED_MODULE_1__.stringUnionSelector)(env, ENV_RESPONSE_CHECKSUM_VALIDATION, _constants__WEBPACK_IMPORTED_MODULE_0__.ResponseChecksumValidation, _stringUnionSelector__WEBPACK_IMPORTED_MODULE_1__.SelectorType.ENV),
    configFileSelector: (profile) => (0,_stringUnionSelector__WEBPACK_IMPORTED_MODULE_1__.stringUnionSelector)(profile, CONFIG_RESPONSE_CHECKSUM_VALIDATION, _constants__WEBPACK_IMPORTED_MODULE_0__.ResponseChecksumValidation, _stringUnionSelector__WEBPACK_IMPORTED_MODULE_1__.SelectorType.CONFIG),
    default: _constants__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_RESPONSE_CHECKSUM_VALIDATION,
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/constants.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/constants.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ChecksumAlgorithm: () => (/* binding */ ChecksumAlgorithm),
/* harmony export */   ChecksumLocation: () => (/* binding */ ChecksumLocation),
/* harmony export */   DEFAULT_CHECKSUM_ALGORITHM: () => (/* binding */ DEFAULT_CHECKSUM_ALGORITHM),
/* harmony export */   DEFAULT_REQUEST_CHECKSUM_CALCULATION: () => (/* binding */ DEFAULT_REQUEST_CHECKSUM_CALCULATION),
/* harmony export */   DEFAULT_RESPONSE_CHECKSUM_VALIDATION: () => (/* binding */ DEFAULT_RESPONSE_CHECKSUM_VALIDATION),
/* harmony export */   RequestChecksumCalculation: () => (/* binding */ RequestChecksumCalculation),
/* harmony export */   ResponseChecksumValidation: () => (/* binding */ ResponseChecksumValidation)
/* harmony export */ });
const RequestChecksumCalculation = {
    WHEN_SUPPORTED: "WHEN_SUPPORTED",
    WHEN_REQUIRED: "WHEN_REQUIRED",
};
const DEFAULT_REQUEST_CHECKSUM_CALCULATION = RequestChecksumCalculation.WHEN_SUPPORTED;
const ResponseChecksumValidation = {
    WHEN_SUPPORTED: "WHEN_SUPPORTED",
    WHEN_REQUIRED: "WHEN_REQUIRED",
};
const DEFAULT_RESPONSE_CHECKSUM_VALIDATION = RequestChecksumCalculation.WHEN_SUPPORTED;
var ChecksumAlgorithm;
(function (ChecksumAlgorithm) {
    ChecksumAlgorithm["MD5"] = "MD5";
    ChecksumAlgorithm["CRC32"] = "CRC32";
    ChecksumAlgorithm["CRC32C"] = "CRC32C";
    ChecksumAlgorithm["CRC64NVME"] = "CRC64NVME";
    ChecksumAlgorithm["SHA1"] = "SHA1";
    ChecksumAlgorithm["SHA256"] = "SHA256";
})(ChecksumAlgorithm || (ChecksumAlgorithm = {}));
var ChecksumLocation;
(function (ChecksumLocation) {
    ChecksumLocation["HEADER"] = "header";
    ChecksumLocation["TRAILER"] = "trailer";
})(ChecksumLocation || (ChecksumLocation = {}));
const DEFAULT_CHECKSUM_ALGORITHM = ChecksumAlgorithm.CRC32;


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/crc64-nvme-crt-container.js":
/*!**************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/crc64-nvme-crt-container.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   crc64NvmeCrtContainer: () => (/* binding */ crc64NvmeCrtContainer)
/* harmony export */ });
const crc64NvmeCrtContainer = {
    CrtCrc64Nvme: null,
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/flexibleChecksumsInputMiddleware.js":
/*!**********************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/flexibleChecksumsInputMiddleware.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   flexibleChecksumsInputMiddleware: () => (/* binding */ flexibleChecksumsInputMiddleware),
/* harmony export */   flexibleChecksumsInputMiddlewareOptions: () => (/* binding */ flexibleChecksumsInputMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _aws_sdk_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/core */ "../node_modules/@aws-sdk/core/dist-es/submodules/client/setFeature.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/constants.js");


const flexibleChecksumsInputMiddlewareOptions = {
    name: "flexibleChecksumsInputMiddleware",
    toMiddleware: "serializerMiddleware",
    relation: "before",
    tags: ["BODY_CHECKSUM"],
    override: true,
};
const flexibleChecksumsInputMiddleware = (config, middlewareConfig) => (next, context) => async (args) => {
    const input = args.input;
    const { requestValidationModeMember } = middlewareConfig;
    const requestChecksumCalculation = await config.requestChecksumCalculation();
    const responseChecksumValidation = await config.responseChecksumValidation();
    switch (requestChecksumCalculation) {
        case _constants__WEBPACK_IMPORTED_MODULE_0__.RequestChecksumCalculation.WHEN_REQUIRED:
            (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_1__.setFeature)(context, "FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED", "a");
            break;
        case _constants__WEBPACK_IMPORTED_MODULE_0__.RequestChecksumCalculation.WHEN_SUPPORTED:
            (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_1__.setFeature)(context, "FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED", "Z");
            break;
    }
    switch (responseChecksumValidation) {
        case _constants__WEBPACK_IMPORTED_MODULE_0__.ResponseChecksumValidation.WHEN_REQUIRED:
            (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_1__.setFeature)(context, "FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED", "c");
            break;
        case _constants__WEBPACK_IMPORTED_MODULE_0__.ResponseChecksumValidation.WHEN_SUPPORTED:
            (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_1__.setFeature)(context, "FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED", "b");
            break;
    }
    if (requestValidationModeMember && !input[requestValidationModeMember]) {
        if (responseChecksumValidation === _constants__WEBPACK_IMPORTED_MODULE_0__.ResponseChecksumValidation.WHEN_SUPPORTED) {
            input[requestValidationModeMember] = "ENABLED";
        }
    }
    return next(args);
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/flexibleChecksumsMiddleware.js":
/*!*****************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/flexibleChecksumsMiddleware.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   flexibleChecksumsMiddleware: () => (/* binding */ flexibleChecksumsMiddleware),
/* harmony export */   flexibleChecksumsMiddlewareOptions: () => (/* binding */ flexibleChecksumsMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _aws_sdk_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-sdk/core */ "../node_modules/@aws-sdk/core/dist-es/submodules/client/setFeature.js");
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/constants.js");
/* harmony import */ var _getChecksumAlgorithmForRequest__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getChecksumAlgorithmForRequest */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksumAlgorithmForRequest.js");
/* harmony import */ var _getChecksumLocationName__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getChecksumLocationName */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksumLocationName.js");
/* harmony import */ var _hasHeader__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./hasHeader */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/hasHeader.js");
/* harmony import */ var _hasHeaderWithPrefix__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hasHeaderWithPrefix */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/hasHeaderWithPrefix.js");
/* harmony import */ var _isStreaming__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./isStreaming */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/isStreaming.js");
/* harmony import */ var _selectChecksumAlgorithmFunction__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./selectChecksumAlgorithmFunction */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/selectChecksumAlgorithmFunction.js");
/* harmony import */ var _stringHasher__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./stringHasher */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/stringHasher.js");










const flexibleChecksumsMiddlewareOptions = {
    name: "flexibleChecksumsMiddleware",
    step: "build",
    tags: ["BODY_CHECKSUM"],
    override: true,
};
const flexibleChecksumsMiddleware = (config, middlewareConfig) => (next, context) => async (args) => {
    if (!_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(args.request)) {
        return next(args);
    }
    if ((0,_hasHeaderWithPrefix__WEBPACK_IMPORTED_MODULE_5__.hasHeaderWithPrefix)("x-amz-checksum-", args.request.headers)) {
        return next(args);
    }
    const { request, input } = args;
    const { body: requestBody, headers } = request;
    const { base64Encoder, streamHasher } = config;
    const { requestChecksumRequired, requestAlgorithmMember } = middlewareConfig;
    const requestChecksumCalculation = await config.requestChecksumCalculation();
    const requestAlgorithmMemberName = requestAlgorithmMember?.name;
    const requestAlgorithmMemberHttpHeader = requestAlgorithmMember?.httpHeader;
    if (requestAlgorithmMemberName && !input[requestAlgorithmMemberName]) {
        if (requestChecksumCalculation === _constants__WEBPACK_IMPORTED_MODULE_1__.RequestChecksumCalculation.WHEN_SUPPORTED || requestChecksumRequired) {
            input[requestAlgorithmMemberName] = _constants__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_CHECKSUM_ALGORITHM;
            if (requestAlgorithmMemberHttpHeader) {
                headers[requestAlgorithmMemberHttpHeader] = _constants__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_CHECKSUM_ALGORITHM;
            }
        }
    }
    const checksumAlgorithm = (0,_getChecksumAlgorithmForRequest__WEBPACK_IMPORTED_MODULE_2__.getChecksumAlgorithmForRequest)(input, {
        requestChecksumRequired,
        requestAlgorithmMember: requestAlgorithmMember?.name,
        requestChecksumCalculation,
    });
    let updatedBody = requestBody;
    let updatedHeaders = headers;
    if (checksumAlgorithm) {
        switch (checksumAlgorithm) {
            case _constants__WEBPACK_IMPORTED_MODULE_1__.ChecksumAlgorithm.CRC32:
                (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_9__.setFeature)(context, "FLEXIBLE_CHECKSUMS_REQ_CRC32", "U");
                break;
            case _constants__WEBPACK_IMPORTED_MODULE_1__.ChecksumAlgorithm.CRC32C:
                (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_9__.setFeature)(context, "FLEXIBLE_CHECKSUMS_REQ_CRC32C", "V");
                break;
            case _constants__WEBPACK_IMPORTED_MODULE_1__.ChecksumAlgorithm.CRC64NVME:
                (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_9__.setFeature)(context, "FLEXIBLE_CHECKSUMS_REQ_CRC64", "W");
                break;
            case _constants__WEBPACK_IMPORTED_MODULE_1__.ChecksumAlgorithm.SHA1:
                (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_9__.setFeature)(context, "FLEXIBLE_CHECKSUMS_REQ_SHA1", "X");
                break;
            case _constants__WEBPACK_IMPORTED_MODULE_1__.ChecksumAlgorithm.SHA256:
                (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_9__.setFeature)(context, "FLEXIBLE_CHECKSUMS_REQ_SHA256", "Y");
                break;
        }
        const checksumLocationName = (0,_getChecksumLocationName__WEBPACK_IMPORTED_MODULE_3__.getChecksumLocationName)(checksumAlgorithm);
        const checksumAlgorithmFn = (0,_selectChecksumAlgorithmFunction__WEBPACK_IMPORTED_MODULE_7__.selectChecksumAlgorithmFunction)(checksumAlgorithm, config);
        if ((0,_isStreaming__WEBPACK_IMPORTED_MODULE_6__.isStreaming)(requestBody)) {
            const { getAwsChunkedEncodingStream, bodyLengthChecker } = config;
            updatedBody = getAwsChunkedEncodingStream(requestBody, {
                base64Encoder,
                bodyLengthChecker,
                checksumLocationName,
                checksumAlgorithmFn,
                streamHasher,
            });
            updatedHeaders = {
                ...headers,
                "content-encoding": headers["content-encoding"]
                    ? `${headers["content-encoding"]},aws-chunked`
                    : "aws-chunked",
                "transfer-encoding": "chunked",
                "x-amz-decoded-content-length": headers["content-length"],
                "x-amz-content-sha256": "STREAMING-UNSIGNED-PAYLOAD-TRAILER",
                "x-amz-trailer": checksumLocationName,
            };
            delete updatedHeaders["content-length"];
        }
        else if (!(0,_hasHeader__WEBPACK_IMPORTED_MODULE_4__.hasHeader)(checksumLocationName, headers)) {
            const rawChecksum = await (0,_stringHasher__WEBPACK_IMPORTED_MODULE_8__.stringHasher)(checksumAlgorithmFn, requestBody);
            updatedHeaders = {
                ...headers,
                [checksumLocationName]: base64Encoder(rawChecksum),
            };
        }
    }
    const result = await next({
        ...args,
        request: {
            ...request,
            headers: updatedHeaders,
            body: updatedBody,
        },
    });
    return result;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/flexibleChecksumsResponseMiddleware.js":
/*!*************************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/flexibleChecksumsResponseMiddleware.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   flexibleChecksumsResponseMiddleware: () => (/* binding */ flexibleChecksumsResponseMiddleware),
/* harmony export */   flexibleChecksumsResponseMiddlewareOptions: () => (/* binding */ flexibleChecksumsResponseMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _getChecksumAlgorithmListForResponse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getChecksumAlgorithmListForResponse */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksumAlgorithmListForResponse.js");
/* harmony import */ var _getChecksumLocationName__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getChecksumLocationName */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksumLocationName.js");
/* harmony import */ var _isChecksumWithPartNumber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./isChecksumWithPartNumber */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/isChecksumWithPartNumber.js");
/* harmony import */ var _validateChecksumFromResponse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./validateChecksumFromResponse */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/validateChecksumFromResponse.js");





const flexibleChecksumsResponseMiddlewareOptions = {
    name: "flexibleChecksumsResponseMiddleware",
    toMiddleware: "deserializerMiddleware",
    relation: "after",
    tags: ["BODY_CHECKSUM"],
    override: true,
};
const flexibleChecksumsResponseMiddleware = (config, middlewareConfig) => (next, context) => async (args) => {
    if (!_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(args.request)) {
        return next(args);
    }
    const input = args.input;
    const result = await next(args);
    const response = result.response;
    const { requestValidationModeMember, responseAlgorithms } = middlewareConfig;
    if (requestValidationModeMember && input[requestValidationModeMember] === "ENABLED") {
        const { clientName, commandName } = context;
        const isS3WholeObjectMultipartGetResponseChecksum = clientName === "S3Client" &&
            commandName === "GetObjectCommand" &&
            (0,_getChecksumAlgorithmListForResponse__WEBPACK_IMPORTED_MODULE_1__.getChecksumAlgorithmListForResponse)(responseAlgorithms).every((algorithm) => {
                const responseHeader = (0,_getChecksumLocationName__WEBPACK_IMPORTED_MODULE_2__.getChecksumLocationName)(algorithm);
                const checksumFromResponse = response.headers[responseHeader];
                return !checksumFromResponse || (0,_isChecksumWithPartNumber__WEBPACK_IMPORTED_MODULE_3__.isChecksumWithPartNumber)(checksumFromResponse);
            });
        if (isS3WholeObjectMultipartGetResponseChecksum) {
            return result;
        }
        await (0,_validateChecksumFromResponse__WEBPACK_IMPORTED_MODULE_4__.validateChecksumFromResponse)(response, {
            config,
            responseAlgorithms,
            logger: context.logger,
        });
    }
    return result;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksum.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksum.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getChecksum: () => (/* binding */ getChecksum)
/* harmony export */ });
/* harmony import */ var _stringHasher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./stringHasher */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/stringHasher.js");

const getChecksum = async (body, { checksumAlgorithmFn, base64Encoder }) => base64Encoder(await (0,_stringHasher__WEBPACK_IMPORTED_MODULE_0__.stringHasher)(checksumAlgorithmFn, body));


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksumAlgorithmForRequest.js":
/*!********************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksumAlgorithmForRequest.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getChecksumAlgorithmForRequest: () => (/* binding */ getChecksumAlgorithmForRequest)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/constants.js");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/types.js");


const getChecksumAlgorithmForRequest = (input, { requestChecksumRequired, requestAlgorithmMember, requestChecksumCalculation }) => {
    if (!requestAlgorithmMember) {
        return requestChecksumCalculation === _constants__WEBPACK_IMPORTED_MODULE_0__.RequestChecksumCalculation.WHEN_SUPPORTED || requestChecksumRequired
            ? _constants__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_CHECKSUM_ALGORITHM
            : undefined;
    }
    if (!input[requestAlgorithmMember]) {
        return undefined;
    }
    const checksumAlgorithm = input[requestAlgorithmMember];
    if (!_types__WEBPACK_IMPORTED_MODULE_1__.CLIENT_SUPPORTED_ALGORITHMS.includes(checksumAlgorithm)) {
        throw new Error(`The checksum algorithm "${checksumAlgorithm}" is not supported by the client.` +
            ` Select one of ${_types__WEBPACK_IMPORTED_MODULE_1__.CLIENT_SUPPORTED_ALGORITHMS}.`);
    }
    return checksumAlgorithm;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksumAlgorithmListForResponse.js":
/*!*************************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksumAlgorithmListForResponse.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getChecksumAlgorithmListForResponse: () => (/* binding */ getChecksumAlgorithmListForResponse)
/* harmony export */ });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/types.js");

const getChecksumAlgorithmListForResponse = (responseAlgorithms = []) => {
    const validChecksumAlgorithms = [];
    for (const algorithm of _types__WEBPACK_IMPORTED_MODULE_0__.PRIORITY_ORDER_ALGORITHMS) {
        if (!responseAlgorithms.includes(algorithm) || !_types__WEBPACK_IMPORTED_MODULE_0__.CLIENT_SUPPORTED_ALGORITHMS.includes(algorithm)) {
            continue;
        }
        validChecksumAlgorithms.push(algorithm);
    }
    return validChecksumAlgorithms;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksumLocationName.js":
/*!*************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksumLocationName.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getChecksumLocationName: () => (/* binding */ getChecksumLocationName)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/constants.js");

const getChecksumLocationName = (algorithm) => algorithm === _constants__WEBPACK_IMPORTED_MODULE_0__.ChecksumAlgorithm.MD5 ? "content-md5" : `x-amz-checksum-${algorithm.toLowerCase()}`;


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getCrc32ChecksumAlgorithmFunction.js":
/*!***********************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getCrc32ChecksumAlgorithmFunction.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCrc32ChecksumAlgorithmFunction: () => (/* binding */ getCrc32ChecksumAlgorithmFunction)
/* harmony export */ });
/* harmony import */ var _aws_crypto_crc32__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/crc32 */ "../node_modules/@aws-crypto/crc32/build/module/index.js");
/* harmony import */ var _aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-crypto/util */ "../node_modules/@aws-crypto/util/build/module/index.js");
/* harmony import */ var zlib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zlib */ "zlib");
/* harmony import */ var zlib__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(zlib__WEBPACK_IMPORTED_MODULE_2__);



class NodeCrc32 {
    checksum = 0;
    update(data) {
        this.checksum = zlib__WEBPACK_IMPORTED_MODULE_2__.crc32(data, this.checksum);
    }
    async digest() {
        return (0,_aws_crypto_util__WEBPACK_IMPORTED_MODULE_1__.numToUint8)(this.checksum);
    }
    reset() {
        this.checksum = 0;
    }
}
const getCrc32ChecksumAlgorithmFunction = () => {
    if (typeof zlib__WEBPACK_IMPORTED_MODULE_2__.crc32 === "undefined") {
        return _aws_crypto_crc32__WEBPACK_IMPORTED_MODULE_0__.AwsCrc32;
    }
    return NodeCrc32;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getFlexibleChecksumsPlugin.js":
/*!****************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getFlexibleChecksumsPlugin.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getFlexibleChecksumsPlugin: () => (/* binding */ getFlexibleChecksumsPlugin)
/* harmony export */ });
/* harmony import */ var _flexibleChecksumsInputMiddleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./flexibleChecksumsInputMiddleware */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/flexibleChecksumsInputMiddleware.js");
/* harmony import */ var _flexibleChecksumsMiddleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./flexibleChecksumsMiddleware */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/flexibleChecksumsMiddleware.js");
/* harmony import */ var _flexibleChecksumsResponseMiddleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./flexibleChecksumsResponseMiddleware */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/flexibleChecksumsResponseMiddleware.js");



const getFlexibleChecksumsPlugin = (config, middlewareConfig) => ({
    applyToStack: (clientStack) => {
        clientStack.add((0,_flexibleChecksumsMiddleware__WEBPACK_IMPORTED_MODULE_1__.flexibleChecksumsMiddleware)(config, middlewareConfig), _flexibleChecksumsMiddleware__WEBPACK_IMPORTED_MODULE_1__.flexibleChecksumsMiddlewareOptions);
        clientStack.addRelativeTo((0,_flexibleChecksumsInputMiddleware__WEBPACK_IMPORTED_MODULE_0__.flexibleChecksumsInputMiddleware)(config, middlewareConfig), _flexibleChecksumsInputMiddleware__WEBPACK_IMPORTED_MODULE_0__.flexibleChecksumsInputMiddlewareOptions);
        clientStack.addRelativeTo((0,_flexibleChecksumsResponseMiddleware__WEBPACK_IMPORTED_MODULE_2__.flexibleChecksumsResponseMiddleware)(config, middlewareConfig), _flexibleChecksumsResponseMiddleware__WEBPACK_IMPORTED_MODULE_2__.flexibleChecksumsResponseMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/hasHeader.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/hasHeader.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   hasHeader: () => (/* binding */ hasHeader)
/* harmony export */ });
const hasHeader = (header, headers) => {
    const soughtHeader = header.toLowerCase();
    for (const headerName of Object.keys(headers)) {
        if (soughtHeader === headerName.toLowerCase()) {
            return true;
        }
    }
    return false;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/hasHeaderWithPrefix.js":
/*!*********************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/hasHeaderWithPrefix.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   hasHeaderWithPrefix: () => (/* binding */ hasHeaderWithPrefix)
/* harmony export */ });
const hasHeaderWithPrefix = (headerPrefix, headers) => {
    const soughtHeaderPrefix = headerPrefix.toLowerCase();
    for (const headerName of Object.keys(headers)) {
        if (headerName.toLowerCase().startsWith(soughtHeaderPrefix)) {
            return true;
        }
    }
    return false;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/index.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CONFIG_REQUEST_CHECKSUM_CALCULATION: () => (/* reexport safe */ _NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS__WEBPACK_IMPORTED_MODULE_0__.CONFIG_REQUEST_CHECKSUM_CALCULATION),
/* harmony export */   CONFIG_RESPONSE_CHECKSUM_VALIDATION: () => (/* reexport safe */ _NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS__WEBPACK_IMPORTED_MODULE_1__.CONFIG_RESPONSE_CHECKSUM_VALIDATION),
/* harmony export */   ChecksumAlgorithm: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_2__.ChecksumAlgorithm),
/* harmony export */   ChecksumLocation: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_2__.ChecksumLocation),
/* harmony export */   DEFAULT_CHECKSUM_ALGORITHM: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_CHECKSUM_ALGORITHM),
/* harmony export */   DEFAULT_REQUEST_CHECKSUM_CALCULATION: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_REQUEST_CHECKSUM_CALCULATION),
/* harmony export */   DEFAULT_RESPONSE_CHECKSUM_VALIDATION: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_RESPONSE_CHECKSUM_VALIDATION),
/* harmony export */   ENV_REQUEST_CHECKSUM_CALCULATION: () => (/* reexport safe */ _NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS__WEBPACK_IMPORTED_MODULE_0__.ENV_REQUEST_CHECKSUM_CALCULATION),
/* harmony export */   ENV_RESPONSE_CHECKSUM_VALIDATION: () => (/* reexport safe */ _NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS__WEBPACK_IMPORTED_MODULE_1__.ENV_RESPONSE_CHECKSUM_VALIDATION),
/* harmony export */   NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS: () => (/* reexport safe */ _NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS__WEBPACK_IMPORTED_MODULE_0__.NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS),
/* harmony export */   NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS: () => (/* reexport safe */ _NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS__WEBPACK_IMPORTED_MODULE_1__.NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS),
/* harmony export */   RequestChecksumCalculation: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_2__.RequestChecksumCalculation),
/* harmony export */   ResponseChecksumValidation: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_2__.ResponseChecksumValidation),
/* harmony export */   crc64NvmeCrtContainer: () => (/* reexport safe */ _crc64_nvme_crt_container__WEBPACK_IMPORTED_MODULE_3__.crc64NvmeCrtContainer),
/* harmony export */   flexibleChecksumsMiddleware: () => (/* reexport safe */ _flexibleChecksumsMiddleware__WEBPACK_IMPORTED_MODULE_4__.flexibleChecksumsMiddleware),
/* harmony export */   flexibleChecksumsMiddlewareOptions: () => (/* reexport safe */ _flexibleChecksumsMiddleware__WEBPACK_IMPORTED_MODULE_4__.flexibleChecksumsMiddlewareOptions),
/* harmony export */   getFlexibleChecksumsPlugin: () => (/* reexport safe */ _getFlexibleChecksumsPlugin__WEBPACK_IMPORTED_MODULE_5__.getFlexibleChecksumsPlugin),
/* harmony export */   resolveFlexibleChecksumsConfig: () => (/* reexport safe */ _resolveFlexibleChecksumsConfig__WEBPACK_IMPORTED_MODULE_6__.resolveFlexibleChecksumsConfig)
/* harmony export */ });
/* harmony import */ var _NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/NODE_REQUEST_CHECKSUM_CALCULATION_CONFIG_OPTIONS.js");
/* harmony import */ var _NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/NODE_RESPONSE_CHECKSUM_VALIDATION_CONFIG_OPTIONS.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/constants.js");
/* harmony import */ var _crc64_nvme_crt_container__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./crc64-nvme-crt-container */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/crc64-nvme-crt-container.js");
/* harmony import */ var _flexibleChecksumsMiddleware__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./flexibleChecksumsMiddleware */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/flexibleChecksumsMiddleware.js");
/* harmony import */ var _getFlexibleChecksumsPlugin__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./getFlexibleChecksumsPlugin */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getFlexibleChecksumsPlugin.js");
/* harmony import */ var _resolveFlexibleChecksumsConfig__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./resolveFlexibleChecksumsConfig */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/resolveFlexibleChecksumsConfig.js");









/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/isChecksumWithPartNumber.js":
/*!**************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/isChecksumWithPartNumber.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isChecksumWithPartNumber: () => (/* binding */ isChecksumWithPartNumber)
/* harmony export */ });
const isChecksumWithPartNumber = (checksum) => {
    const lastHyphenIndex = checksum.lastIndexOf("-");
    if (lastHyphenIndex !== -1) {
        const numberPart = checksum.slice(lastHyphenIndex + 1);
        if (!numberPart.startsWith("0")) {
            const number = parseInt(numberPart, 10);
            if (!isNaN(number) && number >= 1 && number <= 10000) {
                return true;
            }
        }
    }
    return false;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/isStreaming.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/isStreaming.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isStreaming: () => (/* binding */ isStreaming)
/* harmony export */ });
/* harmony import */ var _smithy_is_array_buffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/is-array-buffer */ "../node_modules/@smithy/is-array-buffer/dist-es/index.js");

const isStreaming = (body) => body !== undefined && typeof body !== "string" && !ArrayBuffer.isView(body) && !(0,_smithy_is_array_buffer__WEBPACK_IMPORTED_MODULE_0__.isArrayBuffer)(body);


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/resolveFlexibleChecksumsConfig.js":
/*!********************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/resolveFlexibleChecksumsConfig.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveFlexibleChecksumsConfig: () => (/* binding */ resolveFlexibleChecksumsConfig)
/* harmony export */ });
/* harmony import */ var _smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-middleware */ "../node_modules/@smithy/util-middleware/dist-es/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/constants.js");


const resolveFlexibleChecksumsConfig = (input) => ({
    ...input,
    requestChecksumCalculation: (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(input.requestChecksumCalculation ?? _constants__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_REQUEST_CHECKSUM_CALCULATION),
    responseChecksumValidation: (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(input.responseChecksumValidation ?? _constants__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_RESPONSE_CHECKSUM_VALIDATION),
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/selectChecksumAlgorithmFunction.js":
/*!*********************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/selectChecksumAlgorithmFunction.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   selectChecksumAlgorithmFunction: () => (/* binding */ selectChecksumAlgorithmFunction)
/* harmony export */ });
/* harmony import */ var _aws_crypto_crc32c__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/crc32c */ "../node_modules/@aws-crypto/crc32c/build/module/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/constants.js");
/* harmony import */ var _crc64_nvme_crt_container__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./crc64-nvme-crt-container */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/crc64-nvme-crt-container.js");
/* harmony import */ var _getCrc32ChecksumAlgorithmFunction__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getCrc32ChecksumAlgorithmFunction */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getCrc32ChecksumAlgorithmFunction.js");




const selectChecksumAlgorithmFunction = (checksumAlgorithm, config) => {
    switch (checksumAlgorithm) {
        case _constants__WEBPACK_IMPORTED_MODULE_1__.ChecksumAlgorithm.MD5:
            return config.md5;
        case _constants__WEBPACK_IMPORTED_MODULE_1__.ChecksumAlgorithm.CRC32:
            return (0,_getCrc32ChecksumAlgorithmFunction__WEBPACK_IMPORTED_MODULE_3__.getCrc32ChecksumAlgorithmFunction)();
        case _constants__WEBPACK_IMPORTED_MODULE_1__.ChecksumAlgorithm.CRC32C:
            return _aws_crypto_crc32c__WEBPACK_IMPORTED_MODULE_0__.AwsCrc32c;
        case _constants__WEBPACK_IMPORTED_MODULE_1__.ChecksumAlgorithm.CRC64NVME:
            if (typeof _crc64_nvme_crt_container__WEBPACK_IMPORTED_MODULE_2__.crc64NvmeCrtContainer.CrtCrc64Nvme !== "function") {
                throw new Error(`Please check whether you have installed the "@aws-sdk/crc64-nvme-crt" package explicitly. \n` +
                    `You must also register the package by calling [require("@aws-sdk/crc64-nvme-crt");] ` +
                    `or an ESM equivalent such as [import "@aws-sdk/crc64-nvme-crt";]. \n` +
                    "For more information please go to " +
                    "https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt");
            }
            return _crc64_nvme_crt_container__WEBPACK_IMPORTED_MODULE_2__.crc64NvmeCrtContainer.CrtCrc64Nvme;
        case _constants__WEBPACK_IMPORTED_MODULE_1__.ChecksumAlgorithm.SHA1:
            return config.sha1;
        case _constants__WEBPACK_IMPORTED_MODULE_1__.ChecksumAlgorithm.SHA256:
            return config.sha256;
        default:
            throw new Error(`Unsupported checksum algorithm: ${checksumAlgorithm}`);
    }
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/stringHasher.js":
/*!**************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/stringHasher.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   stringHasher: () => (/* binding */ stringHasher)
/* harmony export */ });
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-utf8 */ "../node_modules/@smithy/util-utf8/dist-es/index.js");

const stringHasher = (checksumAlgorithmFn, body) => {
    const hash = new checksumAlgorithmFn();
    hash.update((0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_0__.toUint8Array)(body || ""));
    return hash.digest();
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/stringUnionSelector.js":
/*!*********************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/stringUnionSelector.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SelectorType: () => (/* binding */ SelectorType),
/* harmony export */   stringUnionSelector: () => (/* binding */ stringUnionSelector)
/* harmony export */ });
var SelectorType;
(function (SelectorType) {
    SelectorType["ENV"] = "env";
    SelectorType["CONFIG"] = "shared config entry";
})(SelectorType || (SelectorType = {}));
const stringUnionSelector = (obj, key, union, type) => {
    if (!(key in obj))
        return undefined;
    const value = obj[key].toUpperCase();
    if (!Object.values(union).includes(value)) {
        throw new TypeError(`Cannot load ${type} '${key}'. Expected one of ${Object.values(union)}, got '${obj[key]}'.`);
    }
    return value;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/types.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/types.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CLIENT_SUPPORTED_ALGORITHMS: () => (/* binding */ CLIENT_SUPPORTED_ALGORITHMS),
/* harmony export */   PRIORITY_ORDER_ALGORITHMS: () => (/* binding */ PRIORITY_ORDER_ALGORITHMS)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/constants.js");

const CLIENT_SUPPORTED_ALGORITHMS = [
    _constants__WEBPACK_IMPORTED_MODULE_0__.ChecksumAlgorithm.CRC32,
    _constants__WEBPACK_IMPORTED_MODULE_0__.ChecksumAlgorithm.CRC32C,
    _constants__WEBPACK_IMPORTED_MODULE_0__.ChecksumAlgorithm.CRC64NVME,
    _constants__WEBPACK_IMPORTED_MODULE_0__.ChecksumAlgorithm.SHA1,
    _constants__WEBPACK_IMPORTED_MODULE_0__.ChecksumAlgorithm.SHA256,
];
const PRIORITY_ORDER_ALGORITHMS = [
    _constants__WEBPACK_IMPORTED_MODULE_0__.ChecksumAlgorithm.SHA256,
    _constants__WEBPACK_IMPORTED_MODULE_0__.ChecksumAlgorithm.SHA1,
    _constants__WEBPACK_IMPORTED_MODULE_0__.ChecksumAlgorithm.CRC32,
    _constants__WEBPACK_IMPORTED_MODULE_0__.ChecksumAlgorithm.CRC32C,
    _constants__WEBPACK_IMPORTED_MODULE_0__.ChecksumAlgorithm.CRC64NVME,
];


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/validateChecksumFromResponse.js":
/*!******************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/validateChecksumFromResponse.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   validateChecksumFromResponse: () => (/* binding */ validateChecksumFromResponse)
/* harmony export */ });
/* harmony import */ var _smithy_util_stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-stream */ "../node_modules/@smithy/util-stream/dist-es/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/constants.js");
/* harmony import */ var _getChecksum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getChecksum */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksum.js");
/* harmony import */ var _getChecksumAlgorithmListForResponse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getChecksumAlgorithmListForResponse */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksumAlgorithmListForResponse.js");
/* harmony import */ var _getChecksumLocationName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getChecksumLocationName */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/getChecksumLocationName.js");
/* harmony import */ var _isStreaming__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./isStreaming */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/isStreaming.js");
/* harmony import */ var _selectChecksumAlgorithmFunction__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./selectChecksumAlgorithmFunction */ "../node_modules/@aws-sdk/middleware-flexible-checksums/dist-es/selectChecksumAlgorithmFunction.js");







const validateChecksumFromResponse = async (response, { config, responseAlgorithms, logger }) => {
    const checksumAlgorithms = (0,_getChecksumAlgorithmListForResponse__WEBPACK_IMPORTED_MODULE_3__.getChecksumAlgorithmListForResponse)(responseAlgorithms);
    const { body: responseBody, headers: responseHeaders } = response;
    for (const algorithm of checksumAlgorithms) {
        const responseHeader = (0,_getChecksumLocationName__WEBPACK_IMPORTED_MODULE_4__.getChecksumLocationName)(algorithm);
        const checksumFromResponse = responseHeaders[responseHeader];
        if (checksumFromResponse) {
            let checksumAlgorithmFn;
            try {
                checksumAlgorithmFn = (0,_selectChecksumAlgorithmFunction__WEBPACK_IMPORTED_MODULE_6__.selectChecksumAlgorithmFunction)(algorithm, config);
            }
            catch (error) {
                if (algorithm === _constants__WEBPACK_IMPORTED_MODULE_1__.ChecksumAlgorithm.CRC64NVME) {
                    logger?.warn(`Skipping ${_constants__WEBPACK_IMPORTED_MODULE_1__.ChecksumAlgorithm.CRC64NVME} checksum validation: ${error.message}`);
                    continue;
                }
                throw error;
            }
            const { base64Encoder } = config;
            if ((0,_isStreaming__WEBPACK_IMPORTED_MODULE_5__.isStreaming)(responseBody)) {
                response.body = (0,_smithy_util_stream__WEBPACK_IMPORTED_MODULE_0__.createChecksumStream)({
                    expectedChecksum: checksumFromResponse,
                    checksumSourceLocation: responseHeader,
                    checksum: new checksumAlgorithmFn(),
                    source: responseBody,
                    base64Encoder,
                });
                return;
            }
            const checksum = await (0,_getChecksum__WEBPACK_IMPORTED_MODULE_2__.getChecksum)(responseBody, { checksumAlgorithmFn, base64Encoder });
            if (checksum === checksumFromResponse) {
                break;
            }
            throw new Error(`Checksum mismatch: expected "${checksum}" but received "${checksumFromResponse}"` +
                ` in response header "${responseHeader}".`);
        }
    }
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-host-header/dist-es/index.js":
/*!************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-host-header/dist-es/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHostHeaderPlugin: () => (/* binding */ getHostHeaderPlugin),
/* harmony export */   hostHeaderMiddleware: () => (/* binding */ hostHeaderMiddleware),
/* harmony export */   hostHeaderMiddlewareOptions: () => (/* binding */ hostHeaderMiddlewareOptions),
/* harmony export */   resolveHostHeaderConfig: () => (/* binding */ resolveHostHeaderConfig)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");

function resolveHostHeaderConfig(input) {
    return input;
}
const hostHeaderMiddleware = (options) => (next) => async (args) => {
    if (!_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(args.request))
        return next(args);
    const { request } = args;
    const { handlerProtocol = "" } = options.requestHandler.metadata || {};
    if (handlerProtocol.indexOf("h2") >= 0 && !request.headers[":authority"]) {
        delete request.headers["host"];
        request.headers[":authority"] = request.hostname + (request.port ? ":" + request.port : "");
    }
    else if (!request.headers["host"]) {
        let host = request.hostname;
        if (request.port != null)
            host += `:${request.port}`;
        request.headers["host"] = host;
    }
    return next(args);
};
const hostHeaderMiddlewareOptions = {
    name: "hostHeaderMiddleware",
    step: "build",
    priority: "low",
    tags: ["HOST"],
    override: true,
};
const getHostHeaderPlugin = (options) => ({
    applyToStack: (clientStack) => {
        clientStack.add(hostHeaderMiddleware(options), hostHeaderMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-logger/dist-es/index.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-logger/dist-es/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getLoggerPlugin: () => (/* reexport safe */ _loggerMiddleware__WEBPACK_IMPORTED_MODULE_0__.getLoggerPlugin),
/* harmony export */   loggerMiddleware: () => (/* reexport safe */ _loggerMiddleware__WEBPACK_IMPORTED_MODULE_0__.loggerMiddleware),
/* harmony export */   loggerMiddlewareOptions: () => (/* reexport safe */ _loggerMiddleware__WEBPACK_IMPORTED_MODULE_0__.loggerMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _loggerMiddleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loggerMiddleware */ "../node_modules/@aws-sdk/middleware-logger/dist-es/loggerMiddleware.js");



/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-logger/dist-es/loggerMiddleware.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-logger/dist-es/loggerMiddleware.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getLoggerPlugin: () => (/* binding */ getLoggerPlugin),
/* harmony export */   loggerMiddleware: () => (/* binding */ loggerMiddleware),
/* harmony export */   loggerMiddlewareOptions: () => (/* binding */ loggerMiddlewareOptions)
/* harmony export */ });
const loggerMiddleware = () => (next, context) => async (args) => {
    try {
        const response = await next(args);
        const { clientName, commandName, logger, dynamoDbDocumentClientOptions = {} } = context;
        const { overrideInputFilterSensitiveLog, overrideOutputFilterSensitiveLog } = dynamoDbDocumentClientOptions;
        const inputFilterSensitiveLog = overrideInputFilterSensitiveLog ?? context.inputFilterSensitiveLog;
        const outputFilterSensitiveLog = overrideOutputFilterSensitiveLog ?? context.outputFilterSensitiveLog;
        const { $metadata, ...outputWithoutMetadata } = response.output;
        logger?.info?.({
            clientName,
            commandName,
            input: inputFilterSensitiveLog(args.input),
            output: outputFilterSensitiveLog(outputWithoutMetadata),
            metadata: $metadata,
        });
        return response;
    }
    catch (error) {
        const { clientName, commandName, logger, dynamoDbDocumentClientOptions = {} } = context;
        const { overrideInputFilterSensitiveLog } = dynamoDbDocumentClientOptions;
        const inputFilterSensitiveLog = overrideInputFilterSensitiveLog ?? context.inputFilterSensitiveLog;
        logger?.error?.({
            clientName,
            commandName,
            input: inputFilterSensitiveLog(args.input),
            error,
            metadata: error.$metadata,
        });
        throw error;
    }
};
const loggerMiddlewareOptions = {
    name: "loggerMiddleware",
    tags: ["LOGGER"],
    step: "initialize",
    override: true,
};
const getLoggerPlugin = (options) => ({
    applyToStack: (clientStack) => {
        clientStack.add(loggerMiddleware(), loggerMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-recursion-detection/dist-es/index.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-recursion-detection/dist-es/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addRecursionDetectionMiddlewareOptions: () => (/* binding */ addRecursionDetectionMiddlewareOptions),
/* harmony export */   getRecursionDetectionPlugin: () => (/* binding */ getRecursionDetectionPlugin),
/* harmony export */   recursionDetectionMiddleware: () => (/* binding */ recursionDetectionMiddleware)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");

const TRACE_ID_HEADER_NAME = "X-Amzn-Trace-Id";
const ENV_LAMBDA_FUNCTION_NAME = "AWS_LAMBDA_FUNCTION_NAME";
const ENV_TRACE_ID = "_X_AMZN_TRACE_ID";
const recursionDetectionMiddleware = (options) => (next) => async (args) => {
    const { request } = args;
    if (!_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(request) ||
        options.runtime !== "node" ||
        request.headers.hasOwnProperty(TRACE_ID_HEADER_NAME)) {
        return next(args);
    }
    const functionName = process.env[ENV_LAMBDA_FUNCTION_NAME];
    const traceId = process.env[ENV_TRACE_ID];
    const nonEmptyString = (str) => typeof str === "string" && str.length > 0;
    if (nonEmptyString(functionName) && nonEmptyString(traceId)) {
        request.headers[TRACE_ID_HEADER_NAME] = traceId;
    }
    return next({
        ...args,
        request,
    });
};
const addRecursionDetectionMiddlewareOptions = {
    step: "build",
    tags: ["RECURSION_DETECTION"],
    name: "recursionDetectionMiddleware",
    override: true,
    priority: "low",
};
const getRecursionDetectionPlugin = (options) => ({
    applyToStack: (clientStack) => {
        clientStack.add(recursionDetectionMiddleware(options), addRecursionDetectionMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/bucket-endpoint-middleware.js":
/*!****************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/bucket-endpoint-middleware.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   bucketEndpointMiddleware: () => (/* binding */ bucketEndpointMiddleware),
/* harmony export */   bucketEndpointMiddlewareOptions: () => (/* binding */ bucketEndpointMiddlewareOptions)
/* harmony export */ });
function bucketEndpointMiddleware(options) {
    return (next, context) => async (args) => {
        if (options.bucketEndpoint) {
            const endpoint = context.endpointV2;
            if (endpoint) {
                const bucket = args.input.Bucket;
                if (typeof bucket === "string") {
                    try {
                        const bucketEndpointUrl = new URL(bucket);
                        context.endpointV2 = {
                            ...endpoint,
                            url: bucketEndpointUrl,
                        };
                    }
                    catch (e) {
                        const warning = `@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${bucket} could not be parsed as URL.`;
                        if (context.logger?.constructor?.name === "NoOpLogger") {
                            console.warn(warning);
                        }
                        else {
                            context.logger?.warn?.(warning);
                        }
                        throw e;
                    }
                }
            }
        }
        return next(args);
    };
}
const bucketEndpointMiddlewareOptions = {
    name: "bucketEndpointMiddleware",
    override: true,
    relation: "after",
    toMiddleware: "endpointV2Middleware",
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/check-content-length-header.js":
/*!*****************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/check-content-length-header.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   checkContentLengthHeader: () => (/* binding */ checkContentLengthHeader),
/* harmony export */   checkContentLengthHeaderMiddlewareOptions: () => (/* binding */ checkContentLengthHeaderMiddlewareOptions),
/* harmony export */   getCheckContentLengthHeaderPlugin: () => (/* binding */ getCheckContentLengthHeaderPlugin)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");


const CONTENT_LENGTH_HEADER = "content-length";
function checkContentLengthHeader() {
    return (next, context) => async (args) => {
        const { request } = args;
        if (_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(request)) {
            if (!(CONTENT_LENGTH_HEADER in request.headers)) {
                const message = `Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.`;
                if (typeof context?.logger?.warn === "function" && !(context.logger instanceof _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_1__.NoOpLogger)) {
                    context.logger.warn(message);
                }
                else {
                    console.warn(message);
                }
            }
        }
        return next({ ...args });
    };
}
const checkContentLengthHeaderMiddlewareOptions = {
    step: "finalizeRequest",
    tags: ["CHECK_CONTENT_LENGTH_HEADER"],
    name: "getCheckContentLengthHeaderPlugin",
    override: true,
};
const getCheckContentLengthHeaderPlugin = (unused) => ({
    applyToStack: (clientStack) => {
        clientStack.add(checkContentLengthHeader(), checkContentLengthHeaderMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/index.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS: () => (/* reexport safe */ _s3_express_index__WEBPACK_IMPORTED_MODULE_4__.NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS),
/* harmony export */   S3ExpressIdentityCache: () => (/* reexport safe */ _s3_express_index__WEBPACK_IMPORTED_MODULE_4__.S3ExpressIdentityCache),
/* harmony export */   S3ExpressIdentityCacheEntry: () => (/* reexport safe */ _s3_express_index__WEBPACK_IMPORTED_MODULE_4__.S3ExpressIdentityCacheEntry),
/* harmony export */   S3ExpressIdentityProviderImpl: () => (/* reexport safe */ _s3_express_index__WEBPACK_IMPORTED_MODULE_4__.S3ExpressIdentityProviderImpl),
/* harmony export */   SignatureV4S3Express: () => (/* reexport safe */ _s3_express_index__WEBPACK_IMPORTED_MODULE_4__.SignatureV4S3Express),
/* harmony export */   checkContentLengthHeader: () => (/* reexport safe */ _check_content_length_header__WEBPACK_IMPORTED_MODULE_0__.checkContentLengthHeader),
/* harmony export */   checkContentLengthHeaderMiddlewareOptions: () => (/* reexport safe */ _check_content_length_header__WEBPACK_IMPORTED_MODULE_0__.checkContentLengthHeaderMiddlewareOptions),
/* harmony export */   getCheckContentLengthHeaderPlugin: () => (/* reexport safe */ _check_content_length_header__WEBPACK_IMPORTED_MODULE_0__.getCheckContentLengthHeaderPlugin),
/* harmony export */   getRegionRedirectMiddlewarePlugin: () => (/* reexport safe */ _region_redirect_middleware__WEBPACK_IMPORTED_MODULE_2__.getRegionRedirectMiddlewarePlugin),
/* harmony export */   getS3ExpiresMiddlewarePlugin: () => (/* reexport safe */ _s3_expires_middleware__WEBPACK_IMPORTED_MODULE_3__.getS3ExpiresMiddlewarePlugin),
/* harmony export */   getS3ExpressHttpSigningPlugin: () => (/* reexport safe */ _s3_express_index__WEBPACK_IMPORTED_MODULE_4__.getS3ExpressHttpSigningPlugin),
/* harmony export */   getS3ExpressPlugin: () => (/* reexport safe */ _s3_express_index__WEBPACK_IMPORTED_MODULE_4__.getS3ExpressPlugin),
/* harmony export */   getThrow200ExceptionsPlugin: () => (/* reexport safe */ _throw_200_exceptions__WEBPACK_IMPORTED_MODULE_6__.getThrow200ExceptionsPlugin),
/* harmony export */   getValidateBucketNamePlugin: () => (/* reexport safe */ _validate_bucket_name__WEBPACK_IMPORTED_MODULE_7__.getValidateBucketNamePlugin),
/* harmony export */   regionRedirectEndpointMiddleware: () => (/* reexport safe */ _region_redirect_endpoint_middleware__WEBPACK_IMPORTED_MODULE_1__.regionRedirectEndpointMiddleware),
/* harmony export */   regionRedirectEndpointMiddlewareOptions: () => (/* reexport safe */ _region_redirect_endpoint_middleware__WEBPACK_IMPORTED_MODULE_1__.regionRedirectEndpointMiddlewareOptions),
/* harmony export */   regionRedirectMiddleware: () => (/* reexport safe */ _region_redirect_middleware__WEBPACK_IMPORTED_MODULE_2__.regionRedirectMiddleware),
/* harmony export */   regionRedirectMiddlewareOptions: () => (/* reexport safe */ _region_redirect_middleware__WEBPACK_IMPORTED_MODULE_2__.regionRedirectMiddlewareOptions),
/* harmony export */   resolveS3Config: () => (/* reexport safe */ _s3Configuration__WEBPACK_IMPORTED_MODULE_5__.resolveS3Config),
/* harmony export */   s3ExpiresMiddleware: () => (/* reexport safe */ _s3_expires_middleware__WEBPACK_IMPORTED_MODULE_3__.s3ExpiresMiddleware),
/* harmony export */   s3ExpiresMiddlewareOptions: () => (/* reexport safe */ _s3_expires_middleware__WEBPACK_IMPORTED_MODULE_3__.s3ExpiresMiddlewareOptions),
/* harmony export */   s3ExpressHttpSigningMiddleware: () => (/* reexport safe */ _s3_express_index__WEBPACK_IMPORTED_MODULE_4__.s3ExpressHttpSigningMiddleware),
/* harmony export */   s3ExpressHttpSigningMiddlewareOptions: () => (/* reexport safe */ _s3_express_index__WEBPACK_IMPORTED_MODULE_4__.s3ExpressHttpSigningMiddlewareOptions),
/* harmony export */   s3ExpressMiddleware: () => (/* reexport safe */ _s3_express_index__WEBPACK_IMPORTED_MODULE_4__.s3ExpressMiddleware),
/* harmony export */   s3ExpressMiddlewareOptions: () => (/* reexport safe */ _s3_express_index__WEBPACK_IMPORTED_MODULE_4__.s3ExpressMiddlewareOptions),
/* harmony export */   throw200ExceptionsMiddleware: () => (/* reexport safe */ _throw_200_exceptions__WEBPACK_IMPORTED_MODULE_6__.throw200ExceptionsMiddleware),
/* harmony export */   throw200ExceptionsMiddlewareOptions: () => (/* reexport safe */ _throw_200_exceptions__WEBPACK_IMPORTED_MODULE_6__.throw200ExceptionsMiddlewareOptions),
/* harmony export */   validateBucketNameMiddleware: () => (/* reexport safe */ _validate_bucket_name__WEBPACK_IMPORTED_MODULE_7__.validateBucketNameMiddleware),
/* harmony export */   validateBucketNameMiddlewareOptions: () => (/* reexport safe */ _validate_bucket_name__WEBPACK_IMPORTED_MODULE_7__.validateBucketNameMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _check_content_length_header__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./check-content-length-header */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/check-content-length-header.js");
/* harmony import */ var _region_redirect_endpoint_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./region-redirect-endpoint-middleware */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/region-redirect-endpoint-middleware.js");
/* harmony import */ var _region_redirect_middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./region-redirect-middleware */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/region-redirect-middleware.js");
/* harmony import */ var _s3_expires_middleware__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./s3-expires-middleware */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-expires-middleware.js");
/* harmony import */ var _s3_express_index__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./s3-express/index */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/index.js");
/* harmony import */ var _s3Configuration__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./s3Configuration */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3Configuration.js");
/* harmony import */ var _throw_200_exceptions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./throw-200-exceptions */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/throw-200-exceptions.js");
/* harmony import */ var _validate_bucket_name__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./validate-bucket-name */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/validate-bucket-name.js");










/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/region-redirect-endpoint-middleware.js":
/*!*************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/region-redirect-endpoint-middleware.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   regionRedirectEndpointMiddleware: () => (/* binding */ regionRedirectEndpointMiddleware),
/* harmony export */   regionRedirectEndpointMiddlewareOptions: () => (/* binding */ regionRedirectEndpointMiddlewareOptions)
/* harmony export */ });
const regionRedirectEndpointMiddleware = (config) => {
    return (next, context) => async (args) => {
        const originalRegion = await config.region();
        const regionProviderRef = config.region;
        let unlock = () => { };
        if (context.__s3RegionRedirect) {
            Object.defineProperty(config, "region", {
                writable: false,
                value: async () => {
                    return context.__s3RegionRedirect;
                },
            });
            unlock = () => Object.defineProperty(config, "region", {
                writable: true,
                value: regionProviderRef,
            });
        }
        try {
            const result = await next(args);
            if (context.__s3RegionRedirect) {
                unlock();
                const region = await config.region();
                if (originalRegion !== region) {
                    throw new Error("Region was not restored following S3 region redirect.");
                }
            }
            return result;
        }
        catch (e) {
            unlock();
            throw e;
        }
    };
};
const regionRedirectEndpointMiddlewareOptions = {
    tags: ["REGION_REDIRECT", "S3"],
    name: "regionRedirectEndpointMiddleware",
    override: true,
    relation: "before",
    toMiddleware: "endpointV2Middleware",
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/region-redirect-middleware.js":
/*!****************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/region-redirect-middleware.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRegionRedirectMiddlewarePlugin: () => (/* binding */ getRegionRedirectMiddlewarePlugin),
/* harmony export */   regionRedirectMiddleware: () => (/* binding */ regionRedirectMiddleware),
/* harmony export */   regionRedirectMiddlewareOptions: () => (/* binding */ regionRedirectMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _region_redirect_endpoint_middleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./region-redirect-endpoint-middleware */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/region-redirect-endpoint-middleware.js");

function regionRedirectMiddleware(clientConfig) {
    return (next, context) => async (args) => {
        try {
            return await next(args);
        }
        catch (err) {
            if (clientConfig.followRegionRedirects) {
                if (err?.$metadata?.httpStatusCode === 301 ||
                    (err?.$metadata?.httpStatusCode === 400 && err?.name === "IllegalLocationConstraintException")) {
                    try {
                        const actualRegion = err.$response.headers["x-amz-bucket-region"];
                        context.logger?.debug(`Redirecting from ${await clientConfig.region()} to ${actualRegion}`);
                        context.__s3RegionRedirect = actualRegion;
                    }
                    catch (e) {
                        throw new Error("Region redirect failed: " + e);
                    }
                    return next(args);
                }
            }
            throw err;
        }
    };
}
const regionRedirectMiddlewareOptions = {
    step: "initialize",
    tags: ["REGION_REDIRECT", "S3"],
    name: "regionRedirectMiddleware",
    override: true,
};
const getRegionRedirectMiddlewarePlugin = (clientConfig) => ({
    applyToStack: (clientStack) => {
        clientStack.add(regionRedirectMiddleware(clientConfig), regionRedirectMiddlewareOptions);
        clientStack.addRelativeTo((0,_region_redirect_endpoint_middleware__WEBPACK_IMPORTED_MODULE_0__.regionRedirectEndpointMiddleware)(clientConfig), _region_redirect_endpoint_middleware__WEBPACK_IMPORTED_MODULE_0__.regionRedirectEndpointMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-expires-middleware.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-expires-middleware.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getS3ExpiresMiddlewarePlugin: () => (/* binding */ getS3ExpiresMiddlewarePlugin),
/* harmony export */   s3ExpiresMiddleware: () => (/* binding */ s3ExpiresMiddleware),
/* harmony export */   s3ExpiresMiddlewareOptions: () => (/* binding */ s3ExpiresMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");


const s3ExpiresMiddleware = (config) => {
    return (next, context) => async (args) => {
        const result = await next(args);
        const { response } = result;
        if (_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpResponse.isInstance(response)) {
            if (response.headers.expires) {
                response.headers.expiresstring = response.headers.expires;
                try {
                    (0,_smithy_smithy_client__WEBPACK_IMPORTED_MODULE_1__.parseRfc7231DateTime)(response.headers.expires);
                }
                catch (e) {
                    context.logger?.warn(`AWS SDK Warning for ${context.clientName}::${context.commandName} response parsing (${response.headers.expires}): ${e}`);
                    delete response.headers.expires;
                }
            }
        }
        return result;
    };
};
const s3ExpiresMiddlewareOptions = {
    tags: ["S3"],
    name: "s3ExpiresMiddleware",
    override: true,
    relation: "after",
    toMiddleware: "deserializerMiddleware",
};
const getS3ExpiresMiddlewarePlugin = (clientConfig) => ({
    applyToStack: (clientStack) => {
        clientStack.addRelativeTo(s3ExpiresMiddleware(clientConfig), s3ExpiresMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/S3ExpressIdentityCache.js":
/*!*******************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/S3ExpressIdentityCache.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S3ExpressIdentityCache: () => (/* binding */ S3ExpressIdentityCache)
/* harmony export */ });
class S3ExpressIdentityCache {
    data;
    lastPurgeTime = Date.now();
    static EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS = 30000;
    constructor(data = {}) {
        this.data = data;
    }
    get(key) {
        const entry = this.data[key];
        if (!entry) {
            return;
        }
        return entry;
    }
    set(key, entry) {
        this.data[key] = entry;
        return entry;
    }
    delete(key) {
        delete this.data[key];
    }
    async purgeExpired() {
        const now = Date.now();
        if (this.lastPurgeTime + S3ExpressIdentityCache.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS > now) {
            return;
        }
        for (const key in this.data) {
            const entry = this.data[key];
            if (!entry.isRefreshing) {
                const credential = await entry.identity;
                if (credential.expiration) {
                    if (credential.expiration.getTime() < now) {
                        delete this.data[key];
                    }
                }
            }
        }
    }
}


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/S3ExpressIdentityCacheEntry.js":
/*!************************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/S3ExpressIdentityCacheEntry.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S3ExpressIdentityCacheEntry: () => (/* binding */ S3ExpressIdentityCacheEntry)
/* harmony export */ });
class S3ExpressIdentityCacheEntry {
    _identity;
    isRefreshing;
    accessed;
    constructor(_identity, isRefreshing = false, accessed = Date.now()) {
        this._identity = _identity;
        this.isRefreshing = isRefreshing;
        this.accessed = accessed;
    }
    get identity() {
        this.accessed = Date.now();
        return this._identity;
    }
}


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/S3ExpressIdentityProviderImpl.js":
/*!**************************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/S3ExpressIdentityProviderImpl.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S3ExpressIdentityProviderImpl: () => (/* binding */ S3ExpressIdentityProviderImpl)
/* harmony export */ });
/* harmony import */ var _S3ExpressIdentityCache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./S3ExpressIdentityCache */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/S3ExpressIdentityCache.js");
/* harmony import */ var _S3ExpressIdentityCacheEntry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./S3ExpressIdentityCacheEntry */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/S3ExpressIdentityCacheEntry.js");


class S3ExpressIdentityProviderImpl {
    createSessionFn;
    cache;
    static REFRESH_WINDOW_MS = 60000;
    constructor(createSessionFn, cache = new _S3ExpressIdentityCache__WEBPACK_IMPORTED_MODULE_0__.S3ExpressIdentityCache()) {
        this.createSessionFn = createSessionFn;
        this.cache = cache;
    }
    async getS3ExpressIdentity(awsIdentity, identityProperties) {
        const key = identityProperties.Bucket;
        const { cache } = this;
        const entry = cache.get(key);
        if (entry) {
            return entry.identity.then((identity) => {
                const isExpired = (identity.expiration?.getTime() ?? 0) < Date.now();
                if (isExpired) {
                    return cache.set(key, new _S3ExpressIdentityCacheEntry__WEBPACK_IMPORTED_MODULE_1__.S3ExpressIdentityCacheEntry(this.getIdentity(key))).identity;
                }
                const isExpiringSoon = (identity.expiration?.getTime() ?? 0) < Date.now() + S3ExpressIdentityProviderImpl.REFRESH_WINDOW_MS;
                if (isExpiringSoon && !entry.isRefreshing) {
                    entry.isRefreshing = true;
                    this.getIdentity(key).then((id) => {
                        cache.set(key, new _S3ExpressIdentityCacheEntry__WEBPACK_IMPORTED_MODULE_1__.S3ExpressIdentityCacheEntry(Promise.resolve(id)));
                    });
                }
                return identity;
            });
        }
        return cache.set(key, new _S3ExpressIdentityCacheEntry__WEBPACK_IMPORTED_MODULE_1__.S3ExpressIdentityCacheEntry(this.getIdentity(key))).identity;
    }
    async getIdentity(key) {
        await this.cache.purgeExpired().catch((error) => {
            console.warn("Error while clearing expired entries in S3ExpressIdentityCache: \n" + error);
        });
        const session = await this.createSessionFn(key);
        if (!session.Credentials?.AccessKeyId || !session.Credentials?.SecretAccessKey) {
            throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");
        }
        const identity = {
            accessKeyId: session.Credentials.AccessKeyId,
            secretAccessKey: session.Credentials.SecretAccessKey,
            sessionToken: session.Credentials.SessionToken,
            expiration: session.Credentials.Expiration ? new Date(session.Credentials.Expiration) : undefined,
        };
        return identity;
    }
}


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/SignatureV4S3Express.js":
/*!*****************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/SignatureV4S3Express.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SignatureV4S3Express: () => (/* binding */ SignatureV4S3Express)
/* harmony export */ });
/* harmony import */ var _smithy_signature_v4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/signature-v4 */ "../node_modules/@smithy/signature-v4/dist-es/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/constants.js");


class SignatureV4S3Express extends _smithy_signature_v4__WEBPACK_IMPORTED_MODULE_0__.SignatureV4 {
    async signWithCredentials(requestToSign, credentials, options) {
        const credentialsWithoutSessionToken = getCredentialsWithoutSessionToken(credentials);
        requestToSign.headers[_constants__WEBPACK_IMPORTED_MODULE_1__.SESSION_TOKEN_HEADER] = credentials.sessionToken;
        const privateAccess = this;
        setSingleOverride(privateAccess, credentialsWithoutSessionToken);
        return privateAccess.signRequest(requestToSign, options ?? {});
    }
    async presignWithCredentials(requestToSign, credentials, options) {
        const credentialsWithoutSessionToken = getCredentialsWithoutSessionToken(credentials);
        delete requestToSign.headers[_constants__WEBPACK_IMPORTED_MODULE_1__.SESSION_TOKEN_HEADER];
        requestToSign.headers[_constants__WEBPACK_IMPORTED_MODULE_1__.SESSION_TOKEN_QUERY_PARAM] = credentials.sessionToken;
        requestToSign.query = requestToSign.query ?? {};
        requestToSign.query[_constants__WEBPACK_IMPORTED_MODULE_1__.SESSION_TOKEN_QUERY_PARAM] = credentials.sessionToken;
        const privateAccess = this;
        setSingleOverride(privateAccess, credentialsWithoutSessionToken);
        return this.presign(requestToSign, options);
    }
}
function getCredentialsWithoutSessionToken(credentials) {
    const credentialsWithoutSessionToken = {
        accessKeyId: credentials.accessKeyId,
        secretAccessKey: credentials.secretAccessKey,
        expiration: credentials.expiration,
    };
    return credentialsWithoutSessionToken;
}
function setSingleOverride(privateAccess, credentialsWithoutSessionToken) {
    const id = setTimeout(() => {
        throw new Error("SignatureV4S3Express credential override was created but not called.");
    }, 10);
    const currentCredentialProvider = privateAccess.credentialProvider;
    const overrideCredentialsProviderOnce = () => {
        clearTimeout(id);
        privateAccess.credentialProvider = currentCredentialProvider;
        return Promise.resolve(credentialsWithoutSessionToken);
    };
    privateAccess.credentialProvider = overrideCredentialsProviderOnce;
}


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/constants.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/constants.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_ENV_NAME: () => (/* binding */ NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_ENV_NAME),
/* harmony export */   NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_INI_NAME: () => (/* binding */ NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_INI_NAME),
/* harmony export */   NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS: () => (/* binding */ NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS),
/* harmony export */   S3_EXPRESS_AUTH_SCHEME: () => (/* binding */ S3_EXPRESS_AUTH_SCHEME),
/* harmony export */   S3_EXPRESS_BACKEND: () => (/* binding */ S3_EXPRESS_BACKEND),
/* harmony export */   S3_EXPRESS_BUCKET_TYPE: () => (/* binding */ S3_EXPRESS_BUCKET_TYPE),
/* harmony export */   SESSION_TOKEN_HEADER: () => (/* binding */ SESSION_TOKEN_HEADER),
/* harmony export */   SESSION_TOKEN_QUERY_PARAM: () => (/* binding */ SESSION_TOKEN_QUERY_PARAM)
/* harmony export */ });
/* harmony import */ var _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-config-provider */ "../node_modules/@smithy/util-config-provider/dist-es/index.js");

const S3_EXPRESS_BUCKET_TYPE = "Directory";
const S3_EXPRESS_BACKEND = "S3Express";
const S3_EXPRESS_AUTH_SCHEME = "sigv4-s3express";
const SESSION_TOKEN_QUERY_PARAM = "X-Amz-S3session-Token";
const SESSION_TOKEN_HEADER = SESSION_TOKEN_QUERY_PARAM.toLowerCase();
const NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_ENV_NAME = "AWS_S3_DISABLE_EXPRESS_SESSION_AUTH";
const NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_INI_NAME = "s3_disable_express_session_auth";
const NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS = {
    environmentVariableSelector: (env) => (0,_smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.booleanSelector)(env, NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_ENV_NAME, _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.SelectorType.ENV),
    configFileSelector: (profile) => (0,_smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.booleanSelector)(profile, NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_INI_NAME, _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.SelectorType.CONFIG),
    default: false,
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/functions/s3ExpressHttpSigningMiddleware.js":
/*!*****************************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/functions/s3ExpressHttpSigningMiddleware.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getS3ExpressHttpSigningPlugin: () => (/* binding */ getS3ExpressHttpSigningPlugin),
/* harmony export */   s3ExpressHttpSigningMiddleware: () => (/* binding */ s3ExpressHttpSigningMiddleware),
/* harmony export */   s3ExpressHttpSigningMiddlewareOptions: () => (/* binding */ s3ExpressHttpSigningMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _smithy_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/core */ "../node_modules/@smithy/core/dist-es/index.js");
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/types */ "../node_modules/@smithy/types/dist-es/index.js");
/* harmony import */ var _smithy_util_middleware__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @smithy/util-middleware */ "../node_modules/@smithy/util-middleware/dist-es/index.js");
/* harmony import */ var _signS3Express__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./signS3Express */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/functions/signS3Express.js");





const defaultErrorHandler = (signingProperties) => (error) => {
    throw error;
};
const defaultSuccessHandler = (httpResponse, signingProperties) => { };
const s3ExpressHttpSigningMiddlewareOptions = _smithy_core__WEBPACK_IMPORTED_MODULE_0__.httpSigningMiddlewareOptions;
const s3ExpressHttpSigningMiddleware = (config) => (next, context) => async (args) => {
    if (!_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_1__.HttpRequest.isInstance(args.request)) {
        return next(args);
    }
    const smithyContext = (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_3__.getSmithyContext)(context);
    const scheme = smithyContext.selectedHttpAuthScheme;
    if (!scheme) {
        throw new Error(`No HttpAuthScheme was selected: unable to sign request`);
    }
    const { httpAuthOption: { signingProperties = {} }, identity, signer, } = scheme;
    let request;
    if (context.s3ExpressIdentity) {
        request = await (0,_signS3Express__WEBPACK_IMPORTED_MODULE_4__.signS3Express)(context.s3ExpressIdentity, signingProperties, args.request, await config.signer());
    }
    else {
        request = await signer.sign(args.request, identity, signingProperties);
    }
    const output = await next({
        ...args,
        request,
    }).catch((signer.errorHandler || defaultErrorHandler)(signingProperties));
    (signer.successHandler || defaultSuccessHandler)(output.response, signingProperties);
    return output;
};
const getS3ExpressHttpSigningPlugin = (config) => ({
    applyToStack: (clientStack) => {
        clientStack.addRelativeTo(s3ExpressHttpSigningMiddleware(config), _smithy_core__WEBPACK_IMPORTED_MODULE_0__.httpSigningMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/functions/s3ExpressMiddleware.js":
/*!******************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/functions/s3ExpressMiddleware.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getS3ExpressPlugin: () => (/* binding */ getS3ExpressPlugin),
/* harmony export */   s3ExpressMiddleware: () => (/* binding */ s3ExpressMiddleware),
/* harmony export */   s3ExpressMiddlewareOptions: () => (/* binding */ s3ExpressMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _aws_sdk_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/core */ "../node_modules/@aws-sdk/core/dist-es/submodules/client/setFeature.js");
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/constants.js");



const s3ExpressMiddleware = (options) => {
    return (next, context) => async (args) => {
        if (context.endpointV2) {
            const endpoint = context.endpointV2;
            const isS3ExpressAuth = endpoint.properties?.authSchemes?.[0]?.name === _constants__WEBPACK_IMPORTED_MODULE_1__.S3_EXPRESS_AUTH_SCHEME;
            const isS3ExpressBucket = endpoint.properties?.backend === _constants__WEBPACK_IMPORTED_MODULE_1__.S3_EXPRESS_BACKEND ||
                endpoint.properties?.bucketType === _constants__WEBPACK_IMPORTED_MODULE_1__.S3_EXPRESS_BUCKET_TYPE;
            if (isS3ExpressBucket) {
                (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_2__.setFeature)(context, "S3_EXPRESS_BUCKET", "J");
                context.isS3ExpressBucket = true;
            }
            if (isS3ExpressAuth) {
                const requestBucket = args.input.Bucket;
                if (requestBucket) {
                    const s3ExpressIdentity = await options.s3ExpressIdentityProvider.getS3ExpressIdentity(await options.credentials(), {
                        Bucket: requestBucket,
                    });
                    context.s3ExpressIdentity = s3ExpressIdentity;
                    if (_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(args.request) && s3ExpressIdentity.sessionToken) {
                        args.request.headers[_constants__WEBPACK_IMPORTED_MODULE_1__.SESSION_TOKEN_HEADER] = s3ExpressIdentity.sessionToken;
                    }
                }
            }
        }
        return next(args);
    };
};
const s3ExpressMiddlewareOptions = {
    name: "s3ExpressMiddleware",
    step: "build",
    tags: ["S3", "S3_EXPRESS"],
    override: true,
};
const getS3ExpressPlugin = (options) => ({
    applyToStack: (clientStack) => {
        clientStack.add(s3ExpressMiddleware(options), s3ExpressMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/functions/signS3Express.js":
/*!************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/functions/signS3Express.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   signS3Express: () => (/* binding */ signS3Express)
/* harmony export */ });
const signS3Express = async (s3ExpressIdentity, signingOptions, request, sigV4MultiRegionSigner) => {
    const signedRequest = await sigV4MultiRegionSigner.signWithCredentials(request, s3ExpressIdentity, {});
    if (signedRequest.headers["X-Amz-Security-Token"] || signedRequest.headers["x-amz-security-token"]) {
        throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");
    }
    return signedRequest;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/index.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/index.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_4__.NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS),
/* harmony export */   S3ExpressIdentityCache: () => (/* reexport safe */ _classes_S3ExpressIdentityCache__WEBPACK_IMPORTED_MODULE_0__.S3ExpressIdentityCache),
/* harmony export */   S3ExpressIdentityCacheEntry: () => (/* reexport safe */ _classes_S3ExpressIdentityCacheEntry__WEBPACK_IMPORTED_MODULE_1__.S3ExpressIdentityCacheEntry),
/* harmony export */   S3ExpressIdentityProviderImpl: () => (/* reexport safe */ _classes_S3ExpressIdentityProviderImpl__WEBPACK_IMPORTED_MODULE_2__.S3ExpressIdentityProviderImpl),
/* harmony export */   SignatureV4S3Express: () => (/* reexport safe */ _classes_SignatureV4S3Express__WEBPACK_IMPORTED_MODULE_3__.SignatureV4S3Express),
/* harmony export */   getS3ExpressHttpSigningPlugin: () => (/* reexport safe */ _functions_s3ExpressHttpSigningMiddleware__WEBPACK_IMPORTED_MODULE_6__.getS3ExpressHttpSigningPlugin),
/* harmony export */   getS3ExpressPlugin: () => (/* reexport safe */ _functions_s3ExpressMiddleware__WEBPACK_IMPORTED_MODULE_5__.getS3ExpressPlugin),
/* harmony export */   s3ExpressHttpSigningMiddleware: () => (/* reexport safe */ _functions_s3ExpressHttpSigningMiddleware__WEBPACK_IMPORTED_MODULE_6__.s3ExpressHttpSigningMiddleware),
/* harmony export */   s3ExpressHttpSigningMiddlewareOptions: () => (/* reexport safe */ _functions_s3ExpressHttpSigningMiddleware__WEBPACK_IMPORTED_MODULE_6__.s3ExpressHttpSigningMiddlewareOptions),
/* harmony export */   s3ExpressMiddleware: () => (/* reexport safe */ _functions_s3ExpressMiddleware__WEBPACK_IMPORTED_MODULE_5__.s3ExpressMiddleware),
/* harmony export */   s3ExpressMiddlewareOptions: () => (/* reexport safe */ _functions_s3ExpressMiddleware__WEBPACK_IMPORTED_MODULE_5__.s3ExpressMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _classes_S3ExpressIdentityCache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./classes/S3ExpressIdentityCache */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/S3ExpressIdentityCache.js");
/* harmony import */ var _classes_S3ExpressIdentityCacheEntry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./classes/S3ExpressIdentityCacheEntry */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/S3ExpressIdentityCacheEntry.js");
/* harmony import */ var _classes_S3ExpressIdentityProviderImpl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./classes/S3ExpressIdentityProviderImpl */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/S3ExpressIdentityProviderImpl.js");
/* harmony import */ var _classes_SignatureV4S3Express__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./classes/SignatureV4S3Express */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/classes/SignatureV4S3Express.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/constants.js");
/* harmony import */ var _functions_s3ExpressMiddleware__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./functions/s3ExpressMiddleware */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/functions/s3ExpressMiddleware.js");
/* harmony import */ var _functions_s3ExpressHttpSigningMiddleware__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./functions/s3ExpressHttpSigningMiddleware */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/functions/s3ExpressHttpSigningMiddleware.js");









/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3Configuration.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3Configuration.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveS3Config: () => (/* binding */ resolveS3Config)
/* harmony export */ });
/* harmony import */ var _s3_express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./s3-express */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/s3-express/index.js");

const resolveS3Config = (input, { session, }) => {
    const [s3ClientProvider, CreateSessionCommandCtor] = session;
    return {
        ...input,
        forcePathStyle: input.forcePathStyle ?? false,
        useAccelerateEndpoint: input.useAccelerateEndpoint ?? false,
        disableMultiregionAccessPoints: input.disableMultiregionAccessPoints ?? false,
        followRegionRedirects: input.followRegionRedirects ?? false,
        s3ExpressIdentityProvider: input.s3ExpressIdentityProvider ??
            new _s3_express__WEBPACK_IMPORTED_MODULE_0__.S3ExpressIdentityProviderImpl(async (key) => s3ClientProvider().send(new CreateSessionCommandCtor({
                Bucket: key,
            }))),
        bucketEndpoint: input.bucketEndpoint ?? false,
    };
};


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/throw-200-exceptions.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/throw-200-exceptions.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getThrow200ExceptionsPlugin: () => (/* binding */ getThrow200ExceptionsPlugin),
/* harmony export */   throw200ExceptionsMiddleware: () => (/* binding */ throw200ExceptionsMiddleware),
/* harmony export */   throw200ExceptionsMiddlewareOptions: () => (/* binding */ throw200ExceptionsMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_util_stream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-stream */ "../node_modules/@smithy/util-stream/dist-es/index.js");


const THROW_IF_EMPTY_BODY = {
    CopyObjectCommand: true,
    UploadPartCopyCommand: true,
    CompleteMultipartUploadCommand: true,
};
const MAX_BYTES_TO_INSPECT = 3000;
const throw200ExceptionsMiddleware = (config) => (next, context) => async (args) => {
    const result = await next(args);
    const { response } = result;
    if (!_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpResponse.isInstance(response)) {
        return result;
    }
    const { statusCode, body: sourceBody } = response;
    if (statusCode < 200 || statusCode >= 300) {
        return result;
    }
    const isSplittableStream = typeof sourceBody?.stream === "function" ||
        typeof sourceBody?.pipe === "function" ||
        typeof sourceBody?.tee === "function";
    if (!isSplittableStream) {
        return result;
    }
    let bodyCopy = sourceBody;
    let body = sourceBody;
    if (sourceBody && typeof sourceBody === "object" && !(sourceBody instanceof Uint8Array)) {
        [bodyCopy, body] = await (0,_smithy_util_stream__WEBPACK_IMPORTED_MODULE_1__.splitStream)(sourceBody);
    }
    response.body = body;
    const bodyBytes = await collectBody(bodyCopy, {
        streamCollector: async (stream) => {
            return (0,_smithy_util_stream__WEBPACK_IMPORTED_MODULE_1__.headStream)(stream, MAX_BYTES_TO_INSPECT);
        },
    });
    if (typeof bodyCopy?.destroy === "function") {
        bodyCopy.destroy();
    }
    const bodyStringTail = config.utf8Encoder(bodyBytes.subarray(bodyBytes.length - 16));
    if (bodyBytes.length === 0 && THROW_IF_EMPTY_BODY[context.commandName]) {
        const err = new Error("S3 aborted request");
        err.name = "InternalError";
        throw err;
    }
    if (bodyStringTail && bodyStringTail.endsWith("</Error>")) {
        response.statusCode = 400;
    }
    return result;
};
const collectBody = (streamBody = new Uint8Array(), context) => {
    if (streamBody instanceof Uint8Array) {
        return Promise.resolve(streamBody);
    }
    return context.streamCollector(streamBody) || Promise.resolve(new Uint8Array());
};
const throw200ExceptionsMiddlewareOptions = {
    relation: "after",
    toMiddleware: "deserializerMiddleware",
    tags: ["THROW_200_EXCEPTIONS", "S3"],
    name: "throw200ExceptionsMiddleware",
    override: true,
};
const getThrow200ExceptionsPlugin = (config) => ({
    applyToStack: (clientStack) => {
        clientStack.addRelativeTo(throw200ExceptionsMiddleware(config), throw200ExceptionsMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/validate-bucket-name.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/validate-bucket-name.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getValidateBucketNamePlugin: () => (/* binding */ getValidateBucketNamePlugin),
/* harmony export */   validateBucketNameMiddleware: () => (/* binding */ validateBucketNameMiddleware),
/* harmony export */   validateBucketNameMiddlewareOptions: () => (/* binding */ validateBucketNameMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _aws_sdk_util_arn_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/util-arn-parser */ "../node_modules/@aws-sdk/util-arn-parser/dist-es/index.js");
/* harmony import */ var _bucket_endpoint_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bucket-endpoint-middleware */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/bucket-endpoint-middleware.js");


function validateBucketNameMiddleware({ bucketEndpoint }) {
    return (next) => async (args) => {
        const { input: { Bucket }, } = args;
        if (!bucketEndpoint && typeof Bucket === "string" && !(0,_aws_sdk_util_arn_parser__WEBPACK_IMPORTED_MODULE_0__.validate)(Bucket) && Bucket.indexOf("/") >= 0) {
            const err = new Error(`Bucket name shouldn't contain '/', received '${Bucket}'`);
            err.name = "InvalidBucketName";
            throw err;
        }
        return next({ ...args });
    };
}
const validateBucketNameMiddlewareOptions = {
    step: "initialize",
    tags: ["VALIDATE_BUCKET_NAME"],
    name: "validateBucketNameMiddleware",
    override: true,
};
const getValidateBucketNamePlugin = (options) => ({
    applyToStack: (clientStack) => {
        clientStack.add(validateBucketNameMiddleware(options), validateBucketNameMiddlewareOptions);
        clientStack.addRelativeTo((0,_bucket_endpoint_middleware__WEBPACK_IMPORTED_MODULE_1__.bucketEndpointMiddleware)(options), _bucket_endpoint_middleware__WEBPACK_IMPORTED_MODULE_1__.bucketEndpointMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-ssec/dist-es/index.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-ssec/dist-es/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSsecPlugin: () => (/* binding */ getSsecPlugin),
/* harmony export */   isValidBase64EncodedSSECustomerKey: () => (/* binding */ isValidBase64EncodedSSECustomerKey),
/* harmony export */   ssecMiddleware: () => (/* binding */ ssecMiddleware),
/* harmony export */   ssecMiddlewareOptions: () => (/* binding */ ssecMiddlewareOptions)
/* harmony export */ });
function ssecMiddleware(options) {
    return (next) => async (args) => {
        const input = { ...args.input };
        const properties = [
            {
                target: "SSECustomerKey",
                hash: "SSECustomerKeyMD5",
            },
            {
                target: "CopySourceSSECustomerKey",
                hash: "CopySourceSSECustomerKeyMD5",
            },
        ];
        for (const prop of properties) {
            const value = input[prop.target];
            if (value) {
                let valueForHash;
                if (typeof value === "string") {
                    if (isValidBase64EncodedSSECustomerKey(value, options)) {
                        valueForHash = options.base64Decoder(value);
                    }
                    else {
                        valueForHash = options.utf8Decoder(value);
                        input[prop.target] = options.base64Encoder(valueForHash);
                    }
                }
                else {
                    valueForHash = ArrayBuffer.isView(value)
                        ? new Uint8Array(value.buffer, value.byteOffset, value.byteLength)
                        : new Uint8Array(value);
                    input[prop.target] = options.base64Encoder(valueForHash);
                }
                const hash = new options.md5();
                hash.update(valueForHash);
                input[prop.hash] = options.base64Encoder(await hash.digest());
            }
        }
        return next({
            ...args,
            input,
        });
    };
}
const ssecMiddlewareOptions = {
    name: "ssecMiddleware",
    step: "initialize",
    tags: ["SSE"],
    override: true,
};
const getSsecPlugin = (config) => ({
    applyToStack: (clientStack) => {
        clientStack.add(ssecMiddleware(config), ssecMiddlewareOptions);
    },
});
function isValidBase64EncodedSSECustomerKey(str, options) {
    const base64Regex = /^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;
    if (!base64Regex.test(str))
        return false;
    try {
        const decodedBytes = options.base64Decoder(str);
        return decodedBytes.length === 32;
    }
    catch {
        return false;
    }
}


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-user-agent/dist-es/check-features.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-user-agent/dist-es/check-features.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   checkFeatures: () => (/* binding */ checkFeatures)
/* harmony export */ });
/* harmony import */ var _aws_sdk_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/core */ "../node_modules/@aws-sdk/core/dist-es/submodules/client/setFeature.js");

const ACCOUNT_ID_ENDPOINT_REGEX = /\d{12}\.ddb/;
async function checkFeatures(context, config, args) {
    const request = args.request;
    if (request?.headers?.["smithy-protocol"] === "rpc-v2-cbor") {
        (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_0__.setFeature)(context, "PROTOCOL_RPC_V2_CBOR", "M");
    }
    if (typeof config.retryStrategy === "function") {
        const retryStrategy = await config.retryStrategy();
        if (typeof retryStrategy.acquireInitialRetryToken === "function") {
            if (retryStrategy.constructor?.name?.includes("Adaptive")) {
                (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_0__.setFeature)(context, "RETRY_MODE_ADAPTIVE", "F");
            }
            else {
                (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_0__.setFeature)(context, "RETRY_MODE_STANDARD", "E");
            }
        }
        else {
            (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_0__.setFeature)(context, "RETRY_MODE_LEGACY", "D");
        }
    }
    if (typeof config.accountIdEndpointMode === "function") {
        const endpointV2 = context.endpointV2;
        if (String(endpointV2?.url?.hostname).match(ACCOUNT_ID_ENDPOINT_REGEX)) {
            (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_0__.setFeature)(context, "ACCOUNT_ID_ENDPOINT", "O");
        }
        switch (await config.accountIdEndpointMode?.()) {
            case "disabled":
                (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_0__.setFeature)(context, "ACCOUNT_ID_MODE_DISABLED", "Q");
                break;
            case "preferred":
                (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_0__.setFeature)(context, "ACCOUNT_ID_MODE_PREFERRED", "P");
                break;
            case "required":
                (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_0__.setFeature)(context, "ACCOUNT_ID_MODE_REQUIRED", "R");
                break;
        }
    }
    const identity = context.__smithy_context?.selectedHttpAuthScheme?.identity;
    if (identity?.$source) {
        const credentials = identity;
        if (credentials.accountId) {
            (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_0__.setFeature)(context, "RESOLVED_ACCOUNT_ID", "T");
        }
        for (const [key, value] of Object.entries(credentials.$source ?? {})) {
            (0,_aws_sdk_core__WEBPACK_IMPORTED_MODULE_0__.setFeature)(context, key, value);
        }
    }
}


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-user-agent/dist-es/configurations.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-user-agent/dist-es/configurations.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_UA_APP_ID: () => (/* binding */ DEFAULT_UA_APP_ID),
/* harmony export */   resolveUserAgentConfig: () => (/* binding */ resolveUserAgentConfig)
/* harmony export */ });
/* harmony import */ var _smithy_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/core */ "../node_modules/@smithy/core/dist-es/index.js");

const DEFAULT_UA_APP_ID = undefined;
function isValidUserAgentAppId(appId) {
    if (appId === undefined) {
        return true;
    }
    return typeof appId === "string" && appId.length <= 50;
}
function resolveUserAgentConfig(input) {
    const normalizedAppIdProvider = (0,_smithy_core__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(input.userAgentAppId ?? DEFAULT_UA_APP_ID);
    return {
        ...input,
        customUserAgent: typeof input.customUserAgent === "string" ? [[input.customUserAgent]] : input.customUserAgent,
        userAgentAppId: async () => {
            const appId = await normalizedAppIdProvider();
            if (!isValidUserAgentAppId(appId)) {
                const logger = input.logger?.constructor?.name === "NoOpLogger" || !input.logger ? console : input.logger;
                if (typeof appId !== "string") {
                    logger?.warn("userAgentAppId must be a string or undefined.");
                }
                else if (appId.length > 50) {
                    logger?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.");
                }
            }
            return appId;
        },
    };
}


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-user-agent/dist-es/constants.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-user-agent/dist-es/constants.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SPACE: () => (/* binding */ SPACE),
/* harmony export */   UA_ESCAPE_CHAR: () => (/* binding */ UA_ESCAPE_CHAR),
/* harmony export */   UA_NAME_ESCAPE_REGEX: () => (/* binding */ UA_NAME_ESCAPE_REGEX),
/* harmony export */   UA_NAME_SEPARATOR: () => (/* binding */ UA_NAME_SEPARATOR),
/* harmony export */   UA_VALUE_ESCAPE_REGEX: () => (/* binding */ UA_VALUE_ESCAPE_REGEX),
/* harmony export */   USER_AGENT: () => (/* binding */ USER_AGENT),
/* harmony export */   X_AMZ_USER_AGENT: () => (/* binding */ X_AMZ_USER_AGENT)
/* harmony export */ });
const USER_AGENT = "user-agent";
const X_AMZ_USER_AGENT = "x-amz-user-agent";
const SPACE = " ";
const UA_NAME_SEPARATOR = "/";
const UA_NAME_ESCAPE_REGEX = /[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;
const UA_VALUE_ESCAPE_REGEX = /[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g;
const UA_ESCAPE_CHAR = "-";


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-user-agent/dist-es/encode-features.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-user-agent/dist-es/encode-features.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   encodeFeatures: () => (/* binding */ encodeFeatures)
/* harmony export */ });
const BYTE_LIMIT = 1024;
function encodeFeatures(features) {
    let buffer = "";
    for (const key in features) {
        const val = features[key];
        if (buffer.length + val.length + 1 <= BYTE_LIMIT) {
            if (buffer.length) {
                buffer += "," + val;
            }
            else {
                buffer += val;
            }
            continue;
        }
        break;
    }
    return buffer;
}


/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-user-agent/dist-es/index.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-user-agent/dist-es/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_UA_APP_ID: () => (/* reexport safe */ _configurations__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_UA_APP_ID),
/* harmony export */   getUserAgentMiddlewareOptions: () => (/* reexport safe */ _user_agent_middleware__WEBPACK_IMPORTED_MODULE_1__.getUserAgentMiddlewareOptions),
/* harmony export */   getUserAgentPlugin: () => (/* reexport safe */ _user_agent_middleware__WEBPACK_IMPORTED_MODULE_1__.getUserAgentPlugin),
/* harmony export */   resolveUserAgentConfig: () => (/* reexport safe */ _configurations__WEBPACK_IMPORTED_MODULE_0__.resolveUserAgentConfig),
/* harmony export */   userAgentMiddleware: () => (/* reexport safe */ _user_agent_middleware__WEBPACK_IMPORTED_MODULE_1__.userAgentMiddleware)
/* harmony export */ });
/* harmony import */ var _configurations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./configurations */ "../node_modules/@aws-sdk/middleware-user-agent/dist-es/configurations.js");
/* harmony import */ var _user_agent_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./user-agent-middleware */ "../node_modules/@aws-sdk/middleware-user-agent/dist-es/user-agent-middleware.js");




/***/ }),

/***/ "../node_modules/@aws-sdk/middleware-user-agent/dist-es/user-agent-middleware.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/middleware-user-agent/dist-es/user-agent-middleware.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getUserAgentMiddlewareOptions: () => (/* binding */ getUserAgentMiddlewareOptions),
/* harmony export */   getUserAgentPlugin: () => (/* binding */ getUserAgentPlugin),
/* harmony export */   userAgentMiddleware: () => (/* binding */ userAgentMiddleware)
/* harmony export */ });
/* harmony import */ var _aws_sdk_util_endpoints__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/util-endpoints */ "../node_modules/@aws-sdk/util-endpoints/dist-es/index.js");
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _check_features__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./check-features */ "../node_modules/@aws-sdk/middleware-user-agent/dist-es/check-features.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/middleware-user-agent/dist-es/constants.js");
/* harmony import */ var _encode_features__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./encode-features */ "../node_modules/@aws-sdk/middleware-user-agent/dist-es/encode-features.js");





const userAgentMiddleware = (options) => (next, context) => async (args) => {
    const { request } = args;
    if (!_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_1__.HttpRequest.isInstance(request)) {
        return next(args);
    }
    const { headers } = request;
    const userAgent = context?.userAgent?.map(escapeUserAgent) || [];
    const defaultUserAgent = (await options.defaultUserAgentProvider()).map(escapeUserAgent);
    await (0,_check_features__WEBPACK_IMPORTED_MODULE_2__.checkFeatures)(context, options, args);
    const awsContext = context;
    defaultUserAgent.push(`m/${(0,_encode_features__WEBPACK_IMPORTED_MODULE_4__.encodeFeatures)(Object.assign({}, context.__smithy_context?.features, awsContext.__aws_sdk_context?.features))}`);
    const customUserAgent = options?.customUserAgent?.map(escapeUserAgent) || [];
    const appId = await options.userAgentAppId();
    if (appId) {
        defaultUserAgent.push(escapeUserAgent([`app/${appId}`]));
    }
    const prefix = (0,_aws_sdk_util_endpoints__WEBPACK_IMPORTED_MODULE_0__.getUserAgentPrefix)();
    const sdkUserAgentValue = (prefix ? [prefix] : [])
        .concat([...defaultUserAgent, ...userAgent, ...customUserAgent])
        .join(_constants__WEBPACK_IMPORTED_MODULE_3__.SPACE);
    const normalUAValue = [
        ...defaultUserAgent.filter((section) => section.startsWith("aws-sdk-")),
        ...customUserAgent,
    ].join(_constants__WEBPACK_IMPORTED_MODULE_3__.SPACE);
    if (options.runtime !== "browser") {
        if (normalUAValue) {
            headers[_constants__WEBPACK_IMPORTED_MODULE_3__.X_AMZ_USER_AGENT] = headers[_constants__WEBPACK_IMPORTED_MODULE_3__.X_AMZ_USER_AGENT]
                ? `${headers[_constants__WEBPACK_IMPORTED_MODULE_3__.USER_AGENT]} ${normalUAValue}`
                : normalUAValue;
        }
        headers[_constants__WEBPACK_IMPORTED_MODULE_3__.USER_AGENT] = sdkUserAgentValue;
    }
    else {
        headers[_constants__WEBPACK_IMPORTED_MODULE_3__.X_AMZ_USER_AGENT] = sdkUserAgentValue;
    }
    return next({
        ...args,
        request,
    });
};
const escapeUserAgent = (userAgentPair) => {
    const name = userAgentPair[0]
        .split(_constants__WEBPACK_IMPORTED_MODULE_3__.UA_NAME_SEPARATOR)
        .map((part) => part.replace(_constants__WEBPACK_IMPORTED_MODULE_3__.UA_NAME_ESCAPE_REGEX, _constants__WEBPACK_IMPORTED_MODULE_3__.UA_ESCAPE_CHAR))
        .join(_constants__WEBPACK_IMPORTED_MODULE_3__.UA_NAME_SEPARATOR);
    const version = userAgentPair[1]?.replace(_constants__WEBPACK_IMPORTED_MODULE_3__.UA_VALUE_ESCAPE_REGEX, _constants__WEBPACK_IMPORTED_MODULE_3__.UA_ESCAPE_CHAR);
    const prefixSeparatorIndex = name.indexOf(_constants__WEBPACK_IMPORTED_MODULE_3__.UA_NAME_SEPARATOR);
    const prefix = name.substring(0, prefixSeparatorIndex);
    let uaName = name.substring(prefixSeparatorIndex + 1);
    if (prefix === "api") {
        uaName = uaName.toLowerCase();
    }
    return [prefix, uaName, version]
        .filter((item) => item && item.length > 0)
        .reduce((acc, item, index) => {
        switch (index) {
            case 0:
                return item;
            case 1:
                return `${acc}/${item}`;
            default:
                return `${acc}#${item}`;
        }
    }, "");
};
const getUserAgentMiddlewareOptions = {
    name: "getUserAgentMiddleware",
    step: "build",
    priority: "low",
    tags: ["SET_USER_AGENT", "USER_AGENT"],
    override: true,
};
const getUserAgentPlugin = (config) => ({
    applyToStack: (clientStack) => {
        clientStack.add(userAgentMiddleware(config), getUserAgentMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@aws-sdk/region-config-resolver/dist-es/extensions/index.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/region-config-resolver/dist-es/extensions/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getAwsRegionExtensionConfiguration: () => (/* binding */ getAwsRegionExtensionConfiguration),
/* harmony export */   resolveAwsRegionExtensionConfiguration: () => (/* binding */ resolveAwsRegionExtensionConfiguration)
/* harmony export */ });
const getAwsRegionExtensionConfiguration = (runtimeConfig) => {
    let runtimeConfigRegion = async () => {
        if (runtimeConfig.region === undefined) {
            throw new Error("Region is missing from runtimeConfig");
        }
        const region = runtimeConfig.region;
        if (typeof region === "string") {
            return region;
        }
        return region();
    };
    return {
        setRegion(region) {
            runtimeConfigRegion = region;
        },
        region() {
            return runtimeConfigRegion;
        },
    };
};
const resolveAwsRegionExtensionConfiguration = (awsRegionExtensionConfiguration) => {
    return {
        region: awsRegionExtensionConfiguration.region(),
    };
};


/***/ }),

/***/ "../node_modules/@aws-sdk/region-config-resolver/dist-es/index.js":
/*!************************************************************************!*\
  !*** ../node_modules/@aws-sdk/region-config-resolver/dist-es/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_REGION_CONFIG_FILE_OPTIONS: () => (/* reexport safe */ _regionConfig__WEBPACK_IMPORTED_MODULE_1__.NODE_REGION_CONFIG_FILE_OPTIONS),
/* harmony export */   NODE_REGION_CONFIG_OPTIONS: () => (/* reexport safe */ _regionConfig__WEBPACK_IMPORTED_MODULE_1__.NODE_REGION_CONFIG_OPTIONS),
/* harmony export */   REGION_ENV_NAME: () => (/* reexport safe */ _regionConfig__WEBPACK_IMPORTED_MODULE_1__.REGION_ENV_NAME),
/* harmony export */   REGION_INI_NAME: () => (/* reexport safe */ _regionConfig__WEBPACK_IMPORTED_MODULE_1__.REGION_INI_NAME),
/* harmony export */   getAwsRegionExtensionConfiguration: () => (/* reexport safe */ _extensions__WEBPACK_IMPORTED_MODULE_0__.getAwsRegionExtensionConfiguration),
/* harmony export */   resolveAwsRegionExtensionConfiguration: () => (/* reexport safe */ _extensions__WEBPACK_IMPORTED_MODULE_0__.resolveAwsRegionExtensionConfiguration),
/* harmony export */   resolveRegionConfig: () => (/* reexport safe */ _regionConfig__WEBPACK_IMPORTED_MODULE_1__.resolveRegionConfig)
/* harmony export */ });
/* harmony import */ var _extensions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./extensions */ "../node_modules/@aws-sdk/region-config-resolver/dist-es/extensions/index.js");
/* harmony import */ var _regionConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./regionConfig */ "../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/index.js");




/***/ }),

/***/ "../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/config.js":
/*!**************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/config.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_REGION_CONFIG_FILE_OPTIONS: () => (/* binding */ NODE_REGION_CONFIG_FILE_OPTIONS),
/* harmony export */   NODE_REGION_CONFIG_OPTIONS: () => (/* binding */ NODE_REGION_CONFIG_OPTIONS),
/* harmony export */   REGION_ENV_NAME: () => (/* binding */ REGION_ENV_NAME),
/* harmony export */   REGION_INI_NAME: () => (/* binding */ REGION_INI_NAME)
/* harmony export */ });
const REGION_ENV_NAME = "AWS_REGION";
const REGION_INI_NAME = "region";
const NODE_REGION_CONFIG_OPTIONS = {
    environmentVariableSelector: (env) => env[REGION_ENV_NAME],
    configFileSelector: (profile) => profile[REGION_INI_NAME],
    default: () => {
        throw new Error("Region is missing");
    },
};
const NODE_REGION_CONFIG_FILE_OPTIONS = {
    preferredFile: "credentials",
};


/***/ }),

/***/ "../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/getRealRegion.js":
/*!*********************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/getRealRegion.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRealRegion: () => (/* binding */ getRealRegion)
/* harmony export */ });
/* harmony import */ var _isFipsRegion__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isFipsRegion */ "../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/isFipsRegion.js");

const getRealRegion = (region) => (0,_isFipsRegion__WEBPACK_IMPORTED_MODULE_0__.isFipsRegion)(region)
    ? ["fips-aws-global", "aws-fips"].includes(region)
        ? "us-east-1"
        : region.replace(/fips-(dkr-|prod-)?|-fips/, "")
    : region;


/***/ }),

/***/ "../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/index.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/index.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_REGION_CONFIG_FILE_OPTIONS: () => (/* reexport safe */ _config__WEBPACK_IMPORTED_MODULE_0__.NODE_REGION_CONFIG_FILE_OPTIONS),
/* harmony export */   NODE_REGION_CONFIG_OPTIONS: () => (/* reexport safe */ _config__WEBPACK_IMPORTED_MODULE_0__.NODE_REGION_CONFIG_OPTIONS),
/* harmony export */   REGION_ENV_NAME: () => (/* reexport safe */ _config__WEBPACK_IMPORTED_MODULE_0__.REGION_ENV_NAME),
/* harmony export */   REGION_INI_NAME: () => (/* reexport safe */ _config__WEBPACK_IMPORTED_MODULE_0__.REGION_INI_NAME),
/* harmony export */   resolveRegionConfig: () => (/* reexport safe */ _resolveRegionConfig__WEBPACK_IMPORTED_MODULE_1__.resolveRegionConfig)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/config.js");
/* harmony import */ var _resolveRegionConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./resolveRegionConfig */ "../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/resolveRegionConfig.js");




/***/ }),

/***/ "../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/isFipsRegion.js":
/*!********************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/isFipsRegion.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isFipsRegion: () => (/* binding */ isFipsRegion)
/* harmony export */ });
const isFipsRegion = (region) => typeof region === "string" && (region.startsWith("fips-") || region.endsWith("-fips"));


/***/ }),

/***/ "../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/resolveRegionConfig.js":
/*!***************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/resolveRegionConfig.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveRegionConfig: () => (/* binding */ resolveRegionConfig)
/* harmony export */ });
/* harmony import */ var _getRealRegion__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getRealRegion */ "../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/getRealRegion.js");
/* harmony import */ var _isFipsRegion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isFipsRegion */ "../node_modules/@aws-sdk/region-config-resolver/dist-es/regionConfig/isFipsRegion.js");


const resolveRegionConfig = (input) => {
    const { region, useFipsEndpoint } = input;
    if (!region) {
        throw new Error("Region is missing");
    }
    return {
        ...input,
        region: async () => {
            if (typeof region === "string") {
                return (0,_getRealRegion__WEBPACK_IMPORTED_MODULE_0__.getRealRegion)(region);
            }
            const providedRegion = await region();
            return (0,_getRealRegion__WEBPACK_IMPORTED_MODULE_0__.getRealRegion)(providedRegion);
        },
        useFipsEndpoint: async () => {
            const providedRegion = typeof region === "string" ? region : await region();
            if ((0,_isFipsRegion__WEBPACK_IMPORTED_MODULE_1__.isFipsRegion)(providedRegion)) {
                return true;
            }
            return typeof useFipsEndpoint !== "function" ? Promise.resolve(!!useFipsEndpoint) : useFipsEndpoint();
        },
    };
};


/***/ }),

/***/ "../node_modules/@aws-sdk/s3-request-presigner/dist-es/constants.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@aws-sdk/s3-request-presigner/dist-es/constants.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ALGORITHM_IDENTIFIER: () => (/* binding */ ALGORITHM_IDENTIFIER),
/* harmony export */   ALGORITHM_QUERY_PARAM: () => (/* binding */ ALGORITHM_QUERY_PARAM),
/* harmony export */   AMZ_DATE_QUERY_PARAM: () => (/* binding */ AMZ_DATE_QUERY_PARAM),
/* harmony export */   CREDENTIAL_QUERY_PARAM: () => (/* binding */ CREDENTIAL_QUERY_PARAM),
/* harmony export */   EXPIRES_QUERY_PARAM: () => (/* binding */ EXPIRES_QUERY_PARAM),
/* harmony export */   HOST_HEADER: () => (/* binding */ HOST_HEADER),
/* harmony export */   SHA256_HEADER: () => (/* binding */ SHA256_HEADER),
/* harmony export */   SIGNED_HEADERS_QUERY_PARAM: () => (/* binding */ SIGNED_HEADERS_QUERY_PARAM),
/* harmony export */   UNSIGNED_PAYLOAD: () => (/* binding */ UNSIGNED_PAYLOAD)
/* harmony export */ });
const UNSIGNED_PAYLOAD = "UNSIGNED-PAYLOAD";
const SHA256_HEADER = "X-Amz-Content-Sha256";
const ALGORITHM_QUERY_PARAM = "X-Amz-Algorithm";
const CREDENTIAL_QUERY_PARAM = "X-Amz-Credential";
const AMZ_DATE_QUERY_PARAM = "X-Amz-Date";
const SIGNED_HEADERS_QUERY_PARAM = "X-Amz-SignedHeaders";
const EXPIRES_QUERY_PARAM = "X-Amz-Expires";
const HOST_HEADER = "host";
const ALGORITHM_IDENTIFIER = "AWS4-HMAC-SHA256";


/***/ }),

/***/ "../node_modules/@aws-sdk/s3-request-presigner/dist-es/getSignedUrl.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@aws-sdk/s3-request-presigner/dist-es/getSignedUrl.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSignedUrl: () => (/* binding */ getSignedUrl)
/* harmony export */ });
/* harmony import */ var _aws_sdk_util_format_url__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/util-format-url */ "../node_modules/@aws-sdk/util-format-url/dist-es/index.js");
/* harmony import */ var _smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/middleware-endpoint */ "../node_modules/@smithy/middleware-endpoint/dist-es/index.js");
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _presigner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./presigner */ "../node_modules/@aws-sdk/s3-request-presigner/dist-es/presigner.js");




const getSignedUrl = async (client, command, options = {}) => {
    let s3Presigner;
    let region;
    if (typeof client.config.endpointProvider === "function") {
        const endpointV2 = await (0,_smithy_middleware_endpoint__WEBPACK_IMPORTED_MODULE_1__.getEndpointFromInstructions)(command.input, command.constructor, client.config);
        const authScheme = endpointV2.properties?.authSchemes?.[0];
        if (authScheme?.name === "sigv4a") {
            region = authScheme?.signingRegionSet?.join(",");
        }
        else {
            region = authScheme?.signingRegion;
        }
        s3Presigner = new _presigner__WEBPACK_IMPORTED_MODULE_3__.S3RequestPresigner({
            ...client.config,
            signingName: authScheme?.signingName,
            region: async () => region,
        });
    }
    else {
        s3Presigner = new _presigner__WEBPACK_IMPORTED_MODULE_3__.S3RequestPresigner(client.config);
    }
    const presignInterceptMiddleware = (next, context) => async (args) => {
        const { request } = args;
        if (!_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_2__.HttpRequest.isInstance(request)) {
            throw new Error("Request to be presigned is not an valid HTTP request.");
        }
        delete request.headers["amz-sdk-invocation-id"];
        delete request.headers["amz-sdk-request"];
        delete request.headers["x-amz-user-agent"];
        let presigned;
        const presignerOptions = {
            ...options,
            signingRegion: options.signingRegion ?? context["signing_region"] ?? region,
            signingService: options.signingService ?? context["signing_service"],
        };
        if (context.s3ExpressIdentity) {
            presigned = await s3Presigner.presignWithCredentials(request, context.s3ExpressIdentity, presignerOptions);
        }
        else {
            presigned = await s3Presigner.presign(request, presignerOptions);
        }
        return {
            response: {},
            output: {
                $metadata: { httpStatusCode: 200 },
                presigned,
            },
        };
    };
    const middlewareName = "presignInterceptMiddleware";
    const clientStack = client.middlewareStack.clone();
    clientStack.addRelativeTo(presignInterceptMiddleware, {
        name: middlewareName,
        relation: "before",
        toMiddleware: "awsAuthMiddleware",
        override: true,
    });
    const handler = command.resolveMiddleware(clientStack, client.config, {});
    const { output } = await handler({ input: command.input });
    const { presigned } = output;
    return (0,_aws_sdk_util_format_url__WEBPACK_IMPORTED_MODULE_0__.formatUrl)(presigned);
};


/***/ }),

/***/ "../node_modules/@aws-sdk/s3-request-presigner/dist-es/index.js":
/*!**********************************************************************!*\
  !*** ../node_modules/@aws-sdk/s3-request-presigner/dist-es/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S3RequestPresigner: () => (/* reexport safe */ _presigner__WEBPACK_IMPORTED_MODULE_1__.S3RequestPresigner),
/* harmony export */   getSignedUrl: () => (/* reexport safe */ _getSignedUrl__WEBPACK_IMPORTED_MODULE_0__.getSignedUrl)
/* harmony export */ });
/* harmony import */ var _getSignedUrl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getSignedUrl */ "../node_modules/@aws-sdk/s3-request-presigner/dist-es/getSignedUrl.js");
/* harmony import */ var _presigner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./presigner */ "../node_modules/@aws-sdk/s3-request-presigner/dist-es/presigner.js");




/***/ }),

/***/ "../node_modules/@aws-sdk/s3-request-presigner/dist-es/presigner.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@aws-sdk/s3-request-presigner/dist-es/presigner.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S3RequestPresigner: () => (/* binding */ S3RequestPresigner)
/* harmony export */ });
/* harmony import */ var _aws_sdk_signature_v4_multi_region__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/signature-v4-multi-region */ "../node_modules/@aws-sdk/signature-v4-multi-region/dist-es/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "../node_modules/@aws-sdk/s3-request-presigner/dist-es/constants.js");


class S3RequestPresigner {
    signer;
    constructor(options) {
        const resolvedOptions = {
            service: options.signingName || options.service || "s3",
            uriEscapePath: options.uriEscapePath || false,
            applyChecksum: options.applyChecksum || false,
            ...options,
        };
        this.signer = new _aws_sdk_signature_v4_multi_region__WEBPACK_IMPORTED_MODULE_0__.SignatureV4MultiRegion(resolvedOptions);
    }
    presign(requestToSign, { unsignableHeaders = new Set(), hoistableHeaders = new Set(), unhoistableHeaders = new Set(), ...options } = {}) {
        this.prepareRequest(requestToSign, {
            unsignableHeaders,
            unhoistableHeaders,
            hoistableHeaders,
        });
        return this.signer.presign(requestToSign, {
            expiresIn: 900,
            unsignableHeaders,
            unhoistableHeaders,
            ...options,
        });
    }
    presignWithCredentials(requestToSign, credentials, { unsignableHeaders = new Set(), hoistableHeaders = new Set(), unhoistableHeaders = new Set(), ...options } = {}) {
        this.prepareRequest(requestToSign, {
            unsignableHeaders,
            unhoistableHeaders,
            hoistableHeaders,
        });
        return this.signer.presignWithCredentials(requestToSign, credentials, {
            expiresIn: 900,
            unsignableHeaders,
            unhoistableHeaders,
            ...options,
        });
    }
    prepareRequest(requestToSign, { unsignableHeaders = new Set(), unhoistableHeaders = new Set(), hoistableHeaders = new Set(), } = {}) {
        unsignableHeaders.add("content-type");
        Object.keys(requestToSign.headers)
            .map((header) => header.toLowerCase())
            .filter((header) => header.startsWith("x-amz-server-side-encryption"))
            .forEach((header) => {
            if (!hoistableHeaders.has(header)) {
                unhoistableHeaders.add(header);
            }
        });
        requestToSign.headers[_constants__WEBPACK_IMPORTED_MODULE_1__.SHA256_HEADER] = _constants__WEBPACK_IMPORTED_MODULE_1__.UNSIGNED_PAYLOAD;
        const currentHostHeader = requestToSign.headers.host;
        const port = requestToSign.port;
        const expectedHostHeader = `${requestToSign.hostname}${requestToSign.port != null ? ":" + port : ""}`;
        if (!currentHostHeader || (currentHostHeader === requestToSign.hostname && requestToSign.port != null)) {
            requestToSign.headers.host = expectedHostHeader;
        }
    }
}


/***/ }),

/***/ "../node_modules/@aws-sdk/signature-v4-multi-region/dist-es/SignatureV4MultiRegion.js":
/*!********************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/signature-v4-multi-region/dist-es/SignatureV4MultiRegion.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SignatureV4MultiRegion: () => (/* binding */ SignatureV4MultiRegion)
/* harmony export */ });
/* harmony import */ var _aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/middleware-sdk-s3 */ "../node_modules/@aws-sdk/middleware-sdk-s3/dist-es/index.js");
/* harmony import */ var _signature_v4_crt_container__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./signature-v4-crt-container */ "../node_modules/@aws-sdk/signature-v4-multi-region/dist-es/signature-v4-crt-container.js");


class SignatureV4MultiRegion {
    sigv4aSigner;
    sigv4Signer;
    signerOptions;
    constructor(options) {
        this.sigv4Signer = new _aws_sdk_middleware_sdk_s3__WEBPACK_IMPORTED_MODULE_0__.SignatureV4S3Express(options);
        this.signerOptions = options;
    }
    async sign(requestToSign, options = {}) {
        if (options.signingRegion === "*") {
            if (this.signerOptions.runtime !== "node")
                throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");
            return this.getSigv4aSigner().sign(requestToSign, options);
        }
        return this.sigv4Signer.sign(requestToSign, options);
    }
    async signWithCredentials(requestToSign, credentials, options = {}) {
        if (options.signingRegion === "*") {
            if (this.signerOptions.runtime !== "node")
                throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");
            return this.getSigv4aSigner().signWithCredentials(requestToSign, credentials, options);
        }
        return this.sigv4Signer.signWithCredentials(requestToSign, credentials, options);
    }
    async presign(originalRequest, options = {}) {
        if (options.signingRegion === "*") {
            if (this.signerOptions.runtime !== "node")
                throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");
            return this.getSigv4aSigner().presign(originalRequest, options);
        }
        return this.sigv4Signer.presign(originalRequest, options);
    }
    async presignWithCredentials(originalRequest, credentials, options = {}) {
        if (options.signingRegion === "*") {
            throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");
        }
        return this.sigv4Signer.presignWithCredentials(originalRequest, credentials, options);
    }
    getSigv4aSigner() {
        if (!this.sigv4aSigner) {
            let CrtSignerV4 = null;
            try {
                CrtSignerV4 = _signature_v4_crt_container__WEBPACK_IMPORTED_MODULE_1__.signatureV4CrtContainer.CrtSignerV4;
                if (typeof CrtSignerV4 !== "function")
                    throw new Error();
            }
            catch (e) {
                e.message =
                    `${e.message}\n` +
                        `Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. \n` +
                        `You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] ` +
                        `or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. \n` +
                        "For more information please go to " +
                        "https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt";
                throw e;
            }
            this.sigv4aSigner = new CrtSignerV4({
                ...this.signerOptions,
                signingAlgorithm: 1,
            });
        }
        return this.sigv4aSigner;
    }
}


/***/ }),

/***/ "../node_modules/@aws-sdk/signature-v4-multi-region/dist-es/index.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@aws-sdk/signature-v4-multi-region/dist-es/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SignatureV4MultiRegion: () => (/* reexport safe */ _SignatureV4MultiRegion__WEBPACK_IMPORTED_MODULE_0__.SignatureV4MultiRegion),
/* harmony export */   signatureV4CrtContainer: () => (/* reexport safe */ _signature_v4_crt_container__WEBPACK_IMPORTED_MODULE_1__.signatureV4CrtContainer)
/* harmony export */ });
/* harmony import */ var _SignatureV4MultiRegion__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SignatureV4MultiRegion */ "../node_modules/@aws-sdk/signature-v4-multi-region/dist-es/SignatureV4MultiRegion.js");
/* harmony import */ var _signature_v4_crt_container__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./signature-v4-crt-container */ "../node_modules/@aws-sdk/signature-v4-multi-region/dist-es/signature-v4-crt-container.js");




/***/ }),

/***/ "../node_modules/@aws-sdk/signature-v4-multi-region/dist-es/signature-v4-crt-container.js":
/*!************************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/signature-v4-multi-region/dist-es/signature-v4-crt-container.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   signatureV4CrtContainer: () => (/* binding */ signatureV4CrtContainer)
/* harmony export */ });
const signatureV4CrtContainer = {
    CrtSignerV4: null,
};


/***/ }),

/***/ "../node_modules/@aws-sdk/util-arn-parser/dist-es/index.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-arn-parser/dist-es/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   build: () => (/* binding */ build),
/* harmony export */   parse: () => (/* binding */ parse),
/* harmony export */   validate: () => (/* binding */ validate)
/* harmony export */ });
const validate = (str) => typeof str === "string" && str.indexOf("arn:") === 0 && str.split(":").length >= 6;
const parse = (arn) => {
    const segments = arn.split(":");
    if (segments.length < 6 || segments[0] !== "arn")
        throw new Error("Malformed ARN");
    const [, partition, service, region, accountId, ...resource] = segments;
    return {
        partition,
        service,
        region,
        accountId,
        resource: resource.join(":"),
    };
};
const build = (arnObject) => {
    const { partition = "aws", service, region, accountId, resource } = arnObject;
    if ([service, region, accountId, resource].some((segment) => typeof segment !== "string")) {
        throw new Error("Input ARN object is invalid");
    }
    return `arn:${partition}:${service}:${region}:${accountId}:${resource}`;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/aws.js":
/*!**************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/aws.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   awsEndpointFunctions: () => (/* binding */ awsEndpointFunctions)
/* harmony export */ });
/* harmony import */ var _smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-endpoints */ "../node_modules/@smithy/util-endpoints/dist-es/index.js");
/* harmony import */ var _lib_aws_isVirtualHostableS3Bucket__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/aws/isVirtualHostableS3Bucket */ "../node_modules/@aws-sdk/util-endpoints/dist-es/lib/aws/isVirtualHostableS3Bucket.js");
/* harmony import */ var _lib_aws_parseArn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/aws/parseArn */ "../node_modules/@aws-sdk/util-endpoints/dist-es/lib/aws/parseArn.js");
/* harmony import */ var _lib_aws_partition__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/aws/partition */ "../node_modules/@aws-sdk/util-endpoints/dist-es/lib/aws/partition.js");




const awsEndpointFunctions = {
    isVirtualHostableS3Bucket: _lib_aws_isVirtualHostableS3Bucket__WEBPACK_IMPORTED_MODULE_1__.isVirtualHostableS3Bucket,
    parseArn: _lib_aws_parseArn__WEBPACK_IMPORTED_MODULE_2__.parseArn,
    partition: _lib_aws_partition__WEBPACK_IMPORTED_MODULE_3__.partition,
};
_smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_0__.customEndpointFunctions.aws = awsEndpointFunctions;


/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/index.js":
/*!****************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EndpointError: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_4__.EndpointError),
/* harmony export */   awsEndpointFunctions: () => (/* reexport safe */ _aws__WEBPACK_IMPORTED_MODULE_0__.awsEndpointFunctions),
/* harmony export */   getUserAgentPrefix: () => (/* reexport safe */ _lib_aws_partition__WEBPACK_IMPORTED_MODULE_1__.getUserAgentPrefix),
/* harmony export */   isIpAddress: () => (/* reexport safe */ _lib_isIpAddress__WEBPACK_IMPORTED_MODULE_2__.isIpAddress),
/* harmony export */   partition: () => (/* reexport safe */ _lib_aws_partition__WEBPACK_IMPORTED_MODULE_1__.partition),
/* harmony export */   resolveEndpoint: () => (/* reexport safe */ _resolveEndpoint__WEBPACK_IMPORTED_MODULE_3__.resolveEndpoint),
/* harmony export */   setPartitionInfo: () => (/* reexport safe */ _lib_aws_partition__WEBPACK_IMPORTED_MODULE_1__.setPartitionInfo),
/* harmony export */   useDefaultPartitionInfo: () => (/* reexport safe */ _lib_aws_partition__WEBPACK_IMPORTED_MODULE_1__.useDefaultPartitionInfo)
/* harmony export */ });
/* harmony import */ var _aws__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./aws */ "../node_modules/@aws-sdk/util-endpoints/dist-es/aws.js");
/* harmony import */ var _lib_aws_partition__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/aws/partition */ "../node_modules/@aws-sdk/util-endpoints/dist-es/lib/aws/partition.js");
/* harmony import */ var _lib_isIpAddress__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/isIpAddress */ "../node_modules/@aws-sdk/util-endpoints/dist-es/lib/isIpAddress.js");
/* harmony import */ var _resolveEndpoint__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./resolveEndpoint */ "../node_modules/@aws-sdk/util-endpoints/dist-es/resolveEndpoint.js");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./types */ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/index.js");







/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/lib/aws/isVirtualHostableS3Bucket.js":
/*!********************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/lib/aws/isVirtualHostableS3Bucket.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isVirtualHostableS3Bucket: () => (/* binding */ isVirtualHostableS3Bucket)
/* harmony export */ });
/* harmony import */ var _smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-endpoints */ "../node_modules/@smithy/util-endpoints/dist-es/index.js");
/* harmony import */ var _isIpAddress__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../isIpAddress */ "../node_modules/@aws-sdk/util-endpoints/dist-es/lib/isIpAddress.js");


const isVirtualHostableS3Bucket = (value, allowSubDomains = false) => {
    if (allowSubDomains) {
        for (const label of value.split(".")) {
            if (!isVirtualHostableS3Bucket(label)) {
                return false;
            }
        }
        return true;
    }
    if (!(0,_smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_0__.isValidHostLabel)(value)) {
        return false;
    }
    if (value.length < 3 || value.length > 63) {
        return false;
    }
    if (value !== value.toLowerCase()) {
        return false;
    }
    if ((0,_isIpAddress__WEBPACK_IMPORTED_MODULE_1__.isIpAddress)(value)) {
        return false;
    }
    return true;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/lib/aws/parseArn.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/lib/aws/parseArn.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   parseArn: () => (/* binding */ parseArn)
/* harmony export */ });
const ARN_DELIMITER = ":";
const RESOURCE_DELIMITER = "/";
const parseArn = (value) => {
    const segments = value.split(ARN_DELIMITER);
    if (segments.length < 6)
        return null;
    const [arn, partition, service, region, accountId, ...resourcePath] = segments;
    if (arn !== "arn" || partition === "" || service === "" || resourcePath.join(ARN_DELIMITER) === "")
        return null;
    const resourceId = resourcePath.map((resource) => resource.split(RESOURCE_DELIMITER)).flat();
    return {
        partition,
        service,
        region,
        accountId,
        resourceId,
    };
};


/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/lib/aws/partition.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/lib/aws/partition.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getUserAgentPrefix: () => (/* binding */ getUserAgentPrefix),
/* harmony export */   partition: () => (/* binding */ partition),
/* harmony export */   setPartitionInfo: () => (/* binding */ setPartitionInfo),
/* harmony export */   useDefaultPartitionInfo: () => (/* binding */ useDefaultPartitionInfo)
/* harmony export */ });
/* harmony import */ var _partitions_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./partitions.json */ "../node_modules/@aws-sdk/util-endpoints/dist-es/lib/aws/partitions.json");

let selectedPartitionsInfo = _partitions_json__WEBPACK_IMPORTED_MODULE_0__;
let selectedUserAgentPrefix = "";
const partition = (value) => {
    const { partitions } = selectedPartitionsInfo;
    for (const partition of partitions) {
        const { regions, outputs } = partition;
        for (const [region, regionData] of Object.entries(regions)) {
            if (region === value) {
                return {
                    ...outputs,
                    ...regionData,
                };
            }
        }
    }
    for (const partition of partitions) {
        const { regionRegex, outputs } = partition;
        if (new RegExp(regionRegex).test(value)) {
            return {
                ...outputs,
            };
        }
    }
    const DEFAULT_PARTITION = partitions.find((partition) => partition.id === "aws");
    if (!DEFAULT_PARTITION) {
        throw new Error("Provided region was not found in the partition array or regex," +
            " and default partition with id 'aws' doesn't exist.");
    }
    return {
        ...DEFAULT_PARTITION.outputs,
    };
};
const setPartitionInfo = (partitionsInfo, userAgentPrefix = "") => {
    selectedPartitionsInfo = partitionsInfo;
    selectedUserAgentPrefix = userAgentPrefix;
};
const useDefaultPartitionInfo = () => {
    setPartitionInfo(_partitions_json__WEBPACK_IMPORTED_MODULE_0__, "");
};
const getUserAgentPrefix = () => selectedUserAgentPrefix;


/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/lib/isIpAddress.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/lib/isIpAddress.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isIpAddress: () => (/* reexport safe */ _smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_0__.isIpAddress)
/* harmony export */ });
/* harmony import */ var _smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-endpoints */ "../node_modules/@smithy/util-endpoints/dist-es/index.js");



/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/resolveEndpoint.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/resolveEndpoint.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveEndpoint: () => (/* reexport safe */ _smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_0__.resolveEndpoint)
/* harmony export */ });
/* harmony import */ var _smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-endpoints */ "../node_modules/@smithy/util-endpoints/dist-es/index.js");



/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/EndpointError.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/types/EndpointError.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EndpointError: () => (/* reexport safe */ _smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_0__.EndpointError)
/* harmony export */ });
/* harmony import */ var _smithy_util_endpoints__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-endpoints */ "../node_modules/@smithy/util-endpoints/dist-es/index.js");



/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/EndpointRuleObject.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/types/EndpointRuleObject.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/ErrorRuleObject.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/types/ErrorRuleObject.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/RuleSetObject.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/types/RuleSetObject.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/TreeRuleObject.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/types/TreeRuleObject.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/index.js":
/*!**********************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/types/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EndpointError: () => (/* reexport safe */ _EndpointError__WEBPACK_IMPORTED_MODULE_0__.EndpointError)
/* harmony export */ });
/* harmony import */ var _EndpointError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EndpointError */ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/EndpointError.js");
/* harmony import */ var _EndpointRuleObject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EndpointRuleObject */ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/EndpointRuleObject.js");
/* harmony import */ var _ErrorRuleObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ErrorRuleObject */ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/ErrorRuleObject.js");
/* harmony import */ var _RuleSetObject__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./RuleSetObject */ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/RuleSetObject.js");
/* harmony import */ var _TreeRuleObject__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TreeRuleObject */ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/TreeRuleObject.js");
/* harmony import */ var _shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./shared */ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/shared.js");








/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/types/shared.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/types/shared.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@aws-sdk/util-format-url/dist-es/index.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-format-url/dist-es/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   formatUrl: () => (/* binding */ formatUrl)
/* harmony export */ });
/* harmony import */ var _smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/querystring-builder */ "../node_modules/@smithy/querystring-builder/dist-es/index.js");

function formatUrl(request) {
    const { port, query } = request;
    let { protocol, path, hostname } = request;
    if (protocol && protocol.slice(-1) !== ":") {
        protocol += ":";
    }
    if (port) {
        hostname += `:${port}`;
    }
    if (path && path.charAt(0) !== "/") {
        path = `/${path}`;
    }
    let queryString = query ? (0,_smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_0__.buildQueryString)(query) : "";
    if (queryString && queryString[0] !== "?") {
        queryString = `?${queryString}`;
    }
    let auth = "";
    if (request.username != null || request.password != null) {
        const username = request.username ?? "";
        const password = request.password ?? "";
        auth = `${username}:${password}@`;
    }
    let fragment = "";
    if (request.fragment) {
        fragment = `#${request.fragment}`;
    }
    return `${protocol}//${auth}${hostname}${path}${queryString}${fragment}`;
}


/***/ }),

/***/ "../node_modules/@aws-sdk/util-user-agent-node/dist-es/crt-availability.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-user-agent-node/dist-es/crt-availability.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   crtAvailability: () => (/* binding */ crtAvailability)
/* harmony export */ });
const crtAvailability = {
    isCrtAvailable: false,
};


/***/ }),

/***/ "../node_modules/@aws-sdk/util-user-agent-node/dist-es/defaultUserAgent.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-user-agent-node/dist-es/defaultUserAgent.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createDefaultUserAgentProvider: () => (/* binding */ createDefaultUserAgentProvider),
/* harmony export */   crtAvailability: () => (/* reexport safe */ _crt_availability__WEBPACK_IMPORTED_MODULE_3__.crtAvailability),
/* harmony export */   defaultUserAgent: () => (/* binding */ defaultUserAgent)
/* harmony export */ });
/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! os */ "os");
/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(os__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var process__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! process */ "process");
/* harmony import */ var process__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(process__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _is_crt_available__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./is-crt-available */ "../node_modules/@aws-sdk/util-user-agent-node/dist-es/is-crt-available.js");
/* harmony import */ var _crt_availability__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./crt-availability */ "../node_modules/@aws-sdk/util-user-agent-node/dist-es/crt-availability.js");




const createDefaultUserAgentProvider = ({ serviceId, clientVersion }) => {
    return async (config) => {
        const sections = [
            ["aws-sdk-js", clientVersion],
            ["ua", "2.1"],
            [`os/${(0,os__WEBPACK_IMPORTED_MODULE_0__.platform)()}`, (0,os__WEBPACK_IMPORTED_MODULE_0__.release)()],
            ["lang/js"],
            ["md/nodejs", `${process__WEBPACK_IMPORTED_MODULE_1__.versions.node}`],
        ];
        const crtAvailable = (0,_is_crt_available__WEBPACK_IMPORTED_MODULE_2__.isCrtAvailable)();
        if (crtAvailable) {
            sections.push(crtAvailable);
        }
        if (serviceId) {
            sections.push([`api/${serviceId}`, clientVersion]);
        }
        if (process__WEBPACK_IMPORTED_MODULE_1__.env.AWS_EXECUTION_ENV) {
            sections.push([`exec-env/${process__WEBPACK_IMPORTED_MODULE_1__.env.AWS_EXECUTION_ENV}`]);
        }
        const appId = await config?.userAgentAppId?.();
        const resolvedUserAgent = appId ? [...sections, [`app/${appId}`]] : [...sections];
        return resolvedUserAgent;
    };
};
const defaultUserAgent = createDefaultUserAgentProvider;


/***/ }),

/***/ "../node_modules/@aws-sdk/util-user-agent-node/dist-es/index.js":
/*!**********************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-user-agent-node/dist-es/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_APP_ID_CONFIG_OPTIONS: () => (/* reexport safe */ _nodeAppIdConfigOptions__WEBPACK_IMPORTED_MODULE_1__.NODE_APP_ID_CONFIG_OPTIONS),
/* harmony export */   UA_APP_ID_ENV_NAME: () => (/* reexport safe */ _nodeAppIdConfigOptions__WEBPACK_IMPORTED_MODULE_1__.UA_APP_ID_ENV_NAME),
/* harmony export */   UA_APP_ID_INI_NAME: () => (/* reexport safe */ _nodeAppIdConfigOptions__WEBPACK_IMPORTED_MODULE_1__.UA_APP_ID_INI_NAME),
/* harmony export */   createDefaultUserAgentProvider: () => (/* reexport safe */ _defaultUserAgent__WEBPACK_IMPORTED_MODULE_0__.createDefaultUserAgentProvider),
/* harmony export */   crtAvailability: () => (/* reexport safe */ _defaultUserAgent__WEBPACK_IMPORTED_MODULE_0__.crtAvailability),
/* harmony export */   defaultUserAgent: () => (/* reexport safe */ _defaultUserAgent__WEBPACK_IMPORTED_MODULE_0__.defaultUserAgent)
/* harmony export */ });
/* harmony import */ var _defaultUserAgent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaultUserAgent */ "../node_modules/@aws-sdk/util-user-agent-node/dist-es/defaultUserAgent.js");
/* harmony import */ var _nodeAppIdConfigOptions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./nodeAppIdConfigOptions */ "../node_modules/@aws-sdk/util-user-agent-node/dist-es/nodeAppIdConfigOptions.js");




/***/ }),

/***/ "../node_modules/@aws-sdk/util-user-agent-node/dist-es/is-crt-available.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-user-agent-node/dist-es/is-crt-available.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isCrtAvailable: () => (/* binding */ isCrtAvailable)
/* harmony export */ });
/* harmony import */ var _crt_availability__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./crt-availability */ "../node_modules/@aws-sdk/util-user-agent-node/dist-es/crt-availability.js");

const isCrtAvailable = () => {
    if (_crt_availability__WEBPACK_IMPORTED_MODULE_0__.crtAvailability.isCrtAvailable) {
        return ["md/crt-avail"];
    }
    return null;
};


/***/ }),

/***/ "../node_modules/@aws-sdk/util-user-agent-node/dist-es/nodeAppIdConfigOptions.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-user-agent-node/dist-es/nodeAppIdConfigOptions.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_APP_ID_CONFIG_OPTIONS: () => (/* binding */ NODE_APP_ID_CONFIG_OPTIONS),
/* harmony export */   UA_APP_ID_ENV_NAME: () => (/* binding */ UA_APP_ID_ENV_NAME),
/* harmony export */   UA_APP_ID_INI_NAME: () => (/* binding */ UA_APP_ID_INI_NAME)
/* harmony export */ });
/* harmony import */ var _aws_sdk_middleware_user_agent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/middleware-user-agent */ "../node_modules/@aws-sdk/middleware-user-agent/dist-es/index.js");

const UA_APP_ID_ENV_NAME = "AWS_SDK_UA_APP_ID";
const UA_APP_ID_INI_NAME = "sdk_ua_app_id";
const UA_APP_ID_INI_NAME_DEPRECATED = "sdk-ua-app-id";
const NODE_APP_ID_CONFIG_OPTIONS = {
    environmentVariableSelector: (env) => env[UA_APP_ID_ENV_NAME],
    configFileSelector: (profile) => profile[UA_APP_ID_INI_NAME] ?? profile[UA_APP_ID_INI_NAME_DEPRECATED],
    default: _aws_sdk_middleware_user_agent__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_UA_APP_ID,
};


/***/ }),

/***/ "../node_modules/@aws-sdk/xml-builder/dist-es/XmlNode.js":
/*!***************************************************************!*\
  !*** ../node_modules/@aws-sdk/xml-builder/dist-es/XmlNode.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   XmlNode: () => (/* binding */ XmlNode)
/* harmony export */ });
/* harmony import */ var _escape_attribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./escape-attribute */ "../node_modules/@aws-sdk/xml-builder/dist-es/escape-attribute.js");
/* harmony import */ var _XmlText__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./XmlText */ "../node_modules/@aws-sdk/xml-builder/dist-es/XmlText.js");


class XmlNode {
    name;
    children;
    attributes = {};
    static of(name, childText, withName) {
        const node = new XmlNode(name);
        if (childText !== undefined) {
            node.addChildNode(new _XmlText__WEBPACK_IMPORTED_MODULE_1__.XmlText(childText));
        }
        if (withName !== undefined) {
            node.withName(withName);
        }
        return node;
    }
    constructor(name, children = []) {
        this.name = name;
        this.children = children;
    }
    withName(name) {
        this.name = name;
        return this;
    }
    addAttribute(name, value) {
        this.attributes[name] = value;
        return this;
    }
    addChildNode(child) {
        this.children.push(child);
        return this;
    }
    removeAttribute(name) {
        delete this.attributes[name];
        return this;
    }
    n(name) {
        this.name = name;
        return this;
    }
    c(child) {
        this.children.push(child);
        return this;
    }
    a(name, value) {
        if (value != null) {
            this.attributes[name] = value;
        }
        return this;
    }
    cc(input, field, withName = field) {
        if (input[field] != null) {
            const node = XmlNode.of(field, input[field]).withName(withName);
            this.c(node);
        }
    }
    l(input, listName, memberName, valueProvider) {
        if (input[listName] != null) {
            const nodes = valueProvider();
            nodes.map((node) => {
                node.withName(memberName);
                this.c(node);
            });
        }
    }
    lc(input, listName, memberName, valueProvider) {
        if (input[listName] != null) {
            const nodes = valueProvider();
            const containerNode = new XmlNode(memberName);
            nodes.map((node) => {
                containerNode.c(node);
            });
            this.c(containerNode);
        }
    }
    toString() {
        const hasChildren = Boolean(this.children.length);
        let xmlText = `<${this.name}`;
        const attributes = this.attributes;
        for (const attributeName of Object.keys(attributes)) {
            const attribute = attributes[attributeName];
            if (attribute != null) {
                xmlText += ` ${attributeName}="${(0,_escape_attribute__WEBPACK_IMPORTED_MODULE_0__.escapeAttribute)("" + attribute)}"`;
            }
        }
        return (xmlText += !hasChildren ? "/>" : `>${this.children.map((c) => c.toString()).join("")}</${this.name}>`);
    }
}


/***/ }),

/***/ "../node_modules/@aws-sdk/xml-builder/dist-es/XmlText.js":
/*!***************************************************************!*\
  !*** ../node_modules/@aws-sdk/xml-builder/dist-es/XmlText.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   XmlText: () => (/* binding */ XmlText)
/* harmony export */ });
/* harmony import */ var _escape_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./escape-element */ "../node_modules/@aws-sdk/xml-builder/dist-es/escape-element.js");

class XmlText {
    value;
    constructor(value) {
        this.value = value;
    }
    toString() {
        return (0,_escape_element__WEBPACK_IMPORTED_MODULE_0__.escapeElement)("" + this.value);
    }
}


/***/ }),

/***/ "../node_modules/@aws-sdk/xml-builder/dist-es/escape-attribute.js":
/*!************************************************************************!*\
  !*** ../node_modules/@aws-sdk/xml-builder/dist-es/escape-attribute.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   escapeAttribute: () => (/* binding */ escapeAttribute)
/* harmony export */ });
function escapeAttribute(value) {
    return value.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;");
}


/***/ }),

/***/ "../node_modules/@aws-sdk/xml-builder/dist-es/escape-element.js":
/*!**********************************************************************!*\
  !*** ../node_modules/@aws-sdk/xml-builder/dist-es/escape-element.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   escapeElement: () => (/* binding */ escapeElement)
/* harmony export */ });
function escapeElement(value) {
    return value
        .replace(/&/g, "&amp;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&apos;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/\r/g, "&#x0D;")
        .replace(/\n/g, "&#x0A;")
        .replace(/\u0085/g, "&#x85;")
        .replace(/\u2028/, "&#x2028;");
}


/***/ }),

/***/ "../node_modules/@aws-sdk/xml-builder/dist-es/index.js":
/*!*************************************************************!*\
  !*** ../node_modules/@aws-sdk/xml-builder/dist-es/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   XmlNode: () => (/* reexport safe */ _XmlNode__WEBPACK_IMPORTED_MODULE_0__.XmlNode),
/* harmony export */   XmlText: () => (/* reexport safe */ _XmlText__WEBPACK_IMPORTED_MODULE_1__.XmlText)
/* harmony export */ });
/* harmony import */ var _XmlNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./XmlNode */ "../node_modules/@aws-sdk/xml-builder/dist-es/XmlNode.js");
/* harmony import */ var _XmlText__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./XmlText */ "../node_modules/@aws-sdk/xml-builder/dist-es/XmlText.js");




/***/ }),

/***/ "../node_modules/@nestjs/bull-shared/dist/bull.messages.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@nestjs/bull-shared/dist/bull.messages.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NO_QUEUE_FOUND = void 0;
const NO_QUEUE_FOUND = (name) => name
    ? `No Queue was found with the given name (${name}). Check your configuration.`
    : 'No Queue was found. Check your configuration.';
exports.NO_QUEUE_FOUND = NO_QUEUE_FOUND;


/***/ }),

/***/ "../node_modules/@nestjs/bull-shared/dist/bull.tokens.js":
/*!***************************************************************!*\
  !*** ../node_modules/@nestjs/bull-shared/dist/bull.tokens.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.JOB_REF = void 0;
const core_1 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
exports.JOB_REF = core_1.REQUEST;


/***/ }),

/***/ "../node_modules/@nestjs/bull-shared/dist/errors/index.js":
/*!****************************************************************!*\
  !*** ../node_modules/@nestjs/bull-shared/dist/errors/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const tslib_1 = __webpack_require__(/*! tslib */ "tslib");
tslib_1.__exportStar(__webpack_require__(/*! ./missing-shared-bull-config.error */ "../node_modules/@nestjs/bull-shared/dist/errors/missing-shared-bull-config.error.js"), exports);


/***/ }),

/***/ "../node_modules/@nestjs/bull-shared/dist/errors/missing-shared-bull-config.error.js":
/*!*******************************************************************************************!*\
  !*** ../node_modules/@nestjs/bull-shared/dist/errors/missing-shared-bull-config.error.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MissingBullSharedConfigurationError = void 0;
class MissingBullSharedConfigurationError extends Error {
    constructor(configKey, queueName) {
        super(`Configuration "${configKey}" referenced from the "Queue(${queueName})" options does not exist.`);
    }
}
exports.MissingBullSharedConfigurationError = MissingBullSharedConfigurationError;


/***/ }),

/***/ "../node_modules/@nestjs/bull-shared/dist/helpers/create-conditional-dep-holder.helper.js":
/*!************************************************************************************************!*\
  !*** ../node_modules/@nestjs/bull-shared/dist/helpers/create-conditional-dep-holder.helper.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.createConditionalDepHolder = void 0;
const tslib_1 = __webpack_require__(/*! tslib */ "tslib");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const missing_shared_bull_config_error_1 = __webpack_require__(/*! ../errors/missing-shared-bull-config.error */ "../node_modules/@nestjs/bull-shared/dist/errors/missing-shared-bull-config.error.js");
function createConditionalDepHolder(depToken, optionalDep, errorFactory = (caller) => new missing_shared_bull_config_error_1.MissingBullSharedConfigurationError(depToken, caller)) {
    let ConditionalDepHolder = class ConditionalDepHolder {
        constructor(_dependencyRef) {
            this._dependencyRef = _dependencyRef;
        }
        getDependencyRef(caller) {
            if (depToken !== optionalDep && !this._dependencyRef) {
                throw errorFactory(caller);
            }
            return this._dependencyRef;
        }
    };
    ConditionalDepHolder = tslib_1.__decorate([
        tslib_1.__param(0, (0, common_1.Optional)()),
        tslib_1.__param(0, (0, common_1.Inject)(depToken)),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], ConditionalDepHolder);
    return (0, common_1.mixin)(ConditionalDepHolder);
}
exports.createConditionalDepHolder = createConditionalDepHolder;


/***/ }),

/***/ "../node_modules/@nestjs/bull-shared/dist/helpers/index.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@nestjs/bull-shared/dist/helpers/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const tslib_1 = __webpack_require__(/*! tslib */ "tslib");
tslib_1.__exportStar(__webpack_require__(/*! ./create-conditional-dep-holder.helper */ "../node_modules/@nestjs/bull-shared/dist/helpers/create-conditional-dep-holder.helper.js"), exports);


/***/ }),

/***/ "../node_modules/@nestjs/bull-shared/dist/index.js":
/*!*********************************************************!*\
  !*** ../node_modules/@nestjs/bull-shared/dist/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const tslib_1 = __webpack_require__(/*! tslib */ "tslib");
tslib_1.__exportStar(__webpack_require__(/*! ./bull.messages */ "../node_modules/@nestjs/bull-shared/dist/bull.messages.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./bull.tokens */ "../node_modules/@nestjs/bull-shared/dist/bull.tokens.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./errors */ "../node_modules/@nestjs/bull-shared/dist/errors/index.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./helpers */ "../node_modules/@nestjs/bull-shared/dist/helpers/index.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./utils */ "../node_modules/@nestjs/bull-shared/dist/utils/index.js"), exports);


/***/ }),

/***/ "../node_modules/@nestjs/bull-shared/dist/utils/get-queue-token.util.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@nestjs/bull-shared/dist/utils/get-queue-token.util.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.getQueueToken = void 0;
function getQueueToken(name) {
    return name ? `BullQueue_${name}` : 'BullQueue_default';
}
exports.getQueueToken = getQueueToken;


/***/ }),

/***/ "../node_modules/@nestjs/bull-shared/dist/utils/index.js":
/*!***************************************************************!*\
  !*** ../node_modules/@nestjs/bull-shared/dist/utils/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const tslib_1 = __webpack_require__(/*! tslib */ "tslib");
tslib_1.__exportStar(__webpack_require__(/*! ./get-queue-token.util */ "../node_modules/@nestjs/bull-shared/dist/utils/get-queue-token.util.js"), exports);


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/bull-metadata.accessor.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/bull-metadata.accessor.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BullMetadataAccessor = void 0;
const tslib_1 = __webpack_require__(/*! tslib */ "tslib");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const core_1 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
const bull_constants_1 = __webpack_require__(/*! ./bull.constants */ "../node_modules/@nestjs/bull/dist/bull.constants.js");
let BullMetadataAccessor = class BullMetadataAccessor {
    constructor(reflector) {
        this.reflector = reflector;
    }
    isQueueComponent(target) {
        if (!target) {
            return false;
        }
        return !!this.reflector.get(bull_constants_1.BULL_MODULE_QUEUE, target);
    }
    isProcessor(target) {
        if (!target) {
            return false;
        }
        return !!this.reflector.get(bull_constants_1.BULL_MODULE_QUEUE_PROCESS, target);
    }
    isListener(target) {
        if (!target) {
            return false;
        }
        return !!this.reflector.get(bull_constants_1.BULL_MODULE_ON_QUEUE_EVENT, target);
    }
    getQueueComponentMetadata(target) {
        return this.reflector.get(bull_constants_1.BULL_MODULE_QUEUE, target);
    }
    getProcessMetadata(target) {
        return this.reflector.get(bull_constants_1.BULL_MODULE_QUEUE_PROCESS, target);
    }
    getListenerMetadata(target) {
        return this.reflector.get(bull_constants_1.BULL_MODULE_ON_QUEUE_EVENT, target);
    }
};
exports.BullMetadataAccessor = BullMetadataAccessor;
exports.BullMetadataAccessor = BullMetadataAccessor = tslib_1.__decorate([
    (0, common_1.Injectable)(),
    tslib_1.__metadata("design:paramtypes", [core_1.Reflector])
], BullMetadataAccessor);


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/bull.constants.js":
/*!***********************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/bull.constants.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BULL_MODULE_ON_QUEUE_EVENT = exports.BULL_MODULE_QUEUE_PROCESS = exports.BULL_MODULE_QUEUE = void 0;
exports.BULL_MODULE_QUEUE = 'bull:module_queue';
exports.BULL_MODULE_QUEUE_PROCESS = 'bull:module_queue_process';
exports.BULL_MODULE_ON_QUEUE_EVENT = 'bull:module_on_queue_event';


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/bull.explorer.js":
/*!**********************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/bull.explorer.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BullExplorer = void 0;
const tslib_1 = __webpack_require__(/*! tslib */ "tslib");
const bull_shared_1 = __webpack_require__(/*! @nestjs/bull-shared */ "../node_modules/@nestjs/bull-shared/dist/index.js");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const core_1 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
const injector_1 = __webpack_require__(/*! @nestjs/core/injector/injector */ "@nestjs/core/injector/injector");
const bull_metadata_accessor_1 = __webpack_require__(/*! ./bull-metadata.accessor */ "../node_modules/@nestjs/bull/dist/bull-metadata.accessor.js");
let BullExplorer = class BullExplorer {
    constructor(moduleRef, discoveryService, metadataAccessor, metadataScanner) {
        this.moduleRef = moduleRef;
        this.discoveryService = discoveryService;
        this.metadataAccessor = metadataAccessor;
        this.metadataScanner = metadataScanner;
        this.logger = new common_1.Logger('BullModule');
        this.injector = new injector_1.Injector();
    }
    onModuleInit() {
        this.explore();
    }
    explore() {
        const providers = this.discoveryService
            .getProviders()
            .filter((wrapper) => this.metadataAccessor.isQueueComponent(
        // NOTE: Regarding the ternary statement below,
        // - The condition `!wrapper.metatype` is because when we use `useValue`
        // the value of `wrapper.metatype` will be `null`.
        // - The condition `wrapper.inject` is needed here because when we use
        // `useFactory`, the value of `wrapper.metatype` will be the supplied
        // factory function.
        // For both cases, we should use `wrapper.instance.constructor` instead
        // of `wrapper.metatype` to resolve processor's class properly.
        // But since calling `wrapper.instance` could degrade overall performance
        // we must defer it as much we can. But there's no other way to grab the
        // right class that could be annotated with `@Processor()` decorator
        // without using this property.
        !wrapper.metatype || wrapper.inject
            ? wrapper.instance?.constructor
            : wrapper.metatype));
        providers.forEach((wrapper) => {
            const { instance, metatype } = wrapper;
            const isRequestScoped = !wrapper.isDependencyTreeStatic();
            const { name: queueName } = this.metadataAccessor.getQueueComponentMetadata(
            // NOTE: We are relying on `instance.constructor` to properly support
            // `useValue` and `useFactory` providers besides `useClass`.
            instance.constructor || metatype);
            const queueToken = (0, bull_shared_1.getQueueToken)(queueName);
            const bullQueue = this.getQueue(queueToken, queueName);
            this.metadataScanner.scanFromPrototype(instance, Object.getPrototypeOf(instance), (key) => {
                if (this.metadataAccessor.isProcessor(instance[key])) {
                    const metadata = this.metadataAccessor.getProcessMetadata(instance[key]);
                    this.handleProcessor(instance, key, bullQueue, wrapper.host, isRequestScoped, metadata);
                }
                else if (this.metadataAccessor.isListener(instance[key])) {
                    const metadata = this.metadataAccessor.getListenerMetadata(instance[key]);
                    this.handleListener(instance, key, wrapper, bullQueue, metadata);
                }
            });
        });
    }
    getQueue(queueToken, queueName) {
        try {
            return this.moduleRef.get(queueToken, { strict: false });
        }
        catch (err) {
            this.logger.error((0, bull_shared_1.NO_QUEUE_FOUND)(queueName));
            throw err;
        }
    }
    handleProcessor(instance, key, queue, moduleRef, isRequestScoped, options) {
        let args = [options?.name, options?.concurrency];
        if (isRequestScoped) {
            const callback = async (...args) => {
                const contextId = (0, core_1.createContextId)();
                if (this.moduleRef.registerRequestByContextId) {
                    // Additional condition to prevent breaking changes in
                    // applications that use @nestjs/bull older than v7.4.0.
                    const jobRef = args[0];
                    this.moduleRef.registerRequestByContextId(jobRef, contextId);
                }
                const contextInstance = await this.injector.loadPerContext(instance, moduleRef, moduleRef.providers, contextId);
                return contextInstance[key].call(contextInstance, ...args);
            };
            args.push(callback);
        }
        else {
            args.push(instance[key].bind(instance));
        }
        args = args.filter((item) => item !== undefined);
        queue.process.call(queue, ...args);
    }
    handleListener(instance, key, wrapper, queue, options) {
        if (!wrapper.isDependencyTreeStatic()) {
            this.logger.warn(`Warning! "${wrapper.name}" class is request-scoped and it defines an event listener ("${wrapper.name}#${key}"). Since event listeners cannot be registered on scoped providers, this handler will be ignored.`);
            return;
        }
        if (options.name || options.id) {
            queue.on(options.eventName, async (jobOrJobId, ...args) => {
                const job = typeof jobOrJobId === 'string'
                    ? (await queue.getJob(jobOrJobId)) || { name: false, id: false }
                    : jobOrJobId;
                if (job.name === options.name || job.id === options.id) {
                    return instance[key].apply(instance, [job, ...args]);
                }
            });
        }
        else {
            queue.on(options.eventName, instance[key].bind(instance));
        }
    }
};
exports.BullExplorer = BullExplorer;
exports.BullExplorer = BullExplorer = tslib_1.__decorate([
    (0, common_1.Injectable)(),
    tslib_1.__metadata("design:paramtypes", [core_1.ModuleRef,
        core_1.DiscoveryService,
        bull_metadata_accessor_1.BullMetadataAccessor,
        core_1.MetadataScanner])
], BullExplorer);


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/bull.module.js":
/*!********************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/bull.module.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

var BullModule_1;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BullModule = void 0;
const tslib_1 = __webpack_require__(/*! tslib */ "tslib");
const bull_shared_1 = __webpack_require__(/*! @nestjs/bull-shared */ "../node_modules/@nestjs/bull-shared/dist/index.js");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const core_1 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
const bull_metadata_accessor_1 = __webpack_require__(/*! ./bull-metadata.accessor */ "../node_modules/@nestjs/bull/dist/bull-metadata.accessor.js");
const bull_explorer_1 = __webpack_require__(/*! ./bull.explorer */ "../node_modules/@nestjs/bull/dist/bull.explorer.js");
const bull_providers_1 = __webpack_require__(/*! ./bull.providers */ "../node_modules/@nestjs/bull/dist/bull.providers.js");
const utils_1 = __webpack_require__(/*! ./utils */ "../node_modules/@nestjs/bull/dist/utils/index.js");
let BullModule = BullModule_1 = class BullModule {
    /**
     * Registers a globally available configuration for all queues
     * or using a specified "configKey" (if passed).
     *
     * @param keyOrConfig a key under which the configuration should be available or a bull configuration object
     * @param bullConfig bull configuration object
     */
    static forRoot(keyOrConfig, bullConfig) {
        const [configKey, sharedBullConfig] = typeof keyOrConfig === 'string'
            ? [keyOrConfig, bullConfig]
            : [undefined, keyOrConfig];
        const sharedBullConfigProvider = {
            provide: (0, utils_1.getSharedConfigToken)(configKey),
            useValue: sharedBullConfig,
        };
        return {
            global: true,
            module: BullModule_1,
            providers: [sharedBullConfigProvider],
            exports: [sharedBullConfigProvider],
        };
    }
    /**
     * Registers a globally available configuration for all queues
     * or using a specified "configKey" (if passed).
     *
     * @param keyOrAsyncConfig a key under which the configuration should be available or a bull configuration object
     * @param asyncBullConfig shared bull configuration async factory
     */
    static forRootAsync(keyOrAsyncConfig, asyncBullConfig) {
        const [configKey, asyncSharedBullConfig] = typeof keyOrAsyncConfig === 'string'
            ? [keyOrAsyncConfig, asyncBullConfig]
            : [undefined, keyOrAsyncConfig];
        const imports = this.getUniqImports([asyncSharedBullConfig]);
        const providers = this.createAsyncSharedConfigurationProviders(configKey, asyncSharedBullConfig);
        return {
            global: true,
            module: BullModule_1,
            imports,
            providers: asyncSharedBullConfig.extraProviders
                ? [...providers, ...asyncSharedBullConfig.extraProviders]
                : providers,
            exports: providers,
        };
    }
    static registerQueue(...options) {
        const queueProviders = (0, bull_providers_1.createQueueProviders)([].concat(options));
        const queueOptionProviders = (0, bull_providers_1.createQueueOptionProviders)([].concat(options));
        return {
            module: BullModule_1,
            imports: [BullModule_1.coreModuleDefinition],
            providers: [...queueOptionProviders, ...queueProviders],
            exports: queueProviders,
        };
    }
    static registerQueueAsync(...options) {
        const optionsArr = [].concat(options);
        const queueProviders = (0, bull_providers_1.createQueueProviders)(optionsArr);
        const imports = this.getUniqImports(optionsArr);
        const asyncQueueOptionsProviders = options
            .map((queueOptions) => this.createAsyncProviders(queueOptions))
            .reduce((a, b) => a.concat(b), []);
        const extraProviders = options
            .map((queueOptions) => queueOptions.extraProviders)
            .filter((extraProviders) => extraProviders)
            .reduce((a, b) => a.concat(b), []);
        return {
            imports: imports.concat(BullModule_1.coreModuleDefinition),
            module: BullModule_1,
            providers: [
                ...asyncQueueOptionsProviders,
                ...queueProviders,
                ...extraProviders,
            ],
            exports: queueProviders,
        };
    }
    static createAsyncProviders(options) {
        const optionalSharedConfigHolder = (0, bull_shared_1.createConditionalDepHolder)((0, utils_1.getSharedConfigToken)(options.configKey), utils_1.BULL_CONFIG_DEFAULT_TOKEN);
        if (options.useExisting || options.useFactory) {
            return [
                optionalSharedConfigHolder,
                this.createAsyncOptionsProvider(options, optionalSharedConfigHolder),
            ];
        }
        if (!options.useClass) {
            // fallback to the "registerQueue" in case someone accidentally used the "registerQueueAsync" instead
            return (0, bull_providers_1.createQueueOptionProviders)([options]);
        }
        const useClass = options.useClass;
        return [
            optionalSharedConfigHolder,
            this.createAsyncOptionsProvider(options, optionalSharedConfigHolder),
            {
                provide: useClass,
                useClass,
            },
        ];
    }
    static createAsyncOptionsProvider(asyncOptions, optionalSharedConfigHolderRef) {
        if (asyncOptions.useFactory) {
            return {
                provide: (0, utils_1.getQueueOptionsToken)(asyncOptions.name),
                useFactory: async (optionalDepHolder, ...factoryArgs) => {
                    return {
                        ...optionalDepHolder.getDependencyRef(asyncOptions.name),
                        ...(await asyncOptions.useFactory(...factoryArgs)),
                    };
                },
                inject: [optionalSharedConfigHolderRef, ...(asyncOptions.inject || [])],
            };
        }
        // `as Type<BullOptionsFactory>` is a workaround for microsoft/TypeScript#31603
        const inject = [asyncOptions.useClass || asyncOptions.useExisting];
        return {
            provide: (0, utils_1.getQueueOptionsToken)(asyncOptions.name),
            useFactory: async (optionalDepHolder, optionsFactory) => {
                return {
                    ...optionalDepHolder.getDependencyRef(asyncOptions.name),
                    ...(await optionsFactory.createBullOptions()),
                };
            },
            inject: [optionalSharedConfigHolderRef, ...inject],
        };
    }
    static createAsyncSharedConfigurationProviders(configKey, options) {
        if (options.useExisting || options.useFactory) {
            return [this.createAsyncSharedConfigurationProvider(configKey, options)];
        }
        const useClass = options.useClass;
        return [
            this.createAsyncSharedConfigurationProvider(configKey, options),
            {
                provide: useClass,
                useClass,
            },
        ];
    }
    static createAsyncSharedConfigurationProvider(configKey, options) {
        if (options.useFactory) {
            return {
                provide: (0, utils_1.getSharedConfigToken)(configKey),
                useFactory: options.useFactory,
                inject: options.inject || [],
            };
        }
        // `as Type<SharedBullConfigurationFactory>` is a workaround for microsoft/TypeScript#31603
        const inject = [options.useClass || options.useExisting];
        return {
            provide: (0, utils_1.getSharedConfigToken)(configKey),
            useFactory: async (optionsFactory) => optionsFactory.createSharedConfiguration(),
            inject,
        };
    }
    static getUniqImports(options) {
        return (options
            .map((option) => option.imports)
            .reduce((acc, i) => acc.concat(i || []), [])
            .filter((v, i, a) => a.indexOf(v) === i) || []);
    }
};
exports.BullModule = BullModule;
BullModule.coreModuleDefinition = {
    global: true,
    module: BullModule_1,
    imports: [core_1.DiscoveryModule],
    providers: [bull_explorer_1.BullExplorer, bull_metadata_accessor_1.BullMetadataAccessor],
};
exports.BullModule = BullModule = BullModule_1 = tslib_1.__decorate([
    (0, common_1.Module)({})
], BullModule);


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/bull.providers.js":
/*!***********************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/bull.providers.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.createQueueOptionProviders = createQueueOptionProviders;
exports.createQueueProviders = createQueueProviders;
const bull_shared_1 = __webpack_require__(/*! @nestjs/bull-shared */ "../node_modules/@nestjs/bull-shared/dist/index.js");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const Bull = __webpack_require__(/*! bull */ "bull");
const utils_1 = __webpack_require__(/*! ./utils */ "../node_modules/@nestjs/bull/dist/utils/index.js");
const is_advanced_processor_util_1 = __webpack_require__(/*! ./utils/is-advanced-processor.util */ "../node_modules/@nestjs/bull/dist/utils/is-advanced-processor.util.js");
const is_advanced_separate_processor_util_1 = __webpack_require__(/*! ./utils/is-advanced-separate-processor.util */ "../node_modules/@nestjs/bull/dist/utils/is-advanced-separate-processor.util.js");
const is_processor_callback_util_1 = __webpack_require__(/*! ./utils/is-processor-callback.util */ "../node_modules/@nestjs/bull/dist/utils/is-processor-callback.util.js");
const is_separate_processor_util_1 = __webpack_require__(/*! ./utils/is-separate-processor.util */ "../node_modules/@nestjs/bull/dist/utils/is-separate-processor.util.js");
function buildQueue(options) {
    const queueName = options.name ? options.name : 'default';
    const queue = options?.url
        ? new Bull(queueName, options.url, options)
        : new Bull(queueName, options);
    if (options.processors) {
        options.processors.forEach((processor) => {
            let args = [];
            if ((0, is_advanced_processor_util_1.isAdvancedProcessor)(processor)) {
                args.push(processor.name, processor.concurrency, processor.callback);
            }
            else if ((0, is_advanced_separate_processor_util_1.isAdvancedSeparateProcessor)(processor)) {
                args.push(processor.name, processor.concurrency, processor.path);
            }
            else if ((0, is_separate_processor_util_1.isSeparateProcessor)(processor)) {
                args.push(processor);
            }
            else if ((0, is_processor_callback_util_1.isProcessorCallback)(processor)) {
                args.push(processor);
            }
            args = args.filter((arg) => typeof arg !== 'undefined');
            queue.process.call(queue, ...args);
        });
    }
    queue.onApplicationShutdown = function () {
        return this.close();
    };
    return queue;
}
function createQueueOptionProviders(options) {
    const providers = options.map((option) => {
        const optionalSharedConfigHolder = (0, bull_shared_1.createConditionalDepHolder)((0, utils_1.getSharedConfigToken)(option.configKey), utils_1.BULL_CONFIG_DEFAULT_TOKEN);
        return [
            optionalSharedConfigHolder,
            {
                provide: (0, utils_1.getQueueOptionsToken)(option.name),
                useFactory: (optionalDepHolder) => {
                    return {
                        ...optionalDepHolder.getDependencyRef(option.name),
                        ...option,
                    };
                },
                inject: [optionalSharedConfigHolder],
            },
        ];
    });
    return (0, common_1.flatten)(providers);
}
function createQueueProviders(options) {
    return options.map((option) => ({
        provide: (0, bull_shared_1.getQueueToken)(option.name),
        useFactory: (o) => {
            const queueName = o.name || option.name;
            return buildQueue({ ...o, name: queueName });
        },
        inject: [(0, utils_1.getQueueOptionsToken)(option.name)],
    }));
}


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/bull.types.js":
/*!*******************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/bull.types.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/decorators/index.js":
/*!*************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/decorators/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const tslib_1 = __webpack_require__(/*! tslib */ "tslib");
tslib_1.__exportStar(__webpack_require__(/*! ./inject-queue.decorator */ "../node_modules/@nestjs/bull/dist/decorators/inject-queue.decorator.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./process.decorator */ "../node_modules/@nestjs/bull/dist/decorators/process.decorator.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./processor.decorator */ "../node_modules/@nestjs/bull/dist/decorators/processor.decorator.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./queue-hooks.decorators */ "../node_modules/@nestjs/bull/dist/decorators/queue-hooks.decorators.js"), exports);


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/decorators/inject-queue.decorator.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/decorators/inject-queue.decorator.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.InjectQueue = void 0;
const bull_shared_1 = __webpack_require__(/*! @nestjs/bull-shared */ "../node_modules/@nestjs/bull-shared/dist/index.js");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/**
 * Injects Bull's queue instance with the given name
 * @param name queue name
 */
const InjectQueue = (name) => (0, common_1.Inject)((0, bull_shared_1.getQueueToken)(name));
exports.InjectQueue = InjectQueue;


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/decorators/process.decorator.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/decorators/process.decorator.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Process = Process;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const shared_utils_1 = __webpack_require__(/*! @nestjs/common/utils/shared.utils */ "@nestjs/common/utils/shared.utils");
const bull_constants_1 = __webpack_require__(/*! ../bull.constants */ "../node_modules/@nestjs/bull/dist/bull.constants.js");
function Process(nameOrOptions) {
    const options = (0, shared_utils_1.isString)(nameOrOptions)
        ? { name: nameOrOptions }
        : nameOrOptions;
    return (0, common_1.SetMetadata)(bull_constants_1.BULL_MODULE_QUEUE_PROCESS, options || {});
}


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/decorators/processor.decorator.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/decorators/processor.decorator.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Processor = Processor;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const constants_1 = __webpack_require__(/*! @nestjs/common/constants */ "@nestjs/common/constants");
const bull_constants_1 = __webpack_require__(/*! ../bull.constants */ "../node_modules/@nestjs/bull/dist/bull.constants.js");
function Processor(queueNameOrOptions) {
    const options = queueNameOrOptions && typeof queueNameOrOptions === 'object'
        ? queueNameOrOptions
        : { name: queueNameOrOptions };
    return (target) => {
        (0, common_1.SetMetadata)(constants_1.SCOPE_OPTIONS_METADATA, options)(target);
        (0, common_1.SetMetadata)(bull_constants_1.BULL_MODULE_QUEUE, options)(target);
    };
}


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/decorators/queue-hooks.decorators.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/decorators/queue-hooks.decorators.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.OnGlobalQueueRemoved = exports.OnGlobalQueueDrained = exports.OnGlobalQueueCleaned = exports.OnGlobalQueueResumed = exports.OnGlobalQueuePaused = exports.OnGlobalQueueFailed = exports.OnGlobalQueueCompleted = exports.OnGlobalQueueProgress = exports.OnGlobalQueueStalled = exports.OnGlobalQueueActive = exports.OnGlobalQueueWaiting = exports.OnGlobalQueueError = exports.OnQueueRemoved = exports.OnQueueDrained = exports.OnQueueCleaned = exports.OnQueueResumed = exports.OnQueuePaused = exports.OnQueueFailed = exports.OnQueueCompleted = exports.OnQueueProgress = exports.OnQueueStalled = exports.OnQueueActive = exports.OnQueueWaiting = exports.OnQueueError = exports.OnQueueEvent = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const bull_constants_1 = __webpack_require__(/*! ../bull.constants */ "../node_modules/@nestjs/bull/dist/bull.constants.js");
const enums_1 = __webpack_require__(/*! ../enums */ "../node_modules/@nestjs/bull/dist/enums/index.js");
const OnQueueEvent = (eventNameOrOptions) => (0, common_1.SetMetadata)(bull_constants_1.BULL_MODULE_ON_QUEUE_EVENT, typeof eventNameOrOptions === 'string'
    ? { eventName: eventNameOrOptions }
    : eventNameOrOptions);
exports.OnQueueEvent = OnQueueEvent;
const OnQueueError = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueEvents.ERROR });
exports.OnQueueError = OnQueueError;
const OnQueueWaiting = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueEvents.WAITING });
exports.OnQueueWaiting = OnQueueWaiting;
const OnQueueActive = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueEvents.ACTIVE });
exports.OnQueueActive = OnQueueActive;
const OnQueueStalled = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueEvents.STALLED });
exports.OnQueueStalled = OnQueueStalled;
const OnQueueProgress = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueEvents.PROGRESS });
exports.OnQueueProgress = OnQueueProgress;
const OnQueueCompleted = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueEvents.COMPLETED });
exports.OnQueueCompleted = OnQueueCompleted;
const OnQueueFailed = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueEvents.FAILED });
exports.OnQueueFailed = OnQueueFailed;
const OnQueuePaused = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueEvents.PAUSED });
exports.OnQueuePaused = OnQueuePaused;
const OnQueueResumed = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueEvents.RESUMED });
exports.OnQueueResumed = OnQueueResumed;
const OnQueueCleaned = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueEvents.CLEANED });
exports.OnQueueCleaned = OnQueueCleaned;
const OnQueueDrained = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueEvents.DRAINED });
exports.OnQueueDrained = OnQueueDrained;
const OnQueueRemoved = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueEvents.REMOVED });
exports.OnQueueRemoved = OnQueueRemoved;
const OnGlobalQueueError = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueGlobalEvents.ERROR });
exports.OnGlobalQueueError = OnGlobalQueueError;
const OnGlobalQueueWaiting = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueGlobalEvents.WAITING });
exports.OnGlobalQueueWaiting = OnGlobalQueueWaiting;
const OnGlobalQueueActive = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueGlobalEvents.ACTIVE });
exports.OnGlobalQueueActive = OnGlobalQueueActive;
const OnGlobalQueueStalled = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueGlobalEvents.STALLED });
exports.OnGlobalQueueStalled = OnGlobalQueueStalled;
const OnGlobalQueueProgress = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueGlobalEvents.PROGRESS });
exports.OnGlobalQueueProgress = OnGlobalQueueProgress;
const OnGlobalQueueCompleted = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueGlobalEvents.COMPLETED });
exports.OnGlobalQueueCompleted = OnGlobalQueueCompleted;
const OnGlobalQueueFailed = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueGlobalEvents.FAILED });
exports.OnGlobalQueueFailed = OnGlobalQueueFailed;
const OnGlobalQueuePaused = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueGlobalEvents.PAUSED });
exports.OnGlobalQueuePaused = OnGlobalQueuePaused;
const OnGlobalQueueResumed = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueGlobalEvents.RESUMED });
exports.OnGlobalQueueResumed = OnGlobalQueueResumed;
const OnGlobalQueueCleaned = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueGlobalEvents.CLEANED });
exports.OnGlobalQueueCleaned = OnGlobalQueueCleaned;
const OnGlobalQueueDrained = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueGlobalEvents.DRAINED });
exports.OnGlobalQueueDrained = OnGlobalQueueDrained;
const OnGlobalQueueRemoved = (options) => (0, exports.OnQueueEvent)({ ...options, eventName: enums_1.BullQueueGlobalEvents.REMOVED });
exports.OnGlobalQueueRemoved = OnGlobalQueueRemoved;


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/enums/bull-queue-events.enum.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/enums/bull-queue-events.enum.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BullQueueEvents = void 0;
var BullQueueEvents;
(function (BullQueueEvents) {
    BullQueueEvents["ERROR"] = "error";
    BullQueueEvents["WAITING"] = "waiting";
    BullQueueEvents["ACTIVE"] = "active";
    BullQueueEvents["STALLED"] = "stalled";
    BullQueueEvents["PROGRESS"] = "progress";
    BullQueueEvents["COMPLETED"] = "completed";
    BullQueueEvents["FAILED"] = "failed";
    BullQueueEvents["PAUSED"] = "paused";
    BullQueueEvents["RESUMED"] = "resumed";
    BullQueueEvents["CLEANED"] = "cleaned";
    BullQueueEvents["DRAINED"] = "drained";
    BullQueueEvents["REMOVED"] = "removed";
})(BullQueueEvents || (exports.BullQueueEvents = BullQueueEvents = {}));


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/enums/bull-queue-global-events.enum.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/enums/bull-queue-global-events.enum.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BullQueueGlobalEvents = void 0;
var BullQueueGlobalEvents;
(function (BullQueueGlobalEvents) {
    BullQueueGlobalEvents["ERROR"] = "global:error";
    BullQueueGlobalEvents["WAITING"] = "global:waiting";
    BullQueueGlobalEvents["ACTIVE"] = "global:active";
    BullQueueGlobalEvents["STALLED"] = "global:stalled";
    BullQueueGlobalEvents["PROGRESS"] = "global:progress";
    BullQueueGlobalEvents["COMPLETED"] = "global:completed";
    BullQueueGlobalEvents["FAILED"] = "global:failed";
    BullQueueGlobalEvents["PAUSED"] = "global:paused";
    BullQueueGlobalEvents["RESUMED"] = "global:resumed";
    BullQueueGlobalEvents["CLEANED"] = "global:cleaned";
    BullQueueGlobalEvents["DRAINED"] = "global:drained";
    BullQueueGlobalEvents["REMOVED"] = "global:removed";
})(BullQueueGlobalEvents || (exports.BullQueueGlobalEvents = BullQueueGlobalEvents = {}));


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/enums/index.js":
/*!********************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/enums/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const tslib_1 = __webpack_require__(/*! tslib */ "tslib");
tslib_1.__exportStar(__webpack_require__(/*! ./bull-queue-events.enum */ "../node_modules/@nestjs/bull/dist/enums/bull-queue-events.enum.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./bull-queue-global-events.enum */ "../node_modules/@nestjs/bull/dist/enums/bull-queue-global-events.enum.js"), exports);


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/index.js":
/*!**************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.JOB_REF = exports.getQueueToken = void 0;
const tslib_1 = __webpack_require__(/*! tslib */ "tslib");
var bull_shared_1 = __webpack_require__(/*! @nestjs/bull-shared */ "../node_modules/@nestjs/bull-shared/dist/index.js");
Object.defineProperty(exports, "getQueueToken", ({ enumerable: true, get: function () { return bull_shared_1.getQueueToken; } }));
Object.defineProperty(exports, "JOB_REF", ({ enumerable: true, get: function () { return bull_shared_1.JOB_REF; } }));
tslib_1.__exportStar(__webpack_require__(/*! ./bull.module */ "../node_modules/@nestjs/bull/dist/bull.module.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./bull.types */ "../node_modules/@nestjs/bull/dist/bull.types.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./decorators */ "../node_modules/@nestjs/bull/dist/decorators/index.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./enums */ "../node_modules/@nestjs/bull/dist/enums/index.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./interfaces */ "../node_modules/@nestjs/bull/dist/interfaces/index.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./utils */ "../node_modules/@nestjs/bull/dist/utils/index.js"), exports);


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/interfaces/bull-module-options.interface.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/interfaces/bull-module-options.interface.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/interfaces/bull.interfaces.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/interfaces/bull.interfaces.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/interfaces/index.js":
/*!*************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/interfaces/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const tslib_1 = __webpack_require__(/*! tslib */ "tslib");
tslib_1.__exportStar(__webpack_require__(/*! ./bull-module-options.interface */ "../node_modules/@nestjs/bull/dist/interfaces/bull-module-options.interface.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./bull.interfaces */ "../node_modules/@nestjs/bull/dist/interfaces/bull.interfaces.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./shared-bull-config.interface */ "../node_modules/@nestjs/bull/dist/interfaces/shared-bull-config.interface.js"), exports);


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/interfaces/shared-bull-config.interface.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/interfaces/shared-bull-config.interface.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/utils/get-queue-options-token.util.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/utils/get-queue-options-token.util.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.getQueueOptionsToken = getQueueOptionsToken;
function getQueueOptionsToken(name) {
    return name ? `BullQueueOptions_${name}` : 'BullQueueOptions_default';
}


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/utils/get-shared-config-token.util.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/utils/get-shared-config-token.util.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BULL_CONFIG_DEFAULT_TOKEN = void 0;
exports.getSharedConfigToken = getSharedConfigToken;
exports.BULL_CONFIG_DEFAULT_TOKEN = 'BULL_CONFIG(default)';
function getSharedConfigToken(configKey) {
    return configKey ? `BULL_CONFIG(${configKey})` : exports.BULL_CONFIG_DEFAULT_TOKEN;
}


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/utils/index.js":
/*!********************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/utils/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const tslib_1 = __webpack_require__(/*! tslib */ "tslib");
tslib_1.__exportStar(__webpack_require__(/*! ./get-queue-options-token.util */ "../node_modules/@nestjs/bull/dist/utils/get-queue-options-token.util.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./get-shared-config-token.util */ "../node_modules/@nestjs/bull/dist/utils/get-shared-config-token.util.js"), exports);


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/utils/is-advanced-processor.util.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/utils/is-advanced-processor.util.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.isAdvancedProcessor = isAdvancedProcessor;
const is_processor_callback_util_1 = __webpack_require__(/*! ./is-processor-callback.util */ "../node_modules/@nestjs/bull/dist/utils/is-processor-callback.util.js");
function isAdvancedProcessor(processor) {
    return ('object' === typeof processor &&
        !!processor.callback &&
        (0, is_processor_callback_util_1.isProcessorCallback)(processor.callback));
}


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/utils/is-advanced-separate-processor.util.js":
/*!**************************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/utils/is-advanced-separate-processor.util.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.isAdvancedSeparateProcessor = isAdvancedSeparateProcessor;
const is_separate_processor_util_1 = __webpack_require__(/*! ./is-separate-processor.util */ "../node_modules/@nestjs/bull/dist/utils/is-separate-processor.util.js");
function isAdvancedSeparateProcessor(processor) {
    return ('object' === typeof processor &&
        !!processor.path &&
        (0, is_separate_processor_util_1.isSeparateProcessor)(processor.path));
}


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/utils/is-processor-callback.util.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/utils/is-processor-callback.util.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.isProcessorCallback = isProcessorCallback;
function isProcessorCallback(processor) {
    return 'function' === typeof processor;
}


/***/ }),

/***/ "../node_modules/@nestjs/bull/dist/utils/is-separate-processor.util.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@nestjs/bull/dist/utils/is-separate-processor.util.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.isSeparateProcessor = isSeparateProcessor;
function isSeparateProcessor(processor) {
    return 'string' === typeof processor;
}


/***/ }),

/***/ "../node_modules/@slack/logger/dist/index.js":
/*!***************************************************!*\
  !*** ../node_modules/@slack/logger/dist/index.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

/* eslint-disable no-console */
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsoleLogger = exports.LogLevel = void 0;
/**
 * Severity levels for log entries
 */
var LogLevel;
(function (LogLevel) {
    LogLevel["ERROR"] = "error";
    LogLevel["WARN"] = "warn";
    LogLevel["INFO"] = "info";
    LogLevel["DEBUG"] = "debug";
})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));
/**
 * Default logger which logs to stdout and stderr
 */
class ConsoleLogger {
    constructor() {
        this.level = LogLevel.INFO;
        this.name = '';
    }
    getLevel() {
        return this.level;
    }
    /**
     * Sets the instance's log level so that only messages which are equal or more severe are output to the console.
     */
    setLevel(level) {
        this.level = level;
    }
    /**
     * Set the instance's name, which will appear on each log line before the message.
     */
    setName(name) {
        this.name = name;
    }
    /**
     * Log a debug message
     */
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    debug(...msg) {
        if (ConsoleLogger.isMoreOrEqualSevere(LogLevel.DEBUG, this.level)) {
            console.debug(ConsoleLogger.labels.get(LogLevel.DEBUG), this.name, ...msg);
        }
    }
    /**
     * Log an info message
     */
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    info(...msg) {
        if (ConsoleLogger.isMoreOrEqualSevere(LogLevel.INFO, this.level)) {
            console.info(ConsoleLogger.labels.get(LogLevel.INFO), this.name, ...msg);
        }
    }
    /**
     * Log a warning message
     */
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    warn(...msg) {
        if (ConsoleLogger.isMoreOrEqualSevere(LogLevel.WARN, this.level)) {
            console.warn(ConsoleLogger.labels.get(LogLevel.WARN), this.name, ...msg);
        }
    }
    /**
     * Log an error message
     */
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    error(...msg) {
        if (ConsoleLogger.isMoreOrEqualSevere(LogLevel.ERROR, this.level)) {
            console.error(ConsoleLogger.labels.get(LogLevel.ERROR), this.name, ...msg);
        }
    }
    /**
     * Helper to compare two log levels and determine if a is equal or more severe than b
     */
    static isMoreOrEqualSevere(a, b) {
        return ConsoleLogger.severity[a] >= ConsoleLogger.severity[b];
    }
}
exports.ConsoleLogger = ConsoleLogger;
/** Map of labels for each log level */
ConsoleLogger.labels = (() => {
    const entries = Object.entries(LogLevel);
    const map = entries.map(([key, value]) => [value, `[${key}] `]);
    return new Map(map);
})();
/** Map of severity as comparable numbers for each log level */
ConsoleLogger.severity = {
    [LogLevel.ERROR]: 400,
    [LogLevel.WARN]: 300,
    [LogLevel.INFO]: 200,
    [LogLevel.DEBUG]: 100,
};
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/block-kit/block-elements.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@slack/types/dist/block-kit/block-elements.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

// This file contains objects documented here: https://api.slack.com/reference/block-kit/block-elements
Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=block-elements.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/block-kit/blocks.js":
/*!*************************************************************!*\
  !*** ../node_modules/@slack/types/dist/block-kit/blocks.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=blocks.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/block-kit/composition-objects.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@slack/types/dist/block-kit/composition-objects.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

// This file contains objects documented here: https://api.slack.com/reference/block-kit/composition-objects
Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=composition-objects.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/block-kit/extensions.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@slack/types/dist/block-kit/extensions.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=extensions.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/calls.js":
/*!**************************************************!*\
  !*** ../node_modules/@slack/types/dist/calls.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

// These types represent users in Slack Calls, which is an API for showing 3rd party calls within the Slack client.
// More information on the API guide for Calls: https://api.slack.com/apis/calls
// and on User objects for use with Calls: https://api.slack.com/apis/calls#users
Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=calls.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/dialog.js":
/*!***************************************************!*\
  !*** ../node_modules/@slack/types/dist/dialog.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=dialog.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/app.js":
/*!*******************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/app.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=app.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/assistant.js":
/*!*************************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/assistant.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=assistant.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/call.js":
/*!********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/call.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=call.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/channel.js":
/*!***********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/channel.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=channel.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/dnd.js":
/*!*******************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/dnd.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=dnd.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/email.js":
/*!*********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/email.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=email.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/emoji.js":
/*!*********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/emoji.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=emoji.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/file.js":
/*!********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/file.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

// NOTE: `file_comment_added` and `file_comment_edited` are left out because they are discontinued
Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=file.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/function.js":
/*!************************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/function.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=function.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/grid-migration.js":
/*!******************************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/grid-migration.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=grid-migration.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/group.js":
/*!*********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/group.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=group.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/im.js":
/*!******************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/im.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=im.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/index.js":
/*!*********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/index.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./app */ "../node_modules/@slack/types/dist/events/app.js"), exports);
__exportStar(__webpack_require__(/*! ./assistant */ "../node_modules/@slack/types/dist/events/assistant.js"), exports);
__exportStar(__webpack_require__(/*! ./call */ "../node_modules/@slack/types/dist/events/call.js"), exports);
__exportStar(__webpack_require__(/*! ./channel */ "../node_modules/@slack/types/dist/events/channel.js"), exports);
__exportStar(__webpack_require__(/*! ./dnd */ "../node_modules/@slack/types/dist/events/dnd.js"), exports);
__exportStar(__webpack_require__(/*! ./email */ "../node_modules/@slack/types/dist/events/email.js"), exports);
__exportStar(__webpack_require__(/*! ./emoji */ "../node_modules/@slack/types/dist/events/emoji.js"), exports);
__exportStar(__webpack_require__(/*! ./file */ "../node_modules/@slack/types/dist/events/file.js"), exports);
__exportStar(__webpack_require__(/*! ./function */ "../node_modules/@slack/types/dist/events/function.js"), exports);
__exportStar(__webpack_require__(/*! ./grid-migration */ "../node_modules/@slack/types/dist/events/grid-migration.js"), exports);
__exportStar(__webpack_require__(/*! ./group */ "../node_modules/@slack/types/dist/events/group.js"), exports);
__exportStar(__webpack_require__(/*! ./im */ "../node_modules/@slack/types/dist/events/im.js"), exports);
__exportStar(__webpack_require__(/*! ./invite */ "../node_modules/@slack/types/dist/events/invite.js"), exports);
__exportStar(__webpack_require__(/*! ./link-shared */ "../node_modules/@slack/types/dist/events/link-shared.js"), exports);
__exportStar(__webpack_require__(/*! ./member */ "../node_modules/@slack/types/dist/events/member.js"), exports);
__exportStar(__webpack_require__(/*! ./message */ "../node_modules/@slack/types/dist/events/message.js"), exports);
__exportStar(__webpack_require__(/*! ./message-metadata */ "../node_modules/@slack/types/dist/events/message-metadata.js"), exports);
__exportStar(__webpack_require__(/*! ./pin */ "../node_modules/@slack/types/dist/events/pin.js"), exports);
__exportStar(__webpack_require__(/*! ./reaction */ "../node_modules/@slack/types/dist/events/reaction.js"), exports);
__exportStar(__webpack_require__(/*! ./shared-channel */ "../node_modules/@slack/types/dist/events/shared-channel.js"), exports);
__exportStar(__webpack_require__(/*! ./star */ "../node_modules/@slack/types/dist/events/star.js"), exports);
__exportStar(__webpack_require__(/*! ./subteam */ "../node_modules/@slack/types/dist/events/subteam.js"), exports);
__exportStar(__webpack_require__(/*! ./team */ "../node_modules/@slack/types/dist/events/team.js"), exports);
__exportStar(__webpack_require__(/*! ./token */ "../node_modules/@slack/types/dist/events/token.js"), exports);
__exportStar(__webpack_require__(/*! ./user */ "../node_modules/@slack/types/dist/events/user.js"), exports);
__exportStar(__webpack_require__(/*! ./steps-from-apps */ "../node_modules/@slack/types/dist/events/steps-from-apps.js"), exports);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/invite.js":
/*!**********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/invite.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=invite.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/link-shared.js":
/*!***************************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/link-shared.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=link-shared.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/member.js":
/*!**********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/member.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=member.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/message-metadata.js":
/*!********************************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/message-metadata.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=message-metadata.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/message.js":
/*!***********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/message.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=message.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/pin.js":
/*!*******************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/pin.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=pin.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/reaction.js":
/*!************************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/reaction.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=reaction.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/shared-channel.js":
/*!******************************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/shared-channel.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=shared-channel.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/star.js":
/*!********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/star.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=star.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/steps-from-apps.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/steps-from-apps.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=steps-from-apps.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/subteam.js":
/*!***********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/subteam.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=subteam.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/team.js":
/*!********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/team.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=team.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/token.js":
/*!*********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/token.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=token.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/events/user.js":
/*!********************************************************!*\
  !*** ../node_modules/@slack/types/dist/events/user.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=user.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/index.js":
/*!**************************************************!*\
  !*** ../node_modules/@slack/types/dist/index.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./calls */ "../node_modules/@slack/types/dist/calls.js"), exports);
__exportStar(__webpack_require__(/*! ./dialog */ "../node_modules/@slack/types/dist/dialog.js"), exports);
__exportStar(__webpack_require__(/*! ./events */ "../node_modules/@slack/types/dist/events/index.js"), exports);
__exportStar(__webpack_require__(/*! ./message-metadata */ "../node_modules/@slack/types/dist/message-metadata.js"), exports);
__exportStar(__webpack_require__(/*! ./message-attachments */ "../node_modules/@slack/types/dist/message-attachments.js"), exports);
__exportStar(__webpack_require__(/*! ./views */ "../node_modules/@slack/types/dist/views.js"), exports);
__exportStar(__webpack_require__(/*! ./block-kit/blocks */ "../node_modules/@slack/types/dist/block-kit/blocks.js"), exports);
__exportStar(__webpack_require__(/*! ./block-kit/composition-objects */ "../node_modules/@slack/types/dist/block-kit/composition-objects.js"), exports);
__exportStar(__webpack_require__(/*! ./block-kit/block-elements */ "../node_modules/@slack/types/dist/block-kit/block-elements.js"), exports);
__exportStar(__webpack_require__(/*! ./block-kit/extensions */ "../node_modules/@slack/types/dist/block-kit/extensions.js"), exports);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/message-attachments.js":
/*!****************************************************************!*\
  !*** ../node_modules/@slack/types/dist/message-attachments.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=message-attachments.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/message-metadata.js":
/*!*************************************************************!*\
  !*** ../node_modules/@slack/types/dist/message-metadata.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=message-metadata.js.map

/***/ }),

/***/ "../node_modules/@slack/types/dist/views.js":
/*!**************************************************!*\
  !*** ../node_modules/@slack/types/dist/views.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=views.js.map

/***/ }),

/***/ "../node_modules/@slack/web-api/dist/WebClient.js":
/*!********************************************************!*\
  !*** ../node_modules/@slack/web-api/dist/WebClient.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }
var __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var g = generator.apply(thisArg, _arguments || []), i, q = [];
    return i = {}, verb("next"), verb("throw"), verb("return", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;
    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }
    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }
    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
    function fulfill(value) { resume("next", value); }
    function reject(value) { resume("throw", value); }
    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
};
var __asyncValues = (this && this.__asyncValues) || function (o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.buildThreadTsWarningMessage = exports.WebClient = exports.WebClientEvent = void 0;
const node_path_1 = __webpack_require__(/*! node:path */ "node:path");
const node_querystring_1 = __webpack_require__(/*! node:querystring */ "node:querystring");
const node_util_1 = __webpack_require__(/*! node:util */ "node:util");
const node_zlib_1 = __importDefault(__webpack_require__(/*! node:zlib */ "node:zlib"));
const axios_1 = __importDefault(__webpack_require__(/*! axios */ "axios"));
const form_data_1 = __importDefault(__webpack_require__(/*! form-data */ "form-data"));
const is_electron_1 = __importDefault(__webpack_require__(/*! is-electron */ "../node_modules/is-electron/index.js"));
const is_stream_1 = __importDefault(__webpack_require__(/*! is-stream */ "is-stream"));
const p_queue_1 = __importDefault(__webpack_require__(/*! p-queue */ "../node_modules/p-queue/dist/index.js"));
const p_retry_1 = __importStar(__webpack_require__(/*! p-retry */ "../node_modules/p-retry/index.js"));
const errors_1 = __webpack_require__(/*! ./errors */ "../node_modules/@slack/web-api/dist/errors.js");
const file_upload_1 = __webpack_require__(/*! ./file-upload */ "../node_modules/@slack/web-api/dist/file-upload.js");
const helpers_1 = __importDefault(__webpack_require__(/*! ./helpers */ "../node_modules/@slack/web-api/dist/helpers.js"));
const instrument_1 = __webpack_require__(/*! ./instrument */ "../node_modules/@slack/web-api/dist/instrument.js");
const logger_1 = __webpack_require__(/*! ./logger */ "../node_modules/@slack/web-api/dist/logger.js");
const methods_1 = __webpack_require__(/*! ./methods */ "../node_modules/@slack/web-api/dist/methods.js");
const retry_policies_1 = __webpack_require__(/*! ./retry-policies */ "../node_modules/@slack/web-api/dist/retry-policies.js");
/*
 * Helpers
 */
// Props on axios default headers object to ignore when retrieving full list of actual headers sent in any HTTP requests
const axiosHeaderPropsToIgnore = [
    'delete',
    'common',
    'get',
    'put',
    'head',
    'post',
    'link',
    'patch',
    'purge',
    'unlink',
    'options',
];
const defaultFilename = 'Untitled';
const defaultPageSize = 200;
const noopPageReducer = () => undefined;
var WebClientEvent;
(function (WebClientEvent) {
    // TODO: safe to rename this to conform to PascalCase enum type naming convention?
    WebClientEvent["RATE_LIMITED"] = "rate_limited";
})(WebClientEvent || (exports.WebClientEvent = WebClientEvent = {}));
/**
 * A client for Slack's Web API
 *
 * This client provides an alias for each {@link https://api.slack.com/methods|Web API method}. Each method is
 * a convenience wrapper for calling the {@link WebClient#apiCall} method using the method name as the first parameter.
 */
class WebClient extends methods_1.Methods {
    /**
     * @param token - An API token to authenticate/authorize with Slack (usually start with `xoxp`, `xoxb`)
     * @param {Object} [webClientOptions] - Configuration options.
     * @param {Function} [webClientOptions.requestInterceptor] - An interceptor to mutate outgoing requests. See {@link https://axios-http.com/docs/interceptors Axios interceptors}
     * @param {Function} [webClientOptions.adapter] - An adapter to allow custom handling of requests. Useful if you would like to use a pre-configured http client. See {@link https://github.com/axios/axios/blob/v1.x/README.md?plain=1#L586 Axios adapter}
     */
    constructor(token, { slackApiUrl = 'https://slack.com/api/', logger = undefined, logLevel = undefined, maxRequestConcurrency = 100, retryConfig = retry_policies_1.tenRetriesInAboutThirtyMinutes, agent = undefined, tls = undefined, timeout = 0, rejectRateLimitedCalls = false, headers = {}, teamId = undefined, attachOriginalToWebAPIRequestError = true, requestInterceptor = undefined, adapter = undefined, } = {}) {
        super();
        this.token = token;
        this.slackApiUrl = slackApiUrl;
        this.retryConfig = retryConfig;
        this.requestQueue = new p_queue_1.default({ concurrency: maxRequestConcurrency });
        // NOTE: may want to filter the keys to only those acceptable for TLS options
        this.tlsConfig = tls !== undefined ? tls : {};
        this.rejectRateLimitedCalls = rejectRateLimitedCalls;
        this.teamId = teamId;
        this.attachOriginalToWebAPIRequestError = attachOriginalToWebAPIRequestError;
        // Logging
        if (typeof logger !== 'undefined') {
            this.logger = logger;
            if (typeof logLevel !== 'undefined') {
                this.logger.debug('The logLevel given to WebClient was ignored as you also gave logger');
            }
        }
        else {
            this.logger = (0, logger_1.getLogger)(WebClient.loggerName, logLevel !== null && logLevel !== void 0 ? logLevel : logger_1.LogLevel.INFO, logger);
        }
        if (this.token && !headers.Authorization)
            headers.Authorization = `Bearer ${this.token}`;
        this.axios = axios_1.default.create({
            adapter: adapter ? (config) => adapter(Object.assign(Object.assign({}, config), { adapter: undefined })) : undefined,
            timeout,
            baseURL: slackApiUrl,
            headers: (0, is_electron_1.default)() ? headers : Object.assign({ 'User-Agent': (0, instrument_1.getUserAgent)() }, headers),
            httpAgent: agent,
            httpsAgent: agent,
            validateStatus: () => true, // all HTTP status codes should result in a resolved promise (as opposed to only 2xx)
            maxRedirects: 0,
            // disabling axios' automatic proxy support:
            // axios would read from envvars to configure a proxy automatically, but it doesn't support TLS destinations.
            // for compatibility with https://api.slack.com, and for a larger set of possible proxies (SOCKS or other
            // protocols), users of this package should use the `agent` option to configure a proxy.
            proxy: false,
        });
        // serializeApiCallData will always determine the appropriate content-type
        this.axios.defaults.headers.post['Content-Type'] = undefined;
        // request interceptors have reversed execution order
        // see: https://github.com/axios/axios/blob/v1.x/test/specs/interceptors.spec.js#L88
        if (requestInterceptor) {
            this.axios.interceptors.request.use(requestInterceptor, null);
        }
        this.axios.interceptors.request.use(this.serializeApiCallData.bind(this), null);
        this.logger.debug('initialized');
    }
    /**
     * Generic method for calling a Web API method
     * @param method - the Web API method to call {@link https://api.slack.com/methods}
     * @param options - options
     */
    apiCall(method, options = {}) {
        return __awaiter(this, void 0, void 0, function* () {
            this.logger.debug(`apiCall('${method}') start`);
            warnDeprecations(method, this.logger);
            warnIfFallbackIsMissing(method, this.logger, options);
            warnIfThreadTsIsNotString(method, this.logger, options);
            if (typeof options === 'string' || typeof options === 'number' || typeof options === 'boolean') {
                throw new TypeError(`Expected an options argument but instead received a ${typeof options}`);
            }
            (0, file_upload_1.warnIfNotUsingFilesUploadV2)(method, this.logger);
            // @ts-expect-error insufficient overlap between Record and FilesUploadV2Arguments
            if (method === 'files.uploadV2')
                return this.filesUploadV2(options);
            const headers = {};
            if (options.token)
                headers.Authorization = `Bearer ${options.token}`;
            const response = yield this.makeRequest(method, Object.assign({ team_id: this.teamId }, options), headers);
            const result = yield this.buildResult(response);
            this.logger.debug(`http request result: ${JSON.stringify(result)}`);
            // log warnings in response metadata
            if (result.response_metadata !== undefined && result.response_metadata.warnings !== undefined) {
                result.response_metadata.warnings.forEach(this.logger.warn.bind(this.logger));
            }
            // log warnings and errors in response metadata messages
            // related to https://api.slack.com/changelog/2016-09-28-response-metadata-is-on-the-way
            if (result.response_metadata !== undefined && result.response_metadata.messages !== undefined) {
                for (const msg of result.response_metadata.messages) {
                    const errReg = /\[ERROR\](.*)/;
                    const warnReg = /\[WARN\](.*)/;
                    if (errReg.test(msg)) {
                        const errMatch = msg.match(errReg);
                        if (errMatch != null) {
                            this.logger.error(errMatch[1].trim());
                        }
                    }
                    else if (warnReg.test(msg)) {
                        const warnMatch = msg.match(warnReg);
                        if (warnMatch != null) {
                            this.logger.warn(warnMatch[1].trim());
                        }
                    }
                }
            }
            // If result's content is gzip, "ok" property is not returned with successful response
            // TODO: look into simplifying this code block to only check for the second condition
            // if an { ok: false } body applies for all API errors
            if (!result.ok && response.headers['content-type'] !== 'application/gzip') {
                throw (0, errors_1.platformErrorFromResult)(result);
            }
            if ('ok' in result && result.ok === false) {
                throw (0, errors_1.platformErrorFromResult)(result);
            }
            this.logger.debug(`apiCall('${method}') end`);
            return result;
        });
    }
    paginate(method, options, shouldStop, reduce) {
        const pageSize = (() => {
            if (options !== undefined && typeof options.limit === 'number') {
                const { limit } = options;
                options.limit = undefined;
                return limit;
            }
            return defaultPageSize;
        })();
        function generatePages() {
            return __asyncGenerator(this, arguments, function* generatePages_1() {
                // when result is undefined, that signals that the first of potentially many calls has not yet been made
                let result;
                // paginationOptions stores pagination options not already stored in the options argument
                let paginationOptions = {
                    limit: pageSize,
                };
                if (options !== undefined && options.cursor !== undefined) {
                    paginationOptions.cursor = options.cursor;
                }
                // NOTE: test for the situation where you're resuming a pagination using and existing cursor
                while (result === undefined || paginationOptions !== undefined) {
                    result = yield __await(this.apiCall(method, Object.assign(options !== undefined ? options : {}, paginationOptions)));
                    yield yield __await(result);
                    paginationOptions = paginationOptionsForNextPage(result, pageSize);
                }
            });
        }
        if (shouldStop === undefined) {
            return generatePages.call(this);
        }
        const pageReducer = reduce !== undefined ? reduce : noopPageReducer;
        let index = 0;
        return (() => __awaiter(this, void 0, void 0, function* () {
            // Unroll the first iteration of the iterator
            // This is done primarily because in order to satisfy the type system, we need a variable that is typed as A
            // (shown as accumulator before), but before the first iteration all we have is a variable typed A | undefined.
            // Unrolling the first iteration allows us to deal with undefined as a special case.
            var _a, e_1, _b, _c;
            const pageIterator = generatePages.call(this);
            const firstIteratorResult = yield pageIterator.next(undefined);
            // Assumption: there will always be at least one result in a paginated API request
            // if (firstIteratorResult.done) { return; }
            const firstPage = firstIteratorResult.value;
            let accumulator = pageReducer(undefined, firstPage, index);
            index += 1;
            if (shouldStop(firstPage)) {
                return accumulator;
            }
            try {
                // Continue iteration
                for (var _d = true, pageIterator_1 = __asyncValues(pageIterator), pageIterator_1_1; pageIterator_1_1 = yield pageIterator_1.next(), _a = pageIterator_1_1.done, !_a; _d = true) {
                    _c = pageIterator_1_1.value;
                    _d = false;
                    const page = _c;
                    accumulator = pageReducer(accumulator, page, index);
                    if (shouldStop(page)) {
                        return accumulator;
                    }
                    index += 1;
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (!_d && !_a && (_b = pageIterator_1.return)) yield _b.call(pageIterator_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return accumulator;
        }))();
    }
    /**
     * This wrapper method provides an easy way to upload files using the following endpoints:
     *
     * **#1**: For each file submitted with this method, submit filenames
     * and file metadata to {@link https://api.slack.com/methods/files.getUploadURLExternal files.getUploadURLExternal} to request a URL to
     * which to send the file data to and an id for the file
     *
     * **#2**: for each returned file `upload_url`, upload corresponding file to
     * URLs returned from step 1 (e.g. https://files.slack.com/upload/v1/...\")
     *
     * **#3**: Complete uploads {@link https://api.slack.com/methods/files.completeUploadExternal files.completeUploadExternal}
     * @param options
     */
    filesUploadV2(options) {
        return __awaiter(this, void 0, void 0, function* () {
            this.logger.debug('files.uploadV2() start');
            // 1
            const fileUploads = yield this.getAllFileUploads(options);
            const fileUploadsURLRes = yield this.fetchAllUploadURLExternal(fileUploads);
            // set the upload_url and file_id returned from Slack
            fileUploadsURLRes.forEach((res, idx) => {
                fileUploads[idx].upload_url = res.upload_url;
                fileUploads[idx].file_id = res.file_id;
            });
            // 2
            yield this.postFileUploadsToExternalURL(fileUploads, options);
            // 3
            const completion = yield this.completeFileUploads(fileUploads);
            return { ok: true, files: completion };
        });
    }
    /**
     * For each file submitted with this method, submits filenames
     * and file metadata to files.getUploadURLExternal to request a URL to
     * which to send the file data to and an id for the file
     * @param fileUploads
     */
    fetchAllUploadURLExternal(fileUploads) {
        return __awaiter(this, void 0, void 0, function* () {
            return Promise.all(fileUploads.map((upload) => {
                const options = {
                    filename: upload.filename,
                    length: upload.length,
                    alt_text: upload.alt_text,
                    snippet_type: upload.snippet_type,
                };
                if ('token' in upload) {
                    options.token = upload.token;
                }
                return this.files.getUploadURLExternal(options);
            }));
        });
    }
    /**
     * Complete uploads.
     * @param fileUploads
     * @returns
     */
    completeFileUploads(fileUploads) {
        return __awaiter(this, void 0, void 0, function* () {
            const toComplete = Object.values((0, file_upload_1.getAllFileUploadsToComplete)(fileUploads));
            return Promise.all(toComplete.map((job) => this.files.completeUploadExternal(job)));
        });
    }
    /**
     * for each returned file upload URL, upload corresponding file
     * @param fileUploads
     * @returns
     */
    postFileUploadsToExternalURL(fileUploads, options) {
        return __awaiter(this, void 0, void 0, function* () {
            return Promise.all(fileUploads.map((upload) => __awaiter(this, void 0, void 0, function* () {
                const { upload_url, file_id, filename, data } = upload;
                // either file or content will be defined
                const body = data;
                // try to post to external url
                if (upload_url) {
                    const headers = {};
                    if (options.token)
                        headers.Authorization = `Bearer ${options.token}`;
                    const uploadRes = yield this.makeRequest(upload_url, {
                        body,
                    }, headers);
                    if (uploadRes.status !== 200) {
                        return Promise.reject(Error(`Failed to upload file (id:${file_id}, filename: ${filename})`));
                    }
                    const returnData = { ok: true, body: uploadRes.data };
                    return Promise.resolve(returnData);
                }
                return Promise.reject(Error(`No upload url found for file (id: ${file_id}, filename: ${filename}`));
            })));
        });
    }
    /**
     * @param options All file uploads arguments
     * @returns An array of file upload entries
     */
    getAllFileUploads(options) {
        return __awaiter(this, void 0, void 0, function* () {
            let fileUploads = [];
            // add single file data to uploads if file or content exists at the top level
            if ('file' in options || 'content' in options) {
                fileUploads.push(yield (0, file_upload_1.getFileUploadJob)(options, this.logger));
            }
            // add multiple files data when file_uploads is supplied
            if ('file_uploads' in options) {
                fileUploads = fileUploads.concat(yield (0, file_upload_1.getMultipleFileUploadJobs)(options, this.logger));
            }
            return fileUploads;
        });
    }
    /**
     * Low-level function to make a single API request. handles queuing, retries, and http-level errors
     */
    makeRequest(url, body, headers = {}) {
        return __awaiter(this, void 0, void 0, function* () {
            // TODO: better input types - remove any
            const task = () => this.requestQueue.add(() => __awaiter(this, void 0, void 0, function* () {
                const requestURL = url.startsWith('https' || 0) ? url : `${this.axios.getUri() + url}`;
                try {
                    // biome-ignore lint/suspicious/noExplicitAny: TODO: type this
                    const config = Object.assign({ headers }, this.tlsConfig);
                    // admin.analytics.getFile returns a binary response
                    // To be able to parse it, it should be read as an ArrayBuffer
                    if (url.endsWith('admin.analytics.getFile')) {
                        config.responseType = 'arraybuffer';
                    }
                    // apps.event.authorizations.list will reject HTTP requests that send token in the body
                    // TODO: consider applying this change to all methods - though that will require thorough integration testing
                    if (url.endsWith('apps.event.authorizations.list')) {
                        body.token = undefined;
                    }
                    this.logger.debug(`http request url: ${requestURL}`);
                    this.logger.debug(`http request body: ${JSON.stringify(redact(body))}`);
                    // compile all headers - some set by default under the hood by axios - that will be sent along
                    let allHeaders = Object.keys(this.axios.defaults.headers).reduce((acc, cur) => {
                        if (!axiosHeaderPropsToIgnore.includes(cur)) {
                            acc[cur] = this.axios.defaults.headers[cur];
                        }
                        return acc;
                    }, {});
                    allHeaders = Object.assign(Object.assign(Object.assign({}, this.axios.defaults.headers.common), allHeaders), headers);
                    this.logger.debug(`http request headers: ${JSON.stringify(redact(allHeaders))}`);
                    const response = yield this.axios.post(url, body, config);
                    this.logger.debug('http response received');
                    if (response.status === 429) {
                        const retrySec = parseRetryHeaders(response);
                        if (retrySec !== undefined) {
                            this.emit(WebClientEvent.RATE_LIMITED, retrySec, { url, body });
                            if (this.rejectRateLimitedCalls) {
                                throw new p_retry_1.AbortError((0, errors_1.rateLimitedErrorWithDelay)(retrySec));
                            }
                            this.logger.info(`API Call failed due to rate limiting. Will retry in ${retrySec} seconds.`);
                            // pause the request queue and then delay the rejection by the amount of time in the retry header
                            this.requestQueue.pause();
                            // NOTE: if there was a way to introspect the current RetryOperation and know what the next timeout
                            // would be, then we could subtract that time from the following delay, knowing that it the next
                            // attempt still wouldn't occur until after the rate-limit header has specified. an even better
                            // solution would be to subtract the time from only the timeout of this next attempt of the
                            // RetryOperation. this would result in the staying paused for the entire duration specified in the
                            // header, yet this operation not having to pay the timeout cost in addition to that.
                            yield (0, helpers_1.default)(retrySec * 1000);
                            // resume the request queue and throw a non-abort error to signal a retry
                            this.requestQueue.start();
                            // TODO: We may want to have more detailed info such as team_id, params except tokens, and so on.
                            throw new Error(`A rate limit was exceeded (url: ${url}, retry-after: ${retrySec})`);
                        }
                        // TODO: turn this into some CodedError
                        throw new p_retry_1.AbortError(new Error(`Retry header did not contain a valid timeout (url: ${url}, retry-after header: ${response.headers['retry-after']})`));
                    }
                    // Slack's Web API doesn't use meaningful status codes besides 429 and 200
                    if (response.status !== 200) {
                        throw (0, errors_1.httpErrorFromResponse)(response);
                    }
                    return response;
                }
                catch (error) {
                    // To make this compatible with tsd, casting here instead of `catch (error: any)`
                    // biome-ignore lint/suspicious/noExplicitAny: errors can be anything
                    const e = error;
                    this.logger.warn('http request failed', e.message);
                    if (e.request) {
                        throw (0, errors_1.requestErrorWithOriginal)(e, this.attachOriginalToWebAPIRequestError);
                    }
                    throw error;
                }
            }));
            // biome-ignore lint/suspicious/noExplicitAny: http responses can be anything
            return (0, p_retry_1.default)(task, this.retryConfig);
        });
    }
    /**
     * Transforms options (a simple key-value object) into an acceptable value for a body. This can be either
     * a string, used when posting with a content-type of url-encoded. Or, it can be a readable stream, used
     * when the options contain a binary (a stream or a buffer) and the upload should be done with content-type
     * multipart/form-data.
     * @param config - The Axios request configuration object
     */
    serializeApiCallData(config) {
        const { data, headers } = config;
        // The following operation both flattens complex objects into a JSON-encoded strings and searches the values for
        // binary content
        let containsBinaryData = false;
        // biome-ignore lint/suspicious/noExplicitAny: HTTP request data can be anything
        const flattened = Object.entries(data).map(([key, value]) => {
            if (value === undefined || value === null) {
                return [];
            }
            let serializedValue = value;
            if (Buffer.isBuffer(value) || (0, is_stream_1.default)(value)) {
                containsBinaryData = true;
            }
            else if (typeof value !== 'string' && typeof value !== 'number' && typeof value !== 'boolean') {
                // if value is anything other than string, number, boolean, binary data, a Stream, or a Buffer, then encode it
                // as a JSON string.
                serializedValue = JSON.stringify(value);
            }
            return [key, serializedValue];
        });
        // A body with binary content should be serialized as multipart/form-data
        if (containsBinaryData) {
            this.logger.debug('Request arguments contain binary data');
            const form = flattened.reduce((frm, [key, value]) => {
                if (Buffer.isBuffer(value) || (0, is_stream_1.default)(value)) {
                    const opts = {};
                    opts.filename = (() => {
                        // attempt to find filename from `value`. adapted from:
                        // https://github.com/form-data/form-data/blob/028c21e0f93c5fefa46a7bbf1ba753e4f627ab7a/lib/form_data.js#L227-L230
                        // formidable and the browser add a name property
                        // fs- and request- streams have path property
                        // biome-ignore lint/suspicious/noExplicitAny: form values can be anything
                        const streamOrBuffer = value;
                        if (typeof streamOrBuffer.name === 'string') {
                            return (0, node_path_1.basename)(streamOrBuffer.name);
                        }
                        if (typeof streamOrBuffer.path === 'string') {
                            return (0, node_path_1.basename)(streamOrBuffer.path);
                        }
                        return defaultFilename;
                    })();
                    frm.append(key, value, opts);
                }
                else if (key !== undefined && value !== undefined) {
                    frm.append(key, value);
                }
                return frm;
            }, new form_data_1.default());
            if (headers) {
                // Copying FormData-generated headers into headers param
                // not reassigning to headers param since it is passed by reference and behaves as an inout param
                for (const [header, value] of Object.entries(form.getHeaders())) {
                    headers[header] = value;
                }
            }
            config.data = form;
            config.headers = headers;
            return config;
        }
        // Otherwise, a simple key-value object is returned
        if (headers)
            headers['Content-Type'] = 'application/x-www-form-urlencoded';
        // biome-ignore lint/suspicious/noExplicitAny: form values can be anything
        const initialValue = {};
        config.data = (0, node_querystring_1.stringify)(flattened.reduce((accumulator, [key, value]) => {
            if (key !== undefined && value !== undefined) {
                accumulator[key] = value;
            }
            return accumulator;
        }, initialValue));
        config.headers = headers;
        return config;
    }
    /**
     * Processes an HTTP response into a WebAPICallResult by performing JSON parsing on the body and merging relevant
     * HTTP headers into the object.
     * @param response - an http response
     */
    buildResult(response) {
        return __awaiter(this, void 0, void 0, function* () {
            let { data } = response;
            const isGzipResponse = response.headers['content-type'] === 'application/gzip';
            // Check for GZIP response - if so, it is a successful response from admin.analytics.getFile
            if (isGzipResponse) {
                // admin.analytics.getFile will return a Buffer that can be unzipped
                try {
                    const unzippedData = yield new Promise((resolve, reject) => {
                        node_zlib_1.default.unzip(data, (err, buf) => {
                            if (err) {
                                return reject(err);
                            }
                            return resolve(buf.toString().split('\n'));
                        });
                    })
                        .then((res) => res)
                        .catch((err) => {
                        throw err;
                    });
                    const fileData = [];
                    if (Array.isArray(unzippedData)) {
                        for (const dataset of unzippedData) {
                            if (dataset && dataset.length > 0) {
                                fileData.push(JSON.parse(dataset));
                            }
                        }
                    }
                    data = { file_data: fileData };
                }
                catch (err) {
                    data = { ok: false, error: err };
                }
            }
            else if (!isGzipResponse && response.request.path === '/api/admin.analytics.getFile') {
                // if it isn't a Gzip response but is from the admin.analytics.getFile request,
                // decode the ArrayBuffer to JSON read the error
                data = JSON.parse(new node_util_1.TextDecoder().decode(data));
            }
            if (typeof data === 'string') {
                // response.data can be a string, not an object for some reason
                try {
                    data = JSON.parse(data);
                }
                catch (_) {
                    // failed to parse the string value as JSON data
                    data = { ok: false, error: data };
                }
            }
            if (data.response_metadata === undefined) {
                data.response_metadata = {};
            }
            // add scopes metadata from headers
            if (response.headers['x-oauth-scopes'] !== undefined) {
                data.response_metadata.scopes = response.headers['x-oauth-scopes'].trim().split(/\s*,\s*/);
            }
            if (response.headers['x-accepted-oauth-scopes'] !== undefined) {
                data.response_metadata.acceptedScopes = response.headers['x-accepted-oauth-scopes']
                    .trim()
                    .split(/\s*,\s*/);
            }
            // add retry metadata from headers
            const retrySec = parseRetryHeaders(response);
            if (retrySec !== undefined) {
                data.response_metadata.retryAfter = retrySec;
            }
            return data;
        });
    }
}
exports.WebClient = WebClient;
/**
 * The name used to prefix all logging generated from this object
 */
WebClient.loggerName = 'WebClient';
exports["default"] = WebClient;
/**
 * Determines an appropriate set of cursor pagination options for the next request to a paginated API method.
 * @param previousResult - the result of the last request, where the next cursor might be found.
 * @param pageSize - the maximum number of additional items to fetch in the next request.
 */
function paginationOptionsForNextPage(previousResult, pageSize) {
    if (previousResult !== undefined &&
        previousResult.response_metadata !== undefined &&
        previousResult.response_metadata.next_cursor !== undefined &&
        previousResult.response_metadata.next_cursor !== '') {
        return {
            limit: pageSize,
            cursor: previousResult.response_metadata.next_cursor,
        };
    }
    return undefined;
}
/**
 * Extract the amount of time (in seconds) the platform has recommended this client wait before sending another request
 * from a rate-limited HTTP response (statusCode = 429).
 */
function parseRetryHeaders(response) {
    if (response.headers['retry-after'] !== undefined) {
        const retryAfter = Number.parseInt(response.headers['retry-after'], 10);
        if (!Number.isNaN(retryAfter)) {
            return retryAfter;
        }
    }
    return undefined;
}
/**
 * Log a warning when using a deprecated method
 * @param method api method being called
 * @param logger instance of web clients logger
 */
function warnDeprecations(method, logger) {
    const deprecatedMethods = ['workflows.'];
    const isDeprecated = deprecatedMethods.some((depMethod) => {
        const re = new RegExp(`^${depMethod}`);
        return re.test(method);
    });
    if (isDeprecated) {
        logger.warn(`${method} is deprecated. Please check on https://api.slack.com/methods for an alternative.`);
    }
}
/**
 * Log a warning when using chat.postMessage without text argument or attachments with fallback argument
 * @param method api method being called
 * @param logger instance of we clients logger
 * @param options arguments for the Web API method
 */
function warnIfFallbackIsMissing(method, logger, options) {
    const targetMethods = ['chat.postEphemeral', 'chat.postMessage', 'chat.scheduleMessage'];
    const isTargetMethod = targetMethods.includes(method);
    const hasAttachments = (args) => Array.isArray(args.attachments) && args.attachments.length;
    const missingAttachmentFallbackDetected = (args) => Array.isArray(args.attachments) &&
        args.attachments.some((attachment) => !attachment.fallback || attachment.fallback.trim() === '');
    const isEmptyText = (args) => args.text === undefined || args.text === null || args.text === '';
    const buildMissingTextWarning = () => `The top-level \`text\` argument is missing in the request payload for a ${method} call - It's a best practice to always provide a \`text\` argument when posting a message. The \`text\` is used in places where the content cannot be rendered such as: system push notifications, assistive technology such as screen readers, etc.`;
    const buildMissingFallbackWarning = () => `Additionally, the attachment-level \`fallback\` argument is missing in the request payload for a ${method} call - To avoid this warning, it is recommended to always provide a top-level \`text\` argument when posting a message. Alternatively, you can provide an attachment-level \`fallback\` argument, though this is now considered a legacy field (see https://api.slack.com/reference/messaging/attachments#legacy_fields for more details).`;
    if (isTargetMethod && typeof options === 'object') {
        if (hasAttachments(options)) {
            if (missingAttachmentFallbackDetected(options) && isEmptyText(options)) {
                logger.warn(buildMissingTextWarning());
                logger.warn(buildMissingFallbackWarning());
            }
        }
        else if (isEmptyText(options)) {
            logger.warn(buildMissingTextWarning());
        }
    }
}
/**
 * Log a warning when thread_ts is not a string
 * @param method api method being called
 * @param logger instance of web clients logger
 * @param options arguments for the Web API method
 */
function warnIfThreadTsIsNotString(method, logger, options) {
    const targetMethods = ['chat.postEphemeral', 'chat.postMessage', 'chat.scheduleMessage', 'files.upload'];
    const isTargetMethod = targetMethods.includes(method);
    if (isTargetMethod && (options === null || options === void 0 ? void 0 : options.thread_ts) !== undefined && typeof (options === null || options === void 0 ? void 0 : options.thread_ts) !== 'string') {
        logger.warn(buildThreadTsWarningMessage(method));
    }
}
function buildThreadTsWarningMessage(method) {
    return `The given thread_ts value in the request payload for a ${method} call is a float value. We highly recommend using a string value instead.`;
}
exports.buildThreadTsWarningMessage = buildThreadTsWarningMessage;
/**
 * Takes an object and redacts specific items
 * @param body
 * @returns
 */
function redact(body) {
    // biome-ignore lint/suspicious/noExplicitAny: objects can be anything
    const flattened = Object.entries(body).map(([key, value]) => {
        // no value provided
        if (value === undefined || value === null) {
            return [];
        }
        let serializedValue = value;
        // redact possible tokens
        if (key.match(/.*token.*/) !== null || key.match(/[Aa]uthorization/)) {
            serializedValue = '[[REDACTED]]';
        }
        // when value is buffer or stream we can avoid logging it
        if (Buffer.isBuffer(value) || (0, is_stream_1.default)(value)) {
            serializedValue = '[[BINARY VALUE OMITTED]]';
        }
        else if (typeof value !== 'string' && typeof value !== 'number' && typeof value !== 'boolean') {
            serializedValue = JSON.stringify(value);
        }
        return [key, serializedValue];
    });
    // return as object
    const initialValue = {};
    return flattened.reduce((accumulator, [key, value]) => {
        if (key !== undefined && value !== undefined) {
            accumulator[key] = value;
        }
        return accumulator;
    }, initialValue);
}
//# sourceMappingURL=WebClient.js.map

/***/ }),

/***/ "../node_modules/@slack/web-api/dist/errors.js":
/*!*****************************************************!*\
  !*** ../node_modules/@slack/web-api/dist/errors.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.rateLimitedErrorWithDelay = exports.platformErrorFromResult = exports.httpErrorFromResponse = exports.requestErrorWithOriginal = exports.errorWithCode = exports.ErrorCode = void 0;
/**
 * A dictionary of codes for errors produced by this package
 */
var ErrorCode;
(function (ErrorCode) {
    // general error
    ErrorCode["RequestError"] = "slack_webapi_request_error";
    ErrorCode["HTTPError"] = "slack_webapi_http_error";
    ErrorCode["PlatformError"] = "slack_webapi_platform_error";
    ErrorCode["RateLimitedError"] = "slack_webapi_rate_limited_error";
    // file uploads errors
    ErrorCode["FileUploadInvalidArgumentsError"] = "slack_webapi_file_upload_invalid_args_error";
    ErrorCode["FileUploadReadFileDataError"] = "slack_webapi_file_upload_read_file_data_error";
})(ErrorCode || (exports.ErrorCode = ErrorCode = {}));
/**
 * Factory for producing a {@link CodedError} from a generic error
 */
function errorWithCode(error, code) {
    // NOTE: might be able to return something more specific than a CodedError with conditional typing
    const codedError = error;
    codedError.code = code;
    return codedError;
}
exports.errorWithCode = errorWithCode;
/**
 * A factory to create WebAPIRequestError objects
 * @param original - original error
 * @param attachOriginal - config indicating if 'original' property should be added on the error object
 */
function requestErrorWithOriginal(original, attachOriginal) {
    const error = errorWithCode(new Error(`A request error occurred: ${original.message}`), ErrorCode.RequestError);
    if (attachOriginal) {
        error.original = original;
    }
    return error;
}
exports.requestErrorWithOriginal = requestErrorWithOriginal;
/**
 * A factory to create WebAPIHTTPError objects
 * @param response - original error
 */
function httpErrorFromResponse(response) {
    const error = errorWithCode(new Error(`An HTTP protocol error occurred: statusCode = ${response.status}`), ErrorCode.HTTPError);
    error.statusCode = response.status;
    error.statusMessage = response.statusText;
    const nonNullHeaders = {};
    for (const k of Object.keys(response.headers)) {
        if (k && response.headers[k]) {
            nonNullHeaders[k] = response.headers[k];
        }
    }
    error.headers = nonNullHeaders;
    error.body = response.data;
    return error;
}
exports.httpErrorFromResponse = httpErrorFromResponse;
/**
 * A factory to create WebAPIPlatformError objects
 * @param result - Web API call result
 */
function platformErrorFromResult(result) {
    const error = errorWithCode(new Error(`An API error occurred: ${result.error}`), ErrorCode.PlatformError);
    error.data = result;
    return error;
}
exports.platformErrorFromResult = platformErrorFromResult;
/**
 * A factory to create WebAPIRateLimitedError objects
 * @param retrySec - Number of seconds that the request can be retried in
 */
function rateLimitedErrorWithDelay(retrySec) {
    const error = errorWithCode(new Error(`A rate-limit has been reached, you may retry this request in ${retrySec} seconds`), ErrorCode.RateLimitedError);
    error.retryAfter = retrySec;
    return error;
}
exports.rateLimitedErrorWithDelay = rateLimitedErrorWithDelay;
//# sourceMappingURL=errors.js.map

/***/ }),

/***/ "../node_modules/@slack/web-api/dist/file-upload.js":
/*!**********************************************************!*\
  !*** ../node_modules/@slack/web-api/dist/file-upload.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.buildInvalidFilesUploadParamError = exports.buildMultipleChannelsErrorMsg = exports.buildChannelsWarning = exports.buildFilesUploadMissingMessage = exports.buildGeneralFilesUploadWarning = exports.buildLegacyMethodWarning = exports.buildMissingExtensionWarning = exports.buildMissingFileNameWarning = exports.buildLegacyFileTypeWarning = exports.buildFileSizeErrorMsg = exports.buildMissingFileIdError = exports.warnIfLegacyFileType = exports.warnIfMissingOrInvalidFileNameAndDefault = exports.errorIfInvalidOrMissingFileData = exports.errorIfChannelsCsv = exports.warnIfChannels = exports.warnIfNotUsingFilesUploadV2 = exports.getAllFileUploadsToComplete = exports.getFileDataAsStream = exports.getFileDataLength = exports.getFileData = exports.getMultipleFileUploadJobs = exports.getFileUploadJob = void 0;
const node_fs_1 = __webpack_require__(/*! node:fs */ "node:fs");
const node_stream_1 = __webpack_require__(/*! node:stream */ "node:stream");
const errors_1 = __webpack_require__(/*! ./errors */ "../node_modules/@slack/web-api/dist/errors.js");
function getFileUploadJob(options, logger) {
    var _a, _b, _c, _d;
    return __awaiter(this, void 0, void 0, function* () {
        // Validate parameters
        warnIfLegacyFileType(options, logger);
        warnIfChannels(options, logger);
        errorIfChannelsCsv(options);
        const fileName = warnIfMissingOrInvalidFileNameAndDefault(options, logger);
        const fileData = yield getFileData(options);
        const fileDataBytesLength = getFileDataLength(fileData);
        const fileUploadJob = {
            // supplied by user
            alt_text: options.alt_text,
            channel_id: (_a = options.channels) !== null && _a !== void 0 ? _a : options.channel_id,
            filename: (_b = options.filename) !== null && _b !== void 0 ? _b : fileName,
            initial_comment: options.initial_comment,
            snippet_type: options.snippet_type,
            title: (_d = (_c = options.title) !== null && _c !== void 0 ? _c : options.filename) !== null && _d !== void 0 ? _d : fileName, // default title to filename unless otherwise specified
            // calculated
            data: fileData,
            length: fileDataBytesLength,
        };
        if ('thread_ts' in options) {
            fileUploadJob.thread_ts = options.thread_ts;
        }
        if ('token' in options) {
            fileUploadJob.token = options.token;
        }
        if ('content' in options) {
            return Object.assign({ content: options.content }, fileUploadJob);
        }
        if ('file' in options) {
            return Object.assign({ file: options.file }, fileUploadJob);
        }
        throw (0, errors_1.errorWithCode)(new Error('Either a file or content field is required for valid file upload. You must supply one'), errors_1.ErrorCode.FileUploadInvalidArgumentsError);
    });
}
exports.getFileUploadJob = getFileUploadJob;
/**
 * Returns an array of files upload entries when `file_uploads` is supplied.
 * **Note**
 * file_uploads should be set when multiple files are intended to be attached to a
 * single message. To support this, we handle options supplied with
 * top level `initial_comment`, `thread_ts`, `channel_id` and `file_uploads` parameters.
 * ```javascript
 * const res = await client.files.uploadV2({
 *   initial_comment: 'Here are the files!',
 *   thread_ts: '1223313423434.131321',
 *   channel_id: 'C12345',
 *   file_uploads: [
 *     {
 *       file: './test/fixtures/test-txt.txt',
 *       filename: 'test-txt.txt',
 *     },
 *     {
 *       file: './test/fixtures/test-png.png',
 *       filename: 'test-png.png',
 *     },
 *   ],
 * });
 * ```
 * @param options provided by user
 */
function getMultipleFileUploadJobs(options, logger) {
    return __awaiter(this, void 0, void 0, function* () {
        if ('file_uploads' in options) {
            // go through each file_upload and create a job for it
            return Promise.all(options.file_uploads.map((upload) => {
                // ensure no omitted properties included in files_upload entry
                // these properties are valid only at the top-level, not
                // inside file_uploads.
                const { channel_id, channels, initial_comment, thread_ts } = upload;
                if (channel_id || channels || initial_comment || thread_ts) {
                    throw (0, errors_1.errorWithCode)(new Error(buildInvalidFilesUploadParamError()), errors_1.ErrorCode.FileUploadInvalidArgumentsError);
                }
                // takes any channel_id, initial_comment and thread_ts
                // supplied at the top level.
                const uploadJobArgs = Object.assign(Object.assign({}, upload), { channels: options.channels, channel_id: options.channel_id, initial_comment: options.initial_comment });
                if ('thread_ts' in options) {
                    uploadJobArgs.thread_ts = options.thread_ts;
                }
                if ('token' in options) {
                    uploadJobArgs.token = options.token;
                }
                if ('content' in upload) {
                    return getFileUploadJob(Object.assign({ content: upload.content }, uploadJobArgs), logger);
                }
                if ('file' in upload) {
                    return getFileUploadJob(Object.assign({ file: upload.file }, uploadJobArgs), logger);
                }
                throw (0, errors_1.errorWithCode)(new Error('Either a file or content field is required for valid file upload. You must supply one'), errors_1.ErrorCode.FileUploadInvalidArgumentsError);
            }));
        }
        throw new Error(buildFilesUploadMissingMessage());
    });
}
exports.getMultipleFileUploadJobs = getMultipleFileUploadJobs;
// Helpers to build the FileUploadJob
/**
 * Returns a single file upload's data
 * @param options
 * @returns Binary data representation of file
 */
function getFileData(options) {
    return __awaiter(this, void 0, void 0, function* () {
        errorIfInvalidOrMissingFileData(options);
        if ('file' in options) {
            const { file } = options;
            // try to handle as buffer
            if (Buffer.isBuffer(file))
                return file;
            // try to handle as filepath
            if (typeof file === 'string') {
                // try to read file as if the string was a file path
                try {
                    const dataBuffer = (0, node_fs_1.readFileSync)(file);
                    return dataBuffer;
                }
                catch (error) {
                    throw (0, errors_1.errorWithCode)(new Error(`Unable to resolve file data for ${file}. Please supply a filepath string, or binary data Buffer or String directly.`), errors_1.ErrorCode.FileUploadInvalidArgumentsError);
                }
            }
            // try to handle as Readable
            const data = yield getFileDataAsStream(file);
            if (data)
                return data;
        }
        if ('content' in options)
            return Buffer.from(options.content);
        // general catch-all error
        throw (0, errors_1.errorWithCode)(new Error('There was an issue getting the file data for the file or content supplied'), errors_1.ErrorCode.FileUploadReadFileDataError);
    });
}
exports.getFileData = getFileData;
function getFileDataLength(data) {
    if (data) {
        return Buffer.byteLength(data, 'utf8');
    }
    throw (0, errors_1.errorWithCode)(new Error(buildFileSizeErrorMsg()), errors_1.ErrorCode.FileUploadReadFileDataError);
}
exports.getFileDataLength = getFileDataLength;
function getFileDataAsStream(readable) {
    return __awaiter(this, void 0, void 0, function* () {
        const chunks = [];
        return new Promise((resolve, reject) => {
            readable.on('readable', () => {
                let chunk;
                // biome-ignore lint/suspicious/noAssignInExpressions: being terse, this is OK
                while ((chunk = readable.read()) !== null) {
                    chunks.push(chunk);
                }
            });
            readable.on('end', () => {
                if (chunks.length > 0) {
                    const content = Buffer.concat(chunks);
                    resolve(content);
                }
                else {
                    reject(Error('No data in supplied file'));
                }
            });
        });
    });
}
exports.getFileDataAsStream = getFileDataAsStream;
/**
 * Filters through all fileUploads and groups them into jobs for completion
 * based on combination of channel_id, thread_ts, initial_comment.
 * {@link https://api.slack.com/methods/files.completeUploadExternal files.completeUploadExternal} allows for multiple
 * files to be uploaded with a message (`initial_comment`), and as a threaded message (`thread_ts`)
 * In order to be grouped together, file uploads must have like properties.
 * @param fileUploads
 * @returns
 */
function getAllFileUploadsToComplete(fileUploads) {
    const toComplete = {};
    for (const upload of fileUploads) {
        const { channel_id, thread_ts, initial_comment, file_id, title } = upload;
        if (file_id) {
            const compareString = `:::${channel_id}:::${thread_ts}:::${initial_comment}`;
            if (!Object.prototype.hasOwnProperty.call(toComplete, compareString)) {
                toComplete[compareString] = {
                    files: [{ id: file_id, title }],
                    channel_id,
                    initial_comment,
                };
                if (thread_ts) {
                    toComplete[compareString].thread_ts = upload.thread_ts;
                }
                if ('token' in upload) {
                    toComplete[compareString].token = upload.token;
                }
            }
            else {
                toComplete[compareString].files.push({
                    id: file_id,
                    title,
                });
            }
        }
        else {
            throw new Error(buildMissingFileIdError());
        }
    }
    return toComplete;
}
exports.getAllFileUploadsToComplete = getAllFileUploadsToComplete;
// Validation
/**
 * Advise to use the files.uploadV2 method over legacy files.upload method and over
 * lower-level utilities.
 * @param method
 * @param logger
 */
function warnIfNotUsingFilesUploadV2(method, logger) {
    const targetMethods = ['files.upload'];
    const isTargetMethod = targetMethods.includes(method);
    if (method === 'files.upload')
        logger.warn(buildLegacyMethodWarning(method));
    if (isTargetMethod)
        logger.info(buildGeneralFilesUploadWarning());
}
exports.warnIfNotUsingFilesUploadV2 = warnIfNotUsingFilesUploadV2;
/**
 * `channels` param is supported but only when a single channel is specified.
 * @param options
 * @param logger
 */
function warnIfChannels(options, logger) {
    if (options.channels)
        logger.warn(buildChannelsWarning());
}
exports.warnIfChannels = warnIfChannels;
/**
 * v1 files.upload supported `channels` parameter provided as a comma-separated
 * string of values, e.g. 'C1234,C5678'. V2 no longer supports this csv value.
 * You may still supply `channels` with a single channel string value e.g. 'C1234'
 * but it is highly encouraged to supply `channel_id` instead.
 * @param options
 */
function errorIfChannelsCsv(options) {
    const channels = options.channels ? options.channels.split(',') : [];
    if (channels.length > 1) {
        throw (0, errors_1.errorWithCode)(new Error(buildMultipleChannelsErrorMsg()), errors_1.ErrorCode.FileUploadInvalidArgumentsError);
    }
}
exports.errorIfChannelsCsv = errorIfChannelsCsv;
/**
 * Checks for either a file or content property and errors if missing
 * @param options
 */
function errorIfInvalidOrMissingFileData(options) {
    const hasFile = 'file' in options;
    const hasContent = 'content' in options;
    if (!(hasFile || hasContent) || (hasFile && hasContent)) {
        throw (0, errors_1.errorWithCode)(new Error('Either a file or content field is required for valid file upload. You cannot supply both'), errors_1.ErrorCode.FileUploadInvalidArgumentsError);
    }
    if ('file' in options) {
        const { file } = options;
        if (file && !(typeof file === 'string' || Buffer.isBuffer(file) || file instanceof node_stream_1.Readable)) {
            throw (0, errors_1.errorWithCode)(new Error('file must be a valid string path, buffer or Readable'), errors_1.ErrorCode.FileUploadInvalidArgumentsError);
        }
    }
    if ('content' in options && options.content && typeof options.content !== 'string') {
        throw (0, errors_1.errorWithCode)(new Error('content must be a string'), errors_1.ErrorCode.FileUploadInvalidArgumentsError);
    }
}
exports.errorIfInvalidOrMissingFileData = errorIfInvalidOrMissingFileData;
/**
 * @param options
 * @param logger
 * @returns filename if it exists
 */
function warnIfMissingOrInvalidFileNameAndDefault(options, logger) {
    var _a;
    const DEFAULT_FILETYPE = 'txt';
    const DEFAULT_FILENAME = `file.${(_a = options.filetype) !== null && _a !== void 0 ? _a : DEFAULT_FILETYPE}`;
    const { filename } = options;
    if (!filename) {
        // Filename was an optional property in legacy method
        logger.warn(buildMissingFileNameWarning());
        return DEFAULT_FILENAME;
    }
    if (filename.split('.').length < 2) {
        // likely filename is missing extension
        logger.warn(buildMissingExtensionWarning(filename));
    }
    return filename;
}
exports.warnIfMissingOrInvalidFileNameAndDefault = warnIfMissingOrInvalidFileNameAndDefault;
/**
 * `filetype` param is no longer supported and will be ignored
 * @param options
 * @param logger
 */
function warnIfLegacyFileType(options, logger) {
    if (options.filetype) {
        logger.warn(buildLegacyFileTypeWarning());
    }
}
exports.warnIfLegacyFileType = warnIfLegacyFileType;
// Validation message utilities
function buildMissingFileIdError() {
    return 'Missing required file id for file upload completion';
}
exports.buildMissingFileIdError = buildMissingFileIdError;
function buildFileSizeErrorMsg() {
    return 'There was an issue calculating the size of your file';
}
exports.buildFileSizeErrorMsg = buildFileSizeErrorMsg;
function buildLegacyFileTypeWarning() {
    return ('filetype is no longer a supported field in files.uploadV2.' +
        ' \nPlease remove this field. To indicate file type, please do so via the required filename property' +
        ' using the appropriate file extension, e.g. image.png, text.txt');
}
exports.buildLegacyFileTypeWarning = buildLegacyFileTypeWarning;
function buildMissingFileNameWarning() {
    return ('filename is a required field for files.uploadV2. \n For backwards compatibility and ease of migration, ' +
        'defaulting the filename. For best experience and consistent unfurl behavior, you' +
        ' should set the filename property with correct file extension, e.g. image.png, text.txt');
}
exports.buildMissingFileNameWarning = buildMissingFileNameWarning;
function buildMissingExtensionWarning(filename) {
    return `filename supplied '${filename}' may be missing a proper extension. Missing extenions may result in unexpected unfurl behavior when shared`;
}
exports.buildMissingExtensionWarning = buildMissingExtensionWarning;
function buildLegacyMethodWarning(method) {
    return `${method} may cause some issues like timeouts for relatively large files.`;
}
exports.buildLegacyMethodWarning = buildLegacyMethodWarning;
function buildGeneralFilesUploadWarning() {
    return ('Our latest recommendation is to use client.files.uploadV2() method, ' +
        'which is mostly compatible and much stabler, instead.');
}
exports.buildGeneralFilesUploadWarning = buildGeneralFilesUploadWarning;
function buildFilesUploadMissingMessage() {
    return 'Something went wrong with processing file_uploads';
}
exports.buildFilesUploadMissingMessage = buildFilesUploadMissingMessage;
function buildChannelsWarning() {
    return ("Although the 'channels' parameter is still supported for smoother migration from legacy files.upload, " +
        "we recommend using the new channel_id parameter with a single str value instead (e.g. 'C12345').");
}
exports.buildChannelsWarning = buildChannelsWarning;
function buildMultipleChannelsErrorMsg() {
    return 'Sharing files with multiple channels is no longer supported in v2. Share files in each channel separately instead.';
}
exports.buildMultipleChannelsErrorMsg = buildMultipleChannelsErrorMsg;
function buildInvalidFilesUploadParamError() {
    return ('You may supply file_uploads only for a single channel, comment, thread respectively. ' +
        'Therefore, please supply any channel_id, initial_comment, thread_ts in the top-layer.');
}
exports.buildInvalidFilesUploadParamError = buildInvalidFilesUploadParamError;
//# sourceMappingURL=file-upload.js.map

/***/ }),

/***/ "../node_modules/@slack/web-api/dist/helpers.js":
/*!******************************************************!*\
  !*** ../node_modules/@slack/web-api/dist/helpers.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
/**
 * Build a Promise that will resolve after the specified number of milliseconds.
 * @param ms milliseconds to wait
 * @param value value for eventual resolution
 */
function delay(ms) {
    return new Promise((resolve) => {
        setTimeout(resolve, ms);
    });
}
exports["default"] = delay;
//# sourceMappingURL=helpers.js.map

/***/ }),

/***/ "../node_modules/@slack/web-api/dist/index.js":
/*!****************************************************!*\
  !*** ../node_modules/@slack/web-api/dist/index.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

/// <reference lib="es2017" />
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.addAppMetadata = exports.retryPolicies = exports.ErrorCode = exports.LogLevel = exports.WebClientEvent = exports.WebClient = void 0;
var WebClient_1 = __webpack_require__(/*! ./WebClient */ "../node_modules/@slack/web-api/dist/WebClient.js");
Object.defineProperty(exports, "WebClient", ({ enumerable: true, get: function () { return WebClient_1.WebClient; } }));
Object.defineProperty(exports, "WebClientEvent", ({ enumerable: true, get: function () { return WebClient_1.WebClientEvent; } }));
var logger_1 = __webpack_require__(/*! ./logger */ "../node_modules/@slack/web-api/dist/logger.js");
Object.defineProperty(exports, "LogLevel", ({ enumerable: true, get: function () { return logger_1.LogLevel; } }));
var errors_1 = __webpack_require__(/*! ./errors */ "../node_modules/@slack/web-api/dist/errors.js");
Object.defineProperty(exports, "ErrorCode", ({ enumerable: true, get: function () { return errors_1.ErrorCode; } }));
var retry_policies_1 = __webpack_require__(/*! ./retry-policies */ "../node_modules/@slack/web-api/dist/retry-policies.js");
Object.defineProperty(exports, "retryPolicies", ({ enumerable: true, get: function () { return __importDefault(retry_policies_1).default; } }));
var instrument_1 = __webpack_require__(/*! ./instrument */ "../node_modules/@slack/web-api/dist/instrument.js");
Object.defineProperty(exports, "addAppMetadata", ({ enumerable: true, get: function () { return instrument_1.addAppMetadata; } }));
__exportStar(__webpack_require__(/*! ./methods */ "../node_modules/@slack/web-api/dist/methods.js"), exports);
__exportStar(__webpack_require__(/*! ./types/request/index */ "../node_modules/@slack/web-api/dist/types/request/index.js"), exports);
__exportStar(__webpack_require__(/*! ./types/response/index */ "../node_modules/@slack/web-api/dist/types/response/index.js"), exports);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../node_modules/@slack/web-api/dist/instrument.js":
/*!*********************************************************!*\
  !*** ../node_modules/@slack/web-api/dist/instrument.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.getUserAgent = exports.addAppMetadata = void 0;
const os = __importStar(__webpack_require__(/*! node:os */ "node:os"));
const node_path_1 = __webpack_require__(/*! node:path */ "node:path");
const packageJson = __webpack_require__(/*! ../package.json */ "../node_modules/@slack/web-api/package.json");
/**
 * Replaces occurrences of '/' with ':' in a string, since '/' is meaningful inside User-Agent strings as a separator.
 */
function replaceSlashes(s) {
    return s.replace('/', ':');
}
// TODO: for the deno build (see the `npm run build:deno` npm run script), we could replace the `os-browserify` npm
// module shim with our own shim leveraging the deno beta compatibility layer for node's `os` module (for more info
// see https://deno.land/std@0.116.0/node/os.ts). At the time of writing this TODO (2021/11/25), this required deno
// v1.16.2 and use of the --unstable flag. Once support for this exists without the --unstable flag, we can improve
// the `os` module deno shim to correctly report operating system from a deno runtime. Until then, the below `os`-
// based code will report "browser/undefined" from a deno runtime.
const baseUserAgent = `${replaceSlashes(packageJson.name)}/${packageJson.version} ` +
    `${(0, node_path_1.basename)(process.title)}/${process.version.replace('v', '')} ` +
    `${os.platform()}/${os.release()}`;
const appMetadata = {};
/**
 * Appends the app metadata into the User-Agent value
 * @param appMetadata.name - name of tool to be counted in instrumentation
 * @param appMetadata.version - version of tool to be counted in instrumentation
 */
function addAppMetadata({ name, version }) {
    appMetadata[replaceSlashes(name)] = version;
}
exports.addAppMetadata = addAppMetadata;
/**
 * Returns the current User-Agent value for instrumentation
 */
function getUserAgent() {
    const appIdentifier = Object.entries(appMetadata)
        .map(([name, version]) => `${name}/${version}`)
        .join(' ');
    // only prepend the appIdentifier when its not empty
    return (appIdentifier.length > 0 ? `${appIdentifier} ` : '') + baseUserAgent;
}
exports.getUserAgent = getUserAgent;
//# sourceMappingURL=instrument.js.map

/***/ }),

/***/ "../node_modules/@slack/web-api/dist/logger.js":
/*!*****************************************************!*\
  !*** ../node_modules/@slack/web-api/dist/logger.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.getLogger = exports.LogLevel = void 0;
const logger_1 = __webpack_require__(/*! @slack/logger */ "../node_modules/@slack/logger/dist/index.js");
var logger_2 = __webpack_require__(/*! @slack/logger */ "../node_modules/@slack/logger/dist/index.js");
Object.defineProperty(exports, "LogLevel", ({ enumerable: true, get: function () { return logger_2.LogLevel; } }));
let instanceCount = 0;
/**
 * INTERNAL interface for getting or creating a named Logger.
 */
function getLogger(name, level, existingLogger) {
    // Get a unique ID for the logger.
    const instanceId = instanceCount;
    instanceCount += 1;
    // Set up the logger.
    const logger = (() => {
        if (existingLogger !== undefined) {
            return existingLogger;
        }
        return new logger_1.ConsoleLogger();
    })();
    logger.setName(`web-api:${name}:${instanceId}`);
    if (level !== undefined) {
        logger.setLevel(level);
    }
    return logger;
}
exports.getLogger = getLogger;
//# sourceMappingURL=logger.js.map

/***/ }),

/***/ "../node_modules/@slack/web-api/dist/methods.js":
/*!******************************************************!*\
  !*** ../node_modules/@slack/web-api/dist/methods.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Methods = void 0;
const eventemitter3_1 = __webpack_require__(/*! eventemitter3 */ "eventemitter3");
const WebClient_1 = __webpack_require__(/*! ./WebClient */ "../node_modules/@slack/web-api/dist/WebClient.js");
/**
 * Binds a certain `method` and its (required) arguments and result types to the `apiCall` method in `WebClient`.
 */
function bindApiCall(self, method) {
    const apiMethod = self.apiCall.bind(self, method);
    return apiMethod;
}
/**
 * Binds a certain `method` and its (required) arguments and result types to the `apiCall` method in `WebClient`.
 */
function bindApiCallWithOptionalArgument(self, method) {
    const apiMethod = self.apiCall.bind(self, method);
    return apiMethod;
}
function bindFilesUploadV2(self) {
    return self.filesUploadV2.bind(self);
}
/**
 * A class that defines all Web API methods, their arguments type, their response type, and binds those methods to the
 * `apiCall` class method.
 */
class Methods extends eventemitter3_1.EventEmitter {
    constructor() {
        super();
        this.admin = {
            analytics: {
                /**
                 * @description Retrieve analytics data for a given date, presented as a compressed JSON file.
                 * @see {@link https://api.slack.com/methods/api.test `api.test` API reference}.
                 */
                getFile: bindApiCall(this, 'admin.analytics.getFile'),
            },
            apps: {
                activities: {
                    /**
                     * @description Get logs for a specified team/org.
                     * @see {@link https://api.slack.com/methods/admin.apps.activities.list `admin.apps.activities.list` API reference}.
                     */
                    list: bindApiCallWithOptionalArgument(this, 'admin.apps.activities.list'),
                },
                /**
                 * @description Approve an app for installation on a workspace.
                 * @see {@link https://api.slack.com/methods/admin.apps.approve `admin.apps.approve` API reference}.
                 */
                approve: bindApiCall(this, 'admin.apps.approve'),
                approved: {
                    /**
                     * @description List approved apps for an org or workspace.
                     * @see {@link https://api.slack.com/methods/admin.apps.approved.list `admin.apps.approved.list` API reference}.
                     */
                    list: bindApiCall(this, 'admin.apps.approved.list'),
                },
                /**
                 * @description Clear an app resolution.
                 * @see {@link https://api.slack.com/methods/admin.apps.clearResolution `admin.apps.clearResolution` API reference}.
                 */
                clearResolution: bindApiCall(this, 'admin.apps.clearResolution'),
                config: {
                    /**
                     * @description Look up the app config for connectors by their IDs.
                     * @see {@link https://api.slack.com/methods/admin.apps.config.lookup `admin.apps.config.lookup` API reference}.
                     */
                    lookup: bindApiCall(this, 'admin.apps.config.lookup'),
                    /**
                     * @description Set the app config for a connector.
                     * @see {@link https://api.slack.com/methods/admin.apps.config.set `admin.apps.config.set` API reference}.
                     */
                    set: bindApiCall(this, 'admin.apps.config.set'),
                },
                requests: {
                    /**
                     * @description Cancel app request for team.
                     * @see {@link https://api.slack.com/methods/admin.apps.requests.cancel `admin.apps.requests.cancel` API reference}.
                     */
                    cancel: bindApiCall(this, 'admin.apps.requests.cancel'),
                    /**
                     * @description List app requests for a team/workspace.
                     * @see {@link https://api.slack.com/methods/admin.apps.requests.list `admin.apps.requests.list` API reference}.
                     */
                    list: bindApiCall(this, 'admin.apps.requests.list'),
                },
                /**
                 * @description Restrict an app for installation on a workspace.
                 * @see {@link https://api.slack.com/methods/admin.apps.restrict `admin.apps.restrict` API reference}.
                 */
                restrict: bindApiCall(this, 'admin.apps.restrict'),
                restricted: {
                    /**
                     * @description List restricted apps for an org or workspace.
                     * @see {@link https://api.slack.com/methods/admin.apps.restricted.list `admin.apps.restricted.list` API reference}.
                     */
                    list: bindApiCall(this, 'admin.apps.restricted.list'),
                },
                /**
                 * @description Uninstall an app from one or many workspaces, or an entire enterprise organization.
                 * @see {@link https://api.slack.com/methods/admin.apps.uninstall `admin.apps.uninstall` API reference}.
                 */
                uninstall: bindApiCall(this, 'admin.apps.uninstall'),
            },
            auth: {
                policy: {
                    /**
                     * @description Assign entities to a particular authentication policy.
                     * @see {@link https://api.slack.com/methods/admin.auth.policy.assignEntities `admin.auth.policy.assignEntities` API reference}.
                     */
                    assignEntities: bindApiCall(this, 'admin.auth.policy.assignEntities'),
                    /**
                     * @description Fetch all the entities assigned to a particular authentication policy by name.
                     * @see {@link https://api.slack.com/methods/admin.auth.policy.getEntities `admin.auth.policy.getEntities` API reference}.
                     */
                    getEntities: bindApiCall(this, 'admin.auth.policy.getEntities'),
                    /**
                     * @description Remove specified entities from a specified authentication policy.
                     * @see {@link https://api.slack.com/methods/admin.auth.policy.removeEntities `admin.auth.policy.removeEntities` API reference}.
                     */
                    removeEntities: bindApiCall(this, 'admin.auth.policy.removeEntities'),
                },
            },
            barriers: {
                /**
                 * @description Create an Information Barrier.
                 * @see {@link https://api.slack.com/methods/admin.barriers.create `admin.barriers.create` API reference}.
                 */
                create: bindApiCall(this, 'admin.barriers.create'),
                /**
                 * @description Delete an existing Information Barrier.
                 * @see {@link https://api.slack.com/methods/admin.barriers.delete `admin.barriers.delete` API reference}.
                 */
                delete: bindApiCall(this, 'admin.barriers.delete'),
                /**
                 * @description Get all Information Barriers for your organization.
                 * @see {@link https://api.slack.com/methods/admin.barriers.list `admin.barriers.list` API reference}.
                 */
                list: bindApiCallWithOptionalArgument(this, 'admin.barriers.list'),
                /**
                 * @description Update an existing Information Barrier.
                 * @see {@link https://api.slack.com/methods/admin.barriers.update `admin.barriers.update` API reference}.
                 */
                update: bindApiCall(this, 'admin.barriers.update'),
            },
            conversations: {
                /**
                 * @description Archive a public or private channel.
                 * @see {@link https://api.slack.com/methods/admin.conversations.archive `admin.conversations.archive` API reference}.
                 */
                archive: bindApiCall(this, 'admin.conversations.archive'),
                /**
                 * @description Archive public or private channels in bulk.
                 * @see {@link https://api.slack.com/methods/admin.conversations.bulkArchive `admin.conversations.bulkArchive` API reference}.
                 */
                bulkArchive: bindApiCall(this, 'admin.conversations.bulkArchive'),
                /**
                 * @description Delete public or private channels in bulk.
                 * @see {@link https://api.slack.com/methods/admin.conversations.bulkDelet `admin.conversations.bulkDelete` API reference}.
                 */
                bulkDelete: bindApiCall(this, 'admin.conversations.bulkDelete'),
                /**
                 * @description Move public or private channels in bulk.
                 * @see {@link https://api.slack.com/methods/admin.conversations.bulkMove `admin.conversations.bulkMove` API reference}.
                 */
                bulkMove: bindApiCall(this, 'admin.conversations.bulkMove'),
                /**
                 * @description Convert a public channel to a private channel.
                 * @see {@link https://api.slack.com/methods/admin.conversations.convertToPrivate `admin.conversations.convertToPrivate` API reference}.
                 */
                convertToPrivate: bindApiCall(this, 'admin.conversations.convertToPrivate'),
                /**
                 * @description Convert a private channel to a public channel.
                 * @see {@link https://api.slack.com/methods/admin.conversations.convertToPublic `admin.conversations.convertToPublic` API reference}.
                 */
                convertToPublic: bindApiCall(this, 'admin.conversations.convertToPublic'),
                /**
                 * @description Create a public or private channel-based conversation.
                 * @see {@link https://api.slack.com/methods/admin.conversations.create `admin.conversations.create` API reference}.
                 */
                create: bindApiCall(this, 'admin.conversations.create'),
                /**
                 * @description Delete a public or private channel.
                 * @see {@link https://api.slack.com/methods/admin.conversations.delete `admin.conversations.delete` API reference}.
                 */
                delete: bindApiCall(this, 'admin.conversations.delete'),
                /**
                 * @description Disconnect a connected channel from one or more workspaces.
                 * @see {@link https://api.slack.com/methods/admin.conversations.disconnectShared `admin.conversations.disconnectShared` API reference}.
                 */
                disconnectShared: bindApiCall(this, 'admin.conversations.disconnectShared'),
                ekm: {
                    /**
                     * @description List all disconnected channels  i.e., channels that were once connected to other workspaces
                     * and then disconnected  and the corresponding original channel IDs for key revocation with EKM.
                     * @see {@link https://api.slack.com/methods/admin.conversations.ekm.listOriginalConnectedChannelInfo `admin.conversations.ekm.listOriginalConnectedChannelInfo` API reference}.
                     */
                    listOriginalConnectedChannelInfo: bindApiCallWithOptionalArgument(this, 'admin.conversations.ekm.listOriginalConnectedChannelInfo'),
                },
                /**
                 * @description Get conversation preferences for a public or private channel.
                 * @see {@link https://api.slack.com/methods/admin.conversations.getConversationPrefs `admin.conversations.getConversationPrefs` API reference}.
                 */
                getConversationPrefs: bindApiCall(this, 'admin.conversations.getConversationPrefs'),
                /**
                 * @description Get a conversation's retention policy.
                 * @see {@link https://api.slack.com/methods/admin.conversations.getCustomRetention `admin.conversations.getCustomRetention` API reference}.
                 */
                getCustomRetention: bindApiCall(this, 'admin.conversations.getCustomRetention'),
                /**
                 * @description Get all the workspaces a given public or private channel is connected to within
                 * this Enterprise org.
                 * @see {@link https://api.slack.com/methods/admin.conversations.getTeams `admin.conversations.getTeams` API reference}.
                 */
                getTeams: bindApiCall(this, 'admin.conversations.getTeams'),
                /**
                 * @description Invite a user to a public or private channel.
                 * @see {@link https://api.slack.com/methods/admin.conversations.invite `admin.conversations.invite` API reference}.
                 */
                invite: bindApiCall(this, 'admin.conversations.invite'),
                /**
                 * @description Returns channels on the given team using the filters.
                 * @see {@link https://api.slack.com/methods/admin.conversations.lookup `admin.conversations.lookup` API reference}.
                 */
                lookup: bindApiCall(this, 'admin.conversations.lookup'),
                /**
                 * @description Remove a conversation's retention policy.
                 * @see {@link https://api.slack.com/methods/admin.conversations.removeCustomRetention `admin.conversations.removeCustomRetention` API reference}.
                 */
                removeCustomRetention: bindApiCall(this, 'admin.conversations.removeCustomRetention'),
                /**
                 * @description Rename a public or private channel.
                 * @see {@link https://api.slack.com/methods/admin.conversations.rename `admin.conversations.rename` API reference}.
                 */
                rename: bindApiCall(this, 'admin.conversations.rename'),
                restrictAccess: {
                    /**
                     * @description Add an allowlist of IDP groups for accessing a channel.
                     * @see {@link https://api.slack.com/methods/admin.conversations.restrictAccess.addGroup `admin.conversations.restrictAccess.addGroup` API reference}.
                     */
                    addGroup: bindApiCall(this, 'admin.conversations.restrictAccess.addGroup'),
                    /**
                     * @description List all IDP Groups linked to a channel.
                     * @see {@link https://api.slack.com/methods/admin.conversations.restrictAccess.listGroups `admin.conversations.restrictAccess.listGroups` API reference}.
                     */
                    listGroups: bindApiCall(this, 'admin.conversations.restrictAccess.listGroups'),
                    /**
                     * @description Remove a linked IDP group linked from a private channel.
                     * @see {@link https://api.slack.com/methods/admin.conversations.restrictAccess.removeGroup `admin.conversations.restrictAccess.removeGroup` API reference}.
                     */
                    removeGroup: bindApiCall(this, 'admin.conversations.restrictAccess.removeGroup'),
                },
                /**
                 * @description Search for public or private channels in an Enterprise organization.
                 * @see {@link https://api.slack.com/methods/admin.conversations.search `admin.conversations.search` API reference}.
                 */
                search: bindApiCallWithOptionalArgument(this, 'admin.conversations.search'),
                /**
                 * @description Set the posting permissions for a public or private channel.
                 * @see {@link https://api.slack.com/methods/admin.conversations.setConversationPrefs `admin.conversations.setConversationPrefs` API reference}.
                 */
                setConversationPrefs: bindApiCall(this, 'admin.conversations.setConversationPrefs'),
                /**
                 * @description Set a conversation's retention policy.
                 * @see {@link https://api.slack.com/methods/admin.conversations.setCustomRetention `admin.conversations.setCustomRetention` API reference}.
                 */
                setCustomRetention: bindApiCall(this, 'admin.conversations.setCustomRetention'),
                /**
                 * @description Set the workspaces in an Enterprise grid org that connect to a public or private channel.
                 * @see {@link https://api.slack.com/methods/admin.conversations.setTeams `admin.conversations.setTeams` API reference}.
                 */
                setTeams: bindApiCall(this, 'admin.conversations.setTeams'),
                /**
                 * @description Unarchive a public or private channel.
                 * @see {@link https://api.slack.com/methods/admin.conversations.unarchive `admin.conversations.unarchive` API reference}.
                 */
                unarchive: bindApiCall(this, 'admin.conversations.unarchive'),
            },
            emoji: {
                /**
                 * @description Add an emoji.
                 * @see {@link https://api.slack.com/methods/admin.emoji.add `admin.emoji.add` API reference}.
                 */
                add: bindApiCall(this, 'admin.emoji.add'),
                /**
                 * @description Add an emoji alias.
                 * @see {@link https://api.slack.com/methods/admin.emoji.addAlias `admin.emoji.addAlias` API reference}.
                 */
                addAlias: bindApiCall(this, 'admin.emoji.addAlias'),
                /**
                 * @description List emoji for an Enterprise Grid organization.
                 * @see {@link https://api.slack.com/methods/admin.emoji.list `admin.emoji.list` API reference}.
                 */
                list: bindApiCallWithOptionalArgument(this, 'admin.emoji.list'),
                /**
                 * @description Remove an emoji across an Enterprise Grid organization.
                 * @see {@link https://api.slack.com/methods/admin.emoji.remove `admin.emoji.remove` API reference}.
                 */
                remove: bindApiCall(this, 'admin.emoji.remove'),
                /**
                 * @description Rename an emoji.
                 * @see {@link https://api.slack.com/methods/admin.emoji.rename `admin.emoji.rename` API reference}.
                 */
                rename: bindApiCall(this, 'admin.emoji.rename'),
            },
            functions: {
                /**
                 * @description Look up functions by a set of apps.
                 * @see {@link https://api.slack.com/methods/admin.functions.list `admin.functions.list` API reference}.
                 */
                list: bindApiCall(this, 'admin.functions.list'),
                permissions: {
                    /**
                     * @description Lookup the visibility of multiple Slack functions and include the users if
                     * it is limited to particular named entities.
                     * @see {@link https://api.slack.com/methods/admin.functions.permissions.lookup `admin.functions.permissions.lookup` API reference}.
                     */
                    lookup: bindApiCall(this, 'admin.functions.permissions.lookup'),
                    /**
                     * @description Set the visibility of a Slack function and define the users or workspaces if
                     * it is set to named_entities.
                     * @see {@link https://api.slack.com/methods/admin.functions.permissions.set `admin.functions.permissions.set` API reference}.
                     */
                    set: bindApiCall(this, 'admin.functions.permissions.set'),
                },
            },
            inviteRequests: {
                /**
                 * @description Approve a workspace invite request.
                 * @see {@link https://api.slack.com/methods/admin.inviteRequests.approve `admin.inviteRequests.approve` API reference}.
                 */
                approve: bindApiCall(this, 'admin.inviteRequests.approve'),
                approved: {
                    /**
                     * @description List all approved workspace invite requests.
                     * @see {@link https://api.slack.com/methods/admin.inviteRequests.approved.list `admin.inviteRequests.approved.list` API reference}.
                     */
                    list: bindApiCall(this, 'admin.inviteRequests.approved.list'),
                },
                denied: {
                    /**
                     * @description List all denied workspace invite requests.
                     * @see {@link https://api.slack.com/methods/admin.inviteRequests.denied.list `admin.inviteRequests.denied.list` API reference}.
                     */
                    list: bindApiCall(this, 'admin.inviteRequests.denied.list'),
                },
                /**
                 * @description Deny a workspace invite request.
                 * @see {@link https://api.slack.com/methods/admin.inviteRequests.deny `admin.inviteRequests.deny` API reference}.
                 */
                deny: bindApiCall(this, 'admin.inviteRequests.deny'),
                /**
                 * @description List all pending workspace invite requests.
                 * @see {@link https://api.slack.com/methods/admin.inviteRequests.list `admin.inviteRequests.list` API reference}.
                 */
                list: bindApiCall(this, 'admin.inviteRequests.list'),
            },
            roles: {
                /**
                 * @description Adds members to the specified role with the specified scopes.
                 * @see {@link https://api.slack.com/methods/admin.roles.addAssignments `admin.roles.addAssignments` API reference}.
                 */
                addAssignments: bindApiCall(this, 'admin.roles.addAssignments'),
                /**
                 * @description Lists assignments for all roles across entities.
                 * Options to scope results by any combination of roles or entities.
                 * @see {@link https://api.slack.com/methods/admin.roles.listAssignments `admin.roles.listAssignments` API reference}.
                 */
                listAssignments: bindApiCallWithOptionalArgument(this, 'admin.roles.listAssignments'),
                /**
                 * @description Removes a set of users from a role for the given scopes and entities.
                 * @see {@link https://api.slack.com/methods/admin.roles.removeAssignments `admin.roles.removeAssignments` API reference}.
                 */
                removeAssignments: bindApiCall(this, 'admin.roles.removeAssignments'),
            },
            teams: {
                admins: {
                    /**
                     * @description List all of the admins on a given workspace.
                     * @see {@link https://api.slack.com/methods/admin.teams.admins.list `admin.teams.admins.list` API reference}.
                     */
                    list: bindApiCall(this, 'admin.teams.admins.list'),
                },
                /**
                 * @description Create an Enterprise team.
                 * @see {@link https://api.slack.com/methods/admin.teams.create `admin.teams.create` API reference}.
                 */
                create: bindApiCall(this, 'admin.teams.create'),
                /**
                 * @description List all teams on an Enterprise organization.
                 * @see {@link https://api.slack.com/methods/admin.teams.list `admin.teams.list` API reference}.
                 */
                list: bindApiCallWithOptionalArgument(this, 'admin.teams.list'),
                owners: {
                    /**
                     * @description List all of the owners on a given workspace.
                     * @see {@link https://api.slack.com/methods/admin.teams.owners.list `admin.teams.owners.list` API reference}.
                     */
                    list: bindApiCall(this, 'admin.teams.owners.list'),
                },
                settings: {
                    /**
                     * @description Fetch information about settings in a workspace.
                     * @see {@link https://api.slack.com/methods/admin.teams.owners.list `admin.teams.owners.list` API reference}.
                     */
                    info: bindApiCall(this, 'admin.teams.settings.info'),
                    /**
                     * @description Set the default channels of a workspace.
                     * @see {@link https://api.slack.com/methods/admin.teams.settings.setDefaultChannels `admin.teams.settings.setDefaultChannels` API reference}.
                     */
                    setDefaultChannels: bindApiCall(this, 'admin.teams.settings.setDefaultChannels'),
                    /**
                     * @description Set the description of a given workspace.
                     * @see {@link https://api.slack.com/methods/admin.teams.settings.setDescription `admin.teams.settings.setDescription` API reference}.
                     */
                    setDescription: bindApiCall(this, 'admin.teams.settings.setDescription'),
                    /**
                     * @description Set the discoverability of a given workspace.
                     * @see {@link https://api.slack.com/methods/admin.teams.settings.setDiscoverability `admin.teams.settings.setDiscoverability` API reference}.
                     */
                    setDiscoverability: bindApiCall(this, 'admin.teams.settings.setDiscoverability'),
                    /**
                     * @description Sets the icon of a workspace.
                     * @see {@link https://api.slack.com/methods/admin.teams.settings.setIcon `admin.teams.settings.setIcon` API reference}.
                     */
                    setIcon: bindApiCall(this, 'admin.teams.settings.setIcon'),
                    /**
                     * @description Set the name of a given workspace.
                     * @see {@link https://api.slack.com/methods/admin.teams.settings.setName `admin.teams.settings.setName` API reference}.
                     */
                    setName: bindApiCall(this, 'admin.teams.settings.setName'),
                },
            },
            usergroups: {
                /**
                 * @description Add up to one hundred default channels to an IDP group.
                 * @see {@link https://api.slack.com/methods/admin.usergroups.addChannels `admin.teams.usergroups.addChannels` API reference}.
                 */
                addChannels: bindApiCall(this, 'admin.usergroups.addChannels'),
                /**
                 * @description Associate one or more default workspaces with an organization-wide IDP group.
                 * @see {@link https://api.slack.com/methods/admin.usergroups.addTeams `admin.teams.usergroups.addTeams` API reference}.
                 */
                addTeams: bindApiCall(this, 'admin.usergroups.addTeams'),
                /**
                 * @description List the channels linked to an org-level IDP group (user group).
                 * @see {@link https://api.slack.com/methods/admin.usergroups.listChannels `admin.teams.usergroups.listChannels` API reference}.
                 */
                listChannels: bindApiCall(this, 'admin.usergroups.listChannels'),
                /**
                 * @description Remove one or more default channels from an org-level IDP group (user group).
                 * @see {@link https://api.slack.com/methods/admin.usergroups.removeChannels `admin.teams.usergroups.removeChannels` API reference}.
                 */
                removeChannels: bindApiCall(this, 'admin.usergroups.removeChannels'),
            },
            users: {
                /**
                 * @description Add an Enterprise user to a workspace.
                 * @see {@link https://api.slack.com/methods/admin.users.assign `admin.users.assign` API reference}.
                 */
                assign: bindApiCall(this, 'admin.users.assign'),
                /**
                 * @description Invite a user to a workspace.
                 * @see {@link https://api.slack.com/methods/admin.users.invite `admin.users.invite` API reference}.
                 */
                invite: bindApiCall(this, 'admin.users.invite'),
                /**
                 * @description List users on a workspace.
                 * @see {@link https://api.slack.com/methods/admin.users.list `admin.users.list` API reference}.
                 */
                list: bindApiCallWithOptionalArgument(this, 'admin.users.list'),
                /**
                 * @description Remove a user from a workspace.
                 * @see {@link https://api.slack.com/methods/admin.users.remove `admin.users.remove` API reference}.
                 */
                remove: bindApiCall(this, 'admin.users.remove'),
                session: {
                    /**
                     * @description Clear user-specific session settingsthe session duration and what happens when the client
                     * closesfor a list of users.
                     * @see {@link https://api.slack.com/methods/admin.users.session.clearSettings `admin.users.session.clearSettings` API reference}.
                     */
                    clearSettings: bindApiCall(this, 'admin.users.session.clearSettings'),
                    /**
                     * @description Get user-specific session settingsthe session duration and what happens when the client
                     * closesgiven a list of users.
                     * @see {@link https://api.slack.com/methods/admin.users.session.getSettings `admin.users.session.getSettings` API reference}.
                     */
                    getSettings: bindApiCall(this, 'admin.users.session.getSettings'),
                    /**
                     * @description Revoke a single session for a user. The user will be forced to login to Slack.
                     * @see {@link https://api.slack.com/methods/admin.users.session.invalidate `admin.users.session.invalidate` API reference}.
                     */
                    invalidate: bindApiCall(this, 'admin.users.session.invalidate'),
                    /**
                     * @description List active user sessions for an organization.
                     * @see {@link https://api.slack.com/methods/admin.users.session.list `admin.users.session.list` API reference}.
                     */
                    list: bindApiCallWithOptionalArgument(this, 'admin.users.session.list'),
                    /**
                     * @description Wipes all valid sessions on all devices for a given user.
                     * @see {@link https://api.slack.com/methods/admin.users.session.reset `admin.users.session.reset` API reference}.
                     */
                    reset: bindApiCall(this, 'admin.users.session.reset'),
                    /**
                     * @description Enqueues an asynchronous job to wipe all valid sessions on all devices for a given user list.
                     * @see {@link https://api.slack.com/methods/admin.users.session.resetBulk `admin.users.session.resetBulk` API reference}.
                     */
                    resetBulk: bindApiCall(this, 'admin.users.session.resetBulk'),
                    /**
                     * @description Configure the user-level session settingsthe session duration and what happens when the client
                     * closesfor one or more users.
                     * @see {@link https://api.slack.com/methods/admin.users.session.setSettings `admin.users.session.setSettings` API reference}.
                     */
                    setSettings: bindApiCall(this, 'admin.users.session.setSettings'),
                },
                /**
                 * @description Set an existing guest, regular user, or owner to be an admin user.
                 * @see {@link https://api.slack.com/methods/admin.users.setAdmin `admin.users.setAdmin` API reference}.
                 */
                setAdmin: bindApiCall(this, 'admin.users.setAdmin'),
                /**
                 * @description Set an expiration for a guest user.
                 * @see {@link https://api.slack.com/methods/admin.users.setExpiration `admin.users.setExpiration` API reference}.
                 */
                setExpiration: bindApiCall(this, 'admin.users.setExpiration'),
                /**
                 * @description Set an existing guest, regular user, or admin user to be a workspace owner.
                 * @see {@link https://api.slack.com/methods/admin.users.setOwner `admin.users.setOwner` API reference}.
                 */
                setOwner: bindApiCall(this, 'admin.users.setOwner'),
                /**
                 * @description Set an existing guest user, admin user, or owner to be a regular user.
                 * @see {@link https://api.slack.com/methods/admin.users.setRegular `admin.users.setRegular` API reference}.
                 */
                setRegular: bindApiCall(this, 'admin.users.setRegular'),
                unsupportedVersions: {
                    /**
                     * @description Ask Slackbot to send you an export listing all workspace members using unsupported software,
                     * presented as a zipped CSV file.
                     * @see {@link https://api.slack.com/methods/admin.users.unsupportedVersions.export `admin.users.unsupportedVersions.export` API reference}.
                     */
                    export: bindApiCall(this, 'admin.users.unsupportedVersions.export'),
                },
            },
            workflows: {
                collaborators: {
                    /**
                     * @description Add collaborators to workflows within the team or enterprise.
                     * @see {@link https://api.slack.com/methods/admin.workflows.collaborators.add `admin.workflows.collaborators.add` API reference}.
                     */
                    add: bindApiCall(this, 'admin.workflows.collaborators.add'),
                    /**
                     * @description Remove collaborators from workflows within the team or enterprise.
                     * @see {@link https://api.slack.com/methods/admin.workflows.collaborators.remove `admin.workflows.collaborators.remove` API reference}.
                     */
                    remove: bindApiCall(this, 'admin.workflows.collaborators.remove'),
                },
                permissions: {
                    /**
                     * @description Look up the permissions for a set of workflows.
                     * @see {@link https://api.slack.com/methods/admin.workflows.permissions.lookup `admin.workflows.permissions.lookup` API reference}.
                     */
                    lookup: bindApiCall(this, 'admin.workflows.permissions.lookup'),
                },
                /**
                 * @description Search workflows within the team or enterprise.
                 * @see {@link https://api.slack.com/methods/admin.workflows.search `admin.workflows.search` API reference}.
                 */
                search: bindApiCallWithOptionalArgument(this, 'admin.workflows.search'),
                /**
                 * @description Unpublish workflows within the team or enterprise.
                 * @see {@link https://api.slack.com/methods/admin.workflows.unpublish `admin.workflows.unpublish` API reference}.
                 */
                unpublish: bindApiCall(this, 'admin.workflows.unpublish'),
            },
        };
        this.api = {
            /**
             * @description Checks API calling code.
             * @see {@link https://api.slack.com/methods/api.test `api.test` API reference}.
             */
            test: bindApiCallWithOptionalArgument(this, 'api.test'),
        };
        this.assistant = {
            threads: {
                /**
                 * @description Set loading status to indicate that the app is building a response.
                 * @see {@link https://api.slack.com/methods/assistant.threads.setStatus `assistant.threads.setStatus` API reference}.
                 */
                setStatus: bindApiCall(this, 'assistant.threads.setStatus'),
                /**
                 * @description Set suggested prompts for the user. Can suggest up to four prompts.
                 * @see {@link https://api.slack.com/methods/assistant.threads.setSuggestedPrompts `assistant.threads.setSuggestedPrompts` API reference}.
                 */
                setSuggestedPrompts: bindApiCall(this, 'assistant.threads.setSuggestedPrompts'),
                /**
                 * @description Set the title of the thread. This is shown when a user views the app's chat history.
                 * @see {@link https://api.slack.com/methods/assistant.threads.setTitle `assistant.threads.setTitle` API reference}.
                 */
                setTitle: bindApiCall(this, 'assistant.threads.setTitle'),
            },
        };
        this.apps = {
            connections: {
                /**
                 * @description Generate a temporary Socket Mode WebSocket URL that your app can connect to in order to receive
                 * events and interactive payloads over.
                 * @see {@link https://api.slack.com/methods/apps.connections.open `apps.connections.open` API reference}.
                 */
                open: bindApiCallWithOptionalArgument(this, 'apps.connections.open'),
            },
            event: {
                authorizations: {
                    /**
                     * @description Get a list of authorizations for the given event context.
                     * Each authorization represents an app installation that the event is visible to.
                     * @see {@link https://api.slack.com/methods/apps.event.authorizations.list `apps.event.authorizations.list` API reference}.
                     */
                    list: bindApiCall(this, 'apps.event.authorizations.list'),
                },
            },
            manifest: {
                /**
                 * @description Create an app from an app manifest.
                 * @see {@link https://api.slack.com/methods/apps.manifest.create `apps.manifest.create` API reference}.
                 */
                create: bindApiCall(this, 'apps.manifest.create'),
                /**
                 * @description Permanently deletes an app created through app manifests.
                 * @see {@link https://api.slack.com/methods/apps.manifest.delete `apps.manifest.delete` API reference}.
                 */
                delete: bindApiCall(this, 'apps.manifest.delete'),
                /**
                 * @description Export an app manifest from an existing app.
                 * @see {@link https://api.slack.com/methods/apps.manifest.export `apps.manifest.export` API reference}.
                 */
                export: bindApiCall(this, 'apps.manifest.export'),
                /**
                 * @description Update an app from an app manifest.
                 * @see {@link https://api.slack.com/methods/apps.manifest.update `apps.manifest.update` API reference}.
                 */
                update: bindApiCall(this, 'apps.manifest.update'),
                /**
                 * @description Validate an app manifest.
                 * @see {@link https://api.slack.com/methods/apps.manifest.validate `apps.manifest.validate` API reference}.
                 */
                validate: bindApiCall(this, 'apps.manifest.validate'),
            },
            /**
             * @description Uninstalls your app from a workspace.
             * @see {@link https://api.slack.com/methods/apps.uninstall `apps.uninstall` API reference}.
             */
            uninstall: bindApiCall(this, 'apps.uninstall'),
        };
        this.auth = {
            /**
             * @description Revokes a token.
             * @see {@link https://api.slack.com/methods/auth.revoke `auth.revoke` API reference}.
             */
            revoke: bindApiCallWithOptionalArgument(this, 'auth.revoke'),
            teams: {
                /**
                 * @description Obtain a full list of workspaces your org-wide app has been approved for.
                 * @see {@link https://api.slack.com/methods/auth.teams.list `auth.teams.list` API reference}.
                 */
                list: bindApiCallWithOptionalArgument(this, 'auth.teams.list'),
            },
            test: bindApiCallWithOptionalArgument(this, 'auth.test'),
        };
        this.bookmarks = {
            /**
             * @description Add bookmark to a channel.
             * @see {@link https://api.slack.com/methods/bookmarks.add `bookmarks.add` API reference}.
             */
            add: bindApiCall(this, 'bookmarks.add'),
            /**
             * @description Edit bookmark.
             * @see {@link https://api.slack.com/methods/bookmarks.edit `bookmarks.edit` API reference}.
             */
            edit: bindApiCall(this, 'bookmarks.edit'),
            /**
             * @description List bookmarks for a channel.
             * @see {@link https://api.slack.com/methods/bookmarks.list `bookmarks.list` API reference}.
             */
            list: bindApiCall(this, 'bookmarks.list'),
            /**
             * @description Remove bookmark from a channel.
             * @see {@link https://api.slack.com/methods/bookmarks.remove `bookmarks.remove` API reference}.
             */
            remove: bindApiCall(this, 'bookmarks.remove'),
        };
        this.bots = {
            /**
             * @description Gets information about a bot user.
             * @see {@link https://api.slack.com/methods/bots.info `bots.info` API reference}.
             */
            info: bindApiCallWithOptionalArgument(this, 'bots.info'),
        };
        this.calls = {
            /**
             * @description Registers a new Call.
             * @see {@link https://api.slack.com/methods/calls.add `calls.add` API reference}.
             */
            add: bindApiCall(this, 'calls.add'),
            /**
             * @description Ends a Call.
             * @see {@link https://api.slack.com/methods/calls.end `calls.end` API reference}.
             */
            end: bindApiCall(this, 'calls.end'),
            /**
             * @description Returns information about a Call.
             * @see {@link https://api.slack.com/methods/calls.info `calls.info` API reference}.
             */
            info: bindApiCall(this, 'calls.info'),
            /**
             * @description Updates information about a Call.
             * @see {@link https://api.slack.com/methods/calls.info `calls.info` API reference}.
             */
            update: bindApiCall(this, 'calls.update'),
            participants: {
                /**
                 * @description Registers new participants added to a Call.
                 * @see {@link https://api.slack.com/methods/calls.participants.add `calls.participants.add` API reference}.
                 */
                add: bindApiCall(this, 'calls.participants.add'),
                remove: bindApiCall(this, 'calls.participants.remove'),
            },
        };
        this.canvases = {
            access: {
                /**
                 * @description Remove access to a canvas for specified entities.
                 * @see {@link https://api.slack.com/methods/canvases.access.delete `canvases.access.delete` API reference}.
                 */
                delete: bindApiCall(this, 'canvases.access.delete'),
                /**
                 * @description Sets the access level to a canvas for specified entities.
                 * @see {@link https://api.slack.com/methods/canvases.access.set `canvases.access.set` API reference}.
                 */
                set: bindApiCall(this, 'canvases.access.set'),
            },
            /**
             * @description Create Canvas for a user.
             * @see {@link https://api.slack.com/methods/canvases.create `canvases.create` API reference}.
             */
            create: bindApiCallWithOptionalArgument(this, 'canvases.create'),
            /**
             * @description Deletes a canvas.
             * @see {@link https://api.slack.com/methods/canvases.delete `canvases.delete` API reference}.
             */
            delete: bindApiCall(this, 'canvases.delete'),
            /**
             * @description Update an existing canvas.
             * @see {@link https://api.slack.com/methods/canvases.edit `canvases.edit` API reference}.
             */
            edit: bindApiCall(this, 'canvases.edit'),
            sections: {
                /**
                 * @description Find sections matching the provided criteria.
                 * @see {@link https://api.slack.com/methods/canvases.sections.lookup `canvases.sections.lookup` API reference}.
                 */
                lookup: bindApiCall(this, 'canvases.sections.lookup'),
            },
        };
        this.chat = {
            /**
             * @description Deletes a message.
             * @see {@link https://api.slack.com/methods/chat.delete `chat.delete` API reference}.
             */
            delete: bindApiCall(this, 'chat.delete'),
            /**
             * @description Deletes a pending scheduled message from the queue.
             * @see {@link https://api.slack.com/methods/chat.deleteScheduledMessage `chat.deleteScheduledMessage` API reference}.
             */
            deleteScheduledMessage: bindApiCall(this, 'chat.deleteScheduledMessage'),
            /**
             * @description Retrieve a permalink URL for a specific extant message.
             * @see {@link https://api.slack.com/methods/chat.getPermalink `chat.getPermalink` API reference}.
             */
            getPermalink: bindApiCall(this, 'chat.getPermalink'),
            /**
             * @description Share a me message into a channel.
             * @see {@link https://api.slack.com/methods/chat.meMessage `chat.meMessage` API reference}.
             */
            meMessage: bindApiCall(this, 'chat.meMessage'),
            /**
             * @description Sends an ephemeral message to a user in a channel.
             * @see {@link https://api.slack.com/methods/chat.postEphemeral `chat.postEphemeral` API reference}.
             */
            postEphemeral: bindApiCall(this, 'chat.postEphemeral'),
            /**
             * @description Sends a message to a channel.
             * @see {@link https://api.slack.com/methods/chat.postMessage `chat.postMessage` API reference}.
             */
            postMessage: bindApiCall(this, 'chat.postMessage'),
            /**
             * @description Schedules a message to be sent to a channel.
             * @see {@link https://api.slack.com/methods/chat.scheduleMessage `chat.scheduleMessage` API reference}.
             */
            scheduleMessage: bindApiCall(this, 'chat.scheduleMessage'),
            scheduledMessages: {
                /**
                 * @description Returns a list of scheduled messages.
                 * @see {@link https://api.slack.com/methods/chat.scheduledMessages.list `chat.scheduledMessages.list` API reference}.
                 */
                list: bindApiCallWithOptionalArgument(this, 'chat.scheduledMessages.list'),
            },
            /**
             * @description Provide custom unfurl behavior for user-posted URLs.
             * @see {@link https://api.slack.com/methods/chat.unfurl `chat.unfurl` API reference}.
             */
            unfurl: bindApiCall(this, 'chat.unfurl'),
            /**
             * @description Updates a message.
             * @see {@link https://api.slack.com/methods/chat.update `chat.update` API reference}.
             */
            update: bindApiCall(this, 'chat.update'),
        };
        this.conversations = {
            /**
             * @description Accepts an invitation to a Slack Connect channel.
             * @see {@link https://api.slack.com/methods/conversations.acceptSharedInvite `conversations.acceptSharedInvite` API reference}.
             */
            acceptSharedInvite: bindApiCall(this, 'conversations.acceptSharedInvite'),
            /**
             * @description Approves an invitation to a Slack Connect channel.
             * @see {@link https://api.slack.com/methods/conversations.approveSharedInvite `conversations.approveSharedInvite` API reference}.
             */
            approveSharedInvite: bindApiCall(this, 'conversations.approveSharedInvite'),
            /**
             * @description Archives a conversation.
             * @see {@link https://api.slack.com/methods/conversations.archive `conversations.archive` API reference}.
             */
            archive: bindApiCall(this, 'conversations.archive'),
            canvases: {
                /**
                 * @description Create a Channel Canvas for a channel.
                 * @see {@link https://api.slack.com/methods/conversations.canvases.create `conversations.canvases.create` API reference}.
                 */
                create: bindApiCall(this, 'conversations.canvases.create'),
            },
            /**
             * @description Closes a direct message or multi-person direct message.
             * @see {@link https://api.slack.com/methods/conversations.close `conversations.close` API reference}.
             */
            close: bindApiCall(this, 'conversations.close'),
            /**
             * @description Initiates a public or private channel-based conversation.
             * @see {@link https://api.slack.com/methods/conversations.create `conversations.create` API reference}.
             */
            create: bindApiCall(this, 'conversations.create'),
            /**
             * @description Declines an invitation to a Slack Connect channel.
             * @see {@link https://api.slack.com/methods/conversations.declineSharedInvite `conversations.declineSharedInvite` API reference}.
             */
            declineSharedInvite: bindApiCall(this, 'conversations.declineSharedInvite'),
            externalInvitePermissions: {
                /**
                 * @description Convert a team in a shared channel from an External Limited channel to a fully shared Slack
                 * Connect channel or vice versa.
                 * @see {@link https://api.slack.com/methods/conversations.externalInvitePermissions.set `conversations.externalInvitePermissions.set` API reference}.
                 */
                set: bindApiCall(this, 'conversations.externalInvitePermissions.set'),
            },
            /**
             * @description Fetches a conversation's history of messages and events.
             * @see {@link https://api.slack.com/methods/conversations.history `conversations.history` API reference}.
             */
            history: bindApiCall(this, 'conversations.history'),
            /**
             * @description Retrieve information about a conversation.
             * @see {@link https://api.slack.com/methods/conversations.info `conversations.info` API reference}.
             */
            info: bindApiCall(this, 'conversations.info'),
            /**
             * @description Invites users to a channel.
             * @see {@link https://api.slack.com/methods/conversations.invite `conversations.invite` API reference}.
             */
            invite: bindApiCall(this, 'conversations.invite'),
            /**
             * @description Sends an invitation to a Slack Connect channel.
             * @see {@link https://api.slack.com/methods/conversations.inviteShared `conversations.inviteShared` API reference}.
             */
            inviteShared: bindApiCall(this, 'conversations.inviteShared'),
            /**
             * @description Joins an existing conversation.
             * @see {@link https://api.slack.com/methods/conversations.join `conversations.join` API reference}.
             */
            join: bindApiCall(this, 'conversations.join'),
            /**
             * @description Removes a user from a conversation.
             * @see {@link https://api.slack.com/methods/conversations.kick `conversations.kick` API reference}.
             */
            kick: bindApiCall(this, 'conversations.kick'),
            /**
             * @description Leaves a conversation.
             * @see {@link https://api.slack.com/methods/conversations.leave `conversations.leave` API reference}.
             */
            leave: bindApiCall(this, 'conversations.leave'),
            /**
             * @description List all channels in a Slack team.
             * @see {@link https://api.slack.com/methods/conversations.list `conversations.list` API reference}.
             */
            list: bindApiCallWithOptionalArgument(this, 'conversations.list'),
            /**
             * @description Lists shared channel invites that have been generated or received but have not been approved by
             * all parties.
             * @see {@link https://api.slack.com/methods/conversations.listConnectInvites `conversations.listConnectInvites` API reference}.
             */
            listConnectInvites: bindApiCallWithOptionalArgument(this, 'conversations.listConnectInvites'),
            /**
             * @description Sets the read cursor in a channel.
             * @see {@link https://api.slack.com/methods/conversations.mark `conversations.mark` API reference}.
             */
            mark: bindApiCall(this, 'conversations.mark'),
            /**
             * @description Retrieve members of a conversation.
             * @see {@link https://api.slack.com/methods/conversations.members `conversations.members` API reference}.
             */
            members: bindApiCall(this, 'conversations.members'),
            /**
             * @description Opens or resumes a direct message or multi-person direct message.
             * @see {@link https://api.slack.com/methods/conversations.open `conversations.open` API reference}.
             */
            open: bindApiCall(this, 'conversations.open'),
            /**
             * @description Renames a conversation.
             * @see {@link https://api.slack.com/methods/conversations.rename `conversations.rename` API reference}.
             */
            rename: bindApiCall(this, 'conversations.rename'),
            /**
             * @description Retrieve a thread of messages posted to a conversation.
             * @see {@link https://api.slack.com/methods/conversations.replies `conversations.replies` API reference}.
             */
            replies: bindApiCall(this, 'conversations.replies'),
            requestSharedInvite: {
                /**
                 * @description Approves a request to add an external user to a channel and sends them a Slack Connect invite.
                 * @see {@link https://api.slack.com/methods/conversations.requestSharedInvite.approve `conversations.requestSharedInvite.approve` API reference}.
                 */
                approve: bindApiCall(this, 'conversations.requestSharedInvite.approve'),
                /**
                 * @description Denies a request to invite an external user to a channel.
                 * @see {@link https://api.slack.com/methods/conversations.requestSharedInvite.deny `conversations.requestSharedInvite.deny` API reference}.
                 */
                deny: bindApiCall(this, 'conversations.requestSharedInvite.deny'),
                /**
                 * @description Lists requests to add external users to channels with ability to filter.
                 * @see {@link https://api.slack.com/methods/conversations.requestSharedInvite.list `conversations.requestSharedInvite.list` API reference}.
                 */
                list: bindApiCallWithOptionalArgument(this, 'conversations.requestSharedInvite.list'),
            },
            /**
             * @description Sets the purpose for a conversation.
             * @see {@link https://api.slack.com/methods/conversations.setPurpose `conversations.setPurpose` API reference}.
             */
            setPurpose: bindApiCall(this, 'conversations.setPurpose'),
            /**
             * @description Sets the topic for a conversation.
             * @see {@link https://api.slack.com/methods/conversations.setTopic `conversations.setTopic` API reference}.
             */
            setTopic: bindApiCall(this, 'conversations.setTopic'),
            /**
             * @description Reverses conversation archival.
             * @see {@link https://api.slack.com/methods/conversations.unarchive `conversations.unarchive` API reference}.
             */
            unarchive: bindApiCall(this, 'conversations.unarchive'),
        };
        this.dialog = {
            /**
             * @description Open a dialog with a user.
             * @see {@link https://api.slack.com/methods/dialog.open `dialog.open` API reference}.
             */
            open: bindApiCall(this, 'dialog.open'),
        };
        this.dnd = {
            /**
             * @description Ends the current user's Do Not Disturb session immediately.
             * @see {@link https://api.slack.com/methods/dnd.endDnd `dnd.endDnd` API reference}.
             */
            endDnd: bindApiCallWithOptionalArgument(this, 'dnd.endDnd'),
            /**
             * @description Ends the current user's snooze mode immediately.
             * @see {@link https://api.slack.com/methods/dnd.endSnooze `dnd.endSnooze` API reference}.
             */
            endSnooze: bindApiCallWithOptionalArgument(this, 'dnd.endSnooze'),
            /**
             * @description Retrieves a user's current Do Not Disturb status.
             * @see {@link https://api.slack.com/methods/dnd.info `dnd.info` API reference}.
             */
            info: bindApiCallWithOptionalArgument(this, 'dnd.info'),
            /**
             * @description Turns on Do Not Disturb mode for the current user, or changes its duration.
             * @see {@link https://api.slack.com/methods/dnd.setSnooze `dnd.setSnooze` API reference}.
             */
            setSnooze: bindApiCall(this, 'dnd.setSnooze'),
            /**
             * @description Retrieves the Do Not Disturb status for up to 50 users on a team.
             * @see {@link https://api.slack.com/methods/dnd.teamInfo `dnd.teamInfo` API reference}.
             */
            teamInfo: bindApiCall(this, 'dnd.teamInfo'),
        };
        this.emoji = {
            /**
             * @description Lists custom emoji for a team.
             * @see {@link https://api.slack.com/methods/emoji.list `emoji.list` API reference}.
             */
            list: bindApiCallWithOptionalArgument(this, 'emoji.list'),
        };
        this.files = {
            /**
             * @description Finishes an upload started with {@link https://api.slack.com/methods/files.getUploadURLExternal `files.getUploadURLExternal`}.
             * @see {@link https://api.slack.com/methods/files.completeUploadExternal `files.completeUploadExternal` API reference}.
             */
            completeUploadExternal: bindApiCall(this, 'files.completeUploadExternal'),
            /**
             * @description Deletes a file.
             * @see {@link https://api.slack.com/methods/files.delete `files.delete` API reference}.
             */
            delete: bindApiCall(this, 'files.delete'),
            /**
             * @description Gets a URL for an edge external file upload.
             * @see {@link https://api.slack.com/methods/files.getUploadURLExternal `files.getUploadURLExternal` API reference}.
             */
            getUploadURLExternal: bindApiCall(this, 'files.getUploadURLExternal'),
            /**
             * @description Gets information about a file.
             * @see {@link https://api.slack.com/methods/files.info `files.info` API reference}.
             */
            info: bindApiCall(this, 'files.info'),
            /**
             * @description List files for a team, in a channel, or from a user with applied filters.
             * @see {@link https://api.slack.com/methods/files.list `files.list` API reference}.
             */
            list: bindApiCall(this, 'files.list'),
            /**
             * @description Revokes public/external sharing access for a file.
             * @see {@link https://api.slack.com/methods/files.revokePublicURL `files.revokePublicURL` API reference}.
             */
            revokePublicURL: bindApiCall(this, 'files.revokePublicURL'),
            /**
             * @description Enables a file for public/external sharing.
             * @see {@link https://api.slack.com/methods/files.revokePublicURL `files.revokePublicURL` API reference}.
             */
            sharedPublicURL: bindApiCall(this, 'files.sharedPublicURL'),
            /**
             * @description Uploads or creates a file.
             * @deprecated Use `uploadV2` instead. See {@link https://api.slack.com/changelog/2024-04-a-better-way-to-upload-files-is-here-to-stay our post on retiring `files.upload`}.
             * @see {@link https://api.slack.com/methods/files.upload `files.upload` API reference}.
             */
            upload: bindApiCall(this, 'files.upload'),
            /**
             * @description Custom method to support a new way of uploading files to Slack.
             * Supports a single file upload
             * Supply:
             * - (required) single file or content
             * - (optional) channel, alt_text, snippet_type,
             * Supports multiple file uploads
             * Supply:
             * - multiple upload_files
             * Will try to honor both single file or content data supplied as well
             * as multiple file uploads property.
             * @see {@link https://slack.dev/node-slack-sdk/web-api#upload-a-file `@slack/web-api` Upload a file documentation}.
             */
            uploadV2: bindFilesUploadV2(this),
            comments: {
                /**
                 * @description Deletes an existing comment on a file.
                 * @see {@link https://api.slack.com/methods/files.comments.delete `files.comments.delete` API reference}.
                 */
                delete: bindApiCall(this, 'files.comments.delete'),
            },
            remote: {
                /**
                 * @description Adds a file from a remote service.
                 * @see {@link https://api.slack.com/methods/files.remote.add `files.remote.add` API reference}.
                 */
                add: bindApiCall(this, 'files.remote.add'),
                /**
                 * @description Retrieve information about a remote file added to Slack.
                 * @see {@link https://api.slack.com/methods/files.remote.info `files.remote.info` API reference}.
                 */
                info: bindApiCall(this, 'files.remote.info'),
                /**
                 * @description List remote files added to Slack.
                 * @see {@link https://api.slack.com/methods/files.remote.list `files.remote.list` API reference}.
                 */
                list: bindApiCall(this, 'files.remote.list'),
                /**
                 * @description Remove a remote file.
                 * @see {@link https://api.slack.com/methods/files.remote.remove `files.remote.remove` API reference}.
                 */
                remove: bindApiCall(this, 'files.remote.remove'),
                /**
                 * @description Share a remote file into a channel.
                 * @see {@link https://api.slack.com/methods/files.remote.share `files.remote.share` API reference}.
                 */
                share: bindApiCall(this, 'files.remote.share'),
                /**
                 * @description Updates an existing remote file.
                 * @see {@link https://api.slack.com/methods/files.remote.update `files.remote.update` API reference}.
                 */
                update: bindApiCall(this, 'files.remote.update'),
            },
        };
        this.functions = {
            /**
             * @description Signal the failure to execute a Custom Function.
             * @see {@link https://api.slack.com/methods/functions.completeError `functions.completeError` API reference}.
             */
            completeError: bindApiCall(this, 'functions.completeError'),
            /**
             * @description Signal the successful completion of a Custom Function.
             * @see {@link https://api.slack.com/methods/functions.completeSuccess `functions.completeSuccess` API reference}.
             */
            completeSuccess: bindApiCall(this, 'functions.completeSuccess'),
        };
        this.migration = {
            /**
             * @description For Enterprise Grid workspaces, map local user IDs to global user IDs.
             * @see {@link https://api.slack.com/methods/migration.exchange `migration.exchange` API reference}.
             */
            exchange: bindApiCall(this, 'migration.exchange'),
        };
        this.oauth = {
            /**
             * @description Exchanges a temporary OAuth verifier code for an access token.
             * @deprecated This is a legacy method only used by classic Slack apps. Use `oauth.v2.access` for new Slack apps.
             * @see {@link https://api.slack.com/methods/oauth.access `oauth.access` API reference}.
             */
            access: bindApiCall(this, 'oauth.access'),
            v2: {
                /**
                 * @description Exchanges a temporary OAuth verifier code for an access token.
                 * @see {@link https://api.slack.com/methods/oauth.v2.access `oauth.v2.access` API reference}.
                 */
                access: bindApiCall(this, 'oauth.v2.access'),
                /**
                 * @description Exchanges a legacy access token for a new expiring access token and refresh token.
                 * @see {@link https://api.slack.com/methods/oauth.v2.exchange `oauth.v2.exchange` API reference}.
                 */
                exchange: bindApiCall(this, 'oauth.v2.exchange'),
            },
        };
        this.openid = {
            connect: {
                /**
                 * @description Exchanges a temporary OAuth verifier code for an access token for {@link https://api.slack.com/authentication/sign-in-with-slack Sign in with Slack}.
                 * @see {@link https://api.slack.com/methods/openid.connect.token `openid.connect.token` API reference}.
                 */
                token: bindApiCall(this, 'openid.connect.token'),
                /**
                 * @description Get the identity of a user who has authorized {@link https://api.slack.com/authentication/sign-in-with-slack Sign in with Slack}.
                 * @see {@link https://api.slack.com/methods/openid.connect.userInfo `openid.connect.userInfo` API reference}.
                 */
                userInfo: bindApiCallWithOptionalArgument(this, 'openid.connect.userInfo'),
            },
        };
        this.pins = {
            /**
             * @description Pins an item to a channel.
             * @see {@link https://api.slack.com/methods/pins.add `pins.add` API reference}.
             */
            add: bindApiCall(this, 'pins.add'),
            /**
             * @description Lists items pinned to a channel.
             * @see {@link https://api.slack.com/methods/pins.list `pins.list` API reference}.
             */
            list: bindApiCall(this, 'pins.list'),
            /**
             * @description Un-pins an item from a channel.
             * @see {@link https://api.slack.com/methods/pins.remove `pins.remove` API reference}.
             */
            remove: bindApiCall(this, 'pins.remove'),
        };
        this.reactions = {
            /**
             * @description Adds a reaction to an item.
             * @see {@link https://api.slack.com/methods/reactions.add `reactions.add` API reference}.
             */
            add: bindApiCall(this, 'reactions.add'),
            /**
             * @description Gets reactions for an item.
             * @see {@link https://api.slack.com/methods/reactions.get `reactions.get` API reference}.
             */
            get: bindApiCall(this, 'reactions.get'),
            /**
             * @description List reactions made by a user.
             * @see {@link https://api.slack.com/methods/reactions.list `reactions.list` API reference}.
             */
            list: bindApiCallWithOptionalArgument(this, 'reactions.list'),
            /**
             * @description Removes a reaction from an item.
             * @see {@link https://api.slack.com/methods/reactions.remove `reactions.remove` API reference}.
             */
            remove: bindApiCall(this, 'reactions.remove'),
        };
        // TODO: keep tabs on reminders APIs, may be deprecated once Later list APIs land
        // See: https://api.slack.com/changelog/2023-07-its-later-already-for-stars-and-reminders
        this.reminders = {
            /**
             * @description Creates a reminder.
             * @see {@link https://api.slack.com/methods/reminders.add `reminders.add` API reference}.
             */
            add: bindApiCall(this, 'reminders.add'),
            /**
             * @description Marks a reminder as complete.
             * @see {@link https://api.slack.com/methods/reminders.complete `reminders.complete` API reference}.
             */
            complete: bindApiCall(this, 'reminders.complete'),
            /**
             * @description Deletes a reminder.
             * @see {@link https://api.slack.com/methods/reminders.delete `reminders.delete` API reference}.
             */
            delete: bindApiCall(this, 'reminders.delete'),
            /**
             * @description Gets information about a reminder.
             * @see {@link https://api.slack.com/methods/reminders.info `reminders.info` API reference}.
             */
            info: bindApiCall(this, 'reminders.info'),
            /**
             * @description Lists all reminders created by or for a given user.
             * @see {@link https://api.slack.com/methods/reminders.list `reminders.list` API reference}.
             */
            list: bindApiCallWithOptionalArgument(this, 'reminders.list'),
        };
        this.rtm = {
            /**
             * @description Starts a Real Time Messaging session.
             * @see {@link https://api.slack.com/methods/rtm.connect `rtm.connect` API reference}.
             */
            connect: bindApiCallWithOptionalArgument(this, 'rtm.connect'),
            /**
             * @description Starts a Real Time Messaging session.
             * @deprecated Use `rtm.connect` instead. See {@link https://api.slack.com/changelog/2021-10-rtm-start-to-stop our post on retiring `rtm.start`}.
             * @see {@link https://api.slack.com/methods/rtm.start `rtm.start` API reference}.
             */
            start: bindApiCallWithOptionalArgument(this, 'rtm.start'),
        };
        this.search = {
            /**
             * @description Searches for messages and files matching a query.
             * @see {@link https://api.slack.com/methods/search.all search.all` API reference}.
             */
            all: bindApiCall(this, 'search.all'),
            /**
             * @description Searches for files matching a query.
             * @see {@link https://api.slack.com/methods/search.files search.files` API reference}.
             */
            files: bindApiCall(this, 'search.files'),
            /**
             * @description Searches for messages matching a query.
             * @see {@link https://api.slack.com/methods/search.messages search.messages` API reference}.
             */
            messages: bindApiCall(this, 'search.messages'),
        };
        this.team = {
            /**
             * @description Gets the access logs for the current team.
             * @see {@link https://api.slack.com/methods/team.accessLogs `team.accessLogs` API reference}.
             */
            accessLogs: bindApiCallWithOptionalArgument(this, 'team.accessLogs'),
            /**
             * @description Gets billable users information for the current team.
             * @see {@link https://api.slack.com/methods/team.billableInfo `team.billableInfo` API reference}.
             */
            billableInfo: bindApiCallWithOptionalArgument(this, 'team.billableInfo'),
            billing: {
                /**
                 * @description Reads a workspace's billing plan information.
                 * @see {@link https://api.slack.com/methods/team.billing.info `team.billing.info` API reference}.
                 */
                info: bindApiCall(this, 'team.billing.info'),
            },
            externalTeams: {
                /**
                 * @description Disconnect an external organization.
                 * @see {@link https://api.slack.com/methods/team.externalTeams.disconnect `team.externalTeams.disconnect` API reference}.
                 */
                disconnect: bindApiCall(this, 'team.externalTeams.disconnect'),
                /**
                 * @description Returns a list of all the external teams connected and details about the connection.
                 * @see {@link https://api.slack.com/methods/team.externalTeams.list `team.externalTeams.list` API reference}.
                 */
                list: bindApiCall(this, 'team.externalTeams.list'),
            },
            /**
             * @description Gets information about the current team.
             * @see {@link https://api.slack.com/methods/team.info `team.info` API reference}.
             */
            info: bindApiCallWithOptionalArgument(this, 'team.info'),
            /**
             * @description Gets the integration logs for the current team.
             * @see {@link https://api.slack.com/methods/team.integrationLogs `team.integrationLogs` API reference}.
             */
            integrationLogs: bindApiCallWithOptionalArgument(this, 'team.integrationLogs'),
            preferences: {
                /**
                 * @description Retrieve a list of a workspace's team preferences.
                 * @see {@link https://api.slack.com/methods/team.preferences.list `team.preferences.list` API reference}.
                 */
                list: bindApiCallWithOptionalArgument(this, 'team.preferences.list'),
            },
            profile: {
                /**
                 * @description Retrieve a team's profile.
                 * @see {@link https://api.slack.com/methods/team.profile.get `team.profile.get` API reference}.
                 */
                get: bindApiCallWithOptionalArgument(this, 'team.profile.get'),
            },
        };
        this.tooling = {
            tokens: {
                /**
                 * @description Exchanges a refresh token for a new app configuration token.
                 * @see {@link https://api.slack.com/methods/tooling.tokens.rotate `tooling.tokens.rotate` API reference}.
                 */
                rotate: bindApiCall(this, 'tooling.tokens.rotate'),
            },
        };
        this.usergroups = {
            /**
             * @description Create a User Group.
             * @see {@link https://api.slack.com/methods/usergroups.create `usergroups.create` API reference}.
             */
            create: bindApiCall(this, 'usergroups.create'),
            /**
             * @description Disable an existing User Group.
             * @see {@link https://api.slack.com/methods/usergroups.disable `usergroups.disable` API reference}.
             */
            disable: bindApiCall(this, 'usergroups.disable'),
            /**
             * @description Enable an existing User Group.
             * @see {@link https://api.slack.com/methods/usergroups.enable `usergroups.enable` API reference}.
             */
            enable: bindApiCall(this, 'usergroups.enable'),
            /**
             * @description List all User Groups for a team.
             * @see {@link https://api.slack.com/methods/usergroups.list `usergroups.list` API reference}.
             */
            list: bindApiCallWithOptionalArgument(this, 'usergroups.list'),
            /**
             * @description Update an existing User Group.
             * @see {@link https://api.slack.com/methods/usergroups.update `usergroups.update` API reference}.
             */
            update: bindApiCall(this, 'usergroups.update'),
            users: {
                /**
                 * @description List all users in a User Group.
                 * @see {@link https://api.slack.com/methods/usergroups.users.list `usergroups.users.list` API reference}.
                 */
                list: bindApiCall(this, 'usergroups.users.list'),
                /**
                 * @description Update the list of users in a User Group.
                 * @see {@link https://api.slack.com/methods/usergroups.users.update `usergroups.users.update` API reference}.
                 */
                update: bindApiCall(this, 'usergroups.users.update'),
            },
        };
        this.users = {
            /**
             * @description List conversations the calling user may access.
             * @see {@link https://api.slack.com/methods/users.conversations `users.conversations` API reference}.
             */
            conversations: bindApiCall(this, 'users.conversations'),
            /**
             * @description Delete the user profile photo.
             * @see {@link https://api.slack.com/methods/users.deletePhoto `users.deletePhoto` API reference}.
             */
            deletePhoto: bindApiCall(this, 'users.deletePhoto'),
            discoverableContacts: {
                /**
                 * @description Lookup an email address to see if someone is on Slack.
                 * @see {@link https://api.slack.com/methods/users.discoverableContacts.lookup `users.discoverableContacts.lookup` API reference}.
                 */
                lookup: bindApiCall(this, 'users.discoverableContacts.lookup'),
            },
            /**
             * @description Gets user presence information.
             * @see {@link https://api.slack.com/methods/users.getPresence `users.getPresence` API reference}.
             */
            getPresence: bindApiCall(this, 'users.getPresence'),
            /**
             * @description Get a user's identity.
             * @see {@link https://api.slack.com/methods/users.identity `users.identity` API reference}.
             */
            identity: bindApiCall(this, 'users.identity'),
            /**
             * @description Gets information about a user.
             * @see {@link https://api.slack.com/methods/users.info `users.info` API reference}.
             */
            info: bindApiCall(this, 'users.info'),
            /**
             * @description Lists all users in a Slack team.
             * @see {@link https://api.slack.com/methods/users.list `users.list` API reference}.
             */
            list: bindApiCall(this, 'users.list'),
            /**
             * @description Find a user with an email address.
             * @see {@link https://api.slack.com/methods/users.lookupByEmail `users.lookupByEmail` API reference}.
             */
            lookupByEmail: bindApiCall(this, 'users.lookupByEmail'),
            /**
             * @description Set the user profile photo.
             * @see {@link https://api.slack.com/methods/users.setPhoto `users.setPhoto` API reference}.
             */
            setPhoto: bindApiCall(this, 'users.setPhoto'),
            /**
             * @description Manually sets user presence.
             * @see {@link https://api.slack.com/methods/users.setPresence `users.setPresence` API reference}.
             */
            setPresence: bindApiCall(this, 'users.setPresence'),
            profile: {
                /**
                 * @description Retrieve a user's profile information, including their custom status.
                 * @see {@link https://api.slack.com/methods/users.profile.get `users.profile.get` API reference}.
                 */
                get: bindApiCall(this, 'users.profile.get'),
                /**
                 * @description Set a user's profile information, including custom status.
                 * @see {@link https://api.slack.com/methods/users.profile.set `users.profile.set` API reference}.
                 */
                set: bindApiCall(this, 'users.profile.set'),
            },
        };
        this.views = {
            /**
             * @description Open a view for a user.
             * @see {@link https://api.slack.com/methods/views.open `views.open` API reference}.
             */
            open: bindApiCall(this, 'views.open'),
            /**
             * @description Publish a static view for a user.
             * @see {@link https://api.slack.com/methods/views.publish `views.publish` API reference}.
             */
            publish: bindApiCall(this, 'views.publish'),
            /**
             * @description Push a view onto the stack of a root view.
             * @see {@link https://api.slack.com/methods/views.push `views.push` API reference}.
             */
            push: bindApiCall(this, 'views.push'),
            /**
             * @description Update an existing view.
             * @see {@link https://api.slack.com/methods/views.update `views.update` API reference}.
             */
            update: bindApiCall(this, 'views.update'),
        };
        // ------------------
        // Deprecated methods
        // ------------------
        // TODO: breaking changes for future majors:
        // - stars.* methods are marked as deprecated; once Later has APIs, these will see an official sunsetting timeline
        // - workflows.* methods, Sep 12 2024: https://api.slack.com/changelog/2023-08-workflow-steps-from-apps-step-back
        this.stars = {
            /**
             * @description Save an item for later. Formerly known as adding a star.
             * @deprecated Stars can still be added but they can no longer be viewed or interacted with by end-users.
             * See {@link https://api.slack.com/changelog/2023-07-its-later-already-for-stars-and-reminders our post on stars and the Later list}.
             * @see {@link https://api.slack.com/methods/stars.add `stars.add` API reference}.
             */
            add: bindApiCall(this, 'stars.add'),
            /**
             * @description List a user's saved items, formerly known as stars.
             * @deprecated Stars can still be listed but they can no longer be viewed or interacted with by end-users.
             * See {@link https://api.slack.com/changelog/2023-07-its-later-already-for-stars-and-reminders our post on stars and the Later list}.
             * @see {@link https://api.slack.com/methods/stars.list `stars.list` API reference}.
             */
            list: bindApiCall(this, 'stars.list'),
            /**
             * @description Remove a saved item from a user's saved items, formerly known as stars.
             * @deprecated Stars can still be removed but they can no longer be viewed or interacted with by end-users.
             * See {@link https://api.slack.com/changelog/2023-07-its-later-already-for-stars-and-reminders our post on stars and the Later list}.
             * @see {@link https://api.slack.com/methods/stars.remove `stars.remove` API reference}.
             */
            remove: bindApiCall(this, 'stars.remove'),
        };
        this.workflows = {
            /**
             * @description Indicate that an app's step in a workflow completed execution.
             * @deprecated Steps from Apps is deprecated.
             * We're retiring all Slack app functionality around Steps from Apps in September 2024.
             * See {@link https://api.slack.com/changelog/2023-08-workflow-steps-from-apps-step-back our post on deprecating Steps from Apps}.
             * @see {@link https://api.slack.com/methods/workflows.stepCompleted `workflows.stepCompleted` API reference}.
             */
            stepCompleted: bindApiCall(this, 'workflows.stepCompleted'),
            /**
             * @description Indicate that an app's step in a workflow failed to execute.
             * @deprecated Steps from Apps is deprecated.
             * We're retiring all Slack app functionality around Steps from Apps in September 2024.
             * See {@link https://api.slack.com/changelog/2023-08-workflow-steps-from-apps-step-back our post on deprecating Steps from Apps}.
             * @see {@link https://api.slack.com/methods/workflows.stepFailed `workflows.stepFailed` API reference}.
             */
            stepFailed: bindApiCall(this, 'workflows.stepFailed'),
            /**
             * @description Update the configuration for a workflow step.
             * @deprecated Steps from Apps is deprecated.
             * We're retiring all Slack app functionality around Steps from Apps in September 2024.
             * See {@link https://api.slack.com/changelog/2023-08-workflow-steps-from-apps-step-back our post on deprecating Steps from Apps}.
             * @see {@link https://api.slack.com/methods/workflows.updateStep `workflows.updateStep` API reference}.
             */
            updateStep: bindApiCall(this, 'workflows.updateStep'),
        };
        // Check that the class being created extends from `WebClient` rather than this class
        if (new.target !== WebClient_1.WebClient && !(new.target.prototype instanceof WebClient_1.WebClient)) {
            throw new Error('Attempt to inherit from WebClient methods without inheriting from WebClient');
        }
    }
}
exports.Methods = Methods;
__exportStar(__webpack_require__(/*! @slack/types */ "../node_modules/@slack/types/dist/index.js"), exports);
//# sourceMappingURL=methods.js.map

/***/ }),

/***/ "../node_modules/@slack/web-api/dist/retry-policies.js":
/*!*************************************************************!*\
  !*** ../node_modules/@slack/web-api/dist/retry-policies.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.rapidRetryPolicy = exports.fiveRetriesInFiveMinutes = exports.tenRetriesInAboutThirtyMinutes = void 0;
/**
 * The default retry policy. Retry up to 10 times, over the span of about 30 minutes. It's not exact because
 * randomization has been added to prevent a stampeding herd problem (if all instances in your application are retrying
 * a request at the exact same intervals, they are more likely to cause failures for each other).
 */
exports.tenRetriesInAboutThirtyMinutes = {
    retries: 10,
    factor: 1.96821,
    randomize: true,
};
/**
 * Short & sweet, five retries in five minutes and then bail.
 */
exports.fiveRetriesInFiveMinutes = {
    retries: 5,
    factor: 3.86,
};
/**
 * This policy is just to keep the tests running fast.
 */
exports.rapidRetryPolicy = {
    minTimeout: 0,
    maxTimeout: 1,
};
const policies = {
    tenRetriesInAboutThirtyMinutes: exports.tenRetriesInAboutThirtyMinutes,
    fiveRetriesInFiveMinutes: exports.fiveRetriesInFiveMinutes,
    rapidRetryPolicy: exports.rapidRetryPolicy,
};
exports["default"] = policies;
//# sourceMappingURL=retry-policies.js.map

/***/ }),

/***/ "../node_modules/@slack/web-api/dist/types/request/index.js":
/*!******************************************************************!*\
  !*** ../node_modules/@slack/web-api/dist/types/request/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../node_modules/@slack/web-api/dist/types/response/index.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@slack/web-api/dist/types/response/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/NodeUseDualstackEndpointConfigOptions.js":
/*!****************************************************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/NodeUseDualstackEndpointConfigOptions.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CONFIG_USE_DUALSTACK_ENDPOINT: () => (/* binding */ CONFIG_USE_DUALSTACK_ENDPOINT),
/* harmony export */   DEFAULT_USE_DUALSTACK_ENDPOINT: () => (/* binding */ DEFAULT_USE_DUALSTACK_ENDPOINT),
/* harmony export */   ENV_USE_DUALSTACK_ENDPOINT: () => (/* binding */ ENV_USE_DUALSTACK_ENDPOINT),
/* harmony export */   NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS: () => (/* binding */ NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS)
/* harmony export */ });
/* harmony import */ var _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-config-provider */ "../node_modules/@smithy/util-config-provider/dist-es/index.js");

const ENV_USE_DUALSTACK_ENDPOINT = "AWS_USE_DUALSTACK_ENDPOINT";
const CONFIG_USE_DUALSTACK_ENDPOINT = "use_dualstack_endpoint";
const DEFAULT_USE_DUALSTACK_ENDPOINT = false;
const NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS = {
    environmentVariableSelector: (env) => (0,_smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.booleanSelector)(env, ENV_USE_DUALSTACK_ENDPOINT, _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.SelectorType.ENV),
    configFileSelector: (profile) => (0,_smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.booleanSelector)(profile, CONFIG_USE_DUALSTACK_ENDPOINT, _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.SelectorType.CONFIG),
    default: false,
};


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/NodeUseFipsEndpointConfigOptions.js":
/*!***********************************************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/NodeUseFipsEndpointConfigOptions.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CONFIG_USE_FIPS_ENDPOINT: () => (/* binding */ CONFIG_USE_FIPS_ENDPOINT),
/* harmony export */   DEFAULT_USE_FIPS_ENDPOINT: () => (/* binding */ DEFAULT_USE_FIPS_ENDPOINT),
/* harmony export */   ENV_USE_FIPS_ENDPOINT: () => (/* binding */ ENV_USE_FIPS_ENDPOINT),
/* harmony export */   NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS: () => (/* binding */ NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)
/* harmony export */ });
/* harmony import */ var _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-config-provider */ "../node_modules/@smithy/util-config-provider/dist-es/index.js");

const ENV_USE_FIPS_ENDPOINT = "AWS_USE_FIPS_ENDPOINT";
const CONFIG_USE_FIPS_ENDPOINT = "use_fips_endpoint";
const DEFAULT_USE_FIPS_ENDPOINT = false;
const NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS = {
    environmentVariableSelector: (env) => (0,_smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.booleanSelector)(env, ENV_USE_FIPS_ENDPOINT, _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.SelectorType.ENV),
    configFileSelector: (profile) => (0,_smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.booleanSelector)(profile, CONFIG_USE_FIPS_ENDPOINT, _smithy_util_config_provider__WEBPACK_IMPORTED_MODULE_0__.SelectorType.CONFIG),
    default: false,
};


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/index.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CONFIG_USE_DUALSTACK_ENDPOINT: () => (/* reexport safe */ _NodeUseDualstackEndpointConfigOptions__WEBPACK_IMPORTED_MODULE_0__.CONFIG_USE_DUALSTACK_ENDPOINT),
/* harmony export */   CONFIG_USE_FIPS_ENDPOINT: () => (/* reexport safe */ _NodeUseFipsEndpointConfigOptions__WEBPACK_IMPORTED_MODULE_1__.CONFIG_USE_FIPS_ENDPOINT),
/* harmony export */   DEFAULT_USE_DUALSTACK_ENDPOINT: () => (/* reexport safe */ _NodeUseDualstackEndpointConfigOptions__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_USE_DUALSTACK_ENDPOINT),
/* harmony export */   DEFAULT_USE_FIPS_ENDPOINT: () => (/* reexport safe */ _NodeUseFipsEndpointConfigOptions__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_USE_FIPS_ENDPOINT),
/* harmony export */   ENV_USE_DUALSTACK_ENDPOINT: () => (/* reexport safe */ _NodeUseDualstackEndpointConfigOptions__WEBPACK_IMPORTED_MODULE_0__.ENV_USE_DUALSTACK_ENDPOINT),
/* harmony export */   ENV_USE_FIPS_ENDPOINT: () => (/* reexport safe */ _NodeUseFipsEndpointConfigOptions__WEBPACK_IMPORTED_MODULE_1__.ENV_USE_FIPS_ENDPOINT),
/* harmony export */   NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS: () => (/* reexport safe */ _NodeUseDualstackEndpointConfigOptions__WEBPACK_IMPORTED_MODULE_0__.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),
/* harmony export */   NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS: () => (/* reexport safe */ _NodeUseFipsEndpointConfigOptions__WEBPACK_IMPORTED_MODULE_1__.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS),
/* harmony export */   resolveCustomEndpointsConfig: () => (/* reexport safe */ _resolveCustomEndpointsConfig__WEBPACK_IMPORTED_MODULE_2__.resolveCustomEndpointsConfig),
/* harmony export */   resolveEndpointsConfig: () => (/* reexport safe */ _resolveEndpointsConfig__WEBPACK_IMPORTED_MODULE_3__.resolveEndpointsConfig)
/* harmony export */ });
/* harmony import */ var _NodeUseDualstackEndpointConfigOptions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./NodeUseDualstackEndpointConfigOptions */ "../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/NodeUseDualstackEndpointConfigOptions.js");
/* harmony import */ var _NodeUseFipsEndpointConfigOptions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./NodeUseFipsEndpointConfigOptions */ "../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/NodeUseFipsEndpointConfigOptions.js");
/* harmony import */ var _resolveCustomEndpointsConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./resolveCustomEndpointsConfig */ "../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/resolveCustomEndpointsConfig.js");
/* harmony import */ var _resolveEndpointsConfig__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./resolveEndpointsConfig */ "../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/resolveEndpointsConfig.js");






/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/resolveCustomEndpointsConfig.js":
/*!*******************************************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/resolveCustomEndpointsConfig.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveCustomEndpointsConfig: () => (/* binding */ resolveCustomEndpointsConfig)
/* harmony export */ });
/* harmony import */ var _smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-middleware */ "../node_modules/@smithy/util-middleware/dist-es/index.js");

const resolveCustomEndpointsConfig = (input) => {
    const { endpoint, urlParser } = input;
    return {
        ...input,
        tls: input.tls ?? true,
        endpoint: (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(typeof endpoint === "string" ? urlParser(endpoint) : endpoint),
        isCustomEndpoint: true,
        useDualstackEndpoint: (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(input.useDualstackEndpoint ?? false),
    };
};


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/resolveEndpointsConfig.js":
/*!*************************************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/resolveEndpointsConfig.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveEndpointsConfig: () => (/* binding */ resolveEndpointsConfig)
/* harmony export */ });
/* harmony import */ var _smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-middleware */ "../node_modules/@smithy/util-middleware/dist-es/index.js");
/* harmony import */ var _utils_getEndpointFromRegion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/getEndpointFromRegion */ "../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/utils/getEndpointFromRegion.js");


const resolveEndpointsConfig = (input) => {
    const useDualstackEndpoint = (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(input.useDualstackEndpoint ?? false);
    const { endpoint, useFipsEndpoint, urlParser } = input;
    return {
        ...input,
        tls: input.tls ?? true,
        endpoint: endpoint
            ? (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(typeof endpoint === "string" ? urlParser(endpoint) : endpoint)
            : () => (0,_utils_getEndpointFromRegion__WEBPACK_IMPORTED_MODULE_1__.getEndpointFromRegion)({ ...input, useDualstackEndpoint, useFipsEndpoint }),
        isCustomEndpoint: !!endpoint,
        useDualstackEndpoint,
    };
};


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/utils/getEndpointFromRegion.js":
/*!******************************************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/utils/getEndpointFromRegion.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getEndpointFromRegion: () => (/* binding */ getEndpointFromRegion)
/* harmony export */ });
const getEndpointFromRegion = async (input) => {
    const { tls = true } = input;
    const region = await input.region();
    const dnsHostRegex = new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/);
    if (!dnsHostRegex.test(region)) {
        throw new Error("Invalid region in client config");
    }
    const useDualstackEndpoint = await input.useDualstackEndpoint();
    const useFipsEndpoint = await input.useFipsEndpoint();
    const { hostname } = (await input.regionInfoProvider(region, { useDualstackEndpoint, useFipsEndpoint })) ?? {};
    if (!hostname) {
        throw new Error("Cannot resolve hostname from client config");
    }
    return input.urlParser(`${tls ? "https:" : "http:"}//${hostname}`);
};


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/index.js":
/*!****************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CONFIG_USE_DUALSTACK_ENDPOINT: () => (/* reexport safe */ _endpointsConfig__WEBPACK_IMPORTED_MODULE_0__.CONFIG_USE_DUALSTACK_ENDPOINT),
/* harmony export */   CONFIG_USE_FIPS_ENDPOINT: () => (/* reexport safe */ _endpointsConfig__WEBPACK_IMPORTED_MODULE_0__.CONFIG_USE_FIPS_ENDPOINT),
/* harmony export */   DEFAULT_USE_DUALSTACK_ENDPOINT: () => (/* reexport safe */ _endpointsConfig__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_USE_DUALSTACK_ENDPOINT),
/* harmony export */   DEFAULT_USE_FIPS_ENDPOINT: () => (/* reexport safe */ _endpointsConfig__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_USE_FIPS_ENDPOINT),
/* harmony export */   ENV_USE_DUALSTACK_ENDPOINT: () => (/* reexport safe */ _endpointsConfig__WEBPACK_IMPORTED_MODULE_0__.ENV_USE_DUALSTACK_ENDPOINT),
/* harmony export */   ENV_USE_FIPS_ENDPOINT: () => (/* reexport safe */ _endpointsConfig__WEBPACK_IMPORTED_MODULE_0__.ENV_USE_FIPS_ENDPOINT),
/* harmony export */   NODE_REGION_CONFIG_FILE_OPTIONS: () => (/* reexport safe */ _regionConfig__WEBPACK_IMPORTED_MODULE_1__.NODE_REGION_CONFIG_FILE_OPTIONS),
/* harmony export */   NODE_REGION_CONFIG_OPTIONS: () => (/* reexport safe */ _regionConfig__WEBPACK_IMPORTED_MODULE_1__.NODE_REGION_CONFIG_OPTIONS),
/* harmony export */   NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS: () => (/* reexport safe */ _endpointsConfig__WEBPACK_IMPORTED_MODULE_0__.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),
/* harmony export */   NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS: () => (/* reexport safe */ _endpointsConfig__WEBPACK_IMPORTED_MODULE_0__.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS),
/* harmony export */   REGION_ENV_NAME: () => (/* reexport safe */ _regionConfig__WEBPACK_IMPORTED_MODULE_1__.REGION_ENV_NAME),
/* harmony export */   REGION_INI_NAME: () => (/* reexport safe */ _regionConfig__WEBPACK_IMPORTED_MODULE_1__.REGION_INI_NAME),
/* harmony export */   getRegionInfo: () => (/* reexport safe */ _regionInfo__WEBPACK_IMPORTED_MODULE_2__.getRegionInfo),
/* harmony export */   resolveCustomEndpointsConfig: () => (/* reexport safe */ _endpointsConfig__WEBPACK_IMPORTED_MODULE_0__.resolveCustomEndpointsConfig),
/* harmony export */   resolveEndpointsConfig: () => (/* reexport safe */ _endpointsConfig__WEBPACK_IMPORTED_MODULE_0__.resolveEndpointsConfig),
/* harmony export */   resolveRegionConfig: () => (/* reexport safe */ _regionConfig__WEBPACK_IMPORTED_MODULE_1__.resolveRegionConfig)
/* harmony export */ });
/* harmony import */ var _endpointsConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./endpointsConfig */ "../node_modules/@smithy/config-resolver/dist-es/endpointsConfig/index.js");
/* harmony import */ var _regionConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./regionConfig */ "../node_modules/@smithy/config-resolver/dist-es/regionConfig/index.js");
/* harmony import */ var _regionInfo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./regionInfo */ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/index.js");





/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/regionConfig/config.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/regionConfig/config.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_REGION_CONFIG_FILE_OPTIONS: () => (/* binding */ NODE_REGION_CONFIG_FILE_OPTIONS),
/* harmony export */   NODE_REGION_CONFIG_OPTIONS: () => (/* binding */ NODE_REGION_CONFIG_OPTIONS),
/* harmony export */   REGION_ENV_NAME: () => (/* binding */ REGION_ENV_NAME),
/* harmony export */   REGION_INI_NAME: () => (/* binding */ REGION_INI_NAME)
/* harmony export */ });
const REGION_ENV_NAME = "AWS_REGION";
const REGION_INI_NAME = "region";
const NODE_REGION_CONFIG_OPTIONS = {
    environmentVariableSelector: (env) => env[REGION_ENV_NAME],
    configFileSelector: (profile) => profile[REGION_INI_NAME],
    default: () => {
        throw new Error("Region is missing");
    },
};
const NODE_REGION_CONFIG_FILE_OPTIONS = {
    preferredFile: "credentials",
};


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/regionConfig/getRealRegion.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/regionConfig/getRealRegion.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRealRegion: () => (/* binding */ getRealRegion)
/* harmony export */ });
/* harmony import */ var _isFipsRegion__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isFipsRegion */ "../node_modules/@smithy/config-resolver/dist-es/regionConfig/isFipsRegion.js");

const getRealRegion = (region) => (0,_isFipsRegion__WEBPACK_IMPORTED_MODULE_0__.isFipsRegion)(region)
    ? ["fips-aws-global", "aws-fips"].includes(region)
        ? "us-east-1"
        : region.replace(/fips-(dkr-|prod-)?|-fips/, "")
    : region;


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/regionConfig/index.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/regionConfig/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_REGION_CONFIG_FILE_OPTIONS: () => (/* reexport safe */ _config__WEBPACK_IMPORTED_MODULE_0__.NODE_REGION_CONFIG_FILE_OPTIONS),
/* harmony export */   NODE_REGION_CONFIG_OPTIONS: () => (/* reexport safe */ _config__WEBPACK_IMPORTED_MODULE_0__.NODE_REGION_CONFIG_OPTIONS),
/* harmony export */   REGION_ENV_NAME: () => (/* reexport safe */ _config__WEBPACK_IMPORTED_MODULE_0__.REGION_ENV_NAME),
/* harmony export */   REGION_INI_NAME: () => (/* reexport safe */ _config__WEBPACK_IMPORTED_MODULE_0__.REGION_INI_NAME),
/* harmony export */   resolveRegionConfig: () => (/* reexport safe */ _resolveRegionConfig__WEBPACK_IMPORTED_MODULE_1__.resolveRegionConfig)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "../node_modules/@smithy/config-resolver/dist-es/regionConfig/config.js");
/* harmony import */ var _resolveRegionConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./resolveRegionConfig */ "../node_modules/@smithy/config-resolver/dist-es/regionConfig/resolveRegionConfig.js");




/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/regionConfig/isFipsRegion.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/regionConfig/isFipsRegion.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isFipsRegion: () => (/* binding */ isFipsRegion)
/* harmony export */ });
const isFipsRegion = (region) => typeof region === "string" && (region.startsWith("fips-") || region.endsWith("-fips"));


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/regionConfig/resolveRegionConfig.js":
/*!*******************************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/regionConfig/resolveRegionConfig.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveRegionConfig: () => (/* binding */ resolveRegionConfig)
/* harmony export */ });
/* harmony import */ var _getRealRegion__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getRealRegion */ "../node_modules/@smithy/config-resolver/dist-es/regionConfig/getRealRegion.js");
/* harmony import */ var _isFipsRegion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isFipsRegion */ "../node_modules/@smithy/config-resolver/dist-es/regionConfig/isFipsRegion.js");


const resolveRegionConfig = (input) => {
    const { region, useFipsEndpoint } = input;
    if (!region) {
        throw new Error("Region is missing");
    }
    return {
        ...input,
        region: async () => {
            if (typeof region === "string") {
                return (0,_getRealRegion__WEBPACK_IMPORTED_MODULE_0__.getRealRegion)(region);
            }
            const providedRegion = await region();
            return (0,_getRealRegion__WEBPACK_IMPORTED_MODULE_0__.getRealRegion)(providedRegion);
        },
        useFipsEndpoint: async () => {
            const providedRegion = typeof region === "string" ? region : await region();
            if ((0,_isFipsRegion__WEBPACK_IMPORTED_MODULE_1__.isFipsRegion)(providedRegion)) {
                return true;
            }
            return typeof useFipsEndpoint !== "function" ? Promise.resolve(!!useFipsEndpoint) : useFipsEndpoint();
        },
    };
};


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/PartitionHash.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/regionInfo/PartitionHash.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/RegionHash.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/regionInfo/RegionHash.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/getHostnameFromVariants.js":
/*!*********************************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/regionInfo/getHostnameFromVariants.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHostnameFromVariants: () => (/* binding */ getHostnameFromVariants)
/* harmony export */ });
const getHostnameFromVariants = (variants = [], { useFipsEndpoint, useDualstackEndpoint }) => variants.find(({ tags }) => useFipsEndpoint === tags.includes("fips") && useDualstackEndpoint === tags.includes("dualstack"))?.hostname;


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/getRegionInfo.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/regionInfo/getRegionInfo.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRegionInfo: () => (/* binding */ getRegionInfo)
/* harmony export */ });
/* harmony import */ var _getHostnameFromVariants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getHostnameFromVariants */ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/getHostnameFromVariants.js");
/* harmony import */ var _getResolvedHostname__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getResolvedHostname */ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/getResolvedHostname.js");
/* harmony import */ var _getResolvedPartition__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getResolvedPartition */ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/getResolvedPartition.js");
/* harmony import */ var _getResolvedSigningRegion__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getResolvedSigningRegion */ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/getResolvedSigningRegion.js");




const getRegionInfo = (region, { useFipsEndpoint = false, useDualstackEndpoint = false, signingService, regionHash, partitionHash, }) => {
    const partition = (0,_getResolvedPartition__WEBPACK_IMPORTED_MODULE_2__.getResolvedPartition)(region, { partitionHash });
    const resolvedRegion = region in regionHash ? region : partitionHash[partition]?.endpoint ?? region;
    const hostnameOptions = { useFipsEndpoint, useDualstackEndpoint };
    const regionHostname = (0,_getHostnameFromVariants__WEBPACK_IMPORTED_MODULE_0__.getHostnameFromVariants)(regionHash[resolvedRegion]?.variants, hostnameOptions);
    const partitionHostname = (0,_getHostnameFromVariants__WEBPACK_IMPORTED_MODULE_0__.getHostnameFromVariants)(partitionHash[partition]?.variants, hostnameOptions);
    const hostname = (0,_getResolvedHostname__WEBPACK_IMPORTED_MODULE_1__.getResolvedHostname)(resolvedRegion, { regionHostname, partitionHostname });
    if (hostname === undefined) {
        throw new Error(`Endpoint resolution failed for: ${{ resolvedRegion, useFipsEndpoint, useDualstackEndpoint }}`);
    }
    const signingRegion = (0,_getResolvedSigningRegion__WEBPACK_IMPORTED_MODULE_3__.getResolvedSigningRegion)(hostname, {
        signingRegion: regionHash[resolvedRegion]?.signingRegion,
        regionRegex: partitionHash[partition].regionRegex,
        useFipsEndpoint,
    });
    return {
        partition,
        signingService,
        hostname,
        ...(signingRegion && { signingRegion }),
        ...(regionHash[resolvedRegion]?.signingService && {
            signingService: regionHash[resolvedRegion].signingService,
        }),
    };
};


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/getResolvedHostname.js":
/*!*****************************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/regionInfo/getResolvedHostname.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getResolvedHostname: () => (/* binding */ getResolvedHostname)
/* harmony export */ });
const getResolvedHostname = (resolvedRegion, { regionHostname, partitionHostname }) => regionHostname
    ? regionHostname
    : partitionHostname
        ? partitionHostname.replace("{region}", resolvedRegion)
        : undefined;


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/getResolvedPartition.js":
/*!******************************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/regionInfo/getResolvedPartition.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getResolvedPartition: () => (/* binding */ getResolvedPartition)
/* harmony export */ });
const getResolvedPartition = (region, { partitionHash }) => Object.keys(partitionHash || {}).find((key) => partitionHash[key].regions.includes(region)) ?? "aws";


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/getResolvedSigningRegion.js":
/*!**********************************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/regionInfo/getResolvedSigningRegion.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getResolvedSigningRegion: () => (/* binding */ getResolvedSigningRegion)
/* harmony export */ });
const getResolvedSigningRegion = (hostname, { signingRegion, regionRegex, useFipsEndpoint }) => {
    if (signingRegion) {
        return signingRegion;
    }
    else if (useFipsEndpoint) {
        const regionRegexJs = regionRegex.replace("\\\\", "\\").replace(/^\^/g, "\\.").replace(/\$$/g, "\\.");
        const regionRegexmatchArray = hostname.match(regionRegexJs);
        if (regionRegexmatchArray) {
            return regionRegexmatchArray[0].slice(1, -1);
        }
    }
};


/***/ }),

/***/ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/index.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@smithy/config-resolver/dist-es/regionInfo/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRegionInfo: () => (/* reexport safe */ _getRegionInfo__WEBPACK_IMPORTED_MODULE_2__.getRegionInfo)
/* harmony export */ });
/* harmony import */ var _PartitionHash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PartitionHash */ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/PartitionHash.js");
/* harmony import */ var _RegionHash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RegionHash */ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/RegionHash.js");
/* harmony import */ var _getRegionInfo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getRegionInfo */ "../node_modules/@smithy/config-resolver/dist-es/regionInfo/getRegionInfo.js");





/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/getSmithyContext.js":
/*!****************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/getSmithyContext.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSmithyContext: () => (/* binding */ getSmithyContext)
/* harmony export */ });
/* harmony import */ var _smithy_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/types */ "../node_modules/@smithy/types/dist-es/index.js");

const getSmithyContext = (context) => context[_smithy_types__WEBPACK_IMPORTED_MODULE_0__.SMITHY_CONTEXT_KEY] || (context[_smithy_types__WEBPACK_IMPORTED_MODULE_0__.SMITHY_CONTEXT_KEY] = {});


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/index.js":
/*!*****************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DefaultIdentityProviderConfig: () => (/* reexport safe */ _util_identity_and_auth__WEBPACK_IMPORTED_MODULE_7__.DefaultIdentityProviderConfig),
/* harmony export */   EXPIRATION_MS: () => (/* reexport safe */ _util_identity_and_auth__WEBPACK_IMPORTED_MODULE_7__.EXPIRATION_MS),
/* harmony export */   HttpApiKeyAuthSigner: () => (/* reexport safe */ _util_identity_and_auth__WEBPACK_IMPORTED_MODULE_7__.HttpApiKeyAuthSigner),
/* harmony export */   HttpBearerAuthSigner: () => (/* reexport safe */ _util_identity_and_auth__WEBPACK_IMPORTED_MODULE_7__.HttpBearerAuthSigner),
/* harmony export */   NoAuthSigner: () => (/* reexport safe */ _util_identity_and_auth__WEBPACK_IMPORTED_MODULE_7__.NoAuthSigner),
/* harmony export */   createIsIdentityExpiredFunction: () => (/* reexport safe */ _util_identity_and_auth__WEBPACK_IMPORTED_MODULE_7__.createIsIdentityExpiredFunction),
/* harmony export */   createPaginator: () => (/* reexport safe */ _pagination_createPaginator__WEBPACK_IMPORTED_MODULE_4__.createPaginator),
/* harmony export */   doesIdentityRequireRefresh: () => (/* reexport safe */ _util_identity_and_auth__WEBPACK_IMPORTED_MODULE_7__.doesIdentityRequireRefresh),
/* harmony export */   getHttpAuthSchemeEndpointRuleSetPlugin: () => (/* reexport safe */ _middleware_http_auth_scheme__WEBPACK_IMPORTED_MODULE_1__.getHttpAuthSchemeEndpointRuleSetPlugin),
/* harmony export */   getHttpAuthSchemePlugin: () => (/* reexport safe */ _middleware_http_auth_scheme__WEBPACK_IMPORTED_MODULE_1__.getHttpAuthSchemePlugin),
/* harmony export */   getHttpSigningPlugin: () => (/* reexport safe */ _middleware_http_signing__WEBPACK_IMPORTED_MODULE_2__.getHttpSigningPlugin),
/* harmony export */   getSmithyContext: () => (/* reexport safe */ _getSmithyContext__WEBPACK_IMPORTED_MODULE_0__.getSmithyContext),
/* harmony export */   httpAuthSchemeEndpointRuleSetMiddlewareOptions: () => (/* reexport safe */ _middleware_http_auth_scheme__WEBPACK_IMPORTED_MODULE_1__.httpAuthSchemeEndpointRuleSetMiddlewareOptions),
/* harmony export */   httpAuthSchemeMiddleware: () => (/* reexport safe */ _middleware_http_auth_scheme__WEBPACK_IMPORTED_MODULE_1__.httpAuthSchemeMiddleware),
/* harmony export */   httpAuthSchemeMiddlewareOptions: () => (/* reexport safe */ _middleware_http_auth_scheme__WEBPACK_IMPORTED_MODULE_1__.httpAuthSchemeMiddlewareOptions),
/* harmony export */   httpSigningMiddleware: () => (/* reexport safe */ _middleware_http_signing__WEBPACK_IMPORTED_MODULE_2__.httpSigningMiddleware),
/* harmony export */   httpSigningMiddlewareOptions: () => (/* reexport safe */ _middleware_http_signing__WEBPACK_IMPORTED_MODULE_2__.httpSigningMiddlewareOptions),
/* harmony export */   isIdentityExpired: () => (/* reexport safe */ _util_identity_and_auth__WEBPACK_IMPORTED_MODULE_7__.isIdentityExpired),
/* harmony export */   memoizeIdentityProvider: () => (/* reexport safe */ _util_identity_and_auth__WEBPACK_IMPORTED_MODULE_7__.memoizeIdentityProvider),
/* harmony export */   normalizeProvider: () => (/* reexport safe */ _normalizeProvider__WEBPACK_IMPORTED_MODULE_3__.normalizeProvider),
/* harmony export */   requestBuilder: () => (/* reexport safe */ _protocols_requestBuilder__WEBPACK_IMPORTED_MODULE_5__.requestBuilder),
/* harmony export */   setFeature: () => (/* reexport safe */ _setFeature__WEBPACK_IMPORTED_MODULE_6__.setFeature)
/* harmony export */ });
/* harmony import */ var _getSmithyContext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getSmithyContext */ "../node_modules/@smithy/core/dist-es/getSmithyContext.js");
/* harmony import */ var _middleware_http_auth_scheme__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./middleware-http-auth-scheme */ "../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/index.js");
/* harmony import */ var _middleware_http_signing__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./middleware-http-signing */ "../node_modules/@smithy/core/dist-es/middleware-http-signing/index.js");
/* harmony import */ var _normalizeProvider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./normalizeProvider */ "../node_modules/@smithy/core/dist-es/normalizeProvider.js");
/* harmony import */ var _pagination_createPaginator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pagination/createPaginator */ "../node_modules/@smithy/core/dist-es/pagination/createPaginator.js");
/* harmony import */ var _protocols_requestBuilder__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./protocols/requestBuilder */ "../node_modules/@smithy/core/dist-es/protocols/requestBuilder.js");
/* harmony import */ var _setFeature__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./setFeature */ "../node_modules/@smithy/core/dist-es/setFeature.js");
/* harmony import */ var _util_identity_and_auth__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./util-identity-and-auth */ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/index.js");










/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/getHttpAuthSchemeEndpointRuleSetPlugin.js":
/*!******************************************************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/getHttpAuthSchemeEndpointRuleSetPlugin.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHttpAuthSchemeEndpointRuleSetPlugin: () => (/* binding */ getHttpAuthSchemeEndpointRuleSetPlugin),
/* harmony export */   httpAuthSchemeEndpointRuleSetMiddlewareOptions: () => (/* binding */ httpAuthSchemeEndpointRuleSetMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _httpAuthSchemeMiddleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./httpAuthSchemeMiddleware */ "../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/httpAuthSchemeMiddleware.js");

const httpAuthSchemeEndpointRuleSetMiddlewareOptions = {
    step: "serialize",
    tags: ["HTTP_AUTH_SCHEME"],
    name: "httpAuthSchemeMiddleware",
    override: true,
    relation: "before",
    toMiddleware: "endpointV2Middleware",
};
const getHttpAuthSchemeEndpointRuleSetPlugin = (config, { httpAuthSchemeParametersProvider, identityProviderConfigProvider, }) => ({
    applyToStack: (clientStack) => {
        clientStack.addRelativeTo((0,_httpAuthSchemeMiddleware__WEBPACK_IMPORTED_MODULE_0__.httpAuthSchemeMiddleware)(config, {
            httpAuthSchemeParametersProvider,
            identityProviderConfigProvider,
        }), httpAuthSchemeEndpointRuleSetMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/getHttpAuthSchemePlugin.js":
/*!***************************************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/getHttpAuthSchemePlugin.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHttpAuthSchemePlugin: () => (/* binding */ getHttpAuthSchemePlugin),
/* harmony export */   httpAuthSchemeMiddlewareOptions: () => (/* binding */ httpAuthSchemeMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/middleware-serde */ "../node_modules/@smithy/middleware-serde/dist-es/index.js");
/* harmony import */ var _httpAuthSchemeMiddleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./httpAuthSchemeMiddleware */ "../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/httpAuthSchemeMiddleware.js");


const httpAuthSchemeMiddlewareOptions = {
    step: "serialize",
    tags: ["HTTP_AUTH_SCHEME"],
    name: "httpAuthSchemeMiddleware",
    override: true,
    relation: "before",
    toMiddleware: _smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_0__.serializerMiddlewareOption.name,
};
const getHttpAuthSchemePlugin = (config, { httpAuthSchemeParametersProvider, identityProviderConfigProvider, }) => ({
    applyToStack: (clientStack) => {
        clientStack.addRelativeTo((0,_httpAuthSchemeMiddleware__WEBPACK_IMPORTED_MODULE_1__.httpAuthSchemeMiddleware)(config, {
            httpAuthSchemeParametersProvider,
            identityProviderConfigProvider,
        }), httpAuthSchemeMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/httpAuthSchemeMiddleware.js":
/*!****************************************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/httpAuthSchemeMiddleware.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   httpAuthSchemeMiddleware: () => (/* binding */ httpAuthSchemeMiddleware)
/* harmony export */ });
/* harmony import */ var _smithy_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/types */ "../node_modules/@smithy/types/dist-es/index.js");
/* harmony import */ var _smithy_util_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-middleware */ "../node_modules/@smithy/util-middleware/dist-es/index.js");


function convertHttpAuthSchemesToMap(httpAuthSchemes) {
    const map = new Map();
    for (const scheme of httpAuthSchemes) {
        map.set(scheme.schemeId, scheme);
    }
    return map;
}
const httpAuthSchemeMiddleware = (config, mwOptions) => (next, context) => async (args) => {
    const options = config.httpAuthSchemeProvider(await mwOptions.httpAuthSchemeParametersProvider(config, context, args.input));
    const authSchemes = convertHttpAuthSchemesToMap(config.httpAuthSchemes);
    const smithyContext = (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_1__.getSmithyContext)(context);
    const failureReasons = [];
    for (const option of options) {
        const scheme = authSchemes.get(option.schemeId);
        if (!scheme) {
            failureReasons.push(`HttpAuthScheme \`${option.schemeId}\` was not enabled for this service.`);
            continue;
        }
        const identityProvider = scheme.identityProvider(await mwOptions.identityProviderConfigProvider(config));
        if (!identityProvider) {
            failureReasons.push(`HttpAuthScheme \`${option.schemeId}\` did not have an IdentityProvider configured.`);
            continue;
        }
        const { identityProperties = {}, signingProperties = {} } = option.propertiesExtractor?.(config, context) || {};
        option.identityProperties = Object.assign(option.identityProperties || {}, identityProperties);
        option.signingProperties = Object.assign(option.signingProperties || {}, signingProperties);
        smithyContext.selectedHttpAuthScheme = {
            httpAuthOption: option,
            identity: await identityProvider(option.identityProperties),
            signer: scheme.signer,
        };
        break;
    }
    if (!smithyContext.selectedHttpAuthScheme) {
        throw new Error(failureReasons.join("\n"));
    }
    return next(args);
};


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/index.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/index.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHttpAuthSchemeEndpointRuleSetPlugin: () => (/* reexport safe */ _getHttpAuthSchemeEndpointRuleSetPlugin__WEBPACK_IMPORTED_MODULE_1__.getHttpAuthSchemeEndpointRuleSetPlugin),
/* harmony export */   getHttpAuthSchemePlugin: () => (/* reexport safe */ _getHttpAuthSchemePlugin__WEBPACK_IMPORTED_MODULE_2__.getHttpAuthSchemePlugin),
/* harmony export */   httpAuthSchemeEndpointRuleSetMiddlewareOptions: () => (/* reexport safe */ _getHttpAuthSchemeEndpointRuleSetPlugin__WEBPACK_IMPORTED_MODULE_1__.httpAuthSchemeEndpointRuleSetMiddlewareOptions),
/* harmony export */   httpAuthSchemeMiddleware: () => (/* reexport safe */ _httpAuthSchemeMiddleware__WEBPACK_IMPORTED_MODULE_0__.httpAuthSchemeMiddleware),
/* harmony export */   httpAuthSchemeMiddlewareOptions: () => (/* reexport safe */ _getHttpAuthSchemePlugin__WEBPACK_IMPORTED_MODULE_2__.httpAuthSchemeMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _httpAuthSchemeMiddleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./httpAuthSchemeMiddleware */ "../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/httpAuthSchemeMiddleware.js");
/* harmony import */ var _getHttpAuthSchemeEndpointRuleSetPlugin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getHttpAuthSchemeEndpointRuleSetPlugin */ "../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/getHttpAuthSchemeEndpointRuleSetPlugin.js");
/* harmony import */ var _getHttpAuthSchemePlugin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getHttpAuthSchemePlugin */ "../node_modules/@smithy/core/dist-es/middleware-http-auth-scheme/getHttpAuthSchemePlugin.js");





/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/middleware-http-signing/getHttpSigningMiddleware.js":
/*!************************************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/middleware-http-signing/getHttpSigningMiddleware.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHttpSigningPlugin: () => (/* binding */ getHttpSigningPlugin),
/* harmony export */   httpSigningMiddlewareOptions: () => (/* binding */ httpSigningMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _httpSigningMiddleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./httpSigningMiddleware */ "../node_modules/@smithy/core/dist-es/middleware-http-signing/httpSigningMiddleware.js");

const httpSigningMiddlewareOptions = {
    step: "finalizeRequest",
    tags: ["HTTP_SIGNING"],
    name: "httpSigningMiddleware",
    aliases: ["apiKeyMiddleware", "tokenMiddleware", "awsAuthMiddleware"],
    override: true,
    relation: "after",
    toMiddleware: "retryMiddleware",
};
const getHttpSigningPlugin = (config) => ({
    applyToStack: (clientStack) => {
        clientStack.addRelativeTo((0,_httpSigningMiddleware__WEBPACK_IMPORTED_MODULE_0__.httpSigningMiddleware)(config), httpSigningMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/middleware-http-signing/httpSigningMiddleware.js":
/*!*********************************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/middleware-http-signing/httpSigningMiddleware.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   httpSigningMiddleware: () => (/* binding */ httpSigningMiddleware)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/types */ "../node_modules/@smithy/types/dist-es/index.js");
/* harmony import */ var _smithy_util_middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/util-middleware */ "../node_modules/@smithy/util-middleware/dist-es/index.js");



const defaultErrorHandler = (signingProperties) => (error) => {
    throw error;
};
const defaultSuccessHandler = (httpResponse, signingProperties) => { };
const httpSigningMiddleware = (config) => (next, context) => async (args) => {
    if (!_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(args.request)) {
        return next(args);
    }
    const smithyContext = (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_2__.getSmithyContext)(context);
    const scheme = smithyContext.selectedHttpAuthScheme;
    if (!scheme) {
        throw new Error(`No HttpAuthScheme was selected: unable to sign request`);
    }
    const { httpAuthOption: { signingProperties = {} }, identity, signer, } = scheme;
    const output = await next({
        ...args,
        request: await signer.sign(args.request, identity, signingProperties),
    }).catch((signer.errorHandler || defaultErrorHandler)(signingProperties));
    (signer.successHandler || defaultSuccessHandler)(output.response, signingProperties);
    return output;
};


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/middleware-http-signing/index.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/middleware-http-signing/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHttpSigningPlugin: () => (/* reexport safe */ _getHttpSigningMiddleware__WEBPACK_IMPORTED_MODULE_1__.getHttpSigningPlugin),
/* harmony export */   httpSigningMiddleware: () => (/* reexport safe */ _httpSigningMiddleware__WEBPACK_IMPORTED_MODULE_0__.httpSigningMiddleware),
/* harmony export */   httpSigningMiddlewareOptions: () => (/* reexport safe */ _getHttpSigningMiddleware__WEBPACK_IMPORTED_MODULE_1__.httpSigningMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _httpSigningMiddleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./httpSigningMiddleware */ "../node_modules/@smithy/core/dist-es/middleware-http-signing/httpSigningMiddleware.js");
/* harmony import */ var _getHttpSigningMiddleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getHttpSigningMiddleware */ "../node_modules/@smithy/core/dist-es/middleware-http-signing/getHttpSigningMiddleware.js");




/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/normalizeProvider.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/normalizeProvider.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   normalizeProvider: () => (/* binding */ normalizeProvider)
/* harmony export */ });
const normalizeProvider = (input) => {
    if (typeof input === "function")
        return input;
    const promisified = Promise.resolve(input);
    return () => promisified;
};


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/pagination/createPaginator.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/pagination/createPaginator.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createPaginator: () => (/* binding */ createPaginator)
/* harmony export */ });
const makePagedClientRequest = async (CommandCtor, client, input, withCommand = (_) => _, ...args) => {
    let command = new CommandCtor(input);
    command = withCommand(command) ?? command;
    return await client.send(command, ...args);
};
function createPaginator(ClientCtor, CommandCtor, inputTokenName, outputTokenName, pageSizeTokenName) {
    return async function* paginateOperation(config, input, ...additionalArguments) {
        const _input = input;
        let token = config.startingToken ?? _input[inputTokenName];
        let hasNext = true;
        let page;
        while (hasNext) {
            _input[inputTokenName] = token;
            if (pageSizeTokenName) {
                _input[pageSizeTokenName] = _input[pageSizeTokenName] ?? config.pageSize;
            }
            if (config.client instanceof ClientCtor) {
                page = await makePagedClientRequest(CommandCtor, config.client, input, config.withCommand, ...additionalArguments);
            }
            else {
                throw new Error(`Invalid client, expected instance of ${ClientCtor.name}`);
            }
            yield page;
            const prevToken = token;
            token = get(page, outputTokenName);
            hasNext = !!(token && (!config.stopOnSameToken || token !== prevToken));
        }
        return undefined;
    };
}
const get = (fromObject, path) => {
    let cursor = fromObject;
    const pathComponents = path.split(".");
    for (const step of pathComponents) {
        if (!cursor || typeof cursor !== "object") {
            return undefined;
        }
        cursor = cursor[step];
    }
    return cursor;
};


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/protocols/requestBuilder.js":
/*!************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/protocols/requestBuilder.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   requestBuilder: () => (/* reexport safe */ _smithy_core_protocols__WEBPACK_IMPORTED_MODULE_0__.requestBuilder)
/* harmony export */ });
/* harmony import */ var _smithy_core_protocols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/core/protocols */ "../node_modules/@smithy/core/dist-es/submodules/protocols/index.js");



/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/setFeature.js":
/*!**********************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/setFeature.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   setFeature: () => (/* binding */ setFeature)
/* harmony export */ });
function setFeature(context, feature, value) {
    if (!context.__smithy_context) {
        context.__smithy_context = {
            features: {},
        };
    }
    else if (!context.__smithy_context.features) {
        context.__smithy_context.features = {};
    }
    context.__smithy_context.features[feature] = value;
}


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/submodules/protocols/collect-stream-body.js":
/*!****************************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/submodules/protocols/collect-stream-body.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   collectBody: () => (/* binding */ collectBody)
/* harmony export */ });
/* harmony import */ var _smithy_util_stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-stream */ "../node_modules/@smithy/util-stream/dist-es/index.js");

const collectBody = async (streamBody = new Uint8Array(), context) => {
    if (streamBody instanceof Uint8Array) {
        return _smithy_util_stream__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayBlobAdapter.mutate(streamBody);
    }
    if (!streamBody) {
        return _smithy_util_stream__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayBlobAdapter.mutate(new Uint8Array());
    }
    const fromContext = context.streamCollector(streamBody);
    return _smithy_util_stream__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayBlobAdapter.mutate(await fromContext);
};


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/submodules/protocols/extended-encode-uri-component.js":
/*!**************************************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/submodules/protocols/extended-encode-uri-component.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   extendedEncodeURIComponent: () => (/* binding */ extendedEncodeURIComponent)
/* harmony export */ });
function extendedEncodeURIComponent(str) {
    return encodeURIComponent(str).replace(/[!'()*]/g, function (c) {
        return "%" + c.charCodeAt(0).toString(16).toUpperCase();
    });
}


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/submodules/protocols/index.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/submodules/protocols/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RequestBuilder: () => (/* reexport safe */ _requestBuilder__WEBPACK_IMPORTED_MODULE_2__.RequestBuilder),
/* harmony export */   collectBody: () => (/* reexport safe */ _collect_stream_body__WEBPACK_IMPORTED_MODULE_0__.collectBody),
/* harmony export */   extendedEncodeURIComponent: () => (/* reexport safe */ _extended_encode_uri_component__WEBPACK_IMPORTED_MODULE_1__.extendedEncodeURIComponent),
/* harmony export */   requestBuilder: () => (/* reexport safe */ _requestBuilder__WEBPACK_IMPORTED_MODULE_2__.requestBuilder),
/* harmony export */   resolvedPath: () => (/* reexport safe */ _resolve_path__WEBPACK_IMPORTED_MODULE_3__.resolvedPath)
/* harmony export */ });
/* harmony import */ var _collect_stream_body__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./collect-stream-body */ "../node_modules/@smithy/core/dist-es/submodules/protocols/collect-stream-body.js");
/* harmony import */ var _extended_encode_uri_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./extended-encode-uri-component */ "../node_modules/@smithy/core/dist-es/submodules/protocols/extended-encode-uri-component.js");
/* harmony import */ var _requestBuilder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./requestBuilder */ "../node_modules/@smithy/core/dist-es/submodules/protocols/requestBuilder.js");
/* harmony import */ var _resolve_path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./resolve-path */ "../node_modules/@smithy/core/dist-es/submodules/protocols/resolve-path.js");






/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/submodules/protocols/requestBuilder.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/submodules/protocols/requestBuilder.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RequestBuilder: () => (/* binding */ RequestBuilder),
/* harmony export */   requestBuilder: () => (/* binding */ requestBuilder)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _resolve_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./resolve-path */ "../node_modules/@smithy/core/dist-es/submodules/protocols/resolve-path.js");


function requestBuilder(input, context) {
    return new RequestBuilder(input, context);
}
class RequestBuilder {
    constructor(input, context) {
        this.input = input;
        this.context = context;
        this.query = {};
        this.method = "";
        this.headers = {};
        this.path = "";
        this.body = null;
        this.hostname = "";
        this.resolvePathStack = [];
    }
    async build() {
        const { hostname, protocol = "https", port, path: basePath } = await this.context.endpoint();
        this.path = basePath;
        for (const resolvePath of this.resolvePathStack) {
            resolvePath(this.path);
        }
        return new _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest({
            protocol,
            hostname: this.hostname || hostname,
            port,
            method: this.method,
            path: this.path,
            query: this.query,
            body: this.body,
            headers: this.headers,
        });
    }
    hn(hostname) {
        this.hostname = hostname;
        return this;
    }
    bp(uriLabel) {
        this.resolvePathStack.push((basePath) => {
            this.path = `${basePath?.endsWith("/") ? basePath.slice(0, -1) : basePath || ""}` + uriLabel;
        });
        return this;
    }
    p(memberName, labelValueProvider, uriLabel, isGreedyLabel) {
        this.resolvePathStack.push((path) => {
            this.path = (0,_resolve_path__WEBPACK_IMPORTED_MODULE_1__.resolvedPath)(path, this.input, memberName, labelValueProvider, uriLabel, isGreedyLabel);
        });
        return this;
    }
    h(headers) {
        this.headers = headers;
        return this;
    }
    q(query) {
        this.query = query;
        return this;
    }
    b(body) {
        this.body = body;
        return this;
    }
    m(method) {
        this.method = method;
        return this;
    }
}


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/submodules/protocols/resolve-path.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/submodules/protocols/resolve-path.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolvedPath: () => (/* binding */ resolvedPath)
/* harmony export */ });
/* harmony import */ var _extended_encode_uri_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./extended-encode-uri-component */ "../node_modules/@smithy/core/dist-es/submodules/protocols/extended-encode-uri-component.js");

const resolvedPath = (resolvedPath, input, memberName, labelValueProvider, uriLabel, isGreedyLabel) => {
    if (input != null && input[memberName] !== undefined) {
        const labelValue = labelValueProvider();
        if (labelValue.length <= 0) {
            throw new Error("Empty value provided for input HTTP label: " + memberName + ".");
        }
        resolvedPath = resolvedPath.replace(uriLabel, isGreedyLabel
            ? labelValue
                .split("/")
                .map((segment) => (0,_extended_encode_uri_component__WEBPACK_IMPORTED_MODULE_0__.extendedEncodeURIComponent)(segment))
                .join("/")
            : (0,_extended_encode_uri_component__WEBPACK_IMPORTED_MODULE_0__.extendedEncodeURIComponent)(labelValue));
    }
    else {
        throw new Error("No value provided for input HTTP label: " + memberName + ".");
    }
    return resolvedPath;
};


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/DefaultIdentityProviderConfig.js":
/*!****************************************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/util-identity-and-auth/DefaultIdentityProviderConfig.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DefaultIdentityProviderConfig: () => (/* binding */ DefaultIdentityProviderConfig)
/* harmony export */ });
class DefaultIdentityProviderConfig {
    constructor(config) {
        this.authSchemes = new Map();
        for (const [key, value] of Object.entries(config)) {
            if (value !== undefined) {
                this.authSchemes.set(key, value);
            }
        }
    }
    getIdentityProvider(schemeId) {
        return this.authSchemes.get(schemeId);
    }
}


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/httpAuthSchemes/httpApiKeyAuth.js":
/*!*****************************************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/util-identity-and-auth/httpAuthSchemes/httpApiKeyAuth.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpApiKeyAuthSigner: () => (/* binding */ HttpApiKeyAuthSigner)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/types */ "../node_modules/@smithy/types/dist-es/index.js");


class HttpApiKeyAuthSigner {
    async sign(httpRequest, identity, signingProperties) {
        if (!signingProperties) {
            throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");
        }
        if (!signingProperties.name) {
            throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");
        }
        if (!signingProperties.in) {
            throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");
        }
        if (!identity.apiKey) {
            throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");
        }
        const clonedRequest = _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.clone(httpRequest);
        if (signingProperties.in === _smithy_types__WEBPACK_IMPORTED_MODULE_1__.HttpApiKeyAuthLocation.QUERY) {
            clonedRequest.query[signingProperties.name] = identity.apiKey;
        }
        else if (signingProperties.in === _smithy_types__WEBPACK_IMPORTED_MODULE_1__.HttpApiKeyAuthLocation.HEADER) {
            clonedRequest.headers[signingProperties.name] = signingProperties.scheme
                ? `${signingProperties.scheme} ${identity.apiKey}`
                : identity.apiKey;
        }
        else {
            throw new Error("request can only be signed with `apiKey` locations `query` or `header`, " +
                "but found: `" +
                signingProperties.in +
                "`");
        }
        return clonedRequest;
    }
}


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/httpAuthSchemes/httpBearerAuth.js":
/*!*****************************************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/util-identity-and-auth/httpAuthSchemes/httpBearerAuth.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpBearerAuthSigner: () => (/* binding */ HttpBearerAuthSigner)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");

class HttpBearerAuthSigner {
    async sign(httpRequest, identity, signingProperties) {
        const clonedRequest = _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.clone(httpRequest);
        if (!identity.token) {
            throw new Error("request could not be signed with `token` since the `token` is not defined");
        }
        clonedRequest.headers["Authorization"] = `Bearer ${identity.token}`;
        return clonedRequest;
    }
}


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/httpAuthSchemes/index.js":
/*!********************************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/util-identity-and-auth/httpAuthSchemes/index.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpApiKeyAuthSigner: () => (/* reexport safe */ _httpApiKeyAuth__WEBPACK_IMPORTED_MODULE_0__.HttpApiKeyAuthSigner),
/* harmony export */   HttpBearerAuthSigner: () => (/* reexport safe */ _httpBearerAuth__WEBPACK_IMPORTED_MODULE_1__.HttpBearerAuthSigner),
/* harmony export */   NoAuthSigner: () => (/* reexport safe */ _noAuth__WEBPACK_IMPORTED_MODULE_2__.NoAuthSigner)
/* harmony export */ });
/* harmony import */ var _httpApiKeyAuth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./httpApiKeyAuth */ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/httpAuthSchemes/httpApiKeyAuth.js");
/* harmony import */ var _httpBearerAuth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./httpBearerAuth */ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/httpAuthSchemes/httpBearerAuth.js");
/* harmony import */ var _noAuth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./noAuth */ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/httpAuthSchemes/noAuth.js");





/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/httpAuthSchemes/noAuth.js":
/*!*********************************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/util-identity-and-auth/httpAuthSchemes/noAuth.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NoAuthSigner: () => (/* binding */ NoAuthSigner)
/* harmony export */ });
class NoAuthSigner {
    async sign(httpRequest, identity, signingProperties) {
        return httpRequest;
    }
}


/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/index.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/util-identity-and-auth/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DefaultIdentityProviderConfig: () => (/* reexport safe */ _DefaultIdentityProviderConfig__WEBPACK_IMPORTED_MODULE_0__.DefaultIdentityProviderConfig),
/* harmony export */   EXPIRATION_MS: () => (/* reexport safe */ _memoizeIdentityProvider__WEBPACK_IMPORTED_MODULE_2__.EXPIRATION_MS),
/* harmony export */   HttpApiKeyAuthSigner: () => (/* reexport safe */ _httpAuthSchemes__WEBPACK_IMPORTED_MODULE_1__.HttpApiKeyAuthSigner),
/* harmony export */   HttpBearerAuthSigner: () => (/* reexport safe */ _httpAuthSchemes__WEBPACK_IMPORTED_MODULE_1__.HttpBearerAuthSigner),
/* harmony export */   NoAuthSigner: () => (/* reexport safe */ _httpAuthSchemes__WEBPACK_IMPORTED_MODULE_1__.NoAuthSigner),
/* harmony export */   createIsIdentityExpiredFunction: () => (/* reexport safe */ _memoizeIdentityProvider__WEBPACK_IMPORTED_MODULE_2__.createIsIdentityExpiredFunction),
/* harmony export */   doesIdentityRequireRefresh: () => (/* reexport safe */ _memoizeIdentityProvider__WEBPACK_IMPORTED_MODULE_2__.doesIdentityRequireRefresh),
/* harmony export */   isIdentityExpired: () => (/* reexport safe */ _memoizeIdentityProvider__WEBPACK_IMPORTED_MODULE_2__.isIdentityExpired),
/* harmony export */   memoizeIdentityProvider: () => (/* reexport safe */ _memoizeIdentityProvider__WEBPACK_IMPORTED_MODULE_2__.memoizeIdentityProvider)
/* harmony export */ });
/* harmony import */ var _DefaultIdentityProviderConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DefaultIdentityProviderConfig */ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/DefaultIdentityProviderConfig.js");
/* harmony import */ var _httpAuthSchemes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./httpAuthSchemes */ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/httpAuthSchemes/index.js");
/* harmony import */ var _memoizeIdentityProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./memoizeIdentityProvider */ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/memoizeIdentityProvider.js");





/***/ }),

/***/ "../node_modules/@smithy/core/dist-es/util-identity-and-auth/memoizeIdentityProvider.js":
/*!**********************************************************************************************!*\
  !*** ../node_modules/@smithy/core/dist-es/util-identity-and-auth/memoizeIdentityProvider.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EXPIRATION_MS: () => (/* binding */ EXPIRATION_MS),
/* harmony export */   createIsIdentityExpiredFunction: () => (/* binding */ createIsIdentityExpiredFunction),
/* harmony export */   doesIdentityRequireRefresh: () => (/* binding */ doesIdentityRequireRefresh),
/* harmony export */   isIdentityExpired: () => (/* binding */ isIdentityExpired),
/* harmony export */   memoizeIdentityProvider: () => (/* binding */ memoizeIdentityProvider)
/* harmony export */ });
const createIsIdentityExpiredFunction = (expirationMs) => (identity) => doesIdentityRequireRefresh(identity) && identity.expiration.getTime() - Date.now() < expirationMs;
const EXPIRATION_MS = 300000;
const isIdentityExpired = createIsIdentityExpiredFunction(EXPIRATION_MS);
const doesIdentityRequireRefresh = (identity) => identity.expiration !== undefined;
const memoizeIdentityProvider = (provider, isExpired, requiresRefresh) => {
    if (provider === undefined) {
        return undefined;
    }
    const normalizedProvider = typeof provider !== "function" ? async () => Promise.resolve(provider) : provider;
    let resolved;
    let pending;
    let hasResult;
    let isConstant = false;
    const coalesceProvider = async (options) => {
        if (!pending) {
            pending = normalizedProvider(options);
        }
        try {
            resolved = await pending;
            hasResult = true;
            isConstant = false;
        }
        finally {
            pending = undefined;
        }
        return resolved;
    };
    if (isExpired === undefined) {
        return async (options) => {
            if (!hasResult || options?.forceRefresh) {
                resolved = await coalesceProvider(options);
            }
            return resolved;
        };
    }
    return async (options) => {
        if (!hasResult || options?.forceRefresh) {
            resolved = await coalesceProvider(options);
        }
        if (isConstant) {
            return resolved;
        }
        if (!requiresRefresh(resolved)) {
            isConstant = true;
            return resolved;
        }
        if (isExpired(resolved)) {
            await coalesceProvider(options);
            return resolved;
        }
        return resolved;
    };
};


/***/ }),

/***/ "../node_modules/@smithy/eventstream-codec/dist-es/EventStreamCodec.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-codec/dist-es/EventStreamCodec.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStreamCodec: () => (/* binding */ EventStreamCodec)
/* harmony export */ });
/* harmony import */ var _aws_crypto_crc32__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/crc32 */ "../node_modules/@aws-crypto/crc32/build/module/index.js");
/* harmony import */ var _HeaderMarshaller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./HeaderMarshaller */ "../node_modules/@smithy/eventstream-codec/dist-es/HeaderMarshaller.js");
/* harmony import */ var _splitMessage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./splitMessage */ "../node_modules/@smithy/eventstream-codec/dist-es/splitMessage.js");



class EventStreamCodec {
    constructor(toUtf8, fromUtf8) {
        this.headerMarshaller = new _HeaderMarshaller__WEBPACK_IMPORTED_MODULE_1__.HeaderMarshaller(toUtf8, fromUtf8);
        this.messageBuffer = [];
        this.isEndOfStream = false;
    }
    feed(message) {
        this.messageBuffer.push(this.decode(message));
    }
    endOfStream() {
        this.isEndOfStream = true;
    }
    getMessage() {
        const message = this.messageBuffer.pop();
        const isEndOfStream = this.isEndOfStream;
        return {
            getMessage() {
                return message;
            },
            isEndOfStream() {
                return isEndOfStream;
            },
        };
    }
    getAvailableMessages() {
        const messages = this.messageBuffer;
        this.messageBuffer = [];
        const isEndOfStream = this.isEndOfStream;
        return {
            getMessages() {
                return messages;
            },
            isEndOfStream() {
                return isEndOfStream;
            },
        };
    }
    encode({ headers: rawHeaders, body }) {
        const headers = this.headerMarshaller.format(rawHeaders);
        const length = headers.byteLength + body.byteLength + 16;
        const out = new Uint8Array(length);
        const view = new DataView(out.buffer, out.byteOffset, out.byteLength);
        const checksum = new _aws_crypto_crc32__WEBPACK_IMPORTED_MODULE_0__.Crc32();
        view.setUint32(0, length, false);
        view.setUint32(4, headers.byteLength, false);
        view.setUint32(8, checksum.update(out.subarray(0, 8)).digest(), false);
        out.set(headers, 12);
        out.set(body, headers.byteLength + 12);
        view.setUint32(length - 4, checksum.update(out.subarray(8, length - 4)).digest(), false);
        return out;
    }
    decode(message) {
        const { headers, body } = (0,_splitMessage__WEBPACK_IMPORTED_MODULE_2__.splitMessage)(message);
        return { headers: this.headerMarshaller.parse(headers), body };
    }
    formatHeaders(rawHeaders) {
        return this.headerMarshaller.format(rawHeaders);
    }
}


/***/ }),

/***/ "../node_modules/@smithy/eventstream-codec/dist-es/HeaderMarshaller.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-codec/dist-es/HeaderMarshaller.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HeaderMarshaller: () => (/* binding */ HeaderMarshaller)
/* harmony export */ });
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _Int64__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Int64 */ "../node_modules/@smithy/eventstream-codec/dist-es/Int64.js");


class HeaderMarshaller {
    constructor(toUtf8, fromUtf8) {
        this.toUtf8 = toUtf8;
        this.fromUtf8 = fromUtf8;
    }
    format(headers) {
        const chunks = [];
        for (const headerName of Object.keys(headers)) {
            const bytes = this.fromUtf8(headerName);
            chunks.push(Uint8Array.from([bytes.byteLength]), bytes, this.formatHeaderValue(headers[headerName]));
        }
        const out = new Uint8Array(chunks.reduce((carry, bytes) => carry + bytes.byteLength, 0));
        let position = 0;
        for (const chunk of chunks) {
            out.set(chunk, position);
            position += chunk.byteLength;
        }
        return out;
    }
    formatHeaderValue(header) {
        switch (header.type) {
            case "boolean":
                return Uint8Array.from([header.value ? 0 : 1]);
            case "byte":
                return Uint8Array.from([2, header.value]);
            case "short":
                const shortView = new DataView(new ArrayBuffer(3));
                shortView.setUint8(0, 3);
                shortView.setInt16(1, header.value, false);
                return new Uint8Array(shortView.buffer);
            case "integer":
                const intView = new DataView(new ArrayBuffer(5));
                intView.setUint8(0, 4);
                intView.setInt32(1, header.value, false);
                return new Uint8Array(intView.buffer);
            case "long":
                const longBytes = new Uint8Array(9);
                longBytes[0] = 5;
                longBytes.set(header.value.bytes, 1);
                return longBytes;
            case "binary":
                const binView = new DataView(new ArrayBuffer(3 + header.value.byteLength));
                binView.setUint8(0, 6);
                binView.setUint16(1, header.value.byteLength, false);
                const binBytes = new Uint8Array(binView.buffer);
                binBytes.set(header.value, 3);
                return binBytes;
            case "string":
                const utf8Bytes = this.fromUtf8(header.value);
                const strView = new DataView(new ArrayBuffer(3 + utf8Bytes.byteLength));
                strView.setUint8(0, 7);
                strView.setUint16(1, utf8Bytes.byteLength, false);
                const strBytes = new Uint8Array(strView.buffer);
                strBytes.set(utf8Bytes, 3);
                return strBytes;
            case "timestamp":
                const tsBytes = new Uint8Array(9);
                tsBytes[0] = 8;
                tsBytes.set(_Int64__WEBPACK_IMPORTED_MODULE_1__.Int64.fromNumber(header.value.valueOf()).bytes, 1);
                return tsBytes;
            case "uuid":
                if (!UUID_PATTERN.test(header.value)) {
                    throw new Error(`Invalid UUID received: ${header.value}`);
                }
                const uuidBytes = new Uint8Array(17);
                uuidBytes[0] = 9;
                uuidBytes.set((0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.fromHex)(header.value.replace(/\-/g, "")), 1);
                return uuidBytes;
        }
    }
    parse(headers) {
        const out = {};
        let position = 0;
        while (position < headers.byteLength) {
            const nameLength = headers.getUint8(position++);
            const name = this.toUtf8(new Uint8Array(headers.buffer, headers.byteOffset + position, nameLength));
            position += nameLength;
            switch (headers.getUint8(position++)) {
                case 0:
                    out[name] = {
                        type: BOOLEAN_TAG,
                        value: true,
                    };
                    break;
                case 1:
                    out[name] = {
                        type: BOOLEAN_TAG,
                        value: false,
                    };
                    break;
                case 2:
                    out[name] = {
                        type: BYTE_TAG,
                        value: headers.getInt8(position++),
                    };
                    break;
                case 3:
                    out[name] = {
                        type: SHORT_TAG,
                        value: headers.getInt16(position, false),
                    };
                    position += 2;
                    break;
                case 4:
                    out[name] = {
                        type: INT_TAG,
                        value: headers.getInt32(position, false),
                    };
                    position += 4;
                    break;
                case 5:
                    out[name] = {
                        type: LONG_TAG,
                        value: new _Int64__WEBPACK_IMPORTED_MODULE_1__.Int64(new Uint8Array(headers.buffer, headers.byteOffset + position, 8)),
                    };
                    position += 8;
                    break;
                case 6:
                    const binaryLength = headers.getUint16(position, false);
                    position += 2;
                    out[name] = {
                        type: BINARY_TAG,
                        value: new Uint8Array(headers.buffer, headers.byteOffset + position, binaryLength),
                    };
                    position += binaryLength;
                    break;
                case 7:
                    const stringLength = headers.getUint16(position, false);
                    position += 2;
                    out[name] = {
                        type: STRING_TAG,
                        value: this.toUtf8(new Uint8Array(headers.buffer, headers.byteOffset + position, stringLength)),
                    };
                    position += stringLength;
                    break;
                case 8:
                    out[name] = {
                        type: TIMESTAMP_TAG,
                        value: new Date(new _Int64__WEBPACK_IMPORTED_MODULE_1__.Int64(new Uint8Array(headers.buffer, headers.byteOffset + position, 8)).valueOf()),
                    };
                    position += 8;
                    break;
                case 9:
                    const uuidBytes = new Uint8Array(headers.buffer, headers.byteOffset + position, 16);
                    position += 16;
                    out[name] = {
                        type: UUID_TAG,
                        value: `${(0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.toHex)(uuidBytes.subarray(0, 4))}-${(0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.toHex)(uuidBytes.subarray(4, 6))}-${(0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.toHex)(uuidBytes.subarray(6, 8))}-${(0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.toHex)(uuidBytes.subarray(8, 10))}-${(0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.toHex)(uuidBytes.subarray(10))}`,
                    };
                    break;
                default:
                    throw new Error(`Unrecognized header type tag`);
            }
        }
        return out;
    }
}
var HEADER_VALUE_TYPE;
(function (HEADER_VALUE_TYPE) {
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["boolTrue"] = 0] = "boolTrue";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["boolFalse"] = 1] = "boolFalse";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["byte"] = 2] = "byte";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["short"] = 3] = "short";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["integer"] = 4] = "integer";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["long"] = 5] = "long";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["byteArray"] = 6] = "byteArray";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["string"] = 7] = "string";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["timestamp"] = 8] = "timestamp";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["uuid"] = 9] = "uuid";
})(HEADER_VALUE_TYPE || (HEADER_VALUE_TYPE = {}));
const BOOLEAN_TAG = "boolean";
const BYTE_TAG = "byte";
const SHORT_TAG = "short";
const INT_TAG = "integer";
const LONG_TAG = "long";
const BINARY_TAG = "binary";
const STRING_TAG = "string";
const TIMESTAMP_TAG = "timestamp";
const UUID_TAG = "uuid";
const UUID_PATTERN = /^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;


/***/ }),

/***/ "../node_modules/@smithy/eventstream-codec/dist-es/Int64.js":
/*!******************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-codec/dist-es/Int64.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Int64: () => (/* binding */ Int64)
/* harmony export */ });
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../node_modules/@smithy/util-hex-encoding/dist-es/index.js");

class Int64 {
    constructor(bytes) {
        this.bytes = bytes;
        if (bytes.byteLength !== 8) {
            throw new Error("Int64 buffers must be exactly 8 bytes");
        }
    }
    static fromNumber(number) {
        if (number > 9223372036854776000 || number < -9223372036854776000) {
            throw new Error(`${number} is too large (or, if negative, too small) to represent as an Int64`);
        }
        const bytes = new Uint8Array(8);
        for (let i = 7, remaining = Math.abs(Math.round(number)); i > -1 && remaining > 0; i--, remaining /= 256) {
            bytes[i] = remaining;
        }
        if (number < 0) {
            negate(bytes);
        }
        return new Int64(bytes);
    }
    valueOf() {
        const bytes = this.bytes.slice(0);
        const negative = bytes[0] & 0b10000000;
        if (negative) {
            negate(bytes);
        }
        return parseInt((0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.toHex)(bytes), 16) * (negative ? -1 : 1);
    }
    toString() {
        return String(this.valueOf());
    }
}
function negate(bytes) {
    for (let i = 0; i < 8; i++) {
        bytes[i] ^= 0xff;
    }
    for (let i = 7; i > -1; i--) {
        bytes[i]++;
        if (bytes[i] !== 0)
            break;
    }
}


/***/ }),

/***/ "../node_modules/@smithy/eventstream-codec/dist-es/Message.js":
/*!********************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-codec/dist-es/Message.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/eventstream-codec/dist-es/MessageDecoderStream.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-codec/dist-es/MessageDecoderStream.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageDecoderStream: () => (/* binding */ MessageDecoderStream)
/* harmony export */ });
class MessageDecoderStream {
    constructor(options) {
        this.options = options;
    }
    [Symbol.asyncIterator]() {
        return this.asyncIterator();
    }
    async *asyncIterator() {
        for await (const bytes of this.options.inputStream) {
            const decoded = this.options.decoder.decode(bytes);
            yield decoded;
        }
    }
}


/***/ }),

/***/ "../node_modules/@smithy/eventstream-codec/dist-es/MessageEncoderStream.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-codec/dist-es/MessageEncoderStream.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MessageEncoderStream: () => (/* binding */ MessageEncoderStream)
/* harmony export */ });
class MessageEncoderStream {
    constructor(options) {
        this.options = options;
    }
    [Symbol.asyncIterator]() {
        return this.asyncIterator();
    }
    async *asyncIterator() {
        for await (const msg of this.options.messageStream) {
            const encoded = this.options.encoder.encode(msg);
            yield encoded;
        }
        if (this.options.includeEndFrame) {
            yield new Uint8Array(0);
        }
    }
}


/***/ }),

/***/ "../node_modules/@smithy/eventstream-codec/dist-es/SmithyMessageDecoderStream.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-codec/dist-es/SmithyMessageDecoderStream.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SmithyMessageDecoderStream: () => (/* binding */ SmithyMessageDecoderStream)
/* harmony export */ });
class SmithyMessageDecoderStream {
    constructor(options) {
        this.options = options;
    }
    [Symbol.asyncIterator]() {
        return this.asyncIterator();
    }
    async *asyncIterator() {
        for await (const message of this.options.messageStream) {
            const deserialized = await this.options.deserializer(message);
            if (deserialized === undefined)
                continue;
            yield deserialized;
        }
    }
}


/***/ }),

/***/ "../node_modules/@smithy/eventstream-codec/dist-es/SmithyMessageEncoderStream.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-codec/dist-es/SmithyMessageEncoderStream.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SmithyMessageEncoderStream: () => (/* binding */ SmithyMessageEncoderStream)
/* harmony export */ });
class SmithyMessageEncoderStream {
    constructor(options) {
        this.options = options;
    }
    [Symbol.asyncIterator]() {
        return this.asyncIterator();
    }
    async *asyncIterator() {
        for await (const chunk of this.options.inputStream) {
            const payloadBuf = this.options.serializer(chunk);
            yield payloadBuf;
        }
    }
}


/***/ }),

/***/ "../node_modules/@smithy/eventstream-codec/dist-es/index.js":
/*!******************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-codec/dist-es/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStreamCodec: () => (/* reexport safe */ _EventStreamCodec__WEBPACK_IMPORTED_MODULE_0__.EventStreamCodec),
/* harmony export */   HeaderMarshaller: () => (/* reexport safe */ _HeaderMarshaller__WEBPACK_IMPORTED_MODULE_1__.HeaderMarshaller),
/* harmony export */   Int64: () => (/* reexport safe */ _Int64__WEBPACK_IMPORTED_MODULE_2__.Int64),
/* harmony export */   MessageDecoderStream: () => (/* reexport safe */ _MessageDecoderStream__WEBPACK_IMPORTED_MODULE_4__.MessageDecoderStream),
/* harmony export */   MessageEncoderStream: () => (/* reexport safe */ _MessageEncoderStream__WEBPACK_IMPORTED_MODULE_5__.MessageEncoderStream),
/* harmony export */   SmithyMessageDecoderStream: () => (/* reexport safe */ _SmithyMessageDecoderStream__WEBPACK_IMPORTED_MODULE_6__.SmithyMessageDecoderStream),
/* harmony export */   SmithyMessageEncoderStream: () => (/* reexport safe */ _SmithyMessageEncoderStream__WEBPACK_IMPORTED_MODULE_7__.SmithyMessageEncoderStream)
/* harmony export */ });
/* harmony import */ var _EventStreamCodec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventStreamCodec */ "../node_modules/@smithy/eventstream-codec/dist-es/EventStreamCodec.js");
/* harmony import */ var _HeaderMarshaller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./HeaderMarshaller */ "../node_modules/@smithy/eventstream-codec/dist-es/HeaderMarshaller.js");
/* harmony import */ var _Int64__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Int64 */ "../node_modules/@smithy/eventstream-codec/dist-es/Int64.js");
/* harmony import */ var _Message__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Message */ "../node_modules/@smithy/eventstream-codec/dist-es/Message.js");
/* harmony import */ var _MessageDecoderStream__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MessageDecoderStream */ "../node_modules/@smithy/eventstream-codec/dist-es/MessageDecoderStream.js");
/* harmony import */ var _MessageEncoderStream__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MessageEncoderStream */ "../node_modules/@smithy/eventstream-codec/dist-es/MessageEncoderStream.js");
/* harmony import */ var _SmithyMessageDecoderStream__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SmithyMessageDecoderStream */ "../node_modules/@smithy/eventstream-codec/dist-es/SmithyMessageDecoderStream.js");
/* harmony import */ var _SmithyMessageEncoderStream__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./SmithyMessageEncoderStream */ "../node_modules/@smithy/eventstream-codec/dist-es/SmithyMessageEncoderStream.js");










/***/ }),

/***/ "../node_modules/@smithy/eventstream-codec/dist-es/splitMessage.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-codec/dist-es/splitMessage.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   splitMessage: () => (/* binding */ splitMessage)
/* harmony export */ });
/* harmony import */ var _aws_crypto_crc32__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/crc32 */ "../node_modules/@aws-crypto/crc32/build/module/index.js");

const PRELUDE_MEMBER_LENGTH = 4;
const PRELUDE_LENGTH = PRELUDE_MEMBER_LENGTH * 2;
const CHECKSUM_LENGTH = 4;
const MINIMUM_MESSAGE_LENGTH = PRELUDE_LENGTH + CHECKSUM_LENGTH * 2;
function splitMessage({ byteLength, byteOffset, buffer }) {
    if (byteLength < MINIMUM_MESSAGE_LENGTH) {
        throw new Error("Provided message too short to accommodate event stream message overhead");
    }
    const view = new DataView(buffer, byteOffset, byteLength);
    const messageLength = view.getUint32(0, false);
    if (byteLength !== messageLength) {
        throw new Error("Reported message length does not match received message length");
    }
    const headerLength = view.getUint32(PRELUDE_MEMBER_LENGTH, false);
    const expectedPreludeChecksum = view.getUint32(PRELUDE_LENGTH, false);
    const expectedMessageChecksum = view.getUint32(byteLength - CHECKSUM_LENGTH, false);
    const checksummer = new _aws_crypto_crc32__WEBPACK_IMPORTED_MODULE_0__.Crc32().update(new Uint8Array(buffer, byteOffset, PRELUDE_LENGTH));
    if (expectedPreludeChecksum !== checksummer.digest()) {
        throw new Error(`The prelude checksum specified in the message (${expectedPreludeChecksum}) does not match the calculated CRC32 checksum (${checksummer.digest()})`);
    }
    checksummer.update(new Uint8Array(buffer, byteOffset + PRELUDE_LENGTH, byteLength - (PRELUDE_LENGTH + CHECKSUM_LENGTH)));
    if (expectedMessageChecksum !== checksummer.digest()) {
        throw new Error(`The message checksum (${checksummer.digest()}) did not match the expected value of ${expectedMessageChecksum}`);
    }
    return {
        headers: new DataView(buffer, byteOffset + PRELUDE_LENGTH + CHECKSUM_LENGTH, headerLength),
        body: new Uint8Array(buffer, byteOffset + PRELUDE_LENGTH + CHECKSUM_LENGTH + headerLength, messageLength - headerLength - (PRELUDE_LENGTH + CHECKSUM_LENGTH + CHECKSUM_LENGTH)),
    };
}


/***/ }),

/***/ "../node_modules/@smithy/eventstream-serde-config-resolver/dist-es/EventStreamSerdeConfig.js":
/*!***************************************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-serde-config-resolver/dist-es/EventStreamSerdeConfig.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveEventStreamSerdeConfig: () => (/* binding */ resolveEventStreamSerdeConfig)
/* harmony export */ });
const resolveEventStreamSerdeConfig = (input) => ({
    ...input,
    eventStreamMarshaller: input.eventStreamSerdeProvider(input),
});


/***/ }),

/***/ "../node_modules/@smithy/eventstream-serde-config-resolver/dist-es/index.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-serde-config-resolver/dist-es/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveEventStreamSerdeConfig: () => (/* reexport safe */ _EventStreamSerdeConfig__WEBPACK_IMPORTED_MODULE_0__.resolveEventStreamSerdeConfig)
/* harmony export */ });
/* harmony import */ var _EventStreamSerdeConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventStreamSerdeConfig */ "../node_modules/@smithy/eventstream-serde-config-resolver/dist-es/EventStreamSerdeConfig.js");



/***/ }),

/***/ "../node_modules/@smithy/eventstream-serde-node/dist-es/EventStreamMarshaller.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-serde-node/dist-es/EventStreamMarshaller.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStreamMarshaller: () => (/* binding */ EventStreamMarshaller)
/* harmony export */ });
/* harmony import */ var _smithy_eventstream_serde_universal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/eventstream-serde-universal */ "../node_modules/@smithy/eventstream-serde-universal/dist-es/index.js");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! stream */ "stream");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "../node_modules/@smithy/eventstream-serde-node/dist-es/utils.js");



class EventStreamMarshaller {
    constructor({ utf8Encoder, utf8Decoder }) {
        this.universalMarshaller = new _smithy_eventstream_serde_universal__WEBPACK_IMPORTED_MODULE_0__.EventStreamMarshaller({
            utf8Decoder,
            utf8Encoder,
        });
    }
    deserialize(body, deserializer) {
        const bodyIterable = typeof body[Symbol.asyncIterator] === "function" ? body : (0,_utils__WEBPACK_IMPORTED_MODULE_2__.readabletoIterable)(body);
        return this.universalMarshaller.deserialize(bodyIterable, deserializer);
    }
    serialize(input, serializer) {
        return stream__WEBPACK_IMPORTED_MODULE_1__.Readable.from(this.universalMarshaller.serialize(input, serializer));
    }
}


/***/ }),

/***/ "../node_modules/@smithy/eventstream-serde-node/dist-es/index.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-serde-node/dist-es/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStreamMarshaller: () => (/* reexport safe */ _EventStreamMarshaller__WEBPACK_IMPORTED_MODULE_0__.EventStreamMarshaller),
/* harmony export */   eventStreamSerdeProvider: () => (/* reexport safe */ _provider__WEBPACK_IMPORTED_MODULE_1__.eventStreamSerdeProvider)
/* harmony export */ });
/* harmony import */ var _EventStreamMarshaller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventStreamMarshaller */ "../node_modules/@smithy/eventstream-serde-node/dist-es/EventStreamMarshaller.js");
/* harmony import */ var _provider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./provider */ "../node_modules/@smithy/eventstream-serde-node/dist-es/provider.js");




/***/ }),

/***/ "../node_modules/@smithy/eventstream-serde-node/dist-es/provider.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-serde-node/dist-es/provider.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   eventStreamSerdeProvider: () => (/* binding */ eventStreamSerdeProvider)
/* harmony export */ });
/* harmony import */ var _EventStreamMarshaller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventStreamMarshaller */ "../node_modules/@smithy/eventstream-serde-node/dist-es/EventStreamMarshaller.js");

const eventStreamSerdeProvider = (options) => new _EventStreamMarshaller__WEBPACK_IMPORTED_MODULE_0__.EventStreamMarshaller(options);


/***/ }),

/***/ "../node_modules/@smithy/eventstream-serde-node/dist-es/utils.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-serde-node/dist-es/utils.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   readabletoIterable: () => (/* binding */ readabletoIterable)
/* harmony export */ });
async function* readabletoIterable(readStream) {
    let streamEnded = false;
    let generationEnded = false;
    const records = new Array();
    readStream.on("error", (err) => {
        if (!streamEnded) {
            streamEnded = true;
        }
        if (err) {
            throw err;
        }
    });
    readStream.on("data", (data) => {
        records.push(data);
    });
    readStream.on("end", () => {
        streamEnded = true;
    });
    while (!generationEnded) {
        const value = await new Promise((resolve) => setTimeout(() => resolve(records.shift()), 0));
        if (value) {
            yield value;
        }
        generationEnded = streamEnded && records.length === 0;
    }
}


/***/ }),

/***/ "../node_modules/@smithy/eventstream-serde-universal/dist-es/EventStreamMarshaller.js":
/*!********************************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-serde-universal/dist-es/EventStreamMarshaller.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStreamMarshaller: () => (/* binding */ EventStreamMarshaller)
/* harmony export */ });
/* harmony import */ var _smithy_eventstream_codec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/eventstream-codec */ "../node_modules/@smithy/eventstream-codec/dist-es/index.js");
/* harmony import */ var _getChunkedStream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getChunkedStream */ "../node_modules/@smithy/eventstream-serde-universal/dist-es/getChunkedStream.js");
/* harmony import */ var _getUnmarshalledStream__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getUnmarshalledStream */ "../node_modules/@smithy/eventstream-serde-universal/dist-es/getUnmarshalledStream.js");



class EventStreamMarshaller {
    constructor({ utf8Encoder, utf8Decoder }) {
        this.eventStreamCodec = new _smithy_eventstream_codec__WEBPACK_IMPORTED_MODULE_0__.EventStreamCodec(utf8Encoder, utf8Decoder);
        this.utfEncoder = utf8Encoder;
    }
    deserialize(body, deserializer) {
        const inputStream = (0,_getChunkedStream__WEBPACK_IMPORTED_MODULE_1__.getChunkedStream)(body);
        return new _smithy_eventstream_codec__WEBPACK_IMPORTED_MODULE_0__.SmithyMessageDecoderStream({
            messageStream: new _smithy_eventstream_codec__WEBPACK_IMPORTED_MODULE_0__.MessageDecoderStream({ inputStream, decoder: this.eventStreamCodec }),
            deserializer: (0,_getUnmarshalledStream__WEBPACK_IMPORTED_MODULE_2__.getMessageUnmarshaller)(deserializer, this.utfEncoder),
        });
    }
    serialize(inputStream, serializer) {
        return new _smithy_eventstream_codec__WEBPACK_IMPORTED_MODULE_0__.MessageEncoderStream({
            messageStream: new _smithy_eventstream_codec__WEBPACK_IMPORTED_MODULE_0__.SmithyMessageEncoderStream({ inputStream, serializer }),
            encoder: this.eventStreamCodec,
            includeEndFrame: true,
        });
    }
}


/***/ }),

/***/ "../node_modules/@smithy/eventstream-serde-universal/dist-es/getChunkedStream.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-serde-universal/dist-es/getChunkedStream.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getChunkedStream: () => (/* binding */ getChunkedStream)
/* harmony export */ });
function getChunkedStream(source) {
    let currentMessageTotalLength = 0;
    let currentMessagePendingLength = 0;
    let currentMessage = null;
    let messageLengthBuffer = null;
    const allocateMessage = (size) => {
        if (typeof size !== "number") {
            throw new Error("Attempted to allocate an event message where size was not a number: " + size);
        }
        currentMessageTotalLength = size;
        currentMessagePendingLength = 4;
        currentMessage = new Uint8Array(size);
        const currentMessageView = new DataView(currentMessage.buffer);
        currentMessageView.setUint32(0, size, false);
    };
    const iterator = async function* () {
        const sourceIterator = source[Symbol.asyncIterator]();
        while (true) {
            const { value, done } = await sourceIterator.next();
            if (done) {
                if (!currentMessageTotalLength) {
                    return;
                }
                else if (currentMessageTotalLength === currentMessagePendingLength) {
                    yield currentMessage;
                }
                else {
                    throw new Error("Truncated event message received.");
                }
                return;
            }
            const chunkLength = value.length;
            let currentOffset = 0;
            while (currentOffset < chunkLength) {
                if (!currentMessage) {
                    const bytesRemaining = chunkLength - currentOffset;
                    if (!messageLengthBuffer) {
                        messageLengthBuffer = new Uint8Array(4);
                    }
                    const numBytesForTotal = Math.min(4 - currentMessagePendingLength, bytesRemaining);
                    messageLengthBuffer.set(value.slice(currentOffset, currentOffset + numBytesForTotal), currentMessagePendingLength);
                    currentMessagePendingLength += numBytesForTotal;
                    currentOffset += numBytesForTotal;
                    if (currentMessagePendingLength < 4) {
                        break;
                    }
                    allocateMessage(new DataView(messageLengthBuffer.buffer).getUint32(0, false));
                    messageLengthBuffer = null;
                }
                const numBytesToWrite = Math.min(currentMessageTotalLength - currentMessagePendingLength, chunkLength - currentOffset);
                currentMessage.set(value.slice(currentOffset, currentOffset + numBytesToWrite), currentMessagePendingLength);
                currentMessagePendingLength += numBytesToWrite;
                currentOffset += numBytesToWrite;
                if (currentMessageTotalLength && currentMessageTotalLength === currentMessagePendingLength) {
                    yield currentMessage;
                    currentMessage = null;
                    currentMessageTotalLength = 0;
                    currentMessagePendingLength = 0;
                }
            }
        }
    };
    return {
        [Symbol.asyncIterator]: iterator,
    };
}


/***/ }),

/***/ "../node_modules/@smithy/eventstream-serde-universal/dist-es/getUnmarshalledStream.js":
/*!********************************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-serde-universal/dist-es/getUnmarshalledStream.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getMessageUnmarshaller: () => (/* binding */ getMessageUnmarshaller),
/* harmony export */   getUnmarshalledStream: () => (/* binding */ getUnmarshalledStream)
/* harmony export */ });
function getUnmarshalledStream(source, options) {
    const messageUnmarshaller = getMessageUnmarshaller(options.deserializer, options.toUtf8);
    return {
        [Symbol.asyncIterator]: async function* () {
            for await (const chunk of source) {
                const message = options.eventStreamCodec.decode(chunk);
                const type = await messageUnmarshaller(message);
                if (type === undefined)
                    continue;
                yield type;
            }
        },
    };
}
function getMessageUnmarshaller(deserializer, toUtf8) {
    return async function (message) {
        const { value: messageType } = message.headers[":message-type"];
        if (messageType === "error") {
            const unmodeledError = new Error(message.headers[":error-message"].value || "UnknownError");
            unmodeledError.name = message.headers[":error-code"].value;
            throw unmodeledError;
        }
        else if (messageType === "exception") {
            const code = message.headers[":exception-type"].value;
            const exception = { [code]: message };
            const deserializedException = await deserializer(exception);
            if (deserializedException.$unknown) {
                const error = new Error(toUtf8(message.body));
                error.name = code;
                throw error;
            }
            throw deserializedException[code];
        }
        else if (messageType === "event") {
            const event = {
                [message.headers[":event-type"].value]: message,
            };
            const deserialized = await deserializer(event);
            if (deserialized.$unknown)
                return;
            return deserialized;
        }
        else {
            throw Error(`Unrecognizable event type: ${message.headers[":event-type"].value}`);
        }
    };
}


/***/ }),

/***/ "../node_modules/@smithy/eventstream-serde-universal/dist-es/index.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-serde-universal/dist-es/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventStreamMarshaller: () => (/* reexport safe */ _EventStreamMarshaller__WEBPACK_IMPORTED_MODULE_0__.EventStreamMarshaller),
/* harmony export */   eventStreamSerdeProvider: () => (/* reexport safe */ _provider__WEBPACK_IMPORTED_MODULE_1__.eventStreamSerdeProvider)
/* harmony export */ });
/* harmony import */ var _EventStreamMarshaller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventStreamMarshaller */ "../node_modules/@smithy/eventstream-serde-universal/dist-es/EventStreamMarshaller.js");
/* harmony import */ var _provider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./provider */ "../node_modules/@smithy/eventstream-serde-universal/dist-es/provider.js");




/***/ }),

/***/ "../node_modules/@smithy/eventstream-serde-universal/dist-es/provider.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@smithy/eventstream-serde-universal/dist-es/provider.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   eventStreamSerdeProvider: () => (/* binding */ eventStreamSerdeProvider)
/* harmony export */ });
/* harmony import */ var _EventStreamMarshaller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventStreamMarshaller */ "../node_modules/@smithy/eventstream-serde-universal/dist-es/EventStreamMarshaller.js");

const eventStreamSerdeProvider = (options) => new _EventStreamMarshaller__WEBPACK_IMPORTED_MODULE_0__.EventStreamMarshaller(options);


/***/ }),

/***/ "../node_modules/@smithy/fetch-http-handler/dist-es/create-request.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/fetch-http-handler/dist-es/create-request.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createRequest: () => (/* binding */ createRequest)
/* harmony export */ });
function createRequest(url, requestOptions) {
    return new Request(url, requestOptions);
}


/***/ }),

/***/ "../node_modules/@smithy/fetch-http-handler/dist-es/fetch-http-handler.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@smithy/fetch-http-handler/dist-es/fetch-http-handler.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FetchHttpHandler: () => (/* binding */ FetchHttpHandler),
/* harmony export */   keepAliveSupport: () => (/* binding */ keepAliveSupport)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/querystring-builder */ "../node_modules/@smithy/querystring-builder/dist-es/index.js");
/* harmony import */ var _create_request__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./create-request */ "../node_modules/@smithy/fetch-http-handler/dist-es/create-request.js");
/* harmony import */ var _request_timeout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./request-timeout */ "../node_modules/@smithy/fetch-http-handler/dist-es/request-timeout.js");




const keepAliveSupport = {
    supported: undefined,
};
class FetchHttpHandler {
    static create(instanceOrOptions) {
        if (typeof instanceOrOptions?.handle === "function") {
            return instanceOrOptions;
        }
        return new FetchHttpHandler(instanceOrOptions);
    }
    constructor(options) {
        if (typeof options === "function") {
            this.configProvider = options().then((opts) => opts || {});
        }
        else {
            this.config = options ?? {};
            this.configProvider = Promise.resolve(this.config);
        }
        if (keepAliveSupport.supported === undefined) {
            keepAliveSupport.supported = Boolean(typeof Request !== "undefined" && "keepalive" in (0,_create_request__WEBPACK_IMPORTED_MODULE_2__.createRequest)("https://[::1]"));
        }
    }
    destroy() {
    }
    async handle(request, { abortSignal } = {}) {
        if (!this.config) {
            this.config = await this.configProvider;
        }
        const requestTimeoutInMs = this.config.requestTimeout;
        const keepAlive = this.config.keepAlive === true;
        const credentials = this.config.credentials;
        if (abortSignal?.aborted) {
            const abortError = new Error("Request aborted");
            abortError.name = "AbortError";
            return Promise.reject(abortError);
        }
        let path = request.path;
        const queryString = (0,_smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__.buildQueryString)(request.query || {});
        if (queryString) {
            path += `?${queryString}`;
        }
        if (request.fragment) {
            path += `#${request.fragment}`;
        }
        let auth = "";
        if (request.username != null || request.password != null) {
            const username = request.username ?? "";
            const password = request.password ?? "";
            auth = `${username}:${password}@`;
        }
        const { port, method } = request;
        const url = `${request.protocol}//${auth}${request.hostname}${port ? `:${port}` : ""}${path}`;
        const body = method === "GET" || method === "HEAD" ? undefined : request.body;
        const requestOptions = {
            body,
            headers: new Headers(request.headers),
            method: method,
            credentials,
        };
        if (this.config?.cache) {
            requestOptions.cache = this.config.cache;
        }
        if (body) {
            requestOptions.duplex = "half";
        }
        if (typeof AbortController !== "undefined") {
            requestOptions.signal = abortSignal;
        }
        if (keepAliveSupport.supported) {
            requestOptions.keepalive = keepAlive;
        }
        if (typeof this.config.requestInit === "function") {
            Object.assign(requestOptions, this.config.requestInit(request));
        }
        let removeSignalEventListener = () => { };
        const fetchRequest = (0,_create_request__WEBPACK_IMPORTED_MODULE_2__.createRequest)(url, requestOptions);
        const raceOfPromises = [
            fetch(fetchRequest).then((response) => {
                const fetchHeaders = response.headers;
                const transformedHeaders = {};
                for (const pair of fetchHeaders.entries()) {
                    transformedHeaders[pair[0]] = pair[1];
                }
                const hasReadableStream = response.body != undefined;
                if (!hasReadableStream) {
                    return response.blob().then((body) => ({
                        response: new _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpResponse({
                            headers: transformedHeaders,
                            reason: response.statusText,
                            statusCode: response.status,
                            body,
                        }),
                    }));
                }
                return {
                    response: new _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpResponse({
                        headers: transformedHeaders,
                        reason: response.statusText,
                        statusCode: response.status,
                        body: response.body,
                    }),
                };
            }),
            (0,_request_timeout__WEBPACK_IMPORTED_MODULE_3__.requestTimeout)(requestTimeoutInMs),
        ];
        if (abortSignal) {
            raceOfPromises.push(new Promise((resolve, reject) => {
                const onAbort = () => {
                    const abortError = new Error("Request aborted");
                    abortError.name = "AbortError";
                    reject(abortError);
                };
                if (typeof abortSignal.addEventListener === "function") {
                    const signal = abortSignal;
                    signal.addEventListener("abort", onAbort, { once: true });
                    removeSignalEventListener = () => signal.removeEventListener("abort", onAbort);
                }
                else {
                    abortSignal.onabort = onAbort;
                }
            }));
        }
        return Promise.race(raceOfPromises).finally(removeSignalEventListener);
    }
    updateHttpClientConfig(key, value) {
        this.config = undefined;
        this.configProvider = this.configProvider.then((config) => {
            config[key] = value;
            return config;
        });
    }
    httpHandlerConfigs() {
        return this.config ?? {};
    }
}


/***/ }),

/***/ "../node_modules/@smithy/fetch-http-handler/dist-es/index.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@smithy/fetch-http-handler/dist-es/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FetchHttpHandler: () => (/* reexport safe */ _fetch_http_handler__WEBPACK_IMPORTED_MODULE_0__.FetchHttpHandler),
/* harmony export */   keepAliveSupport: () => (/* reexport safe */ _fetch_http_handler__WEBPACK_IMPORTED_MODULE_0__.keepAliveSupport),
/* harmony export */   streamCollector: () => (/* reexport safe */ _stream_collector__WEBPACK_IMPORTED_MODULE_1__.streamCollector)
/* harmony export */ });
/* harmony import */ var _fetch_http_handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fetch-http-handler */ "../node_modules/@smithy/fetch-http-handler/dist-es/fetch-http-handler.js");
/* harmony import */ var _stream_collector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stream-collector */ "../node_modules/@smithy/fetch-http-handler/dist-es/stream-collector.js");




/***/ }),

/***/ "../node_modules/@smithy/fetch-http-handler/dist-es/request-timeout.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/fetch-http-handler/dist-es/request-timeout.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   requestTimeout: () => (/* binding */ requestTimeout)
/* harmony export */ });
function requestTimeout(timeoutInMs = 0) {
    return new Promise((resolve, reject) => {
        if (timeoutInMs) {
            setTimeout(() => {
                const timeoutError = new Error(`Request did not complete within ${timeoutInMs} ms`);
                timeoutError.name = "TimeoutError";
                reject(timeoutError);
            }, timeoutInMs);
        }
    });
}


/***/ }),

/***/ "../node_modules/@smithy/fetch-http-handler/dist-es/stream-collector.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@smithy/fetch-http-handler/dist-es/stream-collector.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   streamCollector: () => (/* binding */ streamCollector)
/* harmony export */ });
/* harmony import */ var _smithy_util_base64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-base64 */ "../node_modules/@smithy/util-base64/dist-es/index.js");

const streamCollector = async (stream) => {
    if ((typeof Blob === "function" && stream instanceof Blob) || stream.constructor?.name === "Blob") {
        if (Blob.prototype.arrayBuffer !== undefined) {
            return new Uint8Array(await stream.arrayBuffer());
        }
        return collectBlob(stream);
    }
    return collectStream(stream);
};
async function collectBlob(blob) {
    const base64 = await readToBase64(blob);
    const arrayBuffer = (0,_smithy_util_base64__WEBPACK_IMPORTED_MODULE_0__.fromBase64)(base64);
    return new Uint8Array(arrayBuffer);
}
async function collectStream(stream) {
    const chunks = [];
    const reader = stream.getReader();
    let isDone = false;
    let length = 0;
    while (!isDone) {
        const { done, value } = await reader.read();
        if (value) {
            chunks.push(value);
            length += value.length;
        }
        isDone = done;
    }
    const collected = new Uint8Array(length);
    let offset = 0;
    for (const chunk of chunks) {
        collected.set(chunk, offset);
        offset += chunk.length;
    }
    return collected;
}
function readToBase64(blob) {
    return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onloadend = () => {
            if (reader.readyState !== 2) {
                return reject(new Error("Reader aborted too early"));
            }
            const result = (reader.result ?? "");
            const commaIndex = result.indexOf(",");
            const dataOffset = commaIndex > -1 ? commaIndex + 1 : result.length;
            resolve(result.substring(dataOffset));
        };
        reader.onabort = () => reject(new Error("Read aborted"));
        reader.onerror = () => reject(reader.error);
        reader.readAsDataURL(blob);
    });
}


/***/ }),

/***/ "../node_modules/@smithy/hash-node/dist-es/index.js":
/*!**********************************************************!*\
  !*** ../node_modules/@smithy/hash-node/dist-es/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Hash: () => (/* binding */ Hash)
/* harmony export */ });
/* harmony import */ var _smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-buffer-from */ "../node_modules/@smithy/util-buffer-from/dist-es/index.js");
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-utf8 */ "../node_modules/@smithy/util-utf8/dist-es/index.js");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! buffer */ "buffer");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(buffer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! crypto */ "crypto");
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_3__);




class Hash {
    constructor(algorithmIdentifier, secret) {
        this.algorithmIdentifier = algorithmIdentifier;
        this.secret = secret;
        this.reset();
    }
    update(toHash, encoding) {
        this.hash.update((0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_1__.toUint8Array)(castSourceData(toHash, encoding)));
    }
    digest() {
        return Promise.resolve(this.hash.digest());
    }
    reset() {
        this.hash = this.secret
            ? (0,crypto__WEBPACK_IMPORTED_MODULE_3__.createHmac)(this.algorithmIdentifier, castSourceData(this.secret))
            : (0,crypto__WEBPACK_IMPORTED_MODULE_3__.createHash)(this.algorithmIdentifier);
    }
}
function castSourceData(toCast, encoding) {
    if (buffer__WEBPACK_IMPORTED_MODULE_2__.Buffer.isBuffer(toCast)) {
        return toCast;
    }
    if (typeof toCast === "string") {
        return (0,_smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__.fromString)(toCast, encoding);
    }
    if (ArrayBuffer.isView(toCast)) {
        return (0,_smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__.fromArrayBuffer)(toCast.buffer, toCast.byteOffset, toCast.byteLength);
    }
    return (0,_smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__.fromArrayBuffer)(toCast);
}


/***/ }),

/***/ "../node_modules/@smithy/hash-stream-node/dist-es/HashCalculator.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/hash-stream-node/dist-es/HashCalculator.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HashCalculator: () => (/* binding */ HashCalculator)
/* harmony export */ });
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-utf8 */ "../node_modules/@smithy/util-utf8/dist-es/index.js");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! stream */ "stream");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_1__);


class HashCalculator extends stream__WEBPACK_IMPORTED_MODULE_1__.Writable {
    constructor(hash, options) {
        super(options);
        this.hash = hash;
    }
    _write(chunk, encoding, callback) {
        try {
            this.hash.update((0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_0__.toUint8Array)(chunk));
        }
        catch (err) {
            return callback(err);
        }
        callback();
    }
}


/***/ }),

/***/ "../node_modules/@smithy/hash-stream-node/dist-es/fileStreamHasher.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/hash-stream-node/dist-es/fileStreamHasher.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fileStreamHasher: () => (/* binding */ fileStreamHasher)
/* harmony export */ });
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ "fs");
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _HashCalculator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./HashCalculator */ "../node_modules/@smithy/hash-stream-node/dist-es/HashCalculator.js");


const fileStreamHasher = (hashCtor, fileStream) => new Promise((resolve, reject) => {
    if (!isReadStream(fileStream)) {
        reject(new Error("Unable to calculate hash for non-file streams."));
        return;
    }
    const fileStreamTee = (0,fs__WEBPACK_IMPORTED_MODULE_0__.createReadStream)(fileStream.path, {
        start: fileStream.start,
        end: fileStream.end,
    });
    const hash = new hashCtor();
    const hashCalculator = new _HashCalculator__WEBPACK_IMPORTED_MODULE_1__.HashCalculator(hash);
    fileStreamTee.pipe(hashCalculator);
    fileStreamTee.on("error", (err) => {
        hashCalculator.end();
        reject(err);
    });
    hashCalculator.on("error", reject);
    hashCalculator.on("finish", function () {
        hash.digest().then(resolve).catch(reject);
    });
});
const isReadStream = (stream) => typeof stream.path === "string";


/***/ }),

/***/ "../node_modules/@smithy/hash-stream-node/dist-es/index.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/hash-stream-node/dist-es/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fileStreamHasher: () => (/* reexport safe */ _fileStreamHasher__WEBPACK_IMPORTED_MODULE_0__.fileStreamHasher),
/* harmony export */   readableStreamHasher: () => (/* reexport safe */ _readableStreamHasher__WEBPACK_IMPORTED_MODULE_1__.readableStreamHasher)
/* harmony export */ });
/* harmony import */ var _fileStreamHasher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fileStreamHasher */ "../node_modules/@smithy/hash-stream-node/dist-es/fileStreamHasher.js");
/* harmony import */ var _readableStreamHasher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./readableStreamHasher */ "../node_modules/@smithy/hash-stream-node/dist-es/readableStreamHasher.js");




/***/ }),

/***/ "../node_modules/@smithy/hash-stream-node/dist-es/readableStreamHasher.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@smithy/hash-stream-node/dist-es/readableStreamHasher.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   readableStreamHasher: () => (/* binding */ readableStreamHasher)
/* harmony export */ });
/* harmony import */ var _HashCalculator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./HashCalculator */ "../node_modules/@smithy/hash-stream-node/dist-es/HashCalculator.js");

const readableStreamHasher = (hashCtor, readableStream) => {
    if (readableStream.readableFlowing !== null) {
        throw new Error("Unable to calculate hash for flowing readable stream");
    }
    const hash = new hashCtor();
    const hashCalculator = new _HashCalculator__WEBPACK_IMPORTED_MODULE_0__.HashCalculator(hash);
    readableStream.pipe(hashCalculator);
    return new Promise((resolve, reject) => {
        readableStream.on("error", (err) => {
            hashCalculator.end();
            reject(err);
        });
        hashCalculator.on("error", reject);
        hashCalculator.on("finish", () => {
            hash.digest().then(resolve).catch(reject);
        });
    });
};


/***/ }),

/***/ "../node_modules/@smithy/is-array-buffer/dist-es/index.js":
/*!****************************************************************!*\
  !*** ../node_modules/@smithy/is-array-buffer/dist-es/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isArrayBuffer: () => (/* binding */ isArrayBuffer)
/* harmony export */ });
const isArrayBuffer = (arg) => (typeof ArrayBuffer === "function" && arg instanceof ArrayBuffer) ||
    Object.prototype.toString.call(arg) === "[object ArrayBuffer]";


/***/ }),

/***/ "../node_modules/@smithy/middleware-content-length/dist-es/index.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-content-length/dist-es/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   contentLengthMiddleware: () => (/* binding */ contentLengthMiddleware),
/* harmony export */   contentLengthMiddlewareOptions: () => (/* binding */ contentLengthMiddlewareOptions),
/* harmony export */   getContentLengthPlugin: () => (/* binding */ getContentLengthPlugin)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");

const CONTENT_LENGTH_HEADER = "content-length";
function contentLengthMiddleware(bodyLengthChecker) {
    return (next) => async (args) => {
        const request = args.request;
        if (_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(request)) {
            const { body, headers } = request;
            if (body &&
                Object.keys(headers)
                    .map((str) => str.toLowerCase())
                    .indexOf(CONTENT_LENGTH_HEADER) === -1) {
                try {
                    const length = bodyLengthChecker(body);
                    request.headers = {
                        ...request.headers,
                        [CONTENT_LENGTH_HEADER]: String(length),
                    };
                }
                catch (error) {
                }
            }
        }
        return next({
            ...args,
            request,
        });
    };
}
const contentLengthMiddlewareOptions = {
    step: "build",
    tags: ["SET_CONTENT_LENGTH", "CONTENT_LENGTH"],
    name: "contentLengthMiddleware",
    override: true,
};
const getContentLengthPlugin = (options) => ({
    applyToStack: (clientStack) => {
        clientStack.add(contentLengthMiddleware(options.bodyLengthChecker), contentLengthMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/createConfigValueProvider.js":
/*!*************************************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/createConfigValueProvider.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createConfigValueProvider: () => (/* binding */ createConfigValueProvider)
/* harmony export */ });
const createConfigValueProvider = (configKey, canonicalEndpointParamKey, config) => {
    const configProvider = async () => {
        const configValue = config[configKey] ?? config[canonicalEndpointParamKey];
        if (typeof configValue === "function") {
            return configValue();
        }
        return configValue;
    };
    if (configKey === "credentialScope" || canonicalEndpointParamKey === "CredentialScope") {
        return async () => {
            const credentials = typeof config.credentials === "function" ? await config.credentials() : config.credentials;
            const configValue = credentials?.credentialScope ?? credentials?.CredentialScope;
            return configValue;
        };
    }
    if (configKey === "accountId" || canonicalEndpointParamKey === "AccountId") {
        return async () => {
            const credentials = typeof config.credentials === "function" ? await config.credentials() : config.credentials;
            const configValue = credentials?.accountId ?? credentials?.AccountId;
            return configValue;
        };
    }
    if (configKey === "endpoint" || canonicalEndpointParamKey === "endpoint") {
        return async () => {
            const endpoint = await configProvider();
            if (endpoint && typeof endpoint === "object") {
                if ("url" in endpoint) {
                    return endpoint.url.href;
                }
                if ("hostname" in endpoint) {
                    const { protocol, hostname, port, path } = endpoint;
                    return `${protocol}//${hostname}${port ? ":" + port : ""}${path}`;
                }
            }
            return endpoint;
        };
    }
    return configProvider;
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/getEndpointFromConfig.js":
/*!*********************************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/getEndpointFromConfig.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getEndpointFromConfig: () => (/* binding */ getEndpointFromConfig)
/* harmony export */ });
/* harmony import */ var _smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/node-config-provider */ "../node_modules/@smithy/node-config-provider/dist-es/index.js");
/* harmony import */ var _getEndpointUrlConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getEndpointUrlConfig */ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/getEndpointUrlConfig.js");


const getEndpointFromConfig = async (serviceId) => (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_0__.loadConfig)((0,_getEndpointUrlConfig__WEBPACK_IMPORTED_MODULE_1__.getEndpointUrlConfig)(serviceId ?? ""))();


/***/ }),

/***/ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/getEndpointFromInstructions.js":
/*!***************************************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/getEndpointFromInstructions.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getEndpointFromInstructions: () => (/* binding */ getEndpointFromInstructions),
/* harmony export */   resolveParams: () => (/* binding */ resolveParams)
/* harmony export */ });
/* harmony import */ var _service_customizations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../service-customizations */ "../node_modules/@smithy/middleware-endpoint/dist-es/service-customizations/index.js");
/* harmony import */ var _createConfigValueProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./createConfigValueProvider */ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/createConfigValueProvider.js");
/* harmony import */ var _getEndpointFromConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getEndpointFromConfig */ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/getEndpointFromConfig.js");
/* harmony import */ var _toEndpointV1__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./toEndpointV1 */ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/toEndpointV1.js");




const getEndpointFromInstructions = async (commandInput, instructionsSupplier, clientConfig, context) => {
    if (!clientConfig.endpoint) {
        let endpointFromConfig;
        if (clientConfig.serviceConfiguredEndpoint) {
            endpointFromConfig = await clientConfig.serviceConfiguredEndpoint();
        }
        else {
            endpointFromConfig = await (0,_getEndpointFromConfig__WEBPACK_IMPORTED_MODULE_2__.getEndpointFromConfig)(clientConfig.serviceId);
        }
        if (endpointFromConfig) {
            clientConfig.endpoint = () => Promise.resolve((0,_toEndpointV1__WEBPACK_IMPORTED_MODULE_3__.toEndpointV1)(endpointFromConfig));
        }
    }
    const endpointParams = await resolveParams(commandInput, instructionsSupplier, clientConfig);
    if (typeof clientConfig.endpointProvider !== "function") {
        throw new Error("config.endpointProvider is not set.");
    }
    const endpoint = clientConfig.endpointProvider(endpointParams, context);
    return endpoint;
};
const resolveParams = async (commandInput, instructionsSupplier, clientConfig) => {
    const endpointParams = {};
    const instructions = instructionsSupplier?.getEndpointParameterInstructions?.() || {};
    for (const [name, instruction] of Object.entries(instructions)) {
        switch (instruction.type) {
            case "staticContextParams":
                endpointParams[name] = instruction.value;
                break;
            case "contextParams":
                endpointParams[name] = commandInput[instruction.name];
                break;
            case "clientContextParams":
            case "builtInParams":
                endpointParams[name] = await (0,_createConfigValueProvider__WEBPACK_IMPORTED_MODULE_1__.createConfigValueProvider)(instruction.name, name, clientConfig)();
                break;
            case "operationContextParams":
                endpointParams[name] = instruction.get(commandInput);
                break;
            default:
                throw new Error("Unrecognized endpoint parameter instruction: " + JSON.stringify(instruction));
        }
    }
    if (Object.keys(instructions).length === 0) {
        Object.assign(endpointParams, clientConfig);
    }
    if (String(clientConfig.serviceId).toLowerCase() === "s3") {
        await (0,_service_customizations__WEBPACK_IMPORTED_MODULE_0__.resolveParamsForS3)(endpointParams);
    }
    return endpointParams;
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/getEndpointUrlConfig.js":
/*!********************************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/getEndpointUrlConfig.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getEndpointUrlConfig: () => (/* binding */ getEndpointUrlConfig)
/* harmony export */ });
/* harmony import */ var _smithy_shared_ini_file_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/shared-ini-file-loader */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/index.js");

const ENV_ENDPOINT_URL = "AWS_ENDPOINT_URL";
const CONFIG_ENDPOINT_URL = "endpoint_url";
const getEndpointUrlConfig = (serviceId) => ({
    environmentVariableSelector: (env) => {
        const serviceSuffixParts = serviceId.split(" ").map((w) => w.toUpperCase());
        const serviceEndpointUrl = env[[ENV_ENDPOINT_URL, ...serviceSuffixParts].join("_")];
        if (serviceEndpointUrl)
            return serviceEndpointUrl;
        const endpointUrl = env[ENV_ENDPOINT_URL];
        if (endpointUrl)
            return endpointUrl;
        return undefined;
    },
    configFileSelector: (profile, config) => {
        if (config && profile.services) {
            const servicesSection = config[["services", profile.services].join(_smithy_shared_ini_file_loader__WEBPACK_IMPORTED_MODULE_0__.CONFIG_PREFIX_SEPARATOR)];
            if (servicesSection) {
                const servicePrefixParts = serviceId.split(" ").map((w) => w.toLowerCase());
                const endpointUrl = servicesSection[[servicePrefixParts.join("_"), CONFIG_ENDPOINT_URL].join(_smithy_shared_ini_file_loader__WEBPACK_IMPORTED_MODULE_0__.CONFIG_PREFIX_SEPARATOR)];
                if (endpointUrl)
                    return endpointUrl;
            }
        }
        const endpointUrl = profile[CONFIG_ENDPOINT_URL];
        if (endpointUrl)
            return endpointUrl;
        return undefined;
    },
    default: undefined,
});


/***/ }),

/***/ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/index.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getEndpointFromInstructions: () => (/* reexport safe */ _getEndpointFromInstructions__WEBPACK_IMPORTED_MODULE_0__.getEndpointFromInstructions),
/* harmony export */   resolveParams: () => (/* reexport safe */ _getEndpointFromInstructions__WEBPACK_IMPORTED_MODULE_0__.resolveParams),
/* harmony export */   toEndpointV1: () => (/* reexport safe */ _toEndpointV1__WEBPACK_IMPORTED_MODULE_1__.toEndpointV1)
/* harmony export */ });
/* harmony import */ var _getEndpointFromInstructions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getEndpointFromInstructions */ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/getEndpointFromInstructions.js");
/* harmony import */ var _toEndpointV1__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toEndpointV1 */ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/toEndpointV1.js");




/***/ }),

/***/ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/toEndpointV1.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/toEndpointV1.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toEndpointV1: () => (/* binding */ toEndpointV1)
/* harmony export */ });
/* harmony import */ var _smithy_url_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/url-parser */ "../node_modules/@smithy/url-parser/dist-es/index.js");

const toEndpointV1 = (endpoint) => {
    if (typeof endpoint === "object") {
        if ("url" in endpoint) {
            return (0,_smithy_url_parser__WEBPACK_IMPORTED_MODULE_0__.parseUrl)(endpoint.url);
        }
        return endpoint;
    }
    return (0,_smithy_url_parser__WEBPACK_IMPORTED_MODULE_0__.parseUrl)(endpoint);
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-endpoint/dist-es/endpointMiddleware.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-endpoint/dist-es/endpointMiddleware.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   endpointMiddleware: () => (/* binding */ endpointMiddleware)
/* harmony export */ });
/* harmony import */ var _smithy_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/core */ "../node_modules/@smithy/core/dist-es/index.js");
/* harmony import */ var _smithy_util_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-middleware */ "../node_modules/@smithy/util-middleware/dist-es/index.js");
/* harmony import */ var _adaptors_getEndpointFromInstructions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./adaptors/getEndpointFromInstructions */ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/getEndpointFromInstructions.js");



const endpointMiddleware = ({ config, instructions, }) => {
    return (next, context) => async (args) => {
        if (config.endpoint) {
            (0,_smithy_core__WEBPACK_IMPORTED_MODULE_0__.setFeature)(context, "ENDPOINT_OVERRIDE", "N");
        }
        const endpoint = await (0,_adaptors_getEndpointFromInstructions__WEBPACK_IMPORTED_MODULE_2__.getEndpointFromInstructions)(args.input, {
            getEndpointParameterInstructions() {
                return instructions;
            },
        }, { ...config }, context);
        context.endpointV2 = endpoint;
        context.authSchemes = endpoint.properties?.authSchemes;
        const authScheme = context.authSchemes?.[0];
        if (authScheme) {
            context["signing_region"] = authScheme.signingRegion;
            context["signing_service"] = authScheme.signingName;
            const smithyContext = (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_1__.getSmithyContext)(context);
            const httpAuthOption = smithyContext?.selectedHttpAuthScheme?.httpAuthOption;
            if (httpAuthOption) {
                httpAuthOption.signingProperties = Object.assign(httpAuthOption.signingProperties || {}, {
                    signing_region: authScheme.signingRegion,
                    signingRegion: authScheme.signingRegion,
                    signing_service: authScheme.signingName,
                    signingName: authScheme.signingName,
                    signingRegionSet: authScheme.signingRegionSet,
                }, authScheme.properties);
            }
        }
        return next({
            ...args,
        });
    };
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-endpoint/dist-es/getEndpointPlugin.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-endpoint/dist-es/getEndpointPlugin.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   endpointMiddlewareOptions: () => (/* binding */ endpointMiddlewareOptions),
/* harmony export */   getEndpointPlugin: () => (/* binding */ getEndpointPlugin)
/* harmony export */ });
/* harmony import */ var _smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/middleware-serde */ "../node_modules/@smithy/middleware-serde/dist-es/index.js");
/* harmony import */ var _endpointMiddleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./endpointMiddleware */ "../node_modules/@smithy/middleware-endpoint/dist-es/endpointMiddleware.js");


const endpointMiddlewareOptions = {
    step: "serialize",
    tags: ["ENDPOINT_PARAMETERS", "ENDPOINT_V2", "ENDPOINT"],
    name: "endpointV2Middleware",
    override: true,
    relation: "before",
    toMiddleware: _smithy_middleware_serde__WEBPACK_IMPORTED_MODULE_0__.serializerMiddlewareOption.name,
};
const getEndpointPlugin = (config, instructions) => ({
    applyToStack: (clientStack) => {
        clientStack.addRelativeTo((0,_endpointMiddleware__WEBPACK_IMPORTED_MODULE_1__.endpointMiddleware)({
            config,
            instructions,
        }), endpointMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@smithy/middleware-endpoint/dist-es/index.js":
/*!********************************************************************!*\
  !*** ../node_modules/@smithy/middleware-endpoint/dist-es/index.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   endpointMiddleware: () => (/* reexport safe */ _endpointMiddleware__WEBPACK_IMPORTED_MODULE_1__.endpointMiddleware),
/* harmony export */   endpointMiddlewareOptions: () => (/* reexport safe */ _getEndpointPlugin__WEBPACK_IMPORTED_MODULE_2__.endpointMiddlewareOptions),
/* harmony export */   getEndpointFromInstructions: () => (/* reexport safe */ _adaptors__WEBPACK_IMPORTED_MODULE_0__.getEndpointFromInstructions),
/* harmony export */   getEndpointPlugin: () => (/* reexport safe */ _getEndpointPlugin__WEBPACK_IMPORTED_MODULE_2__.getEndpointPlugin),
/* harmony export */   resolveEndpointConfig: () => (/* reexport safe */ _resolveEndpointConfig__WEBPACK_IMPORTED_MODULE_3__.resolveEndpointConfig),
/* harmony export */   resolveParams: () => (/* reexport safe */ _adaptors__WEBPACK_IMPORTED_MODULE_0__.resolveParams),
/* harmony export */   toEndpointV1: () => (/* reexport safe */ _adaptors__WEBPACK_IMPORTED_MODULE_0__.toEndpointV1)
/* harmony export */ });
/* harmony import */ var _adaptors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adaptors */ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/index.js");
/* harmony import */ var _endpointMiddleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./endpointMiddleware */ "../node_modules/@smithy/middleware-endpoint/dist-es/endpointMiddleware.js");
/* harmony import */ var _getEndpointPlugin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getEndpointPlugin */ "../node_modules/@smithy/middleware-endpoint/dist-es/getEndpointPlugin.js");
/* harmony import */ var _resolveEndpointConfig__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./resolveEndpointConfig */ "../node_modules/@smithy/middleware-endpoint/dist-es/resolveEndpointConfig.js");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./types */ "../node_modules/@smithy/middleware-endpoint/dist-es/types.js");







/***/ }),

/***/ "../node_modules/@smithy/middleware-endpoint/dist-es/resolveEndpointConfig.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-endpoint/dist-es/resolveEndpointConfig.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveEndpointConfig: () => (/* binding */ resolveEndpointConfig)
/* harmony export */ });
/* harmony import */ var _smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-middleware */ "../node_modules/@smithy/util-middleware/dist-es/index.js");
/* harmony import */ var _adaptors_getEndpointFromConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./adaptors/getEndpointFromConfig */ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/getEndpointFromConfig.js");
/* harmony import */ var _adaptors_toEndpointV1__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./adaptors/toEndpointV1 */ "../node_modules/@smithy/middleware-endpoint/dist-es/adaptors/toEndpointV1.js");



const resolveEndpointConfig = (input) => {
    const tls = input.tls ?? true;
    const { endpoint } = input;
    const customEndpointProvider = endpoint != null ? async () => (0,_adaptors_toEndpointV1__WEBPACK_IMPORTED_MODULE_2__.toEndpointV1)(await (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(endpoint)()) : undefined;
    const isCustomEndpoint = !!endpoint;
    const resolvedConfig = {
        ...input,
        endpoint: customEndpointProvider,
        tls,
        isCustomEndpoint,
        useDualstackEndpoint: (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(input.useDualstackEndpoint ?? false),
        useFipsEndpoint: (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(input.useFipsEndpoint ?? false),
    };
    let configuredEndpointPromise = undefined;
    resolvedConfig.serviceConfiguredEndpoint = async () => {
        if (input.serviceId && !configuredEndpointPromise) {
            configuredEndpointPromise = (0,_adaptors_getEndpointFromConfig__WEBPACK_IMPORTED_MODULE_1__.getEndpointFromConfig)(input.serviceId);
        }
        return configuredEndpointPromise;
    };
    return resolvedConfig;
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-endpoint/dist-es/service-customizations/index.js":
/*!*******************************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-endpoint/dist-es/service-customizations/index.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DOT_PATTERN: () => (/* reexport safe */ _s3__WEBPACK_IMPORTED_MODULE_0__.DOT_PATTERN),
/* harmony export */   S3_HOSTNAME_PATTERN: () => (/* reexport safe */ _s3__WEBPACK_IMPORTED_MODULE_0__.S3_HOSTNAME_PATTERN),
/* harmony export */   isArnBucketName: () => (/* reexport safe */ _s3__WEBPACK_IMPORTED_MODULE_0__.isArnBucketName),
/* harmony export */   isDnsCompatibleBucketName: () => (/* reexport safe */ _s3__WEBPACK_IMPORTED_MODULE_0__.isDnsCompatibleBucketName),
/* harmony export */   resolveParamsForS3: () => (/* reexport safe */ _s3__WEBPACK_IMPORTED_MODULE_0__.resolveParamsForS3)
/* harmony export */ });
/* harmony import */ var _s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./s3 */ "../node_modules/@smithy/middleware-endpoint/dist-es/service-customizations/s3.js");



/***/ }),

/***/ "../node_modules/@smithy/middleware-endpoint/dist-es/service-customizations/s3.js":
/*!****************************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-endpoint/dist-es/service-customizations/s3.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DOT_PATTERN: () => (/* binding */ DOT_PATTERN),
/* harmony export */   S3_HOSTNAME_PATTERN: () => (/* binding */ S3_HOSTNAME_PATTERN),
/* harmony export */   isArnBucketName: () => (/* binding */ isArnBucketName),
/* harmony export */   isDnsCompatibleBucketName: () => (/* binding */ isDnsCompatibleBucketName),
/* harmony export */   resolveParamsForS3: () => (/* binding */ resolveParamsForS3)
/* harmony export */ });
const resolveParamsForS3 = async (endpointParams) => {
    const bucket = endpointParams?.Bucket || "";
    if (typeof endpointParams.Bucket === "string") {
        endpointParams.Bucket = bucket.replace(/#/g, encodeURIComponent("#")).replace(/\?/g, encodeURIComponent("?"));
    }
    if (isArnBucketName(bucket)) {
        if (endpointParams.ForcePathStyle === true) {
            throw new Error("Path-style addressing cannot be used with ARN buckets");
        }
    }
    else if (!isDnsCompatibleBucketName(bucket) ||
        (bucket.indexOf(".") !== -1 && !String(endpointParams.Endpoint).startsWith("http:")) ||
        bucket.toLowerCase() !== bucket ||
        bucket.length < 3) {
        endpointParams.ForcePathStyle = true;
    }
    if (endpointParams.DisableMultiRegionAccessPoints) {
        endpointParams.disableMultiRegionAccessPoints = true;
        endpointParams.DisableMRAP = true;
    }
    return endpointParams;
};
const DOMAIN_PATTERN = /^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/;
const IP_ADDRESS_PATTERN = /(\d+\.){3}\d+/;
const DOTS_PATTERN = /\.\./;
const DOT_PATTERN = /\./;
const S3_HOSTNAME_PATTERN = /^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./;
const isDnsCompatibleBucketName = (bucketName) => DOMAIN_PATTERN.test(bucketName) && !IP_ADDRESS_PATTERN.test(bucketName) && !DOTS_PATTERN.test(bucketName);
const isArnBucketName = (bucketName) => {
    const [arn, partition, service, , , bucket] = bucketName.split(":");
    const isArn = arn === "arn" && bucketName.split(":").length >= 6;
    const isValidArn = Boolean(isArn && partition && service && bucket);
    if (isArn && !isValidArn) {
        throw new Error(`Invalid ARN: ${bucketName} was an invalid ARN.`);
    }
    return isValidArn;
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-endpoint/dist-es/types.js":
/*!********************************************************************!*\
  !*** ../node_modules/@smithy/middleware-endpoint/dist-es/types.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/middleware-retry/dist-es/AdaptiveRetryStrategy.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-retry/dist-es/AdaptiveRetryStrategy.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AdaptiveRetryStrategy: () => (/* binding */ AdaptiveRetryStrategy)
/* harmony export */ });
/* harmony import */ var _smithy_util_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-retry */ "../node_modules/@smithy/util-retry/dist-es/index.js");
/* harmony import */ var _StandardRetryStrategy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StandardRetryStrategy */ "../node_modules/@smithy/middleware-retry/dist-es/StandardRetryStrategy.js");


class AdaptiveRetryStrategy extends _StandardRetryStrategy__WEBPACK_IMPORTED_MODULE_1__.StandardRetryStrategy {
    constructor(maxAttemptsProvider, options) {
        const { rateLimiter, ...superOptions } = options ?? {};
        super(maxAttemptsProvider, superOptions);
        this.rateLimiter = rateLimiter ?? new _smithy_util_retry__WEBPACK_IMPORTED_MODULE_0__.DefaultRateLimiter();
        this.mode = _smithy_util_retry__WEBPACK_IMPORTED_MODULE_0__.RETRY_MODES.ADAPTIVE;
    }
    async retry(next, args) {
        return super.retry(next, args, {
            beforeRequest: async () => {
                return this.rateLimiter.getSendToken();
            },
            afterRequest: (response) => {
                this.rateLimiter.updateClientSendingRate(response);
            },
        });
    }
}


/***/ }),

/***/ "../node_modules/@smithy/middleware-retry/dist-es/StandardRetryStrategy.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-retry/dist-es/StandardRetryStrategy.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StandardRetryStrategy: () => (/* binding */ StandardRetryStrategy)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_service_error_classification__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/service-error-classification */ "../node_modules/@smithy/service-error-classification/dist-es/index.js");
/* harmony import */ var _smithy_util_retry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/util-retry */ "../node_modules/@smithy/util-retry/dist-es/index.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ "uuid");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _defaultRetryQuota__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./defaultRetryQuota */ "../node_modules/@smithy/middleware-retry/dist-es/defaultRetryQuota.js");
/* harmony import */ var _delayDecider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./delayDecider */ "../node_modules/@smithy/middleware-retry/dist-es/delayDecider.js");
/* harmony import */ var _retryDecider__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./retryDecider */ "../node_modules/@smithy/middleware-retry/dist-es/retryDecider.js");
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./util */ "../node_modules/@smithy/middleware-retry/dist-es/util.js");








class StandardRetryStrategy {
    constructor(maxAttemptsProvider, options) {
        this.maxAttemptsProvider = maxAttemptsProvider;
        this.mode = _smithy_util_retry__WEBPACK_IMPORTED_MODULE_2__.RETRY_MODES.STANDARD;
        this.retryDecider = options?.retryDecider ?? _retryDecider__WEBPACK_IMPORTED_MODULE_6__.defaultRetryDecider;
        this.delayDecider = options?.delayDecider ?? _delayDecider__WEBPACK_IMPORTED_MODULE_5__.defaultDelayDecider;
        this.retryQuota = options?.retryQuota ?? (0,_defaultRetryQuota__WEBPACK_IMPORTED_MODULE_4__.getDefaultRetryQuota)(_smithy_util_retry__WEBPACK_IMPORTED_MODULE_2__.INITIAL_RETRY_TOKENS);
    }
    shouldRetry(error, attempts, maxAttempts) {
        return attempts < maxAttempts && this.retryDecider(error) && this.retryQuota.hasRetryTokens(error);
    }
    async getMaxAttempts() {
        let maxAttempts;
        try {
            maxAttempts = await this.maxAttemptsProvider();
        }
        catch (error) {
            maxAttempts = _smithy_util_retry__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_MAX_ATTEMPTS;
        }
        return maxAttempts;
    }
    async retry(next, args, options) {
        let retryTokenAmount;
        let attempts = 0;
        let totalDelay = 0;
        const maxAttempts = await this.getMaxAttempts();
        const { request } = args;
        if (_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(request)) {
            request.headers[_smithy_util_retry__WEBPACK_IMPORTED_MODULE_2__.INVOCATION_ID_HEADER] = (0,uuid__WEBPACK_IMPORTED_MODULE_3__.v4)();
        }
        while (true) {
            try {
                if (_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(request)) {
                    request.headers[_smithy_util_retry__WEBPACK_IMPORTED_MODULE_2__.REQUEST_HEADER] = `attempt=${attempts + 1}; max=${maxAttempts}`;
                }
                if (options?.beforeRequest) {
                    await options.beforeRequest();
                }
                const { response, output } = await next(args);
                if (options?.afterRequest) {
                    options.afterRequest(response);
                }
                this.retryQuota.releaseRetryTokens(retryTokenAmount);
                output.$metadata.attempts = attempts + 1;
                output.$metadata.totalRetryDelay = totalDelay;
                return { response, output };
            }
            catch (e) {
                const err = (0,_util__WEBPACK_IMPORTED_MODULE_7__.asSdkError)(e);
                attempts++;
                if (this.shouldRetry(err, attempts, maxAttempts)) {
                    retryTokenAmount = this.retryQuota.retrieveRetryTokens(err);
                    const delayFromDecider = this.delayDecider((0,_smithy_service_error_classification__WEBPACK_IMPORTED_MODULE_1__.isThrottlingError)(err) ? _smithy_util_retry__WEBPACK_IMPORTED_MODULE_2__.THROTTLING_RETRY_DELAY_BASE : _smithy_util_retry__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_RETRY_DELAY_BASE, attempts);
                    const delayFromResponse = getDelayFromRetryAfterHeader(err.$response);
                    const delay = Math.max(delayFromResponse || 0, delayFromDecider);
                    totalDelay += delay;
                    await new Promise((resolve) => setTimeout(resolve, delay));
                    continue;
                }
                if (!err.$metadata) {
                    err.$metadata = {};
                }
                err.$metadata.attempts = attempts;
                err.$metadata.totalRetryDelay = totalDelay;
                throw err;
            }
        }
    }
}
const getDelayFromRetryAfterHeader = (response) => {
    if (!_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpResponse.isInstance(response))
        return;
    const retryAfterHeaderName = Object.keys(response.headers).find((key) => key.toLowerCase() === "retry-after");
    if (!retryAfterHeaderName)
        return;
    const retryAfter = response.headers[retryAfterHeaderName];
    const retryAfterSeconds = Number(retryAfter);
    if (!Number.isNaN(retryAfterSeconds))
        return retryAfterSeconds * 1000;
    const retryAfterDate = new Date(retryAfter);
    return retryAfterDate.getTime() - Date.now();
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-retry/dist-es/configurations.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-retry/dist-es/configurations.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CONFIG_MAX_ATTEMPTS: () => (/* binding */ CONFIG_MAX_ATTEMPTS),
/* harmony export */   CONFIG_RETRY_MODE: () => (/* binding */ CONFIG_RETRY_MODE),
/* harmony export */   ENV_MAX_ATTEMPTS: () => (/* binding */ ENV_MAX_ATTEMPTS),
/* harmony export */   ENV_RETRY_MODE: () => (/* binding */ ENV_RETRY_MODE),
/* harmony export */   NODE_MAX_ATTEMPT_CONFIG_OPTIONS: () => (/* binding */ NODE_MAX_ATTEMPT_CONFIG_OPTIONS),
/* harmony export */   NODE_RETRY_MODE_CONFIG_OPTIONS: () => (/* binding */ NODE_RETRY_MODE_CONFIG_OPTIONS),
/* harmony export */   resolveRetryConfig: () => (/* binding */ resolveRetryConfig)
/* harmony export */ });
/* harmony import */ var _smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-middleware */ "../node_modules/@smithy/util-middleware/dist-es/index.js");
/* harmony import */ var _smithy_util_retry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-retry */ "../node_modules/@smithy/util-retry/dist-es/index.js");


const ENV_MAX_ATTEMPTS = "AWS_MAX_ATTEMPTS";
const CONFIG_MAX_ATTEMPTS = "max_attempts";
const NODE_MAX_ATTEMPT_CONFIG_OPTIONS = {
    environmentVariableSelector: (env) => {
        const value = env[ENV_MAX_ATTEMPTS];
        if (!value)
            return undefined;
        const maxAttempt = parseInt(value);
        if (Number.isNaN(maxAttempt)) {
            throw new Error(`Environment variable ${ENV_MAX_ATTEMPTS} mast be a number, got "${value}"`);
        }
        return maxAttempt;
    },
    configFileSelector: (profile) => {
        const value = profile[CONFIG_MAX_ATTEMPTS];
        if (!value)
            return undefined;
        const maxAttempt = parseInt(value);
        if (Number.isNaN(maxAttempt)) {
            throw new Error(`Shared config file entry ${CONFIG_MAX_ATTEMPTS} mast be a number, got "${value}"`);
        }
        return maxAttempt;
    },
    default: _smithy_util_retry__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MAX_ATTEMPTS,
};
const resolveRetryConfig = (input) => {
    const { retryStrategy } = input;
    const maxAttempts = (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(input.maxAttempts ?? _smithy_util_retry__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MAX_ATTEMPTS);
    return {
        ...input,
        maxAttempts,
        retryStrategy: async () => {
            if (retryStrategy) {
                return retryStrategy;
            }
            const retryMode = await (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_0__.normalizeProvider)(input.retryMode)();
            if (retryMode === _smithy_util_retry__WEBPACK_IMPORTED_MODULE_1__.RETRY_MODES.ADAPTIVE) {
                return new _smithy_util_retry__WEBPACK_IMPORTED_MODULE_1__.AdaptiveRetryStrategy(maxAttempts);
            }
            return new _smithy_util_retry__WEBPACK_IMPORTED_MODULE_1__.StandardRetryStrategy(maxAttempts);
        },
    };
};
const ENV_RETRY_MODE = "AWS_RETRY_MODE";
const CONFIG_RETRY_MODE = "retry_mode";
const NODE_RETRY_MODE_CONFIG_OPTIONS = {
    environmentVariableSelector: (env) => env[ENV_RETRY_MODE],
    configFileSelector: (profile) => profile[CONFIG_RETRY_MODE],
    default: _smithy_util_retry__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_RETRY_MODE,
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-retry/dist-es/defaultRetryQuota.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-retry/dist-es/defaultRetryQuota.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDefaultRetryQuota: () => (/* binding */ getDefaultRetryQuota)
/* harmony export */ });
/* harmony import */ var _smithy_util_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-retry */ "../node_modules/@smithy/util-retry/dist-es/index.js");

const getDefaultRetryQuota = (initialRetryTokens, options) => {
    const MAX_CAPACITY = initialRetryTokens;
    const noRetryIncrement = options?.noRetryIncrement ?? _smithy_util_retry__WEBPACK_IMPORTED_MODULE_0__.NO_RETRY_INCREMENT;
    const retryCost = options?.retryCost ?? _smithy_util_retry__WEBPACK_IMPORTED_MODULE_0__.RETRY_COST;
    const timeoutRetryCost = options?.timeoutRetryCost ?? _smithy_util_retry__WEBPACK_IMPORTED_MODULE_0__.TIMEOUT_RETRY_COST;
    let availableCapacity = initialRetryTokens;
    const getCapacityAmount = (error) => (error.name === "TimeoutError" ? timeoutRetryCost : retryCost);
    const hasRetryTokens = (error) => getCapacityAmount(error) <= availableCapacity;
    const retrieveRetryTokens = (error) => {
        if (!hasRetryTokens(error)) {
            throw new Error("No retry token available");
        }
        const capacityAmount = getCapacityAmount(error);
        availableCapacity -= capacityAmount;
        return capacityAmount;
    };
    const releaseRetryTokens = (capacityReleaseAmount) => {
        availableCapacity += capacityReleaseAmount ?? noRetryIncrement;
        availableCapacity = Math.min(availableCapacity, MAX_CAPACITY);
    };
    return Object.freeze({
        hasRetryTokens,
        retrieveRetryTokens,
        releaseRetryTokens,
    });
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-retry/dist-es/delayDecider.js":
/*!************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-retry/dist-es/delayDecider.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   defaultDelayDecider: () => (/* binding */ defaultDelayDecider)
/* harmony export */ });
/* harmony import */ var _smithy_util_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-retry */ "../node_modules/@smithy/util-retry/dist-es/index.js");

const defaultDelayDecider = (delayBase, attempts) => Math.floor(Math.min(_smithy_util_retry__WEBPACK_IMPORTED_MODULE_0__.MAXIMUM_RETRY_DELAY, Math.random() * 2 ** attempts * delayBase));


/***/ }),

/***/ "../node_modules/@smithy/middleware-retry/dist-es/index.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/middleware-retry/dist-es/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AdaptiveRetryStrategy: () => (/* reexport safe */ _AdaptiveRetryStrategy__WEBPACK_IMPORTED_MODULE_0__.AdaptiveRetryStrategy),
/* harmony export */   CONFIG_MAX_ATTEMPTS: () => (/* reexport safe */ _configurations__WEBPACK_IMPORTED_MODULE_2__.CONFIG_MAX_ATTEMPTS),
/* harmony export */   CONFIG_RETRY_MODE: () => (/* reexport safe */ _configurations__WEBPACK_IMPORTED_MODULE_2__.CONFIG_RETRY_MODE),
/* harmony export */   ENV_MAX_ATTEMPTS: () => (/* reexport safe */ _configurations__WEBPACK_IMPORTED_MODULE_2__.ENV_MAX_ATTEMPTS),
/* harmony export */   ENV_RETRY_MODE: () => (/* reexport safe */ _configurations__WEBPACK_IMPORTED_MODULE_2__.ENV_RETRY_MODE),
/* harmony export */   NODE_MAX_ATTEMPT_CONFIG_OPTIONS: () => (/* reexport safe */ _configurations__WEBPACK_IMPORTED_MODULE_2__.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),
/* harmony export */   NODE_RETRY_MODE_CONFIG_OPTIONS: () => (/* reexport safe */ _configurations__WEBPACK_IMPORTED_MODULE_2__.NODE_RETRY_MODE_CONFIG_OPTIONS),
/* harmony export */   StandardRetryStrategy: () => (/* reexport safe */ _StandardRetryStrategy__WEBPACK_IMPORTED_MODULE_1__.StandardRetryStrategy),
/* harmony export */   defaultDelayDecider: () => (/* reexport safe */ _delayDecider__WEBPACK_IMPORTED_MODULE_3__.defaultDelayDecider),
/* harmony export */   defaultRetryDecider: () => (/* reexport safe */ _retryDecider__WEBPACK_IMPORTED_MODULE_5__.defaultRetryDecider),
/* harmony export */   getOmitRetryHeadersPlugin: () => (/* reexport safe */ _omitRetryHeadersMiddleware__WEBPACK_IMPORTED_MODULE_4__.getOmitRetryHeadersPlugin),
/* harmony export */   getRetryAfterHint: () => (/* reexport safe */ _retryMiddleware__WEBPACK_IMPORTED_MODULE_6__.getRetryAfterHint),
/* harmony export */   getRetryPlugin: () => (/* reexport safe */ _retryMiddleware__WEBPACK_IMPORTED_MODULE_6__.getRetryPlugin),
/* harmony export */   omitRetryHeadersMiddleware: () => (/* reexport safe */ _omitRetryHeadersMiddleware__WEBPACK_IMPORTED_MODULE_4__.omitRetryHeadersMiddleware),
/* harmony export */   omitRetryHeadersMiddlewareOptions: () => (/* reexport safe */ _omitRetryHeadersMiddleware__WEBPACK_IMPORTED_MODULE_4__.omitRetryHeadersMiddlewareOptions),
/* harmony export */   resolveRetryConfig: () => (/* reexport safe */ _configurations__WEBPACK_IMPORTED_MODULE_2__.resolveRetryConfig),
/* harmony export */   retryMiddleware: () => (/* reexport safe */ _retryMiddleware__WEBPACK_IMPORTED_MODULE_6__.retryMiddleware),
/* harmony export */   retryMiddlewareOptions: () => (/* reexport safe */ _retryMiddleware__WEBPACK_IMPORTED_MODULE_6__.retryMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _AdaptiveRetryStrategy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AdaptiveRetryStrategy */ "../node_modules/@smithy/middleware-retry/dist-es/AdaptiveRetryStrategy.js");
/* harmony import */ var _StandardRetryStrategy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StandardRetryStrategy */ "../node_modules/@smithy/middleware-retry/dist-es/StandardRetryStrategy.js");
/* harmony import */ var _configurations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./configurations */ "../node_modules/@smithy/middleware-retry/dist-es/configurations.js");
/* harmony import */ var _delayDecider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./delayDecider */ "../node_modules/@smithy/middleware-retry/dist-es/delayDecider.js");
/* harmony import */ var _omitRetryHeadersMiddleware__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./omitRetryHeadersMiddleware */ "../node_modules/@smithy/middleware-retry/dist-es/omitRetryHeadersMiddleware.js");
/* harmony import */ var _retryDecider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./retryDecider */ "../node_modules/@smithy/middleware-retry/dist-es/retryDecider.js");
/* harmony import */ var _retryMiddleware__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./retryMiddleware */ "../node_modules/@smithy/middleware-retry/dist-es/retryMiddleware.js");









/***/ }),

/***/ "../node_modules/@smithy/middleware-retry/dist-es/isStreamingPayload/isStreamingPayload.js":
/*!*************************************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-retry/dist-es/isStreamingPayload/isStreamingPayload.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isStreamingPayload: () => (/* binding */ isStreamingPayload)
/* harmony export */ });
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ "stream");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);

const isStreamingPayload = (request) => request?.body instanceof stream__WEBPACK_IMPORTED_MODULE_0__.Readable ||
    (typeof ReadableStream !== "undefined" && request?.body instanceof ReadableStream);


/***/ }),

/***/ "../node_modules/@smithy/middleware-retry/dist-es/omitRetryHeadersMiddleware.js":
/*!**************************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-retry/dist-es/omitRetryHeadersMiddleware.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getOmitRetryHeadersPlugin: () => (/* binding */ getOmitRetryHeadersPlugin),
/* harmony export */   omitRetryHeadersMiddleware: () => (/* binding */ omitRetryHeadersMiddleware),
/* harmony export */   omitRetryHeadersMiddlewareOptions: () => (/* binding */ omitRetryHeadersMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_util_retry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-retry */ "../node_modules/@smithy/util-retry/dist-es/index.js");


const omitRetryHeadersMiddleware = () => (next) => async (args) => {
    const { request } = args;
    if (_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(request)) {
        delete request.headers[_smithy_util_retry__WEBPACK_IMPORTED_MODULE_1__.INVOCATION_ID_HEADER];
        delete request.headers[_smithy_util_retry__WEBPACK_IMPORTED_MODULE_1__.REQUEST_HEADER];
    }
    return next(args);
};
const omitRetryHeadersMiddlewareOptions = {
    name: "omitRetryHeadersMiddleware",
    tags: ["RETRY", "HEADERS", "OMIT_RETRY_HEADERS"],
    relation: "before",
    toMiddleware: "awsAuthMiddleware",
    override: true,
};
const getOmitRetryHeadersPlugin = (options) => ({
    applyToStack: (clientStack) => {
        clientStack.addRelativeTo(omitRetryHeadersMiddleware(), omitRetryHeadersMiddlewareOptions);
    },
});


/***/ }),

/***/ "../node_modules/@smithy/middleware-retry/dist-es/retryDecider.js":
/*!************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-retry/dist-es/retryDecider.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   defaultRetryDecider: () => (/* binding */ defaultRetryDecider)
/* harmony export */ });
/* harmony import */ var _smithy_service_error_classification__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/service-error-classification */ "../node_modules/@smithy/service-error-classification/dist-es/index.js");

const defaultRetryDecider = (error) => {
    if (!error) {
        return false;
    }
    return (0,_smithy_service_error_classification__WEBPACK_IMPORTED_MODULE_0__.isRetryableByTrait)(error) || (0,_smithy_service_error_classification__WEBPACK_IMPORTED_MODULE_0__.isClockSkewError)(error) || (0,_smithy_service_error_classification__WEBPACK_IMPORTED_MODULE_0__.isThrottlingError)(error) || (0,_smithy_service_error_classification__WEBPACK_IMPORTED_MODULE_0__.isTransientError)(error);
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-retry/dist-es/retryMiddleware.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-retry/dist-es/retryMiddleware.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRetryAfterHint: () => (/* binding */ getRetryAfterHint),
/* harmony export */   getRetryPlugin: () => (/* binding */ getRetryPlugin),
/* harmony export */   retryMiddleware: () => (/* binding */ retryMiddleware),
/* harmony export */   retryMiddlewareOptions: () => (/* binding */ retryMiddlewareOptions)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_service_error_classification__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/service-error-classification */ "../node_modules/@smithy/service-error-classification/dist-es/index.js");
/* harmony import */ var _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/smithy-client */ "../node_modules/@smithy/smithy-client/dist-es/index.js");
/* harmony import */ var _smithy_util_retry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @smithy/util-retry */ "../node_modules/@smithy/util-retry/dist-es/index.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uuid */ "uuid");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _isStreamingPayload_isStreamingPayload__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./isStreamingPayload/isStreamingPayload */ "../node_modules/@smithy/middleware-retry/dist-es/isStreamingPayload/isStreamingPayload.js");
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./util */ "../node_modules/@smithy/middleware-retry/dist-es/util.js");







const retryMiddleware = (options) => (next, context) => async (args) => {
    let retryStrategy = await options.retryStrategy();
    const maxAttempts = await options.maxAttempts();
    if (isRetryStrategyV2(retryStrategy)) {
        retryStrategy = retryStrategy;
        let retryToken = await retryStrategy.acquireInitialRetryToken(context["partition_id"]);
        let lastError = new Error();
        let attempts = 0;
        let totalRetryDelay = 0;
        const { request } = args;
        const isRequest = _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.isInstance(request);
        if (isRequest) {
            request.headers[_smithy_util_retry__WEBPACK_IMPORTED_MODULE_3__.INVOCATION_ID_HEADER] = (0,uuid__WEBPACK_IMPORTED_MODULE_4__.v4)();
        }
        while (true) {
            try {
                if (isRequest) {
                    request.headers[_smithy_util_retry__WEBPACK_IMPORTED_MODULE_3__.REQUEST_HEADER] = `attempt=${attempts + 1}; max=${maxAttempts}`;
                }
                const { response, output } = await next(args);
                retryStrategy.recordSuccess(retryToken);
                output.$metadata.attempts = attempts + 1;
                output.$metadata.totalRetryDelay = totalRetryDelay;
                return { response, output };
            }
            catch (e) {
                const retryErrorInfo = getRetryErrorInfo(e);
                lastError = (0,_util__WEBPACK_IMPORTED_MODULE_6__.asSdkError)(e);
                if (isRequest && (0,_isStreamingPayload_isStreamingPayload__WEBPACK_IMPORTED_MODULE_5__.isStreamingPayload)(request)) {
                    (context.logger instanceof _smithy_smithy_client__WEBPACK_IMPORTED_MODULE_2__.NoOpLogger ? console : context.logger)?.warn("An error was encountered in a non-retryable streaming request.");
                    throw lastError;
                }
                try {
                    retryToken = await retryStrategy.refreshRetryTokenForRetry(retryToken, retryErrorInfo);
                }
                catch (refreshError) {
                    if (!lastError.$metadata) {
                        lastError.$metadata = {};
                    }
                    lastError.$metadata.attempts = attempts + 1;
                    lastError.$metadata.totalRetryDelay = totalRetryDelay;
                    throw lastError;
                }
                attempts = retryToken.getRetryCount();
                const delay = retryToken.getRetryDelay();
                totalRetryDelay += delay;
                await new Promise((resolve) => setTimeout(resolve, delay));
            }
        }
    }
    else {
        retryStrategy = retryStrategy;
        if (retryStrategy?.mode)
            context.userAgent = [...(context.userAgent || []), ["cfg/retry-mode", retryStrategy.mode]];
        return retryStrategy.retry(next, args);
    }
};
const isRetryStrategyV2 = (retryStrategy) => typeof retryStrategy.acquireInitialRetryToken !== "undefined" &&
    typeof retryStrategy.refreshRetryTokenForRetry !== "undefined" &&
    typeof retryStrategy.recordSuccess !== "undefined";
const getRetryErrorInfo = (error) => {
    const errorInfo = {
        error,
        errorType: getRetryErrorType(error),
    };
    const retryAfterHint = getRetryAfterHint(error.$response);
    if (retryAfterHint) {
        errorInfo.retryAfterHint = retryAfterHint;
    }
    return errorInfo;
};
const getRetryErrorType = (error) => {
    if ((0,_smithy_service_error_classification__WEBPACK_IMPORTED_MODULE_1__.isThrottlingError)(error))
        return "THROTTLING";
    if ((0,_smithy_service_error_classification__WEBPACK_IMPORTED_MODULE_1__.isTransientError)(error))
        return "TRANSIENT";
    if ((0,_smithy_service_error_classification__WEBPACK_IMPORTED_MODULE_1__.isServerError)(error))
        return "SERVER_ERROR";
    return "CLIENT_ERROR";
};
const retryMiddlewareOptions = {
    name: "retryMiddleware",
    tags: ["RETRY"],
    step: "finalizeRequest",
    priority: "high",
    override: true,
};
const getRetryPlugin = (options) => ({
    applyToStack: (clientStack) => {
        clientStack.add(retryMiddleware(options), retryMiddlewareOptions);
    },
});
const getRetryAfterHint = (response) => {
    if (!_smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpResponse.isInstance(response))
        return;
    const retryAfterHeaderName = Object.keys(response.headers).find((key) => key.toLowerCase() === "retry-after");
    if (!retryAfterHeaderName)
        return;
    const retryAfter = response.headers[retryAfterHeaderName];
    const retryAfterSeconds = Number(retryAfter);
    if (!Number.isNaN(retryAfterSeconds))
        return new Date(retryAfterSeconds * 1000);
    const retryAfterDate = new Date(retryAfter);
    return retryAfterDate;
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-retry/dist-es/util.js":
/*!****************************************************************!*\
  !*** ../node_modules/@smithy/middleware-retry/dist-es/util.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   asSdkError: () => (/* binding */ asSdkError)
/* harmony export */ });
const asSdkError = (error) => {
    if (error instanceof Error)
        return error;
    if (error instanceof Object)
        return Object.assign(new Error(), error);
    if (typeof error === "string")
        return new Error(error);
    return new Error(`AWS SDK error wrapper for ${error}`);
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-serde/dist-es/deserializerMiddleware.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-serde/dist-es/deserializerMiddleware.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deserializerMiddleware: () => (/* binding */ deserializerMiddleware)
/* harmony export */ });
const deserializerMiddleware = (options, deserializer) => (next, context) => async (args) => {
    const { response } = await next(args);
    try {
        const parsed = await deserializer(response, options);
        return {
            response,
            output: parsed,
        };
    }
    catch (error) {
        Object.defineProperty(error, "$response", {
            value: response,
        });
        if (!("$metadata" in error)) {
            const hint = `Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.`;
            try {
                error.message += "\n  " + hint;
            }
            catch (e) {
                if (!context.logger || context.logger?.constructor?.name === "NoOpLogger") {
                    console.warn(hint);
                }
                else {
                    context.logger?.warn?.(hint);
                }
            }
            if (typeof error.$responseBodyText !== "undefined") {
                if (error.$response) {
                    error.$response.body = error.$responseBodyText;
                }
            }
        }
        throw error;
    }
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-serde/dist-es/index.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/middleware-serde/dist-es/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deserializerMiddleware: () => (/* reexport safe */ _deserializerMiddleware__WEBPACK_IMPORTED_MODULE_0__.deserializerMiddleware),
/* harmony export */   deserializerMiddlewareOption: () => (/* reexport safe */ _serdePlugin__WEBPACK_IMPORTED_MODULE_1__.deserializerMiddlewareOption),
/* harmony export */   getSerdePlugin: () => (/* reexport safe */ _serdePlugin__WEBPACK_IMPORTED_MODULE_1__.getSerdePlugin),
/* harmony export */   serializerMiddleware: () => (/* reexport safe */ _serializerMiddleware__WEBPACK_IMPORTED_MODULE_2__.serializerMiddleware),
/* harmony export */   serializerMiddlewareOption: () => (/* reexport safe */ _serdePlugin__WEBPACK_IMPORTED_MODULE_1__.serializerMiddlewareOption)
/* harmony export */ });
/* harmony import */ var _deserializerMiddleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./deserializerMiddleware */ "../node_modules/@smithy/middleware-serde/dist-es/deserializerMiddleware.js");
/* harmony import */ var _serdePlugin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./serdePlugin */ "../node_modules/@smithy/middleware-serde/dist-es/serdePlugin.js");
/* harmony import */ var _serializerMiddleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./serializerMiddleware */ "../node_modules/@smithy/middleware-serde/dist-es/serializerMiddleware.js");





/***/ }),

/***/ "../node_modules/@smithy/middleware-serde/dist-es/serdePlugin.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/middleware-serde/dist-es/serdePlugin.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deserializerMiddlewareOption: () => (/* binding */ deserializerMiddlewareOption),
/* harmony export */   getSerdePlugin: () => (/* binding */ getSerdePlugin),
/* harmony export */   serializerMiddlewareOption: () => (/* binding */ serializerMiddlewareOption)
/* harmony export */ });
/* harmony import */ var _deserializerMiddleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./deserializerMiddleware */ "../node_modules/@smithy/middleware-serde/dist-es/deserializerMiddleware.js");
/* harmony import */ var _serializerMiddleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./serializerMiddleware */ "../node_modules/@smithy/middleware-serde/dist-es/serializerMiddleware.js");


const deserializerMiddlewareOption = {
    name: "deserializerMiddleware",
    step: "deserialize",
    tags: ["DESERIALIZER"],
    override: true,
};
const serializerMiddlewareOption = {
    name: "serializerMiddleware",
    step: "serialize",
    tags: ["SERIALIZER"],
    override: true,
};
function getSerdePlugin(config, serializer, deserializer) {
    return {
        applyToStack: (commandStack) => {
            commandStack.add((0,_deserializerMiddleware__WEBPACK_IMPORTED_MODULE_0__.deserializerMiddleware)(config, deserializer), deserializerMiddlewareOption);
            commandStack.add((0,_serializerMiddleware__WEBPACK_IMPORTED_MODULE_1__.serializerMiddleware)(config, serializer), serializerMiddlewareOption);
        },
    };
}


/***/ }),

/***/ "../node_modules/@smithy/middleware-serde/dist-es/serializerMiddleware.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-serde/dist-es/serializerMiddleware.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   serializerMiddleware: () => (/* binding */ serializerMiddleware)
/* harmony export */ });
const serializerMiddleware = (options, serializer) => (next, context) => async (args) => {
    const endpoint = context.endpointV2?.url && options.urlParser
        ? async () => options.urlParser(context.endpointV2.url)
        : options.endpoint;
    if (!endpoint) {
        throw new Error("No valid endpoint provider available.");
    }
    const request = await serializer(args.input, { ...options, endpoint });
    return next({
        ...args,
        request,
    });
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-stack/dist-es/MiddlewareStack.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@smithy/middleware-stack/dist-es/MiddlewareStack.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   constructStack: () => (/* binding */ constructStack)
/* harmony export */ });
const getAllAliases = (name, aliases) => {
    const _aliases = [];
    if (name) {
        _aliases.push(name);
    }
    if (aliases) {
        for (const alias of aliases) {
            _aliases.push(alias);
        }
    }
    return _aliases;
};
const getMiddlewareNameWithAliases = (name, aliases) => {
    return `${name || "anonymous"}${aliases && aliases.length > 0 ? ` (a.k.a. ${aliases.join(",")})` : ""}`;
};
const constructStack = () => {
    let absoluteEntries = [];
    let relativeEntries = [];
    let identifyOnResolve = false;
    const entriesNameSet = new Set();
    const sort = (entries) => entries.sort((a, b) => stepWeights[b.step] - stepWeights[a.step] ||
        priorityWeights[b.priority || "normal"] - priorityWeights[a.priority || "normal"]);
    const removeByName = (toRemove) => {
        let isRemoved = false;
        const filterCb = (entry) => {
            const aliases = getAllAliases(entry.name, entry.aliases);
            if (aliases.includes(toRemove)) {
                isRemoved = true;
                for (const alias of aliases) {
                    entriesNameSet.delete(alias);
                }
                return false;
            }
            return true;
        };
        absoluteEntries = absoluteEntries.filter(filterCb);
        relativeEntries = relativeEntries.filter(filterCb);
        return isRemoved;
    };
    const removeByReference = (toRemove) => {
        let isRemoved = false;
        const filterCb = (entry) => {
            if (entry.middleware === toRemove) {
                isRemoved = true;
                for (const alias of getAllAliases(entry.name, entry.aliases)) {
                    entriesNameSet.delete(alias);
                }
                return false;
            }
            return true;
        };
        absoluteEntries = absoluteEntries.filter(filterCb);
        relativeEntries = relativeEntries.filter(filterCb);
        return isRemoved;
    };
    const cloneTo = (toStack) => {
        absoluteEntries.forEach((entry) => {
            toStack.add(entry.middleware, { ...entry });
        });
        relativeEntries.forEach((entry) => {
            toStack.addRelativeTo(entry.middleware, { ...entry });
        });
        toStack.identifyOnResolve?.(stack.identifyOnResolve());
        return toStack;
    };
    const expandRelativeMiddlewareList = (from) => {
        const expandedMiddlewareList = [];
        from.before.forEach((entry) => {
            if (entry.before.length === 0 && entry.after.length === 0) {
                expandedMiddlewareList.push(entry);
            }
            else {
                expandedMiddlewareList.push(...expandRelativeMiddlewareList(entry));
            }
        });
        expandedMiddlewareList.push(from);
        from.after.reverse().forEach((entry) => {
            if (entry.before.length === 0 && entry.after.length === 0) {
                expandedMiddlewareList.push(entry);
            }
            else {
                expandedMiddlewareList.push(...expandRelativeMiddlewareList(entry));
            }
        });
        return expandedMiddlewareList;
    };
    const getMiddlewareList = (debug = false) => {
        const normalizedAbsoluteEntries = [];
        const normalizedRelativeEntries = [];
        const normalizedEntriesNameMap = {};
        absoluteEntries.forEach((entry) => {
            const normalizedEntry = {
                ...entry,
                before: [],
                after: [],
            };
            for (const alias of getAllAliases(normalizedEntry.name, normalizedEntry.aliases)) {
                normalizedEntriesNameMap[alias] = normalizedEntry;
            }
            normalizedAbsoluteEntries.push(normalizedEntry);
        });
        relativeEntries.forEach((entry) => {
            const normalizedEntry = {
                ...entry,
                before: [],
                after: [],
            };
            for (const alias of getAllAliases(normalizedEntry.name, normalizedEntry.aliases)) {
                normalizedEntriesNameMap[alias] = normalizedEntry;
            }
            normalizedRelativeEntries.push(normalizedEntry);
        });
        normalizedRelativeEntries.forEach((entry) => {
            if (entry.toMiddleware) {
                const toMiddleware = normalizedEntriesNameMap[entry.toMiddleware];
                if (toMiddleware === undefined) {
                    if (debug) {
                        return;
                    }
                    throw new Error(`${entry.toMiddleware} is not found when adding ` +
                        `${getMiddlewareNameWithAliases(entry.name, entry.aliases)} ` +
                        `middleware ${entry.relation} ${entry.toMiddleware}`);
                }
                if (entry.relation === "after") {
                    toMiddleware.after.push(entry);
                }
                if (entry.relation === "before") {
                    toMiddleware.before.push(entry);
                }
            }
        });
        const mainChain = sort(normalizedAbsoluteEntries)
            .map(expandRelativeMiddlewareList)
            .reduce((wholeList, expandedMiddlewareList) => {
            wholeList.push(...expandedMiddlewareList);
            return wholeList;
        }, []);
        return mainChain;
    };
    const stack = {
        add: (middleware, options = {}) => {
            const { name, override, aliases: _aliases } = options;
            const entry = {
                step: "initialize",
                priority: "normal",
                middleware,
                ...options,
            };
            const aliases = getAllAliases(name, _aliases);
            if (aliases.length > 0) {
                if (aliases.some((alias) => entriesNameSet.has(alias))) {
                    if (!override)
                        throw new Error(`Duplicate middleware name '${getMiddlewareNameWithAliases(name, _aliases)}'`);
                    for (const alias of aliases) {
                        const toOverrideIndex = absoluteEntries.findIndex((entry) => entry.name === alias || entry.aliases?.some((a) => a === alias));
                        if (toOverrideIndex === -1) {
                            continue;
                        }
                        const toOverride = absoluteEntries[toOverrideIndex];
                        if (toOverride.step !== entry.step || entry.priority !== toOverride.priority) {
                            throw new Error(`"${getMiddlewareNameWithAliases(toOverride.name, toOverride.aliases)}" middleware with ` +
                                `${toOverride.priority} priority in ${toOverride.step} step cannot ` +
                                `be overridden by "${getMiddlewareNameWithAliases(name, _aliases)}" middleware with ` +
                                `${entry.priority} priority in ${entry.step} step.`);
                        }
                        absoluteEntries.splice(toOverrideIndex, 1);
                    }
                }
                for (const alias of aliases) {
                    entriesNameSet.add(alias);
                }
            }
            absoluteEntries.push(entry);
        },
        addRelativeTo: (middleware, options) => {
            const { name, override, aliases: _aliases } = options;
            const entry = {
                middleware,
                ...options,
            };
            const aliases = getAllAliases(name, _aliases);
            if (aliases.length > 0) {
                if (aliases.some((alias) => entriesNameSet.has(alias))) {
                    if (!override)
                        throw new Error(`Duplicate middleware name '${getMiddlewareNameWithAliases(name, _aliases)}'`);
                    for (const alias of aliases) {
                        const toOverrideIndex = relativeEntries.findIndex((entry) => entry.name === alias || entry.aliases?.some((a) => a === alias));
                        if (toOverrideIndex === -1) {
                            continue;
                        }
                        const toOverride = relativeEntries[toOverrideIndex];
                        if (toOverride.toMiddleware !== entry.toMiddleware || toOverride.relation !== entry.relation) {
                            throw new Error(`"${getMiddlewareNameWithAliases(toOverride.name, toOverride.aliases)}" middleware ` +
                                `${toOverride.relation} "${toOverride.toMiddleware}" middleware cannot be overridden ` +
                                `by "${getMiddlewareNameWithAliases(name, _aliases)}" middleware ${entry.relation} ` +
                                `"${entry.toMiddleware}" middleware.`);
                        }
                        relativeEntries.splice(toOverrideIndex, 1);
                    }
                }
                for (const alias of aliases) {
                    entriesNameSet.add(alias);
                }
            }
            relativeEntries.push(entry);
        },
        clone: () => cloneTo(constructStack()),
        use: (plugin) => {
            plugin.applyToStack(stack);
        },
        remove: (toRemove) => {
            if (typeof toRemove === "string")
                return removeByName(toRemove);
            else
                return removeByReference(toRemove);
        },
        removeByTag: (toRemove) => {
            let isRemoved = false;
            const filterCb = (entry) => {
                const { tags, name, aliases: _aliases } = entry;
                if (tags && tags.includes(toRemove)) {
                    const aliases = getAllAliases(name, _aliases);
                    for (const alias of aliases) {
                        entriesNameSet.delete(alias);
                    }
                    isRemoved = true;
                    return false;
                }
                return true;
            };
            absoluteEntries = absoluteEntries.filter(filterCb);
            relativeEntries = relativeEntries.filter(filterCb);
            return isRemoved;
        },
        concat: (from) => {
            const cloned = cloneTo(constructStack());
            cloned.use(from);
            cloned.identifyOnResolve(identifyOnResolve || cloned.identifyOnResolve() || (from.identifyOnResolve?.() ?? false));
            return cloned;
        },
        applyToStack: cloneTo,
        identify: () => {
            return getMiddlewareList(true).map((mw) => {
                const step = mw.step ??
                    mw.relation +
                        " " +
                        mw.toMiddleware;
                return getMiddlewareNameWithAliases(mw.name, mw.aliases) + " - " + step;
            });
        },
        identifyOnResolve(toggle) {
            if (typeof toggle === "boolean")
                identifyOnResolve = toggle;
            return identifyOnResolve;
        },
        resolve: (handler, context) => {
            for (const middleware of getMiddlewareList()
                .map((entry) => entry.middleware)
                .reverse()) {
                handler = middleware(handler, context);
            }
            if (identifyOnResolve) {
                console.log(stack.identify());
            }
            return handler;
        },
    };
    return stack;
};
const stepWeights = {
    initialize: 5,
    serialize: 4,
    build: 3,
    finalizeRequest: 2,
    deserialize: 1,
};
const priorityWeights = {
    high: 3,
    normal: 2,
    low: 1,
};


/***/ }),

/***/ "../node_modules/@smithy/middleware-stack/dist-es/index.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/middleware-stack/dist-es/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   constructStack: () => (/* reexport safe */ _MiddlewareStack__WEBPACK_IMPORTED_MODULE_0__.constructStack)
/* harmony export */ });
/* harmony import */ var _MiddlewareStack__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MiddlewareStack */ "../node_modules/@smithy/middleware-stack/dist-es/MiddlewareStack.js");



/***/ }),

/***/ "../node_modules/@smithy/node-config-provider/dist-es/configLoader.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/node-config-provider/dist-es/configLoader.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   loadConfig: () => (/* binding */ loadConfig)
/* harmony export */ });
/* harmony import */ var _smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/property-provider */ "../node_modules/@smithy/property-provider/dist-es/index.js");
/* harmony import */ var _fromEnv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fromEnv */ "../node_modules/@smithy/node-config-provider/dist-es/fromEnv.js");
/* harmony import */ var _fromSharedConfigFiles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fromSharedConfigFiles */ "../node_modules/@smithy/node-config-provider/dist-es/fromSharedConfigFiles.js");
/* harmony import */ var _fromStatic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./fromStatic */ "../node_modules/@smithy/node-config-provider/dist-es/fromStatic.js");




const loadConfig = ({ environmentVariableSelector, configFileSelector, default: defaultValue }, configuration = {}) => (0,_smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__.memoize)((0,_smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__.chain)((0,_fromEnv__WEBPACK_IMPORTED_MODULE_1__.fromEnv)(environmentVariableSelector), (0,_fromSharedConfigFiles__WEBPACK_IMPORTED_MODULE_2__.fromSharedConfigFiles)(configFileSelector, configuration), (0,_fromStatic__WEBPACK_IMPORTED_MODULE_3__.fromStatic)(defaultValue)));


/***/ }),

/***/ "../node_modules/@smithy/node-config-provider/dist-es/fromEnv.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/node-config-provider/dist-es/fromEnv.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromEnv: () => (/* binding */ fromEnv)
/* harmony export */ });
/* harmony import */ var _smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/property-provider */ "../node_modules/@smithy/property-provider/dist-es/index.js");
/* harmony import */ var _getSelectorName__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getSelectorName */ "../node_modules/@smithy/node-config-provider/dist-es/getSelectorName.js");


const fromEnv = (envVarSelector, logger) => async () => {
    try {
        const config = envVarSelector(process.env);
        if (config === undefined) {
            throw new Error();
        }
        return config;
    }
    catch (e) {
        throw new _smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__.CredentialsProviderError(e.message || `Not found in ENV: ${(0,_getSelectorName__WEBPACK_IMPORTED_MODULE_1__.getSelectorName)(envVarSelector.toString())}`, { logger });
    }
};


/***/ }),

/***/ "../node_modules/@smithy/node-config-provider/dist-es/fromSharedConfigFiles.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@smithy/node-config-provider/dist-es/fromSharedConfigFiles.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromSharedConfigFiles: () => (/* binding */ fromSharedConfigFiles)
/* harmony export */ });
/* harmony import */ var _smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/property-provider */ "../node_modules/@smithy/property-provider/dist-es/index.js");
/* harmony import */ var _smithy_shared_ini_file_loader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/shared-ini-file-loader */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/index.js");
/* harmony import */ var _getSelectorName__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getSelectorName */ "../node_modules/@smithy/node-config-provider/dist-es/getSelectorName.js");



const fromSharedConfigFiles = (configSelector, { preferredFile = "config", ...init } = {}) => async () => {
    const profile = (0,_smithy_shared_ini_file_loader__WEBPACK_IMPORTED_MODULE_1__.getProfileName)(init);
    const { configFile, credentialsFile } = await (0,_smithy_shared_ini_file_loader__WEBPACK_IMPORTED_MODULE_1__.loadSharedConfigFiles)(init);
    const profileFromCredentials = credentialsFile[profile] || {};
    const profileFromConfig = configFile[profile] || {};
    const mergedProfile = preferredFile === "config"
        ? { ...profileFromCredentials, ...profileFromConfig }
        : { ...profileFromConfig, ...profileFromCredentials };
    try {
        const cfgFile = preferredFile === "config" ? configFile : credentialsFile;
        const configValue = configSelector(mergedProfile, cfgFile);
        if (configValue === undefined) {
            throw new Error();
        }
        return configValue;
    }
    catch (e) {
        throw new _smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__.CredentialsProviderError(e.message || `Not found in config files w/ profile [${profile}]: ${(0,_getSelectorName__WEBPACK_IMPORTED_MODULE_2__.getSelectorName)(configSelector.toString())}`, { logger: init.logger });
    }
};


/***/ }),

/***/ "../node_modules/@smithy/node-config-provider/dist-es/fromStatic.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/node-config-provider/dist-es/fromStatic.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromStatic: () => (/* binding */ fromStatic)
/* harmony export */ });
/* harmony import */ var _smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/property-provider */ "../node_modules/@smithy/property-provider/dist-es/index.js");

const isFunction = (func) => typeof func === "function";
const fromStatic = (defaultValue) => isFunction(defaultValue) ? async () => await defaultValue() : (0,_smithy_property_provider__WEBPACK_IMPORTED_MODULE_0__.fromStatic)(defaultValue);


/***/ }),

/***/ "../node_modules/@smithy/node-config-provider/dist-es/getSelectorName.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@smithy/node-config-provider/dist-es/getSelectorName.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSelectorName: () => (/* binding */ getSelectorName)
/* harmony export */ });
function getSelectorName(functionString) {
    try {
        const constants = new Set(Array.from(functionString.match(/([A-Z_]){3,}/g) ?? []));
        constants.delete("CONFIG");
        constants.delete("CONFIG_PREFIX_SEPARATOR");
        constants.delete("ENV");
        return [...constants].join(", ");
    }
    catch (e) {
        return functionString;
    }
}


/***/ }),

/***/ "../node_modules/@smithy/node-config-provider/dist-es/index.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@smithy/node-config-provider/dist-es/index.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   loadConfig: () => (/* reexport safe */ _configLoader__WEBPACK_IMPORTED_MODULE_0__.loadConfig)
/* harmony export */ });
/* harmony import */ var _configLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./configLoader */ "../node_modules/@smithy/node-config-provider/dist-es/configLoader.js");



/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/constants.js":
/*!**********************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/constants.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODEJS_TIMEOUT_ERROR_CODES: () => (/* binding */ NODEJS_TIMEOUT_ERROR_CODES)
/* harmony export */ });
const NODEJS_TIMEOUT_ERROR_CODES = ["ECONNRESET", "EPIPE", "ETIMEDOUT"];


/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getTransformedHeaders: () => (/* binding */ getTransformedHeaders)
/* harmony export */ });
const getTransformedHeaders = (headers) => {
    const transformedHeaders = {};
    for (const name of Object.keys(headers)) {
        const headerValues = headers[name];
        transformedHeaders[name] = Array.isArray(headerValues) ? headerValues.join(",") : headerValues;
    }
    return transformedHeaders;
};



/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/index.js":
/*!******************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_REQUEST_TIMEOUT: () => (/* reexport safe */ _node_http_handler__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_REQUEST_TIMEOUT),
/* harmony export */   NodeHttp2Handler: () => (/* reexport safe */ _node_http2_handler__WEBPACK_IMPORTED_MODULE_1__.NodeHttp2Handler),
/* harmony export */   NodeHttpHandler: () => (/* reexport safe */ _node_http_handler__WEBPACK_IMPORTED_MODULE_0__.NodeHttpHandler),
/* harmony export */   streamCollector: () => (/* reexport safe */ _stream_collector__WEBPACK_IMPORTED_MODULE_2__.streamCollector)
/* harmony export */ });
/* harmony import */ var _node_http_handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node-http-handler */ "../node_modules/@smithy/node-http-handler/dist-es/node-http-handler.js");
/* harmony import */ var _node_http2_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node-http2-handler */ "../node_modules/@smithy/node-http-handler/dist-es/node-http2-handler.js");
/* harmony import */ var _stream_collector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stream-collector */ "../node_modules/@smithy/node-http-handler/dist-es/stream-collector/index.js");





/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/node-http-handler.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/node-http-handler.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_REQUEST_TIMEOUT: () => (/* binding */ DEFAULT_REQUEST_TIMEOUT),
/* harmony export */   NodeHttpHandler: () => (/* binding */ NodeHttpHandler)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/querystring-builder */ "../node_modules/@smithy/querystring-builder/dist-es/index.js");
/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! http */ "http");
/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(http__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! https */ "https");
/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(https__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/node-http-handler/dist-es/constants.js");
/* harmony import */ var _get_transformed_headers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./get-transformed-headers */ "../node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js");
/* harmony import */ var _set_connection_timeout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./set-connection-timeout */ "../node_modules/@smithy/node-http-handler/dist-es/set-connection-timeout.js");
/* harmony import */ var _set_socket_keep_alive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./set-socket-keep-alive */ "../node_modules/@smithy/node-http-handler/dist-es/set-socket-keep-alive.js");
/* harmony import */ var _set_socket_timeout__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./set-socket-timeout */ "../node_modules/@smithy/node-http-handler/dist-es/set-socket-timeout.js");
/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./timing */ "../node_modules/@smithy/node-http-handler/dist-es/timing.js");
/* harmony import */ var _write_request_body__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./write-request-body */ "../node_modules/@smithy/node-http-handler/dist-es/write-request-body.js");











const DEFAULT_REQUEST_TIMEOUT = 0;
class NodeHttpHandler {
    static create(instanceOrOptions) {
        if (typeof instanceOrOptions?.handle === "function") {
            return instanceOrOptions;
        }
        return new NodeHttpHandler(instanceOrOptions);
    }
    static checkSocketUsage(agent, socketWarningTimestamp, logger = console) {
        const { sockets, requests, maxSockets } = agent;
        if (typeof maxSockets !== "number" || maxSockets === Infinity) {
            return socketWarningTimestamp;
        }
        const interval = 15000;
        if (Date.now() - interval < socketWarningTimestamp) {
            return socketWarningTimestamp;
        }
        if (sockets && requests) {
            for (const origin in sockets) {
                const socketsInUse = sockets[origin]?.length ?? 0;
                const requestsEnqueued = requests[origin]?.length ?? 0;
                if (socketsInUse >= maxSockets && requestsEnqueued >= 2 * maxSockets) {
                    logger?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${socketsInUse} and ${requestsEnqueued} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`);
                    return Date.now();
                }
            }
        }
        return socketWarningTimestamp;
    }
    constructor(options) {
        this.socketWarningTimestamp = 0;
        this.metadata = { handlerProtocol: "http/1.1" };
        this.configProvider = new Promise((resolve, reject) => {
            if (typeof options === "function") {
                options()
                    .then((_options) => {
                    resolve(this.resolveDefaultConfig(_options));
                })
                    .catch(reject);
            }
            else {
                resolve(this.resolveDefaultConfig(options));
            }
        });
    }
    resolveDefaultConfig(options) {
        const { requestTimeout, connectionTimeout, socketTimeout, httpAgent, httpsAgent } = options || {};
        const keepAlive = true;
        const maxSockets = 50;
        return {
            connectionTimeout,
            requestTimeout: requestTimeout ?? socketTimeout,
            httpAgent: (() => {
                if (httpAgent instanceof http__WEBPACK_IMPORTED_MODULE_2__.Agent || typeof httpAgent?.destroy === "function") {
                    return httpAgent;
                }
                return new http__WEBPACK_IMPORTED_MODULE_2__.Agent({ keepAlive, maxSockets, ...httpAgent });
            })(),
            httpsAgent: (() => {
                if (httpsAgent instanceof https__WEBPACK_IMPORTED_MODULE_3__.Agent || typeof httpsAgent?.destroy === "function") {
                    return httpsAgent;
                }
                return new https__WEBPACK_IMPORTED_MODULE_3__.Agent({ keepAlive, maxSockets, ...httpsAgent });
            })(),
            logger: console,
        };
    }
    destroy() {
        this.config?.httpAgent?.destroy();
        this.config?.httpsAgent?.destroy();
    }
    async handle(request, { abortSignal } = {}) {
        if (!this.config) {
            this.config = await this.configProvider;
        }
        return new Promise((_resolve, _reject) => {
            let writeRequestBodyPromise = undefined;
            const timeouts = [];
            const resolve = async (arg) => {
                await writeRequestBodyPromise;
                timeouts.forEach(_timing__WEBPACK_IMPORTED_MODULE_9__.timing.clearTimeout);
                _resolve(arg);
            };
            const reject = async (arg) => {
                await writeRequestBodyPromise;
                timeouts.forEach(_timing__WEBPACK_IMPORTED_MODULE_9__.timing.clearTimeout);
                _reject(arg);
            };
            if (!this.config) {
                throw new Error("Node HTTP request handler config is not resolved");
            }
            if (abortSignal?.aborted) {
                const abortError = new Error("Request aborted");
                abortError.name = "AbortError";
                reject(abortError);
                return;
            }
            const isSSL = request.protocol === "https:";
            const agent = isSSL ? this.config.httpsAgent : this.config.httpAgent;
            timeouts.push(_timing__WEBPACK_IMPORTED_MODULE_9__.timing.setTimeout(() => {
                this.socketWarningTimestamp = NodeHttpHandler.checkSocketUsage(agent, this.socketWarningTimestamp, this.config.logger);
            }, this.config.socketAcquisitionWarningTimeout ??
                (this.config.requestTimeout ?? 2000) + (this.config.connectionTimeout ?? 1000)));
            const queryString = (0,_smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__.buildQueryString)(request.query || {});
            let auth = undefined;
            if (request.username != null || request.password != null) {
                const username = request.username ?? "";
                const password = request.password ?? "";
                auth = `${username}:${password}`;
            }
            let path = request.path;
            if (queryString) {
                path += `?${queryString}`;
            }
            if (request.fragment) {
                path += `#${request.fragment}`;
            }
            let hostname = request.hostname ?? "";
            if (hostname[0] === "[" && hostname.endsWith("]")) {
                hostname = request.hostname.slice(1, -1);
            }
            else {
                hostname = request.hostname;
            }
            const nodeHttpsOptions = {
                headers: request.headers,
                host: hostname,
                method: request.method,
                path,
                port: request.port,
                agent,
                auth,
            };
            const requestFunc = isSSL ? https__WEBPACK_IMPORTED_MODULE_3__.request : http__WEBPACK_IMPORTED_MODULE_2__.request;
            const req = requestFunc(nodeHttpsOptions, (res) => {
                const httpResponse = new _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpResponse({
                    statusCode: res.statusCode || -1,
                    reason: res.statusMessage,
                    headers: (0,_get_transformed_headers__WEBPACK_IMPORTED_MODULE_5__.getTransformedHeaders)(res.headers),
                    body: res,
                });
                resolve({ response: httpResponse });
            });
            req.on("error", (err) => {
                if (_constants__WEBPACK_IMPORTED_MODULE_4__.NODEJS_TIMEOUT_ERROR_CODES.includes(err.code)) {
                    reject(Object.assign(err, { name: "TimeoutError" }));
                }
                else {
                    reject(err);
                }
            });
            if (abortSignal) {
                const onAbort = () => {
                    req.destroy();
                    const abortError = new Error("Request aborted");
                    abortError.name = "AbortError";
                    reject(abortError);
                };
                if (typeof abortSignal.addEventListener === "function") {
                    const signal = abortSignal;
                    signal.addEventListener("abort", onAbort, { once: true });
                    req.once("close", () => signal.removeEventListener("abort", onAbort));
                }
                else {
                    abortSignal.onabort = onAbort;
                }
            }
            timeouts.push((0,_set_connection_timeout__WEBPACK_IMPORTED_MODULE_6__.setConnectionTimeout)(req, reject, this.config.connectionTimeout));
            timeouts.push((0,_set_socket_timeout__WEBPACK_IMPORTED_MODULE_8__.setSocketTimeout)(req, reject, this.config.requestTimeout));
            const httpAgent = nodeHttpsOptions.agent;
            if (typeof httpAgent === "object" && "keepAlive" in httpAgent) {
                timeouts.push((0,_set_socket_keep_alive__WEBPACK_IMPORTED_MODULE_7__.setSocketKeepAlive)(req, {
                    keepAlive: httpAgent.keepAlive,
                    keepAliveMsecs: httpAgent.keepAliveMsecs,
                }));
            }
            writeRequestBodyPromise = (0,_write_request_body__WEBPACK_IMPORTED_MODULE_10__.writeRequestBody)(req, request, this.config.requestTimeout).catch((e) => {
                timeouts.forEach(_timing__WEBPACK_IMPORTED_MODULE_9__.timing.clearTimeout);
                return _reject(e);
            });
        });
    }
    updateHttpClientConfig(key, value) {
        this.config = undefined;
        this.configProvider = this.configProvider.then((config) => {
            return {
                ...config,
                [key]: value,
            };
        });
    }
    httpHandlerConfigs() {
        return this.config ?? {};
    }
}


/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-manager.js":
/*!******************************************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-manager.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NodeHttp2ConnectionManager: () => (/* binding */ NodeHttp2ConnectionManager)
/* harmony export */ });
/* harmony import */ var http2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! http2 */ "http2");
/* harmony import */ var http2__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(http2__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_http2_connection_pool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node-http2-connection-pool */ "../node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-pool.js");


class NodeHttp2ConnectionManager {
    constructor(config) {
        this.sessionCache = new Map();
        this.config = config;
        if (this.config.maxConcurrency && this.config.maxConcurrency <= 0) {
            throw new RangeError("maxConcurrency must be greater than zero.");
        }
    }
    lease(requestContext, connectionConfiguration) {
        const url = this.getUrlString(requestContext);
        const existingPool = this.sessionCache.get(url);
        if (existingPool) {
            const existingSession = existingPool.poll();
            if (existingSession && !this.config.disableConcurrency) {
                return existingSession;
            }
        }
        const session = http2__WEBPACK_IMPORTED_MODULE_0___default().connect(url);
        if (this.config.maxConcurrency) {
            session.settings({ maxConcurrentStreams: this.config.maxConcurrency }, (err) => {
                if (err) {
                    throw new Error("Fail to set maxConcurrentStreams to " +
                        this.config.maxConcurrency +
                        "when creating new session for " +
                        requestContext.destination.toString());
                }
            });
        }
        session.unref();
        const destroySessionCb = () => {
            session.destroy();
            this.deleteSession(url, session);
        };
        session.on("goaway", destroySessionCb);
        session.on("error", destroySessionCb);
        session.on("frameError", destroySessionCb);
        session.on("close", () => this.deleteSession(url, session));
        if (connectionConfiguration.requestTimeout) {
            session.setTimeout(connectionConfiguration.requestTimeout, destroySessionCb);
        }
        const connectionPool = this.sessionCache.get(url) || new _node_http2_connection_pool__WEBPACK_IMPORTED_MODULE_1__.NodeHttp2ConnectionPool();
        connectionPool.offerLast(session);
        this.sessionCache.set(url, connectionPool);
        return session;
    }
    deleteSession(authority, session) {
        const existingConnectionPool = this.sessionCache.get(authority);
        if (!existingConnectionPool) {
            return;
        }
        if (!existingConnectionPool.contains(session)) {
            return;
        }
        existingConnectionPool.remove(session);
        this.sessionCache.set(authority, existingConnectionPool);
    }
    release(requestContext, session) {
        const cacheKey = this.getUrlString(requestContext);
        this.sessionCache.get(cacheKey)?.offerLast(session);
    }
    destroy() {
        for (const [key, connectionPool] of this.sessionCache) {
            for (const session of connectionPool) {
                if (!session.destroyed) {
                    session.destroy();
                }
                connectionPool.remove(session);
            }
            this.sessionCache.delete(key);
        }
    }
    setMaxConcurrentStreams(maxConcurrentStreams) {
        if (maxConcurrentStreams && maxConcurrentStreams <= 0) {
            throw new RangeError("maxConcurrentStreams must be greater than zero.");
        }
        this.config.maxConcurrency = maxConcurrentStreams;
    }
    setDisableConcurrentStreams(disableConcurrentStreams) {
        this.config.disableConcurrency = disableConcurrentStreams;
    }
    getUrlString(request) {
        return request.destination.toString();
    }
}


/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-pool.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-pool.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NodeHttp2ConnectionPool: () => (/* binding */ NodeHttp2ConnectionPool)
/* harmony export */ });
class NodeHttp2ConnectionPool {
    constructor(sessions) {
        this.sessions = [];
        this.sessions = sessions ?? [];
    }
    poll() {
        if (this.sessions.length > 0) {
            return this.sessions.shift();
        }
    }
    offerLast(session) {
        this.sessions.push(session);
    }
    contains(session) {
        return this.sessions.includes(session);
    }
    remove(session) {
        this.sessions = this.sessions.filter((s) => s !== session);
    }
    [Symbol.iterator]() {
        return this.sessions[Symbol.iterator]();
    }
    destroy(connection) {
        for (const session of this.sessions) {
            if (session === connection) {
                if (!session.destroyed) {
                    session.destroy();
                }
            }
        }
    }
}


/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/node-http2-handler.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/node-http2-handler.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NodeHttp2Handler: () => (/* binding */ NodeHttp2Handler)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/querystring-builder */ "../node_modules/@smithy/querystring-builder/dist-es/index.js");
/* harmony import */ var http2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! http2 */ "http2");
/* harmony import */ var http2__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(http2__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _get_transformed_headers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./get-transformed-headers */ "../node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js");
/* harmony import */ var _node_http2_connection_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./node-http2-connection-manager */ "../node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-manager.js");
/* harmony import */ var _write_request_body__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./write-request-body */ "../node_modules/@smithy/node-http-handler/dist-es/write-request-body.js");






class NodeHttp2Handler {
    static create(instanceOrOptions) {
        if (typeof instanceOrOptions?.handle === "function") {
            return instanceOrOptions;
        }
        return new NodeHttp2Handler(instanceOrOptions);
    }
    constructor(options) {
        this.metadata = { handlerProtocol: "h2" };
        this.connectionManager = new _node_http2_connection_manager__WEBPACK_IMPORTED_MODULE_4__.NodeHttp2ConnectionManager({});
        this.configProvider = new Promise((resolve, reject) => {
            if (typeof options === "function") {
                options()
                    .then((opts) => {
                    resolve(opts || {});
                })
                    .catch(reject);
            }
            else {
                resolve(options || {});
            }
        });
    }
    destroy() {
        this.connectionManager.destroy();
    }
    async handle(request, { abortSignal } = {}) {
        if (!this.config) {
            this.config = await this.configProvider;
            this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams || false);
            if (this.config.maxConcurrentStreams) {
                this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams);
            }
        }
        const { requestTimeout, disableConcurrentStreams } = this.config;
        return new Promise((_resolve, _reject) => {
            let fulfilled = false;
            let writeRequestBodyPromise = undefined;
            const resolve = async (arg) => {
                await writeRequestBodyPromise;
                _resolve(arg);
            };
            const reject = async (arg) => {
                await writeRequestBodyPromise;
                _reject(arg);
            };
            if (abortSignal?.aborted) {
                fulfilled = true;
                const abortError = new Error("Request aborted");
                abortError.name = "AbortError";
                reject(abortError);
                return;
            }
            const { hostname, method, port, protocol, query } = request;
            let auth = "";
            if (request.username != null || request.password != null) {
                const username = request.username ?? "";
                const password = request.password ?? "";
                auth = `${username}:${password}@`;
            }
            const authority = `${protocol}//${auth}${hostname}${port ? `:${port}` : ""}`;
            const requestContext = { destination: new URL(authority) };
            const session = this.connectionManager.lease(requestContext, {
                requestTimeout: this.config?.sessionTimeout,
                disableConcurrentStreams: disableConcurrentStreams || false,
            });
            const rejectWithDestroy = (err) => {
                if (disableConcurrentStreams) {
                    this.destroySession(session);
                }
                fulfilled = true;
                reject(err);
            };
            const queryString = (0,_smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__.buildQueryString)(query || {});
            let path = request.path;
            if (queryString) {
                path += `?${queryString}`;
            }
            if (request.fragment) {
                path += `#${request.fragment}`;
            }
            const req = session.request({
                ...request.headers,
                [http2__WEBPACK_IMPORTED_MODULE_2__.constants.HTTP2_HEADER_PATH]: path,
                [http2__WEBPACK_IMPORTED_MODULE_2__.constants.HTTP2_HEADER_METHOD]: method,
            });
            session.ref();
            req.on("response", (headers) => {
                const httpResponse = new _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpResponse({
                    statusCode: headers[":status"] || -1,
                    headers: (0,_get_transformed_headers__WEBPACK_IMPORTED_MODULE_3__.getTransformedHeaders)(headers),
                    body: req,
                });
                fulfilled = true;
                resolve({ response: httpResponse });
                if (disableConcurrentStreams) {
                    session.close();
                    this.connectionManager.deleteSession(authority, session);
                }
            });
            if (requestTimeout) {
                req.setTimeout(requestTimeout, () => {
                    req.close();
                    const timeoutError = new Error(`Stream timed out because of no activity for ${requestTimeout} ms`);
                    timeoutError.name = "TimeoutError";
                    rejectWithDestroy(timeoutError);
                });
            }
            if (abortSignal) {
                const onAbort = () => {
                    req.close();
                    const abortError = new Error("Request aborted");
                    abortError.name = "AbortError";
                    rejectWithDestroy(abortError);
                };
                if (typeof abortSignal.addEventListener === "function") {
                    const signal = abortSignal;
                    signal.addEventListener("abort", onAbort, { once: true });
                    req.once("close", () => signal.removeEventListener("abort", onAbort));
                }
                else {
                    abortSignal.onabort = onAbort;
                }
            }
            req.on("frameError", (type, code, id) => {
                rejectWithDestroy(new Error(`Frame type id ${type} in stream id ${id} has failed with code ${code}.`));
            });
            req.on("error", rejectWithDestroy);
            req.on("aborted", () => {
                rejectWithDestroy(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${req.rstCode}.`));
            });
            req.on("close", () => {
                session.unref();
                if (disableConcurrentStreams) {
                    session.destroy();
                }
                if (!fulfilled) {
                    rejectWithDestroy(new Error("Unexpected error: http2 request did not get a response"));
                }
            });
            writeRequestBodyPromise = (0,_write_request_body__WEBPACK_IMPORTED_MODULE_5__.writeRequestBody)(req, request, requestTimeout);
        });
    }
    updateHttpClientConfig(key, value) {
        this.config = undefined;
        this.configProvider = this.configProvider.then((config) => {
            return {
                ...config,
                [key]: value,
            };
        });
    }
    httpHandlerConfigs() {
        return this.config ?? {};
    }
    destroySession(session) {
        if (!session.destroyed) {
            session.destroy();
        }
    }
}


/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/set-connection-timeout.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/set-connection-timeout.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   setConnectionTimeout: () => (/* binding */ setConnectionTimeout)
/* harmony export */ });
/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timing */ "../node_modules/@smithy/node-http-handler/dist-es/timing.js");

const DEFER_EVENT_LISTENER_TIME = 1000;
const setConnectionTimeout = (request, reject, timeoutInMs = 0) => {
    if (!timeoutInMs) {
        return -1;
    }
    const registerTimeout = (offset) => {
        const timeoutId = _timing__WEBPACK_IMPORTED_MODULE_0__.timing.setTimeout(() => {
            request.destroy();
            reject(Object.assign(new Error(`Socket timed out without establishing a connection within ${timeoutInMs} ms`), {
                name: "TimeoutError",
            }));
        }, timeoutInMs - offset);
        const doWithSocket = (socket) => {
            if (socket?.connecting) {
                socket.on("connect", () => {
                    _timing__WEBPACK_IMPORTED_MODULE_0__.timing.clearTimeout(timeoutId);
                });
            }
            else {
                _timing__WEBPACK_IMPORTED_MODULE_0__.timing.clearTimeout(timeoutId);
            }
        };
        if (request.socket) {
            doWithSocket(request.socket);
        }
        else {
            request.on("socket", doWithSocket);
        }
    };
    if (timeoutInMs < 2000) {
        registerTimeout(0);
        return 0;
    }
    return _timing__WEBPACK_IMPORTED_MODULE_0__.timing.setTimeout(registerTimeout.bind(null, DEFER_EVENT_LISTENER_TIME), DEFER_EVENT_LISTENER_TIME);
};


/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/set-socket-keep-alive.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/set-socket-keep-alive.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   setSocketKeepAlive: () => (/* binding */ setSocketKeepAlive)
/* harmony export */ });
/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timing */ "../node_modules/@smithy/node-http-handler/dist-es/timing.js");

const DEFER_EVENT_LISTENER_TIME = 3000;
const setSocketKeepAlive = (request, { keepAlive, keepAliveMsecs }, deferTimeMs = DEFER_EVENT_LISTENER_TIME) => {
    if (keepAlive !== true) {
        return -1;
    }
    const registerListener = () => {
        if (request.socket) {
            request.socket.setKeepAlive(keepAlive, keepAliveMsecs || 0);
        }
        else {
            request.on("socket", (socket) => {
                socket.setKeepAlive(keepAlive, keepAliveMsecs || 0);
            });
        }
    };
    if (deferTimeMs === 0) {
        registerListener();
        return 0;
    }
    return _timing__WEBPACK_IMPORTED_MODULE_0__.timing.setTimeout(registerListener, deferTimeMs);
};


/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/set-socket-timeout.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/set-socket-timeout.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   setSocketTimeout: () => (/* binding */ setSocketTimeout)
/* harmony export */ });
/* harmony import */ var _node_http_handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node-http-handler */ "../node_modules/@smithy/node-http-handler/dist-es/node-http-handler.js");
/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./timing */ "../node_modules/@smithy/node-http-handler/dist-es/timing.js");


const DEFER_EVENT_LISTENER_TIME = 3000;
const setSocketTimeout = (request, reject, timeoutInMs = _node_http_handler__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_REQUEST_TIMEOUT) => {
    const registerTimeout = (offset) => {
        const timeout = timeoutInMs - offset;
        const onTimeout = () => {
            request.destroy();
            reject(Object.assign(new Error(`Connection timed out after ${timeoutInMs} ms`), { name: "TimeoutError" }));
        };
        if (request.socket) {
            request.socket.setTimeout(timeout, onTimeout);
        }
        else {
            request.setTimeout(timeout, onTimeout);
        }
    };
    if (0 < timeoutInMs && timeoutInMs < 6000) {
        registerTimeout(0);
        return 0;
    }
    return _timing__WEBPACK_IMPORTED_MODULE_1__.timing.setTimeout(registerTimeout.bind(null, timeoutInMs === 0 ? 0 : DEFER_EVENT_LISTENER_TIME), DEFER_EVENT_LISTENER_TIME);
};


/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/stream-collector/collector.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/stream-collector/collector.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Collector: () => (/* binding */ Collector)
/* harmony export */ });
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ "stream");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);

class Collector extends stream__WEBPACK_IMPORTED_MODULE_0__.Writable {
    constructor() {
        super(...arguments);
        this.bufferedBytes = [];
    }
    _write(chunk, encoding, callback) {
        this.bufferedBytes.push(chunk);
        callback();
    }
}


/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/stream-collector/index.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/stream-collector/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   streamCollector: () => (/* binding */ streamCollector)
/* harmony export */ });
/* harmony import */ var _collector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./collector */ "../node_modules/@smithy/node-http-handler/dist-es/stream-collector/collector.js");

const streamCollector = (stream) => {
    if (isReadableStreamInstance(stream)) {
        return collectReadableStream(stream);
    }
    return new Promise((resolve, reject) => {
        const collector = new _collector__WEBPACK_IMPORTED_MODULE_0__.Collector();
        stream.pipe(collector);
        stream.on("error", (err) => {
            collector.end();
            reject(err);
        });
        collector.on("error", reject);
        collector.on("finish", function () {
            const bytes = new Uint8Array(Buffer.concat(this.bufferedBytes));
            resolve(bytes);
        });
    });
};
const isReadableStreamInstance = (stream) => typeof ReadableStream === "function" && stream instanceof ReadableStream;
async function collectReadableStream(stream) {
    const chunks = [];
    const reader = stream.getReader();
    let isDone = false;
    let length = 0;
    while (!isDone) {
        const { done, value } = await reader.read();
        if (value) {
            chunks.push(value);
            length += value.length;
        }
        isDone = done;
    }
    const collected = new Uint8Array(length);
    let offset = 0;
    for (const chunk of chunks) {
        collected.set(chunk, offset);
        offset += chunk.length;
    }
    return collected;
}


/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/timing.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/timing.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   timing: () => (/* binding */ timing)
/* harmony export */ });
const timing = {
    setTimeout: (cb, ms) => setTimeout(cb, ms),
    clearTimeout: (timeoutId) => clearTimeout(timeoutId),
};


/***/ }),

/***/ "../node_modules/@smithy/node-http-handler/dist-es/write-request-body.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@smithy/node-http-handler/dist-es/write-request-body.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   writeRequestBody: () => (/* binding */ writeRequestBody)
/* harmony export */ });
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ "stream");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./timing */ "../node_modules/@smithy/node-http-handler/dist-es/timing.js");


const MIN_WAIT_TIME = 6000;
async function writeRequestBody(httpRequest, request, maxContinueTimeoutMs = MIN_WAIT_TIME) {
    const headers = request.headers ?? {};
    const expect = headers["Expect"] || headers["expect"];
    let timeoutId = -1;
    let sendBody = true;
    if (expect === "100-continue") {
        sendBody = await Promise.race([
            new Promise((resolve) => {
                timeoutId = Number(_timing__WEBPACK_IMPORTED_MODULE_1__.timing.setTimeout(() => resolve(true), Math.max(MIN_WAIT_TIME, maxContinueTimeoutMs)));
            }),
            new Promise((resolve) => {
                httpRequest.on("continue", () => {
                    _timing__WEBPACK_IMPORTED_MODULE_1__.timing.clearTimeout(timeoutId);
                    resolve(true);
                });
                httpRequest.on("response", () => {
                    _timing__WEBPACK_IMPORTED_MODULE_1__.timing.clearTimeout(timeoutId);
                    resolve(false);
                });
                httpRequest.on("error", () => {
                    _timing__WEBPACK_IMPORTED_MODULE_1__.timing.clearTimeout(timeoutId);
                    resolve(false);
                });
            }),
        ]);
    }
    if (sendBody) {
        writeBody(httpRequest, request.body);
    }
}
function writeBody(httpRequest, body) {
    if (body instanceof stream__WEBPACK_IMPORTED_MODULE_0__.Readable) {
        body.pipe(httpRequest);
        return;
    }
    if (body) {
        if (Buffer.isBuffer(body) || typeof body === "string") {
            httpRequest.end(body);
            return;
        }
        const uint8 = body;
        if (typeof uint8 === "object" &&
            uint8.buffer &&
            typeof uint8.byteOffset === "number" &&
            typeof uint8.byteLength === "number") {
            httpRequest.end(Buffer.from(uint8.buffer, uint8.byteOffset, uint8.byteLength));
            return;
        }
        httpRequest.end(Buffer.from(body));
        return;
    }
    httpRequest.end();
}


/***/ }),

/***/ "../node_modules/@smithy/property-provider/dist-es/CredentialsProviderError.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@smithy/property-provider/dist-es/CredentialsProviderError.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CredentialsProviderError: () => (/* binding */ CredentialsProviderError)
/* harmony export */ });
/* harmony import */ var _ProviderError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ProviderError */ "../node_modules/@smithy/property-provider/dist-es/ProviderError.js");

class CredentialsProviderError extends _ProviderError__WEBPACK_IMPORTED_MODULE_0__.ProviderError {
    constructor(message, options = true) {
        super(message, options);
        this.name = "CredentialsProviderError";
        Object.setPrototypeOf(this, CredentialsProviderError.prototype);
    }
}


/***/ }),

/***/ "../node_modules/@smithy/property-provider/dist-es/ProviderError.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/property-provider/dist-es/ProviderError.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ProviderError: () => (/* binding */ ProviderError)
/* harmony export */ });
class ProviderError extends Error {
    constructor(message, options = true) {
        let logger;
        let tryNextLink = true;
        if (typeof options === "boolean") {
            logger = undefined;
            tryNextLink = options;
        }
        else if (options != null && typeof options === "object") {
            logger = options.logger;
            tryNextLink = options.tryNextLink ?? true;
        }
        super(message);
        this.name = "ProviderError";
        this.tryNextLink = tryNextLink;
        Object.setPrototypeOf(this, ProviderError.prototype);
        logger?.debug?.(`@smithy/property-provider ${tryNextLink ? "->" : "(!)"} ${message}`);
    }
    static from(error, options = true) {
        return Object.assign(new this(error.message, options), error);
    }
}


/***/ }),

/***/ "../node_modules/@smithy/property-provider/dist-es/TokenProviderError.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@smithy/property-provider/dist-es/TokenProviderError.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TokenProviderError: () => (/* binding */ TokenProviderError)
/* harmony export */ });
/* harmony import */ var _ProviderError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ProviderError */ "../node_modules/@smithy/property-provider/dist-es/ProviderError.js");

class TokenProviderError extends _ProviderError__WEBPACK_IMPORTED_MODULE_0__.ProviderError {
    constructor(message, options = true) {
        super(message, options);
        this.name = "TokenProviderError";
        Object.setPrototypeOf(this, TokenProviderError.prototype);
    }
}


/***/ }),

/***/ "../node_modules/@smithy/property-provider/dist-es/chain.js":
/*!******************************************************************!*\
  !*** ../node_modules/@smithy/property-provider/dist-es/chain.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   chain: () => (/* binding */ chain)
/* harmony export */ });
/* harmony import */ var _ProviderError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ProviderError */ "../node_modules/@smithy/property-provider/dist-es/ProviderError.js");

const chain = (...providers) => async () => {
    if (providers.length === 0) {
        throw new _ProviderError__WEBPACK_IMPORTED_MODULE_0__.ProviderError("No providers in chain");
    }
    let lastProviderError;
    for (const provider of providers) {
        try {
            const credentials = await provider();
            return credentials;
        }
        catch (err) {
            lastProviderError = err;
            if (err?.tryNextLink) {
                continue;
            }
            throw err;
        }
    }
    throw lastProviderError;
};


/***/ }),

/***/ "../node_modules/@smithy/property-provider/dist-es/fromStatic.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/property-provider/dist-es/fromStatic.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromStatic: () => (/* binding */ fromStatic)
/* harmony export */ });
const fromStatic = (staticValue) => () => Promise.resolve(staticValue);


/***/ }),

/***/ "../node_modules/@smithy/property-provider/dist-es/index.js":
/*!******************************************************************!*\
  !*** ../node_modules/@smithy/property-provider/dist-es/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CredentialsProviderError: () => (/* reexport safe */ _CredentialsProviderError__WEBPACK_IMPORTED_MODULE_0__.CredentialsProviderError),
/* harmony export */   ProviderError: () => (/* reexport safe */ _ProviderError__WEBPACK_IMPORTED_MODULE_1__.ProviderError),
/* harmony export */   TokenProviderError: () => (/* reexport safe */ _TokenProviderError__WEBPACK_IMPORTED_MODULE_2__.TokenProviderError),
/* harmony export */   chain: () => (/* reexport safe */ _chain__WEBPACK_IMPORTED_MODULE_3__.chain),
/* harmony export */   fromStatic: () => (/* reexport safe */ _fromStatic__WEBPACK_IMPORTED_MODULE_4__.fromStatic),
/* harmony export */   memoize: () => (/* reexport safe */ _memoize__WEBPACK_IMPORTED_MODULE_5__.memoize)
/* harmony export */ });
/* harmony import */ var _CredentialsProviderError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CredentialsProviderError */ "../node_modules/@smithy/property-provider/dist-es/CredentialsProviderError.js");
/* harmony import */ var _ProviderError__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ProviderError */ "../node_modules/@smithy/property-provider/dist-es/ProviderError.js");
/* harmony import */ var _TokenProviderError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TokenProviderError */ "../node_modules/@smithy/property-provider/dist-es/TokenProviderError.js");
/* harmony import */ var _chain__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chain */ "../node_modules/@smithy/property-provider/dist-es/chain.js");
/* harmony import */ var _fromStatic__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fromStatic */ "../node_modules/@smithy/property-provider/dist-es/fromStatic.js");
/* harmony import */ var _memoize__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./memoize */ "../node_modules/@smithy/property-provider/dist-es/memoize.js");








/***/ }),

/***/ "../node_modules/@smithy/property-provider/dist-es/memoize.js":
/*!********************************************************************!*\
  !*** ../node_modules/@smithy/property-provider/dist-es/memoize.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   memoize: () => (/* binding */ memoize)
/* harmony export */ });
const memoize = (provider, isExpired, requiresRefresh) => {
    let resolved;
    let pending;
    let hasResult;
    let isConstant = false;
    const coalesceProvider = async () => {
        if (!pending) {
            pending = provider();
        }
        try {
            resolved = await pending;
            hasResult = true;
            isConstant = false;
        }
        finally {
            pending = undefined;
        }
        return resolved;
    };
    if (isExpired === undefined) {
        return async (options) => {
            if (!hasResult || options?.forceRefresh) {
                resolved = await coalesceProvider();
            }
            return resolved;
        };
    }
    return async (options) => {
        if (!hasResult || options?.forceRefresh) {
            resolved = await coalesceProvider();
        }
        if (isConstant) {
            return resolved;
        }
        if (requiresRefresh && !requiresRefresh(resolved)) {
            isConstant = true;
            return resolved;
        }
        if (isExpired(resolved)) {
            await coalesceProvider();
            return resolved;
        }
        return resolved;
    };
};


/***/ }),

/***/ "../node_modules/@smithy/protocol-http/dist-es/Field.js":
/*!**************************************************************!*\
  !*** ../node_modules/@smithy/protocol-http/dist-es/Field.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Field: () => (/* binding */ Field)
/* harmony export */ });
/* harmony import */ var _smithy_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/types */ "../node_modules/@smithy/types/dist-es/index.js");

class Field {
    constructor({ name, kind = _smithy_types__WEBPACK_IMPORTED_MODULE_0__.FieldPosition.HEADER, values = [] }) {
        this.name = name;
        this.kind = kind;
        this.values = values;
    }
    add(value) {
        this.values.push(value);
    }
    set(values) {
        this.values = values;
    }
    remove(value) {
        this.values = this.values.filter((v) => v !== value);
    }
    toString() {
        return this.values.map((v) => (v.includes(",") || v.includes(" ") ? `"${v}"` : v)).join(", ");
    }
    get() {
        return this.values;
    }
}


/***/ }),

/***/ "../node_modules/@smithy/protocol-http/dist-es/Fields.js":
/*!***************************************************************!*\
  !*** ../node_modules/@smithy/protocol-http/dist-es/Fields.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Fields: () => (/* binding */ Fields)
/* harmony export */ });
class Fields {
    constructor({ fields = [], encoding = "utf-8" }) {
        this.entries = {};
        fields.forEach(this.setField.bind(this));
        this.encoding = encoding;
    }
    setField(field) {
        this.entries[field.name.toLowerCase()] = field;
    }
    getField(name) {
        return this.entries[name.toLowerCase()];
    }
    removeField(name) {
        delete this.entries[name.toLowerCase()];
    }
    getByType(kind) {
        return Object.values(this.entries).filter((field) => field.kind === kind);
    }
}


/***/ }),

/***/ "../node_modules/@smithy/protocol-http/dist-es/extensions/httpExtensionConfiguration.js":
/*!**********************************************************************************************!*\
  !*** ../node_modules/@smithy/protocol-http/dist-es/extensions/httpExtensionConfiguration.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHttpHandlerExtensionConfiguration: () => (/* binding */ getHttpHandlerExtensionConfiguration),
/* harmony export */   resolveHttpHandlerRuntimeConfig: () => (/* binding */ resolveHttpHandlerRuntimeConfig)
/* harmony export */ });
const getHttpHandlerExtensionConfiguration = (runtimeConfig) => {
    let httpHandler = runtimeConfig.httpHandler;
    return {
        setHttpHandler(handler) {
            httpHandler = handler;
        },
        httpHandler() {
            return httpHandler;
        },
        updateHttpClientConfig(key, value) {
            httpHandler.updateHttpClientConfig(key, value);
        },
        httpHandlerConfigs() {
            return httpHandler.httpHandlerConfigs();
        },
    };
};
const resolveHttpHandlerRuntimeConfig = (httpHandlerExtensionConfiguration) => {
    return {
        httpHandler: httpHandlerExtensionConfiguration.httpHandler(),
    };
};


/***/ }),

/***/ "../node_modules/@smithy/protocol-http/dist-es/extensions/index.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@smithy/protocol-http/dist-es/extensions/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHttpHandlerExtensionConfiguration: () => (/* reexport safe */ _httpExtensionConfiguration__WEBPACK_IMPORTED_MODULE_0__.getHttpHandlerExtensionConfiguration),
/* harmony export */   resolveHttpHandlerRuntimeConfig: () => (/* reexport safe */ _httpExtensionConfiguration__WEBPACK_IMPORTED_MODULE_0__.resolveHttpHandlerRuntimeConfig)
/* harmony export */ });
/* harmony import */ var _httpExtensionConfiguration__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./httpExtensionConfiguration */ "../node_modules/@smithy/protocol-http/dist-es/extensions/httpExtensionConfiguration.js");



/***/ }),

/***/ "../node_modules/@smithy/protocol-http/dist-es/httpHandler.js":
/*!********************************************************************!*\
  !*** ../node_modules/@smithy/protocol-http/dist-es/httpHandler.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/protocol-http/dist-es/httpRequest.js":
/*!********************************************************************!*\
  !*** ../node_modules/@smithy/protocol-http/dist-es/httpRequest.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpRequest: () => (/* binding */ HttpRequest)
/* harmony export */ });
class HttpRequest {
    constructor(options) {
        this.method = options.method || "GET";
        this.hostname = options.hostname || "localhost";
        this.port = options.port;
        this.query = options.query || {};
        this.headers = options.headers || {};
        this.body = options.body;
        this.protocol = options.protocol
            ? options.protocol.slice(-1) !== ":"
                ? `${options.protocol}:`
                : options.protocol
            : "https:";
        this.path = options.path ? (options.path.charAt(0) !== "/" ? `/${options.path}` : options.path) : "/";
        this.username = options.username;
        this.password = options.password;
        this.fragment = options.fragment;
    }
    static clone(request) {
        const cloned = new HttpRequest({
            ...request,
            headers: { ...request.headers },
        });
        if (cloned.query) {
            cloned.query = cloneQuery(cloned.query);
        }
        return cloned;
    }
    static isInstance(request) {
        if (!request) {
            return false;
        }
        const req = request;
        return ("method" in req &&
            "protocol" in req &&
            "hostname" in req &&
            "path" in req &&
            typeof req["query"] === "object" &&
            typeof req["headers"] === "object");
    }
    clone() {
        return HttpRequest.clone(this);
    }
}
function cloneQuery(query) {
    return Object.keys(query).reduce((carry, paramName) => {
        const param = query[paramName];
        return {
            ...carry,
            [paramName]: Array.isArray(param) ? [...param] : param,
        };
    }, {});
}


/***/ }),

/***/ "../node_modules/@smithy/protocol-http/dist-es/httpResponse.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@smithy/protocol-http/dist-es/httpResponse.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpResponse: () => (/* binding */ HttpResponse)
/* harmony export */ });
class HttpResponse {
    constructor(options) {
        this.statusCode = options.statusCode;
        this.reason = options.reason;
        this.headers = options.headers || {};
        this.body = options.body;
    }
    static isInstance(response) {
        if (!response)
            return false;
        const resp = response;
        return typeof resp.statusCode === "number" && typeof resp.headers === "object";
    }
}


/***/ }),

/***/ "../node_modules/@smithy/protocol-http/dist-es/index.js":
/*!**************************************************************!*\
  !*** ../node_modules/@smithy/protocol-http/dist-es/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Field: () => (/* reexport safe */ _Field__WEBPACK_IMPORTED_MODULE_1__.Field),
/* harmony export */   Fields: () => (/* reexport safe */ _Fields__WEBPACK_IMPORTED_MODULE_2__.Fields),
/* harmony export */   HttpRequest: () => (/* reexport safe */ _httpRequest__WEBPACK_IMPORTED_MODULE_4__.HttpRequest),
/* harmony export */   HttpResponse: () => (/* reexport safe */ _httpResponse__WEBPACK_IMPORTED_MODULE_5__.HttpResponse),
/* harmony export */   getHttpHandlerExtensionConfiguration: () => (/* reexport safe */ _extensions__WEBPACK_IMPORTED_MODULE_0__.getHttpHandlerExtensionConfiguration),
/* harmony export */   isValidHostname: () => (/* reexport safe */ _isValidHostname__WEBPACK_IMPORTED_MODULE_6__.isValidHostname),
/* harmony export */   resolveHttpHandlerRuntimeConfig: () => (/* reexport safe */ _extensions__WEBPACK_IMPORTED_MODULE_0__.resolveHttpHandlerRuntimeConfig)
/* harmony export */ });
/* harmony import */ var _extensions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./extensions */ "../node_modules/@smithy/protocol-http/dist-es/extensions/index.js");
/* harmony import */ var _Field__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Field */ "../node_modules/@smithy/protocol-http/dist-es/Field.js");
/* harmony import */ var _Fields__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Fields */ "../node_modules/@smithy/protocol-http/dist-es/Fields.js");
/* harmony import */ var _httpHandler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./httpHandler */ "../node_modules/@smithy/protocol-http/dist-es/httpHandler.js");
/* harmony import */ var _httpRequest__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./httpRequest */ "../node_modules/@smithy/protocol-http/dist-es/httpRequest.js");
/* harmony import */ var _httpResponse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./httpResponse */ "../node_modules/@smithy/protocol-http/dist-es/httpResponse.js");
/* harmony import */ var _isValidHostname__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./isValidHostname */ "../node_modules/@smithy/protocol-http/dist-es/isValidHostname.js");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./types */ "../node_modules/@smithy/protocol-http/dist-es/types.js");










/***/ }),

/***/ "../node_modules/@smithy/protocol-http/dist-es/isValidHostname.js":
/*!************************************************************************!*\
  !*** ../node_modules/@smithy/protocol-http/dist-es/isValidHostname.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isValidHostname: () => (/* binding */ isValidHostname)
/* harmony export */ });
function isValidHostname(hostname) {
    const hostPattern = /^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/;
    return hostPattern.test(hostname);
}


/***/ }),

/***/ "../node_modules/@smithy/protocol-http/dist-es/types.js":
/*!**************************************************************!*\
  !*** ../node_modules/@smithy/protocol-http/dist-es/types.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/querystring-builder/dist-es/index.js":
/*!********************************************************************!*\
  !*** ../node_modules/@smithy/querystring-builder/dist-es/index.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   buildQueryString: () => (/* binding */ buildQueryString)
/* harmony export */ });
/* harmony import */ var _smithy_util_uri_escape__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-uri-escape */ "../node_modules/@smithy/util-uri-escape/dist-es/index.js");

function buildQueryString(query) {
    const parts = [];
    for (let key of Object.keys(query).sort()) {
        const value = query[key];
        key = (0,_smithy_util_uri_escape__WEBPACK_IMPORTED_MODULE_0__.escapeUri)(key);
        if (Array.isArray(value)) {
            for (let i = 0, iLen = value.length; i < iLen; i++) {
                parts.push(`${key}=${(0,_smithy_util_uri_escape__WEBPACK_IMPORTED_MODULE_0__.escapeUri)(value[i])}`);
            }
        }
        else {
            let qsEntry = key;
            if (value || typeof value === "string") {
                qsEntry += `=${(0,_smithy_util_uri_escape__WEBPACK_IMPORTED_MODULE_0__.escapeUri)(value)}`;
            }
            parts.push(qsEntry);
        }
    }
    return parts.join("&");
}


/***/ }),

/***/ "../node_modules/@smithy/querystring-parser/dist-es/index.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@smithy/querystring-parser/dist-es/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   parseQueryString: () => (/* binding */ parseQueryString)
/* harmony export */ });
function parseQueryString(querystring) {
    const query = {};
    querystring = querystring.replace(/^\?/, "");
    if (querystring) {
        for (const pair of querystring.split("&")) {
            let [key, value = null] = pair.split("=");
            key = decodeURIComponent(key);
            if (value) {
                value = decodeURIComponent(value);
            }
            if (!(key in query)) {
                query[key] = value;
            }
            else if (Array.isArray(query[key])) {
                query[key].push(value);
            }
            else {
                query[key] = [query[key], value];
            }
        }
    }
    return query;
}


/***/ }),

/***/ "../node_modules/@smithy/service-error-classification/dist-es/constants.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/service-error-classification/dist-es/constants.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CLOCK_SKEW_ERROR_CODES: () => (/* binding */ CLOCK_SKEW_ERROR_CODES),
/* harmony export */   NODEJS_TIMEOUT_ERROR_CODES: () => (/* binding */ NODEJS_TIMEOUT_ERROR_CODES),
/* harmony export */   THROTTLING_ERROR_CODES: () => (/* binding */ THROTTLING_ERROR_CODES),
/* harmony export */   TRANSIENT_ERROR_CODES: () => (/* binding */ TRANSIENT_ERROR_CODES),
/* harmony export */   TRANSIENT_ERROR_STATUS_CODES: () => (/* binding */ TRANSIENT_ERROR_STATUS_CODES)
/* harmony export */ });
const CLOCK_SKEW_ERROR_CODES = [
    "AuthFailure",
    "InvalidSignatureException",
    "RequestExpired",
    "RequestInTheFuture",
    "RequestTimeTooSkewed",
    "SignatureDoesNotMatch",
];
const THROTTLING_ERROR_CODES = [
    "BandwidthLimitExceeded",
    "EC2ThrottledException",
    "LimitExceededException",
    "PriorRequestNotComplete",
    "ProvisionedThroughputExceededException",
    "RequestLimitExceeded",
    "RequestThrottled",
    "RequestThrottledException",
    "SlowDown",
    "ThrottledException",
    "Throttling",
    "ThrottlingException",
    "TooManyRequestsException",
    "TransactionInProgressException",
];
const TRANSIENT_ERROR_CODES = ["TimeoutError", "RequestTimeout", "RequestTimeoutException"];
const TRANSIENT_ERROR_STATUS_CODES = [500, 502, 503, 504];
const NODEJS_TIMEOUT_ERROR_CODES = ["ECONNRESET", "ECONNREFUSED", "EPIPE", "ETIMEDOUT"];


/***/ }),

/***/ "../node_modules/@smithy/service-error-classification/dist-es/index.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/service-error-classification/dist-es/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isClockSkewCorrectedError: () => (/* binding */ isClockSkewCorrectedError),
/* harmony export */   isClockSkewError: () => (/* binding */ isClockSkewError),
/* harmony export */   isRetryableByTrait: () => (/* binding */ isRetryableByTrait),
/* harmony export */   isServerError: () => (/* binding */ isServerError),
/* harmony export */   isThrottlingError: () => (/* binding */ isThrottlingError),
/* harmony export */   isTransientError: () => (/* binding */ isTransientError)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/service-error-classification/dist-es/constants.js");

const isRetryableByTrait = (error) => error.$retryable !== undefined;
const isClockSkewError = (error) => _constants__WEBPACK_IMPORTED_MODULE_0__.CLOCK_SKEW_ERROR_CODES.includes(error.name);
const isClockSkewCorrectedError = (error) => error.$metadata?.clockSkewCorrected;
const isThrottlingError = (error) => error.$metadata?.httpStatusCode === 429 ||
    _constants__WEBPACK_IMPORTED_MODULE_0__.THROTTLING_ERROR_CODES.includes(error.name) ||
    error.$retryable?.throttling == true;
const isTransientError = (error, depth = 0) => isClockSkewCorrectedError(error) ||
    _constants__WEBPACK_IMPORTED_MODULE_0__.TRANSIENT_ERROR_CODES.includes(error.name) ||
    _constants__WEBPACK_IMPORTED_MODULE_0__.NODEJS_TIMEOUT_ERROR_CODES.includes(error?.code || "") ||
    _constants__WEBPACK_IMPORTED_MODULE_0__.TRANSIENT_ERROR_STATUS_CODES.includes(error.$metadata?.httpStatusCode || 0) ||
    (error.cause !== undefined && depth <= 10 && isTransientError(error.cause, depth + 1));
const isServerError = (error) => {
    if (error.$metadata?.httpStatusCode !== undefined) {
        const statusCode = error.$metadata.httpStatusCode;
        if (500 <= statusCode && statusCode <= 599 && !isTransientError(error)) {
            return true;
        }
        return false;
    }
    return false;
};


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getConfigData.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/getConfigData.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getConfigData: () => (/* binding */ getConfigData)
/* harmony export */ });
/* harmony import */ var _smithy_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/types */ "../node_modules/@smithy/types/dist-es/index.js");
/* harmony import */ var _loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loadSharedConfigFiles */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/loadSharedConfigFiles.js");


const getConfigData = (data) => Object.entries(data)
    .filter(([key]) => {
    const indexOfSeparator = key.indexOf(_loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_1__.CONFIG_PREFIX_SEPARATOR);
    if (indexOfSeparator === -1) {
        return false;
    }
    return Object.values(_smithy_types__WEBPACK_IMPORTED_MODULE_0__.IniSectionType).includes(key.substring(0, indexOfSeparator));
})
    .reduce((acc, [key, value]) => {
    const indexOfSeparator = key.indexOf(_loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_1__.CONFIG_PREFIX_SEPARATOR);
    const updatedKey = key.substring(0, indexOfSeparator) === _smithy_types__WEBPACK_IMPORTED_MODULE_0__.IniSectionType.PROFILE ? key.substring(indexOfSeparator + 1) : key;
    acc[updatedKey] = value;
    return acc;
}, {
    ...(data.default && { default: data.default }),
});


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getConfigFilepath.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/getConfigFilepath.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ENV_CONFIG_PATH: () => (/* binding */ ENV_CONFIG_PATH),
/* harmony export */   getConfigFilepath: () => (/* binding */ getConfigFilepath)
/* harmony export */ });
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ "path");
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _getHomeDir__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getHomeDir */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getHomeDir.js");


const ENV_CONFIG_PATH = "AWS_CONFIG_FILE";
const getConfigFilepath = () => process.env[ENV_CONFIG_PATH] || (0,path__WEBPACK_IMPORTED_MODULE_0__.join)((0,_getHomeDir__WEBPACK_IMPORTED_MODULE_1__.getHomeDir)(), ".aws", "config");


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getCredentialsFilepath.js":
/*!****************************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/getCredentialsFilepath.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ENV_CREDENTIALS_PATH: () => (/* binding */ ENV_CREDENTIALS_PATH),
/* harmony export */   getCredentialsFilepath: () => (/* binding */ getCredentialsFilepath)
/* harmony export */ });
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ "path");
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _getHomeDir__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getHomeDir */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getHomeDir.js");


const ENV_CREDENTIALS_PATH = "AWS_SHARED_CREDENTIALS_FILE";
const getCredentialsFilepath = () => process.env[ENV_CREDENTIALS_PATH] || (0,path__WEBPACK_IMPORTED_MODULE_0__.join)((0,_getHomeDir__WEBPACK_IMPORTED_MODULE_1__.getHomeDir)(), ".aws", "credentials");


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getHomeDir.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/getHomeDir.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHomeDir: () => (/* binding */ getHomeDir)
/* harmony export */ });
/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! os */ "os");
/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(os__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ "path");
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);


const homeDirCache = {};
const getHomeDirCacheKey = () => {
    if (process && process.geteuid) {
        return `${process.geteuid()}`;
    }
    return "DEFAULT";
};
const getHomeDir = () => {
    const { HOME, USERPROFILE, HOMEPATH, HOMEDRIVE = `C:${path__WEBPACK_IMPORTED_MODULE_1__.sep}` } = process.env;
    if (HOME)
        return HOME;
    if (USERPROFILE)
        return USERPROFILE;
    if (HOMEPATH)
        return `${HOMEDRIVE}${HOMEPATH}`;
    const homeDirCacheKey = getHomeDirCacheKey();
    if (!homeDirCache[homeDirCacheKey])
        homeDirCache[homeDirCacheKey] = (0,os__WEBPACK_IMPORTED_MODULE_0__.homedir)();
    return homeDirCache[homeDirCacheKey];
};


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getProfileName.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/getProfileName.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_PROFILE: () => (/* binding */ DEFAULT_PROFILE),
/* harmony export */   ENV_PROFILE: () => (/* binding */ ENV_PROFILE),
/* harmony export */   getProfileName: () => (/* binding */ getProfileName)
/* harmony export */ });
const ENV_PROFILE = "AWS_PROFILE";
const DEFAULT_PROFILE = "default";
const getProfileName = (init) => init.profile || process.env[ENV_PROFILE] || DEFAULT_PROFILE;


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getSSOTokenFilepath.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/getSSOTokenFilepath.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSSOTokenFilepath: () => (/* binding */ getSSOTokenFilepath)
/* harmony export */ });
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ "crypto");
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ "path");
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _getHomeDir__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getHomeDir */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getHomeDir.js");



const getSSOTokenFilepath = (id) => {
    const hasher = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.createHash)("sha1");
    const cacheName = hasher.update(id).digest("hex");
    return (0,path__WEBPACK_IMPORTED_MODULE_1__.join)((0,_getHomeDir__WEBPACK_IMPORTED_MODULE_2__.getHomeDir)(), ".aws", "sso", "cache", `${cacheName}.json`);
};


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getSSOTokenFromFile.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/getSSOTokenFromFile.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSSOTokenFromFile: () => (/* binding */ getSSOTokenFromFile)
/* harmony export */ });
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ "fs");
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _getSSOTokenFilepath__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getSSOTokenFilepath */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getSSOTokenFilepath.js");


const { readFile } = fs__WEBPACK_IMPORTED_MODULE_0__.promises;
const getSSOTokenFromFile = async (id) => {
    const ssoTokenFilepath = (0,_getSSOTokenFilepath__WEBPACK_IMPORTED_MODULE_1__.getSSOTokenFilepath)(id);
    const ssoTokenText = await readFile(ssoTokenFilepath, "utf8");
    return JSON.parse(ssoTokenText);
};


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getSsoSessionData.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/getSsoSessionData.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSsoSessionData: () => (/* binding */ getSsoSessionData)
/* harmony export */ });
/* harmony import */ var _smithy_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/types */ "../node_modules/@smithy/types/dist-es/index.js");
/* harmony import */ var _loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loadSharedConfigFiles */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/loadSharedConfigFiles.js");


const getSsoSessionData = (data) => Object.entries(data)
    .filter(([key]) => key.startsWith(_smithy_types__WEBPACK_IMPORTED_MODULE_0__.IniSectionType.SSO_SESSION + _loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_1__.CONFIG_PREFIX_SEPARATOR))
    .reduce((acc, [key, value]) => ({ ...acc, [key.substring(key.indexOf(_loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_1__.CONFIG_PREFIX_SEPARATOR) + 1)]: value }), {});


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/index.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CONFIG_PREFIX_SEPARATOR: () => (/* reexport safe */ _loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_4__.CONFIG_PREFIX_SEPARATOR),
/* harmony export */   DEFAULT_PROFILE: () => (/* reexport safe */ _getProfileName__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_PROFILE),
/* harmony export */   ENV_PROFILE: () => (/* reexport safe */ _getProfileName__WEBPACK_IMPORTED_MODULE_1__.ENV_PROFILE),
/* harmony export */   getHomeDir: () => (/* reexport safe */ _getHomeDir__WEBPACK_IMPORTED_MODULE_0__.getHomeDir),
/* harmony export */   getProfileName: () => (/* reexport safe */ _getProfileName__WEBPACK_IMPORTED_MODULE_1__.getProfileName),
/* harmony export */   getSSOTokenFilepath: () => (/* reexport safe */ _getSSOTokenFilepath__WEBPACK_IMPORTED_MODULE_2__.getSSOTokenFilepath),
/* harmony export */   getSSOTokenFromFile: () => (/* reexport safe */ _getSSOTokenFromFile__WEBPACK_IMPORTED_MODULE_3__.getSSOTokenFromFile),
/* harmony export */   loadSharedConfigFiles: () => (/* reexport safe */ _loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_4__.loadSharedConfigFiles),
/* harmony export */   loadSsoSessionData: () => (/* reexport safe */ _loadSsoSessionData__WEBPACK_IMPORTED_MODULE_5__.loadSsoSessionData),
/* harmony export */   parseKnownFiles: () => (/* reexport safe */ _parseKnownFiles__WEBPACK_IMPORTED_MODULE_6__.parseKnownFiles)
/* harmony export */ });
/* harmony import */ var _getHomeDir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getHomeDir */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getHomeDir.js");
/* harmony import */ var _getProfileName__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getProfileName */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getProfileName.js");
/* harmony import */ var _getSSOTokenFilepath__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getSSOTokenFilepath */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getSSOTokenFilepath.js");
/* harmony import */ var _getSSOTokenFromFile__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getSSOTokenFromFile */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getSSOTokenFromFile.js");
/* harmony import */ var _loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./loadSharedConfigFiles */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/loadSharedConfigFiles.js");
/* harmony import */ var _loadSsoSessionData__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./loadSsoSessionData */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/loadSsoSessionData.js");
/* harmony import */ var _parseKnownFiles__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./parseKnownFiles */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/parseKnownFiles.js");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./types */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/types.js");










/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/loadSharedConfigFiles.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/loadSharedConfigFiles.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CONFIG_PREFIX_SEPARATOR: () => (/* binding */ CONFIG_PREFIX_SEPARATOR),
/* harmony export */   loadSharedConfigFiles: () => (/* binding */ loadSharedConfigFiles)
/* harmony export */ });
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ "path");
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _getConfigData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getConfigData */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getConfigData.js");
/* harmony import */ var _getConfigFilepath__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getConfigFilepath */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getConfigFilepath.js");
/* harmony import */ var _getCredentialsFilepath__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getCredentialsFilepath */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getCredentialsFilepath.js");
/* harmony import */ var _getHomeDir__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getHomeDir */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getHomeDir.js");
/* harmony import */ var _parseIni__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./parseIni */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/parseIni.js");
/* harmony import */ var _slurpFile__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./slurpFile */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/slurpFile.js");







const swallowError = () => ({});
const CONFIG_PREFIX_SEPARATOR = ".";
const loadSharedConfigFiles = async (init = {}) => {
    const { filepath = (0,_getCredentialsFilepath__WEBPACK_IMPORTED_MODULE_3__.getCredentialsFilepath)(), configFilepath = (0,_getConfigFilepath__WEBPACK_IMPORTED_MODULE_2__.getConfigFilepath)() } = init;
    const homeDir = (0,_getHomeDir__WEBPACK_IMPORTED_MODULE_4__.getHomeDir)();
    const relativeHomeDirPrefix = "~/";
    let resolvedFilepath = filepath;
    if (filepath.startsWith(relativeHomeDirPrefix)) {
        resolvedFilepath = (0,path__WEBPACK_IMPORTED_MODULE_0__.join)(homeDir, filepath.slice(2));
    }
    let resolvedConfigFilepath = configFilepath;
    if (configFilepath.startsWith(relativeHomeDirPrefix)) {
        resolvedConfigFilepath = (0,path__WEBPACK_IMPORTED_MODULE_0__.join)(homeDir, configFilepath.slice(2));
    }
    const parsedFiles = await Promise.all([
        (0,_slurpFile__WEBPACK_IMPORTED_MODULE_6__.slurpFile)(resolvedConfigFilepath, {
            ignoreCache: init.ignoreCache,
        })
            .then(_parseIni__WEBPACK_IMPORTED_MODULE_5__.parseIni)
            .then(_getConfigData__WEBPACK_IMPORTED_MODULE_1__.getConfigData)
            .catch(swallowError),
        (0,_slurpFile__WEBPACK_IMPORTED_MODULE_6__.slurpFile)(resolvedFilepath, {
            ignoreCache: init.ignoreCache,
        })
            .then(_parseIni__WEBPACK_IMPORTED_MODULE_5__.parseIni)
            .catch(swallowError),
    ]);
    return {
        configFile: parsedFiles[0],
        credentialsFile: parsedFiles[1],
    };
};


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/loadSsoSessionData.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/loadSsoSessionData.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   loadSsoSessionData: () => (/* binding */ loadSsoSessionData)
/* harmony export */ });
/* harmony import */ var _getConfigFilepath__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getConfigFilepath */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getConfigFilepath.js");
/* harmony import */ var _getSsoSessionData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getSsoSessionData */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/getSsoSessionData.js");
/* harmony import */ var _parseIni__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./parseIni */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/parseIni.js");
/* harmony import */ var _slurpFile__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./slurpFile */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/slurpFile.js");




const swallowError = () => ({});
const loadSsoSessionData = async (init = {}) => (0,_slurpFile__WEBPACK_IMPORTED_MODULE_3__.slurpFile)(init.configFilepath ?? (0,_getConfigFilepath__WEBPACK_IMPORTED_MODULE_0__.getConfigFilepath)())
    .then(_parseIni__WEBPACK_IMPORTED_MODULE_2__.parseIni)
    .then(_getSsoSessionData__WEBPACK_IMPORTED_MODULE_1__.getSsoSessionData)
    .catch(swallowError);


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/mergeConfigFiles.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/mergeConfigFiles.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   mergeConfigFiles: () => (/* binding */ mergeConfigFiles)
/* harmony export */ });
const mergeConfigFiles = (...files) => {
    const merged = {};
    for (const file of files) {
        for (const [key, values] of Object.entries(file)) {
            if (merged[key] !== undefined) {
                Object.assign(merged[key], values);
            }
            else {
                merged[key] = values;
            }
        }
    }
    return merged;
};


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/parseIni.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/parseIni.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   parseIni: () => (/* binding */ parseIni)
/* harmony export */ });
/* harmony import */ var _smithy_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/types */ "../node_modules/@smithy/types/dist-es/index.js");
/* harmony import */ var _loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loadSharedConfigFiles */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/loadSharedConfigFiles.js");


const prefixKeyRegex = /^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/;
const profileNameBlockList = ["__proto__", "profile __proto__"];
const parseIni = (iniData) => {
    const map = {};
    let currentSection;
    let currentSubSection;
    for (const iniLine of iniData.split(/\r?\n/)) {
        const trimmedLine = iniLine.split(/(^|\s)[;#]/)[0].trim();
        const isSection = trimmedLine[0] === "[" && trimmedLine[trimmedLine.length - 1] === "]";
        if (isSection) {
            currentSection = undefined;
            currentSubSection = undefined;
            const sectionName = trimmedLine.substring(1, trimmedLine.length - 1);
            const matches = prefixKeyRegex.exec(sectionName);
            if (matches) {
                const [, prefix, , name] = matches;
                if (Object.values(_smithy_types__WEBPACK_IMPORTED_MODULE_0__.IniSectionType).includes(prefix)) {
                    currentSection = [prefix, name].join(_loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_1__.CONFIG_PREFIX_SEPARATOR);
                }
            }
            else {
                currentSection = sectionName;
            }
            if (profileNameBlockList.includes(sectionName)) {
                throw new Error(`Found invalid profile name "${sectionName}"`);
            }
        }
        else if (currentSection) {
            const indexOfEqualsSign = trimmedLine.indexOf("=");
            if (![0, -1].includes(indexOfEqualsSign)) {
                const [name, value] = [
                    trimmedLine.substring(0, indexOfEqualsSign).trim(),
                    trimmedLine.substring(indexOfEqualsSign + 1).trim(),
                ];
                if (value === "") {
                    currentSubSection = name;
                }
                else {
                    if (currentSubSection && iniLine.trimStart() === iniLine) {
                        currentSubSection = undefined;
                    }
                    map[currentSection] = map[currentSection] || {};
                    const key = currentSubSection ? [currentSubSection, name].join(_loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_1__.CONFIG_PREFIX_SEPARATOR) : name;
                    map[currentSection][key] = value;
                }
            }
        }
    }
    return map;
};


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/parseKnownFiles.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/parseKnownFiles.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   parseKnownFiles: () => (/* binding */ parseKnownFiles)
/* harmony export */ });
/* harmony import */ var _loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loadSharedConfigFiles */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/loadSharedConfigFiles.js");
/* harmony import */ var _mergeConfigFiles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mergeConfigFiles */ "../node_modules/@smithy/shared-ini-file-loader/dist-es/mergeConfigFiles.js");


const parseKnownFiles = async (init) => {
    const parsedFiles = await (0,_loadSharedConfigFiles__WEBPACK_IMPORTED_MODULE_0__.loadSharedConfigFiles)(init);
    return (0,_mergeConfigFiles__WEBPACK_IMPORTED_MODULE_1__.mergeConfigFiles)(parsedFiles.configFile, parsedFiles.credentialsFile);
};


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/slurpFile.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/slurpFile.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   slurpFile: () => (/* binding */ slurpFile)
/* harmony export */ });
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ "fs");
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);

const { readFile } = fs__WEBPACK_IMPORTED_MODULE_0__.promises;
const filePromisesHash = {};
const slurpFile = (path, options) => {
    if (!filePromisesHash[path] || options?.ignoreCache) {
        filePromisesHash[path] = readFile(path, "utf8");
    }
    return filePromisesHash[path];
};


/***/ }),

/***/ "../node_modules/@smithy/shared-ini-file-loader/dist-es/types.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/shared-ini-file-loader/dist-es/types.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/signature-v4/dist-es/HeaderFormatter.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/signature-v4/dist-es/HeaderFormatter.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HeaderFormatter: () => (/* binding */ HeaderFormatter),
/* harmony export */   Int64: () => (/* binding */ Int64)
/* harmony export */ });
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-utf8 */ "../node_modules/@smithy/util-utf8/dist-es/index.js");


class HeaderFormatter {
    format(headers) {
        const chunks = [];
        for (const headerName of Object.keys(headers)) {
            const bytes = (0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_1__.fromUtf8)(headerName);
            chunks.push(Uint8Array.from([bytes.byteLength]), bytes, this.formatHeaderValue(headers[headerName]));
        }
        const out = new Uint8Array(chunks.reduce((carry, bytes) => carry + bytes.byteLength, 0));
        let position = 0;
        for (const chunk of chunks) {
            out.set(chunk, position);
            position += chunk.byteLength;
        }
        return out;
    }
    formatHeaderValue(header) {
        switch (header.type) {
            case "boolean":
                return Uint8Array.from([header.value ? 0 : 1]);
            case "byte":
                return Uint8Array.from([2, header.value]);
            case "short":
                const shortView = new DataView(new ArrayBuffer(3));
                shortView.setUint8(0, 3);
                shortView.setInt16(1, header.value, false);
                return new Uint8Array(shortView.buffer);
            case "integer":
                const intView = new DataView(new ArrayBuffer(5));
                intView.setUint8(0, 4);
                intView.setInt32(1, header.value, false);
                return new Uint8Array(intView.buffer);
            case "long":
                const longBytes = new Uint8Array(9);
                longBytes[0] = 5;
                longBytes.set(header.value.bytes, 1);
                return longBytes;
            case "binary":
                const binView = new DataView(new ArrayBuffer(3 + header.value.byteLength));
                binView.setUint8(0, 6);
                binView.setUint16(1, header.value.byteLength, false);
                const binBytes = new Uint8Array(binView.buffer);
                binBytes.set(header.value, 3);
                return binBytes;
            case "string":
                const utf8Bytes = (0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_1__.fromUtf8)(header.value);
                const strView = new DataView(new ArrayBuffer(3 + utf8Bytes.byteLength));
                strView.setUint8(0, 7);
                strView.setUint16(1, utf8Bytes.byteLength, false);
                const strBytes = new Uint8Array(strView.buffer);
                strBytes.set(utf8Bytes, 3);
                return strBytes;
            case "timestamp":
                const tsBytes = new Uint8Array(9);
                tsBytes[0] = 8;
                tsBytes.set(Int64.fromNumber(header.value.valueOf()).bytes, 1);
                return tsBytes;
            case "uuid":
                if (!UUID_PATTERN.test(header.value)) {
                    throw new Error(`Invalid UUID received: ${header.value}`);
                }
                const uuidBytes = new Uint8Array(17);
                uuidBytes[0] = 9;
                uuidBytes.set((0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.fromHex)(header.value.replace(/\-/g, "")), 1);
                return uuidBytes;
        }
    }
}
var HEADER_VALUE_TYPE;
(function (HEADER_VALUE_TYPE) {
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["boolTrue"] = 0] = "boolTrue";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["boolFalse"] = 1] = "boolFalse";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["byte"] = 2] = "byte";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["short"] = 3] = "short";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["integer"] = 4] = "integer";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["long"] = 5] = "long";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["byteArray"] = 6] = "byteArray";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["string"] = 7] = "string";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["timestamp"] = 8] = "timestamp";
    HEADER_VALUE_TYPE[HEADER_VALUE_TYPE["uuid"] = 9] = "uuid";
})(HEADER_VALUE_TYPE || (HEADER_VALUE_TYPE = {}));
const UUID_PATTERN = /^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;
class Int64 {
    constructor(bytes) {
        this.bytes = bytes;
        if (bytes.byteLength !== 8) {
            throw new Error("Int64 buffers must be exactly 8 bytes");
        }
    }
    static fromNumber(number) {
        if (number > 9223372036854776000 || number < -9223372036854776000) {
            throw new Error(`${number} is too large (or, if negative, too small) to represent as an Int64`);
        }
        const bytes = new Uint8Array(8);
        for (let i = 7, remaining = Math.abs(Math.round(number)); i > -1 && remaining > 0; i--, remaining /= 256) {
            bytes[i] = remaining;
        }
        if (number < 0) {
            negate(bytes);
        }
        return new Int64(bytes);
    }
    valueOf() {
        const bytes = this.bytes.slice(0);
        const negative = bytes[0] & 0b10000000;
        if (negative) {
            negate(bytes);
        }
        return parseInt((0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.toHex)(bytes), 16) * (negative ? -1 : 1);
    }
    toString() {
        return String(this.valueOf());
    }
}
function negate(bytes) {
    for (let i = 0; i < 8; i++) {
        bytes[i] ^= 0xff;
    }
    for (let i = 7; i > -1; i--) {
        bytes[i]++;
        if (bytes[i] !== 0)
            break;
    }
}


/***/ }),

/***/ "../node_modules/@smithy/signature-v4/dist-es/SignatureV4.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@smithy/signature-v4/dist-es/SignatureV4.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SignatureV4: () => (/* binding */ SignatureV4)
/* harmony export */ });
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _smithy_util_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-middleware */ "../node_modules/@smithy/util-middleware/dist-es/index.js");
/* harmony import */ var _smithy_util_uri_escape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/util-uri-escape */ "../node_modules/@smithy/util-uri-escape/dist-es/index.js");
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @smithy/util-utf8 */ "../node_modules/@smithy/util-utf8/dist-es/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/signature-v4/dist-es/constants.js");
/* harmony import */ var _credentialDerivation__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./credentialDerivation */ "../node_modules/@smithy/signature-v4/dist-es/credentialDerivation.js");
/* harmony import */ var _getCanonicalHeaders__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./getCanonicalHeaders */ "../node_modules/@smithy/signature-v4/dist-es/getCanonicalHeaders.js");
/* harmony import */ var _getCanonicalQuery__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./getCanonicalQuery */ "../node_modules/@smithy/signature-v4/dist-es/getCanonicalQuery.js");
/* harmony import */ var _getPayloadHash__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./getPayloadHash */ "../node_modules/@smithy/signature-v4/dist-es/getPayloadHash.js");
/* harmony import */ var _HeaderFormatter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./HeaderFormatter */ "../node_modules/@smithy/signature-v4/dist-es/HeaderFormatter.js");
/* harmony import */ var _headerUtil__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./headerUtil */ "../node_modules/@smithy/signature-v4/dist-es/headerUtil.js");
/* harmony import */ var _moveHeadersToQuery__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./moveHeadersToQuery */ "../node_modules/@smithy/signature-v4/dist-es/moveHeadersToQuery.js");
/* harmony import */ var _prepareRequest__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./prepareRequest */ "../node_modules/@smithy/signature-v4/dist-es/prepareRequest.js");
/* harmony import */ var _utilDate__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./utilDate */ "../node_modules/@smithy/signature-v4/dist-es/utilDate.js");














class SignatureV4 {
    constructor({ applyChecksum, credentials, region, service, sha256, uriEscapePath = true, }) {
        this.headerFormatter = new _HeaderFormatter__WEBPACK_IMPORTED_MODULE_9__.HeaderFormatter();
        this.service = service;
        this.sha256 = sha256;
        this.uriEscapePath = uriEscapePath;
        this.applyChecksum = typeof applyChecksum === "boolean" ? applyChecksum : true;
        this.regionProvider = (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_1__.normalizeProvider)(region);
        this.credentialProvider = (0,_smithy_util_middleware__WEBPACK_IMPORTED_MODULE_1__.normalizeProvider)(credentials);
    }
    async presign(originalRequest, options = {}) {
        const { signingDate = new Date(), expiresIn = 3600, unsignableHeaders, unhoistableHeaders, signableHeaders, hoistableHeaders, signingRegion, signingService, } = options;
        const credentials = await this.credentialProvider();
        this.validateResolvedCredentials(credentials);
        const region = signingRegion ?? (await this.regionProvider());
        const { longDate, shortDate } = formatDate(signingDate);
        if (expiresIn > _constants__WEBPACK_IMPORTED_MODULE_4__.MAX_PRESIGNED_TTL) {
            return Promise.reject("Signature version 4 presigned URLs" + " must have an expiration date less than one week in" + " the future");
        }
        const scope = (0,_credentialDerivation__WEBPACK_IMPORTED_MODULE_5__.createScope)(shortDate, region, signingService ?? this.service);
        const request = (0,_moveHeadersToQuery__WEBPACK_IMPORTED_MODULE_11__.moveHeadersToQuery)((0,_prepareRequest__WEBPACK_IMPORTED_MODULE_12__.prepareRequest)(originalRequest), { unhoistableHeaders, hoistableHeaders });
        if (credentials.sessionToken) {
            request.query[_constants__WEBPACK_IMPORTED_MODULE_4__.TOKEN_QUERY_PARAM] = credentials.sessionToken;
        }
        request.query[_constants__WEBPACK_IMPORTED_MODULE_4__.ALGORITHM_QUERY_PARAM] = _constants__WEBPACK_IMPORTED_MODULE_4__.ALGORITHM_IDENTIFIER;
        request.query[_constants__WEBPACK_IMPORTED_MODULE_4__.CREDENTIAL_QUERY_PARAM] = `${credentials.accessKeyId}/${scope}`;
        request.query[_constants__WEBPACK_IMPORTED_MODULE_4__.AMZ_DATE_QUERY_PARAM] = longDate;
        request.query[_constants__WEBPACK_IMPORTED_MODULE_4__.EXPIRES_QUERY_PARAM] = expiresIn.toString(10);
        const canonicalHeaders = (0,_getCanonicalHeaders__WEBPACK_IMPORTED_MODULE_6__.getCanonicalHeaders)(request, unsignableHeaders, signableHeaders);
        request.query[_constants__WEBPACK_IMPORTED_MODULE_4__.SIGNED_HEADERS_QUERY_PARAM] = getCanonicalHeaderList(canonicalHeaders);
        request.query[_constants__WEBPACK_IMPORTED_MODULE_4__.SIGNATURE_QUERY_PARAM] = await this.getSignature(longDate, scope, this.getSigningKey(credentials, region, shortDate, signingService), this.createCanonicalRequest(request, canonicalHeaders, await (0,_getPayloadHash__WEBPACK_IMPORTED_MODULE_8__.getPayloadHash)(originalRequest, this.sha256)));
        return request;
    }
    async sign(toSign, options) {
        if (typeof toSign === "string") {
            return this.signString(toSign, options);
        }
        else if (toSign.headers && toSign.payload) {
            return this.signEvent(toSign, options);
        }
        else if (toSign.message) {
            return this.signMessage(toSign, options);
        }
        else {
            return this.signRequest(toSign, options);
        }
    }
    async signEvent({ headers, payload }, { signingDate = new Date(), priorSignature, signingRegion, signingService }) {
        const region = signingRegion ?? (await this.regionProvider());
        const { shortDate, longDate } = formatDate(signingDate);
        const scope = (0,_credentialDerivation__WEBPACK_IMPORTED_MODULE_5__.createScope)(shortDate, region, signingService ?? this.service);
        const hashedPayload = await (0,_getPayloadHash__WEBPACK_IMPORTED_MODULE_8__.getPayloadHash)({ headers: {}, body: payload }, this.sha256);
        const hash = new this.sha256();
        hash.update(headers);
        const hashedHeaders = (0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.toHex)(await hash.digest());
        const stringToSign = [
            _constants__WEBPACK_IMPORTED_MODULE_4__.EVENT_ALGORITHM_IDENTIFIER,
            longDate,
            scope,
            priorSignature,
            hashedHeaders,
            hashedPayload,
        ].join("\n");
        return this.signString(stringToSign, { signingDate, signingRegion: region, signingService });
    }
    async signMessage(signableMessage, { signingDate = new Date(), signingRegion, signingService }) {
        const promise = this.signEvent({
            headers: this.headerFormatter.format(signableMessage.message.headers),
            payload: signableMessage.message.body,
        }, {
            signingDate,
            signingRegion,
            signingService,
            priorSignature: signableMessage.priorSignature,
        });
        return promise.then((signature) => {
            return { message: signableMessage.message, signature };
        });
    }
    async signString(stringToSign, { signingDate = new Date(), signingRegion, signingService } = {}) {
        const credentials = await this.credentialProvider();
        this.validateResolvedCredentials(credentials);
        const region = signingRegion ?? (await this.regionProvider());
        const { shortDate } = formatDate(signingDate);
        const hash = new this.sha256(await this.getSigningKey(credentials, region, shortDate, signingService));
        hash.update((0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_3__.toUint8Array)(stringToSign));
        return (0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.toHex)(await hash.digest());
    }
    async signRequest(requestToSign, { signingDate = new Date(), signableHeaders, unsignableHeaders, signingRegion, signingService, } = {}) {
        const credentials = await this.credentialProvider();
        this.validateResolvedCredentials(credentials);
        const region = signingRegion ?? (await this.regionProvider());
        const request = (0,_prepareRequest__WEBPACK_IMPORTED_MODULE_12__.prepareRequest)(requestToSign);
        const { longDate, shortDate } = formatDate(signingDate);
        const scope = (0,_credentialDerivation__WEBPACK_IMPORTED_MODULE_5__.createScope)(shortDate, region, signingService ?? this.service);
        request.headers[_constants__WEBPACK_IMPORTED_MODULE_4__.AMZ_DATE_HEADER] = longDate;
        if (credentials.sessionToken) {
            request.headers[_constants__WEBPACK_IMPORTED_MODULE_4__.TOKEN_HEADER] = credentials.sessionToken;
        }
        const payloadHash = await (0,_getPayloadHash__WEBPACK_IMPORTED_MODULE_8__.getPayloadHash)(request, this.sha256);
        if (!(0,_headerUtil__WEBPACK_IMPORTED_MODULE_10__.hasHeader)(_constants__WEBPACK_IMPORTED_MODULE_4__.SHA256_HEADER, request.headers) && this.applyChecksum) {
            request.headers[_constants__WEBPACK_IMPORTED_MODULE_4__.SHA256_HEADER] = payloadHash;
        }
        const canonicalHeaders = (0,_getCanonicalHeaders__WEBPACK_IMPORTED_MODULE_6__.getCanonicalHeaders)(request, unsignableHeaders, signableHeaders);
        const signature = await this.getSignature(longDate, scope, this.getSigningKey(credentials, region, shortDate, signingService), this.createCanonicalRequest(request, canonicalHeaders, payloadHash));
        request.headers[_constants__WEBPACK_IMPORTED_MODULE_4__.AUTH_HEADER] =
            `${_constants__WEBPACK_IMPORTED_MODULE_4__.ALGORITHM_IDENTIFIER} ` +
                `Credential=${credentials.accessKeyId}/${scope}, ` +
                `SignedHeaders=${getCanonicalHeaderList(canonicalHeaders)}, ` +
                `Signature=${signature}`;
        return request;
    }
    createCanonicalRequest(request, canonicalHeaders, payloadHash) {
        const sortedHeaders = Object.keys(canonicalHeaders).sort();
        return `${request.method}
${this.getCanonicalPath(request)}
${(0,_getCanonicalQuery__WEBPACK_IMPORTED_MODULE_7__.getCanonicalQuery)(request)}
${sortedHeaders.map((name) => `${name}:${canonicalHeaders[name]}`).join("\n")}

${sortedHeaders.join(";")}
${payloadHash}`;
    }
    async createStringToSign(longDate, credentialScope, canonicalRequest) {
        const hash = new this.sha256();
        hash.update((0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_3__.toUint8Array)(canonicalRequest));
        const hashedRequest = await hash.digest();
        return `${_constants__WEBPACK_IMPORTED_MODULE_4__.ALGORITHM_IDENTIFIER}
${longDate}
${credentialScope}
${(0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.toHex)(hashedRequest)}`;
    }
    getCanonicalPath({ path }) {
        if (this.uriEscapePath) {
            const normalizedPathSegments = [];
            for (const pathSegment of path.split("/")) {
                if (pathSegment?.length === 0)
                    continue;
                if (pathSegment === ".")
                    continue;
                if (pathSegment === "..") {
                    normalizedPathSegments.pop();
                }
                else {
                    normalizedPathSegments.push(pathSegment);
                }
            }
            const normalizedPath = `${path?.startsWith("/") ? "/" : ""}${normalizedPathSegments.join("/")}${normalizedPathSegments.length > 0 && path?.endsWith("/") ? "/" : ""}`;
            const doubleEncoded = (0,_smithy_util_uri_escape__WEBPACK_IMPORTED_MODULE_2__.escapeUri)(normalizedPath);
            return doubleEncoded.replace(/%2F/g, "/");
        }
        return path;
    }
    async getSignature(longDate, credentialScope, keyPromise, canonicalRequest) {
        const stringToSign = await this.createStringToSign(longDate, credentialScope, canonicalRequest);
        const hash = new this.sha256(await keyPromise);
        hash.update((0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_3__.toUint8Array)(stringToSign));
        return (0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.toHex)(await hash.digest());
    }
    getSigningKey(credentials, region, shortDate, service) {
        return (0,_credentialDerivation__WEBPACK_IMPORTED_MODULE_5__.getSigningKey)(this.sha256, credentials, shortDate, region, service || this.service);
    }
    validateResolvedCredentials(credentials) {
        if (typeof credentials !== "object" ||
            typeof credentials.accessKeyId !== "string" ||
            typeof credentials.secretAccessKey !== "string") {
            throw new Error("Resolved credential object is not valid");
        }
    }
}
const formatDate = (now) => {
    const longDate = (0,_utilDate__WEBPACK_IMPORTED_MODULE_13__.iso8601)(now).replace(/[\-:]/g, "");
    return {
        longDate,
        shortDate: longDate.slice(0, 8),
    };
};
const getCanonicalHeaderList = (headers) => Object.keys(headers).sort().join(";");


/***/ }),

/***/ "../node_modules/@smithy/signature-v4/dist-es/constants.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/signature-v4/dist-es/constants.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ALGORITHM_IDENTIFIER: () => (/* binding */ ALGORITHM_IDENTIFIER),
/* harmony export */   ALGORITHM_IDENTIFIER_V4A: () => (/* binding */ ALGORITHM_IDENTIFIER_V4A),
/* harmony export */   ALGORITHM_QUERY_PARAM: () => (/* binding */ ALGORITHM_QUERY_PARAM),
/* harmony export */   ALWAYS_UNSIGNABLE_HEADERS: () => (/* binding */ ALWAYS_UNSIGNABLE_HEADERS),
/* harmony export */   AMZ_DATE_HEADER: () => (/* binding */ AMZ_DATE_HEADER),
/* harmony export */   AMZ_DATE_QUERY_PARAM: () => (/* binding */ AMZ_DATE_QUERY_PARAM),
/* harmony export */   AUTH_HEADER: () => (/* binding */ AUTH_HEADER),
/* harmony export */   CREDENTIAL_QUERY_PARAM: () => (/* binding */ CREDENTIAL_QUERY_PARAM),
/* harmony export */   DATE_HEADER: () => (/* binding */ DATE_HEADER),
/* harmony export */   EVENT_ALGORITHM_IDENTIFIER: () => (/* binding */ EVENT_ALGORITHM_IDENTIFIER),
/* harmony export */   EXPIRES_QUERY_PARAM: () => (/* binding */ EXPIRES_QUERY_PARAM),
/* harmony export */   GENERATED_HEADERS: () => (/* binding */ GENERATED_HEADERS),
/* harmony export */   HOST_HEADER: () => (/* binding */ HOST_HEADER),
/* harmony export */   KEY_TYPE_IDENTIFIER: () => (/* binding */ KEY_TYPE_IDENTIFIER),
/* harmony export */   MAX_CACHE_SIZE: () => (/* binding */ MAX_CACHE_SIZE),
/* harmony export */   MAX_PRESIGNED_TTL: () => (/* binding */ MAX_PRESIGNED_TTL),
/* harmony export */   PROXY_HEADER_PATTERN: () => (/* binding */ PROXY_HEADER_PATTERN),
/* harmony export */   REGION_SET_PARAM: () => (/* binding */ REGION_SET_PARAM),
/* harmony export */   SEC_HEADER_PATTERN: () => (/* binding */ SEC_HEADER_PATTERN),
/* harmony export */   SHA256_HEADER: () => (/* binding */ SHA256_HEADER),
/* harmony export */   SIGNATURE_HEADER: () => (/* binding */ SIGNATURE_HEADER),
/* harmony export */   SIGNATURE_QUERY_PARAM: () => (/* binding */ SIGNATURE_QUERY_PARAM),
/* harmony export */   SIGNED_HEADERS_QUERY_PARAM: () => (/* binding */ SIGNED_HEADERS_QUERY_PARAM),
/* harmony export */   TOKEN_HEADER: () => (/* binding */ TOKEN_HEADER),
/* harmony export */   TOKEN_QUERY_PARAM: () => (/* binding */ TOKEN_QUERY_PARAM),
/* harmony export */   UNSIGNABLE_PATTERNS: () => (/* binding */ UNSIGNABLE_PATTERNS),
/* harmony export */   UNSIGNED_PAYLOAD: () => (/* binding */ UNSIGNED_PAYLOAD)
/* harmony export */ });
const ALGORITHM_QUERY_PARAM = "X-Amz-Algorithm";
const CREDENTIAL_QUERY_PARAM = "X-Amz-Credential";
const AMZ_DATE_QUERY_PARAM = "X-Amz-Date";
const SIGNED_HEADERS_QUERY_PARAM = "X-Amz-SignedHeaders";
const EXPIRES_QUERY_PARAM = "X-Amz-Expires";
const SIGNATURE_QUERY_PARAM = "X-Amz-Signature";
const TOKEN_QUERY_PARAM = "X-Amz-Security-Token";
const REGION_SET_PARAM = "X-Amz-Region-Set";
const AUTH_HEADER = "authorization";
const AMZ_DATE_HEADER = AMZ_DATE_QUERY_PARAM.toLowerCase();
const DATE_HEADER = "date";
const GENERATED_HEADERS = [AUTH_HEADER, AMZ_DATE_HEADER, DATE_HEADER];
const SIGNATURE_HEADER = SIGNATURE_QUERY_PARAM.toLowerCase();
const SHA256_HEADER = "x-amz-content-sha256";
const TOKEN_HEADER = TOKEN_QUERY_PARAM.toLowerCase();
const HOST_HEADER = "host";
const ALWAYS_UNSIGNABLE_HEADERS = {
    authorization: true,
    "cache-control": true,
    connection: true,
    expect: true,
    from: true,
    "keep-alive": true,
    "max-forwards": true,
    pragma: true,
    referer: true,
    te: true,
    trailer: true,
    "transfer-encoding": true,
    upgrade: true,
    "user-agent": true,
    "x-amzn-trace-id": true,
};
const PROXY_HEADER_PATTERN = /^proxy-/;
const SEC_HEADER_PATTERN = /^sec-/;
const UNSIGNABLE_PATTERNS = [/^proxy-/i, /^sec-/i];
const ALGORITHM_IDENTIFIER = "AWS4-HMAC-SHA256";
const ALGORITHM_IDENTIFIER_V4A = "AWS4-ECDSA-P256-SHA256";
const EVENT_ALGORITHM_IDENTIFIER = "AWS4-HMAC-SHA256-PAYLOAD";
const UNSIGNED_PAYLOAD = "UNSIGNED-PAYLOAD";
const MAX_CACHE_SIZE = 50;
const KEY_TYPE_IDENTIFIER = "aws4_request";
const MAX_PRESIGNED_TTL = 60 * 60 * 24 * 7;


/***/ }),

/***/ "../node_modules/@smithy/signature-v4/dist-es/credentialDerivation.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/signature-v4/dist-es/credentialDerivation.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearCredentialCache: () => (/* binding */ clearCredentialCache),
/* harmony export */   createScope: () => (/* binding */ createScope),
/* harmony export */   getSigningKey: () => (/* binding */ getSigningKey)
/* harmony export */ });
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-utf8 */ "../node_modules/@smithy/util-utf8/dist-es/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/signature-v4/dist-es/constants.js");



const signingKeyCache = {};
const cacheQueue = [];
const createScope = (shortDate, region, service) => `${shortDate}/${region}/${service}/${_constants__WEBPACK_IMPORTED_MODULE_2__.KEY_TYPE_IDENTIFIER}`;
const getSigningKey = async (sha256Constructor, credentials, shortDate, region, service) => {
    const credsHash = await hmac(sha256Constructor, credentials.secretAccessKey, credentials.accessKeyId);
    const cacheKey = `${shortDate}:${region}:${service}:${(0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_0__.toHex)(credsHash)}:${credentials.sessionToken}`;
    if (cacheKey in signingKeyCache) {
        return signingKeyCache[cacheKey];
    }
    cacheQueue.push(cacheKey);
    while (cacheQueue.length > _constants__WEBPACK_IMPORTED_MODULE_2__.MAX_CACHE_SIZE) {
        delete signingKeyCache[cacheQueue.shift()];
    }
    let key = `AWS4${credentials.secretAccessKey}`;
    for (const signable of [shortDate, region, service, _constants__WEBPACK_IMPORTED_MODULE_2__.KEY_TYPE_IDENTIFIER]) {
        key = await hmac(sha256Constructor, key, signable);
    }
    return (signingKeyCache[cacheKey] = key);
};
const clearCredentialCache = () => {
    cacheQueue.length = 0;
    Object.keys(signingKeyCache).forEach((cacheKey) => {
        delete signingKeyCache[cacheKey];
    });
};
const hmac = (ctor, secret, data) => {
    const hash = new ctor(secret);
    hash.update((0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_1__.toUint8Array)(data));
    return hash.digest();
};


/***/ }),

/***/ "../node_modules/@smithy/signature-v4/dist-es/getCanonicalHeaders.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@smithy/signature-v4/dist-es/getCanonicalHeaders.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCanonicalHeaders: () => (/* binding */ getCanonicalHeaders)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/signature-v4/dist-es/constants.js");

const getCanonicalHeaders = ({ headers }, unsignableHeaders, signableHeaders) => {
    const canonical = {};
    for (const headerName of Object.keys(headers).sort()) {
        if (headers[headerName] == undefined) {
            continue;
        }
        const canonicalHeaderName = headerName.toLowerCase();
        if (canonicalHeaderName in _constants__WEBPACK_IMPORTED_MODULE_0__.ALWAYS_UNSIGNABLE_HEADERS ||
            unsignableHeaders?.has(canonicalHeaderName) ||
            _constants__WEBPACK_IMPORTED_MODULE_0__.PROXY_HEADER_PATTERN.test(canonicalHeaderName) ||
            _constants__WEBPACK_IMPORTED_MODULE_0__.SEC_HEADER_PATTERN.test(canonicalHeaderName)) {
            if (!signableHeaders || (signableHeaders && !signableHeaders.has(canonicalHeaderName))) {
                continue;
            }
        }
        canonical[canonicalHeaderName] = headers[headerName].trim().replace(/\s+/g, " ");
    }
    return canonical;
};


/***/ }),

/***/ "../node_modules/@smithy/signature-v4/dist-es/getCanonicalQuery.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@smithy/signature-v4/dist-es/getCanonicalQuery.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCanonicalQuery: () => (/* binding */ getCanonicalQuery)
/* harmony export */ });
/* harmony import */ var _smithy_util_uri_escape__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-uri-escape */ "../node_modules/@smithy/util-uri-escape/dist-es/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/signature-v4/dist-es/constants.js");


const getCanonicalQuery = ({ query = {} }) => {
    const keys = [];
    const serialized = {};
    for (const key of Object.keys(query)) {
        if (key.toLowerCase() === _constants__WEBPACK_IMPORTED_MODULE_1__.SIGNATURE_HEADER) {
            continue;
        }
        const encodedKey = (0,_smithy_util_uri_escape__WEBPACK_IMPORTED_MODULE_0__.escapeUri)(key);
        keys.push(encodedKey);
        const value = query[key];
        if (typeof value === "string") {
            serialized[encodedKey] = `${encodedKey}=${(0,_smithy_util_uri_escape__WEBPACK_IMPORTED_MODULE_0__.escapeUri)(value)}`;
        }
        else if (Array.isArray(value)) {
            serialized[encodedKey] = value
                .slice(0)
                .reduce((encoded, value) => encoded.concat([`${encodedKey}=${(0,_smithy_util_uri_escape__WEBPACK_IMPORTED_MODULE_0__.escapeUri)(value)}`]), [])
                .sort()
                .join("&");
        }
    }
    return keys
        .sort()
        .map((key) => serialized[key])
        .filter((serialized) => serialized)
        .join("&");
};


/***/ }),

/***/ "../node_modules/@smithy/signature-v4/dist-es/getPayloadHash.js":
/*!**********************************************************************!*\
  !*** ../node_modules/@smithy/signature-v4/dist-es/getPayloadHash.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getPayloadHash: () => (/* binding */ getPayloadHash)
/* harmony export */ });
/* harmony import */ var _smithy_is_array_buffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/is-array-buffer */ "../node_modules/@smithy/is-array-buffer/dist-es/index.js");
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/util-utf8 */ "../node_modules/@smithy/util-utf8/dist-es/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/signature-v4/dist-es/constants.js");




const getPayloadHash = async ({ headers, body }, hashConstructor) => {
    for (const headerName of Object.keys(headers)) {
        if (headerName.toLowerCase() === _constants__WEBPACK_IMPORTED_MODULE_3__.SHA256_HEADER) {
            return headers[headerName];
        }
    }
    if (body == undefined) {
        return "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";
    }
    else if (typeof body === "string" || ArrayBuffer.isView(body) || (0,_smithy_is_array_buffer__WEBPACK_IMPORTED_MODULE_0__.isArrayBuffer)(body)) {
        const hashCtor = new hashConstructor();
        hashCtor.update((0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_2__.toUint8Array)(body));
        return (0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__.toHex)(await hashCtor.digest());
    }
    return _constants__WEBPACK_IMPORTED_MODULE_3__.UNSIGNED_PAYLOAD;
};


/***/ }),

/***/ "../node_modules/@smithy/signature-v4/dist-es/headerUtil.js":
/*!******************************************************************!*\
  !*** ../node_modules/@smithy/signature-v4/dist-es/headerUtil.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deleteHeader: () => (/* binding */ deleteHeader),
/* harmony export */   getHeaderValue: () => (/* binding */ getHeaderValue),
/* harmony export */   hasHeader: () => (/* binding */ hasHeader)
/* harmony export */ });
const hasHeader = (soughtHeader, headers) => {
    soughtHeader = soughtHeader.toLowerCase();
    for (const headerName of Object.keys(headers)) {
        if (soughtHeader === headerName.toLowerCase()) {
            return true;
        }
    }
    return false;
};
const getHeaderValue = (soughtHeader, headers) => {
    soughtHeader = soughtHeader.toLowerCase();
    for (const headerName of Object.keys(headers)) {
        if (soughtHeader === headerName.toLowerCase()) {
            return headers[headerName];
        }
    }
    return undefined;
};
const deleteHeader = (soughtHeader, headers) => {
    soughtHeader = soughtHeader.toLowerCase();
    for (const headerName of Object.keys(headers)) {
        if (soughtHeader === headerName.toLowerCase()) {
            delete headers[headerName];
        }
    }
};


/***/ }),

/***/ "../node_modules/@smithy/signature-v4/dist-es/index.js":
/*!*************************************************************!*\
  !*** ../node_modules/@smithy/signature-v4/dist-es/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SignatureV4: () => (/* reexport safe */ _SignatureV4__WEBPACK_IMPORTED_MODULE_0__.SignatureV4),
/* harmony export */   clearCredentialCache: () => (/* reexport safe */ _credentialDerivation__WEBPACK_IMPORTED_MODULE_6__.clearCredentialCache),
/* harmony export */   createScope: () => (/* reexport safe */ _credentialDerivation__WEBPACK_IMPORTED_MODULE_6__.createScope),
/* harmony export */   getCanonicalHeaders: () => (/* reexport safe */ _getCanonicalHeaders__WEBPACK_IMPORTED_MODULE_1__.getCanonicalHeaders),
/* harmony export */   getCanonicalQuery: () => (/* reexport safe */ _getCanonicalQuery__WEBPACK_IMPORTED_MODULE_2__.getCanonicalQuery),
/* harmony export */   getPayloadHash: () => (/* reexport safe */ _getPayloadHash__WEBPACK_IMPORTED_MODULE_3__.getPayloadHash),
/* harmony export */   getSigningKey: () => (/* reexport safe */ _credentialDerivation__WEBPACK_IMPORTED_MODULE_6__.getSigningKey),
/* harmony export */   moveHeadersToQuery: () => (/* reexport safe */ _moveHeadersToQuery__WEBPACK_IMPORTED_MODULE_4__.moveHeadersToQuery),
/* harmony export */   prepareRequest: () => (/* reexport safe */ _prepareRequest__WEBPACK_IMPORTED_MODULE_5__.prepareRequest)
/* harmony export */ });
/* harmony import */ var _SignatureV4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SignatureV4 */ "../node_modules/@smithy/signature-v4/dist-es/SignatureV4.js");
/* harmony import */ var _getCanonicalHeaders__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getCanonicalHeaders */ "../node_modules/@smithy/signature-v4/dist-es/getCanonicalHeaders.js");
/* harmony import */ var _getCanonicalQuery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getCanonicalQuery */ "../node_modules/@smithy/signature-v4/dist-es/getCanonicalQuery.js");
/* harmony import */ var _getPayloadHash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getPayloadHash */ "../node_modules/@smithy/signature-v4/dist-es/getPayloadHash.js");
/* harmony import */ var _moveHeadersToQuery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./moveHeadersToQuery */ "../node_modules/@smithy/signature-v4/dist-es/moveHeadersToQuery.js");
/* harmony import */ var _prepareRequest__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./prepareRequest */ "../node_modules/@smithy/signature-v4/dist-es/prepareRequest.js");
/* harmony import */ var _credentialDerivation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./credentialDerivation */ "../node_modules/@smithy/signature-v4/dist-es/credentialDerivation.js");









/***/ }),

/***/ "../node_modules/@smithy/signature-v4/dist-es/moveHeadersToQuery.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/signature-v4/dist-es/moveHeadersToQuery.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   moveHeadersToQuery: () => (/* binding */ moveHeadersToQuery)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");

const moveHeadersToQuery = (request, options = {}) => {
    const { headers, query = {} } = _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.clone(request);
    for (const name of Object.keys(headers)) {
        const lname = name.toLowerCase();
        if ((lname.slice(0, 6) === "x-amz-" && !options.unhoistableHeaders?.has(lname)) ||
            options.hoistableHeaders?.has(lname)) {
            query[name] = headers[name];
            delete headers[name];
        }
    }
    return {
        ...request,
        headers,
        query,
    };
};


/***/ }),

/***/ "../node_modules/@smithy/signature-v4/dist-es/prepareRequest.js":
/*!**********************************************************************!*\
  !*** ../node_modules/@smithy/signature-v4/dist-es/prepareRequest.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   prepareRequest: () => (/* binding */ prepareRequest)
/* harmony export */ });
/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ "../node_modules/@smithy/protocol-http/dist-es/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/signature-v4/dist-es/constants.js");


const prepareRequest = (request) => {
    request = _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpRequest.clone(request);
    for (const headerName of Object.keys(request.headers)) {
        if (_constants__WEBPACK_IMPORTED_MODULE_1__.GENERATED_HEADERS.indexOf(headerName.toLowerCase()) > -1) {
            delete request.headers[headerName];
        }
    }
    return request;
};


/***/ }),

/***/ "../node_modules/@smithy/signature-v4/dist-es/utilDate.js":
/*!****************************************************************!*\
  !*** ../node_modules/@smithy/signature-v4/dist-es/utilDate.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   iso8601: () => (/* binding */ iso8601),
/* harmony export */   toDate: () => (/* binding */ toDate)
/* harmony export */ });
const iso8601 = (time) => toDate(time)
    .toISOString()
    .replace(/\.\d{3}Z$/, "Z");
const toDate = (time) => {
    if (typeof time === "number") {
        return new Date(time * 1000);
    }
    if (typeof time === "string") {
        if (Number(time)) {
            return new Date(Number(time) * 1000);
        }
        return new Date(time);
    }
    return time;
};


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/NoOpLogger.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/NoOpLogger.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NoOpLogger: () => (/* binding */ NoOpLogger)
/* harmony export */ });
class NoOpLogger {
    trace() { }
    debug() { }
    info() { }
    warn() { }
    error() { }
}


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/client.js":
/*!***************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/client.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Client: () => (/* binding */ Client)
/* harmony export */ });
/* harmony import */ var _smithy_middleware_stack__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/middleware-stack */ "../node_modules/@smithy/middleware-stack/dist-es/index.js");

class Client {
    constructor(config) {
        this.config = config;
        this.middlewareStack = (0,_smithy_middleware_stack__WEBPACK_IMPORTED_MODULE_0__.constructStack)();
    }
    send(command, optionsOrCb, cb) {
        const options = typeof optionsOrCb !== "function" ? optionsOrCb : undefined;
        const callback = typeof optionsOrCb === "function" ? optionsOrCb : cb;
        const useHandlerCache = options === undefined && this.config.cacheMiddleware === true;
        let handler;
        if (useHandlerCache) {
            if (!this.handlers) {
                this.handlers = new WeakMap();
            }
            const handlers = this.handlers;
            if (handlers.has(command.constructor)) {
                handler = handlers.get(command.constructor);
            }
            else {
                handler = command.resolveMiddleware(this.middlewareStack, this.config, options);
                handlers.set(command.constructor, handler);
            }
        }
        else {
            delete this.handlers;
            handler = command.resolveMiddleware(this.middlewareStack, this.config, options);
        }
        if (callback) {
            handler(command)
                .then((result) => callback(null, result.output), (err) => callback(err))
                .catch(() => { });
        }
        else {
            return handler(command).then((result) => result.output);
        }
    }
    destroy() {
        this.config?.requestHandler?.destroy?.();
        delete this.handlers;
    }
}


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/collect-stream-body.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/collect-stream-body.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   collectBody: () => (/* reexport safe */ _smithy_core_protocols__WEBPACK_IMPORTED_MODULE_0__.collectBody)
/* harmony export */ });
/* harmony import */ var _smithy_core_protocols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/core/protocols */ "../node_modules/@smithy/core/dist-es/submodules/protocols/index.js");



/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/command.js":
/*!****************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/command.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Command: () => (/* binding */ Command)
/* harmony export */ });
/* harmony import */ var _smithy_middleware_stack__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/middleware-stack */ "../node_modules/@smithy/middleware-stack/dist-es/index.js");
/* harmony import */ var _smithy_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/types */ "../node_modules/@smithy/types/dist-es/index.js");


class Command {
    constructor() {
        this.middlewareStack = (0,_smithy_middleware_stack__WEBPACK_IMPORTED_MODULE_0__.constructStack)();
    }
    static classBuilder() {
        return new ClassBuilder();
    }
    resolveMiddlewareWithContext(clientStack, configuration, options, { middlewareFn, clientName, commandName, inputFilterSensitiveLog, outputFilterSensitiveLog, smithyContext, additionalContext, CommandCtor, }) {
        for (const mw of middlewareFn.bind(this)(CommandCtor, clientStack, configuration, options)) {
            this.middlewareStack.use(mw);
        }
        const stack = clientStack.concat(this.middlewareStack);
        const { logger } = configuration;
        const handlerExecutionContext = {
            logger,
            clientName,
            commandName,
            inputFilterSensitiveLog,
            outputFilterSensitiveLog,
            [_smithy_types__WEBPACK_IMPORTED_MODULE_1__.SMITHY_CONTEXT_KEY]: {
                commandInstance: this,
                ...smithyContext,
            },
            ...additionalContext,
        };
        const { requestHandler } = configuration;
        return stack.resolve((request) => requestHandler.handle(request.request, options || {}), handlerExecutionContext);
    }
}
class ClassBuilder {
    constructor() {
        this._init = () => { };
        this._ep = {};
        this._middlewareFn = () => [];
        this._commandName = "";
        this._clientName = "";
        this._additionalContext = {};
        this._smithyContext = {};
        this._inputFilterSensitiveLog = (_) => _;
        this._outputFilterSensitiveLog = (_) => _;
        this._serializer = null;
        this._deserializer = null;
    }
    init(cb) {
        this._init = cb;
    }
    ep(endpointParameterInstructions) {
        this._ep = endpointParameterInstructions;
        return this;
    }
    m(middlewareSupplier) {
        this._middlewareFn = middlewareSupplier;
        return this;
    }
    s(service, operation, smithyContext = {}) {
        this._smithyContext = {
            service,
            operation,
            ...smithyContext,
        };
        return this;
    }
    c(additionalContext = {}) {
        this._additionalContext = additionalContext;
        return this;
    }
    n(clientName, commandName) {
        this._clientName = clientName;
        this._commandName = commandName;
        return this;
    }
    f(inputFilter = (_) => _, outputFilter = (_) => _) {
        this._inputFilterSensitiveLog = inputFilter;
        this._outputFilterSensitiveLog = outputFilter;
        return this;
    }
    ser(serializer) {
        this._serializer = serializer;
        return this;
    }
    de(deserializer) {
        this._deserializer = deserializer;
        return this;
    }
    build() {
        const closure = this;
        let CommandRef;
        return (CommandRef = class extends Command {
            static getEndpointParameterInstructions() {
                return closure._ep;
            }
            constructor(...[input]) {
                super();
                this.serialize = closure._serializer;
                this.deserialize = closure._deserializer;
                this.input = input ?? {};
                closure._init(this);
            }
            resolveMiddleware(stack, configuration, options) {
                return this.resolveMiddlewareWithContext(stack, configuration, options, {
                    CommandCtor: CommandRef,
                    middlewareFn: closure._middlewareFn,
                    clientName: closure._clientName,
                    commandName: closure._commandName,
                    inputFilterSensitiveLog: closure._inputFilterSensitiveLog,
                    outputFilterSensitiveLog: closure._outputFilterSensitiveLog,
                    smithyContext: closure._smithyContext,
                    additionalContext: closure._additionalContext,
                });
            }
        });
    }
}


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/constants.js":
/*!******************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/constants.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SENSITIVE_STRING: () => (/* binding */ SENSITIVE_STRING)
/* harmony export */ });
const SENSITIVE_STRING = "***SensitiveInformation***";


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/create-aggregated-client.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/create-aggregated-client.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAggregatedClient: () => (/* binding */ createAggregatedClient)
/* harmony export */ });
const createAggregatedClient = (commands, Client) => {
    for (const command of Object.keys(commands)) {
        const CommandCtor = commands[command];
        const methodImpl = async function (args, optionsOrCb, cb) {
            const command = new CommandCtor(args);
            if (typeof optionsOrCb === "function") {
                this.send(command, optionsOrCb);
            }
            else if (typeof cb === "function") {
                if (typeof optionsOrCb !== "object")
                    throw new Error(`Expected http options but got ${typeof optionsOrCb}`);
                this.send(command, optionsOrCb || {}, cb);
            }
            else {
                return this.send(command, optionsOrCb);
            }
        };
        const methodName = (command[0].toLowerCase() + command.slice(1)).replace(/Command$/, "");
        Client.prototype[methodName] = methodImpl;
    }
};


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/date-utils.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/date-utils.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   dateToUtcString: () => (/* binding */ dateToUtcString),
/* harmony export */   parseEpochTimestamp: () => (/* binding */ parseEpochTimestamp),
/* harmony export */   parseRfc3339DateTime: () => (/* binding */ parseRfc3339DateTime),
/* harmony export */   parseRfc3339DateTimeWithOffset: () => (/* binding */ parseRfc3339DateTimeWithOffset),
/* harmony export */   parseRfc7231DateTime: () => (/* binding */ parseRfc7231DateTime)
/* harmony export */ });
/* harmony import */ var _parse_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parse-utils */ "../node_modules/@smithy/smithy-client/dist-es/parse-utils.js");

const DAYS = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
const MONTHS = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
function dateToUtcString(date) {
    const year = date.getUTCFullYear();
    const month = date.getUTCMonth();
    const dayOfWeek = date.getUTCDay();
    const dayOfMonthInt = date.getUTCDate();
    const hoursInt = date.getUTCHours();
    const minutesInt = date.getUTCMinutes();
    const secondsInt = date.getUTCSeconds();
    const dayOfMonthString = dayOfMonthInt < 10 ? `0${dayOfMonthInt}` : `${dayOfMonthInt}`;
    const hoursString = hoursInt < 10 ? `0${hoursInt}` : `${hoursInt}`;
    const minutesString = minutesInt < 10 ? `0${minutesInt}` : `${minutesInt}`;
    const secondsString = secondsInt < 10 ? `0${secondsInt}` : `${secondsInt}`;
    return `${DAYS[dayOfWeek]}, ${dayOfMonthString} ${MONTHS[month]} ${year} ${hoursString}:${minutesString}:${secondsString} GMT`;
}
const RFC3339 = new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);
const parseRfc3339DateTime = (value) => {
    if (value === null || value === undefined) {
        return undefined;
    }
    if (typeof value !== "string") {
        throw new TypeError("RFC-3339 date-times must be expressed as strings");
    }
    const match = RFC3339.exec(value);
    if (!match) {
        throw new TypeError("Invalid RFC-3339 date-time value");
    }
    const [_, yearStr, monthStr, dayStr, hours, minutes, seconds, fractionalMilliseconds] = match;
    const year = (0,_parse_utils__WEBPACK_IMPORTED_MODULE_0__.strictParseShort)(stripLeadingZeroes(yearStr));
    const month = parseDateValue(monthStr, "month", 1, 12);
    const day = parseDateValue(dayStr, "day", 1, 31);
    return buildDate(year, month, day, { hours, minutes, seconds, fractionalMilliseconds });
};
const RFC3339_WITH_OFFSET = new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/);
const parseRfc3339DateTimeWithOffset = (value) => {
    if (value === null || value === undefined) {
        return undefined;
    }
    if (typeof value !== "string") {
        throw new TypeError("RFC-3339 date-times must be expressed as strings");
    }
    const match = RFC3339_WITH_OFFSET.exec(value);
    if (!match) {
        throw new TypeError("Invalid RFC-3339 date-time value");
    }
    const [_, yearStr, monthStr, dayStr, hours, minutes, seconds, fractionalMilliseconds, offsetStr] = match;
    const year = (0,_parse_utils__WEBPACK_IMPORTED_MODULE_0__.strictParseShort)(stripLeadingZeroes(yearStr));
    const month = parseDateValue(monthStr, "month", 1, 12);
    const day = parseDateValue(dayStr, "day", 1, 31);
    const date = buildDate(year, month, day, { hours, minutes, seconds, fractionalMilliseconds });
    if (offsetStr.toUpperCase() != "Z") {
        date.setTime(date.getTime() - parseOffsetToMilliseconds(offsetStr));
    }
    return date;
};
const IMF_FIXDATE = new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/);
const RFC_850_DATE = new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/);
const ASC_TIME = new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);
const parseRfc7231DateTime = (value) => {
    if (value === null || value === undefined) {
        return undefined;
    }
    if (typeof value !== "string") {
        throw new TypeError("RFC-7231 date-times must be expressed as strings");
    }
    let match = IMF_FIXDATE.exec(value);
    if (match) {
        const [_, dayStr, monthStr, yearStr, hours, minutes, seconds, fractionalMilliseconds] = match;
        return buildDate((0,_parse_utils__WEBPACK_IMPORTED_MODULE_0__.strictParseShort)(stripLeadingZeroes(yearStr)), parseMonthByShortName(monthStr), parseDateValue(dayStr, "day", 1, 31), { hours, minutes, seconds, fractionalMilliseconds });
    }
    match = RFC_850_DATE.exec(value);
    if (match) {
        const [_, dayStr, monthStr, yearStr, hours, minutes, seconds, fractionalMilliseconds] = match;
        return adjustRfc850Year(buildDate(parseTwoDigitYear(yearStr), parseMonthByShortName(monthStr), parseDateValue(dayStr, "day", 1, 31), {
            hours,
            minutes,
            seconds,
            fractionalMilliseconds,
        }));
    }
    match = ASC_TIME.exec(value);
    if (match) {
        const [_, monthStr, dayStr, hours, minutes, seconds, fractionalMilliseconds, yearStr] = match;
        return buildDate((0,_parse_utils__WEBPACK_IMPORTED_MODULE_0__.strictParseShort)(stripLeadingZeroes(yearStr)), parseMonthByShortName(monthStr), parseDateValue(dayStr.trimLeft(), "day", 1, 31), { hours, minutes, seconds, fractionalMilliseconds });
    }
    throw new TypeError("Invalid RFC-7231 date-time value");
};
const parseEpochTimestamp = (value) => {
    if (value === null || value === undefined) {
        return undefined;
    }
    let valueAsDouble;
    if (typeof value === "number") {
        valueAsDouble = value;
    }
    else if (typeof value === "string") {
        valueAsDouble = (0,_parse_utils__WEBPACK_IMPORTED_MODULE_0__.strictParseDouble)(value);
    }
    else if (typeof value === "object" && value.tag === 1) {
        valueAsDouble = value.value;
    }
    else {
        throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");
    }
    if (Number.isNaN(valueAsDouble) || valueAsDouble === Infinity || valueAsDouble === -Infinity) {
        throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");
    }
    return new Date(Math.round(valueAsDouble * 1000));
};
const buildDate = (year, month, day, time) => {
    const adjustedMonth = month - 1;
    validateDayOfMonth(year, adjustedMonth, day);
    return new Date(Date.UTC(year, adjustedMonth, day, parseDateValue(time.hours, "hour", 0, 23), parseDateValue(time.minutes, "minute", 0, 59), parseDateValue(time.seconds, "seconds", 0, 60), parseMilliseconds(time.fractionalMilliseconds)));
};
const parseTwoDigitYear = (value) => {
    const thisYear = new Date().getUTCFullYear();
    const valueInThisCentury = Math.floor(thisYear / 100) * 100 + (0,_parse_utils__WEBPACK_IMPORTED_MODULE_0__.strictParseShort)(stripLeadingZeroes(value));
    if (valueInThisCentury < thisYear) {
        return valueInThisCentury + 100;
    }
    return valueInThisCentury;
};
const FIFTY_YEARS_IN_MILLIS = 50 * 365 * 24 * 60 * 60 * 1000;
const adjustRfc850Year = (input) => {
    if (input.getTime() - new Date().getTime() > FIFTY_YEARS_IN_MILLIS) {
        return new Date(Date.UTC(input.getUTCFullYear() - 100, input.getUTCMonth(), input.getUTCDate(), input.getUTCHours(), input.getUTCMinutes(), input.getUTCSeconds(), input.getUTCMilliseconds()));
    }
    return input;
};
const parseMonthByShortName = (value) => {
    const monthIdx = MONTHS.indexOf(value);
    if (monthIdx < 0) {
        throw new TypeError(`Invalid month: ${value}`);
    }
    return monthIdx + 1;
};
const DAYS_IN_MONTH = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
const validateDayOfMonth = (year, month, day) => {
    let maxDays = DAYS_IN_MONTH[month];
    if (month === 1 && isLeapYear(year)) {
        maxDays = 29;
    }
    if (day > maxDays) {
        throw new TypeError(`Invalid day for ${MONTHS[month]} in ${year}: ${day}`);
    }
};
const isLeapYear = (year) => {
    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);
};
const parseDateValue = (value, type, lower, upper) => {
    const dateVal = (0,_parse_utils__WEBPACK_IMPORTED_MODULE_0__.strictParseByte)(stripLeadingZeroes(value));
    if (dateVal < lower || dateVal > upper) {
        throw new TypeError(`${type} must be between ${lower} and ${upper}, inclusive`);
    }
    return dateVal;
};
const parseMilliseconds = (value) => {
    if (value === null || value === undefined) {
        return 0;
    }
    return (0,_parse_utils__WEBPACK_IMPORTED_MODULE_0__.strictParseFloat32)("0." + value) * 1000;
};
const parseOffsetToMilliseconds = (value) => {
    const directionStr = value[0];
    let direction = 1;
    if (directionStr == "+") {
        direction = 1;
    }
    else if (directionStr == "-") {
        direction = -1;
    }
    else {
        throw new TypeError(`Offset direction, ${directionStr}, must be "+" or "-"`);
    }
    const hour = Number(value.substring(1, 3));
    const minute = Number(value.substring(4, 6));
    return direction * (hour * 60 + minute) * 60 * 1000;
};
const stripLeadingZeroes = (value) => {
    let idx = 0;
    while (idx < value.length - 1 && value.charAt(idx) === "0") {
        idx++;
    }
    if (idx === 0) {
        return value;
    }
    return value.slice(idx);
};


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/default-error-handler.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/default-error-handler.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   throwDefaultError: () => (/* binding */ throwDefaultError),
/* harmony export */   withBaseException: () => (/* binding */ withBaseException)
/* harmony export */ });
/* harmony import */ var _exceptions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exceptions */ "../node_modules/@smithy/smithy-client/dist-es/exceptions.js");

const throwDefaultError = ({ output, parsedBody, exceptionCtor, errorCode }) => {
    const $metadata = deserializeMetadata(output);
    const statusCode = $metadata.httpStatusCode ? $metadata.httpStatusCode + "" : undefined;
    const response = new exceptionCtor({
        name: parsedBody?.code || parsedBody?.Code || errorCode || statusCode || "UnknownError",
        $fault: "client",
        $metadata,
    });
    throw (0,_exceptions__WEBPACK_IMPORTED_MODULE_0__.decorateServiceException)(response, parsedBody);
};
const withBaseException = (ExceptionCtor) => {
    return ({ output, parsedBody, errorCode }) => {
        throwDefaultError({ output, parsedBody, exceptionCtor: ExceptionCtor, errorCode });
    };
};
const deserializeMetadata = (output) => ({
    httpStatusCode: output.statusCode,
    requestId: output.headers["x-amzn-requestid"] ?? output.headers["x-amzn-request-id"] ?? output.headers["x-amz-request-id"],
    extendedRequestId: output.headers["x-amz-id-2"],
    cfId: output.headers["x-amz-cf-id"],
});


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/defaults-mode.js":
/*!**********************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/defaults-mode.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   loadConfigsForDefaultMode: () => (/* binding */ loadConfigsForDefaultMode)
/* harmony export */ });
const loadConfigsForDefaultMode = (mode) => {
    switch (mode) {
        case "standard":
            return {
                retryMode: "standard",
                connectionTimeout: 3100,
            };
        case "in-region":
            return {
                retryMode: "standard",
                connectionTimeout: 1100,
            };
        case "cross-region":
            return {
                retryMode: "standard",
                connectionTimeout: 3100,
            };
        case "mobile":
            return {
                retryMode: "standard",
                connectionTimeout: 30000,
            };
        default:
            return {};
    }
};


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/emitWarningIfUnsupportedVersion.js":
/*!****************************************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/emitWarningIfUnsupportedVersion.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   emitWarningIfUnsupportedVersion: () => (/* binding */ emitWarningIfUnsupportedVersion)
/* harmony export */ });
let warningEmitted = false;
const emitWarningIfUnsupportedVersion = (version) => {
    if (version && !warningEmitted && parseInt(version.substring(1, version.indexOf("."))) < 16) {
        warningEmitted = true;
    }
};


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/exceptions.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/exceptions.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ServiceException: () => (/* binding */ ServiceException),
/* harmony export */   decorateServiceException: () => (/* binding */ decorateServiceException)
/* harmony export */ });
class ServiceException extends Error {
    constructor(options) {
        super(options.message);
        Object.setPrototypeOf(this, Object.getPrototypeOf(this).constructor.prototype);
        this.name = options.name;
        this.$fault = options.$fault;
        this.$metadata = options.$metadata;
    }
    static isInstance(value) {
        if (!value)
            return false;
        const candidate = value;
        return (ServiceException.prototype.isPrototypeOf(candidate) ||
            (Boolean(candidate.$fault) &&
                Boolean(candidate.$metadata) &&
                (candidate.$fault === "client" || candidate.$fault === "server")));
    }
    static [Symbol.hasInstance](instance) {
        if (!instance)
            return false;
        const candidate = instance;
        if (this === ServiceException) {
            return ServiceException.isInstance(instance);
        }
        if (ServiceException.isInstance(instance)) {
            if (candidate.name && this.name) {
                return this.prototype.isPrototypeOf(instance) || candidate.name === this.name;
            }
            return this.prototype.isPrototypeOf(instance);
        }
        return false;
    }
}
const decorateServiceException = (exception, additions = {}) => {
    Object.entries(additions)
        .filter(([, v]) => v !== undefined)
        .forEach(([k, v]) => {
        if (exception[k] == undefined || exception[k] === "") {
            exception[k] = v;
        }
    });
    const message = exception.message || exception.Message || "UnknownError";
    exception.message = message;
    delete exception.Message;
    return exception;
};


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/extended-encode-uri-component.js":
/*!**************************************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/extended-encode-uri-component.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   extendedEncodeURIComponent: () => (/* reexport safe */ _smithy_core_protocols__WEBPACK_IMPORTED_MODULE_0__.extendedEncodeURIComponent)
/* harmony export */ });
/* harmony import */ var _smithy_core_protocols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/core/protocols */ "../node_modules/@smithy/core/dist-es/submodules/protocols/index.js");



/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/extensions/checksum.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/extensions/checksum.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AlgorithmId: () => (/* reexport safe */ _smithy_types__WEBPACK_IMPORTED_MODULE_0__.AlgorithmId),
/* harmony export */   getChecksumConfiguration: () => (/* binding */ getChecksumConfiguration),
/* harmony export */   resolveChecksumRuntimeConfig: () => (/* binding */ resolveChecksumRuntimeConfig)
/* harmony export */ });
/* harmony import */ var _smithy_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/types */ "../node_modules/@smithy/types/dist-es/index.js");


const getChecksumConfiguration = (runtimeConfig) => {
    const checksumAlgorithms = [];
    for (const id in _smithy_types__WEBPACK_IMPORTED_MODULE_0__.AlgorithmId) {
        const algorithmId = _smithy_types__WEBPACK_IMPORTED_MODULE_0__.AlgorithmId[id];
        if (runtimeConfig[algorithmId] === undefined) {
            continue;
        }
        checksumAlgorithms.push({
            algorithmId: () => algorithmId,
            checksumConstructor: () => runtimeConfig[algorithmId],
        });
    }
    return {
        _checksumAlgorithms: checksumAlgorithms,
        addChecksumAlgorithm(algo) {
            this._checksumAlgorithms.push(algo);
        },
        checksumAlgorithms() {
            return this._checksumAlgorithms;
        },
    };
};
const resolveChecksumRuntimeConfig = (clientConfig) => {
    const runtimeConfig = {};
    clientConfig.checksumAlgorithms().forEach((checksumAlgorithm) => {
        runtimeConfig[checksumAlgorithm.algorithmId()] = checksumAlgorithm.checksumConstructor();
    });
    return runtimeConfig;
};


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/extensions/defaultExtensionConfiguration.js":
/*!*************************************************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/extensions/defaultExtensionConfiguration.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDefaultClientConfiguration: () => (/* binding */ getDefaultClientConfiguration),
/* harmony export */   getDefaultExtensionConfiguration: () => (/* binding */ getDefaultExtensionConfiguration),
/* harmony export */   resolveDefaultRuntimeConfig: () => (/* binding */ resolveDefaultRuntimeConfig)
/* harmony export */ });
/* harmony import */ var _checksum__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./checksum */ "../node_modules/@smithy/smithy-client/dist-es/extensions/checksum.js");
/* harmony import */ var _retry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./retry */ "../node_modules/@smithy/smithy-client/dist-es/extensions/retry.js");


const getDefaultExtensionConfiguration = (runtimeConfig) => {
    return {
        ...(0,_checksum__WEBPACK_IMPORTED_MODULE_0__.getChecksumConfiguration)(runtimeConfig),
        ...(0,_retry__WEBPACK_IMPORTED_MODULE_1__.getRetryConfiguration)(runtimeConfig),
    };
};
const getDefaultClientConfiguration = getDefaultExtensionConfiguration;
const resolveDefaultRuntimeConfig = (config) => {
    return {
        ...(0,_checksum__WEBPACK_IMPORTED_MODULE_0__.resolveChecksumRuntimeConfig)(config),
        ...(0,_retry__WEBPACK_IMPORTED_MODULE_1__.resolveRetryRuntimeConfig)(config),
    };
};


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/extensions/index.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/extensions/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDefaultClientConfiguration: () => (/* reexport safe */ _defaultExtensionConfiguration__WEBPACK_IMPORTED_MODULE_0__.getDefaultClientConfiguration),
/* harmony export */   getDefaultExtensionConfiguration: () => (/* reexport safe */ _defaultExtensionConfiguration__WEBPACK_IMPORTED_MODULE_0__.getDefaultExtensionConfiguration),
/* harmony export */   resolveDefaultRuntimeConfig: () => (/* reexport safe */ _defaultExtensionConfiguration__WEBPACK_IMPORTED_MODULE_0__.resolveDefaultRuntimeConfig)
/* harmony export */ });
/* harmony import */ var _defaultExtensionConfiguration__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaultExtensionConfiguration */ "../node_modules/@smithy/smithy-client/dist-es/extensions/defaultExtensionConfiguration.js");



/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/extensions/retry.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/extensions/retry.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRetryConfiguration: () => (/* binding */ getRetryConfiguration),
/* harmony export */   resolveRetryRuntimeConfig: () => (/* binding */ resolveRetryRuntimeConfig)
/* harmony export */ });
const getRetryConfiguration = (runtimeConfig) => {
    let _retryStrategy = runtimeConfig.retryStrategy;
    return {
        setRetryStrategy(retryStrategy) {
            _retryStrategy = retryStrategy;
        },
        retryStrategy() {
            return _retryStrategy;
        },
    };
};
const resolveRetryRuntimeConfig = (retryStrategyConfiguration) => {
    const runtimeConfig = {};
    runtimeConfig.retryStrategy = retryStrategyConfiguration.retryStrategy();
    return runtimeConfig;
};


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/get-array-if-single-item.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/get-array-if-single-item.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getArrayIfSingleItem: () => (/* binding */ getArrayIfSingleItem)
/* harmony export */ });
const getArrayIfSingleItem = (mayBeArray) => Array.isArray(mayBeArray) ? mayBeArray : [mayBeArray];


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/get-value-from-text-node.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/get-value-from-text-node.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getValueFromTextNode: () => (/* binding */ getValueFromTextNode)
/* harmony export */ });
const getValueFromTextNode = (obj) => {
    const textNodeName = "#text";
    for (const key in obj) {
        if (obj.hasOwnProperty(key) && obj[key][textNodeName] !== undefined) {
            obj[key] = obj[key][textNodeName];
        }
        else if (typeof obj[key] === "object" && obj[key] !== null) {
            obj[key] = getValueFromTextNode(obj[key]);
        }
    }
    return obj;
};


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/index.js":
/*!**************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Client: () => (/* reexport safe */ _client__WEBPACK_IMPORTED_MODULE_0__.Client),
/* harmony export */   Command: () => (/* reexport safe */ _command__WEBPACK_IMPORTED_MODULE_2__.Command),
/* harmony export */   LazyJsonString: () => (/* reexport safe */ _lazy_json__WEBPACK_IMPORTED_MODULE_15__.LazyJsonString),
/* harmony export */   NoOpLogger: () => (/* reexport safe */ _NoOpLogger__WEBPACK_IMPORTED_MODULE_16__.NoOpLogger),
/* harmony export */   SENSITIVE_STRING: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_3__.SENSITIVE_STRING),
/* harmony export */   ServiceException: () => (/* reexport safe */ _exceptions__WEBPACK_IMPORTED_MODULE_9__.ServiceException),
/* harmony export */   _json: () => (/* reexport safe */ _serde_json__WEBPACK_IMPORTED_MODULE_22__._json),
/* harmony export */   collectBody: () => (/* reexport safe */ _collect_stream_body__WEBPACK_IMPORTED_MODULE_1__.collectBody),
/* harmony export */   convertMap: () => (/* reexport safe */ _object_mapping__WEBPACK_IMPORTED_MODULE_17__.convertMap),
/* harmony export */   createAggregatedClient: () => (/* reexport safe */ _create_aggregated_client__WEBPACK_IMPORTED_MODULE_4__.createAggregatedClient),
/* harmony export */   dateToUtcString: () => (/* reexport safe */ _date_utils__WEBPACK_IMPORTED_MODULE_5__.dateToUtcString),
/* harmony export */   decorateServiceException: () => (/* reexport safe */ _exceptions__WEBPACK_IMPORTED_MODULE_9__.decorateServiceException),
/* harmony export */   emitWarningIfUnsupportedVersion: () => (/* reexport safe */ _emitWarningIfUnsupportedVersion__WEBPACK_IMPORTED_MODULE_8__.emitWarningIfUnsupportedVersion),
/* harmony export */   expectBoolean: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.expectBoolean),
/* harmony export */   expectByte: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.expectByte),
/* harmony export */   expectFloat32: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.expectFloat32),
/* harmony export */   expectInt: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.expectInt),
/* harmony export */   expectInt32: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.expectInt32),
/* harmony export */   expectLong: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.expectLong),
/* harmony export */   expectNonNull: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.expectNonNull),
/* harmony export */   expectNumber: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.expectNumber),
/* harmony export */   expectObject: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.expectObject),
/* harmony export */   expectShort: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.expectShort),
/* harmony export */   expectString: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.expectString),
/* harmony export */   expectUnion: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.expectUnion),
/* harmony export */   extendedEncodeURIComponent: () => (/* reexport safe */ _extended_encode_uri_component__WEBPACK_IMPORTED_MODULE_10__.extendedEncodeURIComponent),
/* harmony export */   getArrayIfSingleItem: () => (/* reexport safe */ _get_array_if_single_item__WEBPACK_IMPORTED_MODULE_12__.getArrayIfSingleItem),
/* harmony export */   getDefaultClientConfiguration: () => (/* reexport safe */ _extensions__WEBPACK_IMPORTED_MODULE_11__.getDefaultClientConfiguration),
/* harmony export */   getDefaultExtensionConfiguration: () => (/* reexport safe */ _extensions__WEBPACK_IMPORTED_MODULE_11__.getDefaultExtensionConfiguration),
/* harmony export */   getValueFromTextNode: () => (/* reexport safe */ _get_value_from_text_node__WEBPACK_IMPORTED_MODULE_13__.getValueFromTextNode),
/* harmony export */   handleFloat: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.handleFloat),
/* harmony export */   isSerializableHeaderValue: () => (/* reexport safe */ _is_serializable_header_value__WEBPACK_IMPORTED_MODULE_14__.isSerializableHeaderValue),
/* harmony export */   limitedParseDouble: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.limitedParseDouble),
/* harmony export */   limitedParseFloat: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.limitedParseFloat),
/* harmony export */   limitedParseFloat32: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.limitedParseFloat32),
/* harmony export */   loadConfigsForDefaultMode: () => (/* reexport safe */ _defaults_mode__WEBPACK_IMPORTED_MODULE_7__.loadConfigsForDefaultMode),
/* harmony export */   logger: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.logger),
/* harmony export */   map: () => (/* reexport safe */ _object_mapping__WEBPACK_IMPORTED_MODULE_17__.map),
/* harmony export */   parseBoolean: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.parseBoolean),
/* harmony export */   parseEpochTimestamp: () => (/* reexport safe */ _date_utils__WEBPACK_IMPORTED_MODULE_5__.parseEpochTimestamp),
/* harmony export */   parseRfc3339DateTime: () => (/* reexport safe */ _date_utils__WEBPACK_IMPORTED_MODULE_5__.parseRfc3339DateTime),
/* harmony export */   parseRfc3339DateTimeWithOffset: () => (/* reexport safe */ _date_utils__WEBPACK_IMPORTED_MODULE_5__.parseRfc3339DateTimeWithOffset),
/* harmony export */   parseRfc7231DateTime: () => (/* reexport safe */ _date_utils__WEBPACK_IMPORTED_MODULE_5__.parseRfc7231DateTime),
/* harmony export */   quoteHeader: () => (/* reexport safe */ _quote_header__WEBPACK_IMPORTED_MODULE_19__.quoteHeader),
/* harmony export */   resolveDefaultRuntimeConfig: () => (/* reexport safe */ _extensions__WEBPACK_IMPORTED_MODULE_11__.resolveDefaultRuntimeConfig),
/* harmony export */   resolvedPath: () => (/* reexport safe */ _resolve_path__WEBPACK_IMPORTED_MODULE_20__.resolvedPath),
/* harmony export */   serializeDateTime: () => (/* reexport safe */ _ser_utils__WEBPACK_IMPORTED_MODULE_21__.serializeDateTime),
/* harmony export */   serializeFloat: () => (/* reexport safe */ _ser_utils__WEBPACK_IMPORTED_MODULE_21__.serializeFloat),
/* harmony export */   splitEvery: () => (/* reexport safe */ _split_every__WEBPACK_IMPORTED_MODULE_23__.splitEvery),
/* harmony export */   splitHeader: () => (/* reexport safe */ _split_header__WEBPACK_IMPORTED_MODULE_24__.splitHeader),
/* harmony export */   strictParseByte: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.strictParseByte),
/* harmony export */   strictParseDouble: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.strictParseDouble),
/* harmony export */   strictParseFloat: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.strictParseFloat),
/* harmony export */   strictParseFloat32: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.strictParseFloat32),
/* harmony export */   strictParseInt: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.strictParseInt),
/* harmony export */   strictParseInt32: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.strictParseInt32),
/* harmony export */   strictParseLong: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.strictParseLong),
/* harmony export */   strictParseShort: () => (/* reexport safe */ _parse_utils__WEBPACK_IMPORTED_MODULE_18__.strictParseShort),
/* harmony export */   take: () => (/* reexport safe */ _object_mapping__WEBPACK_IMPORTED_MODULE_17__.take),
/* harmony export */   throwDefaultError: () => (/* reexport safe */ _default_error_handler__WEBPACK_IMPORTED_MODULE_6__.throwDefaultError),
/* harmony export */   withBaseException: () => (/* reexport safe */ _default_error_handler__WEBPACK_IMPORTED_MODULE_6__.withBaseException)
/* harmony export */ });
/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client */ "../node_modules/@smithy/smithy-client/dist-es/client.js");
/* harmony import */ var _collect_stream_body__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collect-stream-body */ "../node_modules/@smithy/smithy-client/dist-es/collect-stream-body.js");
/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./command */ "../node_modules/@smithy/smithy-client/dist-es/command.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/smithy-client/dist-es/constants.js");
/* harmony import */ var _create_aggregated_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./create-aggregated-client */ "../node_modules/@smithy/smithy-client/dist-es/create-aggregated-client.js");
/* harmony import */ var _date_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./date-utils */ "../node_modules/@smithy/smithy-client/dist-es/date-utils.js");
/* harmony import */ var _default_error_handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./default-error-handler */ "../node_modules/@smithy/smithy-client/dist-es/default-error-handler.js");
/* harmony import */ var _defaults_mode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./defaults-mode */ "../node_modules/@smithy/smithy-client/dist-es/defaults-mode.js");
/* harmony import */ var _emitWarningIfUnsupportedVersion__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./emitWarningIfUnsupportedVersion */ "../node_modules/@smithy/smithy-client/dist-es/emitWarningIfUnsupportedVersion.js");
/* harmony import */ var _exceptions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./exceptions */ "../node_modules/@smithy/smithy-client/dist-es/exceptions.js");
/* harmony import */ var _extended_encode_uri_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./extended-encode-uri-component */ "../node_modules/@smithy/smithy-client/dist-es/extended-encode-uri-component.js");
/* harmony import */ var _extensions__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./extensions */ "../node_modules/@smithy/smithy-client/dist-es/extensions/index.js");
/* harmony import */ var _get_array_if_single_item__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./get-array-if-single-item */ "../node_modules/@smithy/smithy-client/dist-es/get-array-if-single-item.js");
/* harmony import */ var _get_value_from_text_node__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./get-value-from-text-node */ "../node_modules/@smithy/smithy-client/dist-es/get-value-from-text-node.js");
/* harmony import */ var _is_serializable_header_value__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./is-serializable-header-value */ "../node_modules/@smithy/smithy-client/dist-es/is-serializable-header-value.js");
/* harmony import */ var _lazy_json__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./lazy-json */ "../node_modules/@smithy/smithy-client/dist-es/lazy-json.js");
/* harmony import */ var _NoOpLogger__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./NoOpLogger */ "../node_modules/@smithy/smithy-client/dist-es/NoOpLogger.js");
/* harmony import */ var _object_mapping__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./object-mapping */ "../node_modules/@smithy/smithy-client/dist-es/object-mapping.js");
/* harmony import */ var _parse_utils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./parse-utils */ "../node_modules/@smithy/smithy-client/dist-es/parse-utils.js");
/* harmony import */ var _quote_header__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./quote-header */ "../node_modules/@smithy/smithy-client/dist-es/quote-header.js");
/* harmony import */ var _resolve_path__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./resolve-path */ "../node_modules/@smithy/smithy-client/dist-es/resolve-path.js");
/* harmony import */ var _ser_utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./ser-utils */ "../node_modules/@smithy/smithy-client/dist-es/ser-utils.js");
/* harmony import */ var _serde_json__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./serde-json */ "../node_modules/@smithy/smithy-client/dist-es/serde-json.js");
/* harmony import */ var _split_every__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./split-every */ "../node_modules/@smithy/smithy-client/dist-es/split-every.js");
/* harmony import */ var _split_header__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./split-header */ "../node_modules/@smithy/smithy-client/dist-es/split-header.js");



























/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/is-serializable-header-value.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/is-serializable-header-value.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isSerializableHeaderValue: () => (/* binding */ isSerializableHeaderValue)
/* harmony export */ });
const isSerializableHeaderValue = (value) => {
    return value != null;
};


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/lazy-json.js":
/*!******************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/lazy-json.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LazyJsonString: () => (/* binding */ LazyJsonString)
/* harmony export */ });
const LazyJsonString = function LazyJsonString(val) {
    const str = Object.assign(new String(val), {
        deserializeJSON() {
            return JSON.parse(String(val));
        },
        toString() {
            return String(val);
        },
        toJSON() {
            return String(val);
        },
    });
    return str;
};
LazyJsonString.from = (object) => {
    if (object && typeof object === "object" && (object instanceof LazyJsonString || "deserializeJSON" in object)) {
        return object;
    }
    else if (typeof object === "string" || Object.getPrototypeOf(object) === String.prototype) {
        return LazyJsonString(String(object));
    }
    return LazyJsonString(JSON.stringify(object));
};
LazyJsonString.fromObject = LazyJsonString.from;


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/object-mapping.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/object-mapping.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertMap: () => (/* binding */ convertMap),
/* harmony export */   map: () => (/* binding */ map),
/* harmony export */   take: () => (/* binding */ take)
/* harmony export */ });
function map(arg0, arg1, arg2) {
    let target;
    let filter;
    let instructions;
    if (typeof arg1 === "undefined" && typeof arg2 === "undefined") {
        target = {};
        instructions = arg0;
    }
    else {
        target = arg0;
        if (typeof arg1 === "function") {
            filter = arg1;
            instructions = arg2;
            return mapWithFilter(target, filter, instructions);
        }
        else {
            instructions = arg1;
        }
    }
    for (const key of Object.keys(instructions)) {
        if (!Array.isArray(instructions[key])) {
            target[key] = instructions[key];
            continue;
        }
        applyInstruction(target, null, instructions, key);
    }
    return target;
}
const convertMap = (target) => {
    const output = {};
    for (const [k, v] of Object.entries(target || {})) {
        output[k] = [, v];
    }
    return output;
};
const take = (source, instructions) => {
    const out = {};
    for (const key in instructions) {
        applyInstruction(out, source, instructions, key);
    }
    return out;
};
const mapWithFilter = (target, filter, instructions) => {
    return map(target, Object.entries(instructions).reduce((_instructions, [key, value]) => {
        if (Array.isArray(value)) {
            _instructions[key] = value;
        }
        else {
            if (typeof value === "function") {
                _instructions[key] = [filter, value()];
            }
            else {
                _instructions[key] = [filter, value];
            }
        }
        return _instructions;
    }, {}));
};
const applyInstruction = (target, source, instructions, targetKey) => {
    if (source !== null) {
        let instruction = instructions[targetKey];
        if (typeof instruction === "function") {
            instruction = [, instruction];
        }
        const [filter = nonNullish, valueFn = pass, sourceKey = targetKey] = instruction;
        if ((typeof filter === "function" && filter(source[sourceKey])) || (typeof filter !== "function" && !!filter)) {
            target[targetKey] = valueFn(source[sourceKey]);
        }
        return;
    }
    let [filter, value] = instructions[targetKey];
    if (typeof value === "function") {
        let _value;
        const defaultFilterPassed = filter === undefined && (_value = value()) != null;
        const customFilterPassed = (typeof filter === "function" && !!filter(void 0)) || (typeof filter !== "function" && !!filter);
        if (defaultFilterPassed) {
            target[targetKey] = _value;
        }
        else if (customFilterPassed) {
            target[targetKey] = value();
        }
    }
    else {
        const defaultFilterPassed = filter === undefined && value != null;
        const customFilterPassed = (typeof filter === "function" && !!filter(value)) || (typeof filter !== "function" && !!filter);
        if (defaultFilterPassed || customFilterPassed) {
            target[targetKey] = value;
        }
    }
};
const nonNullish = (_) => _ != null;
const pass = (_) => _;


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/parse-utils.js":
/*!********************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/parse-utils.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   expectBoolean: () => (/* binding */ expectBoolean),
/* harmony export */   expectByte: () => (/* binding */ expectByte),
/* harmony export */   expectFloat32: () => (/* binding */ expectFloat32),
/* harmony export */   expectInt: () => (/* binding */ expectInt),
/* harmony export */   expectInt32: () => (/* binding */ expectInt32),
/* harmony export */   expectLong: () => (/* binding */ expectLong),
/* harmony export */   expectNonNull: () => (/* binding */ expectNonNull),
/* harmony export */   expectNumber: () => (/* binding */ expectNumber),
/* harmony export */   expectObject: () => (/* binding */ expectObject),
/* harmony export */   expectShort: () => (/* binding */ expectShort),
/* harmony export */   expectString: () => (/* binding */ expectString),
/* harmony export */   expectUnion: () => (/* binding */ expectUnion),
/* harmony export */   handleFloat: () => (/* binding */ handleFloat),
/* harmony export */   limitedParseDouble: () => (/* binding */ limitedParseDouble),
/* harmony export */   limitedParseFloat: () => (/* binding */ limitedParseFloat),
/* harmony export */   limitedParseFloat32: () => (/* binding */ limitedParseFloat32),
/* harmony export */   logger: () => (/* binding */ logger),
/* harmony export */   parseBoolean: () => (/* binding */ parseBoolean),
/* harmony export */   strictParseByte: () => (/* binding */ strictParseByte),
/* harmony export */   strictParseDouble: () => (/* binding */ strictParseDouble),
/* harmony export */   strictParseFloat: () => (/* binding */ strictParseFloat),
/* harmony export */   strictParseFloat32: () => (/* binding */ strictParseFloat32),
/* harmony export */   strictParseInt: () => (/* binding */ strictParseInt),
/* harmony export */   strictParseInt32: () => (/* binding */ strictParseInt32),
/* harmony export */   strictParseLong: () => (/* binding */ strictParseLong),
/* harmony export */   strictParseShort: () => (/* binding */ strictParseShort)
/* harmony export */ });
const parseBoolean = (value) => {
    switch (value) {
        case "true":
            return true;
        case "false":
            return false;
        default:
            throw new Error(`Unable to parse boolean value "${value}"`);
    }
};
const expectBoolean = (value) => {
    if (value === null || value === undefined) {
        return undefined;
    }
    if (typeof value === "number") {
        if (value === 0 || value === 1) {
            logger.warn(stackTraceWarning(`Expected boolean, got ${typeof value}: ${value}`));
        }
        if (value === 0) {
            return false;
        }
        if (value === 1) {
            return true;
        }
    }
    if (typeof value === "string") {
        const lower = value.toLowerCase();
        if (lower === "false" || lower === "true") {
            logger.warn(stackTraceWarning(`Expected boolean, got ${typeof value}: ${value}`));
        }
        if (lower === "false") {
            return false;
        }
        if (lower === "true") {
            return true;
        }
    }
    if (typeof value === "boolean") {
        return value;
    }
    throw new TypeError(`Expected boolean, got ${typeof value}: ${value}`);
};
const expectNumber = (value) => {
    if (value === null || value === undefined) {
        return undefined;
    }
    if (typeof value === "string") {
        const parsed = parseFloat(value);
        if (!Number.isNaN(parsed)) {
            if (String(parsed) !== String(value)) {
                logger.warn(stackTraceWarning(`Expected number but observed string: ${value}`));
            }
            return parsed;
        }
    }
    if (typeof value === "number") {
        return value;
    }
    throw new TypeError(`Expected number, got ${typeof value}: ${value}`);
};
const MAX_FLOAT = Math.ceil(2 ** 127 * (2 - 2 ** -23));
const expectFloat32 = (value) => {
    const expected = expectNumber(value);
    if (expected !== undefined && !Number.isNaN(expected) && expected !== Infinity && expected !== -Infinity) {
        if (Math.abs(expected) > MAX_FLOAT) {
            throw new TypeError(`Expected 32-bit float, got ${value}`);
        }
    }
    return expected;
};
const expectLong = (value) => {
    if (value === null || value === undefined) {
        return undefined;
    }
    if (Number.isInteger(value) && !Number.isNaN(value)) {
        return value;
    }
    throw new TypeError(`Expected integer, got ${typeof value}: ${value}`);
};
const expectInt = expectLong;
const expectInt32 = (value) => expectSizedInt(value, 32);
const expectShort = (value) => expectSizedInt(value, 16);
const expectByte = (value) => expectSizedInt(value, 8);
const expectSizedInt = (value, size) => {
    const expected = expectLong(value);
    if (expected !== undefined && castInt(expected, size) !== expected) {
        throw new TypeError(`Expected ${size}-bit integer, got ${value}`);
    }
    return expected;
};
const castInt = (value, size) => {
    switch (size) {
        case 32:
            return Int32Array.of(value)[0];
        case 16:
            return Int16Array.of(value)[0];
        case 8:
            return Int8Array.of(value)[0];
    }
};
const expectNonNull = (value, location) => {
    if (value === null || value === undefined) {
        if (location) {
            throw new TypeError(`Expected a non-null value for ${location}`);
        }
        throw new TypeError("Expected a non-null value");
    }
    return value;
};
const expectObject = (value) => {
    if (value === null || value === undefined) {
        return undefined;
    }
    if (typeof value === "object" && !Array.isArray(value)) {
        return value;
    }
    const receivedType = Array.isArray(value) ? "array" : typeof value;
    throw new TypeError(`Expected object, got ${receivedType}: ${value}`);
};
const expectString = (value) => {
    if (value === null || value === undefined) {
        return undefined;
    }
    if (typeof value === "string") {
        return value;
    }
    if (["boolean", "number", "bigint"].includes(typeof value)) {
        logger.warn(stackTraceWarning(`Expected string, got ${typeof value}: ${value}`));
        return String(value);
    }
    throw new TypeError(`Expected string, got ${typeof value}: ${value}`);
};
const expectUnion = (value) => {
    if (value === null || value === undefined) {
        return undefined;
    }
    const asObject = expectObject(value);
    const setKeys = Object.entries(asObject)
        .filter(([, v]) => v != null)
        .map(([k]) => k);
    if (setKeys.length === 0) {
        throw new TypeError(`Unions must have exactly one non-null member. None were found.`);
    }
    if (setKeys.length > 1) {
        throw new TypeError(`Unions must have exactly one non-null member. Keys ${setKeys} were not null.`);
    }
    return asObject;
};
const strictParseDouble = (value) => {
    if (typeof value == "string") {
        return expectNumber(parseNumber(value));
    }
    return expectNumber(value);
};
const strictParseFloat = strictParseDouble;
const strictParseFloat32 = (value) => {
    if (typeof value == "string") {
        return expectFloat32(parseNumber(value));
    }
    return expectFloat32(value);
};
const NUMBER_REGEX = /(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g;
const parseNumber = (value) => {
    const matches = value.match(NUMBER_REGEX);
    if (matches === null || matches[0].length !== value.length) {
        throw new TypeError(`Expected real number, got implicit NaN`);
    }
    return parseFloat(value);
};
const limitedParseDouble = (value) => {
    if (typeof value == "string") {
        return parseFloatString(value);
    }
    return expectNumber(value);
};
const handleFloat = limitedParseDouble;
const limitedParseFloat = limitedParseDouble;
const limitedParseFloat32 = (value) => {
    if (typeof value == "string") {
        return parseFloatString(value);
    }
    return expectFloat32(value);
};
const parseFloatString = (value) => {
    switch (value) {
        case "NaN":
            return NaN;
        case "Infinity":
            return Infinity;
        case "-Infinity":
            return -Infinity;
        default:
            throw new Error(`Unable to parse float value: ${value}`);
    }
};
const strictParseLong = (value) => {
    if (typeof value === "string") {
        return expectLong(parseNumber(value));
    }
    return expectLong(value);
};
const strictParseInt = strictParseLong;
const strictParseInt32 = (value) => {
    if (typeof value === "string") {
        return expectInt32(parseNumber(value));
    }
    return expectInt32(value);
};
const strictParseShort = (value) => {
    if (typeof value === "string") {
        return expectShort(parseNumber(value));
    }
    return expectShort(value);
};
const strictParseByte = (value) => {
    if (typeof value === "string") {
        return expectByte(parseNumber(value));
    }
    return expectByte(value);
};
const stackTraceWarning = (message) => {
    return String(new TypeError(message).stack || message)
        .split("\n")
        .slice(0, 5)
        .filter((s) => !s.includes("stackTraceWarning"))
        .join("\n");
};
const logger = {
    warn: console.warn,
};


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/quote-header.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/quote-header.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   quoteHeader: () => (/* binding */ quoteHeader)
/* harmony export */ });
function quoteHeader(part) {
    if (part.includes(",") || part.includes('"')) {
        part = `"${part.replace(/"/g, '\\"')}"`;
    }
    return part;
}


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/resolve-path.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/resolve-path.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolvedPath: () => (/* reexport safe */ _smithy_core_protocols__WEBPACK_IMPORTED_MODULE_0__.resolvedPath)
/* harmony export */ });
/* harmony import */ var _smithy_core_protocols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/core/protocols */ "../node_modules/@smithy/core/dist-es/submodules/protocols/index.js");



/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/ser-utils.js":
/*!******************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/ser-utils.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   serializeDateTime: () => (/* binding */ serializeDateTime),
/* harmony export */   serializeFloat: () => (/* binding */ serializeFloat)
/* harmony export */ });
const serializeFloat = (value) => {
    if (value !== value) {
        return "NaN";
    }
    switch (value) {
        case Infinity:
            return "Infinity";
        case -Infinity:
            return "-Infinity";
        default:
            return value;
    }
};
const serializeDateTime = (date) => date.toISOString().replace(".000Z", "Z");


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/serde-json.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/serde-json.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   _json: () => (/* binding */ _json)
/* harmony export */ });
const _json = (obj) => {
    if (obj == null) {
        return {};
    }
    if (Array.isArray(obj)) {
        return obj.filter((_) => _ != null).map(_json);
    }
    if (typeof obj === "object") {
        const target = {};
        for (const key of Object.keys(obj)) {
            if (obj[key] == null) {
                continue;
            }
            target[key] = _json(obj[key]);
        }
        return target;
    }
    return obj;
};


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/split-every.js":
/*!********************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/split-every.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   splitEvery: () => (/* binding */ splitEvery)
/* harmony export */ });
function splitEvery(value, delimiter, numDelimiters) {
    if (numDelimiters <= 0 || !Number.isInteger(numDelimiters)) {
        throw new Error("Invalid number of delimiters (" + numDelimiters + ") for splitEvery.");
    }
    const segments = value.split(delimiter);
    if (numDelimiters === 1) {
        return segments;
    }
    const compoundSegments = [];
    let currentSegment = "";
    for (let i = 0; i < segments.length; i++) {
        if (currentSegment === "") {
            currentSegment = segments[i];
        }
        else {
            currentSegment += delimiter + segments[i];
        }
        if ((i + 1) % numDelimiters === 0) {
            compoundSegments.push(currentSegment);
            currentSegment = "";
        }
    }
    if (currentSegment !== "") {
        compoundSegments.push(currentSegment);
    }
    return compoundSegments;
}


/***/ }),

/***/ "../node_modules/@smithy/smithy-client/dist-es/split-header.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@smithy/smithy-client/dist-es/split-header.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   splitHeader: () => (/* binding */ splitHeader)
/* harmony export */ });
const splitHeader = (value) => {
    const z = value.length;
    const values = [];
    let withinQuotes = false;
    let prevChar = undefined;
    let anchor = 0;
    for (let i = 0; i < z; ++i) {
        const char = value[i];
        switch (char) {
            case `"`:
                if (prevChar !== "\\") {
                    withinQuotes = !withinQuotes;
                }
                break;
            case ",":
                if (!withinQuotes) {
                    values.push(value.slice(anchor, i));
                    anchor = i + 1;
                }
                break;
            default:
        }
        prevChar = char;
    }
    values.push(value.slice(anchor));
    return values.map((v) => {
        v = v.trim();
        const z = v.length;
        if (z < 2) {
            return v;
        }
        if (v[0] === `"` && v[z - 1] === `"`) {
            v = v.slice(1, z - 1);
        }
        return v.replace(/\\"/g, '"');
    });
};


/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/abort.js":
/*!******************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/abort.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/auth/HttpApiKeyAuth.js":
/*!********************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/auth/HttpApiKeyAuth.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpApiKeyAuthLocation: () => (/* binding */ HttpApiKeyAuthLocation)
/* harmony export */ });
var HttpApiKeyAuthLocation;
(function (HttpApiKeyAuthLocation) {
    HttpApiKeyAuthLocation["HEADER"] = "header";
    HttpApiKeyAuthLocation["QUERY"] = "query";
})(HttpApiKeyAuthLocation || (HttpApiKeyAuthLocation = {}));


/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/auth/HttpAuthScheme.js":
/*!********************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/auth/HttpAuthScheme.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/auth/HttpAuthSchemeProvider.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/auth/HttpAuthSchemeProvider.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/auth/HttpSigner.js":
/*!****************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/auth/HttpSigner.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/auth/IdentityProviderConfig.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/auth/IdentityProviderConfig.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/auth/auth.js":
/*!**********************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/auth/auth.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpAuthLocation: () => (/* binding */ HttpAuthLocation)
/* harmony export */ });
var HttpAuthLocation;
(function (HttpAuthLocation) {
    HttpAuthLocation["HEADER"] = "header";
    HttpAuthLocation["QUERY"] = "query";
})(HttpAuthLocation || (HttpAuthLocation = {}));


/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/auth/index.js":
/*!***********************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/auth/index.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpApiKeyAuthLocation: () => (/* reexport safe */ _HttpApiKeyAuth__WEBPACK_IMPORTED_MODULE_1__.HttpApiKeyAuthLocation),
/* harmony export */   HttpAuthLocation: () => (/* reexport safe */ _auth__WEBPACK_IMPORTED_MODULE_0__.HttpAuthLocation)
/* harmony export */ });
/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth */ "../node_modules/@smithy/types/dist-es/auth/auth.js");
/* harmony import */ var _HttpApiKeyAuth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./HttpApiKeyAuth */ "../node_modules/@smithy/types/dist-es/auth/HttpApiKeyAuth.js");
/* harmony import */ var _HttpAuthScheme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HttpAuthScheme */ "../node_modules/@smithy/types/dist-es/auth/HttpAuthScheme.js");
/* harmony import */ var _HttpAuthSchemeProvider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./HttpAuthSchemeProvider */ "../node_modules/@smithy/types/dist-es/auth/HttpAuthSchemeProvider.js");
/* harmony import */ var _HttpSigner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./HttpSigner */ "../node_modules/@smithy/types/dist-es/auth/HttpSigner.js");
/* harmony import */ var _IdentityProviderConfig__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./IdentityProviderConfig */ "../node_modules/@smithy/types/dist-es/auth/IdentityProviderConfig.js");








/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/blob/blob-payload-input-types.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/blob/blob-payload-input-types.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/checksum.js":
/*!*********************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/checksum.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/client.js":
/*!*******************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/client.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/command.js":
/*!********************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/command.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/connection/config.js":
/*!******************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/connection/config.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/connection/index.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/connection/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "../node_modules/@smithy/types/dist-es/connection/config.js");
/* harmony import */ var _manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./manager */ "../node_modules/@smithy/types/dist-es/connection/manager.js");
/* harmony import */ var _pool__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pool */ "../node_modules/@smithy/types/dist-es/connection/pool.js");





/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/connection/manager.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/connection/manager.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/connection/pool.js":
/*!****************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/connection/pool.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/crypto.js":
/*!*******************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/crypto.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/encode.js":
/*!*******************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/encode.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/endpoint.js":
/*!*********************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/endpoint.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EndpointURLScheme: () => (/* binding */ EndpointURLScheme)
/* harmony export */ });
var EndpointURLScheme;
(function (EndpointURLScheme) {
    EndpointURLScheme["HTTP"] = "http";
    EndpointURLScheme["HTTPS"] = "https";
})(EndpointURLScheme || (EndpointURLScheme = {}));


/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/endpoints/EndpointRuleObject.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/endpoints/EndpointRuleObject.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/endpoints/ErrorRuleObject.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/endpoints/ErrorRuleObject.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/endpoints/RuleSetObject.js":
/*!************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/endpoints/RuleSetObject.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/endpoints/TreeRuleObject.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/endpoints/TreeRuleObject.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/endpoints/index.js":
/*!****************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/endpoints/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _EndpointRuleObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EndpointRuleObject */ "../node_modules/@smithy/types/dist-es/endpoints/EndpointRuleObject.js");
/* harmony import */ var _ErrorRuleObject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ErrorRuleObject */ "../node_modules/@smithy/types/dist-es/endpoints/ErrorRuleObject.js");
/* harmony import */ var _RuleSetObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RuleSetObject */ "../node_modules/@smithy/types/dist-es/endpoints/RuleSetObject.js");
/* harmony import */ var _shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared */ "../node_modules/@smithy/types/dist-es/endpoints/shared.js");
/* harmony import */ var _TreeRuleObject__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TreeRuleObject */ "../node_modules/@smithy/types/dist-es/endpoints/TreeRuleObject.js");







/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/endpoints/shared.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/endpoints/shared.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/eventStream.js":
/*!************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/eventStream.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/extensions/checksum.js":
/*!********************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/extensions/checksum.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AlgorithmId: () => (/* binding */ AlgorithmId),
/* harmony export */   getChecksumConfiguration: () => (/* binding */ getChecksumConfiguration),
/* harmony export */   resolveChecksumRuntimeConfig: () => (/* binding */ resolveChecksumRuntimeConfig)
/* harmony export */ });
var AlgorithmId;
(function (AlgorithmId) {
    AlgorithmId["MD5"] = "md5";
    AlgorithmId["CRC32"] = "crc32";
    AlgorithmId["CRC32C"] = "crc32c";
    AlgorithmId["SHA1"] = "sha1";
    AlgorithmId["SHA256"] = "sha256";
})(AlgorithmId || (AlgorithmId = {}));
const getChecksumConfiguration = (runtimeConfig) => {
    const checksumAlgorithms = [];
    if (runtimeConfig.sha256 !== undefined) {
        checksumAlgorithms.push({
            algorithmId: () => AlgorithmId.SHA256,
            checksumConstructor: () => runtimeConfig.sha256,
        });
    }
    if (runtimeConfig.md5 != undefined) {
        checksumAlgorithms.push({
            algorithmId: () => AlgorithmId.MD5,
            checksumConstructor: () => runtimeConfig.md5,
        });
    }
    return {
        _checksumAlgorithms: checksumAlgorithms,
        addChecksumAlgorithm(algo) {
            this._checksumAlgorithms.push(algo);
        },
        checksumAlgorithms() {
            return this._checksumAlgorithms;
        },
    };
};
const resolveChecksumRuntimeConfig = (clientConfig) => {
    const runtimeConfig = {};
    clientConfig.checksumAlgorithms().forEach((checksumAlgorithm) => {
        runtimeConfig[checksumAlgorithm.algorithmId()] = checksumAlgorithm.checksumConstructor();
    });
    return runtimeConfig;
};


/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/extensions/defaultClientConfiguration.js":
/*!**************************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/extensions/defaultClientConfiguration.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDefaultClientConfiguration: () => (/* binding */ getDefaultClientConfiguration),
/* harmony export */   resolveDefaultRuntimeConfig: () => (/* binding */ resolveDefaultRuntimeConfig)
/* harmony export */ });
/* harmony import */ var _checksum__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./checksum */ "../node_modules/@smithy/types/dist-es/extensions/checksum.js");

const getDefaultClientConfiguration = (runtimeConfig) => {
    return {
        ...(0,_checksum__WEBPACK_IMPORTED_MODULE_0__.getChecksumConfiguration)(runtimeConfig),
    };
};
const resolveDefaultRuntimeConfig = (config) => {
    return {
        ...(0,_checksum__WEBPACK_IMPORTED_MODULE_0__.resolveChecksumRuntimeConfig)(config),
    };
};


/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/extensions/defaultExtensionConfiguration.js":
/*!*****************************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/extensions/defaultExtensionConfiguration.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/extensions/index.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/extensions/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AlgorithmId: () => (/* reexport safe */ _checksum__WEBPACK_IMPORTED_MODULE_2__.AlgorithmId),
/* harmony export */   getDefaultClientConfiguration: () => (/* reexport safe */ _defaultClientConfiguration__WEBPACK_IMPORTED_MODULE_0__.getDefaultClientConfiguration),
/* harmony export */   resolveDefaultRuntimeConfig: () => (/* reexport safe */ _defaultClientConfiguration__WEBPACK_IMPORTED_MODULE_0__.resolveDefaultRuntimeConfig)
/* harmony export */ });
/* harmony import */ var _defaultClientConfiguration__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaultClientConfiguration */ "../node_modules/@smithy/types/dist-es/extensions/defaultClientConfiguration.js");
/* harmony import */ var _defaultExtensionConfiguration__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./defaultExtensionConfiguration */ "../node_modules/@smithy/types/dist-es/extensions/defaultExtensionConfiguration.js");
/* harmony import */ var _checksum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./checksum */ "../node_modules/@smithy/types/dist-es/extensions/checksum.js");





/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/feature-ids.js":
/*!************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/feature-ids.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/http.js":
/*!*****************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/http.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FieldPosition: () => (/* binding */ FieldPosition)
/* harmony export */ });
var FieldPosition;
(function (FieldPosition) {
    FieldPosition[FieldPosition["HEADER"] = 0] = "HEADER";
    FieldPosition[FieldPosition["TRAILER"] = 1] = "TRAILER";
})(FieldPosition || (FieldPosition = {}));


/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/http/httpHandlerInitialization.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/http/httpHandlerInitialization.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/identity/apiKeyIdentity.js":
/*!************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/identity/apiKeyIdentity.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/identity/awsCredentialIdentity.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/identity/awsCredentialIdentity.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/identity/identity.js":
/*!******************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/identity/identity.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/identity/index.js":
/*!***************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/identity/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _apiKeyIdentity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./apiKeyIdentity */ "../node_modules/@smithy/types/dist-es/identity/apiKeyIdentity.js");
/* harmony import */ var _awsCredentialIdentity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./awsCredentialIdentity */ "../node_modules/@smithy/types/dist-es/identity/awsCredentialIdentity.js");
/* harmony import */ var _identity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./identity */ "../node_modules/@smithy/types/dist-es/identity/identity.js");
/* harmony import */ var _tokenIdentity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tokenIdentity */ "../node_modules/@smithy/types/dist-es/identity/tokenIdentity.js");






/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/identity/tokenIdentity.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/identity/tokenIdentity.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/index.js":
/*!******************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AlgorithmId: () => (/* reexport safe */ _extensions__WEBPACK_IMPORTED_MODULE_12__.AlgorithmId),
/* harmony export */   EndpointURLScheme: () => (/* reexport safe */ _endpoint__WEBPACK_IMPORTED_MODULE_9__.EndpointURLScheme),
/* harmony export */   FieldPosition: () => (/* reexport safe */ _http__WEBPACK_IMPORTED_MODULE_14__.FieldPosition),
/* harmony export */   HttpApiKeyAuthLocation: () => (/* reexport safe */ _auth__WEBPACK_IMPORTED_MODULE_1__.HttpApiKeyAuthLocation),
/* harmony export */   HttpAuthLocation: () => (/* reexport safe */ _auth__WEBPACK_IMPORTED_MODULE_1__.HttpAuthLocation),
/* harmony export */   IniSectionType: () => (/* reexport safe */ _profile__WEBPACK_IMPORTED_MODULE_20__.IniSectionType),
/* harmony export */   RequestHandlerProtocol: () => (/* reexport safe */ _transfer__WEBPACK_IMPORTED_MODULE_30__.RequestHandlerProtocol),
/* harmony export */   SMITHY_CONTEXT_KEY: () => (/* reexport safe */ _middleware__WEBPACK_IMPORTED_MODULE_18__.SMITHY_CONTEXT_KEY),
/* harmony export */   getDefaultClientConfiguration: () => (/* reexport safe */ _extensions__WEBPACK_IMPORTED_MODULE_12__.getDefaultClientConfiguration),
/* harmony export */   resolveDefaultRuntimeConfig: () => (/* reexport safe */ _extensions__WEBPACK_IMPORTED_MODULE_12__.resolveDefaultRuntimeConfig)
/* harmony export */ });
/* harmony import */ var _abort__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./abort */ "../node_modules/@smithy/types/dist-es/abort.js");
/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth */ "../node_modules/@smithy/types/dist-es/auth/index.js");
/* harmony import */ var _blob_blob_payload_input_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./blob/blob-payload-input-types */ "../node_modules/@smithy/types/dist-es/blob/blob-payload-input-types.js");
/* harmony import */ var _checksum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./checksum */ "../node_modules/@smithy/types/dist-es/checksum.js");
/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./client */ "../node_modules/@smithy/types/dist-es/client.js");
/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./command */ "../node_modules/@smithy/types/dist-es/command.js");
/* harmony import */ var _connection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./connection */ "../node_modules/@smithy/types/dist-es/connection/index.js");
/* harmony import */ var _crypto__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./crypto */ "../node_modules/@smithy/types/dist-es/crypto.js");
/* harmony import */ var _encode__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./encode */ "../node_modules/@smithy/types/dist-es/encode.js");
/* harmony import */ var _endpoint__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./endpoint */ "../node_modules/@smithy/types/dist-es/endpoint.js");
/* harmony import */ var _endpoints__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./endpoints */ "../node_modules/@smithy/types/dist-es/endpoints/index.js");
/* harmony import */ var _eventStream__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./eventStream */ "../node_modules/@smithy/types/dist-es/eventStream.js");
/* harmony import */ var _extensions__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./extensions */ "../node_modules/@smithy/types/dist-es/extensions/index.js");
/* harmony import */ var _feature_ids__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./feature-ids */ "../node_modules/@smithy/types/dist-es/feature-ids.js");
/* harmony import */ var _http__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./http */ "../node_modules/@smithy/types/dist-es/http.js");
/* harmony import */ var _http_httpHandlerInitialization__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./http/httpHandlerInitialization */ "../node_modules/@smithy/types/dist-es/http/httpHandlerInitialization.js");
/* harmony import */ var _identity__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./identity */ "../node_modules/@smithy/types/dist-es/identity/index.js");
/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./logger */ "../node_modules/@smithy/types/dist-es/logger.js");
/* harmony import */ var _middleware__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./middleware */ "../node_modules/@smithy/types/dist-es/middleware.js");
/* harmony import */ var _pagination__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./pagination */ "../node_modules/@smithy/types/dist-es/pagination.js");
/* harmony import */ var _profile__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./profile */ "../node_modules/@smithy/types/dist-es/profile.js");
/* harmony import */ var _response__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./response */ "../node_modules/@smithy/types/dist-es/response.js");
/* harmony import */ var _retry__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./retry */ "../node_modules/@smithy/types/dist-es/retry.js");
/* harmony import */ var _serde__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./serde */ "../node_modules/@smithy/types/dist-es/serde.js");
/* harmony import */ var _shapes__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./shapes */ "../node_modules/@smithy/types/dist-es/shapes.js");
/* harmony import */ var _signature__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./signature */ "../node_modules/@smithy/types/dist-es/signature.js");
/* harmony import */ var _stream__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./stream */ "../node_modules/@smithy/types/dist-es/stream.js");
/* harmony import */ var _streaming_payload_streaming_blob_common_types__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./streaming-payload/streaming-blob-common-types */ "../node_modules/@smithy/types/dist-es/streaming-payload/streaming-blob-common-types.js");
/* harmony import */ var _streaming_payload_streaming_blob_payload_input_types__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./streaming-payload/streaming-blob-payload-input-types */ "../node_modules/@smithy/types/dist-es/streaming-payload/streaming-blob-payload-input-types.js");
/* harmony import */ var _streaming_payload_streaming_blob_payload_output_types__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./streaming-payload/streaming-blob-payload-output-types */ "../node_modules/@smithy/types/dist-es/streaming-payload/streaming-blob-payload-output-types.js");
/* harmony import */ var _transfer__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./transfer */ "../node_modules/@smithy/types/dist-es/transfer.js");
/* harmony import */ var _transform_client_payload_blob_type_narrow__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./transform/client-payload-blob-type-narrow */ "../node_modules/@smithy/types/dist-es/transform/client-payload-blob-type-narrow.js");
/* harmony import */ var _transform_no_undefined__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./transform/no-undefined */ "../node_modules/@smithy/types/dist-es/transform/no-undefined.js");
/* harmony import */ var _transform_type_transform__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./transform/type-transform */ "../node_modules/@smithy/types/dist-es/transform/type-transform.js");
/* harmony import */ var _uri__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./uri */ "../node_modules/@smithy/types/dist-es/uri.js");
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./util */ "../node_modules/@smithy/types/dist-es/util.js");
/* harmony import */ var _waiter__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./waiter */ "../node_modules/@smithy/types/dist-es/waiter.js");







































/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/logger.js":
/*!*******************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/logger.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/middleware.js":
/*!***********************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/middleware.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SMITHY_CONTEXT_KEY: () => (/* binding */ SMITHY_CONTEXT_KEY)
/* harmony export */ });
const SMITHY_CONTEXT_KEY = "__smithy_context";


/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/pagination.js":
/*!***********************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/pagination.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/profile.js":
/*!********************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/profile.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IniSectionType: () => (/* binding */ IniSectionType)
/* harmony export */ });
var IniSectionType;
(function (IniSectionType) {
    IniSectionType["PROFILE"] = "profile";
    IniSectionType["SSO_SESSION"] = "sso-session";
    IniSectionType["SERVICES"] = "services";
})(IniSectionType || (IniSectionType = {}));


/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/response.js":
/*!*********************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/response.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/retry.js":
/*!******************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/retry.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/serde.js":
/*!******************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/serde.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/shapes.js":
/*!*******************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/shapes.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/signature.js":
/*!**********************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/signature.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/stream.js":
/*!*******************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/stream.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/streaming-payload/streaming-blob-common-types.js":
/*!**********************************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/streaming-payload/streaming-blob-common-types.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/streaming-payload/streaming-blob-payload-input-types.js":
/*!*****************************************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/streaming-payload/streaming-blob-payload-input-types.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/streaming-payload/streaming-blob-payload-output-types.js":
/*!******************************************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/streaming-payload/streaming-blob-payload-output-types.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/transfer.js":
/*!*********************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/transfer.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RequestHandlerProtocol: () => (/* binding */ RequestHandlerProtocol)
/* harmony export */ });
var RequestHandlerProtocol;
(function (RequestHandlerProtocol) {
    RequestHandlerProtocol["HTTP_0_9"] = "http/0.9";
    RequestHandlerProtocol["HTTP_1_0"] = "http/1.0";
    RequestHandlerProtocol["TDS_8_0"] = "tds/8.0";
})(RequestHandlerProtocol || (RequestHandlerProtocol = {}));


/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/transform/client-payload-blob-type-narrow.js":
/*!******************************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/transform/client-payload-blob-type-narrow.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/transform/no-undefined.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/transform/no-undefined.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/transform/type-transform.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/transform/type-transform.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/uri.js":
/*!****************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/uri.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/util.js":
/*!*****************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/util.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/types/dist-es/waiter.js":
/*!*******************************************************!*\
  !*** ../node_modules/@smithy/types/dist-es/waiter.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/url-parser/dist-es/index.js":
/*!***********************************************************!*\
  !*** ../node_modules/@smithy/url-parser/dist-es/index.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   parseUrl: () => (/* binding */ parseUrl)
/* harmony export */ });
/* harmony import */ var _smithy_querystring_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/querystring-parser */ "../node_modules/@smithy/querystring-parser/dist-es/index.js");

const parseUrl = (url) => {
    if (typeof url === "string") {
        return parseUrl(new URL(url));
    }
    const { hostname, pathname, port, protocol, search } = url;
    let query;
    if (search) {
        query = (0,_smithy_querystring_parser__WEBPACK_IMPORTED_MODULE_0__.parseQueryString)(search);
    }
    return {
        hostname,
        port: port ? parseInt(port) : undefined,
        protocol,
        path: pathname,
        query,
    };
};


/***/ }),

/***/ "../node_modules/@smithy/util-base64/dist-es/fromBase64.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/util-base64/dist-es/fromBase64.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromBase64: () => (/* binding */ fromBase64)
/* harmony export */ });
/* harmony import */ var _smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-buffer-from */ "../node_modules/@smithy/util-buffer-from/dist-es/index.js");

const BASE64_REGEX = /^[A-Za-z0-9+/]*={0,2}$/;
const fromBase64 = (input) => {
    if ((input.length * 3) % 4 !== 0) {
        throw new TypeError(`Incorrect padding on base64 string.`);
    }
    if (!BASE64_REGEX.exec(input)) {
        throw new TypeError(`Invalid base64 string.`);
    }
    const buffer = (0,_smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__.fromString)(input, "base64");
    return new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength);
};


/***/ }),

/***/ "../node_modules/@smithy/util-base64/dist-es/index.js":
/*!************************************************************!*\
  !*** ../node_modules/@smithy/util-base64/dist-es/index.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromBase64: () => (/* reexport safe */ _fromBase64__WEBPACK_IMPORTED_MODULE_0__.fromBase64),
/* harmony export */   toBase64: () => (/* reexport safe */ _toBase64__WEBPACK_IMPORTED_MODULE_1__.toBase64)
/* harmony export */ });
/* harmony import */ var _fromBase64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fromBase64 */ "../node_modules/@smithy/util-base64/dist-es/fromBase64.js");
/* harmony import */ var _toBase64__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toBase64 */ "../node_modules/@smithy/util-base64/dist-es/toBase64.js");




/***/ }),

/***/ "../node_modules/@smithy/util-base64/dist-es/toBase64.js":
/*!***************************************************************!*\
  !*** ../node_modules/@smithy/util-base64/dist-es/toBase64.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toBase64: () => (/* binding */ toBase64)
/* harmony export */ });
/* harmony import */ var _smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-buffer-from */ "../node_modules/@smithy/util-buffer-from/dist-es/index.js");
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-utf8 */ "../node_modules/@smithy/util-utf8/dist-es/index.js");


const toBase64 = (_input) => {
    let input;
    if (typeof _input === "string") {
        input = (0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_1__.fromUtf8)(_input);
    }
    else {
        input = _input;
    }
    if (typeof input !== "object" || typeof input.byteOffset !== "number" || typeof input.byteLength !== "number") {
        throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");
    }
    return (0,_smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__.fromArrayBuffer)(input.buffer, input.byteOffset, input.byteLength).toString("base64");
};


/***/ }),

/***/ "../node_modules/@smithy/util-body-length-node/dist-es/calculateBodyLength.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@smithy/util-body-length-node/dist-es/calculateBodyLength.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calculateBodyLength: () => (/* binding */ calculateBodyLength)
/* harmony export */ });
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ "fs");
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);

const calculateBodyLength = (body) => {
    if (!body) {
        return 0;
    }
    if (typeof body === "string") {
        return Buffer.byteLength(body);
    }
    else if (typeof body.byteLength === "number") {
        return body.byteLength;
    }
    else if (typeof body.size === "number") {
        return body.size;
    }
    else if (typeof body.start === "number" && typeof body.end === "number") {
        return body.end + 1 - body.start;
    }
    else if (typeof body.path === "string" || Buffer.isBuffer(body.path)) {
        return (0,fs__WEBPACK_IMPORTED_MODULE_0__.lstatSync)(body.path).size;
    }
    else if (typeof body.fd === "number") {
        return (0,fs__WEBPACK_IMPORTED_MODULE_0__.fstatSync)(body.fd).size;
    }
    throw new Error(`Body Length computation failed for ${body}`);
};


/***/ }),

/***/ "../node_modules/@smithy/util-body-length-node/dist-es/index.js":
/*!**********************************************************************!*\
  !*** ../node_modules/@smithy/util-body-length-node/dist-es/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calculateBodyLength: () => (/* reexport safe */ _calculateBodyLength__WEBPACK_IMPORTED_MODULE_0__.calculateBodyLength)
/* harmony export */ });
/* harmony import */ var _calculateBodyLength__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calculateBodyLength */ "../node_modules/@smithy/util-body-length-node/dist-es/calculateBodyLength.js");



/***/ }),

/***/ "../node_modules/@smithy/util-buffer-from/dist-es/index.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/util-buffer-from/dist-es/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromArrayBuffer: () => (/* binding */ fromArrayBuffer),
/* harmony export */   fromString: () => (/* binding */ fromString)
/* harmony export */ });
/* harmony import */ var _smithy_is_array_buffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/is-array-buffer */ "../node_modules/@smithy/is-array-buffer/dist-es/index.js");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "buffer");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(buffer__WEBPACK_IMPORTED_MODULE_1__);


const fromArrayBuffer = (input, offset = 0, length = input.byteLength - offset) => {
    if (!(0,_smithy_is_array_buffer__WEBPACK_IMPORTED_MODULE_0__.isArrayBuffer)(input)) {
        throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof input} (${input})`);
    }
    return buffer__WEBPACK_IMPORTED_MODULE_1__.Buffer.from(input, offset, length);
};
const fromString = (input, encoding) => {
    if (typeof input !== "string") {
        throw new TypeError(`The "input" argument must be of type string. Received type ${typeof input} (${input})`);
    }
    return encoding ? buffer__WEBPACK_IMPORTED_MODULE_1__.Buffer.from(input, encoding) : buffer__WEBPACK_IMPORTED_MODULE_1__.Buffer.from(input);
};


/***/ }),

/***/ "../node_modules/@smithy/util-config-provider/dist-es/booleanSelector.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@smithy/util-config-provider/dist-es/booleanSelector.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   booleanSelector: () => (/* binding */ booleanSelector)
/* harmony export */ });
const booleanSelector = (obj, key, type) => {
    if (!(key in obj))
        return undefined;
    if (obj[key] === "true")
        return true;
    if (obj[key] === "false")
        return false;
    throw new Error(`Cannot load ${type} "${key}". Expected "true" or "false", got ${obj[key]}.`);
};


/***/ }),

/***/ "../node_modules/@smithy/util-config-provider/dist-es/index.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@smithy/util-config-provider/dist-es/index.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SelectorType: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_2__.SelectorType),
/* harmony export */   booleanSelector: () => (/* reexport safe */ _booleanSelector__WEBPACK_IMPORTED_MODULE_0__.booleanSelector),
/* harmony export */   numberSelector: () => (/* reexport safe */ _numberSelector__WEBPACK_IMPORTED_MODULE_1__.numberSelector)
/* harmony export */ });
/* harmony import */ var _booleanSelector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./booleanSelector */ "../node_modules/@smithy/util-config-provider/dist-es/booleanSelector.js");
/* harmony import */ var _numberSelector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./numberSelector */ "../node_modules/@smithy/util-config-provider/dist-es/numberSelector.js");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types */ "../node_modules/@smithy/util-config-provider/dist-es/types.js");





/***/ }),

/***/ "../node_modules/@smithy/util-config-provider/dist-es/numberSelector.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@smithy/util-config-provider/dist-es/numberSelector.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   numberSelector: () => (/* binding */ numberSelector)
/* harmony export */ });
const numberSelector = (obj, key, type) => {
    if (!(key in obj))
        return undefined;
    const numberValue = parseInt(obj[key], 10);
    if (Number.isNaN(numberValue)) {
        throw new TypeError(`Cannot load ${type} '${key}'. Expected number, got '${obj[key]}'.`);
    }
    return numberValue;
};


/***/ }),

/***/ "../node_modules/@smithy/util-config-provider/dist-es/types.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@smithy/util-config-provider/dist-es/types.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SelectorType: () => (/* binding */ SelectorType)
/* harmony export */ });
var SelectorType;
(function (SelectorType) {
    SelectorType["ENV"] = "env";
    SelectorType["CONFIG"] = "shared config entry";
})(SelectorType || (SelectorType = {}));


/***/ }),

/***/ "../node_modules/@smithy/util-defaults-mode-node/dist-es/constants.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/util-defaults-mode-node/dist-es/constants.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AWS_DEFAULT_REGION_ENV: () => (/* binding */ AWS_DEFAULT_REGION_ENV),
/* harmony export */   AWS_EXECUTION_ENV: () => (/* binding */ AWS_EXECUTION_ENV),
/* harmony export */   AWS_REGION_ENV: () => (/* binding */ AWS_REGION_ENV),
/* harmony export */   DEFAULTS_MODE_OPTIONS: () => (/* binding */ DEFAULTS_MODE_OPTIONS),
/* harmony export */   ENV_IMDS_DISABLED: () => (/* binding */ ENV_IMDS_DISABLED),
/* harmony export */   IMDS_REGION_PATH: () => (/* binding */ IMDS_REGION_PATH)
/* harmony export */ });
const AWS_EXECUTION_ENV = "AWS_EXECUTION_ENV";
const AWS_REGION_ENV = "AWS_REGION";
const AWS_DEFAULT_REGION_ENV = "AWS_DEFAULT_REGION";
const ENV_IMDS_DISABLED = "AWS_EC2_METADATA_DISABLED";
const DEFAULTS_MODE_OPTIONS = ["in-region", "cross-region", "mobile", "standard", "legacy"];
const IMDS_REGION_PATH = "/latest/meta-data/placement/region";


/***/ }),

/***/ "../node_modules/@smithy/util-defaults-mode-node/dist-es/defaultsModeConfig.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@smithy/util-defaults-mode-node/dist-es/defaultsModeConfig.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NODE_DEFAULTS_MODE_CONFIG_OPTIONS: () => (/* binding */ NODE_DEFAULTS_MODE_CONFIG_OPTIONS)
/* harmony export */ });
const AWS_DEFAULTS_MODE_ENV = "AWS_DEFAULTS_MODE";
const AWS_DEFAULTS_MODE_CONFIG = "defaults_mode";
const NODE_DEFAULTS_MODE_CONFIG_OPTIONS = {
    environmentVariableSelector: (env) => {
        return env[AWS_DEFAULTS_MODE_ENV];
    },
    configFileSelector: (profile) => {
        return profile[AWS_DEFAULTS_MODE_CONFIG];
    },
    default: "legacy",
};


/***/ }),

/***/ "../node_modules/@smithy/util-defaults-mode-node/dist-es/index.js":
/*!************************************************************************!*\
  !*** ../node_modules/@smithy/util-defaults-mode-node/dist-es/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveDefaultsModeConfig: () => (/* reexport safe */ _resolveDefaultsModeConfig__WEBPACK_IMPORTED_MODULE_0__.resolveDefaultsModeConfig)
/* harmony export */ });
/* harmony import */ var _resolveDefaultsModeConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./resolveDefaultsModeConfig */ "../node_modules/@smithy/util-defaults-mode-node/dist-es/resolveDefaultsModeConfig.js");



/***/ }),

/***/ "../node_modules/@smithy/util-defaults-mode-node/dist-es/resolveDefaultsModeConfig.js":
/*!********************************************************************************************!*\
  !*** ../node_modules/@smithy/util-defaults-mode-node/dist-es/resolveDefaultsModeConfig.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveDefaultsModeConfig: () => (/* binding */ resolveDefaultsModeConfig)
/* harmony export */ });
/* harmony import */ var _smithy_config_resolver__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/config-resolver */ "../node_modules/@smithy/config-resolver/dist-es/index.js");
/* harmony import */ var _smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/node-config-provider */ "../node_modules/@smithy/node-config-provider/dist-es/index.js");
/* harmony import */ var _smithy_property_provider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/property-provider */ "../node_modules/@smithy/property-provider/dist-es/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/util-defaults-mode-node/dist-es/constants.js");
/* harmony import */ var _defaultsModeConfig__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./defaultsModeConfig */ "../node_modules/@smithy/util-defaults-mode-node/dist-es/defaultsModeConfig.js");





const resolveDefaultsModeConfig = ({ region = (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_1__.loadConfig)(_smithy_config_resolver__WEBPACK_IMPORTED_MODULE_0__.NODE_REGION_CONFIG_OPTIONS), defaultsMode = (0,_smithy_node_config_provider__WEBPACK_IMPORTED_MODULE_1__.loadConfig)(_defaultsModeConfig__WEBPACK_IMPORTED_MODULE_4__.NODE_DEFAULTS_MODE_CONFIG_OPTIONS), } = {}) => (0,_smithy_property_provider__WEBPACK_IMPORTED_MODULE_2__.memoize)(async () => {
    const mode = typeof defaultsMode === "function" ? await defaultsMode() : defaultsMode;
    switch (mode?.toLowerCase()) {
        case "auto":
            return resolveNodeDefaultsModeAuto(region);
        case "in-region":
        case "cross-region":
        case "mobile":
        case "standard":
        case "legacy":
            return Promise.resolve(mode?.toLocaleLowerCase());
        case undefined:
            return Promise.resolve("legacy");
        default:
            throw new Error(`Invalid parameter for "defaultsMode", expect ${_constants__WEBPACK_IMPORTED_MODULE_3__.DEFAULTS_MODE_OPTIONS.join(", ")}, got ${mode}`);
    }
});
const resolveNodeDefaultsModeAuto = async (clientRegion) => {
    if (clientRegion) {
        const resolvedRegion = typeof clientRegion === "function" ? await clientRegion() : clientRegion;
        const inferredRegion = await inferPhysicalRegion();
        if (!inferredRegion) {
            return "standard";
        }
        if (resolvedRegion === inferredRegion) {
            return "in-region";
        }
        else {
            return "cross-region";
        }
    }
    return "standard";
};
const inferPhysicalRegion = async () => {
    if (process.env[_constants__WEBPACK_IMPORTED_MODULE_3__.AWS_EXECUTION_ENV] && (process.env[_constants__WEBPACK_IMPORTED_MODULE_3__.AWS_REGION_ENV] || process.env[_constants__WEBPACK_IMPORTED_MODULE_3__.AWS_DEFAULT_REGION_ENV])) {
        return process.env[_constants__WEBPACK_IMPORTED_MODULE_3__.AWS_REGION_ENV] ?? process.env[_constants__WEBPACK_IMPORTED_MODULE_3__.AWS_DEFAULT_REGION_ENV];
    }
    if (!process.env[_constants__WEBPACK_IMPORTED_MODULE_3__.ENV_IMDS_DISABLED]) {
        try {
            const { getInstanceMetadataEndpoint, httpRequest } = await __webpack_require__.e(/*! import() */ "vendors-node_modules_smithy_credential-provider-imds_dist-es_index_js").then(__webpack_require__.bind(__webpack_require__, /*! @smithy/credential-provider-imds */ "../node_modules/@smithy/credential-provider-imds/dist-es/index.js"));
            const endpoint = await getInstanceMetadataEndpoint();
            return (await httpRequest({ ...endpoint, path: _constants__WEBPACK_IMPORTED_MODULE_3__.IMDS_REGION_PATH })).toString();
        }
        catch (e) {
        }
    }
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/cache/EndpointCache.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/cache/EndpointCache.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EndpointCache: () => (/* binding */ EndpointCache)
/* harmony export */ });
class EndpointCache {
    constructor({ size, params }) {
        this.data = new Map();
        this.parameters = [];
        this.capacity = size ?? 50;
        if (params) {
            this.parameters = params;
        }
    }
    get(endpointParams, resolver) {
        const key = this.hash(endpointParams);
        if (key === false) {
            return resolver();
        }
        if (!this.data.has(key)) {
            if (this.data.size > this.capacity + 10) {
                const keys = this.data.keys();
                let i = 0;
                while (true) {
                    const { value, done } = keys.next();
                    this.data.delete(value);
                    if (done || ++i > 10) {
                        break;
                    }
                }
            }
            this.data.set(key, resolver());
        }
        return this.data.get(key);
    }
    size() {
        return this.data.size;
    }
    hash(endpointParams) {
        let buffer = "";
        const { parameters } = this;
        if (parameters.length === 0) {
            return false;
        }
        for (const param of parameters) {
            const val = String(endpointParams[param] ?? "");
            if (val.includes("|;")) {
                return false;
            }
            buffer += val + "|;";
        }
        return buffer;
    }
}


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/debug/debugId.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/debug/debugId.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   debugId: () => (/* binding */ debugId)
/* harmony export */ });
const debugId = "endpoints";


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/debug/index.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/debug/index.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   debugId: () => (/* reexport safe */ _debugId__WEBPACK_IMPORTED_MODULE_0__.debugId),
/* harmony export */   toDebugString: () => (/* reexport safe */ _toDebugString__WEBPACK_IMPORTED_MODULE_1__.toDebugString)
/* harmony export */ });
/* harmony import */ var _debugId__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debugId */ "../node_modules/@smithy/util-endpoints/dist-es/debug/debugId.js");
/* harmony import */ var _toDebugString__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toDebugString */ "../node_modules/@smithy/util-endpoints/dist-es/debug/toDebugString.js");




/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/debug/toDebugString.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/debug/toDebugString.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toDebugString: () => (/* binding */ toDebugString)
/* harmony export */ });
function toDebugString(input) {
    if (typeof input !== "object" || input == null) {
        return input;
    }
    if ("ref" in input) {
        return `$${toDebugString(input.ref)}`;
    }
    if ("fn" in input) {
        return `${input.fn}(${(input.argv || []).map(toDebugString).join(", ")})`;
    }
    return JSON.stringify(input, null, 2);
}


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/index.js":
/*!***************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EndpointCache: () => (/* reexport safe */ _cache_EndpointCache__WEBPACK_IMPORTED_MODULE_0__.EndpointCache),
/* harmony export */   EndpointError: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_5__.EndpointError),
/* harmony export */   customEndpointFunctions: () => (/* reexport safe */ _utils_customEndpointFunctions__WEBPACK_IMPORTED_MODULE_3__.customEndpointFunctions),
/* harmony export */   isIpAddress: () => (/* reexport safe */ _lib_isIpAddress__WEBPACK_IMPORTED_MODULE_1__.isIpAddress),
/* harmony export */   isValidHostLabel: () => (/* reexport safe */ _lib_isValidHostLabel__WEBPACK_IMPORTED_MODULE_2__.isValidHostLabel),
/* harmony export */   resolveEndpoint: () => (/* reexport safe */ _resolveEndpoint__WEBPACK_IMPORTED_MODULE_4__.resolveEndpoint)
/* harmony export */ });
/* harmony import */ var _cache_EndpointCache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cache/EndpointCache */ "../node_modules/@smithy/util-endpoints/dist-es/cache/EndpointCache.js");
/* harmony import */ var _lib_isIpAddress__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/isIpAddress */ "../node_modules/@smithy/util-endpoints/dist-es/lib/isIpAddress.js");
/* harmony import */ var _lib_isValidHostLabel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/isValidHostLabel */ "../node_modules/@smithy/util-endpoints/dist-es/lib/isValidHostLabel.js");
/* harmony import */ var _utils_customEndpointFunctions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/customEndpointFunctions */ "../node_modules/@smithy/util-endpoints/dist-es/utils/customEndpointFunctions.js");
/* harmony import */ var _resolveEndpoint__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./resolveEndpoint */ "../node_modules/@smithy/util-endpoints/dist-es/resolveEndpoint.js");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./types */ "../node_modules/@smithy/util-endpoints/dist-es/types/index.js");








/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/lib/booleanEquals.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/lib/booleanEquals.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   booleanEquals: () => (/* binding */ booleanEquals)
/* harmony export */ });
const booleanEquals = (value1, value2) => value1 === value2;


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/lib/getAttr.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/lib/getAttr.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getAttr: () => (/* binding */ getAttr)
/* harmony export */ });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "../node_modules/@smithy/util-endpoints/dist-es/types/index.js");
/* harmony import */ var _getAttrPathList__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getAttrPathList */ "../node_modules/@smithy/util-endpoints/dist-es/lib/getAttrPathList.js");


const getAttr = (value, path) => (0,_getAttrPathList__WEBPACK_IMPORTED_MODULE_1__.getAttrPathList)(path).reduce((acc, index) => {
    if (typeof acc !== "object") {
        throw new _types__WEBPACK_IMPORTED_MODULE_0__.EndpointError(`Index '${index}' in '${path}' not found in '${JSON.stringify(value)}'`);
    }
    else if (Array.isArray(acc)) {
        return acc[parseInt(index)];
    }
    return acc[index];
}, value);


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/lib/getAttrPathList.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/lib/getAttrPathList.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getAttrPathList: () => (/* binding */ getAttrPathList)
/* harmony export */ });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "../node_modules/@smithy/util-endpoints/dist-es/types/index.js");

const getAttrPathList = (path) => {
    const parts = path.split(".");
    const pathList = [];
    for (const part of parts) {
        const squareBracketIndex = part.indexOf("[");
        if (squareBracketIndex !== -1) {
            if (part.indexOf("]") !== part.length - 1) {
                throw new _types__WEBPACK_IMPORTED_MODULE_0__.EndpointError(`Path: '${path}' does not end with ']'`);
            }
            const arrayIndex = part.slice(squareBracketIndex + 1, -1);
            if (Number.isNaN(parseInt(arrayIndex))) {
                throw new _types__WEBPACK_IMPORTED_MODULE_0__.EndpointError(`Invalid array index: '${arrayIndex}' in path: '${path}'`);
            }
            if (squareBracketIndex !== 0) {
                pathList.push(part.slice(0, squareBracketIndex));
            }
            pathList.push(arrayIndex);
        }
        else {
            pathList.push(part);
        }
    }
    return pathList;
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/lib/index.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/lib/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   booleanEquals: () => (/* reexport safe */ _booleanEquals__WEBPACK_IMPORTED_MODULE_0__.booleanEquals),
/* harmony export */   getAttr: () => (/* reexport safe */ _getAttr__WEBPACK_IMPORTED_MODULE_1__.getAttr),
/* harmony export */   isSet: () => (/* reexport safe */ _isSet__WEBPACK_IMPORTED_MODULE_2__.isSet),
/* harmony export */   isValidHostLabel: () => (/* reexport safe */ _isValidHostLabel__WEBPACK_IMPORTED_MODULE_3__.isValidHostLabel),
/* harmony export */   not: () => (/* reexport safe */ _not__WEBPACK_IMPORTED_MODULE_4__.not),
/* harmony export */   parseURL: () => (/* reexport safe */ _parseURL__WEBPACK_IMPORTED_MODULE_5__.parseURL),
/* harmony export */   stringEquals: () => (/* reexport safe */ _stringEquals__WEBPACK_IMPORTED_MODULE_6__.stringEquals),
/* harmony export */   substring: () => (/* reexport safe */ _substring__WEBPACK_IMPORTED_MODULE_7__.substring),
/* harmony export */   uriEncode: () => (/* reexport safe */ _uriEncode__WEBPACK_IMPORTED_MODULE_8__.uriEncode)
/* harmony export */ });
/* harmony import */ var _booleanEquals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./booleanEquals */ "../node_modules/@smithy/util-endpoints/dist-es/lib/booleanEquals.js");
/* harmony import */ var _getAttr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getAttr */ "../node_modules/@smithy/util-endpoints/dist-es/lib/getAttr.js");
/* harmony import */ var _isSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isSet */ "../node_modules/@smithy/util-endpoints/dist-es/lib/isSet.js");
/* harmony import */ var _isValidHostLabel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./isValidHostLabel */ "../node_modules/@smithy/util-endpoints/dist-es/lib/isValidHostLabel.js");
/* harmony import */ var _not__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./not */ "../node_modules/@smithy/util-endpoints/dist-es/lib/not.js");
/* harmony import */ var _parseURL__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./parseURL */ "../node_modules/@smithy/util-endpoints/dist-es/lib/parseURL.js");
/* harmony import */ var _stringEquals__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./stringEquals */ "../node_modules/@smithy/util-endpoints/dist-es/lib/stringEquals.js");
/* harmony import */ var _substring__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./substring */ "../node_modules/@smithy/util-endpoints/dist-es/lib/substring.js");
/* harmony import */ var _uriEncode__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./uriEncode */ "../node_modules/@smithy/util-endpoints/dist-es/lib/uriEncode.js");











/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/lib/isIpAddress.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/lib/isIpAddress.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isIpAddress: () => (/* binding */ isIpAddress)
/* harmony export */ });
const IP_V4_REGEX = new RegExp(`^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$`);
const isIpAddress = (value) => IP_V4_REGEX.test(value) || (value.startsWith("[") && value.endsWith("]"));


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/lib/isSet.js":
/*!*******************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/lib/isSet.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isSet: () => (/* binding */ isSet)
/* harmony export */ });
const isSet = (value) => value != null;


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/lib/isValidHostLabel.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/lib/isValidHostLabel.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isValidHostLabel: () => (/* binding */ isValidHostLabel)
/* harmony export */ });
const VALID_HOST_LABEL_REGEX = new RegExp(`^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$`);
const isValidHostLabel = (value, allowSubDomains = false) => {
    if (!allowSubDomains) {
        return VALID_HOST_LABEL_REGEX.test(value);
    }
    const labels = value.split(".");
    for (const label of labels) {
        if (!isValidHostLabel(label)) {
            return false;
        }
    }
    return true;
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/lib/not.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/lib/not.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   not: () => (/* binding */ not)
/* harmony export */ });
const not = (value) => !value;


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/lib/parseURL.js":
/*!**********************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/lib/parseURL.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   parseURL: () => (/* binding */ parseURL)
/* harmony export */ });
/* harmony import */ var _smithy_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/types */ "../node_modules/@smithy/types/dist-es/index.js");
/* harmony import */ var _isIpAddress__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isIpAddress */ "../node_modules/@smithy/util-endpoints/dist-es/lib/isIpAddress.js");


const DEFAULT_PORTS = {
    [_smithy_types__WEBPACK_IMPORTED_MODULE_0__.EndpointURLScheme.HTTP]: 80,
    [_smithy_types__WEBPACK_IMPORTED_MODULE_0__.EndpointURLScheme.HTTPS]: 443,
};
const parseURL = (value) => {
    const whatwgURL = (() => {
        try {
            if (value instanceof URL) {
                return value;
            }
            if (typeof value === "object" && "hostname" in value) {
                const { hostname, port, protocol = "", path = "", query = {} } = value;
                const url = new URL(`${protocol}//${hostname}${port ? `:${port}` : ""}${path}`);
                url.search = Object.entries(query)
                    .map(([k, v]) => `${k}=${v}`)
                    .join("&");
                return url;
            }
            return new URL(value);
        }
        catch (error) {
            return null;
        }
    })();
    if (!whatwgURL) {
        console.error(`Unable to parse ${JSON.stringify(value)} as a whatwg URL.`);
        return null;
    }
    const urlString = whatwgURL.href;
    const { host, hostname, pathname, protocol, search } = whatwgURL;
    if (search) {
        return null;
    }
    const scheme = protocol.slice(0, -1);
    if (!Object.values(_smithy_types__WEBPACK_IMPORTED_MODULE_0__.EndpointURLScheme).includes(scheme)) {
        return null;
    }
    const isIp = (0,_isIpAddress__WEBPACK_IMPORTED_MODULE_1__.isIpAddress)(hostname);
    const inputContainsDefaultPort = urlString.includes(`${host}:${DEFAULT_PORTS[scheme]}`) ||
        (typeof value === "string" && value.includes(`${host}:${DEFAULT_PORTS[scheme]}`));
    const authority = `${host}${inputContainsDefaultPort ? `:${DEFAULT_PORTS[scheme]}` : ``}`;
    return {
        scheme,
        authority,
        path: pathname,
        normalizedPath: pathname.endsWith("/") ? pathname : `${pathname}/`,
        isIp,
    };
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/lib/stringEquals.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/lib/stringEquals.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   stringEquals: () => (/* binding */ stringEquals)
/* harmony export */ });
const stringEquals = (value1, value2) => value1 === value2;


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/lib/substring.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/lib/substring.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   substring: () => (/* binding */ substring)
/* harmony export */ });
const substring = (input, start, stop, reverse) => {
    if (start >= stop || input.length < stop) {
        return null;
    }
    if (!reverse) {
        return input.substring(start, stop);
    }
    return input.substring(input.length - stop, input.length - start);
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/lib/uriEncode.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/lib/uriEncode.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   uriEncode: () => (/* binding */ uriEncode)
/* harmony export */ });
const uriEncode = (value) => encodeURIComponent(value).replace(/[!*'()]/g, (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`);


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/resolveEndpoint.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/resolveEndpoint.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveEndpoint: () => (/* binding */ resolveEndpoint)
/* harmony export */ });
/* harmony import */ var _debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debug */ "../node_modules/@smithy/util-endpoints/dist-es/debug/index.js");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types */ "../node_modules/@smithy/util-endpoints/dist-es/types/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "../node_modules/@smithy/util-endpoints/dist-es/utils/index.js");



const resolveEndpoint = (ruleSetObject, options) => {
    const { endpointParams, logger } = options;
    const { parameters, rules } = ruleSetObject;
    options.logger?.debug?.(`${_debug__WEBPACK_IMPORTED_MODULE_0__.debugId} Initial EndpointParams: ${(0,_debug__WEBPACK_IMPORTED_MODULE_0__.toDebugString)(endpointParams)}`);
    const paramsWithDefault = Object.entries(parameters)
        .filter(([, v]) => v.default != null)
        .map(([k, v]) => [k, v.default]);
    if (paramsWithDefault.length > 0) {
        for (const [paramKey, paramDefaultValue] of paramsWithDefault) {
            endpointParams[paramKey] = endpointParams[paramKey] ?? paramDefaultValue;
        }
    }
    const requiredParams = Object.entries(parameters)
        .filter(([, v]) => v.required)
        .map(([k]) => k);
    for (const requiredParam of requiredParams) {
        if (endpointParams[requiredParam] == null) {
            throw new _types__WEBPACK_IMPORTED_MODULE_1__.EndpointError(`Missing required parameter: '${requiredParam}'`);
        }
    }
    const endpoint = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.evaluateRules)(rules, { endpointParams, logger, referenceRecord: {} });
    options.logger?.debug?.(`${_debug__WEBPACK_IMPORTED_MODULE_0__.debugId} Resolved endpoint: ${(0,_debug__WEBPACK_IMPORTED_MODULE_0__.toDebugString)(endpoint)}`);
    return endpoint;
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/types/EndpointError.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/types/EndpointError.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EndpointError: () => (/* binding */ EndpointError)
/* harmony export */ });
class EndpointError extends Error {
    constructor(message) {
        super(message);
        this.name = "EndpointError";
    }
}


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/types/EndpointFunctions.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/types/EndpointFunctions.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/types/EndpointRuleObject.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/types/EndpointRuleObject.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/types/ErrorRuleObject.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/types/ErrorRuleObject.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/types/RuleSetObject.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/types/RuleSetObject.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/types/TreeRuleObject.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/types/TreeRuleObject.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/types/index.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/types/index.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EndpointError: () => (/* reexport safe */ _EndpointError__WEBPACK_IMPORTED_MODULE_0__.EndpointError)
/* harmony export */ });
/* harmony import */ var _EndpointError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EndpointError */ "../node_modules/@smithy/util-endpoints/dist-es/types/EndpointError.js");
/* harmony import */ var _EndpointFunctions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EndpointFunctions */ "../node_modules/@smithy/util-endpoints/dist-es/types/EndpointFunctions.js");
/* harmony import */ var _EndpointRuleObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EndpointRuleObject */ "../node_modules/@smithy/util-endpoints/dist-es/types/EndpointRuleObject.js");
/* harmony import */ var _ErrorRuleObject__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ErrorRuleObject */ "../node_modules/@smithy/util-endpoints/dist-es/types/ErrorRuleObject.js");
/* harmony import */ var _RuleSetObject__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./RuleSetObject */ "../node_modules/@smithy/util-endpoints/dist-es/types/RuleSetObject.js");
/* harmony import */ var _TreeRuleObject__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TreeRuleObject */ "../node_modules/@smithy/util-endpoints/dist-es/types/TreeRuleObject.js");
/* harmony import */ var _shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./shared */ "../node_modules/@smithy/util-endpoints/dist-es/types/shared.js");









/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/types/shared.js":
/*!**********************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/types/shared.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/callFunction.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/callFunction.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   callFunction: () => (/* binding */ callFunction)
/* harmony export */ });
/* harmony import */ var _customEndpointFunctions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./customEndpointFunctions */ "../node_modules/@smithy/util-endpoints/dist-es/utils/customEndpointFunctions.js");
/* harmony import */ var _endpointFunctions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./endpointFunctions */ "../node_modules/@smithy/util-endpoints/dist-es/utils/endpointFunctions.js");
/* harmony import */ var _evaluateExpression__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./evaluateExpression */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateExpression.js");



const callFunction = ({ fn, argv }, options) => {
    const evaluatedArgs = argv.map((arg) => ["boolean", "number"].includes(typeof arg) ? arg : (0,_evaluateExpression__WEBPACK_IMPORTED_MODULE_2__.evaluateExpression)(arg, "arg", options));
    const fnSegments = fn.split(".");
    if (fnSegments[0] in _customEndpointFunctions__WEBPACK_IMPORTED_MODULE_0__.customEndpointFunctions && fnSegments[1] != null) {
        return _customEndpointFunctions__WEBPACK_IMPORTED_MODULE_0__.customEndpointFunctions[fnSegments[0]][fnSegments[1]](...evaluatedArgs);
    }
    return _endpointFunctions__WEBPACK_IMPORTED_MODULE_1__.endpointFunctions[fn](...evaluatedArgs);
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/customEndpointFunctions.js":
/*!***************************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/customEndpointFunctions.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   customEndpointFunctions: () => (/* binding */ customEndpointFunctions)
/* harmony export */ });
const customEndpointFunctions = {};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/endpointFunctions.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/endpointFunctions.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   endpointFunctions: () => (/* binding */ endpointFunctions)
/* harmony export */ });
/* harmony import */ var _lib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib */ "../node_modules/@smithy/util-endpoints/dist-es/lib/index.js");

const endpointFunctions = {
    booleanEquals: _lib__WEBPACK_IMPORTED_MODULE_0__.booleanEquals,
    getAttr: _lib__WEBPACK_IMPORTED_MODULE_0__.getAttr,
    isSet: _lib__WEBPACK_IMPORTED_MODULE_0__.isSet,
    isValidHostLabel: _lib__WEBPACK_IMPORTED_MODULE_0__.isValidHostLabel,
    not: _lib__WEBPACK_IMPORTED_MODULE_0__.not,
    parseURL: _lib__WEBPACK_IMPORTED_MODULE_0__.parseURL,
    stringEquals: _lib__WEBPACK_IMPORTED_MODULE_0__.stringEquals,
    substring: _lib__WEBPACK_IMPORTED_MODULE_0__.substring,
    uriEncode: _lib__WEBPACK_IMPORTED_MODULE_0__.uriEncode,
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateCondition.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateCondition.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   evaluateCondition: () => (/* binding */ evaluateCondition)
/* harmony export */ });
/* harmony import */ var _debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../debug */ "../node_modules/@smithy/util-endpoints/dist-es/debug/index.js");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "../node_modules/@smithy/util-endpoints/dist-es/types/index.js");
/* harmony import */ var _callFunction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./callFunction */ "../node_modules/@smithy/util-endpoints/dist-es/utils/callFunction.js");



const evaluateCondition = ({ assign, ...fnArgs }, options) => {
    if (assign && assign in options.referenceRecord) {
        throw new _types__WEBPACK_IMPORTED_MODULE_1__.EndpointError(`'${assign}' is already defined in Reference Record.`);
    }
    const value = (0,_callFunction__WEBPACK_IMPORTED_MODULE_2__.callFunction)(fnArgs, options);
    options.logger?.debug?.(`${_debug__WEBPACK_IMPORTED_MODULE_0__.debugId} evaluateCondition: ${(0,_debug__WEBPACK_IMPORTED_MODULE_0__.toDebugString)(fnArgs)} = ${(0,_debug__WEBPACK_IMPORTED_MODULE_0__.toDebugString)(value)}`);
    return {
        result: value === "" ? true : !!value,
        ...(assign != null && { toAssign: { name: assign, value } }),
    };
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateConditions.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateConditions.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   evaluateConditions: () => (/* binding */ evaluateConditions)
/* harmony export */ });
/* harmony import */ var _debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../debug */ "../node_modules/@smithy/util-endpoints/dist-es/debug/index.js");
/* harmony import */ var _evaluateCondition__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./evaluateCondition */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateCondition.js");


const evaluateConditions = (conditions = [], options) => {
    const conditionsReferenceRecord = {};
    for (const condition of conditions) {
        const { result, toAssign } = (0,_evaluateCondition__WEBPACK_IMPORTED_MODULE_1__.evaluateCondition)(condition, {
            ...options,
            referenceRecord: {
                ...options.referenceRecord,
                ...conditionsReferenceRecord,
            },
        });
        if (!result) {
            return { result };
        }
        if (toAssign) {
            conditionsReferenceRecord[toAssign.name] = toAssign.value;
            options.logger?.debug?.(`${_debug__WEBPACK_IMPORTED_MODULE_0__.debugId} assign: ${toAssign.name} := ${(0,_debug__WEBPACK_IMPORTED_MODULE_0__.toDebugString)(toAssign.value)}`);
        }
    }
    return { result: true, referenceRecord: conditionsReferenceRecord };
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateEndpointRule.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateEndpointRule.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   evaluateEndpointRule: () => (/* binding */ evaluateEndpointRule)
/* harmony export */ });
/* harmony import */ var _debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../debug */ "../node_modules/@smithy/util-endpoints/dist-es/debug/index.js");
/* harmony import */ var _evaluateConditions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./evaluateConditions */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateConditions.js");
/* harmony import */ var _getEndpointHeaders__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getEndpointHeaders */ "../node_modules/@smithy/util-endpoints/dist-es/utils/getEndpointHeaders.js");
/* harmony import */ var _getEndpointProperties__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getEndpointProperties */ "../node_modules/@smithy/util-endpoints/dist-es/utils/getEndpointProperties.js");
/* harmony import */ var _getEndpointUrl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getEndpointUrl */ "../node_modules/@smithy/util-endpoints/dist-es/utils/getEndpointUrl.js");





const evaluateEndpointRule = (endpointRule, options) => {
    const { conditions, endpoint } = endpointRule;
    const { result, referenceRecord } = (0,_evaluateConditions__WEBPACK_IMPORTED_MODULE_1__.evaluateConditions)(conditions, options);
    if (!result) {
        return;
    }
    const endpointRuleOptions = {
        ...options,
        referenceRecord: { ...options.referenceRecord, ...referenceRecord },
    };
    const { url, properties, headers } = endpoint;
    options.logger?.debug?.(`${_debug__WEBPACK_IMPORTED_MODULE_0__.debugId} Resolving endpoint from template: ${(0,_debug__WEBPACK_IMPORTED_MODULE_0__.toDebugString)(endpoint)}`);
    return {
        ...(headers != undefined && {
            headers: (0,_getEndpointHeaders__WEBPACK_IMPORTED_MODULE_2__.getEndpointHeaders)(headers, endpointRuleOptions),
        }),
        ...(properties != undefined && {
            properties: (0,_getEndpointProperties__WEBPACK_IMPORTED_MODULE_3__.getEndpointProperties)(properties, endpointRuleOptions),
        }),
        url: (0,_getEndpointUrl__WEBPACK_IMPORTED_MODULE_4__.getEndpointUrl)(url, endpointRuleOptions),
    };
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateErrorRule.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateErrorRule.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   evaluateErrorRule: () => (/* binding */ evaluateErrorRule)
/* harmony export */ });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "../node_modules/@smithy/util-endpoints/dist-es/types/index.js");
/* harmony import */ var _evaluateConditions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./evaluateConditions */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateConditions.js");
/* harmony import */ var _evaluateExpression__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./evaluateExpression */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateExpression.js");



const evaluateErrorRule = (errorRule, options) => {
    const { conditions, error } = errorRule;
    const { result, referenceRecord } = (0,_evaluateConditions__WEBPACK_IMPORTED_MODULE_1__.evaluateConditions)(conditions, options);
    if (!result) {
        return;
    }
    throw new _types__WEBPACK_IMPORTED_MODULE_0__.EndpointError((0,_evaluateExpression__WEBPACK_IMPORTED_MODULE_2__.evaluateExpression)(error, "Error", {
        ...options,
        referenceRecord: { ...options.referenceRecord, ...referenceRecord },
    }));
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateExpression.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateExpression.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   evaluateExpression: () => (/* binding */ evaluateExpression)
/* harmony export */ });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "../node_modules/@smithy/util-endpoints/dist-es/types/index.js");
/* harmony import */ var _callFunction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./callFunction */ "../node_modules/@smithy/util-endpoints/dist-es/utils/callFunction.js");
/* harmony import */ var _evaluateTemplate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./evaluateTemplate */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateTemplate.js");
/* harmony import */ var _getReferenceValue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getReferenceValue */ "../node_modules/@smithy/util-endpoints/dist-es/utils/getReferenceValue.js");




const evaluateExpression = (obj, keyName, options) => {
    if (typeof obj === "string") {
        return (0,_evaluateTemplate__WEBPACK_IMPORTED_MODULE_2__.evaluateTemplate)(obj, options);
    }
    else if (obj["fn"]) {
        return (0,_callFunction__WEBPACK_IMPORTED_MODULE_1__.callFunction)(obj, options);
    }
    else if (obj["ref"]) {
        return (0,_getReferenceValue__WEBPACK_IMPORTED_MODULE_3__.getReferenceValue)(obj, options);
    }
    throw new _types__WEBPACK_IMPORTED_MODULE_0__.EndpointError(`'${keyName}': ${String(obj)} is not a string, function or reference.`);
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateRules.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateRules.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   evaluateRules: () => (/* binding */ evaluateRules)
/* harmony export */ });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "../node_modules/@smithy/util-endpoints/dist-es/types/index.js");
/* harmony import */ var _evaluateEndpointRule__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./evaluateEndpointRule */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateEndpointRule.js");
/* harmony import */ var _evaluateErrorRule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./evaluateErrorRule */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateErrorRule.js");
/* harmony import */ var _evaluateTreeRule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./evaluateTreeRule */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateTreeRule.js");




const evaluateRules = (rules, options) => {
    for (const rule of rules) {
        if (rule.type === "endpoint") {
            const endpointOrUndefined = (0,_evaluateEndpointRule__WEBPACK_IMPORTED_MODULE_1__.evaluateEndpointRule)(rule, options);
            if (endpointOrUndefined) {
                return endpointOrUndefined;
            }
        }
        else if (rule.type === "error") {
            (0,_evaluateErrorRule__WEBPACK_IMPORTED_MODULE_2__.evaluateErrorRule)(rule, options);
        }
        else if (rule.type === "tree") {
            const endpointOrUndefined = (0,_evaluateTreeRule__WEBPACK_IMPORTED_MODULE_3__.evaluateTreeRule)(rule, options);
            if (endpointOrUndefined) {
                return endpointOrUndefined;
            }
        }
        else {
            throw new _types__WEBPACK_IMPORTED_MODULE_0__.EndpointError(`Unknown endpoint rule: ${rule}`);
        }
    }
    throw new _types__WEBPACK_IMPORTED_MODULE_0__.EndpointError(`Rules evaluation failed`);
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateTemplate.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateTemplate.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   evaluateTemplate: () => (/* binding */ evaluateTemplate)
/* harmony export */ });
/* harmony import */ var _lib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib */ "../node_modules/@smithy/util-endpoints/dist-es/lib/index.js");

const evaluateTemplate = (template, options) => {
    const evaluatedTemplateArr = [];
    const templateContext = {
        ...options.endpointParams,
        ...options.referenceRecord,
    };
    let currentIndex = 0;
    while (currentIndex < template.length) {
        const openingBraceIndex = template.indexOf("{", currentIndex);
        if (openingBraceIndex === -1) {
            evaluatedTemplateArr.push(template.slice(currentIndex));
            break;
        }
        evaluatedTemplateArr.push(template.slice(currentIndex, openingBraceIndex));
        const closingBraceIndex = template.indexOf("}", openingBraceIndex);
        if (closingBraceIndex === -1) {
            evaluatedTemplateArr.push(template.slice(openingBraceIndex));
            break;
        }
        if (template[openingBraceIndex + 1] === "{" && template[closingBraceIndex + 1] === "}") {
            evaluatedTemplateArr.push(template.slice(openingBraceIndex + 1, closingBraceIndex));
            currentIndex = closingBraceIndex + 2;
        }
        const parameterName = template.substring(openingBraceIndex + 1, closingBraceIndex);
        if (parameterName.includes("#")) {
            const [refName, attrName] = parameterName.split("#");
            evaluatedTemplateArr.push((0,_lib__WEBPACK_IMPORTED_MODULE_0__.getAttr)(templateContext[refName], attrName));
        }
        else {
            evaluatedTemplateArr.push(templateContext[parameterName]);
        }
        currentIndex = closingBraceIndex + 1;
    }
    return evaluatedTemplateArr.join("");
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateTreeRule.js":
/*!********************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateTreeRule.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   evaluateTreeRule: () => (/* binding */ evaluateTreeRule)
/* harmony export */ });
/* harmony import */ var _evaluateConditions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./evaluateConditions */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateConditions.js");
/* harmony import */ var _evaluateRules__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./evaluateRules */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateRules.js");


const evaluateTreeRule = (treeRule, options) => {
    const { conditions, rules } = treeRule;
    const { result, referenceRecord } = (0,_evaluateConditions__WEBPACK_IMPORTED_MODULE_0__.evaluateConditions)(conditions, options);
    if (!result) {
        return;
    }
    return (0,_evaluateRules__WEBPACK_IMPORTED_MODULE_1__.evaluateRules)(rules, {
        ...options,
        referenceRecord: { ...options.referenceRecord, ...referenceRecord },
    });
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/getEndpointHeaders.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/getEndpointHeaders.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getEndpointHeaders: () => (/* binding */ getEndpointHeaders)
/* harmony export */ });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "../node_modules/@smithy/util-endpoints/dist-es/types/index.js");
/* harmony import */ var _evaluateExpression__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./evaluateExpression */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateExpression.js");


const getEndpointHeaders = (headers, options) => Object.entries(headers).reduce((acc, [headerKey, headerVal]) => ({
    ...acc,
    [headerKey]: headerVal.map((headerValEntry) => {
        const processedExpr = (0,_evaluateExpression__WEBPACK_IMPORTED_MODULE_1__.evaluateExpression)(headerValEntry, "Header value entry", options);
        if (typeof processedExpr !== "string") {
            throw new _types__WEBPACK_IMPORTED_MODULE_0__.EndpointError(`Header '${headerKey}' value '${processedExpr}' is not a string`);
        }
        return processedExpr;
    }),
}), {});


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/getEndpointProperties.js":
/*!*************************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/getEndpointProperties.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getEndpointProperties: () => (/* binding */ getEndpointProperties)
/* harmony export */ });
/* harmony import */ var _getEndpointProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getEndpointProperty */ "../node_modules/@smithy/util-endpoints/dist-es/utils/getEndpointProperty.js");

const getEndpointProperties = (properties, options) => Object.entries(properties).reduce((acc, [propertyKey, propertyVal]) => ({
    ...acc,
    [propertyKey]: (0,_getEndpointProperty__WEBPACK_IMPORTED_MODULE_0__.getEndpointProperty)(propertyVal, options),
}), {});


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/getEndpointProperty.js":
/*!***********************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/getEndpointProperty.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getEndpointProperty: () => (/* binding */ getEndpointProperty)
/* harmony export */ });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "../node_modules/@smithy/util-endpoints/dist-es/types/index.js");
/* harmony import */ var _evaluateTemplate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./evaluateTemplate */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateTemplate.js");
/* harmony import */ var _getEndpointProperties__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getEndpointProperties */ "../node_modules/@smithy/util-endpoints/dist-es/utils/getEndpointProperties.js");



const getEndpointProperty = (property, options) => {
    if (Array.isArray(property)) {
        return property.map((propertyEntry) => getEndpointProperty(propertyEntry, options));
    }
    switch (typeof property) {
        case "string":
            return (0,_evaluateTemplate__WEBPACK_IMPORTED_MODULE_1__.evaluateTemplate)(property, options);
        case "object":
            if (property === null) {
                throw new _types__WEBPACK_IMPORTED_MODULE_0__.EndpointError(`Unexpected endpoint property: ${property}`);
            }
            return (0,_getEndpointProperties__WEBPACK_IMPORTED_MODULE_2__.getEndpointProperties)(property, options);
        case "boolean":
            return property;
        default:
            throw new _types__WEBPACK_IMPORTED_MODULE_0__.EndpointError(`Unexpected endpoint property type: ${typeof property}`);
    }
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/getEndpointUrl.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/getEndpointUrl.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getEndpointUrl: () => (/* binding */ getEndpointUrl)
/* harmony export */ });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "../node_modules/@smithy/util-endpoints/dist-es/types/index.js");
/* harmony import */ var _evaluateExpression__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./evaluateExpression */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateExpression.js");


const getEndpointUrl = (endpointUrl, options) => {
    const expression = (0,_evaluateExpression__WEBPACK_IMPORTED_MODULE_1__.evaluateExpression)(endpointUrl, "Endpoint URL", options);
    if (typeof expression === "string") {
        try {
            return new URL(expression);
        }
        catch (error) {
            console.error(`Failed to construct URL with ${expression}`, error);
            throw error;
        }
    }
    throw new _types__WEBPACK_IMPORTED_MODULE_0__.EndpointError(`Endpoint URL must be a string, got ${typeof expression}`);
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/getReferenceValue.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/getReferenceValue.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getReferenceValue: () => (/* binding */ getReferenceValue)
/* harmony export */ });
const getReferenceValue = ({ ref }, options) => {
    const referenceRecord = {
        ...options.endpointParams,
        ...options.referenceRecord,
    };
    return referenceRecord[ref];
};


/***/ }),

/***/ "../node_modules/@smithy/util-endpoints/dist-es/utils/index.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@smithy/util-endpoints/dist-es/utils/index.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   customEndpointFunctions: () => (/* reexport safe */ _customEndpointFunctions__WEBPACK_IMPORTED_MODULE_0__.customEndpointFunctions),
/* harmony export */   evaluateRules: () => (/* reexport safe */ _evaluateRules__WEBPACK_IMPORTED_MODULE_1__.evaluateRules)
/* harmony export */ });
/* harmony import */ var _customEndpointFunctions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./customEndpointFunctions */ "../node_modules/@smithy/util-endpoints/dist-es/utils/customEndpointFunctions.js");
/* harmony import */ var _evaluateRules__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./evaluateRules */ "../node_modules/@smithy/util-endpoints/dist-es/utils/evaluateRules.js");




/***/ }),

/***/ "../node_modules/@smithy/util-hex-encoding/dist-es/index.js":
/*!******************************************************************!*\
  !*** ../node_modules/@smithy/util-hex-encoding/dist-es/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromHex: () => (/* binding */ fromHex),
/* harmony export */   toHex: () => (/* binding */ toHex)
/* harmony export */ });
const SHORT_TO_HEX = {};
const HEX_TO_SHORT = {};
for (let i = 0; i < 256; i++) {
    let encodedByte = i.toString(16).toLowerCase();
    if (encodedByte.length === 1) {
        encodedByte = `0${encodedByte}`;
    }
    SHORT_TO_HEX[i] = encodedByte;
    HEX_TO_SHORT[encodedByte] = i;
}
function fromHex(encoded) {
    if (encoded.length % 2 !== 0) {
        throw new Error("Hex encoded strings must have an even number length");
    }
    const out = new Uint8Array(encoded.length / 2);
    for (let i = 0; i < encoded.length; i += 2) {
        const encodedByte = encoded.slice(i, i + 2).toLowerCase();
        if (encodedByte in HEX_TO_SHORT) {
            out[i / 2] = HEX_TO_SHORT[encodedByte];
        }
        else {
            throw new Error(`Cannot decode unrecognized sequence ${encodedByte} as hexadecimal`);
        }
    }
    return out;
}
function toHex(bytes) {
    let out = "";
    for (let i = 0; i < bytes.byteLength; i++) {
        out += SHORT_TO_HEX[bytes[i]];
    }
    return out;
}


/***/ }),

/***/ "../node_modules/@smithy/util-middleware/dist-es/getSmithyContext.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@smithy/util-middleware/dist-es/getSmithyContext.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSmithyContext: () => (/* binding */ getSmithyContext)
/* harmony export */ });
/* harmony import */ var _smithy_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/types */ "../node_modules/@smithy/types/dist-es/index.js");

const getSmithyContext = (context) => context[_smithy_types__WEBPACK_IMPORTED_MODULE_0__.SMITHY_CONTEXT_KEY] || (context[_smithy_types__WEBPACK_IMPORTED_MODULE_0__.SMITHY_CONTEXT_KEY] = {});


/***/ }),

/***/ "../node_modules/@smithy/util-middleware/dist-es/index.js":
/*!****************************************************************!*\
  !*** ../node_modules/@smithy/util-middleware/dist-es/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSmithyContext: () => (/* reexport safe */ _getSmithyContext__WEBPACK_IMPORTED_MODULE_0__.getSmithyContext),
/* harmony export */   normalizeProvider: () => (/* reexport safe */ _normalizeProvider__WEBPACK_IMPORTED_MODULE_1__.normalizeProvider)
/* harmony export */ });
/* harmony import */ var _getSmithyContext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getSmithyContext */ "../node_modules/@smithy/util-middleware/dist-es/getSmithyContext.js");
/* harmony import */ var _normalizeProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./normalizeProvider */ "../node_modules/@smithy/util-middleware/dist-es/normalizeProvider.js");




/***/ }),

/***/ "../node_modules/@smithy/util-middleware/dist-es/normalizeProvider.js":
/*!****************************************************************************!*\
  !*** ../node_modules/@smithy/util-middleware/dist-es/normalizeProvider.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   normalizeProvider: () => (/* binding */ normalizeProvider)
/* harmony export */ });
const normalizeProvider = (input) => {
    if (typeof input === "function")
        return input;
    const promisified = Promise.resolve(input);
    return () => promisified;
};


/***/ }),

/***/ "../node_modules/@smithy/util-retry/dist-es/AdaptiveRetryStrategy.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@smithy/util-retry/dist-es/AdaptiveRetryStrategy.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AdaptiveRetryStrategy: () => (/* binding */ AdaptiveRetryStrategy)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "../node_modules/@smithy/util-retry/dist-es/config.js");
/* harmony import */ var _DefaultRateLimiter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DefaultRateLimiter */ "../node_modules/@smithy/util-retry/dist-es/DefaultRateLimiter.js");
/* harmony import */ var _StandardRetryStrategy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StandardRetryStrategy */ "../node_modules/@smithy/util-retry/dist-es/StandardRetryStrategy.js");



class AdaptiveRetryStrategy {
    constructor(maxAttemptsProvider, options) {
        this.maxAttemptsProvider = maxAttemptsProvider;
        this.mode = _config__WEBPACK_IMPORTED_MODULE_0__.RETRY_MODES.ADAPTIVE;
        const { rateLimiter } = options ?? {};
        this.rateLimiter = rateLimiter ?? new _DefaultRateLimiter__WEBPACK_IMPORTED_MODULE_1__.DefaultRateLimiter();
        this.standardRetryStrategy = new _StandardRetryStrategy__WEBPACK_IMPORTED_MODULE_2__.StandardRetryStrategy(maxAttemptsProvider);
    }
    async acquireInitialRetryToken(retryTokenScope) {
        await this.rateLimiter.getSendToken();
        return this.standardRetryStrategy.acquireInitialRetryToken(retryTokenScope);
    }
    async refreshRetryTokenForRetry(tokenToRenew, errorInfo) {
        this.rateLimiter.updateClientSendingRate(errorInfo);
        return this.standardRetryStrategy.refreshRetryTokenForRetry(tokenToRenew, errorInfo);
    }
    recordSuccess(token) {
        this.rateLimiter.updateClientSendingRate({});
        this.standardRetryStrategy.recordSuccess(token);
    }
}


/***/ }),

/***/ "../node_modules/@smithy/util-retry/dist-es/ConfiguredRetryStrategy.js":
/*!*****************************************************************************!*\
  !*** ../node_modules/@smithy/util-retry/dist-es/ConfiguredRetryStrategy.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ConfiguredRetryStrategy: () => (/* binding */ ConfiguredRetryStrategy)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/util-retry/dist-es/constants.js");
/* harmony import */ var _StandardRetryStrategy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StandardRetryStrategy */ "../node_modules/@smithy/util-retry/dist-es/StandardRetryStrategy.js");


class ConfiguredRetryStrategy extends _StandardRetryStrategy__WEBPACK_IMPORTED_MODULE_1__.StandardRetryStrategy {
    constructor(maxAttempts, computeNextBackoffDelay = _constants__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_RETRY_DELAY_BASE) {
        super(typeof maxAttempts === "function" ? maxAttempts : async () => maxAttempts);
        if (typeof computeNextBackoffDelay === "number") {
            this.computeNextBackoffDelay = () => computeNextBackoffDelay;
        }
        else {
            this.computeNextBackoffDelay = computeNextBackoffDelay;
        }
    }
    async refreshRetryTokenForRetry(tokenToRenew, errorInfo) {
        const token = await super.refreshRetryTokenForRetry(tokenToRenew, errorInfo);
        token.getRetryDelay = () => this.computeNextBackoffDelay(token.getRetryCount());
        return token;
    }
}


/***/ }),

/***/ "../node_modules/@smithy/util-retry/dist-es/DefaultRateLimiter.js":
/*!************************************************************************!*\
  !*** ../node_modules/@smithy/util-retry/dist-es/DefaultRateLimiter.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DefaultRateLimiter: () => (/* binding */ DefaultRateLimiter)
/* harmony export */ });
/* harmony import */ var _smithy_service_error_classification__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/service-error-classification */ "../node_modules/@smithy/service-error-classification/dist-es/index.js");

class DefaultRateLimiter {
    constructor(options) {
        this.currentCapacity = 0;
        this.enabled = false;
        this.lastMaxRate = 0;
        this.measuredTxRate = 0;
        this.requestCount = 0;
        this.lastTimestamp = 0;
        this.timeWindow = 0;
        this.beta = options?.beta ?? 0.7;
        this.minCapacity = options?.minCapacity ?? 1;
        this.minFillRate = options?.minFillRate ?? 0.5;
        this.scaleConstant = options?.scaleConstant ?? 0.4;
        this.smooth = options?.smooth ?? 0.8;
        const currentTimeInSeconds = this.getCurrentTimeInSeconds();
        this.lastThrottleTime = currentTimeInSeconds;
        this.lastTxRateBucket = Math.floor(this.getCurrentTimeInSeconds());
        this.fillRate = this.minFillRate;
        this.maxCapacity = this.minCapacity;
    }
    getCurrentTimeInSeconds() {
        return Date.now() / 1000;
    }
    async getSendToken() {
        return this.acquireTokenBucket(1);
    }
    async acquireTokenBucket(amount) {
        if (!this.enabled) {
            return;
        }
        this.refillTokenBucket();
        if (amount > this.currentCapacity) {
            const delay = ((amount - this.currentCapacity) / this.fillRate) * 1000;
            await new Promise((resolve) => DefaultRateLimiter.setTimeoutFn(resolve, delay));
        }
        this.currentCapacity = this.currentCapacity - amount;
    }
    refillTokenBucket() {
        const timestamp = this.getCurrentTimeInSeconds();
        if (!this.lastTimestamp) {
            this.lastTimestamp = timestamp;
            return;
        }
        const fillAmount = (timestamp - this.lastTimestamp) * this.fillRate;
        this.currentCapacity = Math.min(this.maxCapacity, this.currentCapacity + fillAmount);
        this.lastTimestamp = timestamp;
    }
    updateClientSendingRate(response) {
        let calculatedRate;
        this.updateMeasuredRate();
        if ((0,_smithy_service_error_classification__WEBPACK_IMPORTED_MODULE_0__.isThrottlingError)(response)) {
            const rateToUse = !this.enabled ? this.measuredTxRate : Math.min(this.measuredTxRate, this.fillRate);
            this.lastMaxRate = rateToUse;
            this.calculateTimeWindow();
            this.lastThrottleTime = this.getCurrentTimeInSeconds();
            calculatedRate = this.cubicThrottle(rateToUse);
            this.enableTokenBucket();
        }
        else {
            this.calculateTimeWindow();
            calculatedRate = this.cubicSuccess(this.getCurrentTimeInSeconds());
        }
        const newRate = Math.min(calculatedRate, 2 * this.measuredTxRate);
        this.updateTokenBucketRate(newRate);
    }
    calculateTimeWindow() {
        this.timeWindow = this.getPrecise(Math.pow((this.lastMaxRate * (1 - this.beta)) / this.scaleConstant, 1 / 3));
    }
    cubicThrottle(rateToUse) {
        return this.getPrecise(rateToUse * this.beta);
    }
    cubicSuccess(timestamp) {
        return this.getPrecise(this.scaleConstant * Math.pow(timestamp - this.lastThrottleTime - this.timeWindow, 3) + this.lastMaxRate);
    }
    enableTokenBucket() {
        this.enabled = true;
    }
    updateTokenBucketRate(newRate) {
        this.refillTokenBucket();
        this.fillRate = Math.max(newRate, this.minFillRate);
        this.maxCapacity = Math.max(newRate, this.minCapacity);
        this.currentCapacity = Math.min(this.currentCapacity, this.maxCapacity);
    }
    updateMeasuredRate() {
        const t = this.getCurrentTimeInSeconds();
        const timeBucket = Math.floor(t * 2) / 2;
        this.requestCount++;
        if (timeBucket > this.lastTxRateBucket) {
            const currentRate = this.requestCount / (timeBucket - this.lastTxRateBucket);
            this.measuredTxRate = this.getPrecise(currentRate * this.smooth + this.measuredTxRate * (1 - this.smooth));
            this.requestCount = 0;
            this.lastTxRateBucket = timeBucket;
        }
    }
    getPrecise(num) {
        return parseFloat(num.toFixed(8));
    }
}
DefaultRateLimiter.setTimeoutFn = setTimeout;


/***/ }),

/***/ "../node_modules/@smithy/util-retry/dist-es/StandardRetryStrategy.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@smithy/util-retry/dist-es/StandardRetryStrategy.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StandardRetryStrategy: () => (/* binding */ StandardRetryStrategy)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "../node_modules/@smithy/util-retry/dist-es/config.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/util-retry/dist-es/constants.js");
/* harmony import */ var _defaultRetryBackoffStrategy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./defaultRetryBackoffStrategy */ "../node_modules/@smithy/util-retry/dist-es/defaultRetryBackoffStrategy.js");
/* harmony import */ var _defaultRetryToken__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./defaultRetryToken */ "../node_modules/@smithy/util-retry/dist-es/defaultRetryToken.js");




class StandardRetryStrategy {
    constructor(maxAttempts) {
        this.maxAttempts = maxAttempts;
        this.mode = _config__WEBPACK_IMPORTED_MODULE_0__.RETRY_MODES.STANDARD;
        this.capacity = _constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_RETRY_TOKENS;
        this.retryBackoffStrategy = (0,_defaultRetryBackoffStrategy__WEBPACK_IMPORTED_MODULE_2__.getDefaultRetryBackoffStrategy)();
        this.maxAttemptsProvider = typeof maxAttempts === "function" ? maxAttempts : async () => maxAttempts;
    }
    async acquireInitialRetryToken(retryTokenScope) {
        return (0,_defaultRetryToken__WEBPACK_IMPORTED_MODULE_3__.createDefaultRetryToken)({
            retryDelay: _constants__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_RETRY_DELAY_BASE,
            retryCount: 0,
        });
    }
    async refreshRetryTokenForRetry(token, errorInfo) {
        const maxAttempts = await this.getMaxAttempts();
        if (this.shouldRetry(token, errorInfo, maxAttempts)) {
            const errorType = errorInfo.errorType;
            this.retryBackoffStrategy.setDelayBase(errorType === "THROTTLING" ? _constants__WEBPACK_IMPORTED_MODULE_1__.THROTTLING_RETRY_DELAY_BASE : _constants__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_RETRY_DELAY_BASE);
            const delayFromErrorType = this.retryBackoffStrategy.computeNextBackoffDelay(token.getRetryCount());
            const retryDelay = errorInfo.retryAfterHint
                ? Math.max(errorInfo.retryAfterHint.getTime() - Date.now() || 0, delayFromErrorType)
                : delayFromErrorType;
            const capacityCost = this.getCapacityCost(errorType);
            this.capacity -= capacityCost;
            return (0,_defaultRetryToken__WEBPACK_IMPORTED_MODULE_3__.createDefaultRetryToken)({
                retryDelay,
                retryCount: token.getRetryCount() + 1,
                retryCost: capacityCost,
            });
        }
        throw new Error("No retry token available");
    }
    recordSuccess(token) {
        this.capacity = Math.max(_constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_RETRY_TOKENS, this.capacity + (token.getRetryCost() ?? _constants__WEBPACK_IMPORTED_MODULE_1__.NO_RETRY_INCREMENT));
    }
    getCapacity() {
        return this.capacity;
    }
    async getMaxAttempts() {
        try {
            return await this.maxAttemptsProvider();
        }
        catch (error) {
            console.warn(`Max attempts provider could not resolve. Using default of ${_config__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_MAX_ATTEMPTS}`);
            return _config__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_MAX_ATTEMPTS;
        }
    }
    shouldRetry(tokenToRenew, errorInfo, maxAttempts) {
        const attempts = tokenToRenew.getRetryCount() + 1;
        return (attempts < maxAttempts &&
            this.capacity >= this.getCapacityCost(errorInfo.errorType) &&
            this.isRetryableError(errorInfo.errorType));
    }
    getCapacityCost(errorType) {
        return errorType === "TRANSIENT" ? _constants__WEBPACK_IMPORTED_MODULE_1__.TIMEOUT_RETRY_COST : _constants__WEBPACK_IMPORTED_MODULE_1__.RETRY_COST;
    }
    isRetryableError(errorType) {
        return errorType === "THROTTLING" || errorType === "TRANSIENT";
    }
}


/***/ }),

/***/ "../node_modules/@smithy/util-retry/dist-es/config.js":
/*!************************************************************!*\
  !*** ../node_modules/@smithy/util-retry/dist-es/config.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_MAX_ATTEMPTS: () => (/* binding */ DEFAULT_MAX_ATTEMPTS),
/* harmony export */   DEFAULT_RETRY_MODE: () => (/* binding */ DEFAULT_RETRY_MODE),
/* harmony export */   RETRY_MODES: () => (/* binding */ RETRY_MODES)
/* harmony export */ });
var RETRY_MODES;
(function (RETRY_MODES) {
    RETRY_MODES["STANDARD"] = "standard";
    RETRY_MODES["ADAPTIVE"] = "adaptive";
})(RETRY_MODES || (RETRY_MODES = {}));
const DEFAULT_MAX_ATTEMPTS = 3;
const DEFAULT_RETRY_MODE = RETRY_MODES.STANDARD;


/***/ }),

/***/ "../node_modules/@smithy/util-retry/dist-es/constants.js":
/*!***************************************************************!*\
  !*** ../node_modules/@smithy/util-retry/dist-es/constants.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_RETRY_DELAY_BASE: () => (/* binding */ DEFAULT_RETRY_DELAY_BASE),
/* harmony export */   INITIAL_RETRY_TOKENS: () => (/* binding */ INITIAL_RETRY_TOKENS),
/* harmony export */   INVOCATION_ID_HEADER: () => (/* binding */ INVOCATION_ID_HEADER),
/* harmony export */   MAXIMUM_RETRY_DELAY: () => (/* binding */ MAXIMUM_RETRY_DELAY),
/* harmony export */   NO_RETRY_INCREMENT: () => (/* binding */ NO_RETRY_INCREMENT),
/* harmony export */   REQUEST_HEADER: () => (/* binding */ REQUEST_HEADER),
/* harmony export */   RETRY_COST: () => (/* binding */ RETRY_COST),
/* harmony export */   THROTTLING_RETRY_DELAY_BASE: () => (/* binding */ THROTTLING_RETRY_DELAY_BASE),
/* harmony export */   TIMEOUT_RETRY_COST: () => (/* binding */ TIMEOUT_RETRY_COST)
/* harmony export */ });
const DEFAULT_RETRY_DELAY_BASE = 100;
const MAXIMUM_RETRY_DELAY = 20 * 1000;
const THROTTLING_RETRY_DELAY_BASE = 500;
const INITIAL_RETRY_TOKENS = 500;
const RETRY_COST = 5;
const TIMEOUT_RETRY_COST = 10;
const NO_RETRY_INCREMENT = 1;
const INVOCATION_ID_HEADER = "amz-sdk-invocation-id";
const REQUEST_HEADER = "amz-sdk-request";


/***/ }),

/***/ "../node_modules/@smithy/util-retry/dist-es/defaultRetryBackoffStrategy.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/util-retry/dist-es/defaultRetryBackoffStrategy.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDefaultRetryBackoffStrategy: () => (/* binding */ getDefaultRetryBackoffStrategy)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/util-retry/dist-es/constants.js");

const getDefaultRetryBackoffStrategy = () => {
    let delayBase = _constants__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_RETRY_DELAY_BASE;
    const computeNextBackoffDelay = (attempts) => {
        return Math.floor(Math.min(_constants__WEBPACK_IMPORTED_MODULE_0__.MAXIMUM_RETRY_DELAY, Math.random() * 2 ** attempts * delayBase));
    };
    const setDelayBase = (delay) => {
        delayBase = delay;
    };
    return {
        computeNextBackoffDelay,
        setDelayBase,
    };
};


/***/ }),

/***/ "../node_modules/@smithy/util-retry/dist-es/defaultRetryToken.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/util-retry/dist-es/defaultRetryToken.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createDefaultRetryToken: () => (/* binding */ createDefaultRetryToken)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/util-retry/dist-es/constants.js");

const createDefaultRetryToken = ({ retryDelay, retryCount, retryCost, }) => {
    const getRetryCount = () => retryCount;
    const getRetryDelay = () => Math.min(_constants__WEBPACK_IMPORTED_MODULE_0__.MAXIMUM_RETRY_DELAY, retryDelay);
    const getRetryCost = () => retryCost;
    return {
        getRetryCount,
        getRetryDelay,
        getRetryCost,
    };
};


/***/ }),

/***/ "../node_modules/@smithy/util-retry/dist-es/index.js":
/*!***********************************************************!*\
  !*** ../node_modules/@smithy/util-retry/dist-es/index.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AdaptiveRetryStrategy: () => (/* reexport safe */ _AdaptiveRetryStrategy__WEBPACK_IMPORTED_MODULE_0__.AdaptiveRetryStrategy),
/* harmony export */   ConfiguredRetryStrategy: () => (/* reexport safe */ _ConfiguredRetryStrategy__WEBPACK_IMPORTED_MODULE_1__.ConfiguredRetryStrategy),
/* harmony export */   DEFAULT_MAX_ATTEMPTS: () => (/* reexport safe */ _config__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_MAX_ATTEMPTS),
/* harmony export */   DEFAULT_RETRY_DELAY_BASE: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RETRY_DELAY_BASE),
/* harmony export */   DEFAULT_RETRY_MODE: () => (/* reexport safe */ _config__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_RETRY_MODE),
/* harmony export */   DefaultRateLimiter: () => (/* reexport safe */ _DefaultRateLimiter__WEBPACK_IMPORTED_MODULE_2__.DefaultRateLimiter),
/* harmony export */   INITIAL_RETRY_TOKENS: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_5__.INITIAL_RETRY_TOKENS),
/* harmony export */   INVOCATION_ID_HEADER: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_5__.INVOCATION_ID_HEADER),
/* harmony export */   MAXIMUM_RETRY_DELAY: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_5__.MAXIMUM_RETRY_DELAY),
/* harmony export */   NO_RETRY_INCREMENT: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_5__.NO_RETRY_INCREMENT),
/* harmony export */   REQUEST_HEADER: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_5__.REQUEST_HEADER),
/* harmony export */   RETRY_COST: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_5__.RETRY_COST),
/* harmony export */   RETRY_MODES: () => (/* reexport safe */ _config__WEBPACK_IMPORTED_MODULE_4__.RETRY_MODES),
/* harmony export */   StandardRetryStrategy: () => (/* reexport safe */ _StandardRetryStrategy__WEBPACK_IMPORTED_MODULE_3__.StandardRetryStrategy),
/* harmony export */   THROTTLING_RETRY_DELAY_BASE: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_5__.THROTTLING_RETRY_DELAY_BASE),
/* harmony export */   TIMEOUT_RETRY_COST: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_5__.TIMEOUT_RETRY_COST)
/* harmony export */ });
/* harmony import */ var _AdaptiveRetryStrategy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AdaptiveRetryStrategy */ "../node_modules/@smithy/util-retry/dist-es/AdaptiveRetryStrategy.js");
/* harmony import */ var _ConfiguredRetryStrategy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConfiguredRetryStrategy */ "../node_modules/@smithy/util-retry/dist-es/ConfiguredRetryStrategy.js");
/* harmony import */ var _DefaultRateLimiter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DefaultRateLimiter */ "../node_modules/@smithy/util-retry/dist-es/DefaultRateLimiter.js");
/* harmony import */ var _StandardRetryStrategy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./StandardRetryStrategy */ "../node_modules/@smithy/util-retry/dist-es/StandardRetryStrategy.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config */ "../node_modules/@smithy/util-retry/dist-es/config.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./constants */ "../node_modules/@smithy/util-retry/dist-es/constants.js");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./types */ "../node_modules/@smithy/util-retry/dist-es/types.js");









/***/ }),

/***/ "../node_modules/@smithy/util-retry/dist-es/types.js":
/*!***********************************************************!*\
  !*** ../node_modules/@smithy/util-retry/dist-es/types.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/blob/Uint8ArrayBlobAdapter.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/blob/Uint8ArrayBlobAdapter.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Uint8ArrayBlobAdapter: () => (/* binding */ Uint8ArrayBlobAdapter)
/* harmony export */ });
/* harmony import */ var _transforms__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transforms */ "../node_modules/@smithy/util-stream/dist-es/blob/transforms.js");

class Uint8ArrayBlobAdapter extends Uint8Array {
    static fromString(source, encoding = "utf-8") {
        switch (typeof source) {
            case "string":
                return (0,_transforms__WEBPACK_IMPORTED_MODULE_0__.transformFromString)(source, encoding);
            default:
                throw new Error(`Unsupported conversion from ${typeof source} to Uint8ArrayBlobAdapter.`);
        }
    }
    static mutate(source) {
        Object.setPrototypeOf(source, Uint8ArrayBlobAdapter.prototype);
        return source;
    }
    transformToString(encoding = "utf-8") {
        return (0,_transforms__WEBPACK_IMPORTED_MODULE_0__.transformToString)(this, encoding);
    }
}


/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/blob/transforms.js":
/*!**********************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/blob/transforms.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   transformFromString: () => (/* binding */ transformFromString),
/* harmony export */   transformToString: () => (/* binding */ transformToString)
/* harmony export */ });
/* harmony import */ var _smithy_util_base64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-base64 */ "../node_modules/@smithy/util-base64/dist-es/index.js");
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-utf8 */ "../node_modules/@smithy/util-utf8/dist-es/index.js");
/* harmony import */ var _Uint8ArrayBlobAdapter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Uint8ArrayBlobAdapter */ "../node_modules/@smithy/util-stream/dist-es/blob/Uint8ArrayBlobAdapter.js");



function transformToString(payload, encoding = "utf-8") {
    if (encoding === "base64") {
        return (0,_smithy_util_base64__WEBPACK_IMPORTED_MODULE_0__.toBase64)(payload);
    }
    return (0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_1__.toUtf8)(payload);
}
function transformFromString(str, encoding) {
    if (encoding === "base64") {
        return _Uint8ArrayBlobAdapter__WEBPACK_IMPORTED_MODULE_2__.Uint8ArrayBlobAdapter.mutate((0,_smithy_util_base64__WEBPACK_IMPORTED_MODULE_0__.fromBase64)(str));
    }
    return _Uint8ArrayBlobAdapter__WEBPACK_IMPORTED_MODULE_2__.Uint8ArrayBlobAdapter.mutate((0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_1__.fromUtf8)(str));
}


/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/checksum/ChecksumStream.browser.js":
/*!**************************************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/checksum/ChecksumStream.browser.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ChecksumStream: () => (/* binding */ ChecksumStream)
/* harmony export */ });
const ReadableStreamRef = typeof ReadableStream === "function" ? ReadableStream : function () { };
class ChecksumStream extends ReadableStreamRef {
}


/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/checksum/ChecksumStream.js":
/*!******************************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/checksum/ChecksumStream.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ChecksumStream: () => (/* binding */ ChecksumStream)
/* harmony export */ });
/* harmony import */ var _smithy_util_base64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-base64 */ "../node_modules/@smithy/util-base64/dist-es/index.js");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! stream */ "stream");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_1__);


class ChecksumStream extends stream__WEBPACK_IMPORTED_MODULE_1__.Duplex {
    constructor({ expectedChecksum, checksum, source, checksumSourceLocation, base64Encoder, }) {
        super();
        if (typeof source.pipe === "function") {
            this.source = source;
        }
        else {
            throw new Error(`@smithy/util-stream: unsupported source type ${source?.constructor?.name ?? source} in ChecksumStream.`);
        }
        this.base64Encoder = base64Encoder ?? _smithy_util_base64__WEBPACK_IMPORTED_MODULE_0__.toBase64;
        this.expectedChecksum = expectedChecksum;
        this.checksum = checksum;
        this.checksumSourceLocation = checksumSourceLocation;
        this.source.pipe(this);
    }
    _read(size) { }
    _write(chunk, encoding, callback) {
        try {
            this.checksum.update(chunk);
            this.push(chunk);
        }
        catch (e) {
            return callback(e);
        }
        return callback();
    }
    async _final(callback) {
        try {
            const digest = await this.checksum.digest();
            const received = this.base64Encoder(digest);
            if (this.expectedChecksum !== received) {
                return callback(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${received}"` +
                    ` in response header "${this.checksumSourceLocation}".`));
            }
        }
        catch (e) {
            return callback(e);
        }
        this.push(null);
        return callback();
    }
}


/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/checksum/createChecksumStream.browser.js":
/*!********************************************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/checksum/createChecksumStream.browser.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createChecksumStream: () => (/* binding */ createChecksumStream)
/* harmony export */ });
/* harmony import */ var _smithy_util_base64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-base64 */ "../node_modules/@smithy/util-base64/dist-es/index.js");
/* harmony import */ var _stream_type_check__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../stream-type-check */ "../node_modules/@smithy/util-stream/dist-es/stream-type-check.js");
/* harmony import */ var _ChecksumStream_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ChecksumStream.browser */ "../node_modules/@smithy/util-stream/dist-es/checksum/ChecksumStream.browser.js");



const createChecksumStream = ({ expectedChecksum, checksum, source, checksumSourceLocation, base64Encoder, }) => {
    if (!(0,_stream_type_check__WEBPACK_IMPORTED_MODULE_1__.isReadableStream)(source)) {
        throw new Error(`@smithy/util-stream: unsupported source type ${source?.constructor?.name ?? source} in ChecksumStream.`);
    }
    const encoder = base64Encoder ?? _smithy_util_base64__WEBPACK_IMPORTED_MODULE_0__.toBase64;
    if (typeof TransformStream !== "function") {
        throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");
    }
    const transform = new TransformStream({
        start() { },
        async transform(chunk, controller) {
            checksum.update(chunk);
            controller.enqueue(chunk);
        },
        async flush(controller) {
            const digest = await checksum.digest();
            const received = encoder(digest);
            if (expectedChecksum !== received) {
                const error = new Error(`Checksum mismatch: expected "${expectedChecksum}" but received "${received}"` +
                    ` in response header "${checksumSourceLocation}".`);
                controller.error(error);
            }
            else {
                controller.terminate();
            }
        },
    });
    source.pipeThrough(transform);
    const readable = transform.readable;
    Object.setPrototypeOf(readable, _ChecksumStream_browser__WEBPACK_IMPORTED_MODULE_2__.ChecksumStream.prototype);
    return readable;
};


/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/checksum/createChecksumStream.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/checksum/createChecksumStream.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createChecksumStream: () => (/* binding */ createChecksumStream)
/* harmony export */ });
/* harmony import */ var _stream_type_check__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../stream-type-check */ "../node_modules/@smithy/util-stream/dist-es/stream-type-check.js");
/* harmony import */ var _ChecksumStream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ChecksumStream */ "../node_modules/@smithy/util-stream/dist-es/checksum/ChecksumStream.js");
/* harmony import */ var _createChecksumStream_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./createChecksumStream.browser */ "../node_modules/@smithy/util-stream/dist-es/checksum/createChecksumStream.browser.js");



function createChecksumStream(init) {
    if (typeof ReadableStream === "function" && (0,_stream_type_check__WEBPACK_IMPORTED_MODULE_0__.isReadableStream)(init.source)) {
        return (0,_createChecksumStream_browser__WEBPACK_IMPORTED_MODULE_2__.createChecksumStream)(init);
    }
    return new _ChecksumStream__WEBPACK_IMPORTED_MODULE_1__.ChecksumStream(init);
}


/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/getAwsChunkedEncodingStream.js":
/*!**********************************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/getAwsChunkedEncodingStream.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getAwsChunkedEncodingStream: () => (/* binding */ getAwsChunkedEncodingStream)
/* harmony export */ });
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ "stream");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);

const getAwsChunkedEncodingStream = (readableStream, options) => {
    const { base64Encoder, bodyLengthChecker, checksumAlgorithmFn, checksumLocationName, streamHasher } = options;
    const checksumRequired = base64Encoder !== undefined &&
        checksumAlgorithmFn !== undefined &&
        checksumLocationName !== undefined &&
        streamHasher !== undefined;
    const digest = checksumRequired ? streamHasher(checksumAlgorithmFn, readableStream) : undefined;
    const awsChunkedEncodingStream = new stream__WEBPACK_IMPORTED_MODULE_0__.Readable({ read: () => { } });
    readableStream.on("data", (data) => {
        const length = bodyLengthChecker(data) || 0;
        awsChunkedEncodingStream.push(`${length.toString(16)}\r\n`);
        awsChunkedEncodingStream.push(data);
        awsChunkedEncodingStream.push("\r\n");
    });
    readableStream.on("end", async () => {
        awsChunkedEncodingStream.push(`0\r\n`);
        if (checksumRequired) {
            const checksum = base64Encoder(await digest);
            awsChunkedEncodingStream.push(`${checksumLocationName}:${checksum}\r\n`);
            awsChunkedEncodingStream.push(`\r\n`);
        }
        awsChunkedEncodingStream.push(null);
    });
    return awsChunkedEncodingStream;
};


/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/headStream.browser.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/headStream.browser.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   headStream: () => (/* binding */ headStream)
/* harmony export */ });
async function headStream(stream, bytes) {
    let byteLengthCounter = 0;
    const chunks = [];
    const reader = stream.getReader();
    let isDone = false;
    while (!isDone) {
        const { done, value } = await reader.read();
        if (value) {
            chunks.push(value);
            byteLengthCounter += value?.byteLength ?? 0;
        }
        if (byteLengthCounter >= bytes) {
            break;
        }
        isDone = done;
    }
    reader.releaseLock();
    const collected = new Uint8Array(Math.min(bytes, byteLengthCounter));
    let offset = 0;
    for (const chunk of chunks) {
        if (chunk.byteLength > collected.byteLength - offset) {
            collected.set(chunk.subarray(0, collected.byteLength - offset), offset);
            break;
        }
        else {
            collected.set(chunk, offset);
        }
        offset += chunk.length;
    }
    return collected;
}


/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/headStream.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/headStream.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   headStream: () => (/* binding */ headStream)
/* harmony export */ });
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ "stream");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _headStream_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./headStream.browser */ "../node_modules/@smithy/util-stream/dist-es/headStream.browser.js");
/* harmony import */ var _stream_type_check__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stream-type-check */ "../node_modules/@smithy/util-stream/dist-es/stream-type-check.js");



const headStream = (stream, bytes) => {
    if ((0,_stream_type_check__WEBPACK_IMPORTED_MODULE_2__.isReadableStream)(stream)) {
        return (0,_headStream_browser__WEBPACK_IMPORTED_MODULE_1__.headStream)(stream, bytes);
    }
    return new Promise((resolve, reject) => {
        const collector = new Collector();
        collector.limit = bytes;
        stream.pipe(collector);
        stream.on("error", (err) => {
            collector.end();
            reject(err);
        });
        collector.on("error", reject);
        collector.on("finish", function () {
            const bytes = new Uint8Array(Buffer.concat(this.buffers));
            resolve(bytes);
        });
    });
};
class Collector extends stream__WEBPACK_IMPORTED_MODULE_0__.Writable {
    constructor() {
        super(...arguments);
        this.buffers = [];
        this.limit = Infinity;
        this.bytesBuffered = 0;
    }
    _write(chunk, encoding, callback) {
        this.buffers.push(chunk);
        this.bytesBuffered += chunk.byteLength ?? 0;
        if (this.bytesBuffered >= this.limit) {
            const excess = this.bytesBuffered - this.limit;
            const tailBuffer = this.buffers[this.buffers.length - 1];
            this.buffers[this.buffers.length - 1] = tailBuffer.subarray(0, tailBuffer.byteLength - excess);
            this.emit("finish");
        }
        callback();
    }
}


/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/index.js":
/*!************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/index.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ChecksumStream: () => (/* reexport safe */ _checksum_ChecksumStream__WEBPACK_IMPORTED_MODULE_7__.ChecksumStream),
/* harmony export */   Uint8ArrayBlobAdapter: () => (/* reexport safe */ _blob_Uint8ArrayBlobAdapter__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayBlobAdapter),
/* harmony export */   createChecksumStream: () => (/* reexport safe */ _checksum_createChecksumStream__WEBPACK_IMPORTED_MODULE_6__.createChecksumStream),
/* harmony export */   getAwsChunkedEncodingStream: () => (/* reexport safe */ _getAwsChunkedEncodingStream__WEBPACK_IMPORTED_MODULE_1__.getAwsChunkedEncodingStream),
/* harmony export */   headStream: () => (/* reexport safe */ _headStream__WEBPACK_IMPORTED_MODULE_4__.headStream),
/* harmony export */   isBlob: () => (/* reexport safe */ _stream_type_check__WEBPACK_IMPORTED_MODULE_5__.isBlob),
/* harmony export */   isReadableStream: () => (/* reexport safe */ _stream_type_check__WEBPACK_IMPORTED_MODULE_5__.isReadableStream),
/* harmony export */   sdkStreamMixin: () => (/* reexport safe */ _sdk_stream_mixin__WEBPACK_IMPORTED_MODULE_2__.sdkStreamMixin),
/* harmony export */   splitStream: () => (/* reexport safe */ _splitStream__WEBPACK_IMPORTED_MODULE_3__.splitStream)
/* harmony export */ });
/* harmony import */ var _blob_Uint8ArrayBlobAdapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./blob/Uint8ArrayBlobAdapter */ "../node_modules/@smithy/util-stream/dist-es/blob/Uint8ArrayBlobAdapter.js");
/* harmony import */ var _getAwsChunkedEncodingStream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getAwsChunkedEncodingStream */ "../node_modules/@smithy/util-stream/dist-es/getAwsChunkedEncodingStream.js");
/* harmony import */ var _sdk_stream_mixin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./sdk-stream-mixin */ "../node_modules/@smithy/util-stream/dist-es/sdk-stream-mixin.js");
/* harmony import */ var _splitStream__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./splitStream */ "../node_modules/@smithy/util-stream/dist-es/splitStream.js");
/* harmony import */ var _headStream__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./headStream */ "../node_modules/@smithy/util-stream/dist-es/headStream.js");
/* harmony import */ var _stream_type_check__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./stream-type-check */ "../node_modules/@smithy/util-stream/dist-es/stream-type-check.js");
/* harmony import */ var _checksum_createChecksumStream__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./checksum/createChecksumStream */ "../node_modules/@smithy/util-stream/dist-es/checksum/createChecksumStream.js");
/* harmony import */ var _checksum_ChecksumStream__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./checksum/ChecksumStream */ "../node_modules/@smithy/util-stream/dist-es/checksum/ChecksumStream.js");










/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/sdk-stream-mixin.browser.js":
/*!*******************************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/sdk-stream-mixin.browser.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   sdkStreamMixin: () => (/* binding */ sdkStreamMixin)
/* harmony export */ });
/* harmony import */ var _smithy_fetch_http_handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/fetch-http-handler */ "../node_modules/@smithy/fetch-http-handler/dist-es/index.js");
/* harmony import */ var _smithy_util_base64__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-base64 */ "../node_modules/@smithy/util-base64/dist-es/index.js");
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @smithy/util-utf8 */ "../node_modules/@smithy/util-utf8/dist-es/index.js");
/* harmony import */ var _stream_type_check__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./stream-type-check */ "../node_modules/@smithy/util-stream/dist-es/stream-type-check.js");





const ERR_MSG_STREAM_HAS_BEEN_TRANSFORMED = "The stream has already been transformed.";
const sdkStreamMixin = (stream) => {
    if (!isBlobInstance(stream) && !(0,_stream_type_check__WEBPACK_IMPORTED_MODULE_4__.isReadableStream)(stream)) {
        const name = stream?.__proto__?.constructor?.name || stream;
        throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${name}`);
    }
    let transformed = false;
    const transformToByteArray = async () => {
        if (transformed) {
            throw new Error(ERR_MSG_STREAM_HAS_BEEN_TRANSFORMED);
        }
        transformed = true;
        return await (0,_smithy_fetch_http_handler__WEBPACK_IMPORTED_MODULE_0__.streamCollector)(stream);
    };
    const blobToWebStream = (blob) => {
        if (typeof blob.stream !== "function") {
            throw new Error("Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.\n" +
                "If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body");
        }
        return blob.stream();
    };
    return Object.assign(stream, {
        transformToByteArray: transformToByteArray,
        transformToString: async (encoding) => {
            const buf = await transformToByteArray();
            if (encoding === "base64") {
                return (0,_smithy_util_base64__WEBPACK_IMPORTED_MODULE_1__.toBase64)(buf);
            }
            else if (encoding === "hex") {
                return (0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_2__.toHex)(buf);
            }
            else if (encoding === undefined || encoding === "utf8" || encoding === "utf-8") {
                return (0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_3__.toUtf8)(buf);
            }
            else if (typeof TextDecoder === "function") {
                return new TextDecoder(encoding).decode(buf);
            }
            else {
                throw new Error("TextDecoder is not available, please make sure polyfill is provided.");
            }
        },
        transformToWebStream: () => {
            if (transformed) {
                throw new Error(ERR_MSG_STREAM_HAS_BEEN_TRANSFORMED);
            }
            transformed = true;
            if (isBlobInstance(stream)) {
                return blobToWebStream(stream);
            }
            else if ((0,_stream_type_check__WEBPACK_IMPORTED_MODULE_4__.isReadableStream)(stream)) {
                return stream;
            }
            else {
                throw new Error(`Cannot transform payload to web stream, got ${stream}`);
            }
        },
    });
};
const isBlobInstance = (stream) => typeof Blob === "function" && stream instanceof Blob;


/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/sdk-stream-mixin.js":
/*!***********************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/sdk-stream-mixin.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   sdkStreamMixin: () => (/* binding */ sdkStreamMixin)
/* harmony export */ });
/* harmony import */ var _smithy_node_http_handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/node-http-handler */ "../node_modules/@smithy/node-http-handler/dist-es/index.js");
/* harmony import */ var _smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-buffer-from */ "../node_modules/@smithy/util-buffer-from/dist-es/index.js");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! stream */ "stream");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _sdk_stream_mixin_browser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./sdk-stream-mixin.browser */ "../node_modules/@smithy/util-stream/dist-es/sdk-stream-mixin.browser.js");




const ERR_MSG_STREAM_HAS_BEEN_TRANSFORMED = "The stream has already been transformed.";
const sdkStreamMixin = (stream) => {
    if (!(stream instanceof stream__WEBPACK_IMPORTED_MODULE_2__.Readable)) {
        try {
            return (0,_sdk_stream_mixin_browser__WEBPACK_IMPORTED_MODULE_3__.sdkStreamMixin)(stream);
        }
        catch (e) {
            const name = stream?.__proto__?.constructor?.name || stream;
            throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${name}`);
        }
    }
    let transformed = false;
    const transformToByteArray = async () => {
        if (transformed) {
            throw new Error(ERR_MSG_STREAM_HAS_BEEN_TRANSFORMED);
        }
        transformed = true;
        return await (0,_smithy_node_http_handler__WEBPACK_IMPORTED_MODULE_0__.streamCollector)(stream);
    };
    return Object.assign(stream, {
        transformToByteArray,
        transformToString: async (encoding) => {
            const buf = await transformToByteArray();
            if (encoding === undefined || Buffer.isEncoding(encoding)) {
                return (0,_smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_1__.fromArrayBuffer)(buf.buffer, buf.byteOffset, buf.byteLength).toString(encoding);
            }
            else {
                const decoder = new TextDecoder(encoding);
                return decoder.decode(buf);
            }
        },
        transformToWebStream: () => {
            if (transformed) {
                throw new Error(ERR_MSG_STREAM_HAS_BEEN_TRANSFORMED);
            }
            if (stream.readableFlowing !== null) {
                throw new Error("The stream has been consumed by other callbacks.");
            }
            if (typeof stream__WEBPACK_IMPORTED_MODULE_2__.Readable.toWeb !== "function") {
                throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");
            }
            transformed = true;
            return stream__WEBPACK_IMPORTED_MODULE_2__.Readable.toWeb(stream);
        },
    });
};


/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/splitStream.browser.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/splitStream.browser.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   splitStream: () => (/* binding */ splitStream)
/* harmony export */ });
async function splitStream(stream) {
    if (typeof stream.stream === "function") {
        stream = stream.stream();
    }
    const readableStream = stream;
    return readableStream.tee();
}


/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/splitStream.js":
/*!******************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/splitStream.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   splitStream: () => (/* binding */ splitStream)
/* harmony export */ });
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ "stream");
/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _splitStream_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./splitStream.browser */ "../node_modules/@smithy/util-stream/dist-es/splitStream.browser.js");
/* harmony import */ var _stream_type_check__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stream-type-check */ "../node_modules/@smithy/util-stream/dist-es/stream-type-check.js");



async function splitStream(stream) {
    if ((0,_stream_type_check__WEBPACK_IMPORTED_MODULE_2__.isReadableStream)(stream) || (0,_stream_type_check__WEBPACK_IMPORTED_MODULE_2__.isBlob)(stream)) {
        return (0,_splitStream_browser__WEBPACK_IMPORTED_MODULE_1__.splitStream)(stream);
    }
    const stream1 = new stream__WEBPACK_IMPORTED_MODULE_0__.PassThrough();
    const stream2 = new stream__WEBPACK_IMPORTED_MODULE_0__.PassThrough();
    stream.pipe(stream1);
    stream.pipe(stream2);
    return [stream1, stream2];
}


/***/ }),

/***/ "../node_modules/@smithy/util-stream/dist-es/stream-type-check.js":
/*!************************************************************************!*\
  !*** ../node_modules/@smithy/util-stream/dist-es/stream-type-check.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isBlob: () => (/* binding */ isBlob),
/* harmony export */   isReadableStream: () => (/* binding */ isReadableStream)
/* harmony export */ });
const isReadableStream = (stream) => typeof ReadableStream === "function" &&
    (stream?.constructor?.name === ReadableStream.name || stream instanceof ReadableStream);
const isBlob = (blob) => {
    return typeof Blob === "function" && (blob?.constructor?.name === Blob.name || blob instanceof Blob);
};


/***/ }),

/***/ "../node_modules/@smithy/util-uri-escape/dist-es/escape-uri-path.js":
/*!**************************************************************************!*\
  !*** ../node_modules/@smithy/util-uri-escape/dist-es/escape-uri-path.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   escapeUriPath: () => (/* binding */ escapeUriPath)
/* harmony export */ });
/* harmony import */ var _escape_uri__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./escape-uri */ "../node_modules/@smithy/util-uri-escape/dist-es/escape-uri.js");

const escapeUriPath = (uri) => uri.split("/").map(_escape_uri__WEBPACK_IMPORTED_MODULE_0__.escapeUri).join("/");


/***/ }),

/***/ "../node_modules/@smithy/util-uri-escape/dist-es/escape-uri.js":
/*!*********************************************************************!*\
  !*** ../node_modules/@smithy/util-uri-escape/dist-es/escape-uri.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   escapeUri: () => (/* binding */ escapeUri)
/* harmony export */ });
const escapeUri = (uri) => encodeURIComponent(uri).replace(/[!'()*]/g, hexEncode);
const hexEncode = (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`;


/***/ }),

/***/ "../node_modules/@smithy/util-uri-escape/dist-es/index.js":
/*!****************************************************************!*\
  !*** ../node_modules/@smithy/util-uri-escape/dist-es/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   escapeUri: () => (/* reexport safe */ _escape_uri__WEBPACK_IMPORTED_MODULE_0__.escapeUri),
/* harmony export */   escapeUriPath: () => (/* reexport safe */ _escape_uri_path__WEBPACK_IMPORTED_MODULE_1__.escapeUriPath)
/* harmony export */ });
/* harmony import */ var _escape_uri__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./escape-uri */ "../node_modules/@smithy/util-uri-escape/dist-es/escape-uri.js");
/* harmony import */ var _escape_uri_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./escape-uri-path */ "../node_modules/@smithy/util-uri-escape/dist-es/escape-uri-path.js");




/***/ }),

/***/ "../node_modules/@smithy/util-utf8/dist-es/fromUtf8.js":
/*!*************************************************************!*\
  !*** ../node_modules/@smithy/util-utf8/dist-es/fromUtf8.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromUtf8: () => (/* binding */ fromUtf8)
/* harmony export */ });
/* harmony import */ var _smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-buffer-from */ "../node_modules/@smithy/util-buffer-from/dist-es/index.js");

const fromUtf8 = (input) => {
    const buf = (0,_smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__.fromString)(input, "utf8");
    return new Uint8Array(buf.buffer, buf.byteOffset, buf.byteLength / Uint8Array.BYTES_PER_ELEMENT);
};


/***/ }),

/***/ "../node_modules/@smithy/util-utf8/dist-es/index.js":
/*!**********************************************************!*\
  !*** ../node_modules/@smithy/util-utf8/dist-es/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromUtf8: () => (/* reexport safe */ _fromUtf8__WEBPACK_IMPORTED_MODULE_0__.fromUtf8),
/* harmony export */   toUint8Array: () => (/* reexport safe */ _toUint8Array__WEBPACK_IMPORTED_MODULE_1__.toUint8Array),
/* harmony export */   toUtf8: () => (/* reexport safe */ _toUtf8__WEBPACK_IMPORTED_MODULE_2__.toUtf8)
/* harmony export */ });
/* harmony import */ var _fromUtf8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fromUtf8 */ "../node_modules/@smithy/util-utf8/dist-es/fromUtf8.js");
/* harmony import */ var _toUint8Array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toUint8Array */ "../node_modules/@smithy/util-utf8/dist-es/toUint8Array.js");
/* harmony import */ var _toUtf8__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./toUtf8 */ "../node_modules/@smithy/util-utf8/dist-es/toUtf8.js");





/***/ }),

/***/ "../node_modules/@smithy/util-utf8/dist-es/toUint8Array.js":
/*!*****************************************************************!*\
  !*** ../node_modules/@smithy/util-utf8/dist-es/toUint8Array.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toUint8Array: () => (/* binding */ toUint8Array)
/* harmony export */ });
/* harmony import */ var _fromUtf8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fromUtf8 */ "../node_modules/@smithy/util-utf8/dist-es/fromUtf8.js");

const toUint8Array = (data) => {
    if (typeof data === "string") {
        return (0,_fromUtf8__WEBPACK_IMPORTED_MODULE_0__.fromUtf8)(data);
    }
    if (ArrayBuffer.isView(data)) {
        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);
    }
    return new Uint8Array(data);
};


/***/ }),

/***/ "../node_modules/@smithy/util-utf8/dist-es/toUtf8.js":
/*!***********************************************************!*\
  !*** ../node_modules/@smithy/util-utf8/dist-es/toUtf8.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toUtf8: () => (/* binding */ toUtf8)
/* harmony export */ });
/* harmony import */ var _smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-buffer-from */ "../node_modules/@smithy/util-buffer-from/dist-es/index.js");

const toUtf8 = (input) => {
    if (typeof input === "string") {
        return input;
    }
    if (typeof input !== "object" || typeof input.byteOffset !== "number" || typeof input.byteLength !== "number") {
        throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");
    }
    return (0,_smithy_util_buffer_from__WEBPACK_IMPORTED_MODULE_0__.fromArrayBuffer)(input.buffer, input.byteOffset, input.byteLength).toString("utf8");
};


/***/ }),

/***/ "../node_modules/compression/index.js":
/*!********************************************!*\
  !*** ../node_modules/compression/index.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
/*!
 * compression
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */



/**
 * Module dependencies.
 * @private
 */

var Negotiator = __webpack_require__(/*! negotiator */ "negotiator")
var Buffer = (__webpack_require__(/*! safe-buffer */ "safe-buffer").Buffer)
var bytes = __webpack_require__(/*! bytes */ "bytes")
var compressible = __webpack_require__(/*! compressible */ "compressible")
var debug = __webpack_require__(/*! debug */ "debug")('compression')
var onHeaders = __webpack_require__(/*! on-headers */ "on-headers")
var vary = __webpack_require__(/*! vary */ "vary")
var zlib = __webpack_require__(/*! zlib */ "zlib")

/**
 * Module exports.
 */

module.exports = compression
module.exports.filter = shouldCompress

/**
 * Module variables.
 * @private
 */

var cacheControlNoTransformRegExp = /(?:^|,)\s*?no-transform\s*?(?:,|$)/

/**
 * Compress response data with gzip / deflate.
 *
 * @param {Object} [options]
 * @return {Function} middleware
 * @public
 */

function compression (options) {
  var opts = options || {}

  // options
  var filter = opts.filter || shouldCompress
  var threshold = bytes.parse(opts.threshold)

  if (threshold == null) {
    threshold = 1024
  }

  return function compression (req, res, next) {
    var ended = false
    var length
    var listeners = []
    var stream

    var _end = res.end
    var _on = res.on
    var _write = res.write

    // flush
    res.flush = function flush () {
      if (stream) {
        stream.flush()
      }
    }

    // proxy

    res.write = function write (chunk, encoding) {
      if (ended) {
        return false
      }

      if (!this._header) {
        this._implicitHeader()
      }

      return stream
        ? stream.write(toBuffer(chunk, encoding))
        : _write.call(this, chunk, encoding)
    }

    res.end = function end (chunk, encoding) {
      if (ended) {
        return false
      }

      if (!this._header) {
        // estimate the length
        if (!this.getHeader('Content-Length')) {
          length = chunkLength(chunk, encoding)
        }

        this._implicitHeader()
      }

      if (!stream) {
        return _end.call(this, chunk, encoding)
      }

      // mark ended
      ended = true

      // write Buffer for Node.js 0.8
      return chunk
        ? stream.end(toBuffer(chunk, encoding))
        : stream.end()
    }

    res.on = function on (type, listener) {
      if (!listeners || type !== 'drain') {
        return _on.call(this, type, listener)
      }

      if (stream) {
        return stream.on(type, listener)
      }

      // buffer listeners for future stream
      listeners.push([type, listener])

      return this
    }

    function nocompress (msg) {
      debug('no compression: %s', msg)
      addListeners(res, _on, listeners)
      listeners = null
    }

    onHeaders(res, function onResponseHeaders () {
      // determine if request is filtered
      if (!filter(req, res)) {
        nocompress('filtered')
        return
      }

      // determine if the entity should be transformed
      if (!shouldTransform(req, res)) {
        nocompress('no transform')
        return
      }

      // vary
      vary(res, 'Accept-Encoding')

      // content-length below threshold
      if (Number(res.getHeader('Content-Length')) < threshold || length < threshold) {
        nocompress('size below threshold')
        return
      }

      var encoding = res.getHeader('Content-Encoding') || 'identity'

      // already encoded
      if (encoding !== 'identity') {
        nocompress('already encoded')
        return
      }

      // head
      if (req.method === 'HEAD') {
        nocompress('HEAD request')
        return
      }

      // compression method
      var negotiator = new Negotiator(req)
      var method = negotiator.encoding(['gzip', 'deflate', 'identity'], ['gzip'])

      // negotiation failed
      if (!method || method === 'identity') {
        nocompress('not acceptable')
        return
      }

      // compression stream
      debug('%s compression', method)
      stream = method === 'gzip'
        ? zlib.createGzip(opts)
        : zlib.createDeflate(opts)

      // add buffered listeners to stream
      addListeners(stream, stream.on, listeners)

      // header fields
      res.setHeader('Content-Encoding', method)
      res.removeHeader('Content-Length')

      // compression
      stream.on('data', function onStreamData (chunk) {
        if (_write.call(res, chunk) === false) {
          stream.pause()
        }
      })

      stream.on('end', function onStreamEnd () {
        _end.call(res)
      })

      _on.call(res, 'drain', function onResponseDrain () {
        stream.resume()
      })
    })

    next()
  }
}

/**
 * Add bufferred listeners to stream
 * @private
 */

function addListeners (stream, on, listeners) {
  for (var i = 0; i < listeners.length; i++) {
    on.apply(stream, listeners[i])
  }
}

/**
 * Get the length of a given chunk
 */

function chunkLength (chunk, encoding) {
  if (!chunk) {
    return 0
  }

  return !Buffer.isBuffer(chunk)
    ? Buffer.byteLength(chunk, encoding)
    : chunk.length
}

/**
 * Default filter function.
 * @private
 */

function shouldCompress (req, res) {
  var type = res.getHeader('Content-Type')

  if (type === undefined || !compressible(type)) {
    debug('%s not compressible', type)
    return false
  }

  return true
}

/**
 * Determine if the entity should be transformed.
 * @private
 */

function shouldTransform (req, res) {
  var cacheControl = res.getHeader('Cache-Control')

  // Don't compress for Cache-Control: no-transform
  // https://tools.ietf.org/html/rfc7234#section-5.2.2.4
  return !cacheControl ||
    !cacheControlNoTransformRegExp.test(cacheControl)
}

/**
 * Coerce arguments to Buffer
 * @private
 */

function toBuffer (chunk, encoding) {
  return !Buffer.isBuffer(chunk)
    ? Buffer.from(chunk, encoding)
    : chunk
}


/***/ }),

/***/ "../node_modules/is-electron/index.js":
/*!********************************************!*\
  !*** ../node_modules/is-electron/index.js ***!
  \********************************************/
/***/ ((module) => {

// https://github.com/electron/electron/issues/2288
function isElectron() {
    // Renderer process
    if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {
        return true;
    }

    // Main process
    if (typeof process !== 'undefined' && typeof process.versions === 'object' && !!process.versions.electron) {
        return true;
    }

    // Detect the user agent when the `nodeIntegration` option is set to false
    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {
        return true;
    }

    return false;
}

module.exports = isElectron;


/***/ }),

/***/ "../node_modules/p-queue/dist/index.js":
/*!*********************************************!*\
  !*** ../node_modules/p-queue/dist/index.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const EventEmitter = __webpack_require__(/*! eventemitter3 */ "eventemitter3");
const p_timeout_1 = __webpack_require__(/*! p-timeout */ "p-timeout");
const priority_queue_1 = __webpack_require__(/*! ./priority-queue */ "../node_modules/p-queue/dist/priority-queue.js");
// eslint-disable-next-line @typescript-eslint/no-empty-function
const empty = () => { };
const timeoutError = new p_timeout_1.TimeoutError();
/**
Promise queue with concurrency control.
*/
class PQueue extends EventEmitter {
    constructor(options) {
        var _a, _b, _c, _d;
        super();
        this._intervalCount = 0;
        this._intervalEnd = 0;
        this._pendingCount = 0;
        this._resolveEmpty = empty;
        this._resolveIdle = empty;
        // eslint-disable-next-line @typescript-eslint/consistent-type-assertions
        options = Object.assign({ carryoverConcurrencyCount: false, intervalCap: Infinity, interval: 0, concurrency: Infinity, autoStart: true, queueClass: priority_queue_1.default }, options);
        if (!(typeof options.intervalCap === 'number' && options.intervalCap >= 1)) {
            throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(_b = (_a = options.intervalCap) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : ''}\` (${typeof options.intervalCap})`);
        }
        if (options.interval === undefined || !(Number.isFinite(options.interval) && options.interval >= 0)) {
            throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(_d = (_c = options.interval) === null || _c === void 0 ? void 0 : _c.toString()) !== null && _d !== void 0 ? _d : ''}\` (${typeof options.interval})`);
        }
        this._carryoverConcurrencyCount = options.carryoverConcurrencyCount;
        this._isIntervalIgnored = options.intervalCap === Infinity || options.interval === 0;
        this._intervalCap = options.intervalCap;
        this._interval = options.interval;
        this._queue = new options.queueClass();
        this._queueClass = options.queueClass;
        this.concurrency = options.concurrency;
        this._timeout = options.timeout;
        this._throwOnTimeout = options.throwOnTimeout === true;
        this._isPaused = options.autoStart === false;
    }
    get _doesIntervalAllowAnother() {
        return this._isIntervalIgnored || this._intervalCount < this._intervalCap;
    }
    get _doesConcurrentAllowAnother() {
        return this._pendingCount < this._concurrency;
    }
    _next() {
        this._pendingCount--;
        this._tryToStartAnother();
        this.emit('next');
    }
    _resolvePromises() {
        this._resolveEmpty();
        this._resolveEmpty = empty;
        if (this._pendingCount === 0) {
            this._resolveIdle();
            this._resolveIdle = empty;
            this.emit('idle');
        }
    }
    _onResumeInterval() {
        this._onInterval();
        this._initializeIntervalIfNeeded();
        this._timeoutId = undefined;
    }
    _isIntervalPaused() {
        const now = Date.now();
        if (this._intervalId === undefined) {
            const delay = this._intervalEnd - now;
            if (delay < 0) {
                // Act as the interval was done
                // We don't need to resume it here because it will be resumed on line 160
                this._intervalCount = (this._carryoverConcurrencyCount) ? this._pendingCount : 0;
            }
            else {
                // Act as the interval is pending
                if (this._timeoutId === undefined) {
                    this._timeoutId = setTimeout(() => {
                        this._onResumeInterval();
                    }, delay);
                }
                return true;
            }
        }
        return false;
    }
    _tryToStartAnother() {
        if (this._queue.size === 0) {
            // We can clear the interval ("pause")
            // Because we can redo it later ("resume")
            if (this._intervalId) {
                clearInterval(this._intervalId);
            }
            this._intervalId = undefined;
            this._resolvePromises();
            return false;
        }
        if (!this._isPaused) {
            const canInitializeInterval = !this._isIntervalPaused();
            if (this._doesIntervalAllowAnother && this._doesConcurrentAllowAnother) {
                const job = this._queue.dequeue();
                if (!job) {
                    return false;
                }
                this.emit('active');
                job();
                if (canInitializeInterval) {
                    this._initializeIntervalIfNeeded();
                }
                return true;
            }
        }
        return false;
    }
    _initializeIntervalIfNeeded() {
        if (this._isIntervalIgnored || this._intervalId !== undefined) {
            return;
        }
        this._intervalId = setInterval(() => {
            this._onInterval();
        }, this._interval);
        this._intervalEnd = Date.now() + this._interval;
    }
    _onInterval() {
        if (this._intervalCount === 0 && this._pendingCount === 0 && this._intervalId) {
            clearInterval(this._intervalId);
            this._intervalId = undefined;
        }
        this._intervalCount = this._carryoverConcurrencyCount ? this._pendingCount : 0;
        this._processQueue();
    }
    /**
    Executes all queued functions until it reaches the limit.
    */
    _processQueue() {
        // eslint-disable-next-line no-empty
        while (this._tryToStartAnother()) { }
    }
    get concurrency() {
        return this._concurrency;
    }
    set concurrency(newConcurrency) {
        if (!(typeof newConcurrency === 'number' && newConcurrency >= 1)) {
            throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${newConcurrency}\` (${typeof newConcurrency})`);
        }
        this._concurrency = newConcurrency;
        this._processQueue();
    }
    /**
    Adds a sync or async task to the queue. Always returns a promise.
    */
    async add(fn, options = {}) {
        return new Promise((resolve, reject) => {
            const run = async () => {
                this._pendingCount++;
                this._intervalCount++;
                try {
                    const operation = (this._timeout === undefined && options.timeout === undefined) ? fn() : p_timeout_1.default(Promise.resolve(fn()), (options.timeout === undefined ? this._timeout : options.timeout), () => {
                        if (options.throwOnTimeout === undefined ? this._throwOnTimeout : options.throwOnTimeout) {
                            reject(timeoutError);
                        }
                        return undefined;
                    });
                    resolve(await operation);
                }
                catch (error) {
                    reject(error);
                }
                this._next();
            };
            this._queue.enqueue(run, options);
            this._tryToStartAnother();
            this.emit('add');
        });
    }
    /**
    Same as `.add()`, but accepts an array of sync or async functions.

    @returns A promise that resolves when all functions are resolved.
    */
    async addAll(functions, options) {
        return Promise.all(functions.map(async (function_) => this.add(function_, options)));
    }
    /**
    Start (or resume) executing enqueued tasks within concurrency limit. No need to call this if queue is not paused (via `options.autoStart = false` or by `.pause()` method.)
    */
    start() {
        if (!this._isPaused) {
            return this;
        }
        this._isPaused = false;
        this._processQueue();
        return this;
    }
    /**
    Put queue execution on hold.
    */
    pause() {
        this._isPaused = true;
    }
    /**
    Clear the queue.
    */
    clear() {
        this._queue = new this._queueClass();
    }
    /**
    Can be called multiple times. Useful if you for example add additional items at a later time.

    @returns A promise that settles when the queue becomes empty.
    */
    async onEmpty() {
        // Instantly resolve if the queue is empty
        if (this._queue.size === 0) {
            return;
        }
        return new Promise(resolve => {
            const existingResolve = this._resolveEmpty;
            this._resolveEmpty = () => {
                existingResolve();
                resolve();
            };
        });
    }
    /**
    The difference with `.onEmpty` is that `.onIdle` guarantees that all work from the queue has finished. `.onEmpty` merely signals that the queue is empty, but it could mean that some promises haven't completed yet.

    @returns A promise that settles when the queue becomes empty, and all promises have completed; `queue.size === 0 && queue.pending === 0`.
    */
    async onIdle() {
        // Instantly resolve if none pending and if nothing else is queued
        if (this._pendingCount === 0 && this._queue.size === 0) {
            return;
        }
        return new Promise(resolve => {
            const existingResolve = this._resolveIdle;
            this._resolveIdle = () => {
                existingResolve();
                resolve();
            };
        });
    }
    /**
    Size of the queue.
    */
    get size() {
        return this._queue.size;
    }
    /**
    Size of the queue, filtered by the given options.

    For example, this can be used to find the number of items remaining in the queue with a specific priority level.
    */
    sizeBy(options) {
        // eslint-disable-next-line unicorn/no-fn-reference-in-iterator
        return this._queue.filter(options).length;
    }
    /**
    Number of pending promises.
    */
    get pending() {
        return this._pendingCount;
    }
    /**
    Whether the queue is currently paused.
    */
    get isPaused() {
        return this._isPaused;
    }
    get timeout() {
        return this._timeout;
    }
    /**
    Set the timeout for future operations.
    */
    set timeout(milliseconds) {
        this._timeout = milliseconds;
    }
}
exports["default"] = PQueue;


/***/ }),

/***/ "../node_modules/p-queue/dist/lower-bound.js":
/*!***************************************************!*\
  !*** ../node_modules/p-queue/dist/lower-bound.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
// Port of lower_bound from https://en.cppreference.com/w/cpp/algorithm/lower_bound
// Used to compute insertion index to keep queue sorted after insertion
function lowerBound(array, value, comparator) {
    let first = 0;
    let count = array.length;
    while (count > 0) {
        const step = (count / 2) | 0;
        let it = first + step;
        if (comparator(array[it], value) <= 0) {
            first = ++it;
            count -= step + 1;
        }
        else {
            count = step;
        }
    }
    return first;
}
exports["default"] = lowerBound;


/***/ }),

/***/ "../node_modules/p-queue/dist/priority-queue.js":
/*!******************************************************!*\
  !*** ../node_modules/p-queue/dist/priority-queue.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
const lower_bound_1 = __webpack_require__(/*! ./lower-bound */ "../node_modules/p-queue/dist/lower-bound.js");
class PriorityQueue {
    constructor() {
        this._queue = [];
    }
    enqueue(run, options) {
        options = Object.assign({ priority: 0 }, options);
        const element = {
            priority: options.priority,
            run
        };
        if (this.size && this._queue[this.size - 1].priority >= options.priority) {
            this._queue.push(element);
            return;
        }
        const index = lower_bound_1.default(this._queue, element, (a, b) => b.priority - a.priority);
        this._queue.splice(index, 0, element);
    }
    dequeue() {
        const item = this._queue.shift();
        return item === null || item === void 0 ? void 0 : item.run;
    }
    filter(options) {
        return this._queue.filter((element) => element.priority === options.priority).map((element) => element.run);
    }
    get size() {
        return this._queue.length;
    }
}
exports["default"] = PriorityQueue;


/***/ }),

/***/ "../node_modules/p-retry/index.js":
/*!****************************************!*\
  !*** ../node_modules/p-retry/index.js ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

const retry = __webpack_require__(/*! retry */ "retry");

const networkErrorMsgs = [
	'Failed to fetch', // Chrome
	'NetworkError when attempting to fetch resource.', // Firefox
	'The Internet connection appears to be offline.', // Safari
	'Network request failed' // `cross-fetch`
];

class AbortError extends Error {
	constructor(message) {
		super();

		if (message instanceof Error) {
			this.originalError = message;
			({message} = message);
		} else {
			this.originalError = new Error(message);
			this.originalError.stack = this.stack;
		}

		this.name = 'AbortError';
		this.message = message;
	}
}

const decorateErrorWithCounts = (error, attemptNumber, options) => {
	// Minus 1 from attemptNumber because the first attempt does not count as a retry
	const retriesLeft = options.retries - (attemptNumber - 1);

	error.attemptNumber = attemptNumber;
	error.retriesLeft = retriesLeft;
	return error;
};

const isNetworkError = errorMessage => networkErrorMsgs.includes(errorMessage);

const pRetry = (input, options) => new Promise((resolve, reject) => {
	options = {
		onFailedAttempt: () => {},
		retries: 10,
		...options
	};

	const operation = retry.operation(options);

	operation.attempt(async attemptNumber => {
		try {
			resolve(await input(attemptNumber));
		} catch (error) {
			if (!(error instanceof Error)) {
				reject(new TypeError(`Non-error was thrown: "${error}". You should only throw errors.`));
				return;
			}

			if (error instanceof AbortError) {
				operation.stop();
				reject(error.originalError);
			} else if (error instanceof TypeError && !isNetworkError(error.message)) {
				operation.stop();
				reject(error);
			} else {
				decorateErrorWithCounts(error, attemptNumber, options);

				try {
					await options.onFailedAttempt(error);
				} catch (error) {
					reject(error);
					return;
				}

				if (!operation.retry(error)) {
					reject(operation.mainError());
				}
			}
		}
	});
});

module.exports = pRetry;
// TODO: remove this in the next major version
module.exports["default"] = pRetry;

module.exports.AbortError = AbortError;


/***/ }),

/***/ "@nestjs-modules/mailer/dist/adapters/handlebars.adapter":
/*!**************************************************************************!*\
  !*** external "@nestjs-modules/mailer/dist/adapters/handlebars.adapter" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs-modules/mailer/dist/adapters/handlebars.adapter");

/***/ }),

/***/ "@nestjs/common":
/*!*********************************!*\
  !*** external "@nestjs/common" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs/common");

/***/ }),

/***/ "@nestjs/common/constants":
/*!*******************************************!*\
  !*** external "@nestjs/common/constants" ***!
  \*******************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs/common/constants");

/***/ }),

/***/ "@nestjs/common/utils/shared.utils":
/*!****************************************************!*\
  !*** external "@nestjs/common/utils/shared.utils" ***!
  \****************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs/common/utils/shared.utils");

/***/ }),

/***/ "@nestjs/config":
/*!*********************************!*\
  !*** external "@nestjs/config" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs/config");

/***/ }),

/***/ "@nestjs/core":
/*!*******************************!*\
  !*** external "@nestjs/core" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs/core");

/***/ }),

/***/ "@nestjs/core/injector/injector":
/*!*************************************************!*\
  !*** external "@nestjs/core/injector/injector" ***!
  \*************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs/core/injector/injector");

/***/ }),

/***/ "@nestjs/event-emitter":
/*!****************************************!*\
  !*** external "@nestjs/event-emitter" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs/event-emitter");

/***/ }),

/***/ "@nestjs/jwt":
/*!******************************!*\
  !*** external "@nestjs/jwt" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs/jwt");

/***/ }),

/***/ "@nestjs/passport":
/*!***********************************!*\
  !*** external "@nestjs/passport" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs/passport");

/***/ }),

/***/ "@nestjs/schedule":
/*!***********************************!*\
  !*** external "@nestjs/schedule" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs/schedule");

/***/ }),

/***/ "@nestjs/swagger":
/*!**********************************!*\
  !*** external "@nestjs/swagger" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs/swagger");

/***/ }),

/***/ "@nestjs/throttler":
/*!************************************!*\
  !*** external "@nestjs/throttler" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs/throttler");

/***/ }),

/***/ "@nestjs/typeorm":
/*!**********************************!*\
  !*** external "@nestjs/typeorm" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@nestjs/typeorm");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("axios");

/***/ }),

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("bcrypt");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "bull":
/*!***********************!*\
  !*** external "bull" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("bull");

/***/ }),

/***/ "bytes":
/*!************************!*\
  !*** external "bytes" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("bytes");

/***/ }),

/***/ "class-transformer":
/*!************************************!*\
  !*** external "class-transformer" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("class-transformer");

/***/ }),

/***/ "class-validator":
/*!**********************************!*\
  !*** external "class-validator" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("class-validator");

/***/ }),

/***/ "compressible":
/*!*******************************!*\
  !*** external "compressible" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("compressible");

/***/ }),

/***/ "debug":
/*!************************!*\
  !*** external "debug" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("debug");

/***/ }),

/***/ "eventemitter3":
/*!********************************!*\
  !*** external "eventemitter3" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("eventemitter3");

/***/ }),

/***/ "fast-xml-parser":
/*!**********************************!*\
  !*** external "fast-xml-parser" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("fast-xml-parser");

/***/ }),

/***/ "firebase-admin":
/*!*********************************!*\
  !*** external "firebase-admin" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("firebase-admin");

/***/ }),

/***/ "form-data":
/*!****************************!*\
  !*** external "form-data" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("form-data");

/***/ }),

/***/ "ioredis":
/*!**************************!*\
  !*** external "ioredis" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("ioredis");

/***/ }),

/***/ "is-stream":
/*!****************************!*\
  !*** external "is-stream" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("is-stream");

/***/ }),

/***/ "joi":
/*!**********************!*\
  !*** external "joi" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("joi");

/***/ }),

/***/ "mime-types":
/*!*****************************!*\
  !*** external "mime-types" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("mime-types");

/***/ }),

/***/ "negotiator":
/*!*****************************!*\
  !*** external "negotiator" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("negotiator");

/***/ }),

/***/ "nestjs-typeorm-paginate":
/*!******************************************!*\
  !*** external "nestjs-typeorm-paginate" ***!
  \******************************************/
/***/ ((module) => {

"use strict";
module.exports = require("nestjs-typeorm-paginate");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("nodemailer");

/***/ }),

/***/ "on-headers":
/*!*****************************!*\
  !*** external "on-headers" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("on-headers");

/***/ }),

/***/ "p-timeout":
/*!****************************!*\
  !*** external "p-timeout" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("p-timeout");

/***/ }),

/***/ "passport-jwt":
/*!*******************************!*\
  !*** external "passport-jwt" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("passport-jwt");

/***/ }),

/***/ "retry":
/*!************************!*\
  !*** external "retry" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("retry");

/***/ }),

/***/ "rxjs/operators":
/*!*********************************!*\
  !*** external "rxjs/operators" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("rxjs/operators");

/***/ }),

/***/ "safe-buffer":
/*!******************************!*\
  !*** external "safe-buffer" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("safe-buffer");

/***/ }),

/***/ "tslib":
/*!************************!*\
  !*** external "tslib" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("tslib");

/***/ }),

/***/ "twilio":
/*!*************************!*\
  !*** external "twilio" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("twilio");

/***/ }),

/***/ "typeorm":
/*!**************************!*\
  !*** external "typeorm" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("typeorm");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("uuid");

/***/ }),

/***/ "vary":
/*!***********************!*\
  !*** external "vary" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("vary");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("dns");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:os":
/*!**************************!*\
  !*** external "node:os" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:os");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "node:querystring":
/*!***********************************!*\
  !*** external "node:querystring" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:querystring");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "../node_modules/helmet/index.mjs":
/*!****************************************!*\
  !*** ../node_modules/helmet/index.mjs ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   contentSecurityPolicy: () => (/* binding */ contentSecurityPolicy),
/* harmony export */   crossOriginEmbedderPolicy: () => (/* binding */ crossOriginEmbedderPolicy),
/* harmony export */   crossOriginOpenerPolicy: () => (/* binding */ crossOriginOpenerPolicy),
/* harmony export */   crossOriginResourcePolicy: () => (/* binding */ crossOriginResourcePolicy),
/* harmony export */   "default": () => (/* binding */ helmet),
/* harmony export */   dnsPrefetchControl: () => (/* binding */ xDnsPrefetchControl),
/* harmony export */   frameguard: () => (/* binding */ xFrameOptions),
/* harmony export */   hidePoweredBy: () => (/* binding */ xPoweredBy),
/* harmony export */   hsts: () => (/* binding */ strictTransportSecurity),
/* harmony export */   ieNoOpen: () => (/* binding */ xDownloadOptions),
/* harmony export */   noSniff: () => (/* binding */ xContentTypeOptions),
/* harmony export */   originAgentCluster: () => (/* binding */ originAgentCluster),
/* harmony export */   permittedCrossDomainPolicies: () => (/* binding */ xPermittedCrossDomainPolicies),
/* harmony export */   referrerPolicy: () => (/* binding */ referrerPolicy),
/* harmony export */   strictTransportSecurity: () => (/* binding */ strictTransportSecurity),
/* harmony export */   xContentTypeOptions: () => (/* binding */ xContentTypeOptions),
/* harmony export */   xDnsPrefetchControl: () => (/* binding */ xDnsPrefetchControl),
/* harmony export */   xDownloadOptions: () => (/* binding */ xDownloadOptions),
/* harmony export */   xFrameOptions: () => (/* binding */ xFrameOptions),
/* harmony export */   xPermittedCrossDomainPolicies: () => (/* binding */ xPermittedCrossDomainPolicies),
/* harmony export */   xPoweredBy: () => (/* binding */ xPoweredBy),
/* harmony export */   xXssProtection: () => (/* binding */ xXssProtection),
/* harmony export */   xssFilter: () => (/* binding */ xXssProtection)
/* harmony export */ });
const dangerouslyDisableDefaultSrc = Symbol("dangerouslyDisableDefaultSrc")
const SHOULD_BE_QUOTED = new Set(["none", "self", "strict-dynamic", "report-sample", "inline-speculation-rules", "unsafe-inline", "unsafe-eval", "unsafe-hashes", "wasm-unsafe-eval"])
const getDefaultDirectives = () => ({
	"default-src": ["'self'"],
	"base-uri": ["'self'"],
	"font-src": ["'self'", "https:", "data:"],
	"form-action": ["'self'"],
	"frame-ancestors": ["'self'"],
	"img-src": ["'self'", "data:"],
	"object-src": ["'none'"],
	"script-src": ["'self'"],
	"script-src-attr": ["'none'"],
	"style-src": ["'self'", "https:", "'unsafe-inline'"],
	"upgrade-insecure-requests": []
})
const dashify = str => str.replace(/[A-Z]/g, capitalLetter => "-" + capitalLetter.toLowerCase())
const isDirectiveValueInvalid = directiveValue => /;|,/.test(directiveValue)
const isDirectiveValueEntryInvalid = directiveValueEntry => SHOULD_BE_QUOTED.has(directiveValueEntry) || directiveValueEntry.startsWith("nonce-") || directiveValueEntry.startsWith("sha256-") || directiveValueEntry.startsWith("sha384-") || directiveValueEntry.startsWith("sha512-")
const invalidDirectiveValueError = directiveName => new Error(`Content-Security-Policy received an invalid directive value for ${JSON.stringify(directiveName)}`)
function normalizeDirectives(options) {
	const defaultDirectives = getDefaultDirectives()
	const {useDefaults = true, directives: rawDirectives = defaultDirectives} = options
	const result = new Map()
	const directiveNamesSeen = new Set()
	const directivesExplicitlyDisabled = new Set()
	for (const rawDirectiveName in rawDirectives) {
		if (!Object.hasOwn(rawDirectives, rawDirectiveName)) {
			continue
		}
		if (rawDirectiveName.length === 0 || /[^a-zA-Z0-9-]/.test(rawDirectiveName)) {
			throw new Error(`Content-Security-Policy received an invalid directive name ${JSON.stringify(rawDirectiveName)}`)
		}
		const directiveName = dashify(rawDirectiveName)
		if (directiveNamesSeen.has(directiveName)) {
			throw new Error(`Content-Security-Policy received a duplicate directive ${JSON.stringify(directiveName)}`)
		}
		directiveNamesSeen.add(directiveName)
		const rawDirectiveValue = rawDirectives[rawDirectiveName]
		let directiveValue
		if (rawDirectiveValue === null) {
			if (directiveName === "default-src") {
				throw new Error("Content-Security-Policy needs a default-src but it was set to `null`. If you really want to disable it, set it to `contentSecurityPolicy.dangerouslyDisableDefaultSrc`.")
			}
			directivesExplicitlyDisabled.add(directiveName)
			continue
		} else if (typeof rawDirectiveValue === "string") {
			directiveValue = [rawDirectiveValue]
		} else if (!rawDirectiveValue) {
			throw new Error(`Content-Security-Policy received an invalid directive value for ${JSON.stringify(directiveName)}`)
		} else if (rawDirectiveValue === dangerouslyDisableDefaultSrc) {
			if (directiveName === "default-src") {
				directivesExplicitlyDisabled.add("default-src")
				continue
			} else {
				throw new Error(`Content-Security-Policy: tried to disable ${JSON.stringify(directiveName)} as if it were default-src; simply omit the key`)
			}
		} else {
			directiveValue = rawDirectiveValue
		}
		for (const element of directiveValue) {
			if (typeof element === "string" && (isDirectiveValueInvalid(element) || isDirectiveValueEntryInvalid(element))) {
				throw invalidDirectiveValueError(directiveName)
			}
		}
		result.set(directiveName, directiveValue)
	}
	if (useDefaults) {
		Object.entries(defaultDirectives).forEach(([defaultDirectiveName, defaultDirectiveValue]) => {
			if (!result.has(defaultDirectiveName) && !directivesExplicitlyDisabled.has(defaultDirectiveName)) {
				result.set(defaultDirectiveName, defaultDirectiveValue)
			}
		})
	}
	if (!result.size) {
		throw new Error("Content-Security-Policy has no directives. Either set some or disable the header")
	}
	if (!result.has("default-src") && !directivesExplicitlyDisabled.has("default-src")) {
		throw new Error("Content-Security-Policy needs a default-src but none was provided. If you really want to disable it, set it to `contentSecurityPolicy.dangerouslyDisableDefaultSrc`.")
	}
	return result
}
function getHeaderValue(req, res, normalizedDirectives) {
	const result = []
	for (const [directiveName, rawDirectiveValue] of normalizedDirectives) {
		let directiveValue = ""
		for (const element of rawDirectiveValue) {
			if (typeof element === "function") {
				const newElement = element(req, res)
				if (isDirectiveValueEntryInvalid(newElement)) {
					return invalidDirectiveValueError(directiveName)
				}
				directiveValue += " " + newElement
			} else {
				directiveValue += " " + element
			}
		}
		if (!directiveValue) {
			result.push(directiveName)
		} else if (isDirectiveValueInvalid(directiveValue)) {
			return invalidDirectiveValueError(directiveName)
		} else {
			result.push(`${directiveName}${directiveValue}`)
		}
	}
	return result.join(";")
}
const contentSecurityPolicy = function contentSecurityPolicy(options = {}) {
	const headerName = options.reportOnly ? "Content-Security-Policy-Report-Only" : "Content-Security-Policy"
	const normalizedDirectives = normalizeDirectives(options)
	return function contentSecurityPolicyMiddleware(req, res, next) {
		const result = getHeaderValue(req, res, normalizedDirectives)
		if (result instanceof Error) {
			next(result)
		} else {
			res.setHeader(headerName, result)
			next()
		}
	}
}
contentSecurityPolicy.getDefaultDirectives = getDefaultDirectives
contentSecurityPolicy.dangerouslyDisableDefaultSrc = dangerouslyDisableDefaultSrc

const ALLOWED_POLICIES$2 = new Set(["require-corp", "credentialless", "unsafe-none"])
function getHeaderValueFromOptions$6({policy = "require-corp"}) {
	if (ALLOWED_POLICIES$2.has(policy)) {
		return policy
	} else {
		throw new Error(`Cross-Origin-Embedder-Policy does not support the ${JSON.stringify(policy)} policy`)
	}
}
function crossOriginEmbedderPolicy(options = {}) {
	const headerValue = getHeaderValueFromOptions$6(options)
	return function crossOriginEmbedderPolicyMiddleware(_req, res, next) {
		res.setHeader("Cross-Origin-Embedder-Policy", headerValue)
		next()
	}
}

const ALLOWED_POLICIES$1 = new Set(["same-origin", "same-origin-allow-popups", "unsafe-none"])
function getHeaderValueFromOptions$5({policy = "same-origin"}) {
	if (ALLOWED_POLICIES$1.has(policy)) {
		return policy
	} else {
		throw new Error(`Cross-Origin-Opener-Policy does not support the ${JSON.stringify(policy)} policy`)
	}
}
function crossOriginOpenerPolicy(options = {}) {
	const headerValue = getHeaderValueFromOptions$5(options)
	return function crossOriginOpenerPolicyMiddleware(_req, res, next) {
		res.setHeader("Cross-Origin-Opener-Policy", headerValue)
		next()
	}
}

const ALLOWED_POLICIES = new Set(["same-origin", "same-site", "cross-origin"])
function getHeaderValueFromOptions$4({policy = "same-origin"}) {
	if (ALLOWED_POLICIES.has(policy)) {
		return policy
	} else {
		throw new Error(`Cross-Origin-Resource-Policy does not support the ${JSON.stringify(policy)} policy`)
	}
}
function crossOriginResourcePolicy(options = {}) {
	const headerValue = getHeaderValueFromOptions$4(options)
	return function crossOriginResourcePolicyMiddleware(_req, res, next) {
		res.setHeader("Cross-Origin-Resource-Policy", headerValue)
		next()
	}
}

function originAgentCluster() {
	return function originAgentClusterMiddleware(_req, res, next) {
		res.setHeader("Origin-Agent-Cluster", "?1")
		next()
	}
}

const ALLOWED_TOKENS = new Set(["no-referrer", "no-referrer-when-downgrade", "same-origin", "origin", "strict-origin", "origin-when-cross-origin", "strict-origin-when-cross-origin", "unsafe-url", ""])
function getHeaderValueFromOptions$3({policy = ["no-referrer"]}) {
	const tokens = typeof policy === "string" ? [policy] : policy
	if (tokens.length === 0) {
		throw new Error("Referrer-Policy received no policy tokens")
	}
	const tokensSeen = new Set()
	tokens.forEach(token => {
		if (!ALLOWED_TOKENS.has(token)) {
			throw new Error(`Referrer-Policy received an unexpected policy token ${JSON.stringify(token)}`)
		} else if (tokensSeen.has(token)) {
			throw new Error(`Referrer-Policy received a duplicate policy token ${JSON.stringify(token)}`)
		}
		tokensSeen.add(token)
	})
	return tokens.join(",")
}
function referrerPolicy(options = {}) {
	const headerValue = getHeaderValueFromOptions$3(options)
	return function referrerPolicyMiddleware(_req, res, next) {
		res.setHeader("Referrer-Policy", headerValue)
		next()
	}
}

const DEFAULT_MAX_AGE = 365 * 24 * 60 * 60
function parseMaxAge(value = DEFAULT_MAX_AGE) {
	if (value >= 0 && Number.isFinite(value)) {
		return Math.floor(value)
	} else {
		throw new Error(`Strict-Transport-Security: ${JSON.stringify(value)} is not a valid value for maxAge. Please choose a positive integer.`)
	}
}
function getHeaderValueFromOptions$2(options) {
	if ("maxage" in options) {
		throw new Error("Strict-Transport-Security received an unsupported property, `maxage`. Did you mean to pass `maxAge`?")
	}
	if ("includeSubdomains" in options) {
		throw new Error('Strict-Transport-Security middleware should use `includeSubDomains` instead of `includeSubdomains`. (The correct one has an uppercase "D".)')
	}
	const directives = [`max-age=${parseMaxAge(options.maxAge)}`]
	if (options.includeSubDomains === undefined || options.includeSubDomains) {
		directives.push("includeSubDomains")
	}
	if (options.preload) {
		directives.push("preload")
	}
	return directives.join("; ")
}
function strictTransportSecurity(options = {}) {
	const headerValue = getHeaderValueFromOptions$2(options)
	return function strictTransportSecurityMiddleware(_req, res, next) {
		res.setHeader("Strict-Transport-Security", headerValue)
		next()
	}
}

function xContentTypeOptions() {
	return function xContentTypeOptionsMiddleware(_req, res, next) {
		res.setHeader("X-Content-Type-Options", "nosniff")
		next()
	}
}

function xDnsPrefetchControl(options = {}) {
	const headerValue = options.allow ? "on" : "off"
	return function xDnsPrefetchControlMiddleware(_req, res, next) {
		res.setHeader("X-DNS-Prefetch-Control", headerValue)
		next()
	}
}

function xDownloadOptions() {
	return function xDownloadOptionsMiddleware(_req, res, next) {
		res.setHeader("X-Download-Options", "noopen")
		next()
	}
}

function getHeaderValueFromOptions$1({action = "sameorigin"}) {
	const normalizedAction = typeof action === "string" ? action.toUpperCase() : action
	switch (normalizedAction) {
		case "SAME-ORIGIN":
			return "SAMEORIGIN"
		case "DENY":
		case "SAMEORIGIN":
			return normalizedAction
		default:
			throw new Error(`X-Frame-Options received an invalid action ${JSON.stringify(action)}`)
	}
}
function xFrameOptions(options = {}) {
	const headerValue = getHeaderValueFromOptions$1(options)
	return function xFrameOptionsMiddleware(_req, res, next) {
		res.setHeader("X-Frame-Options", headerValue)
		next()
	}
}

const ALLOWED_PERMITTED_POLICIES = new Set(["none", "master-only", "by-content-type", "all"])
function getHeaderValueFromOptions({permittedPolicies = "none"}) {
	if (ALLOWED_PERMITTED_POLICIES.has(permittedPolicies)) {
		return permittedPolicies
	} else {
		throw new Error(`X-Permitted-Cross-Domain-Policies does not support ${JSON.stringify(permittedPolicies)}`)
	}
}
function xPermittedCrossDomainPolicies(options = {}) {
	const headerValue = getHeaderValueFromOptions(options)
	return function xPermittedCrossDomainPoliciesMiddleware(_req, res, next) {
		res.setHeader("X-Permitted-Cross-Domain-Policies", headerValue)
		next()
	}
}

function xPoweredBy() {
	return function xPoweredByMiddleware(_req, res, next) {
		res.removeHeader("X-Powered-By")
		next()
	}
}

function xXssProtection() {
	return function xXssProtectionMiddleware(_req, res, next) {
		res.setHeader("X-XSS-Protection", "0")
		next()
	}
}

function getMiddlewareFunctionsFromOptions(options) {
	const result = []
	switch (options.contentSecurityPolicy) {
		case undefined:
		case true:
			result.push(contentSecurityPolicy())
			break
		case false:
			break
		default:
			result.push(contentSecurityPolicy(options.contentSecurityPolicy))
			break
	}
	switch (options.crossOriginEmbedderPolicy) {
		case undefined:
		case false:
			break
		case true:
			result.push(crossOriginEmbedderPolicy())
			break
		default:
			result.push(crossOriginEmbedderPolicy(options.crossOriginEmbedderPolicy))
			break
	}
	switch (options.crossOriginOpenerPolicy) {
		case undefined:
		case true:
			result.push(crossOriginOpenerPolicy())
			break
		case false:
			break
		default:
			result.push(crossOriginOpenerPolicy(options.crossOriginOpenerPolicy))
			break
	}
	switch (options.crossOriginResourcePolicy) {
		case undefined:
		case true:
			result.push(crossOriginResourcePolicy())
			break
		case false:
			break
		default:
			result.push(crossOriginResourcePolicy(options.crossOriginResourcePolicy))
			break
	}
	switch (options.originAgentCluster) {
		case undefined:
		case true:
			result.push(originAgentCluster())
			break
		case false:
			break
		default:
			console.warn("Origin-Agent-Cluster does not take options. Remove the property to silence this warning.")
			result.push(originAgentCluster())
			break
	}
	switch (options.referrerPolicy) {
		case undefined:
		case true:
			result.push(referrerPolicy())
			break
		case false:
			break
		default:
			result.push(referrerPolicy(options.referrerPolicy))
			break
	}
	if ("strictTransportSecurity" in options && "hsts" in options) {
		throw new Error("Strict-Transport-Security option was specified twice. Remove `hsts` to silence this warning.")
	}
	const strictTransportSecurityOption = options.strictTransportSecurity ?? options.hsts
	switch (strictTransportSecurityOption) {
		case undefined:
		case true:
			result.push(strictTransportSecurity())
			break
		case false:
			break
		default:
			result.push(strictTransportSecurity(strictTransportSecurityOption))
			break
	}
	if ("xContentTypeOptions" in options && "noSniff" in options) {
		throw new Error("X-Content-Type-Options option was specified twice. Remove `noSniff` to silence this warning.")
	}
	const xContentTypeOptionsOption = options.xContentTypeOptions ?? options.noSniff
	switch (xContentTypeOptionsOption) {
		case undefined:
		case true:
			result.push(xContentTypeOptions())
			break
		case false:
			break
		default:
			console.warn("X-Content-Type-Options does not take options. Remove the property to silence this warning.")
			result.push(xContentTypeOptions())
			break
	}
	if ("xDnsPrefetchControl" in options && "dnsPrefetchControl" in options) {
		throw new Error("X-DNS-Prefetch-Control option was specified twice. Remove `dnsPrefetchControl` to silence this warning.")
	}
	const xDnsPrefetchControlOption = options.xDnsPrefetchControl ?? options.dnsPrefetchControl
	switch (xDnsPrefetchControlOption) {
		case undefined:
		case true:
			result.push(xDnsPrefetchControl())
			break
		case false:
			break
		default:
			result.push(xDnsPrefetchControl(xDnsPrefetchControlOption))
			break
	}
	if ("xDownloadOptions" in options && "ieNoOpen" in options) {
		throw new Error("X-Download-Options option was specified twice. Remove `ieNoOpen` to silence this warning.")
	}
	const xDownloadOptionsOption = options.xDownloadOptions ?? options.ieNoOpen
	switch (xDownloadOptionsOption) {
		case undefined:
		case true:
			result.push(xDownloadOptions())
			break
		case false:
			break
		default:
			console.warn("X-Download-Options does not take options. Remove the property to silence this warning.")
			result.push(xDownloadOptions())
			break
	}
	if ("xFrameOptions" in options && "frameguard" in options) {
		throw new Error("X-Frame-Options option was specified twice. Remove `frameguard` to silence this warning.")
	}
	const xFrameOptionsOption = options.xFrameOptions ?? options.frameguard
	switch (xFrameOptionsOption) {
		case undefined:
		case true:
			result.push(xFrameOptions())
			break
		case false:
			break
		default:
			result.push(xFrameOptions(xFrameOptionsOption))
			break
	}
	if ("xPermittedCrossDomainPolicies" in options && "permittedCrossDomainPolicies" in options) {
		throw new Error("X-Permitted-Cross-Domain-Policies option was specified twice. Remove `permittedCrossDomainPolicies` to silence this warning.")
	}
	const xPermittedCrossDomainPoliciesOption = options.xPermittedCrossDomainPolicies ?? options.permittedCrossDomainPolicies
	switch (xPermittedCrossDomainPoliciesOption) {
		case undefined:
		case true:
			result.push(xPermittedCrossDomainPolicies())
			break
		case false:
			break
		default:
			result.push(xPermittedCrossDomainPolicies(xPermittedCrossDomainPoliciesOption))
			break
	}
	if ("xPoweredBy" in options && "hidePoweredBy" in options) {
		throw new Error("X-Powered-By option was specified twice. Remove `hidePoweredBy` to silence this warning.")
	}
	const xPoweredByOption = options.xPoweredBy ?? options.hidePoweredBy
	switch (xPoweredByOption) {
		case undefined:
		case true:
			result.push(xPoweredBy())
			break
		case false:
			break
		default:
			console.warn("X-Powered-By does not take options. Remove the property to silence this warning.")
			result.push(xPoweredBy())
			break
	}
	if ("xXssProtection" in options && "xssFilter" in options) {
		throw new Error("X-XSS-Protection option was specified twice. Remove `xssFilter` to silence this warning.")
	}
	const xXssProtectionOption = options.xXssProtection ?? options.xssFilter
	switch (xXssProtectionOption) {
		case undefined:
		case true:
			result.push(xXssProtection())
			break
		case false:
			break
		default:
			console.warn("X-XSS-Protection does not take options. Remove the property to silence this warning.")
			result.push(xXssProtection())
			break
	}
	return result
}
const helmet = Object.assign(
	function helmet(options = {}) {
		// People should be able to pass an options object with no prototype,
		// so we want this optional chaining.
		// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
		if (options.constructor?.name === "IncomingMessage") {
			throw new Error("It appears you have done something like `app.use(helmet)`, but it should be `app.use(helmet())`.")
		}
		const middlewareFunctions = getMiddlewareFunctionsFromOptions(options)
		return function helmetMiddleware(req, res, next) {
			let middlewareIndex = 0
			;(function internalNext(err) {
				if (err) {
					next(err)
					return
				}
				const middlewareFunction = middlewareFunctions[middlewareIndex]
				if (middlewareFunction) {
					middlewareIndex++
					middlewareFunction(req, res, internalNext)
				} else {
					next()
				}
			})()
		}
	},
	{
		contentSecurityPolicy,
		crossOriginEmbedderPolicy,
		crossOriginOpenerPolicy,
		crossOriginResourcePolicy,
		originAgentCluster,
		referrerPolicy,
		strictTransportSecurity,
		xContentTypeOptions,
		xDnsPrefetchControl,
		xDownloadOptions,
		xFrameOptions,
		xPermittedCrossDomainPolicies,
		xPoweredBy,
		xXssProtection,
		// Legacy aliases
		dnsPrefetchControl: xDnsPrefetchControl,
		xssFilter: xXssProtection,
		permittedCrossDomainPolicies: xPermittedCrossDomainPolicies,
		ieNoOpen: xDownloadOptions,
		noSniff: xContentTypeOptions,
		frameguard: xFrameOptions,
		hidePoweredBy: xPoweredBy,
		hsts: strictTransportSecurity
	}
)




/***/ }),

/***/ "../node_modules/@aws-sdk/client-s3/package.json":
/*!*******************************************************!*\
  !*** ../node_modules/@aws-sdk/client-s3/package.json ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"name":"@aws-sdk/client-s3","description":"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native","version":"3.744.0","scripts":{"build":"concurrently \'yarn:build:cjs\' \'yarn:build:es\' \'yarn:build:types\'","build:cjs":"node ../../scripts/compilation/inline client-s3","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4","clean":"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3","test":"yarn g:vitest run","test:browser":"node ./test/browser-build/esbuild && yarn g:vitest run -c vitest.config.browser.ts","test:browser:watch":"node ./test/browser-build/esbuild && yarn g:vitest watch -c vitest.config.browser.ts","test:e2e":"yarn g:vitest run -c vitest.config.e2e.ts && yarn test:browser","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.ts","test:watch":"yarn g:vitest watch"},"main":"./dist-cjs/index.js","types":"./dist-types/index.d.ts","module":"./dist-es/index.js","sideEffects":false,"dependencies":{"@aws-crypto/sha1-browser":"5.2.0","@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.744.0","@aws-sdk/credential-provider-node":"3.744.0","@aws-sdk/middleware-bucket-endpoint":"3.734.0","@aws-sdk/middleware-expect-continue":"3.734.0","@aws-sdk/middleware-flexible-checksums":"3.744.0","@aws-sdk/middleware-host-header":"3.734.0","@aws-sdk/middleware-location-constraint":"3.734.0","@aws-sdk/middleware-logger":"3.734.0","@aws-sdk/middleware-recursion-detection":"3.734.0","@aws-sdk/middleware-sdk-s3":"3.744.0","@aws-sdk/middleware-ssec":"3.734.0","@aws-sdk/middleware-user-agent":"3.744.0","@aws-sdk/region-config-resolver":"3.734.0","@aws-sdk/signature-v4-multi-region":"3.744.0","@aws-sdk/types":"3.734.0","@aws-sdk/util-endpoints":"3.743.0","@aws-sdk/util-user-agent-browser":"3.734.0","@aws-sdk/util-user-agent-node":"3.744.0","@aws-sdk/xml-builder":"3.734.0","@smithy/config-resolver":"^4.0.1","@smithy/core":"^3.1.2","@smithy/eventstream-serde-browser":"^4.0.1","@smithy/eventstream-serde-config-resolver":"^4.0.1","@smithy/eventstream-serde-node":"^4.0.1","@smithy/fetch-http-handler":"^5.0.1","@smithy/hash-blob-browser":"^4.0.1","@smithy/hash-node":"^4.0.1","@smithy/hash-stream-node":"^4.0.1","@smithy/invalid-dependency":"^4.0.1","@smithy/md5-js":"^4.0.1","@smithy/middleware-content-length":"^4.0.1","@smithy/middleware-endpoint":"^4.0.3","@smithy/middleware-retry":"^4.0.4","@smithy/middleware-serde":"^4.0.2","@smithy/middleware-stack":"^4.0.1","@smithy/node-config-provider":"^4.0.1","@smithy/node-http-handler":"^4.0.2","@smithy/protocol-http":"^5.0.1","@smithy/smithy-client":"^4.1.3","@smithy/types":"^4.1.0","@smithy/url-parser":"^4.0.1","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.4","@smithy/util-defaults-mode-node":"^4.0.4","@smithy/util-endpoints":"^3.0.1","@smithy/util-middleware":"^4.0.1","@smithy/util-retry":"^4.0.1","@smithy/util-stream":"^4.0.2","@smithy/util-utf8":"^4.0.0","@smithy/util-waiter":"^4.0.2","tslib":"^2.6.2"},"devDependencies":{"@aws-sdk/signature-v4-crt":"3.744.0","@tsconfig/node18":"18.2.4","@types/node":"^18.19.69","concurrently":"7.0.0","downlevel-dts":"0.10.1","rimraf":"3.0.2","typescript":"~5.2.2"},"engines":{"node":">=18.0.0"},"typesVersions":{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},"files":["dist-*/**"],"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","browser":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},"homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-s3"}}');

/***/ }),

/***/ "../node_modules/@aws-sdk/util-endpoints/dist-es/lib/aws/partitions.json":
/*!*******************************************************************************!*\
  !*** ../node_modules/@aws-sdk/util-endpoints/dist-es/lib/aws/partitions.json ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il|mx)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"ap-southeast-5":{"description":"Asia Pacific (Malaysia)"},"ap-southeast-7":{"description":"Asia Pacific (Thailand)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"mx-central-1":{"description":"Mexico (Central)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{"eu-isoe-west-1":{"description":"EU ISOE West"}}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-f-global":{"description":"AWS ISOF global region"},"us-isof-east-1":{"description":"US ISOF EAST"},"us-isof-south-1":{"description":"US ISOF SOUTH"}}}],"version":"1.1"}');

/***/ }),

/***/ "../node_modules/@slack/web-api/package.json":
/*!***************************************************!*\
  !*** ../node_modules/@slack/web-api/package.json ***!
  \***************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"name":"@slack/web-api","version":"7.8.0","description":"Official library for using the Slack Platform\'s Web API","author":"Slack Technologies, LLC","license":"MIT","keywords":["slack","web-api","bot","client","http","api","proxy","rate-limiting","pagination"],"main":"dist/index.js","types":"./dist/index.d.ts","files":["dist/**/*"],"engines":{"node":">= 18","npm":">= 8.6.0"},"repository":"slackapi/node-slack-sdk","homepage":"https://slack.dev/node-slack-sdk/web-api","publishConfig":{"access":"public"},"bugs":{"url":"https://github.com/slackapi/node-slack-sdk/issues"},"scripts":{"prepare":"npm run build","build":"npm run build:clean && tsc","build:clean":"shx rm -rf ./dist ./coverage","lint":"npx @biomejs/biome check .","lint:fix":"npx @biomejs/biome check --write .","mocha":"mocha --config .mocharc.json \\"./src/**/*.spec.ts\\"","test":"npm run lint && npm run test:types && npm run test:integration && npm run test:unit","test:integration":"npm run build && node test/integration/commonjs-project/index.js && node test/integration/esm-project/index.mjs && npm run test:integration:ts","test:integration:ts":"cd test/integration/ts-4.7-project && npm i && npm run build","test:unit":"npm run build && c8 npm run mocha","test:types":"tsd","watch":"npx nodemon --watch \'src\' --ext \'ts\' --exec npm run build"},"dependencies":{"@slack/logger":"^4.0.0","@slack/types":"^2.9.0","@types/node":">=18.0.0","@types/retry":"0.12.0","axios":"^1.7.8","eventemitter3":"^5.0.1","form-data":"^4.0.0","is-electron":"2.2.2","is-stream":"^2","p-queue":"^6","p-retry":"^4","retry":"^0.13.1"},"devDependencies":{"@biomejs/biome":"^1.8.3","@tsconfig/recommended":"^1","@types/busboy":"^1.5.4","@types/chai":"^4","@types/mocha":"^10","@types/sinon":"^17","busboy":"^1","c8":"^10.1.2","chai":"^4","mocha":"^11","nock":"^13","shx":"^0.3.2","sinon":"^19","source-map-support":"^0.5.21","ts-node":"^10","tsd":"^0.31.1","typescript":"5.3.3"},"tsd":{"directory":"test/types"}}');

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/ensure chunk */
/******/ 	(() => {
/******/ 		__webpack_require__.f = {};
/******/ 		// This file contains only the entry chunk.
/******/ 		// The chunk loading function for additional chunks
/******/ 		__webpack_require__.e = (chunkId) => {
/******/ 			return Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {
/******/ 				__webpack_require__.f[key](chunkId, promises);
/******/ 				return promises;
/******/ 			}, []));
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get javascript chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.u = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return "" + chunkId + ".main.js";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/require chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded chunks
/******/ 		// "1" means "loaded", otherwise not loaded yet
/******/ 		var installedChunks = {
/******/ 			"main": 1
/******/ 		};
/******/ 		
/******/ 		// no on chunks loaded
/******/ 		
/******/ 		var installChunk = (chunk) => {
/******/ 			var moreModules = chunk.modules, chunkIds = chunk.ids, runtime = chunk.runtime;
/******/ 			for(var moduleId in moreModules) {
/******/ 				if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 					__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 				}
/******/ 			}
/******/ 			if(runtime) runtime(__webpack_require__);
/******/ 			for(var i = 0; i < chunkIds.length; i++)
/******/ 				installedChunks[chunkIds[i]] = 1;
/******/ 		
/******/ 		};
/******/ 		
/******/ 		// require() chunk loading for javascript
/******/ 		__webpack_require__.f.require = (chunkId, promises) => {
/******/ 			// "1" is the signal for "already loaded"
/******/ 			if(!installedChunks[chunkId]) {
/******/ 				if(true) { // all chunks have JS
/******/ 					installChunk(require("./" + __webpack_require__.u(chunkId)));
/******/ 				} else installedChunks[chunkId] = 1;
/******/ 			}
/******/ 		};
/******/ 		
/******/ 		// no external install chunk
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
/* harmony import */ var _nestjs_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_nestjs_core__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
/* harmony import */ var _nestjs_common__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_nestjs_common__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
/* harmony import */ var _nestjs_swagger__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_nestjs_swagger__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
/* harmony import */ var _nestjs_config__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_nestjs_config__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var helmet__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! helmet */ "../node_modules/helmet/index.mjs");
/* harmony import */ var compression__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! compression */ "../node_modules/compression/index.js");
/* harmony import */ var compression__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(compression__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _app_module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./app.module */ "./src/app.module.ts");







async function bootstrap() {
    const app = await _nestjs_core__WEBPACK_IMPORTED_MODULE_0__.NestFactory.create(_app_module__WEBPACK_IMPORTED_MODULE_6__.AppModule);
    const configService = app.get(_nestjs_config__WEBPACK_IMPORTED_MODULE_3__.ConfigService);
    app.use((0,helmet__WEBPACK_IMPORTED_MODULE_4__["default"])());
    app.use(compression__WEBPACK_IMPORTED_MODULE_5___default()());
    app.enableCors({
        origin: configService.get('app.corsOrigins'),
        methods: ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'],
        allowedHeaders: ['Content-Type', 'Authorization'],
        credentials: true,
    });
    app.useGlobalPipes(new _nestjs_common__WEBPACK_IMPORTED_MODULE_1__.ValidationPipe({
        whitelist: true,
        transform: true,
        forbidNonWhitelisted: true,
        transformOptions: {
            enableImplicitConversion: true,
        },
    }));
    const config = new _nestjs_swagger__WEBPACK_IMPORTED_MODULE_2__.DocumentBuilder()
        .setTitle('Patient Relationship Manager API')
        .setDescription('API documentation for Patient Relationship Manager')
        .setVersion(configService.get('app.version') || '1.0.0')
        .addBearerAuth()
        .addTag('System')
        .addTag('Auth')
        .addTag('Users')
        .addTag('Organizations')
        .addTag('Contacts')
        .addTag('Appointments')
        .addTag('Tickets')
        .addTag('Messages')
        .addTag('Notifications')
        .build();
    const document = _nestjs_swagger__WEBPACK_IMPORTED_MODULE_2__.SwaggerModule.createDocument(app, config);
    _nestjs_swagger__WEBPACK_IMPORTED_MODULE_2__.SwaggerModule.setup('api', app, document, {
        swaggerOptions: {
            persistAuthorization: true,
            tagsSorter: 'alpha',
            operationsSorter: 'alpha',
        },
    });
    const port = configService.get('app.port');
    await app.listen(port);
    console.log(`Application is running on: ${await app.getUrl()}`);
    console.log(`API documentation available at: ${await app.getUrl()}/api`);
}
bootstrap().catch(err => {
    console.error('Failed to start application:', err);
    process.exit(1);
});

})();

/******/ })()
;